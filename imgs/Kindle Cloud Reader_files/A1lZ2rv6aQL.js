////////////////////////////////////////////
;(function (packageFunction) {
  var p = window.AmazonUIPageJS || window.P;
  var attribute = p._namespace || p.attributeErrors;
  var namespacedP = attribute ? attribute("KCRClientAssets@kindleReaderApp", "KCRClient") : p;

  if (namespacedP.guardFatal) {
    namespacedP.guardFatal(packageFunction)(namespacedP, window);
  } else {
    namespacedP.execute(function () {
      packageFunction(namespacedP, window);
    });
  }
}(function(P, window, undefined){
// BEGIN ASSET KCRClientAssets@kindleReaderApp-1.0.704.0
/////////////////////////
// BEGIN FILE lib/KindleCommon.js
/////////////////////////
/*


Full source (including license, if applicable) included below.
*/
/*! Amazon elects to use this software under the MIT license. */
/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement)cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close();d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1)for(h in a.converters)typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h]);l=k,k=d[g];if(k==="*")k=l;else if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g)i in d&&(c[g[i]]=d[i]);while(f[0]==="*")f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"));if(h)for(i in e)if(e[i]&&e[i].test(h)){f.unshift(i);break}if(f[0]in d)j=f[0];else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b))f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&f.type(b)==="object")for(var e in b)b_(a+"["+e+"]",b[e],c,d);else d(a,b)}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++)l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)));(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++)h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border")for(;e<g;e+=2)c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0;return d+"px"}d=by(a,b);if(d<0||d==null)d=a.style[b];if(bt.test(d))return d;d=parseFloat(d)||0;if(c)for(;e<g;e+=2)d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0);return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio")a.defaultChecked=a.checked}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i)for(d=0,e=i[c].length;d<e;d++)f.event.add(b,c,i[c][d])}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}function T(a,b,c){b=b||0;if(f.isFunction(b))return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c});if(b.nodeType)return f.grep(a,function(a,d){return a===b===c});if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b))return f.filter(b,d,!c);b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return!a||!a.parentNode||a.parentNode.nodeType===11}function K(){return!0}function J(){return!1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b]))continue;if(b!=="toJSON")return!1}return!0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else d=b}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++)b[a[c]]=!0;return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a)return this;if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2])return f.find(a);this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return!d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a))return f.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++)if((a=arguments[j])!=null)for(c in a){d=i[c],f=a[c];if(i===f)continue;l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body)return setTimeout(e.ready,1);e.isReady=!0;if(a!==!0&&--e.readyWait>0)return;A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete")return setTimeout(e.ready,1);if(c.addEventListener)c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b)return null;b=e.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(n.test(b.replace(o,"@").replace(p,"]").replace(q,"")))return(new Function("return "+b))();e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c)return null;var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a)if(c.apply(a[f],d)===!1)break}else for(;g<h;)if(c.apply(a[g++],d)===!1)break}else if(i){for(f in a)if(c.call(a[f],f,a[f])===!1)break}else for(;g<h;)if(c.call(a[g],g,a[g++])===!1)break;return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H)return H.call(b,a,c);d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number")for(var f=c.length;e<f;e++)a[d++]=c[e];else while(c[e]!==b)a[d++]=c[e++];a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++)e=!!b(a[f],f),c!==e&&d.push(a[f]);return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k)for(;i<j;i++)f=c(a[i],i,d),f!=null&&(h[h.length]=f);else for(g in a)f=c(a[g],g,d),f!=null&&(h[h.length]=f);return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a))return b;var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d)e.access(a,c,l,d[l],1,h,f);g=1}else if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c)for(;l<m;l++)c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i);g=1}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++)g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++)if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++)for(var f=0;f<c.length;f++)if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique)break}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++)if(a===c[b])return!0}return!1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return!c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return!d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}},i=h.promise({}),j;for(j in g)i[j]=g[j].fire,i[j+"With"]=g[j].fireWith;i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++)b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g;g||j.resolveWith(j,b)}else j!==a&&j.resolveWith(j,d?[a]:[]);return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e)return{};g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent)for(n in{submit:1,change:1,focusin:1})m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o;j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div>"+"<table "+n+"' cellpadding='0' cellspacing='0'>"+"<tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return!!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b)return;n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function")e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c);g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c])return g.events;k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k])return;if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++)delete d[b[e]];if(!(c?m:f.isEmptyObject)(d))return}}if(!c){delete j[k].data;if(!m(j[k]))return}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b)return b!==!0&&a.getAttribute("classid")===b}return!0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++)h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]));f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object")return this.each(function(){f.data(this,a)});d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d)return f.queue(this[0],a);return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--)if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0))h++,l.add(m);m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a))return this.each(function(b){f(this).addClass(a.call(this,b,this.className))});if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1)if(!e.className&&b.length===1)e.className=a;else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++)~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ");e.className=f.trim(g)}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a))return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))});if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className)if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++)h=h.replace(" "+c[i]+" "," ");g.className=f.trim(h)}else g.className=""}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a))return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)});return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++])i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}else if(c==="undefined"||c==="boolean")this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,g=this[0];{if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,h,"value")===b)this.value=h}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0)return null;c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j)return b;h.push(b)}}if(j&&!h.length&&i.length)return f(i[g]).val();return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn)return f(a)[c](d);if(typeof a.getAttribute=="undefined")return f.prop(a,c,d);i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set"in h&&i&&(g=h.set(a,d,c))!==b)return g;a.setAttribute(c,""+d);return d}if(h&&"get"in h&&i&&(g=h.get(a,c))!==null)return g;g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++)e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode)f.error("type property can't be changed");else if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button"))return w.get(a,b);return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button"))return w.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b))return a.checked=f.inArray(f(a).val(),b)>=0}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(
a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1)a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o)f.event.remove(a,j+b[h],c,d,!0);continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++)s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s));r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered))return;h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h])return;c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j)j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0);return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1)return;r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode)r.push([m,s]),n=m;n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++)m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault();c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this)if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++)s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s);r.length&&j.push({elem:m,matches:r})}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace))c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando])return a;var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;)e=i[--d],a[e]=g[e];a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event))return new f.Event(a,b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d))a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b;return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form"))return!1;f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form"))return!1;f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))});return!1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox")return a.handleObj.handler.apply(this,arguments)},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a)this.on(i,c,d,a[i],g);return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1)e=J;else if(!e)return this;g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a)this.off(g,c,a[g]);return this}if(c===!1||typeof c=="function")d=c,c=b;d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return f.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else if(m.filter(b,[j]).length>0){k=j;break}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9)return[];if(!b||typeof b!="string")return e;var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b))if(w.length===2&&o.relative[w[0]])j=y(w[0]+w[1],d,f);else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length)b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length)q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}else k=w=[]}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]")if(!u)e.push.apply(e,k);else if(d&&d.nodeType===1)for(t=0;k[t]!=null;t++)k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t]);else for(t=0;k[t]!=null;t++)k[t]&&k[t].nodeType===1&&e.push(j[t]);else s(k,e);l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h)for(var b=1;b<a.length;b++)a[b]===a[b-1]&&a.splice(b--,1)}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a)return[];for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter)if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\")continue;s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f)g=i=!0;else if(f===!0)continue}if(f)for(n=0;(j=s[n])!=null;n++)j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0));if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g)return[];break}}if(a===q)if(g==null)m.error(a);else break;q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string")return a.textContent;if(typeof a.innerText=="string")return a.innerText.replace(k,"");for(a=a.firstChild;a;a=a.nextSibling)e+=n(a)}else if(d===3||d===4)return a.nodeValue}else for(b=0;c=a[b];b++)c.nodeType!==8&&(e+=n(c));return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++)if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1);a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++)c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b);d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++)d[e].getAttribute("name")===a[1]&&c.push(d[e]);return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined")return b.getElementsByTagName(a[1])}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f)return a;for(var g=0,h;(h=b[g])!=null;g++)h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1));return!1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else a[2]&&m.error(a[0]);a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not")if((a.exec(b[3])||"").length>1||/^\w/.test(b[3]))b[3]=m(b[3],null,null,c);else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return!1}else if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0]))return!0;return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return!!a.firstChild},empty:function(a){return!a.firstChild},has:function(a,b,c){return!!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f)return f(a,c,b,d);if(e==="contains")return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0;if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++)if(g[h]===a)return!1;return!0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling)if(l.nodeType===1)return!1;if(k==="first")return!0;l=a;case"last":while(l=l.nextSibling)if(l.nodeType===1)return!1;return!0;case"nth":c=b[2],e=b[3];if(c===1&&e===0)return!0;f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling)l.nodeType===1&&(l.nodeIndex=++i);g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f)return f(a,c,b,d)}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match)o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q));o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]")Array.prototype.push.apply(d,a);else if(typeof a.length=="number")for(var e=a.length;c<e;c++)d.push(a[c]);else for(;a[c];c++)d.push(a[c]);return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition)return a.compareDocumentPosition?-1:1;return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i)return v(a,b);if(!g)return-1;if(!i)return 1;while(j)e.unshift(j),j=j.parentNode;j=i;while(j)f.unshift(j),j=j.parentNode;c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++)if(e[k]!==f[k])return v(e[k],f[k]);return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b)return c;var d=a.nextSibling;while(d){if(d===b)return-1;d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++)c[e].nodeType===1&&d.push(c[e]);c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1])return s(e.getElementsByTagName(b),f);if(h[2]&&o.find.CLASS&&e.getElementsByClassName)return s(e.getElementsByClassName(h[2]),f)}if(e.nodeType===9){if(b==="body"&&e.body)return s([e.body],f);if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode)return s([],f);if(i.id===h[3])return s([i],f)}try{return s(e.querySelectorAll(b),f)}catch(j){}}else if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p)return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}catch(r){}finally{l||k.removeAttribute("id")}}}return a(b,e,f,g)};for(var e in a)m[e]=a[e];b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a))try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11)return f}}catch(g){}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1)return;o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c)return b.getElementsByClassName(a[1])},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return!1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a))f+=d[0],a=a.replace(o.match.PSEUDO,"");a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++)m(a,g[h],e,c);return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string")return f(a).filter(function(){for(c=0,d=b.length;c<d;c++)if(f.contains(b[c],this))return!0});var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0)for(h=g;h<e.length;h++)for(i=0;i<g;i++)if(e[i]===e[h]){e.splice(h--,1);break}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++)if(f.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return!!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++)f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h});g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11)break}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a)return this[0]&&this[0].parentNode?this.prevAll().length:-1;if(typeof a=="string")return f.inArray(this[0],f(a));return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d)))g.nodeType===1&&e.push(g),g=g[c];return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c])if(a.nodeType===1&&++e===b)break;return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapAll(a.call(this,b))});if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a))return this.each(function(b){f(this).wrapInner(a.call(this,b))});return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=f
.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++)if(!a||f.filter(a,[d]).length)!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d);return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild)b.removeChild(b.firstChild)}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return c.nodeType===1?c.innerHTML.replace(W,""):null;if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a))return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))});typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j))return this.each(function(){f(this).domManip(a,c,d,!0)});if(f.isFunction(j))return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)});if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++)d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g)e[g]&&bk(d[g],e[g])}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g)bj(d[g],e[g])}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l)continue;if(typeof l=="string")if(!_.test(l))l=b.createTextNode(l);else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--)p=p.lastChild;if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i)f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}var u;if(!f.support.appendChecked)if(l[0]&&typeof (u=l.length)=="number")for(i=0;i<u;i++)bn(l[i]);else bn(l);l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return!a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type)))e.push(h.parentNode?h.parentNode.removeChild(h):h);else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()])continue;c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events)e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle);b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get"in k&&(g=k.get(a,!1,e))!==b)return g;return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d))return;h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set"in k)||(d=k.set(a,d))!==b)try{j[c]=d}catch(l){}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get"in g&&(e=g.get(a,!0,d))!==b)return e;if(by)return by(a,c)},swap:function(a,b,c){var d={},e,f;for(f in b)d[f]=a.style[f],a.style[f]=b[f];e=c.call(a);for(f in b)a.style[f]=d[f];return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter)return}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return!f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++)f[a+bx[d]+b]=e[d]||e[d-2]||e[0];return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR)return bR.apply(this,arguments);if(!this.length)return this;var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified"))f.lastModified[k]=y;if(z=v.getResponseHeader("Etag"))f.etag[k]=z}if(a===304)w="notmodified",o=!0;else try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}else{u=w;if(!w||a)w="error",a<0&&(a=0)}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else b=a[v.status],v.then(b,b)}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2)return!1;t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers)v.setRequestHeader(u,d.headers[u]);if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return!1}for(u in{success:1,error:1,complete:1})v[u](d[u]);p=bZ(bT,d,c,v);if(!p)w(-1,"No Transport");else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2)w(-1,z);else throw z}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a))f.each(a,function(){e(this.name,this.value)});else for(var g in a)b_(g,a[g],c,e);return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState))d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg)cg[a](0,1)}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields)for(j in c.xhrFields)h[j]=c.xhrFields[j];c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e)h.setRequestHeader(j,e[j])}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e)h.readyState!==4&&h.abort();else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0)return this.animate(ct("show",3),a,b,c);for(var g=0,h=this.length;g<h;g++)d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)));for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none")d.style.display=f._data(d,"olddisplay")||""}}return this},hide:function(a,b,c){if(a||a===0)return this.animate(ct("hide",3),a,b,c);var d,e,g=0,h=this.length;for(;g<h;g++)d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e));for(g=0;g<h;g++)this[g].style&&(this[g].style.display="none");return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand"in k){l=k.expand(a[g]),delete a[g];for(i in l)i in a||(a[i]=l[i])}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d)return b.complete.call(this);c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a)j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""));return!0}var e=f.speed(b,c,d);if(f.isEmptyObject(a))return this.each(e.complete,[!1]);a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null)for(b in g)g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b);else g[b=a+".run"]&&g[b].stop&&h(this,g,b);for(b=e.length;b--;)e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1));(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return-Math.cos(a*Math.PI)/2+.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties)i.animatedProperties[b]!==!0&&(g=!1);if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show)for(b in i.animatedProperties)f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0);d=i.complete,d&&(i.complete=!1,d.call(h))}return!1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return!0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect"in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a))return d?{top:d.top,left:d.left}:{top:0,left:0};var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed")break;d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static")k+=h.offsetTop,l+=h.offsetLeft;f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)});var c=this[0],d=c&&c.ownerDocument;if(!d)return null;if(c===d.body)return f.offset.bodyOffset(c);return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using"in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0])return null;var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static")a=a.offsetParent;return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b)return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e];h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e])return i[d];return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);
/*! For license information please see karamel-gen-client-kcr.js.LICENSE.txt */
var KaramelGenClient=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=55)}([function(module,exports,__webpack_require__){var e;"undefined"!=typeof self&&self,e=function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=44)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(1);class r{constructor(t,e,n,i){this.top=t,this.bottom=e,this.left=n,this.right=i}static applyTransformationToBoundingBoxPoints(t,e){const n=t[i.b.HorizontalScaling],o=t[i.b.VerticalScaling],s=t[i.b.HorizontalTranslation],a=t[i.b.VerticalTranslation],c=e.top*o+a,l=e.bottom*o+a,u=e.left*n+s,h=e.right*n+s;return new r(c,l,u,h)}static getBoudningBoxByPath(t){let e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const s=t.split(" ");for(let t=0;t<s.length;t++)if(""!=s[t]){const r=this.isLetter(s[t][0])?s[t].substr(1).split(","):s[t].split(",");if(r.length>=2)for(let t=0;t<r.length;t++)t%2==0?(e=Math.min(parseFloat(r[t]),e),i=Math.max(parseFloat(r[t]),i)):(n=Math.min(parseFloat(r[t]),n),o=Math.max(parseFloat(r[t]),o))}return new r(n,o,e,i)}compute(t){return 0===this.top&&0===this.bottom&&0===this.left&&0==this.right?t:0===t.top&&0===t.bottom&&0===t.left&&0==t.right?this:new r(Math.min(this.top,t.top),Math.max(this.bottom,t.bottom),Math.min(this.left,t.left),Math.max(this.right,t.right))}static isLetter(t){return t.toLowerCase()!=t.toUpperCase()}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var i,r=n(3),o=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){t[t.HorizontalScaling=0]="HorizontalScaling",t[t.VerticalSkewing=1]="VerticalSkewing",t[t.HorizontalSkewing=2]="HorizontalSkewing",t[t.VerticalScaling=3]="VerticalScaling",t[t.HorizontalTranslation=4]="HorizontalTranslation",t[t.VerticalTranslation=5]="VerticalTranslation"}(i||(i={}));class s{static getDpi(){if(s.dpi<0){const t=document.createElement("div"),e=t.style;e.height="1in",e.width="1in",e.top="-100%",e.left="-100%",e.position="absolute",document.body.appendChild(t);const n=t.offsetHeight;document.body.removeChild(t),s.dpi=n}return s.dpi}static getPixelRatio(t){if(s.pixelRatio<0){t.height=20,t.width=20;const e=window.devicePixelRatio||1,n=t.getContext("2d");Object(r.b)(n);const i=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;s.pixelRatio=e/i}return s.pixelRatio}static canvasToBlob(t){const e=t;if(e.toBlob)return new Promise((e=>{t.toBlob((t=>{Object(r.b)(t),e(t)}))}));if(e.convertToBlob)return t.convertToBlob();throw Error("should never happened")}static canvasToImage(t,e,n){return o(this,void 0,void 0,(function*(){const i=yield s.canvasToBlob(t),r=URL.createObjectURL(i);return this.blobToImage(r,e,n).finally((()=>URL.revokeObjectURL(r)))}))}static blobToImage(t,e,n){return o(this,void 0,void 0,(function*(){return new Promise(((i,r)=>{const o=new Image;return o.src=t,void 0!==e&&(o.style.width=e+"px"),void 0!==n&&(o.style.height=n+"px"),o.onload=()=>{i(o)},o.onerror=t=>{r(t)},o}))}))}}s.dpi=-1,s.pixelRatio=-1},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{}i.EXECUTION="ExecutionTime",i.ERROR="ErrorCount",i.NETWORK_ERROR_NOT_FOUND="404",i.NETWORK_ERROR_BAD_REQUEST="400",i.NETWORK_ERROR_SERVER_ERROR="500",i.RENDER_PAGE="RenderPage",i.LOAD_IMAGE="LoadImage",i.REQUEST_IMAGE_FROM_CDN="RequestImageFromCDN",i.PREVIOUS_PAGE="PreviousPage",i.NEXT_PAGE="NextPage",i.FILL_VIEW="FillView",i.ADD_ANNOTATION="AddAnnotation",i.REMOVE_ANNOTATION="RemoveAnnotation",i.CLEAR_TEXT_SELECTION="ClearTextSelection",i.GET_TABLE_OF_CONTENTS="GetTableOfContents",i.GET_METADATA="GetMetadata",i.GET_MANIFEST="GetManifest",i.GET_LOCATION_MAP="GetLocationMap",i.GET_PAGE_POSITION_RANGE="GetPagePositionRange",i.UPDATE_RENDER_OPTIONS="UpdateRenderOptions",i.GET_CURRENT_BOOK_PROVIDER="GetCurrentBookProvider",i.GO_TO_PAGE="GoToPage",i.GO_TO_POSITION="GoToPosition"},function(t,e,n){"use strict";function i(t,e){if(null==t)throw new Error(null!=e?e:"Expected 'val' to be defined, but received "+t)}function r(t,e){if(!t)throw new Error(null!=e?e:'Expected "val" to be true, but it was false')}n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(1);class r{static getDimensions(t){return{width:t.right-t.left,height:t.bottom-t.top}}static convertToAbsolutePosition(t,e){const n=[t.left,t.top,1],i=this.convertXPositionToAbsolute(n,e),r=this.convertYPositionToAbsolute(n,e),o=[t.right,t.bottom,1];return{top:r,left:i,right:this.convertXPositionToAbsolute(o,e),bottom:this.convertYPositionToAbsolute(o,e)}}static convertXPositionToAbsolute(t,e){return e[i.b.HorizontalScaling]*t[0]+e[i.b.HorizontalSkewing]*t[1]+e[i.b.HorizontalTranslation]*t[2]}static convertYPositionToAbsolute(t,e){return e[i.b.VerticalSkewing]*t[0]+e[i.b.VerticalScaling]*t[1]+e[i.b.VerticalTranslation]*t[2]}static round(t){return{bottom:Math.round(t.bottom),left:Math.round(t.left),right:Math.round(t.right),top:Math.round(t.top)}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(){this.path2d="",this.subPathPoints=0,this.subPaths=0}moveTo(t,e){this.subPaths++,this.subPathPoints=0,this.addPathPoint(),this.path2d+=`M ${t} ${e}`}lineTo(t,e){this.addPathPoint(),this.path2d+=`L ${t} ${e}`}relativeLineTo(t,e){this.addPathPoint(),this.path2d+=`l ${t} ${e}`}addEllipticalArc(t,e,n,i,r,o,s){const a=t+n*Math.cos(r/180*Math.PI),c=e+i*Math.sin(r/180*Math.PI),l=t+n*Math.cos(o/180*Math.PI),u=e+i*Math.sin(o/180*Math.PI);let h=(o-r)%360;h<0&&(h+=360);const d=!s&&h>180||s&&h<180;this.subPathPoints<=1?this.moveTo(a,c):this.lineTo(a,c),this.addPathPoint(),this.path2d+=`A ${n} ${i} 0 ${d?1:0} ${s?0:1} ${l} ${u}`}addPathPoint(){(this.subPaths>0||this.subPathPoints>0)&&(this.path2d+=" "),this.subPathPoints++}closePath(){this.addPathPoint(),this.path2d+="z"}build(){return new Path2D(this.path2d)}}},function(t,e,n){"use strict";function i(t){const e=t.h,n=t.s,i=t.v,r=Math.floor(6*e),o=6*e-r,s=i*(1-n),a=i*(1-o*n),c=i*(1-(1-o)*n);let l,u,h;switch(r%6){case 0:l=i,u=c,h=s;break;case 1:l=a,u=i,h=s;break;case 2:l=s,u=i,h=c;break;case 3:l=s,u=a,h=i;break;case 4:l=c,u=s,h=i;break;case 5:l=i,u=s,h=a;break;default:throw new Error("Error converting HSV to RGB")}return{r:Math.round(255*l),g:Math.round(255*u),b:Math.round(255*h)}}function r(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),s=r;let a=r;const c=r-o,l=0==r?0:c/r;if(r==o)a=0;else{switch(r){case e:a=(n-i)/c+(n<i?6:0);break;case n:a=(i-e)/c+2;break;case i:a=(e-n)/c+4}a/=6}return{h:a,s:l,v:s}}function o(t){let e=t.replace("#","");return 3===e.length&&(e=`${e[0]}${e[0]}${e[1]}${e[1]}${e[2]}${e[2]}`),{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:parseInt(e.substring(6,8),16)/255}}function s(t){let e=t.r.toString(16),n=t.g.toString(16),i=t.b.toString(16),r=Math.round(255*t.a).toString(16);return 1===e.length&&(e="0"+e),1===n.length&&(n="0"+n),1===i.length&&(i="0"+i),1===r.length&&(r="0"+r),"#"+e+n+i+r}n.d(e,"a",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s}))},function(t,e,n){"use strict";var i;n.d(e,"a",(function(){return i})),function(t){t[t.Top=0]="Top",t[t.Left=1]="Left",t[t.Bottom=2]="Bottom",t[t.Right=3]="Right"}(i||(i={}))},function(t,e,n){"use strict";var i,r;n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),function(t){t.Forward="Forward",t.Backward="Backward"}(i||(i={})),function(t){t.Position="Position",t.Page="Page"}(r||(r={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(3),r=n(12),o=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class s{constructor(t,e,n,i=!0){this.asin=t,this.pages=new Map,this.tokens=new Map,this.pageIndex=0,this.theme="",this.unscrambleImages=!1,this.host=`${i?"https":"http"}://${e}:${n}`}gotoPage(t){this.pageIndex=t}nextPage(){this.pageIndex++}previousPage(){this.pageIndex--}getImage(t){return o(this,void 0,void 0,(function*(){return yield this.initPromise,new Promise(((e,n)=>o(this,void 0,void 0,(function*(){const i=this.buildUrl("/get-image",{asin:this.asin,theme:this.theme,image:t}),o=this.buildUrl("/get-image-manifest",{asin:this.asin,theme:this.theme,image:t});try{const t=yield fetch(i);if(this.unscrambleImages){const i=yield fetch(o);if(t.ok&&i.ok){const n=yield t.blob(),o=yield i.json(),s=new r.a,a=yield s.unscramble(n,o);e(a)}else n("Failed to load image or manifest")}else t.ok?e(yield t.blob()):n()}catch(t){n(t)}}))))}))}getPage(){return o(this,void 0,void 0,(function*(){const t=this.pageIndex;let e=this.pages.get(t);if(!e){yield this.initPromise;const n=this.buildUrl("/get-page-section",{asin:this.asin,theme:this.theme,pageIndex:String(t)}),i=yield fetch(n);(yield i.json()).forEach((t=>this.pages.set(t.pageIndex,t))),e=this.pages.get(t)}return Object(i.b)(e,"Unable to find page "+t),e}))}getFonts(){return o(this,void 0,void 0,(function*(){return yield this.initPromise,Object(i.b)(this.fonts,"Fonts should be loaded"),this.fonts}))}getTokens(){return o(this,void 0,void 0,(function*(){const t=this.pageIndex;let e=this.tokens.get(t);if(!e){yield this.initPromise;const n=this.buildUrl("/get-tokens-section",{asin:this.asin,theme:this.theme,pageIndex:String(t)}),i=yield fetch(n);(yield i.json()).forEach((t=>this.tokens.set(t.pageIndex,t))),e=this.tokens.get(t)}return Object(i.b)(e,"Unable to find page tokens"),Promise.resolve(e)}))}getLocationMap(){return o(this,void 0,void 0,(function*(){const t=this.buildUrl("/get-location-map",{asin:this.asin,theme:this.theme}),e=yield fetch(t);return yield e.json()}))}getTableOfContent(){return o(this,void 0,void 0,(function*(){return yield this.initPromise,Object(i.b)(this.toc),this.toc}))}getMetadata(){return o(this,void 0,void 0,(function*(){return yield this.initPromise,Object(i.b)(this.metadata),this.metadata}))}getManifest(){return o(this,void 0,void 0,(function*(){return{manifestComplete:!0,formatVersion:3,revision:1,asin:"stub",bookType:"stub",rendererType:"stub",contentType:"stub",bookFormat:"stub",acr:"stub"}}))}render(t){var e;return o(this,void 0,void 0,(function*(){this.theme=null!==(e=t.theme)&&void 0!==e?e:"custom";const n=this.buildUrl("/render",{settings:JSON.stringify(t),theme:this.theme,asin:this.asin});return this.initPromise=fetch(n).then((()=>{this.fonts=new Promise(((t,e)=>{const n=this.buildUrl("/get-glyphs",{asin:this.asin,theme:this.theme});fetch(n).then((e=>{e.json().then((e=>{t(e)}))})).catch((t=>e(t)))})),this.toc=new Promise(((t,e)=>{const n=this.buildUrl("/get-toc",{asin:this.asin,theme:this.theme});fetch(n).then((e=>{e.json().then((e=>{t(e)}))})).catch((t=>e(t)))})),this.metadata=new Promise(((t,e)=>{const n=this.buildUrl("/get-metadata",{asin:this.asin,theme:this.theme});fetch(n).then((e=>{e.json().then((e=>{t(e)}))})).catch((t=>e(t)))})),void 0!==t.pageIndex?this.pageIndex=t.pageIndex:void 0!==t.positionId&&(this.pageIndex=0)}))}))}buildUrl(t,e){const n=new URLSearchParams(e).toString();return`${this.host}/karamelgen${t}?${n}`}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(t,e,n){this.devBookDataLoader=t,this.tokens=n,this.page=e}getImage(t){return this.devBookDataLoader.getImage(t)}getMetadata(){return this.devBookDataLoader.getMetadata()}getManifest(){return this.devBookDataLoader.getManifest()}getLocationMap(){return this.devBookDataLoader.getLocationMap()}getPage(){return this.page}getTableOfContent(){return this.devBookDataLoader.getTableOfContent()}getTokens(){return this.tokens}getFonts(){return this.devBookDataLoader.getFonts()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(0),r=n(2),o=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class s{constructor(t,e){this.nodeRenderers=t.nodeRenderers,this.decorationRender=t.decorationRender,this.metricsUtil=e}render(t){return o(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(r.a.RENDER_PAGE,(()=>o(this,void 0,void 0,(function*(){const e=yield t.bookProvider.getPage();t.context.fillStyle=e.fillColor,t.context.fillRect(0,0,e.width,e.height),t.inkColor=e.inkColor;const n=e.children;return{rect:yield this.renderChildNodes(t,n),startPositionId:e.startPositionId,endPositionId:e.endPositionId,pageFillColor:e.fillColor,pageInkColor:e.inkColor}}))))}))}renderChildNodes(t,e){return o(this,void 0,void 0,(function*(){let n=new i.a(0,0,0,0);if(e&&e.length>0){for(const i of e)if(void 0!==i.rect){const e=yield this.renderDecorations(t,i,!0);n=n.compute(e)}for(const i of e){const e=yield this.renderDecorations(t,i,!1);n=n.compute(e);const r=yield this.renderNode(t,i);n=n.compute(r)}}return n}))}renderNode(t,e){var n;return o(this,void 0,void 0,(function*(){let r=new i.a(0,0,0,0);const o=this.nodeRenderers[e.type];if(!o)return r;const s=t.context;s.save();try{return this.applyClipPath(e,s),this.applyTransform(e,s),s.globalAlpha=null!==(n=e.opacity)&&void 0!==n?n:1,r=r.compute(yield o.render(t,e))}finally{s.restore()}}))}renderDecorations(t,e,n){var r;return o(this,void 0,void 0,(function*(){let o=new i.a(0,0,0,0);if(n&&!e.backDecoration||!n&&!e.frontDecoration)return o;const s=t.context;s.save();try{return this.applyTransform(e,s),s.globalAlpha=null!==(r=e.opacity)&&void 0!==r?r:1,n&&e.backDecoration?o=o.compute(yield this.decorationRender.renderDecorations(t,e.backDecoration,e.type,e.transform)):!n&&e.frontDecoration&&(o=o.compute(yield this.decorationRender.renderDecorations(t,e.frontDecoration,e.type,e.transform))),o}finally{s.restore()}}))}applyTransform(t,e){if(t.transform){const[n,i,r,o,s,a]=t.transform;e.transform(n,i,r,o,s,a)}}applyClipPath(t,e){const n=t.clipPath;if(n){const t=new Path2D;t.rect(n.left,n.top,n.right-n.left,n.bottom-n.top),e.clip(t)}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(1);class r{unscramble(t,e){const n=URL.createObjectURL(t);return i.a.blobToImage(n).then((t=>{const n=document.createElement("canvas");return n.width=e.width,n.height=e.height,this.drawTiles(t,n.getContext("2d"),e.tiles),i.a.canvasToBlob(n)})).finally((()=>URL.revokeObjectURL(n)))}drawTiles(t,e,n){for(const i of n){const n=i.data,r=n[4],o=n[5];e.drawImage(t,n[2],n[3],r,o,n[0],n[1],r,o)}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(2);class r{constructor(t){this.metricsService=t}asyncExecuteMetrics(t,e){return function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))}(this,void 0,void 0,(function*(){const n=new Date;let r;try{return r=yield e(),r}catch(e){throw this.metricsService.recordCountMetrics(`${t}:${i.a.ERROR}`,1),e}finally{this.metricsService.recordTimeMetrics(`${t}:${i.a.EXECUTION}`,(new Date).getTime()-n.getTime()),this.isNetworkResponse(r)&&this.handleNetworkErrors(t,r)}}))}syncExecuteMetrics(t,e){const n=new Date;let r;try{return r=e(),r}catch(e){throw this.metricsService.recordCountMetrics(`${t}:${i.a.ERROR}`,1),e}finally{this.metricsService.recordTimeMetrics(`${t}:${i.a.EXECUTION}`,(new Date).getTime()-n.getTime()),this.isNetworkResponse(r)&&this.handleNetworkErrors(t,r)}}handleNetworkErrors(t,e){if(e.status&&!e.ok)switch(String(e.status)){case i.a.NETWORK_ERROR_BAD_REQUEST:this.metricsService.recordCountMetrics(`${t}:${i.a.ERROR}:${i.a.NETWORK_ERROR_BAD_REQUEST}`,1);break;case i.a.NETWORK_ERROR_NOT_FOUND:this.metricsService.recordCountMetrics(`${t}:${i.a.ERROR}:${i.a.NETWORK_ERROR_NOT_FOUND}`,1);break;case i.a.NETWORK_ERROR_SERVER_ERROR:this.metricsService.recordCountMetrics(`${t}:${i.a.ERROR}:${i.a.NETWORK_ERROR_SERVER_ERROR}`,1)}}isNetworkResponse(t){return t instanceof Response}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{recordTimeMetrics(t,e){console.log("Emit time metric: "+t+": "+e+"ms")}recordCountMetrics(t,e){console.log("Emit count metric: "+t+": "+e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(1),r=n(0),o=n(4),s=n(5),a=n(2),c=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class l{constructor(t,e){this.DEFAULT_COLOR="#FFFFFF",this.pixelRatio=t.pixelRatio,this.rectRenderer=t.rectRenderer,this.lineRenderer=t.lineRenderer,this.styleModifier=t.styleModifier,this.metricsUtil=e}renderDecorations(t,e,n,i){return c(this,void 0,void 0,(function*(){let o=new r.a(0,0,0,0);for(const r of e)switch(r.type){case"fillStroke":o=o.compute(this.renderRectFillStroke(t,r,i));break;case"line":const e=JSON.parse(JSON.stringify(r));this.adaptLineDecorationByStrokeIfNeed(e,n),o=o.compute(this.renderLineDecoration(t,e,e.strokeColor,i));break;case"linkLine":const s=JSON.parse(JSON.stringify(r));this.adaptLineDecorationByStrokeIfNeed(s,n),o=o.compute(this.renderLineDecoration(t,s,s.unvisitedColor,i));break;case"backgroundImage":const a=r;o=o.compute(yield this.renderBackgroundImage(t,a,i));break;case"shadow":o=o.compute(this.renderShadow(t,r,i))}return o}))}renderRectFillStroke(t,e,n){const i=t.context;i.save();try{const n=e.radii,r=new Array(4),o=new Array(4),s=new Array(4),a=new Array(4),c=new Array(4),l=[e.strokeTop,e.strokeLeft,e.strokeBottom,e.strokeRight];for(let t=0;t<l.length;t++){const e=l[t];void 0===e?(r[t]="unknown",o[t]=0,c[t]="#00000000"):(r[t]=e.strokeStyle,o[t]=e.strokeWidth,c[t]=e.strokeColor),s[t]=void 0===n?0:n[t].xRadius,a[t]=void 0===n?0:n[t].yRadius}e.fillColor&&(i.strokeStyle=e.fillColor);const u=this.getFill(t,e);this.rectRenderer.fillStroke(i,e.rect,r,o,s,a,c,u)}finally{i.restore()}if(n){const t=new r.a(e.rect.top,e.rect.bottom,e.rect.left,e.rect.right);return r.a.applyTransformationToBoundingBoxPoints(n,t)}return new r.a(e.rect.top,e.rect.bottom,e.rect.left,e.rect.right)}adaptLineDecorationByStrokeIfNeed(t,e){"run"!==e&&"text"!==e&&"textline"!==e||(t.strokeStartPoint.y===t.strokeEndPoint.y?(t.strokeStartPoint.y=t.strokeStartPoint.y-t.strokeWidth/2,t.strokeEndPoint.y=t.strokeEndPoint.y-t.strokeWidth/2):(t.strokeStartPoint.x=t.strokeStartPoint.x-t.strokeWidth/2,t.strokeEndPoint.x=t.strokeStartPoint.x-t.strokeWidth/2))}renderLineDecoration(t,e,n,i){const o=t.context,s=e.strokeStartPoint,a=s.x,c=s.y,l=e.strokeEndPoint,u=l.x,h=l.y,d=e.strokeStyle;o.save();try{if("thinthick"===d||"thickthin"===d){const t=this.styleModifier.getLineWidthsFromStyle(d,e.strokeWidth),i=t.externalLine,r=t.gap,s=(t.internalLine,c===h),l=s?u-a:h-c,f=c,p={style:e.strokeStyle,x:a,y:f,isHorizontal:s,length:l,width:i,color:n};this.lineRenderer.draw(o,p);const g=f+i+r,v={style:e.strokeStyle,x:a,y:g,isHorizontal:s,length:l,width:t.internalLine,color:n};this.lineRenderer.draw(o,v)}else{const t=c===h,i=t?u-a:h-c,r={style:e.strokeStyle,x:a,y:c,isHorizontal:t,length:i,width:e.strokeWidth,color:n};this.lineRenderer.draw(o,r)}}finally{o.restore()}if(i){const t=new r.a(c,h,a,u);return r.a.applyTransformationToBoundingBoxPoints(i,t)}return new r.a(c,h,a,u)}renderBackgroundImage(t,e,n){return c(this,void 0,void 0,(function*(){const o=e.rect,s=e.imageReference;try{yield this.metricsUtil.asyncExecuteMetrics(a.a.LOAD_IMAGE,(()=>c(this,void 0,void 0,(function*(){const n=yield t.bookProvider.getImage(s);if("undefined"==typeof createImageBitmap){const r=URL.createObjectURL(n);yield i.a.blobToImage(r).then((n=>this.drawImage(t,n,e))).finally((()=>URL.revokeObjectURL(r)))}else yield createImageBitmap(n).then((n=>this.drawImage(t,n,e)))}))))}catch(t){}if(n){const t=new r.a(o.top,o.bottom,o.left,o.right);return r.a.applyTransformationToBoundingBoxPoints(n,t)}return new r.a(o.top,o.bottom,o.left,o.right)}))}drawImage(t,e,n){var i,r,s,a;const c=t.context;c.save();try{const t=n.rect,{width:l,height:u}=o.a.getDimensions(t),h=new Path2D;h.rect(t.left,t.top,l,u),c.clip(h);const d=n.scale,f=d.x,p=d.y;c.scale(f,p);const g=(n.origin.x+t.left)/f,v=(n.origin.y+t.top)/p,m=e.width,y=e.height,b=null!==(i=n.rowCount)&&void 0!==i?i:1,w=null!==(r=n.columnCount)&&void 0!==r?r:1;for(let t=0;t<b;++t)for(let i=0;i<w;++i){const r=g+i*(null!==(s=n.imageWidth)&&void 0!==s?s:0),o=v+t*(null!==(a=n.imageHeight)&&void 0!==a?a:0);c.drawImage(e,r,o,m,y)}}finally{c.restore()}}getFill(t,e){if(void 0!==e.gradient){const n=this.createGradient(t,e);return n.addColorStop(0,this.DEFAULT_COLOR),e.gradient.stopColorList.forEach((t=>{n.addColorStop(t.offset,t.stopColor)})),n}if(void 0!==e.fillColor)return e.fillColor}createGradient(t,e){var n;const i=null!==(n=e.rect)&&void 0!==n?n:{left:0,right:0,bottom:0,top:0},r=i.right-i.left,o=i.bottom-i.top;if(void 0!==e.gradient&&"radial"===e.gradient.gradientType){const e=(i.left+i.right)/2,n=(i.top+i.bottom)/2,s=Math.max(r,o)/2;return t.context.createRadialGradient(e,n,0,e,n,s)}return void 0!==e.gradient&&"vertical"===e.gradient.gradientType?t.context.createLinearGradient(0,i.top,0,i.bottom):t.context.createLinearGradient(i.left,0,i.bottom,0)}renderShadow(t,e,n){const i=t.context;i.save();try{const t=e.rect,n=new Array(4),r=new Array(4);if(e.radii){const t=e.radii;for(let e=0;e<t.length;e++)n[e]=t[e].xRadius,r[e]=t[e].yRadius}e.shadowInset?this.drawInsetShadow(i,t,e,n,r):this.drawOutsetShadow(i,t,e,n,r),this.unsetShadow(i)}finally{i.restore()}return new r.a(0,0,0,0)}drawInsetShadow(t,e,n,i,r){var s,a;n.radii?this.clip(t,e,!1,i,r):this.clip(t,e,!1);const c=t.canvas.width;e.left-=c,e.right-=c;const l=e.left,u=e.top;this.setShadow(t,n,c);const{width:h,height:d}=o.a.getDimensions(e),f=null!==(s=n.shadowBlur)&&void 0!==s?s:0,p=null!==(a=n.shadowSpread)&&void 0!==a?a:0,g=Math.max(Math.abs(n.shadowOrigin.x),Math.abs(n.shadowOrigin.y)),v=Math.max(g,Math.max(0,f-p));t.lineWidth=2*(p+v),t.strokeRect(l-v,u-v,h+2*v,d+2*v),e.left+=c,e.right+=c}drawOutsetShadow(t,e,n,i,r){const s=e.left,a=e.top,{width:c,height:l}=o.a.getDimensions(e);let u;n.radii?(u=this.createRoundedRectPath(t,e,i,r),this.clip(t,e,!0,i,r)):(u=new Path2D,u.rect(s,a,c,l),this.clip(t,e,!0)),this.setShadow(t,n),t.fill(u)}clip(t,e,n,i,r){const s=e.left,a=e.top,{width:c,height:l}=o.a.getDimensions(e);let u=new Path2D;if(i&&r?u=this.createRoundedRectPath(t,e,i,r):u.rect(s,a,c,l),n){const e=t.canvas.width,n=t.canvas.height;u.rect(s-e,a-n,c+2*e,l+2*n)}t.clip(u,"evenodd")}setShadow(t,e,n=0){var i,r;t.shadowColor=e.shadowColor,t.shadowBlur=this.pixelRatio*(null!==(i=e.shadowBlur)&&void 0!==i?i:0),0!==n&&(t.shadowBlur+=null!==(r=e.shadowSpread)&&void 0!==r?r:0,t.shadowBlur/=2),t.shadowOffsetX=this.pixelRatio*(e.shadowOrigin.x+n),t.shadowOffsetY=this.pixelRatio*e.shadowOrigin.y}unsetShadow(t){t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}createRoundedRectPath(t,e,n,i){const r=o.a.round(e);t.lineCap="butt";const a=new s.a;return a.moveTo(r.left+n[0],r.top),a.addEllipticalArc(r.left+n[0],r.top+i[0],n[0],i[0],270,180,!0),a.relativeLineTo(0,r.bottom-r.top-i[0]-i[1]),a.addEllipticalArc(r.left+n[1],r.bottom-i[1],n[1],i[1],180,90,!0),a.relativeLineTo(r.right-r.left-n[1]-n[2],0),a.addEllipticalArc(r.right-n[2],r.bottom-i[2],n[2],i[2],90,0,!0),a.relativeLineTo(0,-(r.bottom-r.top-i[2]-i[3])),a.addEllipticalArc(r.right-n[3],r.top+i[3],n[3],i[3],0,-90,!0),a.relativeLineTo(-(r.right-r.left-n[0]-n[3]),0),a.build()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(6);class r{getLineWidthsFromStyle(t,e){switch(t){case"double":const t=Math.floor(e/3);return{externalLine:t,gap:t,internalLine:t};case"ridge":case"groove":{const t=Math.ceil(e/2);return{externalLine:t,gap:0,internalLine:e-t}}case"thickthin":{const t=Math.ceil(e/7),n=Math.ceil((e-t)/3);return{externalLine:e-t-n,gap:n,internalLine:t}}case"thinthick":const n=Math.ceil(e/7),i=Math.ceil((e-n)/3);return{externalLine:n,gap:i,internalLine:e-n-i};default:return{externalLine:e,gap:0,internalLine:0}}}isStyleWithTwoLines(t){return"double"===t||"thickthin"===t||"thinthick"===t||"ridge"===t||"groove"===t}getColorModification(t,e){const n=Object(i.b)(e),r=Object(i.d)(n),o=n.a;let s=Math.min(1,r.v+.2);const a=Math.max(0,s-.4);let c;if(s=Math.min(1,a+.4),0===t){const t=Object(i.a)({h:r.h,s:r.s,v:s});c=Object(i.c)({r:t.r,g:t.g,b:t.b,a:o})}else{if(1!==t)throw new Error("Color modification not supported: "+t);{const t=Object(i.a)({h:r.h,s:r.s,v:a});c=Object(i.c)({r:t.r,g:t.g,b:t.b,a:o})}}return c}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(t){this.context=t}get canvas(){return this.context.canvas}get globalAlpha(){return this.context.globalAlpha}set globalAlpha(t){this.context.globalAlpha=t}get globalCompositeOperation(){return this.context.globalCompositeOperation}set globalCompositeOperation(t){this.context.globalCompositeOperation=t}get fillStyle(){return this.context.fillStyle}set fillStyle(t){this.context.fillStyle=t}get strokeStyle(){return this.context.strokeStyle}set strokeStyle(t){this.context.strokeStyle=t}get filter(){return this.context.filter}set filter(t){this.context.filter=t}get imageSmoothingEnabled(){return this.context.imageSmoothingEnabled}set imageSmoothingEnabled(t){this.context.imageSmoothingEnabled=t}get imageSmoothingQuality(){return this.context.imageSmoothingQuality}set imageSmoothingQuality(t){this.context.imageSmoothingQuality=t}get lineCap(){return this.context.lineCap}set lineCap(t){this.context.lineCap=t}get lineDashOffset(){return this.context.lineDashOffset}set lineDashOffset(t){this.context.lineDashOffset=t}get lineJoin(){return this.context.lineJoin}set lineJoin(t){this.context.lineJoin=t}get lineWidth(){return this.context.lineWidth}set lineWidth(t){this.context.lineWidth=t}get miterLimit(){return this.context.miterLimit}set miterLimit(t){this.context.miterLimit=t}get shadowBlur(){return this.context.shadowBlur}set shadowBlur(t){this.context.shadowBlur=t}get shadowColor(){return this.context.shadowColor}set shadowColor(t){this.context.shadowColor=t}get shadowOffsetX(){return this.context.shadowOffsetX}set shadowOffsetX(t){this.context.shadowOffsetX=t}get shadowOffsetY(){return this.context.shadowOffsetY}set shadowOffsetY(t){this.context.shadowOffsetY=t}get direction(){return this.context.direction}set direction(t){this.context.direction=t}get font(){return this.context.font}set font(t){this.context.font=t}get textAlign(){return this.context.textAlign}set textAlign(t){this.context.textAlign=t}get textBaseline(){return this.context.textBaseline}set textBaseline(t){this.context.textBaseline=t}drawImage(t,e,n,i,r,o,s,a,c){this.context.drawImage(...arguments)}beginPath(){this.context.beginPath(...arguments)}clip(t,e){this.context.clip(...arguments)}fill(t,e){this.context.fill(...arguments)}isPointInPath(t,e,n,i){return this.context.isPointInPath(...arguments)}isPointInStroke(t,e,n){return this.context.isPointInStroke(...arguments)}stroke(t){this.context.stroke(...arguments)}createLinearGradient(t,e,n,i){return this.context.createLinearGradient(...arguments)}createPattern(t,e){return this.context.createPattern(...arguments)}createRadialGradient(t,e,n,i,r,o){return this.context.createRadialGradient(...arguments)}createImageData(t,e){return this.context.createImageData(...arguments)}getImageData(t,e,n,i){return this.context.getImageData(...arguments)}putImageData(t,e,n,i,r,o,s){this.context.putImageData(...arguments)}arc(t,e,n,i,r,o){this.context.arc(...arguments)}arcTo(t,e,n,i,r){this.context.arcTo(...arguments)}bezierCurveTo(t,e,n,i,r,o){this.context.bezierCurveTo(...arguments)}closePath(){this.context.closePath(...arguments)}ellipse(t,e,n,i,r,o,s,a){this.context.ellipse(...arguments)}lineTo(t,e){this.context.lineTo(...arguments)}moveTo(t,e){this.context.moveTo(...arguments)}quadraticCurveTo(t,e,n,i){this.context.quadraticCurveTo(...arguments)}rect(t,e,n,i){this.context.rect(...arguments)}getLineDash(){return this.context.getLineDash(...arguments)}setLineDash(t){this.context.setLineDash(...arguments)}clearRect(t,e,n,i){this.context.clearRect(...arguments)}fillRect(t,e,n,i){this.context.fillRect(...arguments)}strokeRect(t,e,n,i){this.context.strokeRect(...arguments)}restore(){this.context.restore(...arguments)}save(){this.context.save(...arguments)}fillText(t,e,n,i){this.context.fillText(...arguments)}measureText(t){return this.context.measureText(...arguments)}strokeText(t,e,n,i){this.context.strokeText(...arguments)}getTransform(){return this.context.getTransform(...arguments)}resetTransform(){this.context.resetTransform(...arguments)}rotate(t){this.context.rotate(...arguments)}scale(t,e){this.context.scale(...arguments)}setTransform(t,e,n,i,r,o){this.context.setTransform(...arguments)}transform(t,e,n,i,r,o){this.context.transform(...arguments)}translate(t,e){this.context.translate(...arguments)}drawFocusIfNeeded(t,e){this.context.drawFocusIfNeeded(...arguments)}scrollPathIntoView(t){this.context.scrollPathIntoView(...arguments)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(17);n(45);class r extends i.a{constructor(t){super(t),this.path=new Path2D,this.subPath=new Path2D,this.isSubPathEmtpy=!0}build(){return this.addSubPath(),new Path2D(this.path)}addSubPath(t){t?this.path.addPath(t):this.isSubPathEmtpy||(this.path.addPath(this.subPath),this.subPath=new Path2D,this.isSubPathEmtpy=!0)}beginPath(){super.beginPath(),this.addSubPath()}closePath(){super.closePath(),this.subPath.closePath(),this.isSubPathEmtpy=!1}arc(t,e,n,i,r,o){super.arc(t,e,n,i,r,o),this.subPath.arc(t,e,n,i,r,o),this.isSubPathEmtpy=!1}arcTo(t,e,n,i,r){super.arcTo(t,e,n,i,r),this.subPath.arcTo(t,e,n,i,r),this.isSubPathEmtpy=!1}bezierCurveTo(t,e,n,i,r,o){super.bezierCurveTo(t,e,n,i,r,o),this.subPath.bezierCurveTo(t,e,n,i,r,o),this.isSubPathEmtpy=!1}ellipse(t,e,n,i,r,o,s,a){super.ellipse(t,e,n,i,r,o,s,a),this.subPath.ellipse(t,e,n,i,r,o,s,a),this.isSubPathEmtpy=!1}lineTo(t,e){super.lineTo(t,e),this.subPath.lineTo(t,e),this.isSubPathEmtpy=!1}moveTo(t,e){super.moveTo(t,e),this.subPath.moveTo(t,e),this.isSubPathEmtpy=!1}quadraticCurveTo(t,e,n,i){super.quadraticCurveTo(t,e,n,i),this.subPath.quadraticCurveTo(t,e,n,i),this.isSubPathEmtpy=!1}rect(t,e,n,i){super.rect(t,e,n,i),this.subPath.rect(t,e,n,i),this.isSubPathEmtpy=!1}resetTransform(){this.addSubPath(),super.resetTransform()}rotate(t){this.addSubPath(),super.rotate(t)}scale(t,e){this.addSubPath(),super.scale(t,e)}setTransform(t,e,n,i,r,o){this.addSubPath(),super.setTransform(...arguments)}transform(t,e,n,i,r,o){this.addSubPath(),super.transform(t,e,n,i,r,o)}translate(t,e){this.addSubPath(),super.translate(t,e)}fill(t,e){t&&"string"!=typeof t&&this.addSubPath(t)}stroke(t){t&&this.addSubPath(t)}drawImage(t,e,n,i,r,o,s,a,c){let l=!0;i?o?this.subPath.rect(o,s,a,c):this.subPath.rect(e,n,i,r):"number"==typeof t.width&&"number"==typeof t.height?this.subPath.rect(e,n,t.width,t.height):l=!1,l&&(this.isSubPathEmtpy=!1)}fillRect(t,e,n,i){super.rect(t,e,n,i),this.rect(t,e,n,i)}strokeRect(t,e,n,i){super.rect(t,e,n,i),this.rect(t,e,n,i)}restore(){this.addSubPath(),super.restore()}clip(t,e){}clearRect(t,e,n,i){}fillText(t,e,n,i){}strokeText(t,e,n,i){}putImageData(t,e,n,i,r,o,s){}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DefaultGlyphRenderer}));var _etc_content_bounding_box__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0),_utils_assert__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3),__awaiter=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class DefaultGlyphRenderer{constructor(t){this.pathsCache=new Map,this.pixelRatio=t.pixelRatio}render(t,e,n,i,r){return __awaiter(this,void 0,void 0,(function*(){const e=n.glyphs[r.glyphId];Object(_utils_assert__WEBPACK_IMPORTED_MODULE_1__.b)(e,"Unknown glyph "+r.glyphId);const o=this.buildGlyphCacheKey(n,r.glyphId,r.fontSize);if(!("js"===e.type&&e.code||"path"===e.type&&e.path))return new _etc_content_bounding_box__WEBPACK_IMPORTED_MODULE_0__.a(0,0,0,0);{const s=t.context;s.save();try{return this.renderGlyph(o,s,n,e,i,r)}finally{s.restore()}}}))}renderGlyph(glyphKey,ctx,font,glyph,fontScale,glyphDescriptor){this.applyShadows(ctx,glyphDescriptor);const x=glyphDescriptor.x,y=glyphDescriptor.y;ctx.translate(x,y),ctx.scale(fontScale,fontScale);const rotation=glyphDescriptor.glyphRotation;if(0!==rotation){const t=-rotation*DefaultGlyphRenderer.DEG_TO_RAD;ctx.rotate(t)}let cacheDescriptor=this.pathsCache.get(glyphKey);if(!cacheDescriptor){if("path"===glyph.type)cacheDescriptor={path2D:new Path2D(glyph.path),boundingRect:this.findPathBoundingBox(glyph.path)};else{const t=glyph.rect;cacheDescriptor={code:glyph.code,boundingRect:{minX:t.left,minY:t.top,width:t.right-t.left,height:t.bottom-t.top}}}this.pathsCache.set(glyphKey,cacheDescriptor)}if(ctx.beginPath(),cacheDescriptor.path2D)if(ctx.fill(cacheDescriptor.path2D),font.fontAlgBold){const t=ctx.strokeStyle,e=ctx.strokeStyle!=ctx.fillStyle;e&&(ctx.strokeStyle=ctx.fillStyle);const n=ctx.lineWidth;ctx.lineWidth=font.fontWeight/1e3/fontScale,ctx.stroke(cacheDescriptor.path2D),ctx.lineWidth=n,e&&(ctx.strokeStyle=t),ctx.stroke(cacheDescriptor.path2D)}else glyphDescriptor.stroke&&ctx.stroke(cacheDescriptor.path2D);else cacheDescriptor.code&&(ctx.fill(),eval(cacheDescriptor.code));const boundingRect=cacheDescriptor.boundingRect;this.unsetShadow(ctx);let left=boundingRect.minX,top=boundingRect.minY,right=left+boundingRect.width,bottom=top+boundingRect.height;return rotation&&([left,top]=[top,-left],[right,bottom]=[bottom,-right]),new _etc_content_bounding_box__WEBPACK_IMPORTED_MODULE_0__.a(top*fontScale+y,bottom*fontScale+y,left*fontScale+x,right*fontScale+x)}findPathBoundingBox(t){let e=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY;const o=t.split(" ");for(let t=0;t<o.length;t++){const s=o[t].split(",");switch(o[t][0]){case"Z":break;case"C":e=Math.min(parseFloat(s[4]),e),i=Math.max(parseFloat(s[4]),i),n=Math.min(parseFloat(s[5]),n),r=Math.max(parseFloat(s[5]),r);case"Q":e=Math.min(parseFloat(s[2]),e),i=Math.max(parseFloat(s[2]),i),n=Math.min(parseFloat(s[3]),n),r=Math.max(parseFloat(s[3]),r);case"M":case"L":e=Math.min(parseFloat(s[0].substr(1)),e),i=Math.max(parseFloat(s[0].substr(1)),i),n=Math.min(parseFloat(s[1]),n),r=Math.max(parseFloat(s[1]),r)}}return{minX:e,minY:n,width:i-e,height:r-n}}applyShadows(t,e){var n;const i=e.textShadows;if(i)for(const r of i){t.shadowColor=r.shadowColor,t.shadowBlur=this.pixelRatio*(null!==(n=r.shadowBlur)&&void 0!==n?n:1),t.shadowOffsetX=this.pixelRatio*r.shadowOrigin.x,t.shadowOffsetY=this.pixelRatio*r.shadowOrigin.y;let i=e.contextRotation-e.glyphRotation;i<0&&(i+=360);const o=t.shadowOffsetX;i>=90&&i<180?(t.shadowOffsetX=-1*t.shadowOffsetY,t.shadowOffsetY=o):i>=180&&i<270?(t.shadowOffsetX=-1*t.shadowOffsetY,t.shadowOffsetY=-1*o):i>=270&&(t.shadowOffsetX=t.shadowOffsetY,t.shadowOffsetY=-1*o)}}unsetShadow(t){t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}buildGlyphCacheKey(t,e,n){return[t.fontKey,e,n].join("/")}clearCache(){this.pathsCache.clear()}}DefaultGlyphRenderer.DEG_TO_RAD=Math.PI/180},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(0),r=n(1),o=n(3),s=n(4),a=n(2),c=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class l{constructor(t,e){this.pixelRatio=t.pixelRatio,this.rectRenderer=t.rectRenderer,this.metricsUtil=e}render(t,e){return c(this,void 0,void 0,(function*(){const n=t.context,i=e.imageReference;if(e.imageClip){this.adjustClip(e);const t=e.imageClip,i=new Path2D;i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip(i)}try{return yield this.metricsUtil.asyncExecuteMetrics(a.a.LOAD_IMAGE,(()=>c(this,void 0,void 0,(function*(){const o=yield t.bookProvider.getImage(i);if("undefined"==typeof createImageBitmap){const t=URL.createObjectURL(o);return r.a.blobToImage(t).then((t=>this.drawImage(n,t,e))).finally((()=>URL.revokeObjectURL(t)))}return createImageBitmap(o).then((t=>this.drawImage(n,t,e)))}))))}catch(t){return this.drawImagePlaceHolder(n,e),this.getBoundingBoxForEmptyImage(n,e)}}))}getBoundingBoxForEmptyImage(t,e){var n;const r=null!==(n=e.rect)&&void 0!==n?n:e.clipPath;return void 0!==r?new i.a(r.top,r.bottom,0,0):new i.a(0,0,0,0)}drawImagePlaceHolder(t,e){try{t.save();const n=e.fillColor,i=e.strokeColor;let r=0,o=0,a=0,c=0,l=e.rect;l&&(e.transform&&(l=s.a.convertToAbsolutePosition(l,e.transform)),r=l.top,o=l.left,({width:a,height:c}=s.a.getDimensions(l))),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),t.fillStyle=n,t.fillRect(o,r,a,c),t.strokeStyle=i;const u=t.lineWidth/2;t.strokeRect(o+u,r+u,a-t.lineWidth,c-t.lineWidth)}finally{t.restore()}}drawImage(t,e,n){t.save();try{Object(o.b)(n.transform);const r=n.rect;if(r){const o=this.getImageOffsetFromBackDecoration(n);let a={left:r.left+o.left,top:r.top+o.top,bottom:r.bottom-o.bottom,right:r.right-o.right};a=s.a.round(a);const{width:c,height:l}=s.a.getDimensions(a);return t.drawImage(e,a.left,a.top,c,l),new i.a(a.top,a.bottom,0,0)}return t.drawImage(e,0,0),new i.a(0,e.height,0,0)}finally{t.restore()}}getImageOffsetFromBackDecoration(t){const e=t.backDecoration,n=e&&e.length>0&&"fillStroke"===e[0].type?e[0]:void 0;return{top:n&&n.strokeTop?n.strokeTop.strokeWidth:0,left:n&&n.strokeLeft?n.strokeLeft.strokeWidth:0,bottom:n&&n.strokeBottom?n.strokeBottom.strokeWidth:0,right:n&&n.strokeRight?n.strokeRight.strokeWidth:0}}adjustClip(t){if(t.imageClip){const e=t.rect,n=t.imageClip;e.top=-n.top,e.left=-n.left,e.bottom-=n.top,e.right-=n.left,n.bottom-=n.top,n.right-=n.left,n.top=0,n.left=0}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(0),r=n(18),o=n(1),s=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};const a=new Array;class c{constructor(t){this.pageRenderer=t}render(t,e){return s(this,void 0,void 0,(function*(){let n=new i.a(0,0,0,0);const r=t.context;r.save();try{const i=new Set,o=yield this.generateClips(t,e,i),s=this.generateShapes(t,e,o,i);n=this.getShapeBoundingBox(e),t.context.scale(e.scaleX,e.scaleY);for(const e of s)yield this.renderShape(t,e)}finally{r.restore()}return n}))}renderShape(t,e){return s(this,void 0,void 0,(function*(){let n=new i.a(0,0,0,0);const r=t.context;r.save();try{if(e.clipPath&&r.clip(e.clipPath,e.clipRule),e.childNodes)n=yield this.pageRenderer.renderChildNodes(t,e.childNodes);else{const t=e.fillData,n=e.strokeData;if(e.transform){const[t,n,i,o,s,a]=e.transform;r.transform(t,n,i,o,s,a)}t&&(r.fillStyle=t.fillColor,r.fill(e.path,t.fillRule)),n&&(r.lineWidth=n.strokeWidth,r.strokeStyle=n.strokeColor,r.lineJoin=n.strokeLineJoin,r.lineCap=n.strokeLineCap,r.miterLimit=n.strokeMiterLimit,r.lineDashOffset=n.strokeDashOffset,r.setLineDash(n.strokeDashArray),r.stroke(e.path))}}finally{r.restore()}return n}))}generateClips(t,e,n){var i;return s(this,void 0,void 0,(function*(){const o=new Array;if(e.clips)for(const s of e.clips){const a=new Path2D;for(const o of s)if(void 0!==o.elementId){let s=null===(i=e.children)||void 0===i?void 0:i.filter((t=>t.elementId===o.elementId));if(s){const i=t.context;i.save();try{if(e.transform){i.resetTransform();const[t,n,r,o,s,a]=e.transform;i.transform(t,n,r,o,s,a)}s=this.adjustRunNodes(s),n.add(o.elementId);const c=new r.a(i),l={context:c,bookProvider:t.bookProvider,inkColor:t.inkColor};yield this.pageRenderer.renderChildNodes(l,s),a.addPath(c.build())}finally{i.restore()}}}else a.addPath(new Path2D(o.path));o.push(a)}return o}))}generateShapes(t,e,n,i){var r,o,s,c,l,u,h,d,f;const p=new Array;if(e.shapes)for(const g of e.shapes){let v;const m="none"===g.clipRule?void 0:g.clipRule;if(void 0!==g.clipPathIndex&&g.clipPathIndex>=0&&g.clipPathIndex<n.length&&(v=n[g.clipPathIndex]),void 0!==g.elementId){const t=null===(r=e.children)||void 0===r?void 0:r.filter((t=>t.elementId===g.elementId));i.add(g.elementId),p.push({childNodes:null!=t?t:new Array,path:void 0,clipPath:v,clipRule:null!=m?m:"nonzero"})}else{const e=new Path2D(g.path);let n,i;if(g.fillRule||g.fillColor){const e="none"===g.fillRule?void 0:g.fillRule;n={fillRule:null!=e?e:"nonzero",fillColor:null!==(s=null!==(o=g.fillColor)&&void 0!==o?o:t.inkColor)&&void 0!==s?s:"#000000FF"}}if(void 0!==g.strokeWidth&&0!==g.strokeWidth){const e="none"===g.strokeLineJoin?void 0:g.strokeLineJoin,n="none"===g.strokeLineCap?void 0:g.strokeLineCap;i={strokeWidth:g.strokeWidth,strokeColor:null!==(l=null!==(c=g.strokeColor)&&void 0!==c?c:t.inkColor)&&void 0!==l?l:"#000000FF",strokeLineJoin:null!=e?e:"miter",strokeLineCap:null!=n?n:"butt",strokeMiterLimit:null!==(u=g.strokeMiterLimit)&&void 0!==u?u:10,strokeDashOffset:null!==(h=g.strokeDashOffset)&&void 0!==h?h:0,strokeDashArray:null!==(d=g.strokeDashArray)&&void 0!==d?d:a}}n||i||(n={fillColor:null!==(f=t.inkColor)&&void 0!==f?f:"#000000FF",fillRule:"nonzero"}),p.push({childNodes:void 0,path:e,clipPath:v,clipRule:null!=m?m:"nonzero",fillData:n,strokeData:i,transform:g.transform})}}return p}getShapeBoundingBox(t){let e=new i.a(0,0,0,0);if(t.shapes)for(const n of t.shapes)if(n.path){let r=i.a.getBoudningBoxByPath(n.path);t.transform&&(r=i.a.applyTransformationToBoundingBoxPoints(t.transform,r)),e=e.compute(r)}return e}adjustRunNodes(t){const e=JSON.parse(JSON.stringify(t));for(const t of e)if("run"===t.type&&t.transform){const e=t;e.descent&&(t.transform[o.b.VerticalTranslation]-=e.descent)}return e}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(0),r=n(3),o=n(1),s=n(4),a=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class c{constructor(t){this.fontCache=new Map,this.decorationRenderer=t.decorationRenderer,this.fontSize=t.fontSize,this.glyphRenderer=t.fontRender}render(t,e){return a(this,void 0,void 0,(function*(){e.textBackDecoration&&(yield this.decorationRenderer.renderDecorations(t,e.textBackDecoration,e.type,e.transform));const n=yield this.renderText(t,e);return e.textFrontDecoration&&(yield this.decorationRenderer.renderDecorations(t,e.textFrontDecoration,e.type,e.transform)),n}))}renderText(t,e){var n,o,c,l,u,h;return a(this,void 0,void 0,(function*(){const a=yield t.bookProvider.getFonts();this.setFonts(a);const d=null!==(n=e.fontSize)&&void 0!==n?n:this.fontSize,f=e.glyphs;if(!f)return new i.a(0,0,0,0);{const n=t.context;n.save();try{const a=f.length,p=e.fontFamily,g=e.fontStyle,v=e.fontStretch,m=e.fontWeight,y=e.fontClass,b=e.textShadows,w=this.getRotationAngle(e),_={fontFamily:p,fontStretch:v,fontStyle:g,fontWeight:m,fontClass:y},x=this.fontCache.get(e.fontKey);Object(r.b)(x);const S=d/x.unitsPerEm,k=null!==(o=e.glyphRotation)&&void 0!==o?o:0,E=e.stroke;void 0!==E&&(n.lineWidth=Math.round(E.strokeWidth/S),n.strokeStyle=E.strokeColor),n.fillStyle=e.textColor;const R=new Array;for(let n=0;n<a;n++){const i=f[n],r=null!==(l=null===(c=e.yPosition)||void 0===c?void 0:c[n])&&void 0!==l?l:0,o=null!==(h=null===(u=e.xPosition)||void 0===u?void 0:u[n])&&void 0!==h?h:0,s={glyphId:String(i),x:o,y:r,glyphRotation:k,fontSize:d,stroke:e.stroke,textShadows:b,contextRotation:w},a=this.glyphRenderer.render(t,_,x,S,s);R.push(a)}let C=new i.a(0,0,0,0);for(const t of R){const e=yield t;C=C.compute(e)}if(e.transform){const t=e.transform,n=s.a.convertToAbsolutePosition(C,t),r=Math.min(n.top,n.bottom),o=Math.max(n.top,n.bottom),a=Math.min(n.left,n.right),c=Math.max(n.left,n.right);C=new i.a(r,o,a,c)}return C}finally{n.restore()}}}))}getRotationAngle(t){if(t.transform){const e=t.transform;let n=Math.atan2(e[o.b.VerticalSkewing],e[o.b.HorizontalScaling]);return n<0&&(n+=2*Math.PI),180*n/Math.PI}return 0}setFonts(t){this.fonts&&this.fonts===t||(this.fontCache.clear(),this.glyphRenderer.clearCache(),t.forEach((t=>{this.fontCache.set(t.fontKey,t)})),this.fonts=t)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{draw(t,e){const n=this.getNormalizedLineWidth(e);switch(e.style){case"dotted":const r=e.width>0?i.DOT_SPACING_FACTOR*n:e.width;this.drawDottedLine(t,e.x,e.y,e.isHorizontal,e.length,n,r,!e.isHorizontal,e.color);break;case"dashed":const o=e.isHorizontal?n+1:1;this.drawDashedLine(t,e.x,e.y,e.isHorizontal,e.length,n,i.COLOR_SEGMENT_FACTOR*n,i.TRANSPARENT_SEGMENT_FACTOR*n,o,e.color);break;default:this.drawSolidLine(t,e.x,e.y,e.isHorizontal,e.length,n,e.color)}}drawDottedLine(t,e,n,i,r,o,s,a,c){if(0===r||0===o||0===s)return!1;t.save();try{const l=a?r+2*o:r,u=s-o,h=(l-o)/(Math.max(2,Math.round((l+u)/(o+s)))-1),d=o/2,f=a?h-d:d;t.strokeStyle=c,t.lineCap="round",t.lineWidth=o,t.beginPath(),t.setLineDash([0,h]),i?(t.moveTo(e+f,n+d),t.lineTo(e+r,n+d)):(t.moveTo(e+d,n+f),t.lineTo(e+d,n+r)),t.stroke()}finally{t.restore()}return!0}drawSolidLine(t,e,n,i,r,o,s){if(0===r||0===o)return!1;t.save();try{t.lineCap="butt",t.lineWidth=Math.round(o),t.strokeStyle=s;const a=o/2;t.beginPath(),i?this.movetoAndRelativeLineTo(t,e,n+a,r,0):this.movetoAndRelativeLineTo(t,e+a,n,0,r),t.stroke()}finally{t.restore()}return!0}drawDashedLine(t,e,n,i,r,o,s,a,c,l){if(0===o||0===r||0===s||0===a)return!1;{const u=r-2*c;let h=0,d=0,f=0,p=0;if(u<0)h=r;else if(u<a)h=c+u;else if(0==c)if(u<a)h=c+u;else{const t=Math.floor((u+s)/(a+s)),e=t*a+(t-1)*s;h=c+(u-e)/2,d=c+(u-e+1)/2}else if(u<a+2)h=c+u;else{const t=c>0?u:u-2;if(t<=0)h=c+t;else{const e=Math.floor((t+s)/(a+s)),n=e*a+(e-1)*s;h=c+(t-n)/2,d=c+(t-n+1)/2}}r<=a+1?(h=r,d=0):h==s?h=0:f=a,p=r-h-d-f,t.lineCap="butt",t.strokeStyle=l,t.lineWidth=Math.max(1,Math.round(o));const g=[s,a];g[0]=s,g[1]=a;const v=o/2;return h>0&&(t.beginPath(),i?this.movetoAndRelativeLineTo(t,e,n+v,h,0):this.movetoAndRelativeLineTo(t,e+v,n,0,h),t.stroke()),p>0&&(t.beginPath(),t.setLineDash(g),i?this.movetoAndRelativeLineTo(t,e+h+f,n+v,p,0):this.movetoAndRelativeLineTo(t,e+v,n+h+f,0,p),t.stroke()),d>0&&(t.beginPath(),i?this.movetoAndRelativeLineTo(t,e+h+f+p,n+v,d,0):this.movetoAndRelativeLineTo(t,e+v,n+h+f+p,0,d),t.stroke()),!0}}movetoAndRelativeLineTo(t,e,n,i,r){t.moveTo(e,n),t.lineTo(e+i,n+r)}getNormalizedLineWidth(t){const e=t.width;return"dotted"===t.style||"dashed"===t.style?this.getDottedDashedLineWidth(e):e}getDottedDashedLineWidth(t){const e=Math.round(t);return 0!==e||this.epsilonEqual(0,e)?Math.max(1,e):1}epsilonEqual(t,e){return Math.abs(t-e)<1e-4}}i.DOT_SPACING_FACTOR=2,i.COLOR_SEGMENT_FACTOR=4,i.TRANSPARENT_SEGMENT_FACTOR=2},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(25),r=n(26),o=n(5),s=n(4);class a{constructor(t,e){this.lineRenderer=t,this.styleModifier=e,this.cornerRenderer=new i.a,this.sideRenderer=new r.a(t)}fillStroke(t,e,n,i,r,o,s,a){this.fill(t,e,r,o,a),this.strokeRectangle2(t,e,n,i,r,o,s)}strokeBasic(t,e,n,i){try{t.save(),t.strokeStyle=n;const r=s.a.round(e),{width:o,height:a}=s.a.getDimensions(r);this.lineRenderer.draw(t,{x:r.left,y:r.top,color:n,isHorizontal:!0,length:o,style:"solid",width:i}),this.lineRenderer.draw(t,{x:r.left,y:r.bottom-i,color:n,isHorizontal:!0,length:o,style:"solid",width:i}),this.lineRenderer.draw(t,{x:r.left,y:Math.floor(r.top+i),color:n,isHorizontal:!1,length:Math.ceil(a-2*i),style:"solid",width:i}),this.lineRenderer.draw(t,{x:r.right-i,y:Math.floor(r.top+i),color:n,isHorizontal:!1,length:Math.ceil(a-2*i),style:"solid",width:i})}finally{t.restore()}}strokeRectangle2(t,e,n,i,r,o,s){const a=[this.styleModifier.getLineWidthsFromStyle(n[0],i[0]),this.styleModifier.getLineWidthsFromStyle(n[1],i[1]),this.styleModifier.getLineWidthsFromStyle(n[2],i[2]),this.styleModifier.getLineWidthsFromStyle(n[3],i[3])],c=[...s],l=[...s],u=[0,0,0,0],h=[0,0,0,0];let d=!1;for(let t=0;t<4;++t)i[t]>0&&(this.getInternalRadius(t,a,r,o,u,h),this.getColors(t,n,s,c,l)),d=d||this.styleModifier.isStyleWithTwoLines(n[t]);if(this.stroke(t,e,n,i,r,o,c,a,!0),d){const i={left:e.left+a[1].externalLine+a[1].gap,top:e.top+a[0].externalLine+a[0].gap,right:e.right-a[3].externalLine-a[3].gap,bottom:e.bottom-a[2].externalLine-a[2].gap},r=[a[0].internalLine,a[1].internalLine,a[2].internalLine,a[3].internalLine];this.stroke(t,i,n,r,u,h,l,a,!1)}}getInternalRadius(t,e,n,i,r,o){const s=t<2?e[1].externalLine+e[1].gap:e[3].externalLine+e[3].gap,a=0==t||3==t?e[0].externalLine+e[0].gap:e[2].externalLine+e[2].gap;r[t]=Math.max(0,n[t]-s),o[t]=Math.max(0,i[t]-a)}getColors(t,e,n,i,r){const o=this.styleModifier.getColorModification(0,n[t]),s=this.styleModifier.getColorModification(1,n[t]);"inset"==e[t]?i[t]=t<2?s:o:"outset"==e[t]?i[t]=t<2?o:s:"groove"==e[t]?t<2?(i[t]=s,r[t]=o):(i[t]=o,r[t]=s):"ridge"==e[t]&&(t<2?(i[t]=o,r[t]=s):(i[t]=s,r[t]=o))}stroke(t,e,n,i,r,o,a,c,l){t.save();try{const u=s.a.round(e),h="unknown"==n[0]?0:i[0]/2,d="unknown"==n[1]?0:i[1]/2,f="unknown"==n[2]?0:i[2]/2,p="unknown"==n[3]?0:i[3]/2,g=new Array(4),v=new Array(4),m=new Array(4),y=new Array(4);y[0]=y[1]=y[2]=y[3]=!1,g[0]=0==r[0]?0:Math.max(r[0],i[1]),g[1]=0==r[1]?0:Math.max(r[1],i[1]),g[2]=0==r[2]?0:Math.max(r[2],i[3]),g[3]=0==r[3]?0:Math.max(r[3],i[3]),m[0]=Math.max(r[0],i[1]),m[1]=Math.max(r[1],i[1]),m[2]=Math.max(r[2],i[3]),m[3]=Math.max(r[3],i[3]),v[0]=Math.max(o[0],i[0]),v[1]=Math.max(o[1],i[2]),v[2]=Math.max(o[2],i[2]),v[3]=Math.max(o[3],i[0]);const b=l&&c[0].gap>0;b&&(t.save(),this.setRectContextClippingForExternalLine(t,0,e,c),t.clip()),h>0&&this.sideRenderer.drawSide(t,0,i,n,a,g,m,y,u,0,3),b&&t.restore();const w=l&&c[2].gap>0;w&&(t.save(),this.setRectContextClippingForExternalLine(t,2,e,c),t.clip()),f>0&&this.sideRenderer.drawSide(t,2,i,n,a,g,m,y,u,1,2),w&&t.restore();const _=l&&c[1].gap>0;_&&(t.save(),this.setRectContextClippingForExternalLine(t,1,e,c),t.clip()),d>0&&this.sideRenderer.drawSide(t,1,i,n,a,v,v,y,u,0,1),_&&t.restore();const x=l&&c[3].gap>0;let S,k,E,R,C,P;x&&(t.save(),this.setRectContextClippingForExternalLine(t,3,e,c),t.clip()),p>0&&this.sideRenderer.drawSide(t,3,i,n,a,v,v,y,u,3,2),x&&t.restore();for(let s=0;s<4;s++){const h=l&&c[s].gap>0;h&&this.clipCorner(t,s,e,c);const d=r[s],f=o[s];if(d+f>0||y[s]){E=s<2?i[1]:i[3],P=s<2?a[1]:a[3],S=s<2?u.left:u.right,R=0==s||3==s?i[0]:i[2],C=0==s||3==s?a[0]:a[2],k=0==s||3==s?u.top:u.bottom;const e=2==s||3==s?-1:1,r=1==s||2==s?-1:1;this.cornerRenderer.drawSolidCorner(t,{style:n[s],xBound:S,yBound:k,xRadius:d,yRadius:f,widthHorizontal:R,widthVertical:E,xFlip:e,yFlip:r,colorHorizontal:C,colorVertical:P})}h&&t.restore()}}finally{t.restore()}}clipCorner(t,e,n,i){switch(t.save(),e){case 0:this.setRectContextClippingForExternalLine(t,0,n,i),this.setRectContextClippingForExternalLine(t,1,n,i),t.clip();break;case 1:this.setRectContextClippingForExternalLine(t,1,n,i),this.setRectContextClippingForExternalLine(t,2,n,i),t.clip();break;case 2:this.setRectContextClippingForExternalLine(t,3,n,i),this.setRectContextClippingForExternalLine(t,2,n,i),t.clip();break;case 3:this.setRectContextClippingForExternalLine(t,0,n,i),this.setRectContextClippingForExternalLine(t,3,n,i),t.clip();break;default:throw new Error("Error trying to clip incorrect corner "+e)}}setRectContextClippingForExternalLine(t,e,n,i){switch(e){case 0:t.rect(n.left,n.top,n.right-n.left,i[0].externalLine);break;case 1:t.rect(n.left,n.top,i[1].externalLine,n.bottom-n.top);break;case 2:t.rect(n.left,n.bottom-i[2].externalLine,n.right-n.left,i[2].externalLine);break;case 3:t.rect(n.right-i[3].externalLine,n.top,i[3].externalLine,n.bottom-n.top);break;default:throw new Error("Error setting context to clip external line "+e)}}fill(t,e,n,i,r){if(r){t.save();try{const a=s.a.round(e),c=new o.a;c.moveTo(a.left+n[0],a.top),c.addEllipticalArc(a.left+n[0],a.top+i[0],n[0],i[0],270,180,!0),c.relativeLineTo(0,a.bottom-a.top-i[0]-i[1]),c.addEllipticalArc(a.left+n[1],a.bottom-i[1],n[1],i[1],180,90,!0),c.relativeLineTo(a.right-a.left-n[1]-n[2],0),c.addEllipticalArc(a.right-n[2],a.bottom-i[2],n[2],i[2],90,0,!0),c.relativeLineTo(0,-(a.bottom-a.top-i[2]-i[3])),c.addEllipticalArc(a.right-n[3],a.top+i[3],n[3],i[3],0,-90,!0),c.relativeLineTo(-(a.right-a.left-n[0]-n[3]),0),t.lineCap="butt",t.fillStyle=r,t.fill(c.build())}finally{t.restore()}}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(5);class r{drawSolidCorner(t,e){const n=e.xFlip,r=e.yFlip,o=e.xRadius,s=e.yRadius,a=e.xBound,c=e.yBound;let l=r>0?270:90;t.lineCap="butt",t.fillStyle=e.colorHorizontal,t.beginPath();const u=o-e.widthVertical,h=s-e.widthHorizontal;let d=n*r<0,f=45;s>0&&(f=180*Math.atan(o/s)/Math.PI);let p=45;h>0&&(p=180*Math.atan(u/h)/Math.PI);let g=new i.a;u>0&&h>0?g.addEllipticalArc(a+o*n,c+s*r,u,h,l-p*n*r,l,d):(g.moveTo(a+e.widthVertical*n,c+e.widthHorizontal*r),u>0&&g.relativeLineTo(u*n,0));const v=Math.max(o,e.widthVertical);g.lineTo(a+v*n,c+e.widthHorizontal*r),g.relativeLineTo(0,-e.widthHorizontal*r),v>o&&g.relativeLineTo(-1*(v-o)*n,0),o>0&&s>0?g.addEllipticalArc(a+o*n,c+s*r,o,s,l,l-f*n*r,!d):g.lineTo(a,c),e.colorHorizontal!=e.colorVertical&&(g.closePath(),t.fill(g.build()),g=new i.a,t.lineCap="butt",t.fillStyle=e.colorVertical,t.beginPath()),l=n>0?180:0,d=n*r>0,u>0&&h>0?g.addEllipticalArc(a+o*n,c+s*r,u,h,l+(90-p)*n*r,l,d):(g.moveTo(a+e.widthVertical*n,c+e.widthHorizontal*r),u>0&&g.relativeLineTo(u*n,0));const m=Math.max(s,e.widthHorizontal);g.lineTo(a+e.widthVertical*n,c+m*r),g.relativeLineTo(-e.widthVertical*n,0),m>s&&g.relativeLineTo(0,-1*(m-s)*r),o>0&&s>0?g.addEllipticalArc(a+o*n,c+s*r,o,s,l,l+(90-f)*n*r,!d):g.lineTo(a,c),g.closePath(),t.fill(g.build())}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(7);class r{constructor(t){this.lineRenderer=t}drawSide(t,e,n,i,r,o,s,a,c,l,u){const h=n[e],d=i[e],f=r[e];let p,g;"dashed"===d||"dotted"===d?(p=o[l],g=p+o[u]):(p=s[l],g=p+s[u],a[e]=!0);const v=this.getLinesPropertiesFromBorderStyle(e,c,d,h,f,p,g);for(let e=0;e<v.length;++e)this.lineRenderer.draw(t,v[e])}getLinesPropertiesFromBorderStyle(t,e,n,r,o,s,a){const c=new Array,l={side:t,rectBounds:e,style:n,width:r,color:o,offSet:s,lengthAdjustment:a};let u,h,d,f;switch(t){case i.a.Top:u=!0,h=l.rectBounds.left+l.offSet,d=l.rectBounds.top,f=l.rectBounds.right-l.rectBounds.left-l.lengthAdjustment;break;case i.a.Left:u=!1,h=l.rectBounds.left,d=l.rectBounds.top+l.offSet,f=l.rectBounds.bottom-l.rectBounds.top-l.lengthAdjustment;break;case i.a.Bottom:u=!0,h=l.rectBounds.left+l.offSet,d=l.rectBounds.bottom-l.width,f=l.rectBounds.right-l.rectBounds.left-l.lengthAdjustment;break;case i.a.Right:u=!1,h=l.rectBounds.right-l.width,d=l.rectBounds.top+l.offSet,f=l.rectBounds.bottom-l.rectBounds.top-l.lengthAdjustment;break;default:throw new Error("Error getting side properties")}return c.push({isHorizontal:u,width:l.width,style:l.style,color:l.color,x:h,y:d,length:f}),c}}},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(1),r=n(3);class o{constructor(t){this.pixelRatio=t}static fromDocument(){const t=i.a.getPixelRatio(document.createElement("canvas"));return new o(t)}static withPixelRatio(t){return new o(t)}buildContext(t,e){const n=document.createElement("canvas");n.width=t*this.pixelRatio,n.height=e*this.pixelRatio,n.style.width=t+"px",n.style.height=e+"px";const i=n.getContext("2d",{alpha:!1});return Object(r.b)(i),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),i}buildOptimizedContext(t,e){if("undefined"==typeof OffscreenCanvas){const n=this.buildContext(t,e);return Object(r.b)(n),n}{const n=new OffscreenCanvas(t*this.pixelRatio,e*this.pixelRatio).getContext("2d");return Object(r.b)(n),n.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),n}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(8),r=n(9),o=n(10),s=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class a{constructor(t="localhost",e=8080){this.hostName=t,this.port=e}get(t,e,n){return s(this,void 0,void 0,(function*(){return e.type===i.b.Position?this.getByPositionId(t,e,n):this.getByPageIndex(t,e,n)}))}getByPageIndex(t,e,n){return s(this,void 0,void 0,(function*(){const s=new r.a(t,this.hostName,this.port);yield s.render(Object.assign(Object.assign({},n),{pageCount:e.direction===i.a.Forward?e.pageCount:-e.pageCount,pageIndex:e.pageIndex})),yield s.gotoPage(e.pageIndex);const a=new Array;for(let t=0;t<e.pageCount;t++){const t=s.getPage(),e=s.getTokens();a.push(new o.a(s,t,e)),s.nextPage()}return a}))}getByPositionId(t,e,n){return s(this,void 0,void 0,(function*(){const o=new r.a(t,this.hostName,this.port);return yield o.render(Object.assign(Object.assign({},n),{pageCount:e.direction===i.a.Forward?e.pageCount:-e.pageCount,positionId:e.startPositionId})),this.adapt(e.pageCount,o)}))}adapt(t,e){const n=new Array;for(let i=0;i<t;i++){const t=e.getPage(),i=e.getTokens();n.push(new o.a(e,t,i)),e.nextPage()}return n}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(0),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(){this.glyphCache=new Map,this.pixelRatio=2}clearCache(){this.glyphCache.clear()}setupApi(t){return{addFont:t.cwrap("addFont","boolean",["string","number","number"]),selectFont:t.cwrap("selectFont","boolean",["string"]),renderGlyph:t.cwrap("renderGlyph","boolean",["number"]),getGlyphRows:t.cwrap("getGlyphRows","number",[]),getGlyphWidth:t.cwrap("getGlyphWidth","number",[]),getGlyphPitch:t.cwrap("getGlyphPitch","number",[]),getGlyphFormat:t.cwrap("getGlyphFormat","number",[]),getGlyphBitmapLeft:t.cwrap("getGlyphBitmapLeft","number",[]),getGlyphBitmapTop:t.cwrap("getGlyphBitmapTop","number",[]),getGlyphBitmap:t.cwrap("getGlyphBitmap","number",[]),clearAllFonts:t.cwrap("clearAllFonts","number",[])}}init(){return this.loadingPromise||(this.loadingPromise=new Promise(((t,e)=>{try{this.wasmModule={},window.Module=this.wasmModule,this.wasmModule.onRuntimeInitialized=()=>{this.freeTypeApi=this.setupApi(this.wasmModule),t()};const e=document.createElement("script");e.type="text/javascript",e.src="freetype.js",document.head.append(e)}catch(t){e(t)}})).then((()=>this.loadFont()))),this.loadingPromise}loadFont(){return fetch("/Bookerly-Regular.ttf").then((t=>t.arrayBuffer())).then((t=>{const e=new Uint8Array(t),n=this.wasmModule._malloc(e.byteLength);if(this.wasmModule.HEAPU8.set(e,n),!this.freeTypeApi.addFont("Bookerly",n,e.byteLength))throw new Error('Failed to load font "Bookerly"');console.log("Font Bookerly loaded")}))}copyFreeTypeGlyphToCanvas(t,e,n,i){const r=this.getScratchCanvas(e,n),o=r.getContext("2d"),s=o.getImageData(0,0,e,n);for(let r=0;r<n;r++)for(let n=0;n<e;n++){const o=4*(r*e+n);s.data[o+0]=0,s.data[o+1]=0,s.data[o+2]=0,s.data[o+3]=Math.round((a=t[r*i+n]/255,Math.pow((1-a)*Math.pow(0,2)+a*Math.pow(255,2),.5)))}var a;return o.putImageData(s,0,0),r}render(t,e,n,o,s){return r(this,void 0,void 0,(function*(){return yield this.renderGlyph(t.context,Number(s.glyphId),s.fontSize,s.x,s.y),new i.a(0,0,0,0)}))}renderGlyph(t,e,n,i,o){return r(this,void 0,void 0,(function*(){this.freeTypeApi.selectFont("Bookerly");let r=Math.floor(i);const s=i-r;let a=Math.round(4*s),c=a/4;4==a&&(r++,a=0,c=0);let l=this.glyphCache.get(e);if(!l){if(document.getElementById("testdiv").offsetWidth,!this.freeTypeApi.renderGlyph(e,this.pixelRatio*n,440*this.pixelRatio,c,0))throw new Error("RenderGlyph failed: GID = "+e);const t=this.freeTypeApi.getGlyphRows(),i=this.freeTypeApi.getGlyphWidth(),r=this.freeTypeApi.getGlyphPitch(),o=this.freeTypeApi.getGlyphBitmapLeft(),s=this.freeTypeApi.getGlyphBitmapTop(),a=this.freeTypeApi.getGlyphBitmap();if(0==t||0==i)l={bitmap:void 0,bitmapLeft:0,bitmapTop:0,rows:0,width:0};else{const e=new Uint8Array(this.wasmModule.HEAPU8.subarray(a,a+r*t));l={bitmap:yield this.copyFreeTypeGlyphToCanvas(e,i,t,r),bitmapLeft:o/this.pixelRatio,bitmapTop:s/this.pixelRatio,rows:t/this.pixelRatio,width:i/this.pixelRatio}}this.glyphCache.set(e,l)}l&&l.bitmap&&t.drawImage(l.bitmap,r+l.bitmapLeft,Math.round(o)-l.bitmapTop,l.width,l.rows)}))}getScratchCanvas(t,e){const n=document.createElement("canvas");return n.width=t,n.height=e,n.style.width=t+"px",n.style.height=e+"px",n.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0),n}}},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(1),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(t){this.options=t}updateSurfaceOptions(t){this.options=Object.assign(Object.assign({},this.options),t)}render(t){return r(this,void 0,void 0,(function*(){return this.renderInMainThread(t)}))}renderInMainThread(t){return r(this,void 0,void 0,(function*(){const e=this.options.canvasService,n=e.buildOptimizedContext(this.options.pageWidth,this.options.pageHeight),r={context:n,bookProvider:t},o=yield this.options.pageRenderer.render(r),s=e.pixelRatio;let a=this.options.pageHeight,c=0;if(1==this.options.navigationMode){const e=o.rect,n=Math.floor(e.top);a=Math.ceil(e.bottom)-n,c=e.top*s;const i=(yield t.getTokens()).children;for(const t of i){const n=t.words;for(let t=0;t<n.length;t++){const i=n[t];n[t]=Object.assign(Object.assign({},i),{y:i.y-e.top})}}}const l=n.getImageData(0,c,n.canvas.width,a*s),u=e.buildOptimizedContext(this.options.pageWidth,a);u.putImageData(l,0,0);const h=yield i.a.canvasToImage(u.canvas,this.options.pageWidth,a);return h.className=h.height>=this.options.pageHeight?"kg-full-page-img":"kg-short-page-img",Object.assign(Object.assign({},o),{image:h})}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return p}));var i=n(11),r=n(19),o=n(20),s=n(15),a=n(22),c=n(23),l=n(24),u=n(21),h=n(16),d=n(14),f=n(13);class p{static build(t,e){e||(e=new d.a);const n=new f.a(e),p=new c.a,g=new h.a,v=new l.a(p,g),m=new s.a(Object.assign(Object.assign({},t),{rectRenderer:v,lineRenderer:p,styleModifier:g}),n),y=new r.a(t),b=new a.a(Object.assign(Object.assign({},t),{fontRender:y,decorationRenderer:m})),w=new o.a(Object.assign(Object.assign({},t),{rectRenderer:v}),n),_={run:b,image:w},x=new i.a({nodeRenderers:_,decorationRender:m},n),S={run:b,image:w,kvg:new u.a(x)};return new i.a({nodeRenderers:S,decorationRender:m},n)}}},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{static getHeight(){return Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight)}static getWidth(){return Math.max(document.body.scrollWidth,document.documentElement.scrollWidth,document.body.offsetWidth,document.documentElement.offsetWidth,document.documentElement.clientWidth)}static determineDPI(){const t=document.createElement("div"),e=t.style;e.height="1in",e.left="-100%",e.position="absolute",e.top="-100%",e.height="1in",e.width="1in",document.body.append(t);const n=t.offsetHeight;return t.remove(),n}}},function(t,e,n){"use strict";n.r(e);var i=n(27);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var o=n(28);for(var r in o)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(r);var s=n(1);n.d(e,"TransformIndex",(function(){return s.b})),n.d(e,"CanvasUtils",(function(){return s.a}));var a=n(29);n.d(e,"DefaultCanvasService",(function(){return a.a}));var c=n(8);n.d(e,"Direction",(function(){return c.a})),n.d(e,"NavigationType",(function(){return c.b}));var l=n(9);n.d(e,"DevBookDataLoader",(function(){return l.a}));var u=n(10);n.d(e,"DevBookProviderAdapter",(function(){return u.a}));var h=n(30);n.d(e,"DevBookProviderFactory",(function(){return h.a}));var d=n(12);n.d(e,"ImageUnscrambler",(function(){return d.a}));var f=n(31);for(var r in f)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return f[t]}))}(r);var p=n(13);n.d(e,"MetricsUtil",(function(){return p.a}));var g=n(14);n.d(e,"ConsoleMetricsService",(function(){return g.a}));var v=n(2);n.d(e,"MetricsConstants",(function(){return v.a}));var m=n(32);for(var r in m)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","MetricsUtil","ConsoleMetricsService","MetricsConstants"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return m[t]}))}(r);var y=n(15);n.d(e,"DecorationRenderer",(function(){return y.a}));var b=n(16);n.d(e,"DecorationStyleModifier",(function(){return b.a}));var w=n(0);n.d(e,"ContentBoundingBox",(function(){return w.a}));var _=n(17);n.d(e,"CanvasRenderingContext2DWrapper",(function(){return _.a}));var x=n(18);n.d(e,"PathBuilderContext2D",(function(){return x.a}));var S=n(4);n.d(e,"RectUtils",(function(){return S.a}));var k=n(33);for(var r in k)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","MetricsUtil","ConsoleMetricsService","MetricsConstants","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return k[t]}))}(r);var E=n(5);n.d(e,"SvgBuilder",(function(){return E.a}));var R=n(19);n.d(e,"DefaultGlyphRenderer",(function(){return R.a}));var C=n(34);for(var r in C)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","MetricsUtil","ConsoleMetricsService","MetricsConstants","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return C[t]}))}(r);var P=n(35);n.d(e,"FreeTypeGlyphRenderer",(function(){return P.a}));var T=n(36);for(var r in T)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","MetricsUtil","ConsoleMetricsService","MetricsConstants","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return T[t]}))}(r);var I=n(37);for(var r in I)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","MetricsUtil","ConsoleMetricsService","MetricsConstants","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return I[t]}))}(r);var A=n(20);n.d(e,"ImageRenderer",(function(){return A.a}));var D=n(21);n.d(e,"KVGRenderer",(function(){return D.a}));var L=n(38);for(var r in L)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","MetricsUtil","ConsoleMetricsService","MetricsConstants","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer","ImageRenderer","KVGRenderer"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return L[t]}))}(r);var O=n(22);n.d(e,"RunRenderer",(function(){return O.a}));var B=n(39);n.d(e,"PageImageRenderer",(function(){return B.a}));var M=n(40);n.d(e,"PageRendererFactory",(function(){return M.a}));var N=n(11);n.d(e,"PageRenderer",(function(){return N.a}));var F=n(41);for(var r in F)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","MetricsUtil","ConsoleMetricsService","MetricsConstants","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer","ImageRenderer","KVGRenderer","RunRenderer","PageImageRenderer","PageRendererFactory","PageRenderer"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return F[t]}))}(r);var z=n(23);n.d(e,"LineRenderer",(function(){return z.a}));var U=n(42);for(var r in U)["default","TransformIndex","CanvasUtils","DefaultCanvasService","Direction","NavigationType","DevBookDataLoader","DevBookProviderAdapter","DevBookProviderFactory","ImageUnscrambler","MetricsUtil","ConsoleMetricsService","MetricsConstants","DecorationRenderer","DecorationStyleModifier","ContentBoundingBox","CanvasRenderingContext2DWrapper","PathBuilderContext2D","RectUtils","SvgBuilder","DefaultGlyphRenderer","FreeTypeGlyphRenderer","ImageRenderer","KVGRenderer","RunRenderer","PageImageRenderer","PageRendererFactory","PageRenderer","LineRenderer"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return U[t]}))}(r);var H=n(25);n.d(e,"RectCornerRenderer",(function(){return H.a}));var j=n(24);n.d(e,"RectRenderer",(function(){return j.a}));var G=n(7);n.d(e,"SidePosition",(function(){return G.a}));var W=n(26);n.d(e,"RectSideRenderer",(function(){return W.a}));var V=n(6);n.d(e,"HSVtoRGB",(function(){return V.a})),n.d(e,"RGBtoHSV",(function(){return V.d})),n.d(e,"HexToRGBA",(function(){return V.b})),n.d(e,"RGBAToHexA",(function(){return V.c}));var Y=n(3);n.d(e,"assertIsDefined",(function(){return Y.b})),n.d(e,"assert",(function(){return Y.a}));var K=n(43);n.d(e,"WindowUtils",(function(){return K.a}))},function(t,e){null==CanvasRenderingContext2D.prototype.ellipse&&(CanvasRenderingContext2D.prototype.ellipse=function(t,e,n,i,r,o,s,a){this.save(),this.translate(t,e),this.rotate(r),this.scale(n,i),this.arc(0,0,1,o,s,a),this.restore()}),"function"==typeof Path2D&&"function"==typeof(new Path2D).addPath||function(){function t(t){if(this.ops_=[],null!=t)if("string"==typeof t)try{this.ops_=parser.parse(t)}catch(t){}else{if(!t.hasOwnProperty("ops_"))throw"Error: "+typeof t+"is not a valid argument to Path";this.ops_=t.ops_.slice(0)}}parser=function(){function t(t,e,n,i,r,o){this.message=t,this.expected=e,this.found=n,this.offset=i,this.line=r,this.column=o,this.name="SyntaxError"}return function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}(t,Error),{SyntaxError:t,parse:function(e){var n,i=arguments.length>1?arguments[1]:{},r={},o={svg_path:wt},s=wt,a=r,c=null,l=function(t){return ce},u=/^[Mm]/,h={type:"class",value:"[Mm]",description:"[Mm]"},d=function(t,e){var n=t;le&&(n="M",le=!1),ce.push({type:"moveTo",args:de(n,e[0])});for(var i=1;i<e.length;i++)ce.push({type:"lineTo",args:de(t,e[i])})},f=function(t,e){return me(t,e)},p=/^[Zz]/,g={type:"class",value:"[Zz]",description:"[Zz]"},v=function(){ce.push({type:"closePath",args:[]})},m=/^[Ll]/,y={type:"class",value:"[Ll]",description:"[Ll]"},b=function(t,e){for(var n=0;n<e.length;n++)ce.push({type:"lineTo",args:de(t,e[n])})},w=/^[Hh]/,_={type:"class",value:"[Hh]",description:"[Hh]"},x=function(t,e){for(var n=0;n<e.length;n++)ce.push({type:"lineTo",args:ge(t,e[n])})},S=/^[Vv]/,k={type:"class",value:"[Vv]",description:"[Vv]"},E=function(t,e){for(var n=0;n<e.length;n++)ce.push({type:"lineTo",args:ve(t,e[n])})},R=/^[Cc]/,C={type:"class",value:"[Cc]",description:"[Cc]"},P=function(t,e){for(var n=0;n<e.length;n++)ce.push({type:"bezierCurveTo",args:fe(t,e[n])})},T=function(t,e,n){return t.concat(e,n)},I=/^[Ss]/,A={type:"class",value:"[Ss]",description:"[Ss]"},D=function(t,e){for(var n=0;n<e.length;n++)ce.push({type:"bezierCurveTo",args:pe().concat(fe(t,e[n]))})},L=function(t,e){return t.concat(e)},O=/^[Qq]/,B={type:"class",value:"[Qq]",description:"[Qq]"},M=function(t,e){for(var n=0;n<e.length;n++)ce.push({type:"quadraticCurveTo",args:fe(t,e[n])})},N=/^[Tt]/,F={type:"class",value:"[Tt]",description:"[Tt]"},z=function(t,e){for(var n=0;n<e.length;n++){var i=pe();ce.push({type:"quadraticCurveTo",args:i.concat(fe(t,e[n]))}),ae=i.slice(0)}},U=/^[Aa]/,H={type:"class",value:"[Aa]",description:"[Aa]"},j=function(t,e){for(var n=0;n<e.length;n++){var i=[se.slice()],r=[de(t,e[n].slice(-2))];absArgs=i.concat(e[n].slice(0,-2),r),Ie.apply(this,absArgs)}},G=function(t,e,n,i,r,o){return[parseFloat(t),parseFloat(e),parseFloat(he(n).join("")),parseInt(i),parseInt(r),o[0],o[1]]},W=function(t,e){return[t,e]},V=function(t){return parseFloat(he(t).join(""))},Y="0",K={type:"literal",value:"0",description:'"0"'},Z="1",X={type:"literal",value:"1",description:'"1"'},$=",",q={type:"literal",value:",",description:'","'},J=".",Q={type:"literal",value:".",description:'"."'},tt=/^[eE]/,et={type:"class",value:"[eE]",description:"[eE]"},nt="+",it={type:"literal",value:"+",description:'"+"'},rt="-",ot={type:"literal",value:"-",description:'"-"'},st=/^[0-9]/,at={type:"class",value:"[0-9]",description:"[0-9]"},ct=function(t){return t.join("")},lt=/^[ \t\n\r]/,ut={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},ht=0,dt=0,ft={line:1,column:1,seenCR:!1},pt=0,gt=[],vt=0;if("startRule"in i){if(!(i.startRule in o))throw new Error("Can't start parsing from rule \""+i.startRule+'".');s=o[i.startRule]}function mt(t){return dt!==t&&(dt>t&&(dt=0,ft={line:1,column:1,seenCR:!1}),function(t,n,i){var r,o;for(r=n;r<i;r++)"\n"===(o=e.charAt(r))?(t.seenCR||t.line++,t.column=1,t.seenCR=!1):"\r"===o||"\u2028"===o||"\u2029"===o?(t.line++,t.column=1,t.seenCR=!0):(t.column++,t.seenCR=!1)}(ft,dt,t),dt=t),ft}function yt(t){ht<pt||(ht>pt&&(pt=ht,gt=[]),gt.push(t))}function bt(n,i,r){var o=mt(r),s=r<e.length?e.charAt(r):null;return null!==i&&function(t){var e=1;for(t.sort((function(t,e){return t.description<e.description?-1:t.description>e.description?1:0}));e<t.length;)t[e-1]===t[e]?t.splice(e,1):e++}(i),new t(null!==n?n:function(t,e){var n,i=new Array(t.length);for(n=0;n<t.length;n++)i[n]=t[n].description;return"Expected "+(t.length>1?i.slice(0,-1).join(", ")+" or "+i[t.length-1]:i[0])+" but "+(e?'"'+function(t){function e(t){return t.charCodeAt(0).toString(16).toUpperCase()}return t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(t){return"\\x0"+e(t)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(t){return"\\x"+e(t)})).replace(/[\u0180-\u0FFF]/g,(function(t){return"\\u0"+e(t)})).replace(/[\u1080-\uFFFF]/g,(function(t){return"\\u"+e(t)}))}(e)+'"':"end of input")+" found."}(i,s),i,s,r,o.line,o.column)}function wt(){var t,e,n,i,o;for(t=ht,e=[],n=oe();n!==r;)e.push(n),n=oe();if(e!==r)if((n=_t())===r&&(n=c),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r?t=e=l(n):(ht=t,t=a)}else ht=t,t=a;else ht=t,t=a;return t}function _t(){var t,e,n,i,o;if(t=ht,(e=xt())!==r){for(n=ht,i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=_t())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=[e,n]:(ht=t,t=a)}else ht=t,t=a;return t}function xt(){var t,e,n,i,o;if(t=ht,(e=Et())!==r){for(n=ht,i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=St())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=[e,n]:(ht=t,t=a)}else ht=t,t=a;return t}function St(){var t,e,n,i,o;if(t=ht,(e=kt())!==r){for(n=ht,i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=St())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=[e,n]:(ht=t,t=a)}else ht=t,t=a;return t}function kt(){var t;return(t=Ct())===r&&(t=Pt())===r&&(t=It())===r&&(t=Dt())===r&&(t=Lt())===r&&(t=Mt())===r&&(t=zt())===r&&(t=jt())===r&&(t=Wt()),t}function Et(){var t,n,i,o;if(t=ht,u.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(h)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=Rt())!==r?t=n=d(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function Rt(){var t,e,n,i,o;return t=ht,(e=Kt())!==r?(n=ht,(i=Jt())===r&&(i=c),i!==r&&(o=Tt())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=f(e,n):(ht=t,t=a)):(ht=t,t=a),t}function Ct(){var t;return p.test(e.charAt(ht))?(t=e.charAt(ht),ht++):(t=r,0===vt&&yt(g)),t!==r&&(t=v()),t}function Pt(){var t,n,i,o;if(t=ht,m.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(y)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=Tt())!==r?t=n=b(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function Tt(){var t,e,n,i,o;return t=ht,(e=Kt())!==r?(n=ht,(i=Jt())===r&&(i=c),i!==r&&(o=Tt())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=f(e,n):(ht=t,t=a)):(ht=t,t=a),t}function It(){var t,n,i,o;if(t=ht,w.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(_)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=At())!==r?t=n=x(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function At(){var t,e,n,i,o;return t=ht,(e=Zt())!==r?(n=ht,(i=Jt())===r&&(i=c),i!==r&&(o=At())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=f(e,n):(ht=t,t=a)):(ht=t,t=a),t}function Dt(){var t,n,i,o;if(t=ht,S.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(k)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=At())!==r?t=n=E(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function Lt(){var t,n,i,o;if(t=ht,R.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(C)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=Ot())!==r?t=n=P(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function Ot(){var t,e,n,i,o;return t=ht,(e=Bt())!==r?(n=ht,(i=Jt())===r&&(i=c),i!==r&&(o=Ot())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=f(e,n):(ht=t,t=a)):(ht=t,t=a),t}function Bt(){var t,e,n,i,o,s;return t=ht,(e=Kt())!==r?((n=Jt())===r&&(n=c),n!==r&&(i=Kt())!==r?((o=Jt())===r&&(o=c),o!==r&&(s=Kt())!==r?t=e=T(e,i,s):(ht=t,t=a)):(ht=t,t=a)):(ht=t,t=a),t}function Mt(){var t,n,i,o;if(t=ht,I.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(A)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=Nt())!==r?t=n=D(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function Nt(){var t,e,n,i,o;return t=ht,(e=Ft())!==r?(n=ht,(i=Jt())===r&&(i=c),i!==r&&(o=Nt())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=f(e,n):(ht=t,t=a)):(ht=t,t=a),t}function Ft(){var t,e,n,i;return t=ht,(e=Kt())!==r?((n=Jt())===r&&(n=c),n!==r&&(i=Kt())!==r?t=e=L(e,i):(ht=t,t=a)):(ht=t,t=a),t}function zt(){var t,n,i,o;if(t=ht,O.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(B)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=Ut())!==r?t=n=M(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function Ut(){var t,e,n,i,o;return t=ht,(e=Ht())!==r?(n=ht,(i=Jt())===r&&(i=c),i!==r&&(o=Ut())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=f(e,n):(ht=t,t=a)):(ht=t,t=a),t}function Ht(){var t,e,n,i;return t=ht,(e=Kt())!==r?((n=Jt())===r&&(n=c),n!==r&&(i=Kt())!==r?t=e=L(e,i):(ht=t,t=a)):(ht=t,t=a),t}function jt(){var t,n,i,o;if(t=ht,N.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(F)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=Gt())!==r?t=n=z(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function Gt(){var t,e,n,i,o;return t=ht,(e=Kt())!==r?(n=ht,(i=Jt())===r&&(i=c),i!==r&&(o=Gt())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=f(e,n):(ht=t,t=a)):(ht=t,t=a),t}function Wt(){var t,n,i,o;if(t=ht,U.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(H)),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r&&(o=Vt())!==r?t=n=j(n,o):(ht=t,t=a)}else ht=t,t=a;return t}function Vt(){var t,e,n,i,o;return t=ht,(e=Yt())!==r?(n=ht,(i=Jt())===r&&(i=c),i!==r&&(o=Vt())!==r?n=i=[i,o]:(ht=n,n=a),n===r&&(n=c),n!==r?t=e=f(e,n):(ht=t,t=a)):(ht=t,t=a),t}function Yt(){var t,e,n,i,o,s,l,u,h,d,f;return t=ht,(e=Xt())!==r?((n=Jt())===r&&(n=c),n!==r&&(i=Xt())!==r?((o=Jt())===r&&(o=c),o!==r&&(s=$t())!==r&&Jt()!==r&&(l=qt())!==r?((u=Jt())===r&&(u=c),u!==r&&(h=qt())!==r?((d=Jt())===r&&(d=c),d!==r&&(f=Kt())!==r?t=e=G(e,i,s,l,h,f):(ht=t,t=a)):(ht=t,t=a)):(ht=t,t=a)):(ht=t,t=a)):(ht=t,t=a),t}function Kt(){var t,e,n,i;return t=ht,(e=Zt())!==r?((n=Jt())===r&&(n=c),n!==r&&(i=Zt())!==r?t=e=W(e,i):(ht=t,t=a)):(ht=t,t=a),t}function Zt(){var t;return(t=$t())!==r&&(t=V(t)),t}function Xt(){var t;return(t=te())===r&&(t=re()),t}function $t(){var t,e,n;return t=ht,(e=ie())===r&&(e=c),e!==r&&(n=te())!==r?t=e=[e,n]:(ht=t,t=a),t===r&&(t=ht,(e=ie())===r&&(e=c),e!==r&&(n=re())!==r?t=e=[e,n]:(ht=t,t=a)),t}function qt(){var t;return 48===e.charCodeAt(ht)?(t=Y,ht++):(t=r,0===vt&&yt(K)),t===r&&(49===e.charCodeAt(ht)?(t=Z,ht++):(t=r,0===vt&&yt(X))),t}function Jt(){var t,e,n,i,o;if(t=ht,e=[],(n=oe())!==r)for(;n!==r;)e.push(n),n=oe();else e=a;if(e!==r)if((n=Qt())===r&&(n=c),n!==r){for(i=[],o=oe();o!==r;)i.push(o),o=oe();i!==r?t=e=[e,n,i]:(ht=t,t=a)}else ht=t,t=a;else ht=t,t=a;if(t===r)if(t=ht,(e=Qt())!==r){for(n=[],i=oe();i!==r;)n.push(i),i=oe();n!==r?t=e=[e,n]:(ht=t,t=a)}else ht=t,t=a;return t}function Qt(){var t;return 44===e.charCodeAt(ht)?(t=$,ht++):(t=r,0===vt&&yt(q)),t}function te(){var t,e,n;return t=ht,(e=ee())!==r?((n=ne())===r&&(n=c),n!==r?t=e=[e,n]:(ht=t,t=a)):(ht=t,t=a),t===r&&(t=ht,(e=re())!==r&&(n=ne())!==r?t=e=[e,n]:(ht=t,t=a)),t}function ee(){var t,n,i,o;return t=ht,(n=re())===r&&(n=c),n!==r?(46===e.charCodeAt(ht)?(i=J,ht++):(i=r,0===vt&&yt(Q)),i!==r&&(o=re())!==r?t=n=[n,i,o]:(ht=t,t=a)):(ht=t,t=a),t===r&&(t=ht,(n=re())!==r?(46===e.charCodeAt(ht)?(i=J,ht++):(i=r,0===vt&&yt(Q)),i!==r?t=n=[n,i]:(ht=t,t=a)):(ht=t,t=a)),t}function ne(){var t,n,i,o;return t=ht,tt.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(et)),n!==r?((i=ie())===r&&(i=c),i!==r&&(o=re())!==r?t=n=[n,i,o]:(ht=t,t=a)):(ht=t,t=a),t}function ie(){var t;return 43===e.charCodeAt(ht)?(t=nt,ht++):(t=r,0===vt&&yt(it)),t===r&&(45===e.charCodeAt(ht)?(t=rt,ht++):(t=r,0===vt&&yt(ot))),t}function re(){var t,n;if(t=[],st.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(at)),n!==r)for(;n!==r;)t.push(n),st.test(e.charAt(ht))?(n=e.charAt(ht),ht++):(n=r,0===vt&&yt(at));else t=a;return t!==r&&(t=ct(t)),t}function oe(){var t;return lt.test(e.charAt(ht))?(t=e.charAt(ht),ht++):(t=r,0===vt&&yt(ut)),t}var se=[0,0],ae=[0,0],ce=[],le=!0,ue="";function he(t){for(var e=[],n=0;n<t.length;n++)t[n]instanceof Array?e.push.apply(e,he(t[n])):e.push(t[n]);return e}function de(t,e){return-1==="mlazhvcsqt".indexOf(t)?se=e:(se[0]+=e[0],se[1]+=e[1]),ue=t,se.slice(0)}function fe(t,e){for(var n=[],i=se.slice(0),r=0;r<e.length;r+=2){se=i.slice(0);var o=de(t,e.slice(r,r+2));n=n.concat(o),r==e.length-4&&(ae=o.slice(0))}return n}function pe(){-1=="CcSsQqTt".indexOf(ue)&&(ae=se.slice(0));var t=[0,0];return t[0]=2*se[0]-ae[0],t[1]=2*se[1]-ae[1],t}function ge(t,e){var n=[e,0];return"H"==t&&(n[1]=se[1]),de(t,n)}function ve(t,e){var n=[0,e];return"V"==t&&(n[0]=se[0]),de(t,n)}function me(t,e){var n=[t];if(e&&e.length>1)for(var i=e[1],r=0;r<i.length;r++)n.push(i[r]);return n}function ye(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function be(t,e){return t[0]*e[0]+t[1]*e[1]}function we(t,e){return be(t,e)/(ye(t)*ye(e))}function _e(t,e,n){return Math.min(Math.max(t,e),n)}function xe(t,e){var n=1;return t[0]*e[1]-t[1]*e[0]<0&&(n=-1),n*Math.acos(_e(we(t,e),-1,1))}function Se(t,e){var n=Math.cos(e),i=Math.sin(e);return[n*t[0]+i*t[1],-1*i*t[0]+n*t[1]]}function ke(t,e){var n=Math.cos(e),i=Math.sin(e);return[n*t[0]-i*t[1],i*t[0]+n*t[1]]}function Ee(t,e){return[(t[0]-e[0])/2,(t[1]-e[1])/2]}function Re(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}function Ce(t,e){return[t[0]*e[0],t[1]*e[1]]}function Pe(t,e){return[t*e[0],t*e[1]]}function Te(t,e){return[t[0]+e[0],t[1]+e[1]]}function Ie(t,e,n,i,r,o,s){if(0!=e&&0!=n){i*=Math.PI/180,e=Math.abs(e),n=Math.abs(n);var a=Se(Ee(t,s),i),c=Ce(a,a),l=Math.pow(e,2),u=Math.pow(n,2),h=Math.sqrt(c[0]/l+c[1]/u);h>1&&(e*=h,n*=h,l=Math.pow(e,2),u=Math.pow(n,2));var d=Math.sqrt(Math.abs(l*u-l*c[1]-u*c[0])/(l*c[1]+u*c[0]));r==o&&(d*=-1);var f=Pe(d,[e*a[1]/n,-n*a[0]/e]),p=Te(ke(f,i),Re(t,s)),g=[(a[0]-f[0])/e,(a[1]-f[1])/n],v=[(-1*a[0]-f[0])/e,(-1*a[1]-f[1])/n],m=xe([1,0],g),y=m,b=m+xe(g,v);ce.push({type:"save",args:[]},{type:"translate",args:[p[0],p[1]]},{type:"rotate",args:[i]},{type:"scale",args:[e,n]},{type:"arc",args:[0,0,1,y,b,1-o]},{type:"restore",args:[]})}else ce.push({type:"lineTo",args:s})}if((n=s())!==r&&ht===e.length)return n;throw n!==r&&ht<e.length&&yt({type:"end",description:"end of input"}),bt(null,gt,pt)}}}();var e=["closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","rect","arc","arcTo","ellipse","isPointInPath","isPointInStroke"];function n(t){return function(){this.ops_.push({type:t,args:Array.prototype.slice.call(arguments,0)})}}for(var i=0;i<e.length;i++){var r=e[i];t.prototype[r]=n(r)}t.prototype.addPath=function(t,e){var n=!1;e&&null!=e.a&&null!=e.b&&null!=e.c&&null!=e.d&&null!=e.e&&null!=e.f&&(n=!0,this.ops_.push({type:"save",args:[]}),this.ops_.push({type:"transform",args:[e.a,e.b,e.c,e.d,e.e,e.f]})),this.ops_=this.ops_.concat(t.ops_),n&&this.ops_.push({type:"restore",args:[]})},original_fill=CanvasRenderingContext2D.prototype.fill,original_stroke=CanvasRenderingContext2D.prototype.stroke,original_clip=CanvasRenderingContext2D.prototype.clip,original_is_point_in_path=CanvasRenderingContext2D.prototype.isPointInPath,original_is_point_in_stroke=CanvasRenderingContext2D.prototype.isPointInStroke,CanvasRenderingContext2D.prototype.fill=function(e){if(e instanceof t){this.beginPath();for(var n=0,i=e.ops_.length;n<i;n++){var r=e.ops_[n];CanvasRenderingContext2D.prototype[r.type].apply(this,r.args)}original_fill.apply(this,Array.prototype.slice.call(arguments,1))}else original_fill.apply(this,arguments)},CanvasRenderingContext2D.prototype.stroke=function(e){if(e instanceof t){this.beginPath();for(var n=0,i=e.ops_.length;n<i;n++){var r=e.ops_[n];CanvasRenderingContext2D.prototype[r.type].apply(this,r.args)}original_stroke.call(this)}else original_stroke.call(this)},CanvasRenderingContext2D.prototype.clip=function(e){if(e instanceof t){this.beginPath();for(var n=0,i=e.ops_.length;n<i;n++){var r=e.ops_[n];CanvasRenderingContext2D.prototype[r.type].apply(this,r.args)}original_clip.apply(this,Array.prototype.slice.call(arguments,1))}else original_clip.apply(this,arguments)},CanvasRenderingContext2D.prototype.isPointInPath=function(e){if(e instanceof t){this.beginPath();for(var n=0,i=e.ops_.length;n<i;n++){var r=e.ops_[n];CanvasRenderingContext2D.prototype[r.type].apply(this,r.args)}return original_is_point_in_path.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_path.apply(this,arguments)},CanvasRenderingContext2D.prototype.isPointInStroke=function(e){if(e instanceof t){this.beginPath();for(var n=0,i=e.ops_.length;n<i;n++){var r=e.ops_[n];CanvasRenderingContext2D.prototype[r.type].apply(this,r.args)}return original_is_point_in_stroke.apply(this,Array.prototype.slice.call(arguments,1))}return original_is_point_in_stroke.apply(this,arguments)},Path2D=t}()}])},module.exports=e()},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{}i.FORMAT_VERSION_V3="3",i.DEFAULT_MAX_COLUMN="2",i.INTERACTION_LAYER_CLASS="kg-client-interaction-layer",i.ROOT_ELEMENT_CLASS="kg-client-root",i.SELECTION_CSS_CLASS="kg-client-selection",i.HIGHLIGHT_CSS_CLASS="kg-client-highlight",i.NOTE_CSS_CLASS="kg-client-note",i.SEARCH_RESULT_CSS_CLASS="kg-client-search",i.WORD_PIECE_CSS_CLASS="kg-client-piece",i.WORD_CSS_CLASS="kg-client-dictionary",i.POSITION_ATTRIBUTE_NAME="data-id",i.ROOT_THEME_CLASS={custom:"kg-client-theme--custom",default:"kg-client-theme--default",night:"kg-client-theme--night",dark:"kg-client-theme--dark",sepia:"kg-client-theme--sepia"},i.EXTERNAL_LINK_TARGET_VALUE="_blank"},function(t,e,n){"use strict";var i;n.d(e,"a",(function(){return i})),function(t){t[t.None=0]="None",t[t.Up=1]="Up",t[t.Down=2]="Down",t[t.Left=3]="Left",t[t.Right=4]="Right",t[t.Horizontal=5]="Horizontal"}(i||(i={}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{static roundNumberFromString(t){const e=Math.round(100*(parseFloat(t)+Number.EPSILON))/100;return isNaN(e)?0:e}static roudNumber(t){const e=Math.round(100*(t+Number.EPSILON))/100;return isNaN(e)?0:e}static between(t,e,n){return e<=t&&t<=n}}},function(t,e,n){"use strict";var i;n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),function(t){t.None="none",t.Click="click",t.Drag="drag",t.Swipe="swipe"}(i||(i={}));class r{constructor(t){this.options=t,this.gesture=i.None}consume(t){t.stopPropagation(),t.preventDefault()}getPointerLocation(t,e,n){var i,r;return{x:(null!=t?t:0)-(null!==(i=null==n?void 0:n.getBoundingClientRect().x)&&void 0!==i?i:0),y:(null!=e?e:0)-(null!==(r=null==n?void 0:n.getBoundingClientRect().y)&&void 0!==r?r:0)}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class r{constructor(){this.promise=new Promise(((t,e)=>{this.resolver=t,this.rejecter=e}))}resolve(t){this.value=t,this.resolver(this.value)}reject(t){this.rejecter(t)}getValue(){return i(this,void 0,void 0,(function*(){return yield this.promise,this.value}))}getPromise(){return i(this,void 0,void 0,(function*(){return this.promise}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(17),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(t){this.options=t,this.views=[],this.listeners=[]}goTo(){this.removeViews(),this.options.renderProvider.reset();const t=this.createView();return this.views.push(t),this.setCurrent(t,"Absolute"),t}goToPrevious(){var t;return r(this,void 0,void 0,(function*(){if(yield null===(t=this.currentView)||void 0===t?void 0:t.isFirst())return this.currentView;let e=this.views.findIndex((t=>t===this.currentView));const n=e>0?this.views[--e]:this.prependNewView();this.setCurrent(n,"PreviousPage");for(const t of this.listeners)yield t.onBack(n);return this.removeExpiredEntries(e-1),n}))}goToNext(){var t;return r(this,void 0,void 0,(function*(){if(yield null===(t=this.currentView)||void 0===t?void 0:t.isLast())return this.currentView;let e=this.views.findIndex((t=>t===this.currentView));const n=-1!==e&&e<this.views.length-1?this.views[++e]:this.appendNewView();this.setCurrent(n,"NextPage");for(const t of this.listeners)yield t.onForward(n);return this.removeExpiredEntries(e+1),n}))}removeExpiredEntries(t){const e=t-this.options.cachedPagesCount,n=t+this.options.cachedPagesCount;this.views.forEach(((t,i)=>{(i<e||i>n)&&(this.removeView(t),this.views.splice(i,1))}))}addNavigationListener(t){this.listeners.push(t)}prependNewView(){const t=this.createView();return this.views.unshift(t),t}appendNewView(){const t=this.createView();return this.views.push(t),t}createView(){return new i.a(this.options.bookRenderOptions)}removeViews(){for(;this.views.length>0;)this.views.pop().getRoot().remove()}removeView(t){t.getRoot().remove()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(3),r=n(1);class o{getDimensions(t){if(null!==t){const e=i.a.roundNumberFromString(t.style.top),n=i.a.roundNumberFromString(t.style.height)+e,r=i.a.roundNumberFromString(t.style.left);return{top:e,bottom:n,left:r,right:i.a.roundNumberFromString(t.style.width)+r}}return{top:0,bottom:0,left:0,right:0}}getElementLastPiece(t){return null!==t&&t.classList.contains(r.a.WORD_PIECE_CSS_CLASS)&&null!==t.nextElementSibling&&t.nextElementSibling.classList.contains(r.a.WORD_PIECE_CSS_CLASS)?null==t?void 0:t.nextElementSibling:t}getElementFirstPiece(t){return null!==t&&t.classList.contains(r.a.WORD_PIECE_CSS_CLASS)&&null!==t.previousElementSibling&&t.previousElementSibling.classList.contains(r.a.WORD_PIECE_CSS_CLASS)?null==t?void 0:t.previousElementSibling:t}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i extends Error{constructor(){super("The operation failed because of throttling")}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(0),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{static debouncer(t,e,n=!0){let o,s;return Object(i.assert)(e>0),(...i)=>r(this,void 0,void 0,(function*(){return new Promise(((r,a)=>{o&&(n&&(null==s||s("Ignored consecutive call before the end of debounce period")),clearTimeout(o)),s=a,o=setTimeout((()=>{o=void 0,s=void 0,r(t(...i))}),e)}))}))}static throttler(t,e){Object(i.assert)(e>0);let n=!0;return(...i)=>n?(n=!1,setTimeout((()=>n=!0),e),{invoked:!0,result:t(...i)}):{invoked:!1}}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(4),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o extends i.b{constructor(t){super(t),this.onDown=t=>r(this,void 0,void 0,(function*(){var e,n;this.consume(t),this.gesture=i.a.Click;const r=t.target;yield null===(n=(e=this.options.callbacks).onDragStart)||void 0===n?void 0:n.call(e,r,this.getPointerLocation(t.clientX,t.clientY,r.parentElement))})),this.onMove=t=>r(this,void 0,void 0,(function*(){var e,n;if(this.consume(t),t.buttons<=0)return;this.gesture=i.a.Drag;const r=t.target;yield null===(n=(e=this.options.callbacks).onDrag)||void 0===n?void 0:n.call(e,r,this.getPointerLocation(t.clientX,t.clientY,r.parentElement))})),this.onUp=t=>r(this,void 0,void 0,(function*(){var e,n;this.consume(t),this.gesture=i.a.None,yield null===(n=(e=this.options.callbacks).onDragComplete)||void 0===n?void 0:n.call(e)})),this.onDoubleClick=t=>r(this,void 0,void 0,(function*(){var e,n;this.consume(t),this.gesture=i.a.None;const r=t.target;yield null===(n=(e=this.options.callbacks).onDoubleClick)||void 0===n?void 0:n.call(e,r,this.getPointerLocation(t.clientX,t.clientY,r.parentElement))}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(4),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o extends i.b{constructor(t){super(t),this.PRESS_THRESHOLD_PX_SQUARED=Math.pow(5,2),this.PRESS_THRESHOLD_MS=500,this.onDown=t=>r(this,void 0,void 0,(function*(){this.consume(t),this.touch||(this.touch=t.touches.item(0),this.startX=this.touch.clientX,this.startY=this.touch.clientY,this.startTimer=setTimeout((()=>r(this,void 0,void 0,(function*(){var e,n,r,o;const s=t.target;yield null===(n=(e=this.options.callbacks).onDragStart)||void 0===n?void 0:n.call(e,s,this.getPointerLocation(this.touch.clientX,this.touch.clientY,s.parentElement)),yield null===(o=(r=this.options.callbacks).onDrag)||void 0===o?void 0:o.call(r,s,this.getPointerLocation(this.touch.clientX,this.touch.clientY,s.parentElement)),this.gesture=i.a.Drag}))),this.PRESS_THRESHOLD_MS))})),this.onMove=t=>r(this,void 0,void 0,(function*(){var e,n,r,o;const s=this.findMatchingTouch(t);if(s&&this.gesture!==i.a.Swipe)if(this.gesture===i.a.Drag){const i=document.elementFromPoint(s.clientX,s.clientY);this.consume(t),i&&i.getAttribute("data-index")?yield null===(n=(e=this.options.callbacks).onDragOnToken)||void 0===n?void 0:n.call(e,i,this.getPointerLocation(s.clientX,s.clientY,i.parentElement)):yield null===(o=(r=this.options.callbacks).onDragOnBlankSpace)||void 0===o?void 0:o.call(r,i,this.getPointerLocation(s.clientX,s.clientY,i.parentElement))}else{Math.pow(s.clientX-this.touch.clientX,2)+Math.pow(s.clientY-this.touch.clientY,2)>this.PRESS_THRESHOLD_PX_SQUARED&&(this.gesture=i.a.Swipe,this.clearTimer())}})),this.onUp=t=>r(this,void 0,void 0,(function*(){var e,n,r,o;this.consume(t);const s=this.findMatchingTouch(t);s&&this.gesture!==i.a.Drag?this.gesture===i.a.Swipe?this.processSwipe(s):(yield null===(n=(e=this.options.callbacks).onTap)||void 0===n?void 0:n.call(e),s.target.href&&s.target.click()):yield null===(o=(r=this.options.callbacks).onDragComplete)||void 0===o?void 0:o.call(r),this.cancel()}))}processSwipe(t){var e,n,i,r;const o=t.clientX,s=t.clientY,a=o-this.startX,c=s-this.startY;Math.abs(a)>Math.abs(c)&&(a>0?null===(n=null===(e=this.options.listeners)||void 0===e?void 0:e.onSwipeRight)||void 0===n||n.call(e):null===(r=null===(i=this.options.listeners)||void 0===i?void 0:i.onSwipeLeft)||void 0===r||r.call(i))}findMatchingTouch(t){var e;for(const n of t.changedTouches)if(n.identifier===(null===(e=this.touch)||void 0===e?void 0:e.identifier))return n}cancel(){this.clearTimer(),this.gesture=i.a.None,this.touch=void 0,this.startX=void 0,this.startY=void 0}clearTimer(){this.startTimer&&clearTimeout(this.startTimer)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(3),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(t){this.options=t}createColumn(){return document.createElement("div")}appendElementToColumn(t,e,n){return parseFloat(e.style.width)>0?(t.appendChild(e),n+1):n}createElements(t){return r(this,void 0,void 0,(function*(){if(t.length>0){let e=this.createColumn(),n=t[0].words[0].x,r=t[0].words[0].width,o=0,s=0;for(const a of t)for(let t=0;t<a.words.length;t++){const c=a.words[t],l=i.a.roudNumber(c.x),u=i.a.roudNumber(c.y),h=i.a.roudNumber(c.width),d=i.a.roudNumber(c.height);if(u+d<o?(e.style.left=n+"px",e.style.width=r+"px",this.options.container.appendChild(e),e=this.createColumn(),n=l,r=h):l<n?n=l:l+h>r&&(r=c.x+c.width),o=u+d,c.pieces&&c.pieces.length>0){const t=yield this.options.htmlElementRenderer.renderPieces(c,this.options.childElementMouseGestureHandler,this.options.childElementTouchGestureHandler,s);for(const n of t)s=this.appendElementToColumn(e,n,s)}else{let t=yield this.options.htmlElementRenderer.renderText(c,this.options.childElementMouseGestureHandler,this.options.childElementTouchGestureHandler,!0,s);s=this.appendElementToColumn(e,t,s)}if(t<a.words.length-1){const n=a.words[t+1];if(n.y===c.y||n.x===c.x){const t=yield this.buildSpaceToken(c,n),i=yield this.options.htmlElementRenderer.renderText(t,this.options.childElementMouseGestureHandler,this.options.childElementTouchGestureHandler,!1,s);void 0!==t&&(s=this.appendElementToColumn(e,i,s))}}o=c.y}e.style.left=n+"px",e.style.width=r+"px",this.options.container.appendChild(e)}}))}buildSpaceToken(t,e){return r(this,void 0,void 0,(function*(){return"rtl"===this.options.textDirection?{x:e.x+e.width,width:t.x-e.x-e.width,y:t.y,height:t.height,linkPositionId:t.linkPositionId&&e.linkPositionId?t.linkPositionId:void 0,externalLink:t.externalLink&&e.externalLink?t.externalLink:void 0,endPositionId:e.endPositionId-1,startPositionId:e.startPositionId-1}:"ltr"===this.options.textDirection?{x:t.x+t.width,width:e.x-t.x-t.width,y:e.y,height:e.height,linkPositionId:t.linkPositionId&&e.linkPositionId?t.linkPositionId:void 0,externalLink:t.externalLink&&e.externalLink?t.externalLink:void 0,endPositionId:e.endPositionId-1,startPositionId:e.startPositionId-1}:void 0}))}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var i,r=n(1),o=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};!function(t){t.Highlight="highlight",t.Note="note",t.SearchResult="search"}(i||(i={}));class s{constructor(t){this.options=t}addAnnotation(t,e,n,s){return o(this,void 0,void 0,(function*(){const o=this.findElementsInRange(t,e);switch(n){case i.Highlight:yield this.addHighlight(t,e,o,s);break;case i.Note:yield this.addNote(t,e,o);break;case i.SearchResult:yield this.addSearchResult(t,e,o,s)}yield this.options.htmlElementRenderer.removeCSSClass(o,r.a.SELECTION_CSS_CLASS)}))}removeAnnotation(t,e,n,s){return o(this,void 0,void 0,(function*(){const o=this.findElementsInRange(t,e);switch(n){case i.Highlight:yield this.removeHighlight(t,e,o,s);break;case i.Note:yield this.removeNote(t,e,o);break;case i.SearchResult:yield this.removeSearchResult(t,e,o,s)}yield this.options.htmlElementRenderer.removeCSSClass(o,r.a.SELECTION_CSS_CLASS)}))}addHighlight(t,e,n,i){var s,a;return o(this,void 0,void 0,(function*(){const o=null!=i?i:r.a.HIGHLIGHT_CSS_CLASS;yield this.options.htmlElementRenderer.addCSSClass(n,o),yield null===(a=null===(s=this.options.annotationEventListeners)||void 0===s?void 0:s.onAddHighlight)||void 0===a?void 0:a.call(s,t,e,n)}))}removeHighlight(t,e,n,i){var s,a;return o(this,void 0,void 0,(function*(){const o=null!=i?i:r.a.HIGHLIGHT_CSS_CLASS;yield this.options.htmlElementRenderer.removeCSSClass(n,o),null===(a=null===(s=this.options.annotationEventListeners)||void 0===s?void 0:s.onRemoveHighlight)||void 0===a||a.call(s,t,e,n)}))}addNote(t,e,n){var i,r;return o(this,void 0,void 0,(function*(){yield null===(r=null===(i=this.options.annotationEventListeners)||void 0===i?void 0:i.onAddNote)||void 0===r?void 0:r.call(i,t,e,n)}))}removeNote(t,e,n){var i,r;return o(this,void 0,void 0,(function*(){yield null===(r=null===(i=this.options.annotationEventListeners)||void 0===i?void 0:i.onRemoveNote)||void 0===r?void 0:r.call(i,t,e,n)}))}addSearchResult(t,e,n,i){var s,a;return o(this,void 0,void 0,(function*(){const o=null!=i?i:r.a.SEARCH_RESULT_CSS_CLASS;yield this.options.htmlElementRenderer.addCSSClass(n,o),yield null===(a=null===(s=this.options.annotationEventListeners)||void 0===s?void 0:s.onAddSearchResult)||void 0===a?void 0:a.call(s,t,e,n)}))}removeSearchResult(t,e,n,i){var s,a;return o(this,void 0,void 0,(function*(){const o=null!=i?i:r.a.SEARCH_RESULT_CSS_CLASS;yield this.options.htmlElementRenderer.removeCSSClass(n,o),yield null===(a=null===(s=this.options.annotationEventListeners)||void 0===s?void 0:s.onRemoveSearchResult)||void 0===a?void 0:a.call(s,t,e,n)}))}findElementsInRange(t,e){const n=[];let i=t,o=e;t>e&&(i=e,o=t);for(const t of document.querySelectorAll("["+r.a.POSITION_ATTRIBUTE_NAME+"]")){const e=parseInt(t.getAttribute(r.a.POSITION_ATTRIBUTE_NAME));if(e>o)break;e>=i&&n.push(t)}return n}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(8),r=(n(56),n(5)),o=n(0),s=n(1),a=n(9),c=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class l{constructor(t,e){var n,i;this.options=t,this.currentView=new r.a,this.deferredBookProvider=new r.a,this.onNavigateBack=(...t)=>c(this,void 0,void 0,(function*(){for(const e of t)yield this.fillView(e,this.options.renderProvider.previousPage())})),this.onNavigateForward=(...t)=>c(this,void 0,void 0,(function*(){for(const e of t)yield this.fillView(e,this.options.renderProvider.nextPage())})),this.onInternalLinkClick=t=>c(this,void 0,void 0,(function*(){var e,n,i;null===(i=null===(n=null===(e=this.options.eventListeners)||void 0===e?void 0:e.navigation)||void 0===n?void 0:n.onInternalClick)||void 0===i||i.call(n),yield this.goToPosition(t)})),this.goToPosition=t=>c(this,void 0,void 0,(function*(){yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.GO_TO_POSITION,(()=>c(this,void 0,void 0,(function*(){yield this.fillView(this.options.navigationService.goTo(),this.options.renderProvider.goTo(this.options.asin,t,this.options.bookRenderOptions,o.NavigationType.Position))}))))})),e||(e=new o.ConsoleMetricsService),this.metricsUtil=new o.MetricsUtil(e),this.options.navigationService.addNavigationListener({onBack:this.onNavigateBack,onForward:this.onNavigateForward}),(null===(n=this.options.applyDefaultStyles)||void 0===n||n)&&(this.options.container.className+=" "+s.a.ROOT_ELEMENT_CLASS+" "+s.a.ROOT_THEME_CLASS[null!==(i=this.options.bookRenderOptions.theme)&&void 0!==i?i:"custom"]),this.options.userInteractionLayer.setNavigationEventCallbacks({onInternalLinkClick:this.onInternalLinkClick}),this.nextPageThrottler=a.a.throttler((()=>this.doNextPage()),500),this.previousPageThrottler=a.a.throttler((()=>this.doPreviousPage()),500)}hasPreviousPage(){return c(this,void 0,void 0,(function*(){const t=yield this.currentView.getValue();return!(yield t.isFirst())}))}previousPage(){return c(this,void 0,void 0,(function*(){return this.metricsUtil.syncExecuteMetrics(o.MetricsConstants.PREVIOUS_PAGE,(()=>{const t=this.previousPageThrottler();return t.invoked?t.result:Promise.reject(new i.a)}))}))}doPreviousPage(){return c(this,void 0,void 0,(function*(){yield this.options.userInteractionLayer.clearSelection(),yield this.options.navigationService.goToPrevious()}))}hasNextPage(){return c(this,void 0,void 0,(function*(){const t=yield this.currentView.getValue();return!(yield t.isLast())}))}nextPage(){return c(this,void 0,void 0,(function*(){return this.metricsUtil.syncExecuteMetrics(o.MetricsConstants.NEXT_PAGE,(()=>{const t=this.nextPageThrottler();return t.invoked?t.result:Promise.reject(new i.a)}))}))}doNextPage(){return c(this,void 0,void 0,(function*(){yield this.options.userInteractionLayer.clearSelection(),yield this.options.navigationService.goToNext()}))}fillView(t,e){return c(this,void 0,void 0,(function*(){yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.FILL_VIEW,(()=>c(this,void 0,void 0,(function*(){var n,i,o,s,a,c;if(t.isEmpty()){const s=new r.a;null===(o=null===(i=null===(n=this.options.eventListeners)||void 0===n?void 0:n.view)||void 0===i?void 0:i.onRendering)||void 0===o||o.call(i,s.getValue());try{yield t.fill(e),s.resolve()}catch(t){throw s.reject(t),t}}this.currentView.resolve(t);const l=(yield e).bookProvider;this.deferredBookProvider.resolve(l);const u=yield l.getPage();null===(c=null===(a=null===(s=this.options.eventListeners)||void 0===s?void 0:s.navigation)||void 0===a?void 0:a.onPageChange)||void 0===c||c.call(a,u.startPositionId,u.endPositionId)}))))}))}addAnnotation(t,e,n,i){return c(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.ADD_ANNOTATION,(()=>c(this,void 0,void 0,(function*(){return yield this.options.userInteractionLayer.addAnnotation(t,e,n,i)}))))}))}removeAnnotation(t,e,n,i){return c(this,void 0,void 0,(function*(){return this.metricsUtil.syncExecuteMetrics(o.MetricsConstants.REMOVE_ANNOTATION,(()=>this.options.userInteractionLayer.removeAnnotation(t,e,n,i)))}))}clearTextSelection(){return c(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.CLEAR_TEXT_SELECTION,(()=>c(this,void 0,void 0,(function*(){return yield this.options.userInteractionLayer.clearSelection()}))))}))}getTableOfContents(){return c(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.GET_TABLE_OF_CONTENTS,(()=>c(this,void 0,void 0,(function*(){return(yield this.getCurrentBookProvider()).getTableOfContent()}))))}))}getMetadata(){return c(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.GET_METADATA,(()=>c(this,void 0,void 0,(function*(){return(yield this.getCurrentBookProvider()).getMetadata()}))))}))}getManifest(){return c(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.GET_MANIFEST,(()=>c(this,void 0,void 0,(function*(){return(yield this.getCurrentBookProvider()).getManifest()}))))}))}getLocationMap(){return c(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.GET_LOCATION_MAP,(()=>c(this,void 0,void 0,(function*(){return(yield this.getCurrentBookProvider()).getLocationMap()}))))}))}getPagePositionRange(){return c(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.GET_PAGE_POSITION_RANGE,(()=>c(this,void 0,void 0,(function*(){const t=yield this.getCurrentBookProvider(),e=yield t.getPage();return{start:e.startPositionId,end:e.endPositionId}}))))}))}updateRenderOptions(t){return c(this,void 0,void 0,(function*(){yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.UPDATE_RENDER_OPTIONS,(()=>c(this,void 0,void 0,(function*(){var e,n;const i=null!==(e=this.options.bookRenderOptions.theme)&&void 0!==e?e:"custom",r=null!==(n=t.theme)&&void 0!==n?n:"custom";if(i!==r){const t=document.getElementsByClassName(s.a.ROOT_ELEMENT_CLASS).item(0);null==t||t.classList.remove(s.a.ROOT_THEME_CLASS[i]),null==t||t.classList.add(s.a.ROOT_THEME_CLASS[r])}this.options=Object.assign(Object.assign({},this.options),{bookRenderOptions:t}),this.options.renderProvider.onSurfaceDimensionChanges(t);const o=yield this.getCurrentBookProvider(),a=yield o.getPage();yield this.goToPosition(a.startPositionId)}))))}))}getCurrentBookProvider(){return c(this,void 0,void 0,(function*(){return yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.GET_CURRENT_BOOK_PROVIDER,(()=>c(this,void 0,void 0,(function*(){const t=yield this.currentView.getValue();return yield t.getBookProvider()}))))}))}goToPage(t){return c(this,void 0,void 0,(function*(){yield this.metricsUtil.asyncExecuteMetrics(o.MetricsConstants.GO_TO_PAGE,(()=>c(this,void 0,void 0,(function*(){yield this.fillView(this.options.navigationService.goTo(),this.options.renderProvider.goTo(this.options.asin,t,this.options.bookRenderOptions,o.NavigationType.Page))}))))}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(6);class r extends i.a{constructor(t){super(t),this.setupContainer()}setupContainer(){const t=this.options.container,e=this.options.bookRenderOptions,n=t.style;n.width=e.pageWidth+"px",n.height=e.pageHeight+"px",n.display="flex",n.scrollBehavior="smooth",n.flexDirection="column",n.overflowY="auto",t.addEventListener("scroll",(()=>{const{scrollHeight:e,scrollTop:n,clientHeight:i}=t;n+i>e-5&&(console.log("bottom"),this.goToNext())}))}setCurrent(t,e){this.currentView=t;const n=t.getRoot();if(!this.options.container.contains(n))switch(e){case"Absolute":case"NextPage":this.options.container.append(n);break;case"PreviousPage":this.options.container.prepend(n)}t.scrollIntoView(!0)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(18),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o extends i.a{constructor(t,e){super(e),this.bookRenderOptions=t,this.root.style.minHeight=`${this.bookRenderOptions.pageHeight}px`,this.root.style.minWidth=`${this.bookRenderOptions.pageWidth}px`}getContentArea(){return r(this,void 0,void 0,(function*(){const t=(yield this.deferredRender.getValue()).rect;return(t.bottom-t.top)*this.bookRenderOptions.pageWidth}))}getTrimBounds(){return this.deferredRender.getValue().then((t=>t.rect))}isFirst(){return this.deferredRender.getValue().then((t=>t.isFirst))}isLast(){return this.deferredRender.getValue().then((t=>t.isLast))}isEmpty(){return this.empty}getRoot(){return this.root}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(5),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(t){this.deferredRender=new i.a,this.empty=!0,this.onRenderFinish=null!=t?t:()=>{},this.root=document.createElement("div")}fill(t){return r(this,void 0,void 0,(function*(){const e=yield t;return this.root.replaceWith(e.content),this.root=e.content,this.empty=!1,this.onRenderFinish(e),this.deferredRender.resolve(e),e}))}scrollIntoView(t=!0){this.root.scrollIntoView({behavior:t?"smooth":"auto"})}isEmpty(){return this.empty}getRoot(){return this.root}getBookProvider(){return this.deferredRender.getValue().then((t=>t.bookProvider))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(6);class r extends i.a{constructor(t){super(t)}setCurrent(t,e){var n;null===(n=this.currentView)||void 0===n||n.getRoot().remove(),this.currentView=t;const i=t.getRoot();if(!this.options.container.contains(i))switch(e){case"Absolute":case"NextPage":this.options.container.append(i);break;case"PreviousPage":this.options.container.prepend(i)}t.scrollIntoView(!0)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(21),r=n(22),o=n(23),s=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class a extends o.a{constructor(t){super(t),this.options=t}reset(){this.clearCache()}onSurfaceDimensionChanges(t){this.clearCache(),this.options.pageImageRenderer.updateSurfaceOptions(t)}render(t,e){return s(this,void 0,void 0,(function*(){const n=yield this.options.pageImageRenderer.render(t),o=yield t.getPage(),s=new i.a({height:this.options.bookRenderOptions.pageHeight,width:this.options.bookRenderOptions.pageWidth,layers:[...this.options.layers,new r.a(n.image)]});return Object.assign(Object.assign({},n),{content:yield s.compose(t),bookProvider:t,isFirst:o.startPositionId<=1,isLast:e})}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class r{constructor(t){this.options=t}compose(t){return i(this,void 0,void 0,(function*(){const e=document.createElement("div"),n=this.options;e.style.position="relative";const i=new Array;for(const r of n.layers){const n=document.createElement("div");e.append(n);const o=r.render(n,t);i.push(o)}return Promise.all(i).then((()=>e))}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class r{constructor(t){this.image=t}render(t,e){return i(this,void 0,void 0,(function*(){return t.append(this.image),Promise.resolve(void 0)}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(0),r=n(5),o=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class s{constructor(t){this.options=t,this.cache=new Map,this.cacheIndex=0,this.navRef={startPositionId:1},this.pendingRenderDeferred=new r.a}goTo(t,e,n,s){return o(this,void 0,void 0,(function*(){this.clearCache(),this.asin=t,this.renderOptions=n,this.navRef={startPositionId:e};const s=this.createNavigationOptions(e,0,i.Direction.Forward,this.options.readAheadPageCount);return this.execAndNotifyListener((()=>o(this,void 0,void 0,(function*(){const e=yield this.options.bookProviderFactory.get(t,s,n);return this.pendingRenderDeferred=new r.a,this.currentIndexLoading=0,this.renderPages(0,e,i.Direction.Forward,s.pageCount)}))))}))}removeExpiredEntries(){const t=this.cacheIndex-2*this.options.readAheadPageCount,e=this.cacheIndex+2*this.options.readAheadPageCount;this.cache.forEach(((n,i)=>{(i<t||i>e)&&this.cache.delete(i)}))}renderPages(t,e,n,r){return o(this,void 0,void 0,(function*(){const s=new Array;for(let a=0;a<e.length;a++){const c=t+(n===i.Direction.Forward?a:-a),l=this.cache.get(c);if(l)s.push(l);else{const t=e[a],l=n===i.Direction.Forward&&a==e.length-1&&e.length<r;let u;if(0==a){const e=yield this.render(t,l);u=Promise.resolve(e)}else u=new Promise(((e,n)=>{setTimeout((()=>o(this,void 0,void 0,(function*(){try{const n=yield this.render(t,l);e(n)}catch(t){n(t)}}))),0)}));s.push(u),this.cache.set(c,u)}}return this.removeExpiredEntries(),Promise.all(s).then((t=>this.pendingRenderDeferred.resolve(t))),s[0]}))}nextPage(){return o(this,void 0,void 0,(function*(){this.cacheIndex++;const t=this.cache.get(this.cacheIndex);if(t){const e=Math.max(...this.cache.keys()),n=e+1;return this.shouldRequestNewBatch(e-this.cacheIndex)&&!this.isNewBatchAlreadyLoading(n)&&(this.pendingRenderDeferred=new r.a,this.currentIndexLoading=n,this.renderNextBatch(e)),t}return this.execAndNotifyListener((()=>o(this,void 0,void 0,(function*(){return yield this.pendingRenderDeferred.getPromise(),this.cache.get(this.cacheIndex)?this.cache.get(this.cacheIndex):yield this.renderNextBatch(this.cacheIndex-1)}))))}))}previousPage(){return o(this,void 0,void 0,(function*(){this.cacheIndex--;const t=this.cache.get(this.cacheIndex);if(t){const e=Math.min(...this.cache.keys()),n=e-1;return this.shouldRequestNewBatch(this.cacheIndex-e)&&!this.isNewBatchAlreadyLoading(n)&&(this.pendingRenderDeferred=new r.a,this.currentIndexLoading=n,this.renderPreviousBatch(e)),t}return this.execAndNotifyListener((()=>o(this,void 0,void 0,(function*(){return yield this.pendingRenderDeferred.getPromise(),this.cache.get(this.cacheIndex)?this.cache.get(this.cacheIndex):yield this.renderPreviousBatch(this.cacheIndex+1)}))))}))}renderNextBatch(t){return o(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{setTimeout((()=>o(this,void 0,void 0,(function*(){try{Object(i.assertIsDefined)(this.asin),Object(i.assertIsDefined)(this.renderOptions);const n=this.createNavigationWhenGoingForward(t),r=yield this.options.bookProviderFactory.get(this.asin,n,this.renderOptions),o=yield this.renderPages(t+1,r,i.Direction.Forward,n.pageCount);e(o)}catch(t){n(t)}}))),0)}))}))}renderPreviousBatch(t){return o(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{setTimeout((()=>o(this,void 0,void 0,(function*(){try{Object(i.assertIsDefined)(this.asin),Object(i.assertIsDefined)(this.renderOptions);const n=this.createNavigationWhenGoingBackwards(t);let r=yield this.options.bookProviderFactory.get(this.asin,n,this.renderOptions);r=r.reverse();const o=yield this.renderPages(t-1,r,i.Direction.Backward,n.pageCount);e(o)}catch(t){n(t)}}))),0)}))}))}createNavigationWhenGoingForward(t){const e=t+1;let n,r,o;return e>=0?(n=e,r=this.options.readAheadPageCount,o=i.Direction.Forward):e>-this.options.readAheadPageCount?(n=0,r=Math.abs(e),o=i.Direction.Backward):(n=Math.abs(e+this.options.readAheadPageCount),r=this.options.readAheadPageCount,o=i.Direction.Backward),this.createNavigationOptions(this.navRef.startPositionId,n,o,r)}createNavigationWhenGoingBackwards(t){if(t>0){const e=t-this.options.readAheadPageCount;return e>0?this.createNavigationOptions(this.navRef.startPositionId,e,i.Direction.Forward,this.options.readAheadPageCount):this.createNavigationOptions(this.navRef.startPositionId,0,i.Direction.Forward,t)}{const e=Math.abs(t);return this.createNavigationOptions(this.navRef.startPositionId,e,i.Direction.Backward,this.options.readAheadPageCount)}}createNavigationOptions(t,e,n,r){return{direction:n,pageCount:r,skipPageCount:e,startPositionId:t,type:i.NavigationType.Position}}execAndNotifyListener(t){var e,n,i;return o(this,void 0,void 0,(function*(){const o=new r.a;null===(i=null===(n=null===(e=this.options.eventListeners)||void 0===e?void 0:e.view)||void 0===n?void 0:n.onRenderingBlocking)||void 0===i||i.call(n,o.getValue());try{const e=yield t();return o.resolve(),e}catch(t){throw o.reject(t),t}}))}clearCache(){this.cacheIndex=0,this.cache.clear()}isNewBatchAlreadyLoading(t){return this.currentIndexLoading===t}shouldRequestNewBatch(t){return t<this.options.readAheadPageCount}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(1),r=n(10),o=n(11),s=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class a{constructor(t){this.options=t;const e={callbacks:{onDragStart:this.options.selectionHandler.initSelection,onDrag:this.options.selectionHandler.setSelectionEnd,onDragOnBlankSpace:this.options.selectionHandler.setSelectionEndInBlankSpace,onDragOnToken:this.options.selectionHandler.setSelectionEnd,onDragComplete:this.options.selectionHandler.finishSelection,onDoubleClick:this.options.selectionHandler.selectSingleElement,onTap:this.options.selectionHandler.clearSelection},listeners:this.options.gestureListeners};this.childElementMouseGestureHandler=new r.a(e),this.childElementTouchGestureHandler=new o.a(e);const n={callbacks:{onDragStart:this.options.selectionHandler.setSelectionStartInBlankSpace,onDrag:this.options.selectionHandler.setSelectionEndInBlankSpace,onDragOnBlankSpace:this.options.selectionHandler.setSelectionEndInBlankSpace,onDragOnToken:this.options.selectionHandler.setSelectionEnd,onDragComplete:this.options.selectionHandler.finishSelection,onTap:this.options.selectionHandler.clearSelection},listeners:this.options.gestureListeners};this.containerMouseGestureHandler=new r.a(n),this.containerTouchGestureHandler=new o.a(n)}render(t,e){var n,r;return s(this,void 0,void 0,(function*(){this.options.container=t,this.options.container.classList.add(i.a.INTERACTION_LAYER_CLASS);const o=yield e.getMetadata(),s=null!==(n=o.writingMode)&&void 0!==n?n:this.options.defaultWritingMode,a=null!==(r=o.direction)&&void 0!==r?r:this.options.defaultTextDirection;this.setBookDirection(s,a),this.options.container.addEventListener("contextmenu",this.containerMouseGestureHandler.consume),this.options.container.addEventListener("mousedown",this.containerMouseGestureHandler.onDown),this.options.container.addEventListener("mouseup",this.containerMouseGestureHandler.onUp),this.options.container.addEventListener("mousemove",this.containerMouseGestureHandler.onMove),this.options.container.addEventListener("touchstart",this.containerTouchGestureHandler.onDown,{passive:!0}),this.options.container.addEventListener("touchmove",this.containerTouchGestureHandler.onMove,{passive:!0}),this.options.container.addEventListener("touchend",this.containerTouchGestureHandler.onUp,{passive:!0});const c=(yield e.getTokens()).children;c.sort(((t,e)=>t.startPositionId-e.startPositionId));const l={htmlElementRenderer:this.options.htmlElementRenderer,childElementMouseGestureHandler:this.childElementMouseGestureHandler,childElementTouchGestureHandler:this.childElementTouchGestureHandler,textDirection:a,container:this.options.container},u=this.options.htmlBuilderFactory.build(s,l);yield u.createElements(c)}))}setNavigationEventCallbacks(t){this.options.htmlElementRenderer.setNavigationEventCallbacks(t)}clearSelection(){return s(this,void 0,void 0,(function*(){yield this.options.selectionHandler.clearSelection()}))}removeAnnotation(t,e,n,i){return s(this,void 0,void 0,(function*(){return this.options.annotationHandler.removeAnnotation(t,e,n,i)}))}addAnnotation(t,e,n,i){return s(this,void 0,void 0,(function*(){return this.options.annotationHandler.addAnnotation(t,e,n,i)}))}setBookDirection(t,e){this.writingMode=t,this.textDirection=e,this.options.selectionHandler.setBookDirection(t,e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(1),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(){}setDimensions(t,e,n,i,r){t.style.left=e+"px",t.style.width=n+"px",t.style.top=i+"px",t.style.height=r+"px"}renderPieces(t,e,n,o){return r(this,void 0,void 0,(function*(){if(void 0!==t.pieces&&t.pieces.length){let r=o;const s=new Array;for(const o of t.pieces){const a={x:o.left,y:o.top,width:o.right-o.left,height:o.bottom-o.top,startPositionId:t.startPositionId,endPositionId:t.endPositionId,linkPositionId:t.linkPositionId,externalLink:t.externalLink},c=yield this.renderText(a,e,n,!0,r);c.classList.add(i.a.WORD_PIECE_CSS_CLASS),s.push(c),r++}return s}return new Array}))}renderText(t,e,n,o,s){return r(this,void 0,void 0,(function*(){let r;return t.linkPositionId?(r=document.createElement("a"),yield this.addInternalLink(r,t.linkPositionId)):t.externalLink?(r=document.createElement("a"),yield this.addExternalLink(r,t.externalLink)):r=document.createElement("span"),o&&r.classList.add(i.a.WORD_CSS_CLASS),r.setAttribute(i.a.POSITION_ATTRIBUTE_NAME,t.startPositionId.toString()),r.setAttribute("data-index",s.toString()),yield this.addPointerEventListeners(r,e,n),this.setDimensions(r,t.x,t.width,t.y,t.height),r}))}addCSSClass(t,e){return r(this,void 0,void 0,(function*(){for(const n of t)n.classList.add(e)}))}removeCSSClass(t,e){return r(this,void 0,void 0,(function*(){for(const n of t)n.classList.remove(e)}))}addInternalLink(t,e){return r(this,void 0,void 0,(function*(){t.href="#",t.addEventListener("click",(()=>r(this,void 0,void 0,(function*(){var t,n;yield null===(n=(t=this.navigationEventCallbacks).onInternalLinkClick)||void 0===n?void 0:n.call(t,e)}))))}))}addExternalLink(t,e){return r(this,void 0,void 0,(function*(){t.href=e,t.target=i.a.EXTERNAL_LINK_TARGET_VALUE}))}addPointerEventListeners(t,e,n){return r(this,void 0,void 0,(function*(){t.addEventListener("mousedown",e.onDown),t.addEventListener("mousemove",e.onMove),t.addEventListener("mouseup",e.onUp),t.addEventListener("dblclick",e.onDoubleClick),t.addEventListener("touchstart",n.onDown),t.addEventListener("touchmove",n.onMove),t.addEventListener("touchend",n.onUp)}))}setNavigationEventCallbacks(t){this.navigationEventCallbacks=Object.assign(Object.assign({},this.navigationEventCallbacks),t)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(1),r=n(27),o=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class s{constructor(t){this.options=t,this.selectionRange={start:null,end:null},this.startPointer={x:0,y:0},this.mouseMoveStarted=!1,this.isEventOverSurface=!1,this.initSelection=(t,e)=>o(this,void 0,void 0,(function*(){yield this.clearSelection(),this.startPointer=e,this.selectionStrategy.setStartLine(e);const n=this.selectionStrategy.getElementFirstPiece(t);this.selectionRange.start=yield this.getSelectionBoundary(n),this.mouseMoveStarted=!1,this.isEventOverSurface=!0})),this.setSelectionEnd=(t,e)=>o(this,void 0,void 0,(function*(){var n,i;this.mouseMoveStarted||(this.mouseMoveStarted=!0,yield null===(i=null===(n=this.options.selectionEventListeners)||void 0===n?void 0:n.onSelectionStarted)||void 0===i?void 0:i.call(n)),null===this.selectionRange.start&&(this.selectionRange.start=yield this.getSelectionBoundary(t,null)),yield this.processSelection(t,e)})),this.setSelectionStartInBlankSpace=(t,e)=>o(this,void 0,void 0,(function*(){yield this.clearSelection(),this.startPointer=e,this.mouseMoveStarted=!1,this.isEventOverSurface=!0})),this.setSelectionEndInBlankSpace=(t,e)=>o(this,void 0,void 0,(function*(){var t,n;if(this.isEventOverSurface)if(this.mouseMoveStarted||(this.mouseMoveStarted=!0,yield null===(n=null===(t=this.options.selectionEventListeners)||void 0===t?void 0:t.onSelectionStarted)||void 0===n?void 0:n.call(t)),this.selectionStrategy.hasSelectedStart())if(this.selectionStrategy.discardEvent(e,this.startPointer))null!==this.selectionRange.start&&null!==this.selectionRange.end&&(yield this.resetSelection());else if(null===this.selectionRange.start){const t=this.selectionStrategy.getSelectionDirection(e),n=this.selectionStrategy.seachElementStart(e,t);this.selectionRange.start=yield this.getSelectionBoundary(n,t)}else{const t=this.selectionStrategy.getSelectionDirection(e);if(null!==this.selectionRange.start.direction&&t!=this.selectionRange.start.direction){const n=this.selectionStrategy.changeElementStart(this.startPointer,e,t);this.selectionRange.start=yield this.getSelectionBoundary(n,t)}const n=this.selectionStrategy.seachElementEnd(e,t);yield this.processSelection(n,e)}else this.selectionStrategy.setStartLine(this.startPointer)})),this.clearSelection=()=>o(this,void 0,void 0,(function*(){var t,e;yield this.resetSelection(),yield null===(e=null===(t=this.options.selectionEventListeners)||void 0===t?void 0:t.onClear)||void 0===e?void 0:e.call(t)})),this.selectSingleElement=t=>o(this,void 0,void 0,(function*(){var e,n;yield null===(n=null===(e=this.options.selectionEventListeners)||void 0===e?void 0:e.onSelectionStarted)||void 0===n?void 0:n.call(e);const i=this.selectionStrategy.getElementFirstPiece(t),r=this.selectionStrategy.getElementLastPiece(t),o=yield this.getSelectionBoundary(i),s=yield this.getSelectionBoundary(r);this.selectionRange={start:o,end:s},yield this.performSelection(t),yield this.finishSelection()})),this.finishSelection=()=>o(this,void 0,void 0,(function*(){var t,e;const n=yield this.getSelection();n.length>=1&&(yield null===(e=null===(t=this.options.selectionEventListeners)||void 0===t?void 0:t.onSelectionEnded)||void 0===e?void 0:e.call(t,parseInt(n[0].getAttribute(i.a.POSITION_ATTRIBUTE_NAME)),parseInt(n[n.length-1].getAttribute(i.a.POSITION_ATTRIBUTE_NAME)),n,1===n.length&&n[0].classList.contains(i.a.WORD_CSS_CLASS))),this.selectionStrategy.clearStartLine(),this.selectionRange.start=null,this.selectionRange.end=null,this.isEventOverSurface=!1})),this._nodes=void 0,this.resetSelection=()=>o(this,void 0,void 0,(function*(){yield this.clear(),this.selectionRange={start:null,end:null}}))}processSelection(t,e){var n;return o(this,void 0,void 0,(function*(){if(null!==t){const r=this.selectionStrategy.getSelectionDirectionFromElement(t);if(null===this.selectionRange.start){this.selectionStrategy.setStartLine(this.startPointer);const t=this.selectionStrategy.seachElementStart(e,r),n=this.selectionStrategy.getElementFirstPiece(t);this.selectionRange.start=yield this.getSelectionBoundary(n,r)}else if(null!==this.selectionRange.start.direction&&r!=this.selectionRange.start.direction){const t=this.selectionStrategy.changeElementStart(this.startPointer,e,r);this.selectionRange.start=yield this.getSelectionBoundary(t,r)}if(null!==this.selectionRange.start){let e=null;if(t.classList.contains(i.a.WORD_PIECE_CSS_CLASS)){let n=this.selectionStrategy.getElementFirstPiece(t);this.selectionRange.start.element===n&&(n=this.selectionStrategy.getElementLastPiece(t)),e=yield this.getSelectionBoundary(n)}else e=yield this.getSelectionBoundary(t);null!==e&&null!==e.element&&(null===(n=this.selectionRange.end)||void 0===n?void 0:n.elementIndex)!==e.elementIndex&&(this.selectionRange.end=e,yield this.performSelection(e.element))}}}))}setBookDirection(t,e){this.writingMode=t,this.selectionStrategy=new r.a(e)}getSelection(){var t,e,n,i;return o(this,void 0,void 0,(function*(){let r=[];if(null!==this.selectionRange.start&&null!==this.selectionRange.end){if(-1===this.selectionRange.start.pageIndex||-1===(null===(t=this.selectionRange.end)||void 0===t?void 0:t.pageIndex))return r;const o=this.sortSelectionRange(this.selectionRange),s=null===(e=o.start)||void 0===e?void 0:e.elementIndex,a=(null!==(i=null===(n=o.end)||void 0===n?void 0:n.elementIndex)&&void 0!==i?i:0)+1;r=this.getNodes().slice(s,a)}return r}))}getNodes(){if(void 0===this._nodes||this.disableNodeCache()){this._nodes=new Array;const t=document.getElementsByClassName(i.a.INTERACTION_LAYER_CLASS).item(0);if(null!==t)for(let e=0;e<t.children.length;e++){const n=t.children[e];for(let t=0;t<n.children.length;t++){const e=n.children.item(t);this._nodes.push(e)}}}return this._nodes}disableNodeCache(){if(void 0!==this._nodes){const t=document.getElementsByClassName(i.a.INTERACTION_LAYER_CLASS).item(0).children[0];if(null!==t){return t.children.item(0)!==this._nodes[0]}}return!0}performSelection(t){return o(this,void 0,void 0,(function*(){yield this.clear();const t=yield this.getSelection();yield this.options.htmlElementRenderer.addCSSClass(t,i.a.SELECTION_CSS_CLASS)}))}clear(){return o(this,void 0,void 0,(function*(){yield this.options.htmlElementRenderer.removeCSSClass(Array.from(document.querySelectorAll("."+i.a.SELECTION_CSS_CLASS)),i.a.SELECTION_CSS_CLASS)}))}getSelectionBoundary(t,e=null){var n,i;return o(this,void 0,void 0,(function*(){if(null!=t){let r=t.getAttribute("data-index");return{pageIndex:this.getElementIndex(null===(i=null===(n=null==t?void 0:t.parentElement)||void 0===n?void 0:n.parentElement)||void 0===i?void 0:i.parentElement),elementIndex:parseInt(null!=r?r:"-1"),element:t,direction:e}}return null}))}getElementIndex(t){let e=0;for(;t&&t.previousElementSibling;)t=t.previousElementSibling,e++;return e}sortSelectionRange(t){if(null!==t.start&&null!==t.end){const e={start:{pageIndex:t.start.pageIndex,elementIndex:t.start.elementIndex,element:t.start.element,direction:t.start.direction},end:{pageIndex:t.end.pageIndex,elementIndex:t.end.elementIndex,element:t.end.element,direction:t.end.direction}};if(e.start.pageIndex>e.end.pageIndex){let t=e.start.pageIndex;e.start.pageIndex=e.end.pageIndex,e.end.pageIndex=t,t=e.start.elementIndex,e.start.elementIndex=e.end.elementIndex,e.end.elementIndex=t;const n=e.start.element;e.start.element=e.end.element,e.end.element=n;const i=e.start.direction;e.start.direction=e.end.direction,e.end.direction=i}else if(e.start.pageIndex===e.end.pageIndex&&e.start.elementIndex>e.end.elementIndex){const t=e.start.elementIndex;e.start.elementIndex=e.end.elementIndex,e.end.elementIndex=t;const n=e.start.element;e.start.element=e.end.element,e.end.element=n;const i=e.start.direction;e.start.direction=e.end.direction,e.end.direction=i}return e}return t}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(2),r=n(7),o=n(28),s=n(29),a=n(30),c=n(3);class l{constructor(t){this.htmlHelper=new r.a,this.startLine=null,this.horitontalTbSearcher=new o.a(t),this.selectionRules="ltr"===t?new a.c:new s.c}seachElementStart(t,e){return null!==this.startLine?this.selectionRules.selectionStartRule.operate(this.startLine,t,e,!1):null}getElementLastPiece(t){return this.htmlHelper.getElementLastPiece(t)}getElementFirstPiece(t){return this.htmlHelper.getElementFirstPiece(t)}seachElementEnd(t,e){if(null!==this.startLine){const n=this.horitontalTbSearcher.getLine(t);if(null!==n){const i=n.first.parentNode!==this.startLine.first.parentNode;return this.selectionRules.selectionEndRule.operate(n,t,e,i)}}return null}changeElementStart(t,e,n){if(null!==this.startLine){const i=this.horitontalTbSearcher.getColumnFromPointerLocation(e),r=this.startLine.first.parentNode!==i;return this.selectionRules.selectionStartRule.operate(this.startLine,t,n,r)}return null}hasSelectedStart(){return null!==this.startLine}clearStartLine(){this.startLine=null}setStartLine(t){this.horitontalTbSearcher.areElementsInPage()&&(this.startLine=this.horitontalTbSearcher.getLine(t))}getSelectionDirectionFromElement(t){const e=this.htmlHelper.getDimensions(t);return this.getSelectionDirection({x:e.left+1,y:e.top+1})}getSelectionDirection(t){let e=i.a.None;if(null!==this.startLine){const n=this.startLine.dimensions;e=this.getDirectionFromColumns(t),e===i.a.None&&(e=t.y<n.top?i.a.Up:t.y>n.bottom?i.a.Down:t.y>=n.top&&t.y<=n.bottom?i.a.Horizontal:i.a.None)}return e}discardEvent(t,e){if(null!==this.startLine){const n=this.horitontalTbSearcher.getColumnFromPointerLocation(t)===this.startLine.first.parentNode;if((t.y>e.y?t.y-e.y:e.y-t.y)>(t.x>e.x?t.x-e.x:e.x-t.x))return n&&c.a.between(t.y,this.startLine.dimensions.top,this.startLine.dimensions.bottom)}return!1}getDirectionFromColumns(t){const e=this.startLine.first.parentElement,n=this.htmlHelper.getDimensions(e),r=this.horitontalTbSearcher.getColumnFromPointerLocation(t),o=this.htmlHelper.getDimensions(r);return n.right===o.right?i.a.None:n.right>o.right?i.a.Up:n.right<o.right?i.a.Down:i.a.None}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(7),r=n(1),o=n(3);class s{constructor(t){this.direction=t,this.htmlHelper=new i.a}areElementsInPage(){return null!==this.rootElement.children.item(0)}getLine(t){const e=this.getFirstElement(t),n=this.htmlHelper.getDimensions(e),i=this.getLastElement(e,t),r=this.htmlHelper.getDimensions(i);return{first:e,last:i,dimensions:{top:(n.top+r.top)/2,left:n.left<r.left?n.left:r.left,right:n.right>r.right?n.right:r.right,bottom:(n.bottom+r.bottom)/2}}}getColumnFromPointerLocation(t){return this.getColumn(this.rootElement,t)}get rootElement(){return document.getElementsByClassName(r.a.INTERACTION_LAYER_CLASS).item(0)}getFistAndLastNode(t){const e=this.getColumnFromPointerLocation(t);return[e.children.item(0),e.children.item(e.children.length-1)]}getColumn(t,e){let n=t.children.item(0),i=this.htmlHelper.getDimensions(n);if(e.x<i.left)return n;let r=1;for(;!this.between(i,e)&&r<t.children.length;)n=t.children.item(r),i=this.htmlHelper.getDimensions(n),r+=1;return n}between(t,e){return t.left<=e.x&&e.x<=t.right}getLastElement(t,e){let n=t,i=this.htmlHelper.getDimensions(n),r=n.nextSibling,s=this.htmlHelper.getDimensions(r);return null!=r&&o.a.roudNumber(s.left-i.right)+1>=0?this.getLastElement(r,e):n}getNextElement(t){if(null===t)return t;let e=t.nextSibling;for(;null!==e&&!e.classList.contains(r.a.WORD_CSS_CLASS);)e=e.nextSibling;return e}getOutOfBoundFirstNode(t){const e=this.getFistAndLastNode(t),n=e[0],i=e[1];if(this.htmlHelper.getDimensions(n).top>=t.y)return n;const r=this.htmlHelper.getDimensions(i);if(r.bottom<t.y){let t=i.previousElementSibling,e=this.htmlHelper.getDimensions(t);for(;null!==t&&r.top===e.top;)t=t.previousElementSibling,e=this.htmlHelper.getDimensions(t);return null!==t?t.nextElementSibling:i}return null}getFirstElement(t){const e=this.getOutOfBoundFirstNode(t);if(null!==e)return e;const n=this.getColumn(this.rootElement,t);let i=n.children.item(0),r=this.htmlHelper.getDimensions(i),o=1;for(;t.y>r.bottom&&o<n.children.length;)i=n.children.item(o),r=this.htmlHelper.getDimensions(i),o++;return i}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var i=n(2),r=n(3);class o{constructor(){this.selectionStartRule=new s,this.selectionEndRule=new a}}class s{operate(t,e,n,r){return n===i.a.Down?this.directionDown(t,e):n===i.a.Up?this.directionUp(t,e):this.directionHorizontal(t,e)}directionHorizontal(t,e){return e.x<t.dimensions.left?t.last:t.first}directionUp(t,e){return e.x>t.dimensions.right?t.first:t.last}directionDown(t,e){return e.x>t.dimensions.right?t.first:t.last.nextElementSibling}}class a{operate(t,e,n,o){return r.a.between(e.y,t.dimensions.top,t.dimensions.bottom)?n===i.a.Down?this.directionDown(t,e):n===i.a.Up?this.directionUp(t,e):this.directionHorizontal(t,e):null}directionHorizontal(t,e){return e.x>t.dimensions.right?t.first:t.last}directionUp(t,e){return e.x>t.dimensions.right?t.last.nextElementSibling:t.first}directionDown(t,e){return e.x>t.dimensions.right?t.first:t.last}}},function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var i=n(2),r=n(3);class o{constructor(){this.selectionStartRule=new s,this.selectionEndRule=new a}}class s{operate(t,e,n,r){return n===i.a.Down?this.directionDown(t,e,r):n===i.a.Up?this.directionUp(t,e,r):this.directionHorizontal(t,e)}directionHorizontal(t,e){return e.y<t.dimensions.top||e.y>t.dimensions.bottom?null:t.dimensions.left>=e.x?t.first:e.x>=t.dimensions.right?t.last:null}directionUp(t,e,n){var i;return n?e.x>t.dimensions.right?t.last:t.first.previousElementSibling:e.y>t.dimensions.bottom||e.x>t.dimensions.right?t.last:null!==(i=t.first.previousElementSibling)&&void 0!==i?i:t.first}directionDown(t,e,n){return null===t.first.previousElementSibling?t.first:n?t.last.nextSibling:e.x<t.dimensions.left?t.first:this.getNextSibling(t.last)}getNextSibling(t){var e,n;if(null!==t.nextSibling)return t.nextSibling;if(null!==(null===(e=t.parentNode)||void 0===e?void 0:e.nextSibling)){const e=null===(n=t.parentNode)||void 0===n?void 0:n.nextSibling;if(null!==e&&e.childNodes.length>0)return e.childNodes[0]}return null}}class a{operate(t,e,n,o){return r.a.between(e.y,t.dimensions.top,t.dimensions.bottom)?n===i.a.Down?this.directionDown(t,e,o):n===i.a.Up?this.directionUp(t,e):this.directionHorizontal(t,e):null}directionHorizontal(t,e){return t.dimensions.right<=e.x||e.y>=t.dimensions.bottom?t.last:null}directionUp(t,e){return null===t.first.previousElementSibling?t.first:e.x>t.dimensions.right?t.last.nextElementSibling:t.first}directionDown(t,e,n){return e.x<t.dimensions.left?t.first.previousElementSibling:t.last}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(12);class r{build(t,e){return new i.a(e)}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class r{constructor(t){this.encryptionIdProvider=t}decrypt(t){return i(this,void 0,void 0,(function*(){const e=new TextEncoder,n=this.encryptionIdProvider.getEncryptionId(),i=yield window.crypto.subtle.importKey("raw",e.encode(n),{name:"PBKDF2"},!1,["deriveBits","deriveKey"]),r=yield t.slice(0,t.byteLength-8-16),o=yield t.slice(t.byteLength-8,t.byteLength),s=yield t.slice(t.byteLength-8-16,t.byteLength-8),a=yield window.crypto.subtle.deriveKey({name:"PBKDF2",salt:o,iterations:1e4,hash:"SHA-256"},i,{name:"AES-CBC",length:128},!1,["decrypt"]);return yield window.crypto.subtle.decrypt({name:"AES-CBC",iv:s},a,r)}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n(0),r=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class o{constructor(t,e){this.images=new Map;const n=t.cdn.authParameter,i=t.cdn.baseUrl;this.metricsUtil=e,this.loader=this.addImageFromCDN(i,n,t)}requestImageFromCDN(t,e,n){return r(this,void 0,void 0,(function*(){const o=[e,t.url].join("/")+"?"+n,s=yield this.metricsUtil.asyncExecuteMetrics(i.MetricsConstants.REQUEST_IMAGE_FROM_CDN,(()=>r(this,void 0,void 0,(function*(){return fetch(o)})))),a=yield s.blob();this.images.set(t.url,a)}))}addImageFromCDN(t,e,n){return r(this,void 0,void 0,(function*(){const i=new Array,r=new Set;for(const o of n.cdnResources)o&&!r.has(o.url)&&(r.add(o.url),i.push(this.requestImageFromCDN(o,t,e)));return Promise.all(i)}))}getImage(t){return r(this,void 0,void 0,(function*(){return this.loader.then((()=>this.images.has(t)?this.images.get(t):void 0))}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(t,e){this.serviceDataLoader=e,this.pageIndex=t}getImage(t){return this.serviceDataLoader.getImage(t)}getMetadata(){return this.serviceDataLoader.getMetadata()}getManifest(){return this.serviceDataLoader.getManifest()}getPage(){return this.serviceDataLoader.getPage(this.pageIndex)}getTableOfContent(){return this.serviceDataLoader.getTableOfContent()}getTokens(){return this.serviceDataLoader.getTokens(this.pageIndex)}getFonts(){return this.serviceDataLoader.getFonts()}getLocationMap(){return this.serviceDataLoader.getLocationMap()}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n(0),r=n(36),o=n(34),s=n(33),a=n(1),c=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class l{constructor(t,e,n){this.options=t,this.fetch=e,this.metricsUtil=n}load(){var t;return c(this,void 0,void 0,(function*(){const e=this.options,n=e.settings,c={formatVersion:a.a.FORMAT_VERSION_V3,asin:e.asin,contentType:e.contentType,revision:"",fontFamily:n.fontFamily,fontSize:String(n.fontSize),lineHeight:String(n.lineHeight),dpi:String(n.dpi),height:String(n.pageHeight),width:String(n.pageWidth),marginBottom:String(n.marginBottom),marginLeft:String(n.marginLeft),marginRight:String(n.marginRight),marginTop:String(n.marginTop),maxNumberColumns:n.maxNumberColumns?String(n.maxNumberColumns):a.a.DEFAULT_MAX_COLUMN,encryptionId:e.encryptionIdProvider.getEncryptionId(),theme:String(null!==(t=n.theme)&&void 0!==t?t:"custom").toLowerCase(),locationMap:String(n.includeLocationMap)};if(e.navigation.type===i.NavigationType.Position){const t=e.navigation,n=t.direction==i.Direction.Forward?String(t.pageCount):String(-1*t.pageCount);c.numPage=n,c.skipPageCount=String(t.skipPageCount),c.startingPosition=String(t.startPositionId)}else{const t=e.navigation;c.startingPage=String(t.pageIndex)}const l=yield this.fetch(c),u=yield l.arrayBuffer(),h=yield e.responseCipher.decrypt(u);this.zipDataLoader=new r.a(h);const d=yield this.zipDataLoader.getManifest();d.cdn&&(this.cdnDataLoader=new s.a(d,this.metricsUtil));const f=yield this.zipDataLoader.getPageCount(),p=new Array;for(let t=0;t<f;t++){const e=new o.a(t,this);p.push(e)}return p}))}getZipDataLoader(){return c(this,void 0,void 0,(function*(){return this.zipDataLoader||(yield this.load()),this.zipDataLoader}))}getImageFromZip(t){return c(this,void 0,void 0,(function*(){return(yield this.getZipDataLoader()).getImage(t)}))}getImageFromCdn(t){var e;return c(this,void 0,void 0,(function*(){return null===(e=this.cdnDataLoader)||void 0===e?void 0:e.getImage(t)}))}getImage(t){var e;return c(this,void 0,void 0,(function*(){const n=null!==(e=yield this.getImageFromZip(t))&&void 0!==e?e:yield this.getImageFromCdn(t);return Object(i.assertIsDefined)(n),n}))}getPage(t){return c(this,void 0,void 0,(function*(){return(yield this.getZipDataLoader()).getPage(t)}))}getLocationMap(){return c(this,void 0,void 0,(function*(){return(yield this.getZipDataLoader()).getLocationMap()}))}getTableOfContent(){return c(this,void 0,void 0,(function*(){return(yield this.getZipDataLoader()).getTableOfContent()}))}getTokens(t){return c(this,void 0,void 0,(function*(){return(yield this.getZipDataLoader()).getTokens(t)}))}getMetadata(){return c(this,void 0,void 0,(function*(){return(yield this.getZipDataLoader()).getMetadata()}))}getManifest(){return c(this,void 0,void 0,(function*(){return(yield this.getZipDataLoader()).getManifest()}))}getFonts(){return c(this,void 0,void 0,(function*(){return(yield this.getZipDataLoader()).getFonts()}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(0),r=n(54),o=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class s{constructor(t){this.pages=new Map,this.images=new Map,this.tokens=new Map,this.loadingPromise=r.loadAsync(t).then((t=>{const e=new Array;return t.forEach(((t,n)=>{t.startsWith("img_")?e.push(this.addImage(t,n)):t.startsWith("page_")?e.push(this.addPage(n)):t.startsWith("tokens_")?e.push(this.addTokens(n)):"glyphs.json"===t?e.push(this.addGlyphs(n)):"toc.json"===t?e.push(this.addTableOfContent(n)):"metadata.json"===t?e.push(this.addMetadata(n)):"manifest.json"===t?e.push(this.addManifest(n)):"location_map.json"===t&&e.push(this.addLocationMap(n))})),Promise.all(e)}))}addLocationMap(t){return o(this,void 0,void 0,(function*(){return t.async("text").then((t=>{this.locationMap=JSON.parse(t)}))}))}getLocationMap(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>this.locationMap))}))}getPageCount(){return o(this,void 0,void 0,(function*(){return yield this.loadingPromise,this.pages.size}))}getImage(t){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>{if(this.images.has(t)){return this.images.get(t)}}))}))}getPage(t){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>{const e=this.pages.get(t);return Object(i.assertIsDefined)(e),e}))}))}getTableOfContent(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>(Object(i.assertIsDefined)(this.tableOfContent),this.tableOfContent)))}))}getTokens(t){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>{const e=this.tokens.get(t);return Object(i.assertIsDefined)(e),e}))}))}getMetadata(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>(Object(i.assertIsDefined)(this.metadata),this.metadata)))}))}getManifest(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>(Object(i.assertIsDefined)(this.manifest),this.manifest)))}))}getFonts(){return o(this,void 0,void 0,(function*(){return this.loadingPromise.then((()=>(Object(i.assertIsDefined)(this.fonts),this.fonts)))}))}addManifest(t){return o(this,void 0,void 0,(function*(){return t.async("text").then((t=>{this.manifest=JSON.parse(t)}))}))}addImage(t,e){return o(this,void 0,void 0,(function*(){return e.async("blob").then((e=>{this.images.set(t,e)}))}))}addPage(t){return o(this,void 0,void 0,(function*(){return t.async("text").then((t=>{JSON.parse(t).forEach((t=>{this.pages.set(t.pageIndex,t)}))}))}))}addTokens(t){return o(this,void 0,void 0,(function*(){return t.async("text").then((t=>{JSON.parse(t).forEach((t=>{this.tokens.set(t.pageIndex,t)}))}))}))}addGlyphs(t){return o(this,void 0,void 0,(function*(){return t.async("text").then((t=>{this.fonts=JSON.parse(t)}))}))}addTableOfContent(t){return o(this,void 0,void 0,(function*(){return t.async("text").then((t=>{this.tableOfContent=JSON.parse(t)}))}))}addMetadata(t){return o(this,void 0,void 0,(function*(){return t.async("text").then((t=>{this.metadata=JSON.parse(t)}))}))}}},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n(15),r=n(0),o=n(16),s=n(19),a=n(20),c=n(24),l=n(25),u=n(26),h=n(14),d=n(31);class f{static build(t){var e,n,o,s,f,p,g,v,m,y;const b=r.DefaultCanvasService.fromDocument(),w=Object.assign(Object.assign(Object.assign({},t),t.bookRenderOptions),{pixelRatio:b.pixelRatio}),_=r.PageRendererFactory.build(w,t.metricsService),x=Object.assign(Object.assign(Object.assign({},t),t.bookRenderOptions),{scale:null!==(e=t.scale)&&void 0!==e?e:1,pageRenderer:_,canvasService:b,enableWebWorker:!1}),S=new r.PageImageRenderer(x),k=null!==(n=t.bookProviderFactory)&&void 0!==n?n:new r.DevBookProviderFactory,E=new l.a,R=new u.a({htmlElementRenderer:E,selectionEventListeners:null===(o=t.eventListeners)||void 0===o?void 0:o.selection}),C=new h.a({htmlElementRenderer:E,annotationEventListeners:null===(s=t.eventListeners)||void 0===s?void 0:s.annotation}),P=new d.a,T=new c.a({container:t.container,htmlElementRenderer:E,selectionHandler:R,annotationHandler:C,gestureListeners:null!==(p=null===(f=t.eventListeners)||void 0===f?void 0:f.gestures)&&void 0!==p?p:void 0,htmlBuilderFactory:P,defaultTextDirection:null!==(g=t.defaultTextDirection)&&void 0!==g?g:"rtl",defaultWritingMode:null!==(v=t.defaultWritingMode)&&void 0!==v?v:"horizontal_tb"}),I=[...null!==(m=t.layers)&&void 0!==m?m:[],T],A=new a.a({readAheadPageCount:6,bookProviderFactory:k,bookRenderOptions:t.bookRenderOptions,layers:I,pageImageRenderer:S,eventListeners:t.eventListeners}),D=this.buildNavigationService(t,A),L=Object.assign(Object.assign({},t),{scale:null!==(y=t.scale)&&void 0!==y?y:1,renderProvider:A,navigationService:D,userInteractionLayer:T,eventListeners:t.eventListeners});return new i.a(L,t.metricsService)}static buildNavigationService(t,e){const n=Object.assign(Object.assign({},t),{renderProvider:e,cachedPagesCount:6});switch(t.navigationMode){case 0:return new s.a(n);case 1:return new o.a(n)}}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n(0),r=n(35),o=n(32),s=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class a{constructor(t,e,n,r){this.contentType=t,this.encryptionIdProvider=e,this.serviceFetch=n,this.responseCipher=new o.a(this.encryptionIdProvider),r||(r=new i.ConsoleMetricsService),this.metricsUtil=new i.MetricsUtil(r)}get(t,e,n){return s(this,void 0,void 0,(function*(){const i={asin:t,contentType:this.contentType,settings:n,navigation:e,encryptionIdProvider:this.encryptionIdProvider,responseCipher:this.responseCipher},o=new r.a(i,this.serviceFetch,this.metricsUtil);return yield o.load()}))}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{c(i.next(t))}catch(t){o(t)}}function a(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((i=i.apply(t,e||[])).next())}))};class r{constructor(t){this.options=t}createElements(t){return i(this,void 0,void 0,(function*(){if(t.length>0){let e=0;for(const n of t)for(let t=0;t<n.words.length;t++){const i=n.words[t];let r=yield this.options.htmlElementRenderer.renderText(i,this.options.childElementMouseGestureHandler,this.options.childElementTouchGestureHandler,!0,e);if(e++,this.options.container.appendChild(r),t<n.words.length-1){const o=n.words[t+1];if(o.y===i.y||o.x===i.x){const t=yield this.buildSpaceToken(i,o);r=yield this.options.htmlElementRenderer.renderText(t,this.options.childElementMouseGestureHandler,this.options.childElementTouchGestureHandler,!1,e),e++,this.options.container.appendChild(r)}}}}}))}buildSpaceToken(t,e){return i(this,void 0,void 0,(function*(){return{x:e.x,width:e.width,y:t.y+t.height,height:e.y-t.y-t.height,linkPositionId:t.linkPositionId&&e.linkPositionId?t.linkPositionId:void 0,externalLink:t.externalLink&&e.externalLink?t.externalLink:void 0,endPositionId:e.endPositionId-1,startPositionId:e.startPositionId-1}}))}}},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));class i{constructor(t){this.el=t}save(){this.position=this.el.scrollHeight-this.el.scrollTop}restore(){if(void 0===this.position)throw new Error("Cannot restore without a previous call to save()");const t=this.el.scrollHeight-this.el.scrollTop;this.el.scrollBy({top:t-this.position})}}},function(t,e){},function(t,e){},function(t,e,n){"use strict";function i(t,e){return t/e*72}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function i(t,e){return`${t}?${new URLSearchParams(e).toString()}`}n.d(e,"a",(function(){return i}))},function(t,e,n){(function(e,n,i){t.exports=function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[s]={exports:{}};e[s][0].call(l.exports,(function(t){return r(e[s][1][t]||t)}),l,l.exports,t,e,n,i)}return n[s].exports}for(var o=!1,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t,e,n){"use strict";var i=t("./utils"),r=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(t){for(var e,n,r,s,a,c,l,u=[],h=0,d=t.length,f=d,p="string"!==i.getTypeOf(t);h<t.length;)f=d-h,r=p?(e=t[h++],n=h<d?t[h++]:0,h<d?t[h++]:0):(e=t.charCodeAt(h++),n=h<d?t.charCodeAt(h++):0,h<d?t.charCodeAt(h++):0),s=e>>2,a=(3&e)<<4|n>>4,c=1<f?(15&n)<<2|r>>6:64,l=2<f?63&r:64,u.push(o.charAt(s)+o.charAt(a)+o.charAt(c)+o.charAt(l));return u.join("")},n.decode=function(t){var e,n,i,s,a,c,l=0,u=0,h="data:";if(t.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,f=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===o.charAt(64)&&f--,t.charAt(t.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=r.uint8array?new Uint8Array(0|f):new Array(0|f);l<t.length;)e=o.indexOf(t.charAt(l++))<<2|(s=o.indexOf(t.charAt(l++)))>>4,n=(15&s)<<4|(a=o.indexOf(t.charAt(l++)))>>2,i=(3&a)<<6|(c=o.indexOf(t.charAt(l++))),d[u++]=e,64!==a&&(d[u++]=n),64!==c&&(d[u++]=i);return d}},{"./support":30,"./utils":32}],2:[function(t,e,n){"use strict";var i=t("./external"),r=t("./stream/DataWorker"),o=t("./stream/DataLengthProbe"),s=t("./stream/Crc32Probe");function a(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r}o=t("./stream/DataLengthProbe"),a.prototype={getContentWorker:function(){var t=new r(i.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},getCompressedWorker:function(){return new r(i.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(t,e,n){return t.pipe(new s).pipe(new o("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",e)},e.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,e,n){"use strict";var i=t("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(t){return new i("STORE compression")},uncompressWorker:function(){return new i("STORE decompression")}},n.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,e,n){"use strict";var i=t("./utils"),r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e){return void 0!==t&&t.length?"string"!==i.getTypeOf(t)?function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}(0|e,t,t.length,0):function(t,e,n,i){var o=r,s=i+n;t^=-1;for(var a=i;a<s;a++)t=t>>>8^o[255&(t^e.charCodeAt(a))];return-1^t}(0|e,t,t.length,0):0}},{"./utils":32}],5:[function(t,e,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(t,e,n){"use strict";var i=null;i="undefined"!=typeof Promise?Promise:t("lie"),e.exports={Promise:i}},{lie:37}],7:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=t("pako"),o=t("./utils"),s=t("./stream/GenericWorker"),a=i?"uint8array":"array";function c(t,e){s.call(this,"FlateWorker/"+t),this._pako=null,this._pakoAction=t,this._pakoOptions=e,this.meta={}}n.magic="\b\0",o.inherits(c,s),c.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(a,t.data),!1)},c.prototype.flush=function(){s.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var t=this;this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},n.compressWorker=function(t){return new c("Deflate",t)},n.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,e,n){"use strict";function i(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i}function r(t,e,n,r,s,u){var h,d,f=t.file,p=t.compression,g=u!==a.utf8encode,v=o.transformTo("string",u(f.name)),m=o.transformTo("string",a.utf8encode(f.name)),y=f.comment,b=o.transformTo("string",u(y)),w=o.transformTo("string",a.utf8encode(y)),_=m.length!==f.name.length,x=w.length!==y.length,S="",k="",E="",R=f.dir,C=f.date,P={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(P.crc32=t.crc32,P.compressedSize=t.compressedSize,P.uncompressedSize=t.uncompressedSize);var T=0;e&&(T|=8),g||!_&&!x||(T|=2048);var I=0,A=0;R&&(I|=16),"UNIX"===s?(A=798,I|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(f.unixPermissions,R)):(A=20,I|=function(t){return 63&(t||0)}(f.dosPermissions)),h=C.getUTCHours(),h<<=6,h|=C.getUTCMinutes(),h<<=5,h|=C.getUTCSeconds()/2,d=C.getUTCFullYear()-1980,d<<=4,d|=C.getUTCMonth()+1,d<<=5,d|=C.getUTCDate(),_&&(k=i(1,1)+i(c(v),4)+m,S+="up"+i(k.length,2)+k),x&&(E=i(1,1)+i(c(b),4)+w,S+="uc"+i(E.length,2)+E);var D="";return D+="\n\0",D+=i(T,2),D+=p.magic,D+=i(h,2),D+=i(d,2),D+=i(P.crc32,4),D+=i(P.compressedSize,4),D+=i(P.uncompressedSize,4),D+=i(v.length,2),D+=i(S.length,2),{fileRecord:l.LOCAL_FILE_HEADER+D+v+S,dirRecord:l.CENTRAL_FILE_HEADER+i(A,2)+D+i(b.length,2)+"\0\0\0\0"+i(I,4)+i(r,4)+v+S+b}}var o=t("../utils"),s=t("../stream/GenericWorker"),a=t("../utf8"),c=t("../crc32"),l=t("../signature");function u(t,e,n,i){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=n,this.encodeFileName=i,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(u,s),u.prototype.push=function(t){var e=t.meta.percent||0,n=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:n?(e+100*(n-i-1))/n:100}}))},u.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=r(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=r(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:function(t){return l.DATA_DESCRIPTOR+i(t.crc32,4)+i(t.compressedSize,4)+i(t.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,r=function(t,e,n,r,s){var a=o.transformTo("string",s(r));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+i(t,2)+i(t,2)+i(e,4)+i(n,4)+i(a.length,2)+a}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},u.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var n=0;n<e.length;n++)try{e[n].error(t)}catch(t){}return!0},u.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},e.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,e,n){"use strict";var i=t("../compressions"),r=t("./ZipFileWorker");n.generateWorker=function(t,e,n){var o=new r(e.streamFiles,n,e.platform,e.encodeFileName),s=0;try{t.forEach((function(t,n){s++;var r=function(t,e){var n=t||e,r=i[n];if(!r)throw new Error(n+" is not a valid compression method !");return r}(n.options.compression,e.compression),a=n.options.compressionOptions||e.compressionOptions||{},c=n.dir,l=n.date;n._compressWorker(r,a).withStreamInfo("file",{name:t,dir:c,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(o)})),o.entriesCount=s}catch(t){o.error(t)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,e,n){"use strict";function i(){if(!(this instanceof i))return new i;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files={},this.comment=null,this.root="",this.clone=function(){var t=new i;for(var e in this)"function"!=typeof this[e]&&(t[e]=this[e]);return t}}(i.prototype=t("./object")).loadAsync=t("./load"),i.support=t("./support"),i.defaults=t("./defaults"),i.version="3.5.0",i.loadAsync=function(t,e){return(new i).loadAsync(t,e)},i.external=t("./external"),e.exports=i},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,e,n){"use strict";var i=t("./utils"),r=t("./external"),o=t("./utf8"),s=(i=t("./utils"),t("./zipEntries")),a=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function l(t){return new r.Promise((function(e,n){var i=t.decompressed.getContentWorker().pipe(new a);i.on("error",(function(t){n(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}e.exports=function(t,e){var n=this;return e=i.extend(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(t)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):i.prepareContent("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new s(e);return n.load(t),n})).then((function(t){var n=[r.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var o=0;o<i.length;o++)n.push(l(i[o]));return r.Promise.all(n)})).then((function(t){for(var i=t.shift(),r=i.files,o=0;o<r.length;o++){var s=r[o];n.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders})}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,e,n){"use strict";var i=t("../utils"),r=t("../stream/GenericWorker");function o(t,e){r.call(this,"Nodejs stream input adapter for "+t),this._upstreamEnded=!1,this._bindStream(e)}i.inherits(o,r),o.prototype._bindStream=function(t){var e=this;(this._stream=t).pause(),t.on("data",(function(t){e.push({data:t,meta:{percent:0}})})).on("error",(function(t){e.isPaused?this.generatedError=t:e.error(t)})).on("end",(function(){e.isPaused?e._upstreamEnded=!0:e.end()}))},o.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},e.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,e,n){"use strict";var i=t("readable-stream").Readable;function r(t,e,n){i.call(this,e),this._helper=t;var r=this;t.on("data",(function(t,e){r.push(t)||r._helper.pause(),n&&n(e)})).on("error",(function(t){r.emit("error",t)})).on("end",(function(){r.push(null)}))}t("../utils").inherits(r,i),r.prototype._read=function(){this._helper.resume()},e.exports=r},{"../utils":32,"readable-stream":16}],14:[function(t,n,i){"use strict";n.exports={isNode:void 0!==e,newBufferFrom:function(t,n){if(e.from&&e.from!==Uint8Array.from)return e.from(t,n);if("number"==typeof t)throw new Error('The "data" argument must not be a number');return new e(t,n)},allocBuffer:function(t){if(e.alloc)return e.alloc(t);var n=new e(t);return n.fill(0),n},isBuffer:function(t){return e.isBuffer(t)},isStream:function(t){return t&&"function"==typeof t.on&&"function"==typeof t.pause&&"function"==typeof t.resume}}},{}],15:[function(t,e,n){"use strict";function i(t,e,n){var i,r=o.getTypeOf(e),a=o.extend(n||{},c);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(t=g(t)),a.createFolders&&(i=p(t))&&v.call(this,i,!0);var h="string"===r&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!h),(e instanceof l&&0===e.uncompressedSize||a.dir||!e||0===e.length)&&(a.base64=!1,a.binary=!0,e="",a.compression="STORE",r="string");var m=null;m=e instanceof l||e instanceof s?e:d.isNode&&d.isStream(e)?new f(t,e):o.prepareContent(t,e,a.binary,a.optimizedBinaryString,a.base64);var y=new u(t,m,a);this.files[t]=y}var r=t("./utf8"),o=t("./utils"),s=t("./stream/GenericWorker"),a=t("./stream/StreamHelper"),c=t("./defaults"),l=t("./compressedObject"),u=t("./zipObject"),h=t("./generate"),d=t("./nodejsUtils"),f=t("./nodejs/NodejsStreamInputAdapter"),p=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return 0<e?t.substring(0,e):""},g=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},v=function(t,e){return e=void 0!==e?e:c.createFolders,t=g(t),this.files[t]||i.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function m(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(t){var e,n,i;for(e in this.files)this.files.hasOwnProperty(e)&&(i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i))},filter:function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(i)})),e},file:function(t,e,n){if(1!==arguments.length)return t=this.root+t,i.call(this,t,e,n),this;if(m(t)){var r=t;return this.filter((function(t,e){return!e.dir&&r.test(t)}))}var o=this.files[this.root+t];return o&&!o.dir?o:null},folder:function(t){if(!t)return this;if(m(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=v.call(this,e),i=this.clone();return i.root=n.name,i},remove:function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},generate:function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(t){var e,n={};try{if((n=o.extend(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");o.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";e=h.generateWorker(this,n,i)}catch(t){(e=new s("error")).error(t)}return new a(e,n.type||"string",n.mimeType)},generateAsync:function(t,e){return this.generateInternalStream(t).accumulate(e)},generateNodeStream:function(t,e){return(t=t||{}).type||(t.type="nodebuffer"),this.generateInternalStream(t).toNodejsStream(e)}};e.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,e,n){e.exports=t("stream")},{stream:void 0}],17:[function(t,e,n){"use strict";var i=t("./DataReader");function r(t){i.call(this,t);for(var e=0;e<this.data.length;e++)t[e]=255&t[e]}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data[this.zero+t]},r.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},r.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],18:[function(t,e,n){"use strict";var i=t("../utils");function r(t){this.data=t,this.length=t.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(t){this.checkIndex(this.index+t)},checkIndex:function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},setIndex:function(t){this.checkIndex(t),this.index=t},skip:function(t){this.setIndex(this.index+t)},byteAt:function(t){},readInt:function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},readString:function(t){return i.transformTo("string",this.readData(t))},readData:function(t){},lastIndexOfSignature:function(t){},readAndCheckSignature:function(t){},readDate:function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))}},e.exports=r},{"../utils":32}],19:[function(t,e,n){"use strict";var i=t("./Uint8ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,e,n){"use strict";var i=t("./DataReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},r.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},r.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},r.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./DataReader":18}],21:[function(t,e,n){"use strict";var i=t("./ArrayReader");function r(t){i.call(this,t)}t("../utils").inherits(r,i),r.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(t,e,n){"use strict";var i=t("../utils"),r=t("../support"),o=t("./ArrayReader"),s=t("./StringReader"),a=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");e.exports=function(t){var e=i.getTypeOf(t);return i.checkSupport(e),"string"!==e||r.uint8array?"nodebuffer"===e?new a(t):r.uint8array?new c(i.transformTo("uint8array",t)):new o(i.transformTo("array",t)):new s(t)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,e,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(t,e,n){"use strict";var i=t("./GenericWorker"),r=t("../utils");function o(t){i.call(this,"ConvertWorker to "+t),this.destType=t}r.inherits(o,i),o.prototype.processChunk=function(t){this.push({data:r.transformTo(this.destType,t.data),meta:t.meta})},e.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,e,n){"use strict";var i=t("./GenericWorker"),r=t("../crc32");function o(){i.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}t("../utils").inherits(o,i),o.prototype.processChunk=function(t){this.streamInfo.crc32=r(t.data,this.streamInfo.crc32||0),this.push(t)},e.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,e,n){"use strict";var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataLengthProbe for "+t),this.propName=t,this.withStreamInfo(t,0)}i.inherits(o,r),o.prototype.processChunk=function(t){if(t){var e=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=e+t.data.length}r.prototype.processChunk.call(this,t)},e.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,e,n){"use strict";var i=t("../utils"),r=t("./GenericWorker");function o(t){r.call(this,"DataWorker");var e=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,t.then((function(t){e.dataIsReady=!0,e.data=t,e.max=t&&t.length||0,e.type=i.getTypeOf(t),e.isPaused||e._tickAndRepeat()}),(function(t){e.error(t)}))}i.inherits(o,r),o.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,i.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(i.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":case"nodebuffer":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(t,e,n){"use strict";function i(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}i.prototype={push:function(t){this.emit("data",t)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},error:function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},on:function(t,e){return this._listeners[t].push(e),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},pipe:function(t){return t.registerPrevious(this)},registerPrevious:function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var t=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},flush:function(){},processChunk:function(t){this.push(t)},withStreamInfo:function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t}},e.exports=i},{}],29:[function(t,n,i){"use strict";var r=t("../utils"),o=t("./ConvertWorker"),s=t("./GenericWorker"),a=t("../base64"),c=t("../support"),l=t("../external"),u=null;if(c.nodestream)try{u=t("../nodejs/NodejsStreamOutputAdapter")}catch(t){}function h(t,n){return new l.Promise((function(i,o){var s=[],c=t._internalType,l=t._outputType,u=t._mimeType;t.on("data",(function(t,e){s.push(t),n&&n(e)})).on("error",(function(t){s=[],o(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return r.newBlob(r.transformTo("arraybuffer",e),n);case"base64":return a.encode(e);default:return r.transformTo(t,e)}}(l,function(t,n){var i,r=0,o=null,s=0;for(i=0;i<n.length;i++)s+=n[i].length;switch(t){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(o=new Uint8Array(s),i=0;i<n.length;i++)o.set(n[i],r),r+=n[i].length;return o;case"nodebuffer":return e.concat(n);default:throw new Error("concat : unsupported type '"+t+"'")}}(c,s),u);i(t)}catch(t){o(t)}s=[]})).resume()}))}function d(t,e,n){var i=e;switch(e){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=e,this._mimeType=n,r.checkSupport(i),this._worker=t.pipe(new o(i)),t.lock()}catch(t){this._worker=new s("error"),this._worker.error(t)}}d.prototype={accumulate:function(t){return h(this,t)},on:function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){r.delay(e,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(t){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},t)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,i){"use strict";if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,i.nodebuffer=void 0!==e,i.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)i.blob=!1;else{var r=new ArrayBuffer(0);try{i.blob=0===new Blob([r],{type:"application/zip"}).size}catch(t){try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(r),i.blob=0===o.getBlob("application/zip").size}catch(t){i.blob=!1}}}try{i.nodestream=!!t("readable-stream").Readable}catch(t){i.nodestream=!1}},{"readable-stream":16}],31:[function(t,e,n){"use strict";for(var i=t("./utils"),r=t("./support"),o=t("./nodejsUtils"),s=t("./stream/GenericWorker"),a=new Array(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){s.call(this,"utf-8 decode"),this.leftOver=null}function u(){s.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(t){return r.nodebuffer?o.newBufferFrom(t,"utf-8"):function(t){var e,n,i,o,s,a=t.length,c=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=r.uint8array?new Uint8Array(c):new Array(c),o=s=0;s<c;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(i=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e}(t)},n.utf8decode=function(t){return r.nodebuffer?i.transformTo("nodebuffer",t).toString("utf-8"):function(t){var e,n,r,o,s=t.length,c=new Array(2*s);for(e=n=0;e<s;)if((r=t[e++])<128)c[n++]=r;else if(4<(o=a[r]))c[n++]=65533,e+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&e<s;)r=r<<6|63&t[e++],o--;1<o?c[n++]=65533:r<65536?c[n++]=r:(r-=65536,c[n++]=55296|r>>10&1023,c[n++]=56320|1023&r)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),i.applyFromCharCode(c)}(t=i.transformTo(r.uint8array?"uint8array":"array",t))},i.inherits(l,s),l.prototype.processChunk=function(t){var e=i.transformTo(r.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var o=e;(e=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),e.set(o,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var s=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+a[t[n]]>e?n:e}(e),c=e;s!==e.length&&(r.uint8array?(c=e.subarray(0,s),this.leftOver=e.subarray(s,e.length)):(c=e.slice(0,s),this.leftOver=e.slice(s,e.length))),this.push({data:n.utf8decode(c),meta:t.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=l,i.inherits(u,s),u.prototype.processChunk=function(t){this.push({data:n.utf8encode(t.data),meta:t.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,e,n){"use strict";var i=t("./support"),r=t("./base64"),o=t("./nodejsUtils"),s=t("set-immediate-shim"),a=t("./external");function c(t){return t}function l(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}n.newBlob=function(t,e){n.checkSupport("blob");try{return new Blob([t],{type:e})}catch(n){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return i.append(t),i.getBlob(e)}catch(t){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e||"nodebuffer"===e?i.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")},stringifyByChar:function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},applyCanBeUsed:{uint8array:function(){try{return i.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(t){return!1}}(),nodebuffer:function(){try{return i.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(t){return!1}}()}};function h(t){var e=65536,i=n.getTypeOf(t),r=!0;if("uint8array"===i?r=u.applyCanBeUsed.uint8array:"nodebuffer"===i&&(r=u.applyCanBeUsed.nodebuffer),r)for(;1<e;)try{return u.stringifyByChunk(t,i,e)}catch(t){e=Math.floor(e/2)}return u.stringifyByChar(t)}function d(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}n.applyFromCharCode=h;var f={};f.string={string:c,array:function(t){return l(t,new Array(t.length))},arraybuffer:function(t){return f.string.uint8array(t).buffer},uint8array:function(t){return l(t,new Uint8Array(t.length))},nodebuffer:function(t){return l(t,o.allocBuffer(t.length))}},f.array={string:h,array:c,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(t)}},f.arraybuffer={string:function(t){return h(new Uint8Array(t))},array:function(t){return d(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:c,uint8array:function(t){return new Uint8Array(t)},nodebuffer:function(t){return o.newBufferFrom(new Uint8Array(t))}},f.uint8array={string:h,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:c,nodebuffer:function(t){return o.newBufferFrom(t)}},f.nodebuffer={string:h,array:function(t){return d(t,new Array(t.length))},arraybuffer:function(t){return f.nodebuffer.uint8array(t).buffer},uint8array:function(t){return d(t,new Uint8Array(t.length))},nodebuffer:c},n.transformTo=function(t,e){if(e=e||"",!t)return e;n.checkSupport(t);var i=n.getTypeOf(e);return f[i][t](e)},n.getTypeOf=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":i.nodebuffer&&o.isBuffer(t)?"nodebuffer":i.uint8array&&t instanceof Uint8Array?"uint8array":i.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(t){if(!i[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},n.delay=function(t,e,n){s((function(){t.apply(n||null,e||[])}))},n.inherits=function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n},n.extend=function(){var t,e,n={};for(t=0;t<arguments.length;t++)for(e in arguments[t])arguments[t].hasOwnProperty(e)&&void 0===n[e]&&(n[e]=arguments[t][e]);return n},n.prepareContent=function(t,e,o,s,c){return a.Promise.resolve(e).then((function(t){return i.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new a.Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(e){var u=n.getTypeOf(e);return u?("arraybuffer"===u?e=n.transformTo("uint8array",e):"string"===u&&(c?e=r.decode(e):o&&!0!==s&&(e=function(t){return l(t,i.uint8array?new Uint8Array(t.length):new Array(t.length))}(e))),e):a.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,"set-immediate-shim":54}],33:[function(t,e,n){"use strict";var i=t("./reader/readerFor"),r=t("./utils"),o=t("./signature"),s=t("./zipEntry"),a=(t("./utf8"),t("./support"));function c(t){this.files=[],this.loadOptions=t}c.prototype={checkSignature:function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(e)+", expected "+r.pretty(t)+")")}},isSignature:function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=a.uint8array?"uint8array":"array",n=r.transformTo(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},readCentralDir:function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(t=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var t=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(t<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(t);var e=t;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(0<i)this.isSignature(e,o.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(t){this.reader=i(t)},load:function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},e.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utf8":31,"./utils":32,"./zipEntry":34}],34:[function(t,e,n){"use strict";var i=t("./reader/readerFor"),r=t("./utils"),o=t("./compressedObject"),s=t("./crc32"),a=t("./utf8"),c=t("./compressions"),l=t("./support");function u(t,e){this.options=t,this.loadOptions=e}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in c)if(c.hasOwnProperty(e)&&c[e].magic===t)return c[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==t&&(this.dosPermissions=63&this.externalFileAttributes),3==t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(t){if(this.extraFields[1]){var e=i(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i};t.setIndex(r)},handleUTF8:function(){var t=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=r.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var o=r.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileName)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=i(t.value);return 1!==e.readInt(1)||s(this.fileComment)!==e.readInt(4)?null:a.utf8decode(e.readData(t.length-5))}return null}},e.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,e,n){"use strict";function i(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var r=t("./stream/StreamHelper"),o=t("./stream/DataWorker"),s=t("./utf8"),a=t("./compressedObject"),c=t("./stream/GenericWorker");i.prototype={internalStream:function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var o=!this._dataBinary;o&&!i&&(e=e.pipe(new s.Utf8EncodeWorker)),!o&&i&&(e=e.pipe(new s.Utf8DecodeWorker))}catch(t){(e=new c("error")).error(t)}return new r(e,n,"")},async:function(t,e){return this.internalStream(t).accumulate(e)},nodeStream:function(t,e){return this.internalStream(t||"nodebuffer").toNodejsStream(e)},_compressWorker:function(t,e){if(this._data instanceof a&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new s.Utf8EncodeWorker)),a.createWorkerFrom(n,t,e)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof c?this._data:new o(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)i.prototype[l[h]]=u;e.exports=i},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,e,i){(function(t){"use strict";var n,i,r=t.MutationObserver||t.WebKitMutationObserver;if(r){var o=0,s=new r(u),a=t.document.createTextNode("");s.observe(a,{characterData:!0}),n=function(){a.data=o=++o%2}}else if(t.setImmediate||void 0===t.MessageChannel)n="document"in t&&"onreadystatechange"in t.document.createElement("script")?function(){var e=t.document.createElement("script");e.onreadystatechange=function(){u(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},t.document.documentElement.appendChild(e)}:function(){setTimeout(u,0)};else{var c=new t.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var t,e;i=!0;for(var n=l.length;n;){for(e=l,l=[],t=-1;++t<n;)e[t]();n=l.length}i=!1}e.exports=function(t){1!==l.push(t)||i||n()}}).call(this,void 0!==n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(t,e,n){"use strict";var i=t("immediate");function r(){}var o={},s=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,t!==r&&f(this,t)}function u(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(t,e,n){i((function(){var i;try{i=e(n)}catch(i){return o.reject(t,i)}i===t?o.reject(t,new TypeError("Cannot resolve promise with itself")):o.resolve(t,i)}))}function d(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function f(t,e){var n=!1;function i(e){n||(n=!0,o.reject(t,e))}function r(e){n||(n=!0,o.resolve(t,e))}var s=p((function(){e(r,i)}));"error"===s.status&&i(s.value)}function p(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}(e.exports=l).prototype.finally=function(t){if("function"!=typeof t)return this;var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))},l.prototype.catch=function(t){return this.then(null,t)},l.prototype.then=function(t,e){if("function"!=typeof t&&this.state===a||"function"!=typeof e&&this.state===s)return this;var n=new this.constructor(r);return this.state!==c?h(n,this.state===a?t:e,this.outcome):this.queue.push(new u(n,t,e)),n},u.prototype.callFulfilled=function(t){o.resolve(this.promise,t)},u.prototype.otherCallFulfilled=function(t){h(this.promise,this.onFulfilled,t)},u.prototype.callRejected=function(t){o.reject(this.promise,t)},u.prototype.otherCallRejected=function(t){h(this.promise,this.onRejected,t)},o.resolve=function(t,e){var n=p(d,e);if("error"===n.status)return o.reject(t,n.value);var i=n.value;if(i)f(t,i);else{t.state=a,t.outcome=e;for(var r=-1,s=t.queue.length;++r<s;)t.queue[r].callFulfilled(e)}return t},o.reject=function(t,e){t.state=s,t.outcome=e;for(var n=-1,i=t.queue.length;++n<i;)t.queue[n].callRejected(e);return t},l.resolve=function(t){return t instanceof this?t:o.resolve(new this(r),t)},l.reject=function(t){var e=new this(r);return o.reject(e,t)},l.all=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var s=new Array(n),a=0,c=-1,l=new this(r);++c<n;)u(t[c],c);return l;function u(t,r){e.resolve(t).then((function(t){s[r]=t,++a!==n||i||(i=!0,o.resolve(l,s))}),(function(t){i||(i=!0,o.reject(l,t))}))}},l.race=function(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var s,a=-1,c=new this(r);++a<n;)s=t[a],e.resolve(s).then((function(t){i||(i=!0,o.resolve(c,t))}),(function(t){i||(i=!0,o.reject(c,t))}));return c}},{immediate:36}],38:[function(t,e,n){"use strict";var i={};(0,t("./lib/utils/common").assign)(i,t("./lib/deflate"),t("./lib/inflate"),t("./lib/zlib/constants")),e.exports=i},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,e,n){"use strict";var i=t("./zlib/deflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/messages"),a=t("./zlib/zstream"),c=Object.prototype.toString,l=0,u=-1,h=0,d=8;function f(t){if(!(this instanceof f))return new f(t);this.options=r.assign({level:u,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},t||{});var e=this.options;e.raw&&0<e.windowBits?e.windowBits=-e.windowBits:e.gzip&&0<e.windowBits&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==l)throw new Error(s[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=i.deflateSetDictionary(this.strm,p))!==l)throw new Error(s[n]);this._dict_set=!0}}function p(t,e){var n=new f(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}f.prototype.push=function(t,e){var n,s,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?a.input=o.string2buf(t):"[object ArrayBuffer]"===c.call(t)?a.input=new Uint8Array(t):a.input=t,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new r.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=i.deflate(a,s))&&n!==l)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(o.buf2binstring(r.shrinkBuf(a.output,a.next_out))):this.onData(r.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===s?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l):2!==s||(this.onEnd(l),!(a.avail_out=0))},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Deflate=f,n.deflate=p,n.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},n.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,e,n){"use strict";var i=t("./zlib/inflate"),r=t("./utils/common"),o=t("./utils/strings"),s=t("./zlib/constants"),a=t("./zlib/messages"),c=t("./zlib/zstream"),l=t("./zlib/gzheader"),u=Object.prototype.toString;function h(t){if(!(this instanceof h))return new h(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&0<=e.windowBits&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(0<=e.windowBits&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),15<e.windowBits&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==s.Z_OK)throw new Error(a[n]);this.header=new l,i.inflateGetHeader(this.strm,this.header)}function d(t,e){var n=new h(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(t,e){var n,a,c,l,h,d,f=this.strm,p=this.options.chunkSize,g=this.options.dictionary,v=!1;if(this.ended)return!1;a=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?f.input=o.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(p),f.next_out=0,f.avail_out=p),(n=i.inflate(f,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&g&&(d="string"==typeof g?o.string2buf(g):"[object ArrayBuffer]"===u.call(g)?new Uint8Array(g):g,n=i.inflateSetDictionary(this.strm,d)),n===s.Z_BUF_ERROR&&!0===v&&(n=s.Z_OK,v=!1),n!==s.Z_STREAM_END&&n!==s.Z_OK)return this.onEnd(n),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&n!==s.Z_STREAM_END&&(0!==f.avail_in||a!==s.Z_FINISH&&a!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(c=o.utf8border(f.output,f.next_out),l=f.next_out-c,h=o.buf2string(f.output,c),f.next_out=l,f.avail_out=p-l,l&&r.arraySet(f.output,f.output,c,l,0),this.onData(h)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(v=!0)}while((0<f.avail_in||0===f.avail_out)&&n!==s.Z_STREAM_END);return n===s.Z_STREAM_END&&(a=s.Z_FINISH),a===s.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===s.Z_OK):a!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(f.avail_out=0))},h.prototype.onData=function(t){this.chunks.push(t)},h.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},n.Inflate=h,n.inflate=d,n.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])}}return t},n.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(e=i=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),e=r=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s}},o={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};n.setTyped=function(t){t?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,r)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,o))},n.setTyped(i)},{}],42:[function(t,e,n){"use strict";var i=t("./common"),r=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){o=!1}for(var s=new i.Buf8(256),a=0;a<256;a++)s[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function c(t,e){if(e<65537&&(t.subarray&&o||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",s=0;s<e;s++)n+=String.fromCharCode(t[s]);return n}s[254]=s[254]=1,n.string2buf=function(t){var e,n,r,o,s,a=t.length,c=0;for(o=0;o<a;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),c+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(c),o=s=0;s<c;o++)55296==(64512&(n=t.charCodeAt(o)))&&o+1<a&&56320==(64512&(r=t.charCodeAt(o+1)))&&(n=65536+(n-55296<<10)+(r-56320),o++),n<128?e[s++]=n:(n<2048?e[s++]=192|n>>>6:(n<65536?e[s++]=224|n>>>12:(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63),e[s++]=128|n>>>6&63),e[s++]=128|63&n);return e},n.buf2binstring=function(t){return c(t,t.length)},n.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},n.buf2string=function(t,e){var n,i,r,o,a=e||t.length,l=new Array(2*a);for(n=i=0;n<a;)if((r=t[n++])<128)l[i++]=r;else if(4<(o=s[r]))l[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;1<o&&n<a;)r=r<<6|63&t[n++],o--;1<o?l[i++]=65533:r<65536?l[i++]=r:(r-=65536,l[i++]=55296|r>>10&1023,l[i++]=56320|1023&r)}return c(l,i)},n.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;0<=n&&128==(192&t[n]);)n--;return n<0||0===n?e:n+s[t[n]]>e?n:e}},{"./common":41}],43:[function(t,e,n){"use strict";e.exports=function(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){for(n-=s=2e3<n?2e3:n;o=o+(r=r+e[i++]|0)|0,--s;);r%=65521,o%=65521}return r|o<<16|0}},{}],44:[function(t,e,n){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,e,n){"use strict";var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();e.exports=function(t,e,n,r){var o=i,s=r+n;t^=-1;for(var a=r;a<s;a++)t=t>>>8^o[255&(t^e[a])];return-1^t}},{}],46:[function(t,e,n){"use strict";var i,r=t("../utils/common"),o=t("./trees"),s=t("./adler32"),a=t("./crc32"),c=t("./messages"),l=0,u=4,h=0,d=-2,f=-1,p=4,g=2,v=8,m=9,y=286,b=30,w=19,_=2*y+1,x=15,S=3,k=258,E=k+S+1,R=42,C=113,P=1,T=2,I=3,A=4;function D(t,e){return t.msg=c[e],e}function L(t){return(t<<1)-(4<t?9:0)}function O(t){for(var e=t.length;0<=--e;)t[e]=0}function B(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function M(t,e){o._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,B(t.strm)}function N(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function z(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,c=t.strstart>t.w_size-E?t.strstart-(t.w_size-E):0,l=t.window,u=t.w_mask,h=t.prev,d=t.strstart+k,f=l[o+s-1],p=l[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(l[(n=e)+s]===p&&l[n+s-1]===f&&l[n]===l[o]&&l[++n]===l[o+1]){o+=2,n++;do{}while(l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&l[++o]===l[++n]&&o<d);if(i=k-(d-o),o=d-k,s<i){if(t.match_start=e,a<=(s=i))break;f=l[o+s-1],p=l[o+s]}}}while((e=h[e&u])>c&&0!=--r);return s<=t.lookahead?s:t.lookahead}function U(t){var e,n,i,o,c,l,u,h,d,f,p=t.w_size;do{if(o=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-E)){for(r.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=n=t.hash_size;i=t.head[--e],t.head[e]=p<=i?i-p:0,--n;);for(e=n=p;i=t.prev[--e],t.prev[e]=p<=i?i-p:0,--n;);o+=p}if(0===t.strm.avail_in)break;if(l=t.strm,u=t.window,h=t.strstart+t.lookahead,f=void 0,(d=o)<(f=l.avail_in)&&(f=d),n=0===f?0:(l.avail_in-=f,r.arraySet(u,l.input,l.next_in,f,h),1===l.state.wrap?l.adler=s(l.adler,u,f,h):2===l.state.wrap&&(l.adler=a(l.adler,u,f,h)),l.next_in+=f,l.total_in+=f,f),t.lookahead+=n,t.lookahead+t.insert>=S)for(c=t.strstart-t.insert,t.ins_h=t.window[c],t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[c+S-1])&t.hash_mask,t.prev[c&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=c,c++,t.insert--,!(t.lookahead+t.insert<S)););}while(t.lookahead<E&&0!==t.strm.avail_in)}function H(t,e){for(var n,i;;){if(t.lookahead<E){if(U(t),t.lookahead<E&&e===l)return P;if(0===t.lookahead)break}if(n=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-E&&(t.match_length=z(t,n)),t.match_length>=S)if(i=o._tr_tally(t,t.strstart-t.match_start,t.match_length-S),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=S){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(M(t,!1),0===t.strm.avail_out))return P}return t.insert=t.strstart<S-1?t.strstart:S-1,e===u?(M(t,!0),0===t.strm.avail_out?I:A):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?P:T}function j(t,e){for(var n,i,r;;){if(t.lookahead<E){if(U(t),t.lookahead<E&&e===l)return P;if(0===t.lookahead)break}if(n=0,t.lookahead>=S&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=S-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-E&&(t.match_length=z(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===S&&4096<t.strstart-t.match_start)&&(t.match_length=S-1)),t.prev_length>=S&&t.match_length<=t.prev_length){for(r=t.strstart+t.lookahead-S,i=o._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-S),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+S-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=S-1,t.strstart++,i&&(M(t,!1),0===t.strm.avail_out))return P}else if(t.match_available){if((i=o._tr_tally(t,0,t.window[t.strstart-1]))&&M(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return P}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=o._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<S-1?t.strstart:S-1,e===u?(M(t,!0),0===t.strm.avail_out?I:A):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?P:T}function G(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*_),this.dyn_dtree=new r.Buf16(2*(2*b+1)),this.bl_tree=new r.Buf16(2*(2*w+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(x+1),this.heap=new r.Buf16(2*y+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*y+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function V(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=g,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?R:C,t.adler=2===e.wrap?0:1,e.last_flush=l,o._tr_init(e),h):D(t,d)}function Y(t){var e=V(t);return e===h&&function(t){t.window_size=2*t.w_size,O(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=S-1,t.match_available=0,t.ins_h=0}(t.state),e}function K(t,e,n,i,o,s){if(!t)return d;var a=1;if(e===f&&(e=6),i<0?(a=0,i=-i):15<i&&(a=2,i-=16),o<1||m<o||n!==v||i<8||15<i||e<0||9<e||s<0||p<s)return D(t,d);8===i&&(i=9);var c=new W;return(t.state=c).strm=t,c.wrap=a,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=o+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+S-1)/S),c.window=new r.Buf8(2*c.w_size),c.head=new r.Buf16(c.hash_size),c.prev=new r.Buf16(c.w_size),c.lit_bufsize=1<<o+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new r.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=s,c.method=n,Y(t)}i=[new G(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(U(t),0===t.lookahead&&e===l)return P;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,M(t,!1),0===t.strm.avail_out))return P;if(t.strstart-t.block_start>=t.w_size-E&&(M(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===u?(M(t,!0),0===t.strm.avail_out?I:A):(t.strstart>t.block_start&&(M(t,!1),t.strm.avail_out),P)})),new G(4,4,8,4,H),new G(4,5,16,8,H),new G(4,6,32,32,H),new G(4,4,16,16,j),new G(8,16,32,32,j),new G(8,16,128,128,j),new G(8,32,128,256,j),new G(32,128,258,1024,j),new G(32,258,258,4096,j)],n.deflateInit=function(t,e){return K(t,e,v,15,8,0)},n.deflateInit2=K,n.deflateReset=Y,n.deflateResetKeep=V,n.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?d:(t.state.gzhead=e,h):d},n.deflate=function(t,e){var n,r,s,c;if(!t||!t.state||5<e||e<0)return t?D(t,d):d;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==u)return D(t,0===t.avail_out?-5:d);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===R)if(2===r.wrap)t.adler=0,N(r,31),N(r,139),N(r,8),r.gzhead?(N(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),N(r,255&r.gzhead.time),N(r,r.gzhead.time>>8&255),N(r,r.gzhead.time>>16&255),N(r,r.gzhead.time>>24&255),N(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),N(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(N(r,255&r.gzhead.extra.length),N(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=a(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(N(r,0),N(r,0),N(r,0),N(r,0),N(r,0),N(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),N(r,3),r.status=C);else{var f=v+(r.w_bits-8<<4)<<8;f|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(f|=32),f+=31-f%31,r.status=C,F(r,f),0!==r.strstart&&(F(r,t.adler>>>16),F(r,65535&t.adler)),t.adler=1}if(69===r.status)if(r.gzhead.extra){for(s=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),B(t),s=r.pending,r.pending!==r.pending_buf_size));)N(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),B(t),s=r.pending,r.pending===r.pending_buf_size)){c=1;break}c=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,N(r,c)}while(0!==c);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===c&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){s=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),B(t),s=r.pending,r.pending===r.pending_buf_size)){c=1;break}c=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,N(r,c)}while(0!==c);r.gzhead.hcrc&&r.pending>s&&(t.adler=a(t.adler,r.pending_buf,r.pending-s,s)),0===c&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&B(t),r.pending+2<=r.pending_buf_size&&(N(r,255&t.adler),N(r,t.adler>>8&255),t.adler=0,r.status=C)):r.status=C),0!==r.pending){if(B(t),0===t.avail_out)return r.last_flush=-1,h}else if(0===t.avail_in&&L(e)<=L(n)&&e!==u)return D(t,-5);if(666===r.status&&0!==t.avail_in)return D(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==l&&666!==r.status){var p=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(U(t),0===t.lookahead)){if(e===l)return P;break}if(t.match_length=0,n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(M(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===u?(M(t,!0),0===t.strm.avail_out?I:A):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?P:T}(r,e):3===r.strategy?function(t,e){for(var n,i,r,s,a=t.window;;){if(t.lookahead<=k){if(U(t),t.lookahead<=k&&e===l)return P;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=S&&0<t.strstart&&(i=a[r=t.strstart-1])===a[++r]&&i===a[++r]&&i===a[++r]){s=t.strstart+k;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<s);t.match_length=k-(s-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=S?(n=o._tr_tally(t,1,t.match_length-S),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=o._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(M(t,!1),0===t.strm.avail_out))return P}return t.insert=0,e===u?(M(t,!0),0===t.strm.avail_out?I:A):t.last_lit&&(M(t,!1),0===t.strm.avail_out)?P:T}(r,e):i[r.level].func(r,e);if(p!==I&&p!==A||(r.status=666),p===P||p===I)return 0===t.avail_out&&(r.last_flush=-1),h;if(p===T&&(1===e?o._tr_align(r):5!==e&&(o._tr_stored_block(r,0,0,!1),3===e&&(O(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),B(t),0===t.avail_out))return r.last_flush=-1,h}return e!==u?h:r.wrap<=0?1:(2===r.wrap?(N(r,255&t.adler),N(r,t.adler>>8&255),N(r,t.adler>>16&255),N(r,t.adler>>24&255),N(r,255&t.total_in),N(r,t.total_in>>8&255),N(r,t.total_in>>16&255),N(r,t.total_in>>24&255)):(F(r,t.adler>>>16),F(r,65535&t.adler)),B(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?h:1)},n.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==R&&69!==e&&73!==e&&91!==e&&103!==e&&e!==C&&666!==e?D(t,d):(t.state=null,e===C?D(t,-3):h):d},n.deflateSetDictionary=function(t,e){var n,i,o,a,c,l,u,f,p=e.length;if(!t||!t.state)return d;if(2===(a=(n=t.state).wrap)||1===a&&n.status!==R||n.lookahead)return d;for(1===a&&(t.adler=s(t.adler,e,p,0)),n.wrap=0,p>=n.w_size&&(0===a&&(O(n.head),n.strstart=0,n.block_start=0,n.insert=0),f=new r.Buf8(n.w_size),r.arraySet(f,e,p-n.w_size,n.w_size,0),e=f,p=n.w_size),c=t.avail_in,l=t.next_in,u=t.input,t.avail_in=p,t.next_in=0,t.input=e,U(n);n.lookahead>=S;){for(i=n.strstart,o=n.lookahead-(S-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+S-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++,--o;);n.strstart=i,n.lookahead=S-1,U(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=S-1,n.match_available=0,t.next_in=l,t.input=u,t.avail_in=c,n.wrap=a,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,e,n){"use strict";e.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(t,e,n){"use strict";e.exports=function(t,e){var n,i,r,o,s,a,c,l,u,h,d,f,p,g,v,m,y,b,w,_,x,S,k,E,R;n=t.state,i=t.next_in,E=t.input,r=i+(t.avail_in-5),o=t.next_out,R=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,h=n.wnext,d=n.window,f=n.hold,p=n.bits,g=n.lencode,v=n.distcode,m=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;t:do{p<15&&(f+=E[i++]<<p,p+=8,f+=E[i++]<<p,p+=8),b=g[f&m];e:for(;;){if(f>>>=w=b>>>24,p-=w,0==(w=b>>>16&255))R[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=g[(65535&b)+(f&(1<<w)-1)];continue e}if(32&w){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}_=65535&b,(w&=15)&&(p<w&&(f+=E[i++]<<p,p+=8),_+=f&(1<<w)-1,f>>>=w,p-=w),p<15&&(f+=E[i++]<<p,p+=8,f+=E[i++]<<p,p+=8),b=v[f&y];n:for(;;){if(f>>>=w=b>>>24,p-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=v[(65535&b)+(f&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(x=65535&b,p<(w&=15)&&(f+=E[i++]<<p,(p+=8)<w&&(f+=E[i++]<<p,p+=8)),c<(x+=f&(1<<w)-1)){t.msg="invalid distance too far back",n.mode=30;break t}if(f>>>=w,p-=w,(w=o-s)<x){if(u<(w=x-w)&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=d,(S=0)===h){if(S+=l-w,w<_){for(_-=w;R[o++]=d[S++],--w;);S=o-x,k=R}}else if(h<w){if(S+=l+h-w,(w-=h)<_){for(_-=w;R[o++]=d[S++],--w;);if(S=0,h<_){for(_-=w=h;R[o++]=d[S++],--w;);S=o-x,k=R}}}else if(S+=h-w,w<_){for(_-=w;R[o++]=d[S++],--w;);S=o-x,k=R}for(;2<_;)R[o++]=k[S++],R[o++]=k[S++],R[o++]=k[S++],_-=3;_&&(R[o++]=k[S++],1<_&&(R[o++]=k[S++]))}else{for(S=o-x;R[o++]=R[S++],R[o++]=R[S++],R[o++]=R[S++],2<(_-=3););_&&(R[o++]=R[S++],1<_&&(R[o++]=R[S++]))}break}}break}}while(i<r&&o<a);i-=_=p>>3,f&=(1<<(p-=_<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=f,n.bits=p}},{}],49:[function(t,e,n){"use strict";var i=t("../utils/common"),r=t("./adler32"),o=t("./crc32"),s=t("./inffast"),a=t("./inftrees"),c=1,l=2,u=0,h=-2,d=1,f=852,p=592;function g(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function v(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function m(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=d,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(f),e.distcode=e.distdyn=new i.Buf32(p),e.sane=1,e.back=-1,u):h}function y(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,m(t)):h}function b(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?h:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,y(t))):h}function w(t,e){var n,i;return t?(i=new v,(t.state=i).window=null,(n=b(t,e))!==u&&(t.state=null),n):h}var _,x,S=!0;function k(t){if(S){var e;for(_=new i.Buf32(512),x=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(a(c,t.lens,0,288,_,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;a(l,t.lens,0,32,x,0,t.work,{bits:5}),S=!1}t.lencode=_,t.lenbits=9,t.distcode=x,t.distbits=5}function E(t,e,n,r){var o,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),r>=s.wsize?(i.arraySet(s.window,e,n-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(r<(o=s.wsize-s.wnext)&&(o=r),i.arraySet(s.window,e,n-r,o,s.wnext),(r-=o)?(i.arraySet(s.window,e,n-r,r,0),s.wnext=r,s.whave=s.wsize):(s.wnext+=o,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=o))),0}n.inflateReset=y,n.inflateReset2=b,n.inflateResetKeep=m,n.inflateInit=function(t){return w(t,15)},n.inflateInit2=w,n.inflate=function(t,e){var n,f,p,v,m,y,b,w,_,x,S,R,C,P,T,I,A,D,L,O,B,M,N,F,z=0,U=new i.Buf8(4),H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return h;12===(n=t.state).mode&&(n.mode=13),m=t.next_out,p=t.output,b=t.avail_out,v=t.next_in,f=t.input,y=t.avail_in,w=n.hold,_=n.bits,x=y,S=b,M=u;t:for(;;)switch(n.mode){case d:if(0===n.wrap){n.mode=13;break}for(;_<16;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(2&n.wrap&&35615===w){U[n.check=0]=255&w,U[1]=w>>>8&255,n.check=o(n.check,U,2,0),_=w=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&w)<<8)+(w>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&w)){t.msg="unknown compression method",n.mode=30;break}if(_-=4,B=8+(15&(w>>>=4)),0===n.wbits)n.wbits=B;else if(B>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<B,t.adler=n.check=1,n.mode=512&w?10:12,_=w=0;break;case 2:for(;_<16;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(n.flags=w,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=w>>8&1),512&n.flags&&(U[0]=255&w,U[1]=w>>>8&255,n.check=o(n.check,U,2,0)),_=w=0,n.mode=3;case 3:for(;_<32;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}n.head&&(n.head.time=w),512&n.flags&&(U[0]=255&w,U[1]=w>>>8&255,U[2]=w>>>16&255,U[3]=w>>>24&255,n.check=o(n.check,U,4,0)),_=w=0,n.mode=4;case 4:for(;_<16;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}n.head&&(n.head.xflags=255&w,n.head.os=w>>8),512&n.flags&&(U[0]=255&w,U[1]=w>>>8&255,n.check=o(n.check,U,2,0)),_=w=0,n.mode=5;case 5:if(1024&n.flags){for(;_<16;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}n.length=w,n.head&&(n.head.extra_len=w),512&n.flags&&(U[0]=255&w,U[1]=w>>>8&255,n.check=o(n.check,U,2,0)),_=w=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(R=n.length)&&(R=y),R&&(n.head&&(B=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,f,v,R,B)),512&n.flags&&(n.check=o(n.check,f,R,v)),y-=R,v+=R,n.length-=R),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break t;for(R=0;B=f[v+R++],n.head&&B&&n.length<65536&&(n.head.name+=String.fromCharCode(B)),B&&R<y;);if(512&n.flags&&(n.check=o(n.check,f,R,v)),y-=R,v+=R,B)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break t;for(R=0;B=f[v+R++],n.head&&B&&n.length<65536&&(n.head.comment+=String.fromCharCode(B)),B&&R<y;);if(512&n.flags&&(n.check=o(n.check,f,R,v)),y-=R,v+=R,B)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;_<16;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(w!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}_=w=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;_<32;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}t.adler=n.check=g(w),_=w=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=m,t.avail_out=b,t.next_in=v,t.avail_in=y,n.hold=w,n.bits=_,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){w>>>=7&_,_-=7&_,n.mode=27;break}for(;_<3;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}switch(n.last=1&w,_-=1,3&(w>>>=1)){case 0:n.mode=14;break;case 1:if(k(n),n.mode=20,6!==e)break;w>>>=2,_-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}w>>>=2,_-=2;break;case 14:for(w>>>=7&_,_-=7&_;_<32;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if((65535&w)!=(w>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&w,_=w=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(R=n.length){if(y<R&&(R=y),b<R&&(R=b),0===R)break t;i.arraySet(p,f,v,R,m),y-=R,v+=R,b-=R,m+=R,n.length-=R;break}n.mode=12;break;case 17:for(;_<14;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(n.nlen=257+(31&w),w>>>=5,_-=5,n.ndist=1+(31&w),w>>>=5,_-=5,n.ncode=4+(15&w),w>>>=4,_-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;_<3;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}n.lens[H[n.have++]]=7&w,w>>>=3,_-=3}for(;n.have<19;)n.lens[H[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,N={bits:n.lenbits},M=a(0,n.lens,0,19,n.lencode,0,n.work,N),n.lenbits=N.bits,M){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;I=(z=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,A=65535&z,!((T=z>>>24)<=_);){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(A<16)w>>>=T,_-=T,n.lens[n.have++]=A;else{if(16===A){for(F=T+2;_<F;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(w>>>=T,_-=T,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}B=n.lens[n.have-1],R=3+(3&w),w>>>=2,_-=2}else if(17===A){for(F=T+3;_<F;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}_-=T,B=0,R=3+(7&(w>>>=T)),w>>>=3,_-=3}else{for(F=T+7;_<F;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}_-=T,B=0,R=11+(127&(w>>>=T)),w>>>=7,_-=7}if(n.have+R>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;R--;)n.lens[n.have++]=B}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,N={bits:n.lenbits},M=a(c,n.lens,0,n.nlen,n.lencode,0,n.work,N),n.lenbits=N.bits,M){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,N={bits:n.distbits},M=a(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,N),n.distbits=N.bits,M){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=y&&258<=b){t.next_out=m,t.avail_out=b,t.next_in=v,t.avail_in=y,n.hold=w,n.bits=_,s(t,S),m=t.next_out,p=t.output,b=t.avail_out,v=t.next_in,f=t.input,y=t.avail_in,w=n.hold,_=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;I=(z=n.lencode[w&(1<<n.lenbits)-1])>>>16&255,A=65535&z,!((T=z>>>24)<=_);){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(I&&0==(240&I)){for(D=T,L=I,O=A;I=(z=n.lencode[O+((w&(1<<D+L)-1)>>D)])>>>16&255,A=65535&z,!(D+(T=z>>>24)<=_);){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}w>>>=D,_-=D,n.back+=D}if(w>>>=T,_-=T,n.back+=T,n.length=A,0===I){n.mode=26;break}if(32&I){n.back=-1,n.mode=12;break}if(64&I){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&I,n.mode=22;case 22:if(n.extra){for(F=n.extra;_<F;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}n.length+=w&(1<<n.extra)-1,w>>>=n.extra,_-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;I=(z=n.distcode[w&(1<<n.distbits)-1])>>>16&255,A=65535&z,!((T=z>>>24)<=_);){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(0==(240&I)){for(D=T,L=I,O=A;I=(z=n.distcode[O+((w&(1<<D+L)-1)>>D)])>>>16&255,A=65535&z,!(D+(T=z>>>24)<=_);){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}w>>>=D,_-=D,n.back+=D}if(w>>>=T,_-=T,n.back+=T,64&I){t.msg="invalid distance code",n.mode=30;break}n.offset=A,n.extra=15&I,n.mode=24;case 24:if(n.extra){for(F=n.extra;_<F;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}n.offset+=w&(1<<n.extra)-1,w>>>=n.extra,_-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===b)break t;if(R=S-b,n.offset>R){if((R=n.offset-R)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}C=R>n.wnext?(R-=n.wnext,n.wsize-R):n.wnext-R,R>n.length&&(R=n.length),P=n.window}else P=p,C=m-n.offset,R=n.length;for(b<R&&(R=b),b-=R,n.length-=R;p[m++]=P[C++],--R;);0===n.length&&(n.mode=21);break;case 26:if(0===b)break t;p[m++]=n.length,b--,n.mode=21;break;case 27:if(n.wrap){for(;_<32;){if(0===y)break t;y--,w|=f[v++]<<_,_+=8}if(S-=b,t.total_out+=S,n.total+=S,S&&(t.adler=n.check=n.flags?o(n.check,p,S,m-S):r(n.check,p,S,m-S)),S=b,(n.flags?w:g(w))!==n.check){t.msg="incorrect data check",n.mode=30;break}_=w=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;_<32;){if(0===y)break t;y--,w+=f[v++]<<_,_+=8}if(w!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}_=w=0}n.mode=29;case 29:M=1;break t;case 30:M=-3;break t;case 31:return-4;case 32:default:return h}return t.next_out=m,t.avail_out=b,t.next_in=v,t.avail_in=y,n.hold=w,n.bits=_,(n.wsize||S!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&E(t,t.output,t.next_out,S-t.avail_out)?(n.mode=31,-4):(x-=t.avail_in,S-=t.avail_out,t.total_in+=x,t.total_out+=S,n.total+=S,n.wrap&&S&&(t.adler=n.check=n.flags?o(n.check,p,S,t.next_out-S):r(n.check,p,S,t.next_out-S)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==x&&0===S||4===e)&&M===u&&(M=-5),M)},n.inflateEnd=function(t){if(!t||!t.state)return h;var e=t.state;return e.window&&(e.window=null),t.state=null,u},n.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?h:((n.head=e).done=!1,u):h},n.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?h:11===n.mode&&r(1,e,i,0)!==n.check?-3:E(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,u):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,e,n){"use strict";var i=t("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(t,e,n,c,l,u,h,d){var f,p,g,v,m,y,b,w,_,x=d.bits,S=0,k=0,E=0,R=0,C=0,P=0,T=0,I=0,A=0,D=0,L=null,O=0,B=new i.Buf16(16),M=new i.Buf16(16),N=null,F=0;for(S=0;S<=15;S++)B[S]=0;for(k=0;k<c;k++)B[e[n+k]]++;for(C=x,R=15;1<=R&&0===B[R];R--);if(R<C&&(C=R),0===R)return l[u++]=20971520,l[u++]=20971520,d.bits=1,0;for(E=1;E<R&&0===B[E];E++);for(C<E&&(C=E),S=I=1;S<=15;S++)if(I<<=1,(I-=B[S])<0)return-1;if(0<I&&(0===t||1!==R))return-1;for(M[1]=0,S=1;S<15;S++)M[S+1]=M[S]+B[S];for(k=0;k<c;k++)0!==e[n+k]&&(h[M[e[n+k]]++]=k);if(y=0===t?(L=N=h,19):1===t?(L=r,O-=257,N=o,F-=257,256):(L=s,N=a,-1),S=E,m=u,T=k=D=0,g=-1,v=(A=1<<(P=C))-1,1===t&&852<A||2===t&&592<A)return 1;for(;;){for(b=S-T,_=h[k]<y?(w=0,h[k]):h[k]>y?(w=N[F+h[k]],L[O+h[k]]):(w=96,0),f=1<<S-T,E=p=1<<P;l[m+(D>>T)+(p-=f)]=b<<24|w<<16|_|0,0!==p;);for(f=1<<S-1;D&f;)f>>=1;if(0!==f?(D&=f-1,D+=f):D=0,k++,0==--B[S]){if(S===R)break;S=e[n+h[k]]}if(C<S&&(D&v)!==g){for(0===T&&(T=C),m+=E,I=1<<(P=S-T);P+T<R&&!((I-=B[P+T])<=0);)P++,I<<=1;if(A+=1<<P,1===t&&852<A||2===t&&592<A)return 1;l[g=D&v]=C<<24|P<<16|m-u|0}}return 0!==D&&(l[m+D]=S-T<<24|64<<16|0),d.bits=C,0}},{"../utils/common":41}],51:[function(t,e,n){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,e,n){"use strict";var i=t("../utils/common"),r=0,o=1;function s(t){for(var e=t.length;0<=--e;)t[e]=0}var a=0,c=29,l=256,u=l+1+c,h=30,d=19,f=2*u+1,p=15,g=16,v=7,m=256,y=16,b=17,w=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],k=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=new Array(2*(u+2));s(E);var R=new Array(2*h);s(R);var C=new Array(512);s(C);var P=new Array(256);s(P);var T=new Array(c);s(T);var I,A,D,L=new Array(h);function O(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function B(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function M(t){return t<256?C[t]:C[256+(t>>>7)]}function N(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,n){t.bi_valid>g-n?(t.bi_buf|=e<<t.bi_valid&65535,N(t,t.bi_buf),t.bi_buf=e>>g-t.bi_valid,t.bi_valid+=n-g):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function z(t,e,n){F(t,n[2*e],n[2*e+1])}function U(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function H(t,e,n){var i,r,o=new Array(p+1),s=0;for(i=1;i<=p;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=U(o[a]++,a))}}function j(t){var e;for(e=0;e<u;e++)t.dyn_ltree[2*e]=0;for(e=0;e<h;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function G(t){8<t.bi_valid?N(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function W(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function V(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&W(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!W(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function Y(t,e,n){var i,r,o,s,a=0;if(0!==t.last_lit)for(;i=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===i?z(t,r,e):(z(t,(o=P[r])+l+1,e),0!==(s=_[o])&&F(t,r-=T[o],s),z(t,o=M(--i),n),0!==(s=x[o])&&F(t,i-=L[o],s)),a<t.last_lit;);z(t,m,e)}function K(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,c=e.stat_desc.elems,l=-1;for(t.heap_len=0,t.heap_max=f,n=0;n<c;n++)0!==o[2*n]?(t.heap[++t.heap_len]=l=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=l<2?++l:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=l,n=t.heap_len>>1;1<=n;n--)V(t,o,n);for(r=c;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],V(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,V(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,c=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,h=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,g=e.stat_desc.extra_base,v=e.stat_desc.max_length,m=0;for(o=0;o<=p;o++)t.bl_count[o]=0;for(c[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<f;n++)v<(o=c[2*c[2*(i=t.heap[n])+1]+1]+1)&&(o=v,m++),c[2*i+1]=o,l<i||(t.bl_count[o]++,s=0,g<=i&&(s=d[i-g]),a=c[2*i],t.opt_len+=a*(o+s),h&&(t.static_len+=a*(u[2*i+1]+s)));if(0!==m){do{for(o=v-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[v]--,m-=2}while(0<m);for(o=v;0!==o;o--)for(i=t.bl_count[o];0!==i;)l<(r=t.heap[--n])||(c[2*r+1]!==o&&(t.opt_len+=(o-c[2*r+1])*c[2*r],c[2*r+1]=o),i--)}}(t,e),H(o,l,t.bl_count)}function Z(t,e,n){var i,r,o=-1,s=e[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<c&&r===s||(a<l?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*y]++):a<=10?t.bl_tree[2*b]++:t.bl_tree[2*w]++,o=r,l=(a=0)===s?(c=138,3):r===s?(c=6,3):(c=7,4))}function X(t,e,n){var i,r,o=-1,s=e[1],a=0,c=7,l=4;for(0===s&&(c=138,l=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<c&&r===s)){if(a<l)for(;z(t,r,t.bl_tree),0!=--a;);else 0!==r?(r!==o&&(z(t,r,t.bl_tree),a--),z(t,y,t.bl_tree),F(t,a-3,2)):a<=10?(z(t,b,t.bl_tree),F(t,a-3,3)):(z(t,w,t.bl_tree),F(t,a-11,7));o=r,l=(a=0)===s?(c=138,3):r===s?(c=6,3):(c=7,4)}}s(L);var $=!1;function q(t,e,n,r){F(t,(a<<1)+(r?1:0),3),function(t,e,n,r){G(t),r&&(N(t,n),N(t,~n)),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}n._tr_init=function(t){$||(function(){var t,e,n,i,r,o=new Array(p+1);for(i=n=0;i<c-1;i++)for(T[i]=n,t=0;t<1<<_[i];t++)P[n++]=i;for(P[n-1]=i,i=r=0;i<16;i++)for(L[i]=r,t=0;t<1<<x[i];t++)C[r++]=i;for(r>>=7;i<h;i++)for(L[i]=r<<7,t=0;t<1<<x[i]-7;t++)C[256+r++]=i;for(e=0;e<=p;e++)o[e]=0;for(t=0;t<=143;)E[2*t+1]=8,t++,o[8]++;for(;t<=255;)E[2*t+1]=9,t++,o[9]++;for(;t<=279;)E[2*t+1]=7,t++,o[7]++;for(;t<=287;)E[2*t+1]=8,t++,o[8]++;for(H(E,u+1,o),t=0;t<h;t++)R[2*t+1]=5,R[2*t]=U(t,5);I=new O(E,_,l+1,u,p),A=new O(R,x,0,h,p),D=new O(new Array(0),S,0,d,v)}(),$=!0),t.l_desc=new B(t.dyn_ltree,I),t.d_desc=new B(t.dyn_dtree,A),t.bl_desc=new B(t.bl_tree,D),t.bi_buf=0,t.bi_valid=0,j(t)},n._tr_stored_block=q,n._tr_flush_block=function(t,e,n,i){var s,a,c=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return r;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return o;for(e=32;e<l;e++)if(0!==t.dyn_ltree[2*e])return o;return r}(t)),K(t,t.l_desc),K(t,t.d_desc),c=function(t){var e;for(Z(t,t.dyn_ltree,t.l_desc.max_code),Z(t,t.dyn_dtree,t.d_desc.max_code),K(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*k[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),s=t.opt_len+3+7>>>3,(a=t.static_len+3+7>>>3)<=s&&(s=a)):s=a=n+5,n+4<=s&&-1!==e?q(t,e,n,i):4===t.strategy||a===s?(F(t,2+(i?1:0),3),Y(t,E,R)):(F(t,4+(i?1:0),3),function(t,e,n,i){var r;for(F(t,e-257,5),F(t,n-1,5),F(t,i-4,4),r=0;r<i;r++)F(t,t.bl_tree[2*k[r]+1],3);X(t,t.dyn_ltree,e-1),X(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,c+1),Y(t,t.dyn_ltree,t.dyn_dtree)),j(t),i&&G(t)},n._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(P[n]+l+1)]++,t.dyn_dtree[2*M(e)]++),t.last_lit===t.lit_bufsize-1},n._tr_align=function(t){F(t,2,3),z(t,m,E),function(t){16===t.bi_valid?(N(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):8<=t.bi_valid&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},{"../utils/common":41}],53:[function(t,e,n){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(t,e,n){"use strict";e.exports="function"==typeof i?i:function(){var t=[].slice.apply(arguments);t.splice(1,0,0),setTimeout.apply(null,t)}},{}]},{},[10])(10)}).call(this,n(60).Buffer,n(13),n(64).setImmediate)},function(t,e,n){"use strict";n.r(e);var i=n(37);for(var r in i)["default"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var o=n(14);n.d(e,"AnnotationType",(function(){return o.b})),n.d(e,"AnnotationHandler",(function(){return o.a}));var s=n(38);n.d(e,"DefaultKaramelClientFactory",(function(){return s.a}));var a=n(15);n.d(e,"DefaultKaramelClient",(function(){return a.a}));var c=n(39);for(var r in c)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return c[t]}))}(r);var l=n(8);n.d(e,"ThrottlingException",(function(){return l.a}));var u=n(40);for(var r in u)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return u[t]}))}(r);var h=n(23);n.d(e,"KaramelCacheRenderProvider",(function(){return h.a}));var d=n(20);n.d(e,"KaramelRenderProvider",(function(){return d.a}));var f=n(41);for(var r in f)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException","KaramelCacheRenderProvider","KaramelRenderProvider"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return f[t]}))}(r);var p=n(42);for(var r in p)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException","KaramelCacheRenderProvider","KaramelRenderProvider"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return p[t]}))}(r);var g=n(43);for(var r in g)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException","KaramelCacheRenderProvider","KaramelRenderProvider"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return g[t]}))}(r);var v=n(32);n.d(e,"EncryptionIdResponseCipher",(function(){return v.a}));var m=n(33);n.d(e,"CdnDataLoader",(function(){return m.a}));var y=n(34);n.d(e,"ServiceBookProviderAdapter",(function(){return y.a}));var b=n(44);n.d(e,"ServiceBookProviderFactory",(function(){return b.a}));var w=n(35);n.d(e,"ServiceDataLoader",(function(){return w.a}));var _=n(36);n.d(e,"ZipDataLoader",(function(){return _.a}));var x=n(31);n.d(e,"HtmlElementBuilderFactory",(function(){return x.a}));var S=n(7);n.d(e,"HTMLElementHelper",(function(){return S.a}));var k=n(25);n.d(e,"HTMLElementRenderer",(function(){return k.a}));var E=n(12);n.d(e,"HorizontalTbHtmlElementBuilder",(function(){return E.a}));var R=n(45);n.d(e,"VerticalHtmlElementBuilder",(function(){return R.a}));var C=n(46);for(var r in C)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException","KaramelCacheRenderProvider","KaramelRenderProvider","EncryptionIdResponseCipher","CdnDataLoader","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","ZipDataLoader","HtmlElementBuilderFactory","HTMLElementHelper","HTMLElementRenderer","HorizontalTbHtmlElementBuilder","VerticalHtmlElementBuilder"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return C[t]}))}(r);var P=n(10);n.d(e,"MouseGestureHandler",(function(){return P.a}));var T=n(4);n.d(e,"Gesture",(function(){return T.a})),n.d(e,"PointerGestureHandler",(function(){return T.b}));var I=n(11);n.d(e,"TouchGestureHandler",(function(){return I.a}));var A=n(22);n.d(e,"KaramelContentLayer",(function(){return A.a}));var D=n(21);n.d(e,"StackCompositor",(function(){return D.a}));var L=n(47);for(var r in L)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException","KaramelCacheRenderProvider","KaramelRenderProvider","EncryptionIdResponseCipher","CdnDataLoader","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","ZipDataLoader","HtmlElementBuilderFactory","HTMLElementHelper","HTMLElementRenderer","HorizontalTbHtmlElementBuilder","VerticalHtmlElementBuilder","MouseGestureHandler","Gesture","PointerGestureHandler","TouchGestureHandler","KaramelContentLayer","StackCompositor"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return L[t]}))}(r);var O=n(24);n.d(e,"UserInteractionLayer",(function(){return O.a}));var B=n(48);for(var r in B)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException","KaramelCacheRenderProvider","KaramelRenderProvider","EncryptionIdResponseCipher","CdnDataLoader","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","ZipDataLoader","HtmlElementBuilderFactory","HTMLElementHelper","HTMLElementRenderer","HorizontalTbHtmlElementBuilder","VerticalHtmlElementBuilder","MouseGestureHandler","Gesture","PointerGestureHandler","TouchGestureHandler","KaramelContentLayer","StackCompositor","UserInteractionLayer"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return B[t]}))}(r);var M=n(6);n.d(e,"NavigationService",(function(){return M.a}));var N=n(19);n.d(e,"PaginationService",(function(){return N.a}));var F=n(49);n.d(e,"ScrollLock",(function(){return F.a}));var z=n(16);n.d(e,"ScrollService",(function(){return z.a}));var U=n(2);n.d(e,"SelectionDirection",(function(){return U.a}));var H=n(26);n.d(e,"SelectionHandler",(function(){return H.a}));var j=n(50);for(var r in j)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException","KaramelCacheRenderProvider","KaramelRenderProvider","EncryptionIdResponseCipher","CdnDataLoader","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","ZipDataLoader","HtmlElementBuilderFactory","HTMLElementHelper","HTMLElementRenderer","HorizontalTbHtmlElementBuilder","VerticalHtmlElementBuilder","MouseGestureHandler","Gesture","PointerGestureHandler","TouchGestureHandler","KaramelContentLayer","StackCompositor","UserInteractionLayer","NavigationService","PaginationService","ScrollLock","ScrollService","SelectionDirection","SelectionHandler"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return j[t]}))}(r);var G=n(30);n.d(e,"HorizontalLRTextSelectionRule",(function(){return G.c})),n.d(e,"HorizontalLRStartSelectionRule",(function(){return G.b})),n.d(e,"HorizontalLREndSelectionRule",(function(){return G.a}));var W=n(29);n.d(e,"HorizontalRLTextSelectionRule",(function(){return W.c})),n.d(e,"HorizontalRLStartSelectionRule",(function(){return W.b})),n.d(e,"HorizontalRLEndSelectionRule",(function(){return W.a}));var V=n(27);n.d(e,"SelectionStrategyHorizontalTb",(function(){return V.a}));var Y=n(28);n.d(e,"HoritontalTbSearch",(function(){return Y.a}));var K=n(1);n.d(e,"Constants",(function(){return K.a}));var Z=n(9);n.d(e,"Debouncer",(function(){return Z.a}));var X=n(5);n.d(e,"Deferred",(function(){return X.a}));var $=n(51);for(var r in $)["default","AnnotationType","AnnotationHandler","DefaultKaramelClientFactory","DefaultKaramelClient","ThrottlingException","KaramelCacheRenderProvider","KaramelRenderProvider","EncryptionIdResponseCipher","CdnDataLoader","ServiceBookProviderAdapter","ServiceBookProviderFactory","ServiceDataLoader","ZipDataLoader","HtmlElementBuilderFactory","HTMLElementHelper","HTMLElementRenderer","HorizontalTbHtmlElementBuilder","VerticalHtmlElementBuilder","MouseGestureHandler","Gesture","PointerGestureHandler","TouchGestureHandler","KaramelContentLayer","StackCompositor","UserInteractionLayer","NavigationService","PaginationService","ScrollLock","ScrollService","SelectionDirection","SelectionHandler","HorizontalLRTextSelectionRule","HorizontalLRStartSelectionRule","HorizontalLREndSelectionRule","HorizontalRLTextSelectionRule","HorizontalRLStartSelectionRule","HorizontalRLEndSelectionRule","SelectionStrategyHorizontalTb","HoritontalTbSearch","Constants","Debouncer","Deferred"].indexOf(r)<0&&function(t){n.d(e,t,(function(){return $[t]}))}(r);var q=n(3);n.d(e,"MathUtil",(function(){return q.a}));var J=n(52);n.d(e,"pixelToPoints",(function(){return J.a}));var Q=n(53);n.d(e,"buildPathAndQuery",(function(){return Q.a}));var tt=n(18);n.d(e,"ContentView",(function(){return tt.a}));var et=n(17);n.d(e,"KaramelContentView",(function(){return et.a}))},function(t,e,n){var i=n(57),r=n(58);"string"==typeof(r=r.__esModule?r.default:r)&&(r=[[t.i,r,""]]);var o={insert:"head",singleton:!1};i(r,o);t.exports=r.locals||{}},function(t,e,n){"use strict";var i,r=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),s=[];function a(t){for(var e=-1,n=0;n<s.length;n++)if(s[n].identifier===t){e=n;break}return e}function c(t,e){for(var n={},i=[],r=0;r<t.length;r++){var o=t[r],c=e.base?o[0]+e.base:o[0],l=n[c]||0,u="".concat(c," ").concat(l);n[c]=l+1;var h=a(u),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(s[h].references++,s[h].updater(d)):s.push({identifier:u,updater:v(d,e),references:1}),i.push(u)}return i}function l(t){var e=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var r=n.nc;r&&(i.nonce=r)}if(Object.keys(i).forEach((function(t){e.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(e);else{var s=o(t.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(e)}return e}var u,h=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function d(t,e,n,i){var r=n?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=h(e,r);else{var o=document.createTextNode(r),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(o,s[e]):t.appendChild(o)}}function f(t,e,n){var i=n.css,r=n.media,o=n.sourceMap;if(r?t.setAttribute("media",r):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var p=null,g=0;function v(t,e){var n,i,r;if(e.singleton){var o=g++;n=p||(p=l(e)),i=d.bind(null,n,o,!1),r=d.bind(null,n,o,!0)}else n=l(e),i=f.bind(null,n,e),r=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=r());var n=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<n.length;i++){var r=a(n[i]);s[r].references--}for(var o=c(t,e),l=0;l<n.length;l++){var u=a(n[l]);0===s[u].references&&(s[u].updater(),s.splice(u,1))}n=o}}}},function(t,e,n){(e=n(59)(!1)).push([t.i,".kg-client-root{--highlight-background-color: rgba(255, 224, 0, 0.321);--search-background-color: rgba(255, 235, 90, 0.2);--search-border-color: rgb(204, 201, 178);--selection-background-color: rgba(5, 20, 40, 0.2)}.kg-client-root .kg-client-highlight,.kg-client-root .kg-client-note{background-color:var(--highlight-background-color)}.kg-client-root .kg-client-search{background-color:var(--search-background-color);border:1px solid var(--search-border-color);border-radius:6px}.kg-client-root .kg-client-selection{background-color:var(--selection-background-color) !important}.kg-client-root.kg-client-theme--default{--highlight-background-color: rgba(255, 224, 0, 0.321);--search-background-color: rgba(255, 235, 90, 0.2);--search-border-color: rgb(204, 201, 178);--selection-background-color: rgba(5, 20, 40, 0.2)}.kg-client-root.kg-client-theme--night{--highlight-background-color: rgba(105, 188, 255, 0.4);--search-background-color: rgba(61, 145, 215, 0.3);--search-border-color: rgb(54, 97, 133);--selection-background-color: rgba(245, 245, 245, 0.4)}.kg-client-root.kg-client-theme--dark{--highlight-background-color: rgba(105, 188, 255, 0.4);--search-background-color: rgba(61, 145, 215, 0.3);--search-border-color: rgb(54, 97, 133);--selection-background-color: rgba(245, 245, 245, 0.4)}.kg-client-root.kg-client-theme--sepia{--highlight-background-color: rgba(255, 247, 170, 0.4);--search-background-color: rgba(257, 246, 179, 0.4);--search-border-color: rgb(203, 195, 145);--selection-background-color: rgba(0, 15, 36, 0.15)}.kg-client-root .kg-client-interaction-layer{position:absolute;top:0;left:0;width:100%;height:100%}.kg-client-root a:empty,.kg-client-root span:empty{position:absolute}\n",""]),t.exports=e},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=(s=i,a=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),o=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[n].concat(o).concat([r]).join("\n")}var s,a,c;return[n].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,i){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(i)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(r[s]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);i&&r[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),e.push(c))}},e}},function(t,e,n){"use strict";(function(t){var i=n(61),r=n(62),o=n(63);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e);return t}(t,e,n,i):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(e,n),r=(t=a(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|f(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(i=e.length)!=i?a(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(u(e),t=a(t,e<0?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|f(e.length);t=a(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function f(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return H(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(t).length;default:if(i)return H(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return R(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function v(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function m(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:y(t,e,n,i,r);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,i,r){var o,s=1,a=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,c/=2,n/=2}function l(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var u=-1;for(o=n;o<a;o++)if(l(t,o)===l(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===c)return u*s}else-1!==u&&(o-=o-u),u=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var h=!0,d=0;d<c;d++)if(l(t,o+d)!==l(e,d)){h=!1;break}if(h)return o}return-1}function b(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,i){return G(H(e,t.length-n),t,n,i)}function _(t,e,n,i){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function x(t,e,n,i){return _(t,e,n,i)}function S(t,e,n,i){return G(j(e),t,n,i)}function k(t,e,n,i){return G(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function E(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function R(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,c,l=t[r],u=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h<=n)switch(h){case 1:l<128&&(u=l);break;case 2:128==(192&(o=t[r+1]))&&(c=(31&l)<<6|63&o)>127&&(u=c);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(c=(15&l)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(u=c);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(c=(15&l)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(u=c)}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=C));return n}(i)}e.Buffer=c,e.SlowBuffer=function(t){+t!=t&&(t=0);return c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return l(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,i){return u(e),e<=0?a(t,e):void 0!==n?"string"==typeof i?a(t,e).fill(n,i):a(t,e).fill(n):a(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=c.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r),r+=s.length}return i},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?R(this,0,t):g.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,i,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),l=this.slice(i,r),u=t.slice(e,n),h=0;h<a;++h)if(l[h]!==u[h]){o=l[h],s=u[h];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return x(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function P(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function I(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=U(t[o]);return r}function A(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function D(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,i,r,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function O(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function B(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function M(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(t,e,n,i,o){return o||M(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function F(t,e,n,i,o){return o||M(t,0,n,8),r.write(t,e,n,i,52,8),n+8}c.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var r=e-t;n=new c(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},c.prototype.readUInt8=function(t,e){return e||D(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||D(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||D(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||D(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||D(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||D(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||D(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||D(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||D(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||D(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||D(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||D(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||D(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||L(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);L(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):O(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):O(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return N(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return N(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return F(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return F(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=c.isBuffer(t)?t:H(new c(t,i).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function H(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function G(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(13))},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,i=l(t),s=i[0],a=i[1],c=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),u=0,h=a>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],c[u++]=e>>16&255,c[u++]=e>>8&255,c[u++]=255&e;2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,c[u++]=255&e);1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,c[u++]=e>>8&255,c[u++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],s=16383,a=0,c=n-r;a<c;a+=s)o.push(u(t,a,a+s>c?c:a+s));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function u(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,s,a=8*r-i-1,c=(1<<a)-1,l=c>>1,u=-7,h=n?r-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=256*o+t[e+h],h+=d,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=i;u>0;s=256*s+t[e+h],h+=d,u-=8);if(0===o)o=1-l;else{if(o===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),o-=l}return(f?-1:1)*s*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var s,a,c,l=8*o-r-1,u=(1<<l)-1,h=u>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),(e+=s+h>=1?d/c:d*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=u?(a=0,s=u):s+h>=1?(a=(e*c-1)*Math.pow(2,r),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),s=0));r>=8;t[n+f]=255&a,f+=p,a/=256,r-=8);for(s=s<<r|a,l+=r;l>0;t[n+f]=255&s,f+=p,s/=256,l-=8);t[n+f-p]|=128*g}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(65),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(13))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,r,o,s,a,c=1,l={},u=!1,h=t.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(t);d=d&&d.setTimeout?d:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick((function(){p(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){p(t.data)},i=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(r=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){p(t),e.onreadystatechange=null,r.removeChild(e),e=null},r.appendChild(e)}):i=function(t){setTimeout(p,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&p(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(s+e,"*")}),d.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return l[c]=r,i(c),c++},d.clearImmediate=f}function f(t){delete l[t]}function p(t){if(u)setTimeout(p,0,t);else{var e=l[t];if(e){u=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(13),n(66))},function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var c,l=[],u=!1,h=-1;function d(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var t=a(d);u=!0;for(var e=l.length;e;){for(c=l,l=[];++h<e;)c&&c[h].run();h=-1,e=l.length}c=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new p(t,e)),1!==l.length||u||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=g,r.addListener=g,r.once=g,r.off=g,r.removeListener=g,r.removeAllListeners=g,r.emit=g,r.prependListener=g,r.prependOnceListener=g,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}}]);
(function(e){function r(e){function n(e,n){var s=t.promisedResponse[e]={id:e,promise:n,onDone:function(){r(i(e,"resolve",arguments)),delete t.promisedResponse[e]},onFail:function(){r(i(e,"reject",arguments)),delete t.promisedResponse[e]},onNotify:function(){r(i(e,"notify",arguments))}};n.then(s.onDone,s.onFail,s.onNotify)}function r(e){if(e&&e.id){t.log&&t.log.logResponse(e,"server");var n={response:e};t.channelId&&(n.channelId=t.channelId),t.target.postMessage(n,"*")}}function i(e,t,n){return{id:e,action:t,args:JSON.stringify(jQuery.makeArray(n))}}function o(e){function o(){e.data.param?f=t.local[u](JSON.parse(e.data.param)):e.data.args?f=t.local[u].apply(t.local,JSON.parse(e.data.args)):f=t.local[u](),f&&jQuery.isFunction(f.then)?n(a,f):l=i(a,"resolve",[f])}var u=e.data.method,a=e.data.responseId,f,l,c=!1;try{t.local[u]&&typeof t.local[u]=="function"?(t.target||(t.target=e.source),t.log&&t.log.logCall(e.data,"server"),o(),c=!0):l=i(a,"reject",[new s.error("Target has no such method.",u)])}finally{!l&&!c&&(l=i(a,"reject",[new s.error("Exception thrown by target method: "+u)])),r(l)}}function u(e){var n=e.data.response.id;if(!t.awaitingResponse[n])return;try{var r=t.awaitingResponse[n].dfd,i=JSON.parse(e.data.response.args),s=e.data.response.action;t.log&&t.log.logResponse(e.data.response,"client"),jQuery.isFunction(r[s])&&r[s].apply(r,i)}catch(o){t.log&&t.log.logError("Exception calling '"+s+"'",n,"client")}}function a(e,n){function r(){t.log&&t.log.logError("timeout waiting for response from: "+e,a.id,"client"),a.timeout=null,a.dfd.reject(new s.error("timeout"))}function i(){a.timeout&&(clearTimeout(a.timeout),a.timeout=null),a.dfd=null,delete t.awaitingResponse[a.id]}function o(){n&&a.timeout&&(clearTimeout(a.timeout),a.timeout=setTimeout(r,n))}var u=t.awaitingResponse.nextId++,a={id:u,dfd:new jQuery.Deferred};return n&&n>0&&(a.timeout=setTimeout(r,n)),a.dfd.then(i,i,o),t.awaitingResponse[u]=a,a}function f(e,t){function n(t,n){return function(){return e.clientSideInvoke(t,n,arguments)}}var r,i={__channel__:e};for(var s in t)t.hasOwnProperty(s)&&(t[s].options&&t[s].options.rpc?(r=t[s].options?t[s].options:{},r.timeout=r.timeout||e.timeout):typeof t[s]=="function"&&(r=t[s].options?t[s].options:{}),i[s]=n(s,r));return i}var t=e;return t.awaitingResponse={nextId:1},t.promisedResponse={},t.clientSideInvoke=function(e,n,r){var i,s;return i={method:e},n.simpleParam?i.param=r&&r.length?JSON.stringify(r[0]):undefined:r.length&&(i.args=JSON.stringify(Array.prototype.slice.call(r))),t.channelId&&(i.channelId=t.channelId),n.timeout&&(s=a(e,n.timeout),i.responseId=s.id),t.log&&t.log.logCall(i,"client"),t.target.postMessage(i,"*"),s&&s.dfd.promise()},t.receiveMessage=function(e){if(t.remoteDomain!=="*"&&!e.origin.match(t.remoteDomain))return;e.data.method?o(e):e.data.response&&u(e)},t.close=function(){t.clientSideInvoke=function(){throw new s.error("Channel is closed")},t.receiveMessage=function(){},t.proxyObject=undefined},t.proxyObject=f(t,t.iRemote),t}function i(e){var r=e.data.channelId;r&&t[r]?t[r].receiveMessage(e):!r&&n&&n.receiveMessage(e)}function s(i){i=e.extend({},s.defaults,i);var o=i.channelId;if(o&&t[i.channelId])throw new s.error("Channel already opened",i.channelId);if(!o&&n)throw new s.error("Anonymous channel already opened");var u=r(i);return i.loggerFactory&&(u.log=i.loggerFactory(i.logfn,u)),o?t[i.channelId]=u:n=u,u.proxyObject}var t={},n;s.loggerFactory=function(e,t){function n(e){var t="";try{if(e.param)t=e.param;else if(e.args){var n=/^\s*\[\s*(.*)\s*\]\s*$/.exec(e.args);t=n[1]}}catch(r){}return t.length>60&&(t=t.substr(0,57)+"..."),"("+t+")"}function r(e){return(e.name?e.name+"::":"")+(e.channelId?e.channelId+".":"")}function i(e,t,i){var s=r(t)+i+(e.responseId?" #"+e.responseId:"")+" -> "+e.method+n(e);return s}function s(e,t,i){var s=r(t)+i+" #"+e.id+" <- "+e.action+n(e);return s}function o(e,n,i){var s=r(t)+i+(n?" #"+n+" <- ":" ")+"!"+e;return s}e=e||function(e){console.log(e)};var u={channel:t,log:e,logError:function(e,t,n){this.log(o(e,t,n))},logCall:function(e,t){this.log(i(e,this.channel,t))},logResponse:function(e,t){this.log(s(e,this.channel,t))}};return u},s.defaults={timeout:3e4},s.close=function(e){var r=typeof e=="string"?e:e.channelId;r&&t[r]?(t[r].close(),delete t[r]):!r&&n&&(n.close(),n=undefined)},s.error=function(e,t){this.name="rpc.error",this.message=e,arguments.length>1&&(this.data=t)},s.error.prototype=new Error,s.error.prototype.toJSON=function(){return{name:this.name,message:this.message,data:this.data}},s.error.prototype.constructor=s.error,s.fn=function(t){var n=function(){};return n.options=e.extend({rpc:!0},t),n},window.addEventListener("message",i,!1),e.rpc=s})(jQuery);
/*! Amazon elects to use this software under the MIT license. */
/*!
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie=function(name,value,options){if(typeof value!='undefined'){options=options||{};if(value===null){value='';options=$.extend({},options);options.expires=-1;}var expires='';if(options.expires&&(typeof options.expires=='number'||options.expires.toUTCString)){var date;if(typeof options.expires=='number'){date=new Date();date.setTime(date.getTime()+(options.expires*24*60*60*1000));}else{date=options.expires;}expires='; expires='+date.toUTCString();}var path=options.path?'; path='+(options.path):'';var domain=options.domain?'; domain='+(options.domain):'';var secure=options.secure?'; secure':'';document.cookie=[name,'=',encodeURIComponent(value),expires,path,domain,secure].join('');}else{var cookieValue=null;if(document.cookie&&document.cookie!=''){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;i++){var cookie=jQuery.trim(cookies[i]);if(cookie.substring(0,name.length+1)==(name+'=')){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}};
(function(e){e.format=function(){function t(t,n){var r,i=e[n].months;switch(r=parseInt(t)){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:return e[n].months[r-1];default:return t}}var e={en:{months:["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],am:"AM",pm:"PM"},fr:{months:["janv.","f\u00e9vr.","mars","avril","mai","juin","juil.","ao\u00fbt","sept.","oct.","nov.","d\u00e9c."],am:"AM",pm:"PM"},de:{months:["Jan.","Feb.","M\u00e4rz","Apr.","Mai","Juni","Juli","Aug.","Sept.","Okt.","Nov.","Dez."],am:"AM",pm:"PM"},es:{months:["ene.","feb.","mar.","abr.","may.","jun.","jul.","ago.","sep.","oct.","nov.","dic."],am:"AM",pm:"PM"},it:{months:["gen.","feb.","mar.","apr.","mag.","giu.","lug.","ago.","sett.","ott.","nov.","dic."],am:"AM",pm:"PM"},pt:{months:["jan.","fev.","mar.","abr.","mai.","jun.","jul.","ago.","set.","out.","nov.","dez."],am:"AM",pm:"PM"},ja:{months:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],am:"\u5348\u524d",pm:"\u5348\u5f8c"}},n=function(e){switch(e){case"Jan":return"01";case"Feb":return"02";case"Mar":return"03";case"Apr":return"04";case"May":return"05";case"Jun":return"06";case"Jul":return"07";case"Aug":return"08";case"Sep":return"09";case"Oct":return"10";case"Nov":return"11";case"Dec":return"12";default:return e}},r=function(e){var t=e;t.indexOf(".")!==-1&&(t=t.substring(0,t.indexOf(".")));var n=t.split(":");return n.length===3?(hour=n[0],minute=n[1],second=n[2],{time:t,hour:hour,minute:minute,second:second}):{time:"",hour:"",minute:"",second:""}};return{date:function(i,s,o){o=o||"en";try{var u=null,a=null,f=null,l=null;if(typeof i.getFullYear=="function")u=i.getFullYear(),a=i.getMonth()+1,f=i.getDate(),l=r(i.toTimeString());else if(i.search(/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.?\d{0,3}\+\d{2}:\d{2}/)!=-1){var c=i.split(/[T\+-]/);u=c[0],a=c[1],f=c[2],l=r(c[3].split(".")[0])}else{var c=i.split(" ");switch(c.length){case 6:u=c[5],a=n(c[1]),f=c[2],l=r(c[3]);break;case 2:var h=c[0].split("-");u=h[0],a=h[1],f=h[2],l=r(c[1]);break;case 7:u=c[3],a=n(c[1]),f=c[2],l=r(c[4]);break;default:return i}}var p="",d="",v="";for(var m=0;m<s.length;m++){var g=s.charAt(m);p+=g,v="";switch(p){case"dd":d+=f,p="";break;case"MMM":d+=t(a,o),p="";break;case"MM":if(s.charAt(m+1)=="M")break;d+=a,p="";break;case"yyyy":d+=u,p="";break;case"HH":d+=l.hour,p="";break;case"hh":d+=l.hour==0?12:l.hour<13?l.hour:l.hour-12,p="";break;case"mm":d+=l.minute,p="";break;case"ss":d+=l.second.substring(0,2),p="";break;case"a":d+=l.hour>=12?e[o].pm:e[o].am,p="";break;case" ":d+=g,p="";break;case"/":d+=g,p="";break;case":":d+=g,p="";break;default:p.length===2&&p.indexOf("y")!==0?(d+=p.substring(0,1),p=p.substring(1,2)):p.length===3&&p.indexOf("yyy")===-1?p="":v=p}}return d+=v,d}catch(y){return console.log(y),i}}}}()})(jQuery),$(document).ready(function(){$(".shortDateFormat").each(function(e,t){$(t).is(":input")?$(t).val($.format.date($(t).val(),"dd/MM/yyyy")):$(t).text($.format.date($(t).text(),"dd/MM/yyyy"))}),$(".longDateFormat").each(function(e,t){$(t).is(":input")?$(t).val($.format.date($(t).val(),"dd/MM/yyyy hh:mm:ss")):$(t).text($.format.date($(t).text(),"dd/MM/yyyy hh:mm:ss"))})});
/*!
 * Copyright (c) 2012 Amazon.com, Inc. All rights reserved.
 */
this.Handlebars={};
(function(b){b.VERSION="1.0.0-rc.3";b.COMPILER_REVISION=2;b.REVISION_CHANGES={1:"<= 1.0.rc.2",2:">= 1.0.0-rc.3"};b.helpers={};b.partials={};b.registerHelper=function(b,a,i){if(i)a.not=i;this.helpers[b]=a};b.registerPartial=function(b,a){this.partials[b]=a};b.registerHelper("helperMissing",function(b){if(arguments.length!==2)throw Error("Could not find property '"+b+"'");});var g=Object.prototype.toString;b.registerHelper("blockHelperMissing",function(e,a){var i=a.inverse||function(){},h=a.fn,f=g.call(e);
f==="[object Function]"&&(e=e.call(this));return e===!0?h(this):e===!1||e==null?i(this):f==="[object Array]"?e.length>0?b.helpers.each(e,a):i(this):h(e)});b.K=function(){};b.createFrame=Object.create||function(e){b.K.prototype=e;e=new b.K;b.K.prototype=null;return e};b.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(e,a){if(b.logger.level<=e){var i=b.logger.methodMap[e];typeof console!=="undefined"&&console[i]&&console[i].call(console,a)}}};
b.log=function(e,a){b.logger.log(e,a)};b.registerHelper("each",function(e,a){var i=a.fn,g=a.inverse,f=0,d="",c;a.data&&(c=b.createFrame(a.data));if(e&&typeof e==="object")if(e instanceof Array)for(var n=e.length;f<n;f++){if(c)c.index=f;d+=i(e[f],{data:c})}else for(n in e)if(e.hasOwnProperty(n)){if(c)c.key=n;d+=i(e[n],{data:c});f++}f===0&&(d=g(this));return d});b.registerHelper("if",function(e,a){g.call(e)==="[object Function]"&&(e=e.call(this));return!e||b.Utils.isEmpty(e)?a.inverse(this):a.fn(this)});
b.registerHelper("unless",function(e,a){var i=a.fn;a.fn=a.inverse;a.inverse=i;return b.helpers["if"].call(this,e,a)});b.registerHelper("with",function(b,a){return a.fn(b)});b.registerHelper("log",function(e,a){var i=a.data&&a.data.level!=null?parseInt(a.data.level,10):1;b.log(i,e)})})(this.Handlebars);
var handlebars=function(){function b(){this.yy={}}var g={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,simpleInverse:6,statements:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,partialName:25,params:26,hash:27,DATA:28,param:29,STRING:30,INTEGER:31,BOOLEAN:32,hashSegments:33,hashSegment:34,ID:35,EQUALS:36,PARTIAL_NAME:37,
pathSegments:38,SEP:39,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"DATA",30:"STRING",31:"INTEGER",32:"BOOLEAN",35:"ID",36:"EQUALS",37:"PARTIAL_NAME",39:"SEP"},productions_:[0,[3,2],[4,2],[4,3],[4,2],[4,1],[4,1],[4,0],[7,1],[7,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[6,2],[17,3],[17,2],[17,2],[17,1],[17,1],[26,
2],[26,1],[29,1],[29,1],[29,1],[29,1],[29,1],[27,1],[33,2],[33,1],[34,3],[34,3],[34,3],[34,3],[34,3],[25,1],[21,1],[38,3],[38,1]],performAction:function(a,b,e,f,d,c){a=c.length-1;switch(d){case 1:return c[a-1];case 2:this.$=new f.ProgramNode([],c[a]);break;case 3:this.$=new f.ProgramNode(c[a-2],c[a]);break;case 4:this.$=new f.ProgramNode(c[a-1],[]);break;case 5:this.$=new f.ProgramNode(c[a]);break;case 6:this.$=new f.ProgramNode([],[]);break;case 7:this.$=new f.ProgramNode([]);break;case 8:this.$=
[c[a]];break;case 9:c[a-1].push(c[a]);this.$=c[a-1];break;case 10:this.$=new f.BlockNode(c[a-2],c[a-1].inverse,c[a-1],c[a]);break;case 11:this.$=new f.BlockNode(c[a-2],c[a-1],c[a-1].inverse,c[a]);break;case 12:this.$=c[a];break;case 13:this.$=c[a];break;case 14:this.$=new f.ContentNode(c[a]);break;case 15:this.$=new f.CommentNode(c[a]);break;case 16:this.$=new f.MustacheNode(c[a-1][0],c[a-1][1]);break;case 17:this.$=new f.MustacheNode(c[a-1][0],c[a-1][1]);break;case 18:this.$=c[a-1];break;case 19:this.$=
new f.MustacheNode(c[a-1][0],c[a-1][1]);break;case 20:this.$=new f.MustacheNode(c[a-1][0],c[a-1][1],!0);break;case 21:this.$=new f.PartialNode(c[a-1]);break;case 22:this.$=new f.PartialNode(c[a-2],c[a-1]);break;case 24:this.$=[[c[a-2]].concat(c[a-1]),c[a]];break;case 25:this.$=[[c[a-1]].concat(c[a]),null];break;case 26:this.$=[[c[a-1]],c[a]];break;case 27:this.$=[[c[a]],null];break;case 28:this.$=[[new f.DataNode(c[a])],null];break;case 29:c[a-1].push(c[a]);this.$=c[a-1];break;case 30:this.$=[c[a]];
break;case 31:this.$=c[a];break;case 32:this.$=new f.StringNode(c[a]);break;case 33:this.$=new f.IntegerNode(c[a]);break;case 34:this.$=new f.BooleanNode(c[a]);break;case 35:this.$=new f.DataNode(c[a]);break;case 36:this.$=new f.HashNode(c[a]);break;case 37:c[a-1].push(c[a]);this.$=c[a-1];break;case 38:this.$=[c[a]];break;case 39:this.$=[c[a-2],c[a]];break;case 40:this.$=[c[a-2],new f.StringNode(c[a])];break;case 41:this.$=[c[a-2],new f.IntegerNode(c[a])];break;case 42:this.$=[c[a-2],new f.BooleanNode(c[a])];
break;case 43:this.$=[c[a-2],new f.DataNode(c[a])];break;case 44:this.$=new f.PartialNameNode(c[a]);break;case 45:this.$=new f.IdNode(c[a]);break;case 46:c[a-2].push(c[a]);this.$=c[a-2];break;case 47:this.$=[c[a]]}},table:[{3:1,4:2,5:[2,7],6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],22:[1,14],23:[1,15],24:[1,16]},{1:[3]},{5:[1,17]},{5:[2,6],7:18,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,6],22:[1,14],23:[1,15],24:[1,16]},{5:[2,5],6:20,8:21,9:7,
11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,5],22:[1,14],23:[1,15],24:[1,16]},{17:23,18:[1,22],21:24,28:[1,25],35:[1,27],38:26},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{4:28,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{4:29,6:3,7:4,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,5],20:[2,7],22:[1,14],23:[1,15],24:[1,16]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],
19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{17:30,21:24,28:[1,25],35:[1,27],38:26},{17:31,21:24,28:[1,25],35:[1,27],38:26},{17:32,21:24,28:[1,25],35:[1,27],38:26},{25:33,37:[1,34]},{1:[2,1]},{5:[2,2],8:21,9:7,11:8,12:9,13:10,
14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,2],22:[1,14],23:[1,15],24:[1,16]},{17:23,21:24,28:[1,25],35:[1,27],38:26},{5:[2,4],7:35,8:6,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,4],22:[1,14],23:[1,15],24:[1,16]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,23],14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],24:[2,23]},{18:[1,36]},{18:[2,27],21:41,26:37,27:38,28:[1,45],29:39,30:[1,42],31:[1,43],32:[1,44],33:40,
34:46,35:[1,47],38:26},{18:[2,28]},{18:[2,45],28:[2,45],30:[2,45],31:[2,45],32:[2,45],35:[2,45],39:[1,48]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],39:[2,47]},{10:49,20:[1,50]},{10:51,20:[1,50]},{18:[1,52]},{18:[1,53]},{18:[1,54]},{18:[1,55],21:56,35:[1,27],38:26},{18:[2,44],35:[2,44]},{5:[2,3],8:21,9:7,11:8,12:9,13:10,14:[1,11],15:[1,12],16:[1,13],19:[1,19],20:[2,3],22:[1,14],23:[1,15],24:[1,16]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},
{18:[2,25],21:41,27:57,28:[1,45],29:58,30:[1,42],31:[1,43],32:[1,44],33:40,34:46,35:[1,47],38:26},{18:[2,26]},{18:[2,30],28:[2,30],30:[2,30],31:[2,30],32:[2,30],35:[2,30]},{18:[2,36],34:59,35:[1,60]},{18:[2,31],28:[2,31],30:[2,31],31:[2,31],32:[2,31],35:[2,31]},{18:[2,32],28:[2,32],30:[2,32],31:[2,32],32:[2,32],35:[2,32]},{18:[2,33],28:[2,33],30:[2,33],31:[2,33],32:[2,33],35:[2,33]},{18:[2,34],28:[2,34],30:[2,34],31:[2,34],32:[2,34],35:[2,34]},{18:[2,35],28:[2,35],30:[2,35],31:[2,35],32:[2,35],35:[2,
35]},{18:[2,38],35:[2,38]},{18:[2,47],28:[2,47],30:[2,47],31:[2,47],32:[2,47],35:[2,47],36:[1,61],39:[2,47]},{35:[1,62]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{21:63,35:[1,27],38:26},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,
20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],24:[2,21]},{18:[1,64]},{18:[2,24]},{18:[2,29],28:[2,29],30:[2,29],31:[2,29],32:[2,29],35:[2,29]},{18:[2,37],35:[2,37]},{36:[1,61]},{21:65,28:[1,69],30:[1,66],31:[1,67],32:[1,68],35:[1,27],38:26},{18:[2,46],28:[2,46],30:[2,46],31:[2,46],32:[2,46],35:[2,46],39:[2,46]},{18:[1,70]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],
22:[2,22],23:[2,22],24:[2,22]},{18:[2,39],35:[2,39]},{18:[2,40],35:[2,40]},{18:[2,41],35:[2,41]},{18:[2,42],35:[2,42]},{18:[2,43],35:[2,43]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]}],defaultActions:{17:[2,1],25:[2,28],38:[2,26],57:[2,24]},parseError:function(a){throw Error(a);},parse:function(a){function b(){var d;d=e.lexer.lex()||1;typeof d!=="number"&&(d=e.symbols_[d]||d);return d}var e=this,f=[0],d=[null],c=[],n=this.table,t="",g=0,u=0,r=0;this.lexer.setInput(a);
this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined")this.lexer.yylloc={};a=this.lexer.yylloc;c.push(a);var j=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function")this.parseError=this.yy.parseError;for(var k,s,o,l,p={},q,m;;){o=f[f.length-1];if(this.defaultActions[o])l=this.defaultActions[o];else{if(k===null||typeof k=="undefined")k=b();l=n[o]&&n[o][k]}if(typeof l==="undefined"||!l.length||!l[0]){var v="";if(!r){m=
[];for(q in n[o])this.terminals_[q]&&q>2&&m.push("'"+this.terminals_[q]+"'");v=this.lexer.showPosition?"Parse error on line "+(g+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+m.join(", ")+", got '"+(this.terminals_[k]||k)+"'":"Parse error on line "+(g+1)+": Unexpected "+(k==1?"end of input":"'"+(this.terminals_[k]||k)+"'");this.parseError(v,{text:this.lexer.match,token:this.terminals_[k]||k,line:this.lexer.yylineno,loc:a,expected:m})}}if(l[0]instanceof Array&&l.length>1)throw Error("Parse Error: multiple actions possible at state: "+
o+", token: "+k);switch(l[0]){case 1:f.push(k);d.push(this.lexer.yytext);c.push(this.lexer.yylloc);f.push(l[1]);k=null;s?(k=s,s=null):(u=this.lexer.yyleng,t=this.lexer.yytext,g=this.lexer.yylineno,a=this.lexer.yylloc,r>0&&r--);break;case 2:m=this.productions_[l[1]][1];p.$=d[d.length-m];p._$={first_line:c[c.length-(m||1)].first_line,last_line:c[c.length-1].last_line,first_column:c[c.length-(m||1)].first_column,last_column:c[c.length-1].last_column};if(j)p._$.range=[c[c.length-(m||1)].range[0],c[c.length-
1].range[1]];o=this.performAction.call(p,t,u,g,this.yy,l[1],d,c);if(typeof o!=="undefined")return o;m&&(f=f.slice(0,m*-2),d=d.slice(0,-1*m),c=c.slice(0,-1*m));f.push(this.productions_[l[1]][0]);d.push(p.$);c.push(p._$);l=n[f[f.length-2]][f[f.length-1]];f.push(l);break;case 3:return!0}}return!0}},e=function(){return{EOF:1,parseError:function(a,b){if(this.yy.parser)this.yy.parser.parseError(a,b);else throw Error(a);},setInput:function(a){this._input=a;this._more=this._less=this.done=!1;this.yylineno=
this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges)this.yylloc.range=[0,0];this.offset=0;return this},input:function(){var a=this._input[0];this.yytext+=a;this.yyleng++;this.offset++;this.match+=a;this.matched+=a;a.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++;this.options.ranges&&this.yylloc.range[1]++;this._input=this._input.slice(1);
return a},unput:function(a){var b=a.length,e=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-b-1);this.offset-=b;a=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);e.length-1&&(this.yylineno-=e.length-1);var f=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:e?
(e.length===a.length?this.yylloc.first_column:0)+a[a.length-e.length].length-e[0].length:this.yylloc.first_column-b};if(this.options.ranges)this.yylloc.range=[f[0],f[0]+this.yyleng-b];return this},more:function(){this._more=!0;return this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;a.length<20&&(a+=this._input.substr(0,
20-a.length));return(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;if(!this._input)this.done=!0;var a,b,e;if(!this._more)this.match=this.yytext="";for(var f=this._currentRules(),d=0;d<f.length;d++)if((b=this._input.match(this.rules[f[d]]))&&(!a||b[0].length>a[0].length))if(a=b,e=d,!this.options.flex)break;if(a){(b=a[0].match(/(?:\r\n?|\n).*/g))&&
(this.yylineno+=b.length);this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:b?b[b.length-1].length-b[b.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+a[0].length};this.yytext+=a[0];this.match+=a[0];this.matches=a;this.yyleng=this.yytext.length;if(this.options.ranges)this.yylloc.range=[this.offset,this.offset+=this.yyleng];this._more=!1;this._input=this._input.slice(a[0].length);this.matched+=a[0];a=this.performAction.call(this,
this.yy,this,f[e],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input)this.done=!1;if(a)return a;else return}return this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return typeof a!=="undefined"?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-
1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)},options:{},performAction:function(a,b,e){switch(e){case 0:b.yytext.slice(-1)!=="\\"&&this.begin("mu");if(b.yytext.slice(-1)==="\\")b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu");if(b.yytext)return 14;break;case 1:return 14;case 2:b.yytext.slice(-1)!=="\\"&&this.popState();if(b.yytext.slice(-1)==="\\")b.yytext=b.yytext.substr(0,b.yyleng-1);return 14;case 3:return b.yytext=
b.yytext.substr(0,b.yyleng-4),this.popState(),15;case 4:return this.begin("par"),24;case 5:return 16;case 6:return 20;case 7:return 19;case 8:return 19;case 9:return 23;case 10:return 23;case 11:this.popState();this.begin("com");break;case 12:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 13:return 22;case 14:return 36;case 15:return 35;case 16:return 35;case 17:return 39;case 19:return this.popState(),18;case 20:return this.popState(),18;case 21:return b.yytext=b.yytext.substr(1,
b.yyleng-2).replace(/\\"/g,'"'),30;case 22:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\'/g,"'"),30;case 23:return b.yytext=b.yytext.substr(1),28;case 24:return 32;case 25:return 32;case 26:return 31;case 27:return 35;case 28:return b.yytext=b.yytext.substr(1,b.yyleng-2),35;case 29:return"INVALID";case 31:return this.popState(),37;case 32:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{>)/,/^(?:\{\{#)/,/^(?:\{\{\/)/,
/^(?:\{\{\^)/,/^(?:\{\{\s*else\b)/,/^(?:\{\{\{)/,/^(?:\{\{&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{)/,/^(?:=)/,/^(?:\.(?=[} ]))/,/^(?:\.\.)/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}\}\})/,/^(?:\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@[a-zA-Z]+)/,/^(?:true(?=[}\s]))/,/^(?:false(?=[}\s]))/,/^(?:[0-9]+(?=[}\s]))/,/^(?:[a-zA-Z0-9_$-]+(?=[=}\s\/.]))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:\s+)/,/^(?:[a-zA-Z0-9_$-/]+)/,/^(?:$)/],conditions:{mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,
19,20,21,22,23,24,25,26,27,28,29,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},par:{rules:[30,31],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}}}}();g.lexer=e;b.prototype=g;g.Parser=b;return new b}();Handlebars.Parser=handlebars;Handlebars.parse=function(b){if(b.constructor===Handlebars.AST.ProgramNode)return b;Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(b)};Handlebars.print=function(b){return(new Handlebars.PrintVisitor).accept(b)};
(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(b,g){this.type="program";this.statements=b;if(g)this.inverse=new Handlebars.AST.ProgramNode(g)};Handlebars.AST.MustacheNode=function(b,g,e){var a;this.type="mustache";this.escaped=!e;this.hash=g;e=this.id=b[0];a=this.params=b.slice(1),b=a;this.isHelper=(this.eligibleHelper=e.isSimple)&&(b.length||g)};Handlebars.AST.PartialNode=function(b,g){this.type="partial";this.partialName=b;this.context=g};Handlebars.AST.BlockNode=function(b,g,
e,a){var i=b.id;if(i.original!==a.original)throw new Handlebars.Exception(i.original+" doesn't match "+a.original);this.type="block";this.mustache=b;this.program=g;if((this.inverse=e)&&!this.program)this.isInverse=!0};Handlebars.AST.ContentNode=function(b){this.type="content";this.string=b};Handlebars.AST.HashNode=function(b){this.type="hash";this.pairs=b};Handlebars.AST.IdNode=function(b){this.type="ID";this.original=b.join(".");for(var g=[],e=0,a=0,i=b.length;a<i;a++){var h=b[a];if(h===".."||h===
"."||h==="this")if(g.length>0)throw new Handlebars.Exception("Invalid path: "+this.original);else h===".."?e++:this.isScoped=!0;else g.push(h)}this.parts=g;this.string=g.join(".");this.depth=e;this.isSimple=b.length===1&&!this.isScoped&&e===0;this.stringModeValue=this.string};Handlebars.AST.PartialNameNode=function(b){this.type="PARTIAL_NAME";this.name=b};Handlebars.AST.DataNode=function(b){this.type="DATA";this.id=b};Handlebars.AST.StringNode=function(b){this.type="STRING";this.stringModeValue=this.string=
b};Handlebars.AST.IntegerNode=function(b){this.type="INTEGER";this.integer=b;this.stringModeValue=Number(b)};Handlebars.AST.BooleanNode=function(b){this.type="BOOLEAN";this.bool=b;this.stringModeValue=b==="true"};Handlebars.AST.CommentNode=function(b){this.type="comment";this.comment=b}})();var errorProps=["description","fileName","lineNumber","message","name","number","stack"];
Handlebars.Exception=function(b){for(var g=Error.prototype.constructor.apply(this,arguments),e=0;e<errorProps.length;e++)this[errorProps[e]]=g[errorProps[e]]};Handlebars.Exception.prototype=Error();Handlebars.SafeString=function(b){this.string=b};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};
(function(){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},g=/[&<>"'`]/g,e=/[&<>"'`]/,a=function(a){return b[a]||"&amp;"};Handlebars.Utils={escapeExpression:function(b){if(b instanceof Handlebars.SafeString)return b.toString();else if(b==null||b===!1)return"";return!e.test(b)?b:b.replace(g,a)},isEmpty:function(a){return!a&&a!==0?!0:Object.prototype.toString.call(a)==="[object Array]"&&a.length===0?!0:!1}}})();Handlebars.Compiler=function(){};
Handlebars.JavaScriptCompiler=function(){};
(function(b,g){b.prototype={compiler:b,disassemble:function(){for(var d=this.opcodes,c,a=[],b,e,f=0,g=d.length;f<g;f++)if(c=d[f],c.opcode==="DECLARE")a.push("DECLARE "+c.name+"="+c.value);else{b=[];for(var i=0;i<c.args.length;i++)e=c.args[i],typeof e==="string"&&(e='"'+e.replace("\n","\\n")+'"'),b.push(e);a.push(c.opcode+" "+b.join(" "))}return a.join("\n")},equals:function(d){var c=this.opcodes.length;if(d.opcodes.length!==c)return!1;for(var a=0;a<c;a++){var b=this.opcodes[a],e=d.opcodes[a];if(b.opcode!==
e.opcode||b.args.length!==e.args.length)return!1;for(var f=0;f<b.args.length;f++)if(b.args[f]!==e.args[f])return!1}return!0},guid:0,compile:function(d,c){this.children=[];this.depths={list:[]};this.options=c;var a=this.options.knownHelpers;this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0};if(a)for(var b in a)this.options.knownHelpers[b]=a[b];return this.program(d)},accept:function(d){return this[d.type](d)},program:function(d){var d=d.statements,
c;this.opcodes=[];for(var a=0,b=d.length;a<b;a++)c=d[a],this[c.type](c);this.isSimple=b===1;this.depths.list=this.depths.list.sort(function(d,c){return d-c});return this},compileProgram:function(d){var d=(new this.compiler).compile(d,this.options),c=this.guid++,a;this.usePartial=this.usePartial||d.usePartial;this.children[c]=d;for(var b=0,e=d.depths.list.length;b<e;b++)a=d.depths.list[b],a<2||this.addDepth(a-1);return c},block:function(d){var c=d.mustache,a=d.program,d=d.inverse;a&&(a=this.compileProgram(a));
d&&(d=this.compileProgram(d));var b=this.classifyMustache(c);b==="helper"?this.helperMustache(c,a,d):b==="simple"?(this.simpleMustache(c),this.opcode("pushProgram",a),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousMustache(c,a,d),this.opcode("pushProgram",a),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue"));this.opcode("append")},hash:function(d){var d=d.pairs,c,a;this.opcode("pushHash");for(var b=0,e=d.length;b<
e;b++)c=d[b],a=c[1],this.options.stringParams?this.opcode("pushStringParam",a.stringModeValue,a.type):this.accept(a),this.opcode("assignToHash",c[0]);this.opcode("popHash")},partial:function(d){var c=d.partialName;this.usePartial=!0;d.context?this.ID(d.context):this.opcode("push","depth0");this.opcode("invokePartial",c.name);this.opcode("append")},content:function(d){this.opcode("appendContent",d.string)},mustache:function(d){var c=this.options,a=this.classifyMustache(d);a==="simple"?this.simpleMustache(d):
a==="helper"?this.helperMustache(d):this.ambiguousMustache(d);d.escaped&&!c.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousMustache:function(d,c,a){var d=d.id,b=d.parts[0],e=c!=null||a!=null;this.opcode("getContext",d.depth);this.opcode("pushProgram",c);this.opcode("pushProgram",a);this.opcode("invokeAmbiguous",b,e)},simpleMustache:function(d){d=d.id;d.type==="DATA"?this.DATA(d):d.parts.length?this.ID(d):(this.addDepth(d.depth),this.opcode("getContext",d.depth),this.opcode("pushContext"));
this.opcode("resolvePossibleLambda")},helperMustache:function(d,c,a){c=this.setupFullMustacheParams(d,c,a);d=d.id.parts[0];if(this.options.knownHelpers[d])this.opcode("invokeKnownHelper",c.length,d);else if(this.knownHelpersOnly)throw Error("You specified knownHelpersOnly, but used the unknown helper "+d);else this.opcode("invokeHelper",c.length,d)},ID:function(d){this.addDepth(d.depth);this.opcode("getContext",d.depth);d.parts[0]?this.opcode("lookupOnContext",d.parts[0]):this.opcode("pushContext");
for(var c=1,a=d.parts.length;c<a;c++)this.opcode("lookup",d.parts[c])},DATA:function(d){this.options.data=!0;this.opcode("lookupData",d.id)},STRING:function(d){this.opcode("pushString",d.string)},INTEGER:function(d){this.opcode("pushLiteral",d.integer)},BOOLEAN:function(d){this.opcode("pushLiteral",d.bool)},comment:function(){},opcode:function(d){this.opcodes.push({opcode:d,args:[].slice.call(arguments,1)})},declare:function(d,c){this.opcodes.push({opcode:"DECLARE",name:d,value:c})},addDepth:function(d){if(isNaN(d))throw Error("EWOT");
d!==0&&!this.depths[d]&&(this.depths[d]=!0,this.depths.list.push(d))},classifyMustache:function(d){var c=d.isHelper,a=d.eligibleHelper,b=this.options;a&&!c&&(b.knownHelpers[d.id.parts[0]]?c=!0:b.knownHelpersOnly&&(a=!1));return c?"helper":a?"ambiguous":"simple"},pushParams:function(d){for(var c=d.length,a;c--;)if(a=d[c],this.options.stringParams)a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",a.stringModeValue,a.type);else this[a.type](a)},setupMustacheParams:function(d){var a=
d.params;this.pushParams(a);d.hash?this.hash(d.hash):this.opcode("emptyHash");return a},setupFullMustacheParams:function(d,a,b){var e=d.params;this.pushParams(e);this.opcode("pushProgram",a);this.opcode("pushProgram",b);d.hash?this.hash(d.hash):this.opcode("emptyHash");return e}};var e=function(d){this.value=d};g.prototype={nameLookup:function(d,a){return/^[0-9]+$/.test(a)?d+"["+a+"]":g.isValidJavaScriptVariableName(a)?d+"."+a:d+"['"+a+"']"},appendToBuffer:function(d){return this.environment.isSimple?
"return "+d+";":{appendToBuffer:!0,content:d,toString:function(){return"buffer += "+d+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(d,a,b,e){this.environment=d;this.options=a||{};Handlebars.log(Handlebars.logger.DEBUG,this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!b;this.context=b||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=
[];this.inlineStack=[];this.compileChildren(d,a);d=d.opcodes;this.i=0;for(f=d.length;this.i<f;this.i++)a=d[this.i],a.opcode==="DECLARE"?this[a.name]=a.value:this[a.opcode].apply(this,a.args);return this.createFunctionContext(e)},nextOpcode:function(){return this.environment.opcodes[this.i+1]},eat:function(){this.i+=1},preamble:function(){var a=[];if(this.isChild)a.push("");else{var c=this.namespace,b="helpers = helpers || "+c+".helpers;";this.environment.usePartial&&(b=b+" partials = partials || "+
c+".partials;");this.options.data&&(b+=" data = data || {};");a.push(b)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer());this.lastContext=0;this.source=a},createFunctionContext:function(a){var c=this.stackVars.concat(this.registers.list);c.length>0&&(this.source[1]=this.source[1]+", "+c.join(", "));if(!this.isChild)for(var b in this.context.aliases)this.source[1]=this.source[1]+", "+b+"="+this.context.aliases[b];this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+
";");this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n");this.environment.isSimple||this.source.push("return buffer;");c=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];b=0;for(var e=this.environment.depths.list.length;b<e;b++)c.push("depth"+this.environment.depths.list[b]);b=this.mergeSource();if(!this.isChild)e=Handlebars.COMPILER_REVISION,b="this.compilerInfo = ["+e+",'"+Handlebars.REVISION_CHANGES[e]+"'];\n"+b;return a?(c.push(b),Function.apply(this,
c)):(a="function "+(this.name||"")+"("+c.join(",")+") {\n  "+b+"}",Handlebars.log(Handlebars.logger.DEBUG,a+"\n\n"),a)},mergeSource:function(){for(var a="",c,b=0,e=this.source.length;b<e;b++){var f=this.source[b];f.appendToBuffer?c=c?c+"\n    + "+f.content:f.content:(c&&(a+="buffer += "+c+";\n  ",c=void 0),a+=f+"\n  ")}return a},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);this.replaceStack(function(c){a.splice(1,
0,c);return"blockHelperMissing.call("+a.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=["depth0"];this.setupParams(0,a);var c=this.topStack();a.splice(1,0,c);a[a.length-1]="options";this.source.push("if (!"+this.lastHelper+") { "+c+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){this.flushInline();var a=this.popStack();
this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }");this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){if(this.lastContext!==a)this.lastContext=a},lookupOnContext:function(a){this.push(this.nameLookup("depth"+this.lastContext,a,"context"))},pushContext:function(){this.pushStackLiteral("depth"+
this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(a){return"typeof "+a+" === functionType ? "+a+".apply(depth0) : "+a})},lookup:function(a){this.replaceStack(function(c){return c+" == null || "+c+" === false ? "+c+" : "+this.nameLookup(c,a,"context")})},lookupData:function(a){this.push(this.nameLookup("data",a,"data"))},pushStringParam:function(a,c){this.pushStackLiteral("depth"+this.lastContext);this.pushString(c);typeof a===
"string"?this.pushString(a):this.pushStackLiteral(a)},emptyHash:function(){this.pushStackLiteral("{}");this.options.stringParams&&this.register("hashTypes","{}")},pushHash:function(){this.hash={values:[],types:[]}},popHash:function(){var a=this.hash;this.hash=void 0;this.options.stringParams&&this.register("hashTypes","{"+a.types.join(",")+"}");this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){this.inlineStack.push(a);
return a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){a!=null?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,c){this.context.aliases.helperMissing="helpers.helperMissing";var b=this.lastHelper=this.setupHelper(a,c,!0);this.push(b.name);this.replaceStack(function(a){return a+" ? "+a+".call("+b.callParams+") : helperMissing.call("+b.helperMissingParams+")"})},invokeKnownHelper:function(a,c){var b=this.setupHelper(a,
c);this.push(b.name+".call("+b.callParams+")")},invokeAmbiguous:function(a,c){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var b=this.setupHelper(0,a,c),e=this.lastHelper=this.nameLookup("helpers",a,"helper"),f=this.nameLookup("depth"+this.lastContext,a,"context"),g=this.nextStack();this.source.push("if ("+g+" = "+e+") { "+g+" = "+g+".call("+b.callParams+"); }");this.source.push("else { "+g+" = "+f+"; "+g+" = typeof "+g+" === functionType ? "+g+".apply(depth0) : "+g+
"; }")},invokePartial:function(a){a=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"];this.options.data&&a.push("data");this.context.aliases.self="this";this.push("self.invokePartial("+a.join(", ")+")")},assignToHash:function(a){var c=this.popStack(),b;this.options.stringParams&&(b=this.popStack(),this.popStack());var e=this.hash;b&&e.types.push("'"+a+"': "+b);e.values.push("'"+a+"': ("+c+")")},compiler:g,compileChildren:function(a,b){for(var e=a.children,f,
g,i=0,h=e.length;i<h;i++){f=e[i];g=new this.compiler;var j=this.matchExistingProgram(f);j==null?(this.context.programs.push(""),j=this.context.programs.length,f.index=j,f.name="program"+j,this.context.programs[j]=g.compile(f,b,this.context),this.context.environments[j]=f):(f.index=j,f.name="program"+j)}},matchExistingProgram:function(a){for(var b=0,e=this.context.environments.length;b<e;b++){var f=this.context.environments[b];if(f&&f.equals(a))return b}},programExpression:function(a){this.context.aliases.self=
"this";if(a==null)return"self.noop";for(var b=this.environment.children[a],a=b.depths.list,e=[b.index,b.name,"data"],f=0,g=a.length;f<g;f++)b=a[f],b===1?e.push("depth0"):e.push("depth"+(b-1));return a.length===0?"self.program("+e.join(", ")+")":(e.shift(),"self.programWithDepth("+e.join(", ")+")")},register:function(a,b){this.useRegister(a);this.source.push(a+" = "+b+";")},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new e(a))},
pushStack:function(a){this.flushInline();var b=this.incrStack();a&&this.source.push(b+" = "+a+";");this.compileStack.push(b);return b},replaceStack:function(a){var b="",f=this.isInline(),g;f?(g=this.popStack(!0),g instanceof e?g=g.value:(b="("+this.push(this.stackSlot?this.topStackName():this.incrStack())+" = "+g+"),",g=this.topStack())):g=this.topStack();a=a.call(this,g);f?((this.inlineStack.length||this.compileStack.length)&&this.popStack(),this.push("("+b+a+")")):(/^stack/.test(g)||(g=this.nextStack()),
this.source.push(g+" = ("+b+a+");"));return g},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot);return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,f=a.length;b<f;b++){var g=a[b];g instanceof e?this.compileStack.push(g):this.pushStack(g)}}},isInline:function(){return this.inlineStack.length},
popStack:function(a){var b=this.isInline(),f=(b?this.inlineStack:this.compileStack).pop();return!a&&f instanceof e?f.value:(b||this.stackSlot--,f)},topStack:function(a){var b=this.isInline()?this.inlineStack:this.compileStack,b=b[b.length-1];return!a&&b instanceof e?b.value:b},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'},setupHelper:function(a,b,e){var f=[];this.setupParams(a,f,e);a=this.nameLookup("helpers",b,"helper");
return{params:f,name:a,callParams:["depth0"].concat(f).join(", "),helperMissingParams:e&&["depth0",this.quotedString(b)].concat(f).join(", ")}},setupParams:function(a,b,e){var f=[],g=[],i=[],h,j;f.push("hash:"+this.popStack());h=this.popStack();if((j=this.popStack())||h){if(!j)this.context.aliases.self="this",j="self.noop";if(!h)this.context.aliases.self="this",h="self.noop";f.push("inverse:"+h);f.push("fn:"+j)}for(j=0;j<a;j++)h=this.popStack(),b.push(h),this.options.stringParams&&(i.push(this.popStack()),
g.push(this.popStack()));this.options.stringParams&&(f.push("contexts:["+g.join(",")+"]"),f.push("types:["+i.join(",")+"]"),f.push("hashTypes:hashTypes"));this.options.data&&f.push("data:data");f="{"+f.join(",")+"}";e?(this.register("options",f),b.push("options")):b.push(f);return b.join(", ")}};for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),
i=g.RESERVED_WORDS={},h=0,f=a.length;h<f;h++)i[a[h]]=!0;g.isValidJavaScriptVariableName=function(a){return!g.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);
Handlebars.precompile=function(b,g){if(!b||typeof b!=="string"&&b.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+b);g=g||{};if(!("data"in g))g.data=!0;var e=Handlebars.parse(b),e=(new Handlebars.Compiler).compile(e,g);return(new Handlebars.JavaScriptCompiler).compile(e,g)};
Handlebars.compile=function(b,g){if(!b||typeof b!=="string"&&b.constructor!==Handlebars.AST.ProgramNode)throw new Handlebars.Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+b);g=g||{};if(!("data"in g))g.data=!0;var e;return function(a,i){if(!e){var h=Handlebars.parse(b),h=(new Handlebars.Compiler).compile(h,g),h=(new Handlebars.JavaScriptCompiler).compile(h,g,void 0,!0);e=Handlebars.template(h)}return e.call(this,a,i)}};
Handlebars.VM={template:function(b){var g={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(b,a,g){var h=this.programs[b];return g?Handlebars.VM.program(a,g):(h||(h=this.programs[b]=Handlebars.VM.program(a)),h)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop,compilerInfo:null};return function(e,a){var a=a||{},i=b.call(g,Handlebars,e,a.helpers,a.partials,a.data),h=g.compilerInfo||[],f=h[0]||1,d=Handlebars.COMPILER_REVISION;
if(f!==d)if(f<d)throw"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+Handlebars.REVISION_CHANGES[d]+") or downgrade your runtime to an older version ("+Handlebars.REVISION_CHANGES[f]+").";else throw"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+h[1]+").";return i}},programWithDepth:function(b,g,e){var a=Array.prototype.slice.call(arguments,
2);return function(e,h){h=h||{};return b.apply(this,[e,h.data||g].concat(a))}},program:function(b,g){return function(e,a){a=a||{};return b(e,a.data||g)}},noop:function(){return""},invokePartial:function(b,g,e,a,i,h){a={helpers:a,partials:i,data:h};if(b===void 0)throw new Handlebars.Exception("The partial "+g+" could not be found");else if(b instanceof Function)return b(e,a);else if(Handlebars.compile)return i[g]=Handlebars.compile(b,{data:h!==void 0}),i[g](e,a);else throw new Handlebars.Exception("The partial "+
g+" could not be compiled when running in runtime-only mode");}};Handlebars.template=Handlebars.VM.template;
var Kindle = Kindle || {};Kindle.strings  = Kindle.strings || {};Kindle.strings['ja-JP']={"k_L_bad_download_Error_Text": "\u3053\u306e\u672c\u3092Kindle\u3067\u8aad\u3080\u306b\u306f\u3001\u30af\u30e9\u30a6\u30c9\u304b\u3089\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_L_bad_download_Error_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u958b\u304f\u3068\u304d\u306e\u30a8\u30e9\u30fc", "k_L_bookNotAvailable_Text": "\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u3092\u78ba\u8a8d\u3057\u3066\u304b\u3089\u3001\u3082\u3046\u4e00\u5ea6\u8a66\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_L_bookNotAvailable_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u8868\u793a\u3067\u304d\u307e\u305b\u3093", "k_L_cacheError": "\u30a2\u30d7\u30ea\u306e\u4fdd\u5b58\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u3001\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_cacheError_pad": "\u30a2\u30d7\u30ea\u306e\u4fdd\u5b58\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u3053\u3053\u3092\u30bf\u30c3\u30d7\u3057\u3066\u3001\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_cached": "&#x2713; \u30a2\u30d7\u30ea\u304c\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u306a\u308a\u307e\u3057\u305f", "k_L_caching": "\u30aa\u30d5\u30e9\u30a4\u30f3\u7528\u306b\u30a2\u30d7\u30ea\u3092\u4fdd\u5b58\u3057\u3066\u3044\u307e\u3059", "k_L_contact_us": "\u304a\u554f\u3044\u5408\u308f\u305b", "k_L_context_download_pin": "\u672c\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4fdd\u5b58\u3059\u308b", "k_L_context_pin": "\u672c\u3092\u4fdd\u5b58\u3059\u308b", "k_L_context_read": "\u672c\u3092\u958b\u304f", "k_L_context_remove": "\u672c\u3092\u524a\u9664", "k_L_context_revoke_sample": "\u30b5\u30f3\u30d7\u30eb\u3092\u524a\u9664", "k_L_deregister_title": "\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8", "k_L_dialog_delete": "\u524a\u9664", "k_L_dialog_deleteFreeTrial_prompt_text": "\u3053\u308c\u306b\u3088\u308a\u3001\u3053\u306e\u672c\u306f\u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089\u5b8c\u5168\u306b\u524a\u9664\u3055\u308c\u307e\u3059\u3002", "k_L_dialog_deleteFreeTrial_prompt_title": "\u7121\u6599\u30c8\u30e9\u30a4\u30a2\u30eb\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f", "k_L_dialog_delete_cancel": "\u30ad\u30e3\u30f3\u30bb\u30eb", "k_L_dialog_delete_prompt": "\u3053\u308c\u306b\u3088\u308a\u3001<i>${bookTitle}</i>\u306f\u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089\u5b8c\u5168\u306b\u524a\u9664\u3055\u308c\u307e\u3059\u3002", "k_L_dialog_delete_prompt_title": "\u30b5\u30f3\u30d7\u30eb\u3092\u524a\u9664\u3057\u307e\u3059\u304b?", "k_L_help": "\u30d8\u30eb\u30d7", "k_L_jp_merchandise_dialog_message": "\u671f\u9593\u9650\u5b9a\u3067\u3001\u4e0b\u8a18\u306e\u30de\u30f3\u30ac\u30bf\u30a4\u30c8\u30eb\u304b\u3089\u7121\u6599\u3067\u7ae0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u304f\u3060\u3055\u3044", "k_L_jp_merchandise_dialog_title": "\u671f\u9593\u9650\u5b9a\u306e\u7121\u6599\u30de\u30f3\u30ac", "k_L_legal_notices": "\u6cd5\u7684\u901a\u77e5", "k_L_loadFailedError_Text": "\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_loadFailedError_Title": "\u30e9\u30a4\u30d6\u30e9\u30ea\u306e\u8aad\u307f\u8fbc\u307f\u30a8\u30e9\u30fc", "k_L_openBookAsinNotSpecified_Text": "\u30bf\u30a4\u30c8\u30eb\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002", "k_L_openBookAsinNotSpecified_Title": "\u30bf\u30a4\u30c8\u30eb\u304c\u6307\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093", "k_L_openBookContentLicenseExceededError_Text": "\u3053\u306e\u30a2\u30a4\u30c6\u30e0\u3092\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u308b\u7aef\u672b\u6570\u306e\u5236\u9650\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u30a2\u30a4\u30c6\u30e0\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3059\u308b\u306b\u306f\u3001\u73fe\u5728\u4f7f\u7528\u3057\u3066\u3044\u306a\u3044\u7aef\u672b\u306e\u767b\u9332\u3092\u89e3\u9664\u3057\u3001\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u524a\u9664\u3057\u307e\u3059\u3002Kindle\u30b9\u30c8\u30a2\u304b\u3089\u5225\u306e\u30b3\u30d4\u30fc\u3092\u8cfc\u5165\u3059\u308b\u3053\u3068\u3082\u3067\u304d\u307e\u3059\u3002", "k_L_openBookContentLicenseExceededError_Title": "\u30e9\u30a4\u30bb\u30f3\u30b9\u306e\u5236\u9650\u3092\u8d85\u3048\u3066\u3044\u307e\u3059", "k_L_openBookContentLoanEndedError_Text": "\u3053\u306e\u672c\u3092\u958b\u3051\u307e\u305b\u3093\u3002\u8cb8\u3057\u51fa\u3057\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u307e\u3059\u3002", "k_L_openBookContentLoanEndedError_Title": "\u30bf\u30a4\u30c8\u30eb\u3092\u5229\u7528\u3067\u304d\u307e\u305b\u3093", "k_L_openBookContentLoanedError_Text": "\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u958b\u3051\u307e\u305b\u3093\u3002\u73fe\u5728\u8cb8\u3057\u51fa\u3057\u4e2d\u3067\u3059\u3002", "k_L_openBookContentLoanedError_Title": "\u30bf\u30a4\u30c8\u30eb\u5229\u7528\u4e0d\u53ef", "k_L_openBookContentRentalExpiredErrorMetro_Text": "\u3053\u306e\u672c\u306e\u30ec\u30f3\u30bf\u30eb\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u672c\u3092\u3082\u3046\u4e00\u5ea6\u30ec\u30f3\u30bf\u30eb\u307e\u305f\u306f\u8cfc\u5165\u3059\u308b\u5834\u5408\u306f\u3001Kindle\u30b9\u30c8\u30a2\u306b\u79fb\u52d5\u3057\u3066\u304f\u3060\u3055\u3044\u3002<br /><br />\u30ec\u30f3\u30bf\u30eb\u671f\u9650\u304c\u904e\u304e\u3066\u3082\u3001\u30cf\u30a4\u30e9\u30a4\u30c8\u3068\u30e1\u30e2\u306f${link}\u4e0a\u306b\u8a18\u9332\u3055\u308c\u3066\u3044\u307e\u3059\u3002", "k_L_openBookContentRentalExpiredErrorMetro_Title": "\u30ec\u30f3\u30bf\u30eb\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u307e\u3059", "k_L_openBookContentRentalExpiredError_Text": "\u3053\u306e\u672c\u306e\u30ec\u30f3\u30bf\u30eb\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u672c\u3092\u3082\u3046\u4e00\u5ea6\u30ec\u30f3\u30bf\u30eb\u307e\u305f\u306f\u8cfc\u5165\u3059\u308b\u306b\u306f\u3001\u300c\u5ef6\u9577\u307e\u305f\u306f\u8cfc\u5165\u300d\u30dc\u30bf\u30f3\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_L_openBookContentRentalExpiredError_Title": "\u30ec\u30f3\u30bf\u30eb\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u307e\u3059", "k_L_openBookContentUnsupportedErrorMetro_Text": "\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u306f\u3001Kindle for Windows 8\u3067\u306f\u3054\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002", "k_L_openBookContentUnsupportedErrorMetro_Title": "\u30bf\u30a4\u30c8\u30eb\u3092\u5229\u7528\u3067\u304d\u307e\u305b\u3093", "k_L_openBookContentUnsupportedError_Text": "\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u306f\u3001Kindle Cloud Reader\u3067\u306f\u3054\u5229\u7528\u3067\u304d\u307e\u305b\u3093\u3002", "k_L_openBookContentUnsupportedError_Title": "\u30bf\u30a4\u30c8\u30eb\u3092\u5229\u7528\u3067\u304d\u307e\u305b\u3093", "k_L_openBookContentUpgrade_ButtonText": "\u7d9a\u884c", "k_L_openBookContentUpgrade_Text": "\u3053\u306e\u672c\u306e\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u304c\u5165\u624b\u53ef\u80fd\u3067\u3059\u3002\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3\u306f\u3001\u672c\u3092\u8aad\u3093\u3067\u3044\u308b\u3068\u304d\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u307e\u3059\u3002", "k_L_openBookContentUpgrade_Title": "\u65b0\u3057\u3044\u30d0\u30fc\u30b8\u30e7\u30f3", "k_L_openBookGeoLocationNotAllowed_Text": "\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u306f\u3001\u3053\u306e\u56fd\u3067\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3002", "k_L_openBookGeoLocationNotAllowed_Title": "\u30bf\u30a4\u30c8\u30eb\u3092\u5229\u7528\u3067\u304d\u307e\u305b\u3093", "k_L_openBookLoadFailure_Text": "\u9078\u629e\u3057\u305f\u30a2\u30a4\u30c6\u30e0\u3092\u958b\u304f\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_openBookLoadFailure_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u958b\u304f\u3068\u304d\u306e\u30a8\u30e9\u30fc", "k_L_openBookNetworkError_Text": "\u9078\u629e\u3057\u305f\u30a2\u30a4\u30c6\u30e0\u3092\u958b\u304f\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_openBookNetworkError_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u958b\u304f\u3068\u304d\u306e\u30a8\u30e9\u30fc", "k_L_openBookSessionLimitExceededError_Text": "\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u3067\u8a31\u53ef\u3055\u308c\u3066\u3044\u308b\u540c\u6642\u30bb\u30c3\u30b7\u30e7\u30f3\u6570\u3092\u8d85\u3048\u3066\u3044\u307e\u3059\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_openBookSessionLimitExceededError_Title": "\u30bb\u30c3\u30b7\u30e7\u30f3\u306e\u5236\u9650\u3092\u8d85\u3048\u3066\u3044\u307e\u3059", "k_L_openBookTimeoutError_Text": "\u63a5\u7d9a\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_openBookTimeoutError_Title": "\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u63a5\u7d9a\u30a8\u30e9\u30fc", "k_L_outdatedChrome_Text": "\u3053\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u306eGoogle Chrome\u306f\u3001\u73fe\u5728\u306eChrome\u62e1\u5f35\u6a5f\u80fd\u5f62\u5f0f\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002\u30aa\u30d5\u30e9\u30a4\u30f3\u30b5\u30dd\u30fc\u30c8\u3092\u6709\u52b9\u306b\u3059\u308b\u306b\u306f\u3001${linkStart}Google Chrome\u3092\u66f4\u65b0${linkEnd}\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_L_outdatedChrome_Title": "\u30aa\u30d5\u30e9\u30a4\u30f3\u30b5\u30dd\u30fc\u30c8\u3092\u6709\u52b9\u306b\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093", "k_L_privacy": "\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc", "k_L_progress_dialog_message": "\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u306f\u300c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f\u300d\u306b\u4fdd\u5b58\u3055\u308c\u3001\u524a\u9664\u3059\u308b\u307e\u3067\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u300c\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f\u300d\u306b\u306f\u6700\u8fd1\u958b\u3044\u305f\u672c\u3082\u81ea\u52d5\u7684\u306b\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3055\u308c\u3001\u7a7a\u304d\u5bb9\u91cf\u304c\u5fc5\u8981\u306b\u306a\u308b\u307e\u3067\u4fdd\u6301\u3055\u308c\u307e\u3059\u3002", "k_L_progress_dialog_title": "\u672c\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u4fdd\u5b58\u3059\u308b", "k_L_removeBookError_Text": "\u9078\u629e\u3057\u305f\u30a2\u30a4\u30c6\u30e0\u306e\u524a\u9664\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u6d88\u53bb\u3059\u308b\u306b\u306f\u3001\u300c\u8a2d\u5b9a\u300d\u30e1\u30cb\u30e5\u30fc\u306e\u300c\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u300d\u3092\u9078\u629e\u3057\u307e\u3059\u3002", "k_L_removeBookError_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u524a\u9664\u30a8\u30e9\u30fc", "k_L_removeBookNetworkError_Text": "\u9078\u629e\u3057\u305f\u30a2\u30a4\u30c6\u30e0\u306e\u524a\u9664\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_removeBookNetworkError_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u524a\u9664\u30a8\u30e9\u30fc", "k_L_revokeFailed_Text": "\u3053\u306e\u64cd\u4f5c\u3092\u884c\u3046\u306b\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3078\u306e\u63a5\u7d9a\u304c\u5fc5\u8981\u3067\u3059\u3002", "k_L_revokeFailed_Title": "\u672c\u3092\u524a\u9664\u3067\u304d\u307e\u305b\u3093", "k_L_sample_badge_text": "\u30b5\u30f3\u30d7\u30eb", "k_L_saveBookOutOfSpace_Text": "\u3053\u306e\u30a2\u30a4\u30c6\u30e0\u3092\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u8aad\u3080\u305f\u3081\u306e\u5341\u5206\u306a\u7a7a\u304d\u9818\u57df\u304c\u3042\u308a\u307e\u305b\u3093\u3002\u30aa\u30f3\u30e9\u30a4\u30f3\u3067\u8aad\u3080\u304b\u3001\u65e2\u5b58\u306e\u30bf\u30a4\u30c8\u30eb\u3092\u524a\u9664\u3057\u3066\u7a7a\u304d\u9818\u57df\u3092\u5897\u3084\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001${linkStart}\u3053\u3053${linkEnd}\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_L_saveBookOutOfSpace_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u4fdd\u5b58\u30a8\u30e9\u30fc", "k_L_sort_author": "\u4e26\u3079\u66ff\u3048: \u8457\u8005", "k_L_sort_author_label": "\u8457\u8005", "k_L_sort_recent": "\u4e26\u3079\u66ff\u3048: \u6700\u8fd1", "k_L_sort_recent_label": "\u6700\u8fd1", "k_L_sort_title": "\u4e26\u3079\u66ff\u3048: \u30bf\u30a4\u30c8\u30eb", "k_L_sort_title_label": "\u30bf\u30a4\u30c8\u30eb", "k_L_storeNotAvailable_Text": "Kindle\u30b9\u30c8\u30a2\u3067\u8cb7\u3044\u7269\u3092\u3059\u308b\u306b\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3078\u306e\u63a5\u7d9a\u304c\u5fc5\u8981\u3067\u3059\u3002", "k_L_storeNotAvailable_Title": "\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3057\u3066\u3044\u307e\u305b\u3093", "k_L_syncFailedError_Text": "\u540c\u671f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_syncFailedError_Title": "\u540c\u671f\u304c\u5931\u6557\u3057\u307e\u3057\u305f", "k_L_syncFailedOfflineError_Text": "\u30e9\u30a4\u30d6\u30e9\u30ea\u3092\u540c\u671f\u3059\u308b\u306b\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3078\u306e\u63a5\u7d9a\u304c\u5fc5\u8981\u3067\u3059\u3002", "k_L_syncFailedOfflineError_Title": "\u540c\u671f\u304c\u5931\u6557\u3057\u307e\u3057\u305f", "k_L_terms_of_use": "\u5229\u7528\u898f\u7d04", "k_L_text_me_wdiget_Instruction": "\u7121\u6599\u30a2\u30d7\u30ea\u306e\u5165\u624b\u65b9\u6cd5\u3092\u78ba\u8a8d\u3059\u308b\u306b\u306f\u3001E\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "k_L_text_me_widget_Text": "\u3053\u306e\u672c\u306f<b>Kindle Cloud Reader</b>\u3067\u306f\u958b\u3051\u307e\u305b\u3093\u3002<br>\u7121\u6599\u306eKindle\u30a2\u30d7\u30ea\u3092\u3054\u5229\u7528\u304f\u3060\u3055\u3044\u3002", "k_L_toolbar_cloud_button": "\u30af\u30e9\u30a6\u30c9\u306e\u30b3\u30f3\u30c6\u30f3\u30c4", "k_L_toolbar_cloud_button_tooltip": "\u30af\u30e9\u30a6\u30c9\u306e\u30b3\u30f3\u30c6\u30f3\u30c4", "k_L_toolbar_cloud_label": "\u30af\u30e9\u30a6\u30c9", "k_L_toolbar_cloud_label_tooltip": "\u30af\u30e9\u30a6\u30c9", "k_L_toolbar_cover_slider": "\u8868\u7d19\u306e\u30b5\u30a4\u30ba", "k_L_toolbar_cover_slider_tooltip": "\u8868\u7d19\u306e\u30b5\u30a4\u30ba", "k_L_toolbar_downloaded_button": "\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4", "k_L_toolbar_downloaded_button_tooltip": "\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4", "k_L_toolbar_downloaded_label": "\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f", "k_L_toolbar_downloaded_label_tooltip": "\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f", "k_L_toolbar_grid_button": "\u30b0\u30ea\u30c3\u30c9\u8868\u793a", "k_L_toolbar_grid_button_tooltip": "\u30b0\u30ea\u30c3\u30c9\u8868\u793a", "k_L_toolbar_list_button": "\u30ea\u30b9\u30c8\u8868\u793a", "k_L_toolbar_list_button_tooltip": "\u30ea\u30b9\u30c8\u8868\u793a", "k_L_toolbar_manage_button": "\u7ba1\u7406", "k_L_toolbar_manage_button_tooltip": "\u7ba1\u7406", "k_L_toolbar_notebook_button": "\u30e1\u30e2\u3068\u30cf\u30a4\u30e9\u30a4\u30c8", "k_L_toolbar_notebook_button_tooltip": "\u30e1\u30e2\u3068\u30cf\u30a4\u30e9\u30a4\u30c8", "k_L_toolbar_search_button": "\u691c\u7d22", "k_L_toolbar_search_button_tooltip": "\u691c\u7d22", "k_L_toolbar_sort_button": "\u4e26\u3079\u66ff\u3048", "k_L_toolbar_sort_button_tooltip": "\u4e26\u3079\u66ff\u3048", "k_L_toolbar_store_button": "Kindle\u30b9\u30c8\u30a2", "k_L_toolbar_store_button_tooltip": "Kindle\u30b9\u30c8\u30a2", "k_L_toolbar_sync_button": "\u540c\u671f", "k_L_toolbar_sync_button_tooltip": "\u540c\u671f", "k_L_trial_badge_text": "\u30c8\u30e9\u30a4\u30a2\u30eb", "k_L_unknownError_Text": "\u9078\u629e\u3057\u305f\u30a2\u30a4\u30c6\u30e0\u3092\u958b\u304f\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_L_unknownError_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u958b\u304f\u3068\u304d\u306e\u30a8\u30e9\u30fc", "k_RWIS_banner_message_desktop": "\u5f8c\u304b\u3089\u8aad\u3080\u306b\u306f\u3001${bookmarkCommand}\u3092\u62bc\u3057\u3066\u3053\u306e\u30da\u30fc\u30b8\u3092\u30d6\u30c3\u30af\u30de\u30fc\u30af\u306b\u8ffd\u52a0\u3059\u308b\u304b\u3001\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u307e\u305f\u306f\u30bf\u30d6\u30ec\u30c3\u30c8\u7528\u306e${getAppStart}\u7121\u6599\u30a2\u30d7\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059${getAppEnd}\u3002", "k_RWIS_banner_message_ipad": "\u5f8c\u3067\u8aad\u3080\u306b\u306f\u3001${getIPadAppStart}\u7121\u6599\u306eiPad\u30a2\u30d7\u30ea${getIPadAppEnd}\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3059\u3002", "k_R_annotation_pane_bookmark_label": "\u30d6\u30c3\u30af\u30de\u30fc\u30af", "k_R_annotation_pane_cancel": "\u30ad\u30e3\u30f3\u30bb\u30eb", "k_R_annotation_pane_delete": "\u524a\u9664", "k_R_annotation_pane_delete_confirm": "\u524a\u9664\u3057\u307e\u3059\u304b?", "k_R_annotation_pane_dont_delete": "\u524a\u9664\u3057\u306a\u3044", "k_R_annotation_pane_edit": "\u30e1\u30e2\u3092\u7de8\u96c6", "k_R_annotation_pane_empty_note": "\u3053\u306e\u672c\u306b\u306f\u30e1\u30e2\u3068\u30d6\u30c3\u30af\u30de\u30fc\u30af\u304c\u3042\u308a\u307e\u305b\u3093\u3002", "k_R_annotation_pane_goto": "\u6307\u5b9a\u306e\u4f4d\u7f6eNo.\u306b\u79fb\u52d5", "k_R_annotation_pane_next": "\u30af\u30ea\u30c3\u30af\u3057\u3066\u6b21\u3078\u79fb\u52d5", "k_R_annotation_pane_no": "\u3044\u3044\u3048", "k_R_annotation_pane_note_highlight": "\u30cf\u30a4\u30e9\u30a4\u30c8", "k_R_annotation_pane_note_label": "\u30e1\u30e2", "k_R_annotation_pane_notes_location": "\u4f4d\u7f6eNo.${location}", "k_R_annotation_pane_notes_page": "${page}\u30da\u30fc\u30b8", "k_R_annotation_pane_previous": "\u30af\u30ea\u30c3\u30af\u3057\u3066\u524d\u3078\u79fb\u52d5", "k_R_annotation_pane_save": "\u30e1\u30e2\u3092\u4fdd\u5b58", "k_R_annotation_pane_yes": "\u306f\u3044", "k_R_beginning_title": "\u6700\u521d\u306e\u30da\u30fc\u30b8\u306b\u623b\u308b", "k_R_book_extras_title": "\u30d6\u30c3\u30af\u30a8\u30af\u30b9\u30c8\u30e9", "k_R_context_createHighlight": "\u30cf\u30a4\u30e9\u30a4\u30c8", "k_R_context_createNote": "\u30e1\u30e2", "k_R_context_deleteHighlight": "\u30cf\u30a4\u30e9\u30a4\u30c8\u3092\u524a\u9664", "k_R_context_editNote": "\u30e1\u30e2\u3092\u7de8\u96c6", "k_R_cover_title": "\u8868\u7d19", "k_R_dialog_annotation_pane_title": "\u30e1\u30e2\u3068\u30d6\u30c3\u30af\u30de\u30fc\u30af", "k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550": "\u30e1\u30e2\u3068\u30cf\u30a4\u30e9\u30a4\u30c8", "k_R_dialog_editNote_cancel": "\u30ad\u30e3\u30f3\u30bb\u30eb", "k_R_dialog_editNote_delete": "\u524a\u9664", "k_R_dialog_editNote_placeholder": "\u3053\u3053\u306b\u30e1\u30e2\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044", "k_R_dialog_editNote_save": "\u4fdd\u5b58", "k_R_dialog_editNote_title_create": "\u30e1\u30e2\u3092\u4f5c\u6210", "k_R_dialog_editNote_title_edit": "\u30e1\u30e2\u3092\u7de8\u96c6", "k_R_dialog_sitb_message_indexing": "\u672c\u3092\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u767b\u9332\u3057\u3066\u3044\u307e\u3059\u3002\u5c11\u3057\u6642\u9593\u304c\u304b\u304b\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002", "k_R_dialog_sitb_pane_title_indexing": "\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u767b\u9332\u4e2d...", "k_R_dialog_sitb_pane_title_notAvailable": "\u691c\u7d22\u3067\u304d\u307e\u305b\u3093", "k_R_dialog_sitb_pane_title_oneResultFound": "${numberResults}\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "k_R_dialog_sitb_pane_title_resultsFound": "${numberResults}\u4ef6\u898b\u3064\u304b\u308a\u307e\u3057\u305f", "k_R_dialog_sitb_pane_title_searching": "\u691c\u7d22\u4e2d...", "k_R_dialog_sitb_result_current_location": "\u73fe\u5728\u306e\u4f4d\u7f6eNo.\u306f${location}\u3067\u3059", "k_R_dialog_sitb_result_current_location_past": "\u524d\u56de\u306e\u4f4d\u7f6eNo.\u306f${location}\u3067\u3059", "k_R_dialog_sitb_result_current_page": "\u73fe\u5728\u306e\u30da\u30fc\u30b8\u306f${page}\u3067\u3059", "k_R_dialog_sitb_result_current_page_past": "\u524d\u56de\u306e\u30da\u30fc\u30b8\u306f ${page}\u30da\u30fc\u30b8\u3067\u3059", "k_R_dialog_sitb_result_location": "\u4f4d\u7f6eNo.${location}", "k_R_dialog_sitb_result_page": "${page}\u30da\u30fc\u30b8", "k_R_dialog_unoptimizedFormat_close": "\u672c\u3092\u9589\u3058\u308b", "k_R_dialog_unoptimizedFormat_continue": "\u305d\u306e\u307e\u307e\u7d9a\u884c", "k_R_dialog_unoptimizedFormat_message": "\u3053\u306e\u672c\u306f\u3001\u3053\u306e\u7aef\u672b\u3067\u306eKindle Cloud Reader\u7528\u306b\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u3053\u306e\u30a2\u30a4\u30c6\u30e0\u3092\u8aad\u3080\u306b\u306f\u3001${linkStart}Kindle for iPad${linkEnd}\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_dialog_unoptimizedFormat_metro_message": "\u3053\u306e\u672c\u306f\u3001Kindle for Windows 8\u7528\u306b\u6700\u9069\u5316\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002", "k_R_dialog_unoptimizedFormat_stopSave": "\u30ad\u30e3\u30f3\u30bb\u30eb", "k_R_dialog_unoptimizedFormat_title": "\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u30b3\u30f3\u30c6\u30f3\u30c4", "k_R_dialog_upgrade_btn": "\u4eca\u3059\u3050\u66f4\u65b0", "k_R_dialog_upgrade_countryBlk_btn": "Windows\u30b9\u30c8\u30a2\u306b\u79fb\u52d5", "k_R_dialog_upgrade_countryBlk_msg": "\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002\u304a\u4f7f\u3044\u306eKindle\u306f\u3053\u306e\u5730\u57df\u307e\u305f\u306f\u8a00\u8a9e\u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u3066\u3044\u307e\u305b\u3093\u3002<br/>Windows\u30b9\u30c8\u30a2\u3067\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u304c\u5165\u624b\u53ef\u80fd\u304b\u3069\u3046\u304b\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_dialog_upgrade_countryBlk_title": "\u304a\u4f4f\u307e\u3044\u306e\u5730\u57df\u3067\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u308bKindle", "k_R_dialog_upgrade_langSupport_btn": "\u4eca\u3059\u3050\u66f4\u65b0", "k_R_dialog_upgrade_langSupport_msg": "\u8aad\u66f8\u3092\u59cb\u3081\u308b\u524d\u306b\u3001\u3053\u306e\u8a00\u8a9e\u74b0\u5883\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u305f\u3081\u306e\u7121\u6599\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002", "k_R_dialog_upgrade_langSupport_title": "\u66f4\u65b0\u304c\u4f7f\u7528\u53ef\u80fd", "k_R_dialog_upgrade_msg": " \u8aad\u66f8\u3092\u59cb\u3081\u308b\u524d\u306b\u3001\u3059\u3079\u3066\u306e\u6700\u65b0\u6a5f\u80fd\u3092\u30b5\u30dd\u30fc\u30c8\u3059\u308b\u305f\u3081\u306e\u7121\u6599\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u3092\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002", "k_R_dialog_upgrade_title": "\u30a2\u30c3\u30d7\u30c7\u30fc\u30c8\u7248\u304c\u5165\u624b\u53ef\u80fd\u3067\u3059", "k_R_dictionary_labels_Derivatives": "\u6d3e\u751f\u54c1", "k_R_dictionary_labels_Ipa": "IPA", "k_R_dictionary_labels_Notes": "\u30e1\u30e2", "k_R_dictionary_labels_Origin": "\u539f\u6587", "k_R_dictionary_labels_Phrases": "\u53e5", "k_R_dictionary_labels_Usage": "\u7528\u9014", "k_R_dictionary_loading": "\u8aad\u307f\u8fbc\u307f\u4e2d", "k_R_dictionary_not_available": "\u5229\u7528\u3067\u304d\u308b\u8f9e\u66f8\u304c\u3042\u308a\u307e\u305b\u3093\u3002", "k_R_dictionary_not_found": "\u4e00\u81f4\u3059\u308b\u7d50\u679c\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002", "k_R_dictionary_offline": "\u8f9e\u66f8\u306f\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3057\u3066\u3044\u308b\u3068\u304d\u306b\u4f7f\u7528\u3067\u304d\u307e\u3059\u3002", "k_R_dictionary_view_full": "\u5168\u6587\u8868\u793a", "k_R_dictionary_view_full_i18n": "\u5168\u6587", "k_R_download_disk_error": "\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f: ${percent}\uff08<a href=\\\"${url}\\\" target=\\\"_blank\\\" id=\\\"kindleReader_download_disk_error\\\">\u30d6\u30e9\u30a6\u30b6\u306e\u30b9\u30c8\u30ec\u30fc\u30b8\u304c\u3044\u3063\u3071\u3044\u3067\u3059</a>\uff09", "k_R_download_network_error": "\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u304c\u505c\u6b62\u3057\u307e\u3057\u305f: ${percent}(\u30a8\u30e9\u30fc)", "k_R_downloaded": "${percent}%\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u307e\u3057\u305f", "k_R_downloading": "\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u4e2d: ${percent}%", "k_R_embedded_logo_tooltip": "Kindle Cloud Reader\u3092\u65b0\u3057\u3044\u30bf\u30d6\u3067\u958b\u304f", "k_R_feature_not_available_dialog_buy_btn": "\u5b8c\u5168\u7248\u3092\u8cfc\u5165", "k_R_feature_not_available_dialog_text": "\u3053\u306e\u6a5f\u80fd\u306f\u3001\u672c\u306e\u5b8c\u5168\u7248\u3067\u6709\u52b9\u306b\u306a\u308a\u307e\u3059\u3002", "k_R_feature_not_available_dialog_title": "\u3053\u306e\u6a5f\u80fd\u306f\u5229\u7528\u3067\u304d\u307e\u305b\u3093", "k_R_goto_bookmark_title": "\u30d6\u30c3\u30af\u30de\u30fc\u30af...", "k_R_goto_dialog_error": "\u6709\u52b9\u306a\u4f4d\u7f6eNo.\uff08${minLocation}\uff5e${maxLocation}\uff09\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_goto_dialog_error_snapview": "\u6709\u52b9\u306a\u4f4d\u7f6eNo.\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_goto_dialog_location_range": "\uff08${minLocation}\uff5e${maxLocation}\uff09", "k_R_goto_dialog_page_range": "${range}", "k_R_goto_location_title": "\u4f4d\u7f6eNo....", "k_R_goto_menu_goto_button": "\u6307\u5b9a\u306e\u4f4d\u7f6eNo.\u306b\u79fb\u52d5", "k_R_goto_menu_goto_location": "/${lastLocation}", "k_R_goto_menu_goto_location_metro_title": "\u4f4d\u7f6eNo.\u3092\u5165\u529b", "k_R_goto_menu_goto_location_title": "\u4f4d\u7f6eNo.\u3092\u5165\u529b", "k_R_goto_menu_goto_message": "\u4f4d\u7f6eNo. ", "k_R_goto_menu_goto_page": "/${lastPage}", "k_R_goto_menu_goto_page_button": "\u6307\u5b9a\u306e\u30da\u30fc\u30b8\u306b\u79fb\u52d5", "k_R_goto_menu_goto_page_message": "\u30da\u30fc\u30b8 ", "k_R_goto_menu_goto_page_title": "\u30da\u30fc\u30b8\u3092\u5165\u529b", "k_R_goto_menu_goto_page_title_metro": "\u30da\u30fc\u30b8\u3092\u5165\u529b", "k_R_goto_menu_title": "\u79fb\u52d5", "k_R_goto_page_dialog_error": "\u6709\u52b9\u306a\u30da\u30fc\u30b8${range}\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_goto_page_dialog_error_snapview": "\u6709\u52b9\u306a\u30da\u30fc\u30b8\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_goto_page_title": "\u30da\u30fc\u30b8...", "k_R_menuButton_back": "\u623b\u308b", "k_R_menuButton_back_tooltip": "\u623b\u308b", "k_R_menuButton_bookmark": "\u30d6\u30c3\u30af\u30de\u30fc\u30af", "k_R_menuButton_bookmark_tooltip": "\u30d6\u30c3\u30af\u30de\u30fc\u30af\u3092\u5207\u308a\u66ff\u3048\u308b", "k_R_menuButton_columnMode": "\u5217", "k_R_menuButton_columnMode_tooltip": "\u5217\u3092\u5207\u308a\u66ff\u3048\u308b", "k_R_menuButton_controlPane": "\u8868\u793a", "k_R_menuButton_controlPane_tooltip": "\u8a2d\u5b9a\u3092\u8868\u793a", "k_R_menuButton_enterImmersive_tooltip": "\u6ca1\u5165\u578b\u8aad\u66f8\u30e2\u30fc\u30c9\u306b\u79fb\u884c", "k_R_menuButton_exitImmersive_tooltip": "\u6ca1\u5165\u578b\u8aad\u66f8\u30e2\u30fc\u30c9\u3092\u7d42\u4e86", "k_R_menuButton_goto": "\u79fb\u52d5", "k_R_menuButton_goto_tooltip": "\u30e1\u30cb\u30e5\u30fc\u306b\u79fb\u52d5", "k_R_menuButton_notesAndMarks": "\u30e1\u30e2/\u30d6\u30c3\u30af\u30de\u30fc\u30af", "k_R_menuButton_notesAndMarks_tooltip": "\u30e1\u30e2\u3068\u30d6\u30c3\u30af\u30de\u30fc\u30af\u3092\u8868\u793a", "k_R_menuButton_pin_start_metro": "\u30b9\u30bf\u30fc\u30c8\u753b\u9762\u306b\u4fdd\u5b58\u3059\u308b", "k_R_menuButton_pin_start_metro_tooltip": "\u30b9\u30bf\u30fc\u30c8\u753b\u9762\u306b\u4fdd\u5b58\u3059\u308b", "k_R_menuButton_sync": "\u540c\u671f", "k_R_menuButton_sync_tooltip": "\u540c\u671f", "k_R_menuInput_sitb_placeholder": "\u691c\u7d22", "k_R_pageArrow_next": "\u6b21\u306e\u30da\u30fc\u30b8", "k_R_pageArrow_prev": "\u524d\u306e\u30da\u30fc\u30b8", "k_R_pageLoadError_Text": "\u6b21\u306e\u30da\u30fc\u30b8\u306e\u8aad\u307f\u8fbc\u307f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_R_pageLoadError_Title": "\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u8aad\u307f\u8fbc\u307f\u30a8\u30e9\u30fc", "k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550": "\u30b9\u30af\u30ea\u30fc\u30f3 \u30ea\u30fc\u30c0\u30fc \u30b5\u30dd\u30fc\u30c8\u306f\u3001\u73fe\u5728\u3054\u5229\u7528\u306b\u306a\u308c\u307e\u305b\u3093\u3002\u30b9\u30af\u30ea\u30fc\u30f3 \u30ea\u30fc\u30c0\u30fc\u3092\u4f7f\u7528\u3057\u3066\u8aad\u3080\u306b\u306f\u3001\u7aef\u672b\u306e Kindle \u30a2\u30d7\u30ea\u306b\u5207\u308a\u66ff\u3048\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_search_placeholder": "\u672c\u306e\u4e2d\u3092\u691c\u7d22", "k_R_settings_apply_button": "\u8a2d\u5b9a\u3092\u9069\u7528", "k_R_settings_colorMode_black": "\u9ed2", "k_R_settings_colorMode_label": "\u30ab\u30e9\u30fc\u30e2\u30fc\u30c9", "k_R_settings_colorMode_label_metro": "\u30ab\u30e9\u30fc\u30e2\u30fc\u30c9", "k_R_settings_colorMode_sepia": "\u30bb\u30d4\u30a2", "k_R_settings_colorMode_white": "\u767d", "k_R_settings_column_disabled_msg": "\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u306f\u30011\u5217\u3067\u306e\u8aad\u66f8\u306e\u307f\u304c\u53ef\u80fd\u3067\u3059\u3002", "k_R_settings_column_off_button": "\u30aa\u30d5", "k_R_settings_column_on_button": "\u30aa\u30f3", "k_R_settings_fontSize_label": "\u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba", "k_R_settings_fontSize_label_metro": "\u30d5\u30a9\u30f3\u30c8\u30b5\u30a4\u30ba", "k_R_settings_fontSize_tooltip_metro": "Aa", "k_R_settings_margins_label": "\u4f59\u767d", "k_R_settings_margins_label_metro": "\u4f59\u767d", "k_R_settings_multiColumnMode_label": "1\u5217\u306e\u307f", "k_R_settings_multiColumnMode_label_metro": "1\u5217\u306e\u307f", "k_R_settings_sampleText": "\u30a8\u30de\u30fb\u30a6\u30c3\u30c9\u30cf\u30a6\u30b9\u306f\u3001\u9854\u7acb\u3061\u304c\u6574\u3063\u305f\u8061\u660e\u3067\u88d5\u798f\u306a\u5973\u6027\u3060\u3063\u305f\u3002\u5feb\u9069\u306a\u4f4f\u5c45\u3092\u6301\u3061\u3001\u6717\u3089\u304b\u306a\u6027\u683c\u3067\u3001\u3053\u306e\u4e16\u306e\u795d\u798f\u3092\u4e00\u8eab\u306b\u53d7\u3051\u3066\u3044\u308b\u3088\u3046\u306b\u601d\u308f\u308c\u305f\u3002\u751f\u3092\u53d7\u3051\u3066\u304b\u308921\u5e74\u9593\u3001\u60a9\u307f\u3084\u5fc3\u914d\u4e8b\u3068\u306f\u307b\u307c\u7121\u7e01\u306e\u5b58\u5728\u3060\u3063\u305f\u3002", "k_R_settings_showLocation_label": "\u8aad\u66f8\u306e\u4f4d\u7f6eNo.\u3092\u8868\u793a", "k_R_settings_showLocation_label_metro": "\u8aad\u66f8\u306e\u4f4d\u7f6eNo.\u3092\u8868\u793a", "k_R_settings_title_metro": "\u8868\u793a\u30aa\u30d7\u30b7\u30e7\u30f3", "k_R_show_database_title": "\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\u3092\u8868\u793a", "k_R_sitb_error_common_message": "\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_R_sitb_error_common_title": "\u691c\u7d22\u304c\u5b8c\u4e86\u3057\u307e\u305b\u3093\u3067\u3057\u305f", "k_R_sitb_error_index_not_available_message": "\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002\u3053\u306e\u672c\u3067\u306f\u3001\u691c\u7d22\u304c\u307e\u3060\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_R_sitb_error_index_not_available_title": "\u691c\u7d22\u304c\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093", "k_R_sitb_error_language_not_supported_message": "\u3053\u306e\u8a00\u8a9e\u306f\u73fe\u5728\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u306a\u3044\u305f\u3081\u3001\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u3067\u306f\u691c\u7d22\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3002\u73fe\u5728Amazon Kindle\u30c1\u30fc\u30e0\u306f\u3001\u3053\u306e\u554f\u984c\u306e\u89e3\u6c7a\u306b\u53d6\u308a\u7d44\u3093\u3067\u3044\u307e\u3059\u3002", "k_R_sitb_error_language_not_supported_title": "\u691c\u7d22\u304c\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093", "k_R_sitb_error_language_undefined_message": "\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u306e\u30a4\u30f3\u30c7\u30c3\u30af\u30b9\u306e\u751f\u6210\u4e2d\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u305f\u305f\u3081\u3001\u3053\u306e\u30bf\u30a4\u30c8\u30eb\u3067\u306f\u691c\u7d22\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093\u3002", "k_R_sitb_error_language_undefined_title": "\u691c\u7d22\u304c\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093", "k_R_sitb_error_offline_message": "\u3053\u306e\u64cd\u4f5c\u3092\u5b8c\u4e86\u3059\u308b\u306b\u306f\u3001\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u3078\u306e\u63a5\u7d9a\u304c\u5fc5\u8981\u3067\u3059\u3002\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u63a5\u7d9a\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_sitb_error_offline_title": "\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306b\u63a5\u7d9a\u3057\u3066\u3044\u307e\u305b\u3093", "k_R_slider_loc_popup": "\u4f4d\u7f6eNo.${location}", "k_R_slider_location": "\u4f4d\u7f6eNo.${location}/${totalLocations}", "k_R_slider_location_popup": "\u4f4d\u7f6eNo.${location}", "k_R_slider_pageNumber": "${page}/${totalPages}\u30da\u30fc\u30b8", "k_R_slider_pageNumber_popup": "${page}\u30da\u30fc\u30b8", "k_R_slider_percentage": "${percent}%", "k_R_syncPosition_PN_labelText": "\u73fe\u5728${currentPage}\u30da\u30fc\u30b8\u3092\u958b\u3044\u3066\u3044\u307e\u3059\u3002${date} ${time}\u306b${deviceName}\u3067${page}\u30da\u30fc\u30b8\u307e\u3067\u8aad\u307f\u7d42\u3048\u3066\u3044\u307e\u3059\u3002\u6b21\u306e\u3044\u305a\u308c\u304b\u306e\u64cd\u4f5c\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_syncPosition_alreadyFurthest_Text": "\u73fe\u5728\u306e\u4f4d\u7f6eNo.\u306f\u3001\u304a\u4f7f\u3044\u306e\u3059\u3079\u3066\u306e\u7aef\u672b\u3067\u6700\u5f8c\u306b\u8aad\u3093\u3060\u4f4d\u7f6eNo.\u3067\u3059\u3002", "k_R_syncPosition_cancelText": "\u30ad\u30e3\u30f3\u30bb\u30eb", "k_R_syncPosition_cantSync_Text": "\u540c\u671f\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_R_syncPosition_labelText": "\u73fe\u5728\u4f4d\u7f6eNo. ${currentLocation}\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002${date} ${time}\u306b${deviceName}\u3067${location}\u307e\u3067\u8aad\u307f\u7d42\u3048\u3066\u3044\u307e\u3059\u3002\u6b21\u306e\u3044\u305a\u308c\u304b\u306e\u64cd\u4f5c\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_syncPosition_noDeviceName_PN_labelText": "\u73fe\u5728${currentPage}\u30da\u30fc\u30b8\u3092\u958b\u3044\u3066\u3044\u307e\u3059\u3002 \u3059\u3079\u3066\u306e\u7aef\u672b\u3092\u901a\u3057\u3066${page}\u30da\u30fc\u30b8\u307e\u3067\u8aad\u307f\u7d42\u3048\u3066\u3044\u307e\u3059\u3002\u6b21\u306e\u3044\u305a\u308c\u304b\u306e\u64cd\u4f5c\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_syncPosition_noDeviceName_labelText": "\u73fe\u5728\u4f4d\u7f6eNo. ${currentLocation}\u3092\u8868\u793a\u3057\u3066\u3044\u307e\u3059\u3002\u3059\u3079\u3066\u306e\u7aef\u672b\u3092\u901a\u3057\u3066\u4f4d\u7f6eNo. ${location}\u307e\u3067\u8aad\u307f\u7d42\u3048\u3066\u3044\u307e\u3059\u3002\u6b21\u306e\u3044\u305a\u308c\u304b\u306e\u64cd\u4f5c\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_R_syncPosition_page_reset": "\u73fe\u5728\u306e\u30da\u30fc\u30b8\u3092\u8aad\u307f\u9032\u3081\u305f\u6700\u5f8c\u306e\u4f4d\u7f6eNo.\u306b\u3059\u308b", "k_R_syncPosition_page_sync": "\u8aad\u307f\u9032\u3081\u305f\u6700\u5f8c\u306e\u30da\u30fc\u30b8\u306b\u79fb\u52d5\u3059\u308b", "k_R_syncPosition_reset": "\u73fe\u5728\u306e\u4f4d\u7f6eNo.\u3092\u8aad\u307f\u9032\u3081\u305f\u6700\u5f8c\u306e\u4f4d\u7f6eNo.\u306b\u3059\u308b", "k_R_syncPosition_sync": "\u8aad\u307f\u9032\u3081\u305f\u6700\u5f8c\u306e\u4f4d\u7f6eNo.\u306b\u79fb\u52d5\u3059\u308b", "k_R_syncPosition_title": "\u8aad\u307f\u9032\u3081\u305f\u6700\u5f8c\u306e\u30da\u30fc\u30b8\u306b\u540c\u671f", "k_R_table_of_contents_title": "\u76ee\u6b21", "k_R_toolbar_iOS_sample_close_button": "\u9589\u3058\u308b", "k_R_toolbar_library_button": "\u30e9\u30a4\u30d6\u30e9\u30ea", "k_R_toolbar_library_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "\u30e9\u30a4\u30d6\u30e9\u30ea", "k_R_toolbar_library_button_tooltip": "\u30e9\u30a4\u30d6\u30e9\u30ea", "k_R_unimplementedFeature_Error_Text": "", "k_R_unimplementedFeature_Error_Title": "\u3053\u306e\u6a5f\u80fd\u306f\u4f7f\u7528\u3067\u304d\u307e\u305b\u3093", "k_addToHomeScreen_strong_text": "\u30db\u30fc\u30e0\u753b\u9762\u306b\u8ffd\u52a0", "k_addToHomeScreen_text": "iPad\u3078\u306eKindle Cloud Reader\u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb: \u77e2\u5370\u3092\u30bf\u30c3\u30d7\u3057\u3001${addToHomeText}", "k_app_device_name_template": "%FIRST_NAME%\u3055\u3093\u306e%DUPE_STRATEGY_1ST%Kindle Cloud Reader", "k_author_conjunction": " \u3001 ", "k_banner_RWIS_message_desktop": "\u96fb\u8a71\u307e\u305f\u306f\u30bf\u30d6\u30ec\u30c3\u30c8\u3067\u3053\u306e\u672c\u3092\u8aad\u307f\u7d9a\u3051\u308b\u5834\u5408\u3001\u7121\u6599\u306eKindle\u30a2\u30d7\u30ea\u3092\u3054\u5229\u7528\u306b\u306a\u308b\u3068\u4fbf\u5229\u3067\u3059\u3002", "k_banner_RWIS_message_desktop1": "\u7121\u6599\u306eKindle\u30a2\u30d7\u30ea\u3067\u643a\u5e2f\u96fb\u8a71\u307e\u305f\u306f\u30bf\u30d6\u30ec\u30c3\u30c8\u306bKindle\u6a5f\u80fd\u3092\u8ffd\u52a0\u3057\u3001\u3053\u306e\u672c\u306e\u7d9a\u304d\u3092\u8aad\u3093\u3067\u304f\u3060\u3055\u3044", "k_banner_RWIS_message_ipad": "\u7121\u6599\u306eKindle\u30a2\u30d7\u30ea\u3067\u3053\u306e\u672c\u306e\u7d9a\u304d\u3092\u304a\u8aad\u307f\u304f\u3060\u3055\u3044\u3002", "k_banner_RWIS_message_kp": "Android\u3001iOS\u3001 PC\u3001Mac\u306a\u3069\u306bKindle\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u5916\u51fa\u4e2d\u306b\u7121\u6599\u3067\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002", "k_banner_bookmark_command": "CTRL+D", "k_banner_bookmark_command_mac": "Command+D", "k_common_cancel_button": "\u30ad\u30e3\u30f3\u30bb\u30eb", "k_common_close_button": "\u9589\u3058\u308b", "k_common_confirm_button": "OK", "k_common_learn_more": "\u8a73\u7d30", "k_dialog_appCache_button_text": "OK", "k_dialog_appCache_instruction1_text": "iPad\u306e\u300c\u30db\u30fc\u30e0\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u3001\u3053\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u7d42\u4e86\u3057\u307e\u3059\u3002", "k_dialog_appCache_instruction2_text": "iPad\u306e\u300c\u30db\u30fc\u30e0\u300d\u30dc\u30bf\u30f3\u30922\u56de\u62bc\u3057\u3066\u3001\u5b9f\u884c\u4e2d\u306e\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30c8\u30ec\u30a4\u3092\u8868\u793a\u3057\u307e\u3059\uff08iPad\u306e\u753b\u9762\u306e\u4e0b\u90e8\u306b\u8868\u793a\u3055\u308c\u307e\u3059\uff09\u3002", "k_dialog_appCache_instruction3_text": "Safari\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u63a2\u3057\u3001\u5de6\u4e0a\u9685\u306b\u30de\u30a4\u30ca\u30b9\u30dc\u30bf\u30f3\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3067\u30a2\u30a4\u30b3\u30f3\u3092\u62bc\u3057\u7d9a\u3051\u307e\u3059\u3002\u30de\u30a4\u30ca\u30b9\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3057\u307e\u3059\u3002", "k_dialog_appCache_instruction4_text": "Kindle Cloud Reader\u306e\u4ed6\u306e\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u63a2\u3057\u3001\u5de6\u4e0a\u9685\u306b\u30de\u30a4\u30ca\u30b9\u30dc\u30bf\u30f3\u304c\u8868\u793a\u3055\u308c\u308b\u307e\u3067\u305d\u306e\u30a2\u30a4\u30b3\u30f3\u3092\u62bc\u3057\u7d9a\u3051\u307e\u3059\u3002\u30de\u30a4\u30ca\u30b9\u30dc\u30bf\u30f3\u3092\u30bf\u30c3\u30d7\u3057\u307e\u3059\u3002", "k_dialog_appCache_instruction5_text": "Safari\u3092\u518d\u8d77\u52d5\u3057\u3001read.amazon.com\u3092\u3082\u3046\u4e00\u5ea6\u8aad\u307f\u8fbc\u307f\u307e\u3059\u3002", "k_dialog_appCache_message_text": "\u30aa\u30d5\u30e9\u30a4\u30f3\u7528\u306b\u30a2\u30d7\u30ea\u30b1\u30fc\u30b7\u30e7\u30f3\u3092\u4fdd\u5b58\u3059\u308b\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002Safari\u304a\u3088\u3073\u5b9f\u884c\u4e2d\u306eKindle Cloud Reader\u30a4\u30f3\u30b9\u30bf\u30f3\u30b9\u3092\u518d\u8d77\u52d5\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002", "k_dialog_appCache_readmore_text": "Safari\u3084Kindle Cloud Reader\u3092\u518d\u8d77\u52d5\u3059\u308b\u306b\u306f\u3069\u3046\u3059\u308c\u3070\u3044\u3044\u3067\u3059\u304b?", "k_dialog_appCache_step1_text": "\u30b9\u30c6\u30c3\u30d71.", "k_dialog_appCache_step2_text": "\u30b9\u30c6\u30c3\u30d72.", "k_dialog_appCache_step3_text": "\u30b9\u30c6\u30c3\u30d73.", "k_dialog_appCache_step4_text": "\u30b9\u30c6\u30c3\u30d74.", "k_dialog_appCache_step5_text": "\u30b9\u30c6\u30c3\u30d75.", "k_dialog_appCache_title_text": "\u30a2\u30d7\u30ea\u306e\u4fdd\u5b58\u30a8\u30e9\u30fc", "k_dialog_dbBlocked_Text": "\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u4e2d\u306b\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002Kindle Cloud Reader\u3092\u5b9f\u884c\u3057\u3066\u3044\u308b\u4ed6\u306e\u30bf\u30d6\u3092\u9589\u3058\u308b\u3068\u3001\u554f\u984c\u304c\u89e3\u6c7a\u3059\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059\u3002", "k_dialog_dbBlocked_Title": "\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8", "k_dialog_enableOffline_button_text": "OK", "k_dialog_enable_offline_firefox_msg": "Kindle Cloud Reader\u3067\u306f\u3001\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u8aad\u3080\u305f\u3081\u306b\u672c\u3092\u4fdd\u5b58\u3059\u308b\u8a31\u53ef\u304c\u5fc5\u8981\u3067\u3059\u3002Firefox\u304b\u3089\u8a31\u53ef\u3092\u6c42\u3081\u3089\u308c\u305f\u969b\u306b\u300c\u3053\u306e\u30b5\u30a4\u30c8\u3067\u306f\u4fdd\u5b58\u3057\u306a\u3044\u300d\u3092\u9078\u629e\u3057\u305f\u5834\u5408\u3001Firefox\u3067\u30aa\u30d5\u30e9\u30a4\u30f3\u306e\u8aad\u66f8\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u306b\u306f\u3001${linkStart}\u3053\u306e\u624b\u9806\u306b\u5f93\u3046\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059${linkEnd}\u3002", "k_dialog_enable_offline_title": "\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u8aad\u3081\u308b\u3088\u3046\u306b\u3059\u308b", "k_dialog_ffPrompting_Text": "Kindle Cloud Reader \u304c\u30b3\u30f3\u30d4\u30e5\u30fc\u30bf\u30fc\u4e0a\u306b 50 MB \u4ee5\u4e0a\u306e\u30c7\u30fc\u30bf\u3092\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u4f7f\u7528\u3067\u304d\u308b\u3088\u3046\u306b\u8a31\u53ef\u3057\u3066\u304f\u3060\u3055\u3044\u3002<br /><br />\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u30d8\u30eb\u30d7\u306e\u300c${linkStart}Troubleshooting & Resources${linkEnd}\u300d\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002", "k_dialog_ffPrompting_Title": "\u30aa\u30d5\u30e9\u30a4\u30f3\u30b9\u30c8\u30ec\u30fc\u30b8\u306e\u4f7f\u7528\u3092\u8a31\u53ef\u3057\u3066\u304f\u3060\u3055\u3044", "k_dialog_logoutConfirm_continue": "\u30ed\u30b0\u30a2\u30a6\u30c8\u306b\u9032\u3080", "k_dialog_logoutConfirm_message": "Kindle\u304b\u3089\u30ed\u30b0\u30a2\u30a6\u30c8\u3059\u308b\u3068\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f\u306e\u3059\u3079\u3066\u306e\u672c\u304c\u30d6\u30e9\u30a6\u30b6\u30fc\u304b\u3089\u524a\u9664\u3055\u308c\u307e\u3059\u3002 \u518d\u5ea6\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3082\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u306b\u63a5\u7d9a\u3057\u3066\u3044\u306a\u3044\u72b6\u614b\u3067\u5f15\u304d\u7d9a\u304d\u3053\u308c\u3089\u306e\u672c\u3092\u8aad\u3080\u3053\u3068\u306f\u3067\u304d\u307e\u305b\u3093\u3002", "k_dialog_logout_message": "\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u30b3\u30f3\u30c6\u30f3\u30c4\u3092\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7\u3057\u3066\u3044\u307e\u3059\u3002\u3057\u3070\u3089\u304f\u304a\u5f85\u3061\u304f\u3060\u3055\u3044\u3002", "k_dialog_logout_title": "Kindle Cloud Reader\u304b\u3089\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u3057\u3066\u3044\u307e\u3059...", "k_dialog_message_dismissButton_text": "OK", "k_dialog_message_retryButton_text": "\u518d\u8a66\u884c", "k_dialog_offlineLogout_Text": "\u3053\u306e\u64cd\u4f5c\u3092\u884c\u3046\u306b\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3078\u306e\u63a5\u7d9a\u304c\u5fc5\u8981\u3067\u3059\u3002", "k_dialog_offlineLogout_Title": "\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u3067\u304d\u307e\u305b\u3093", "k_dialog_prevSignOutFailed_Text": "\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8\u4e2d\u306b\u767a\u751f\u3057\u305f\u554f\u984c\u306e\u89e3\u6c7a\u65b9\u6cd5\u306b\u3064\u3044\u3066\u306f\u3001\u30d8\u30eb\u30d7\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002", "k_dialog_prevSignOutFailed_Title": "\u30b5\u30a4\u30f3\u30a2\u30a6\u30c8", "k_dialog_rental_expired_dismiss_button_text": "\u9589\u3058\u308b", "k_dialog_rental_expired_extend_button_text": "\u5ef6\u9577\u307e\u305f\u306f\u8cfc\u5165", "k_dialog_smallWindow_button_ignore": "\u7121\u8996\u3059\u308b", "k_dialog_smallWindow_msg": "Kindle Cloud Reader\u3067\u306e\u8aad\u66f8\u306b\u6700\u9069\u306a\u5927\u304d\u3055\u306b\u306a\u308b\u3088\u3046\u3001\u3053\u306e\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u5927\u304d\u304f\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_dialog_smallWindow_title": "\u30a6\u30a3\u30f3\u30c9\u30a6\u3092\u62e1\u5927\u3057\u3066Kindle Cloud Reader\u3067\u8aad\u3080", "k_empty_library_free": "\u591a\u304f\u306e\u7121\u6599\u30bf\u30a4\u30c8\u30eb\u3082\u3042\u308a\u307e\u3059\u3002", "k_empty_library_legal": "* \u7c73\u56fd\u4ee5\u5916\u306e\u56fd\u306e\u304a\u5ba2\u69d8\u306e\u5834\u5408\u3001\u672c\u306e\u5728\u5eab\u72b6\u6cc1\u304c\u7570\u306a\u308b\u3053\u3068\u304c\u3042\u308a\u307e\u3059\u3002", "k_empty_library_main": "${storeName}\u3067\u3001950,000\u518a*\u4ee5\u4e0a\u306e\u4e2d\u304b\u3089\u672c\u3092\u8cfc\u5165\u3067\u304d\u307e\u3059\u3002", "k_empty_library_manga_button": "\u7121\u6599\u306e\u30de\u30f3\u30ac\u3092\u8cfc\u5165", "k_empty_library_manga_msg": "\u30d9\u30b9\u30c8\u30bb\u30e9\u30fc\u3084\u7121\u6599\u30b3\u30df\u30c3\u30af\u3092\u542b\u3081\u3001${storeName}\u3067200\u4e07\u518a\u4ee5\u4e0a\u306e\u4e2d\u304b\u3089\u672c\u3092\u8cfc\u5165\u3067\u304d\u307e\u3059\u3002", "k_empty_library_shop": "Kindle\u30b9\u30c8\u30a2\u3067\u8cb7\u3044\u7269\u3092\u3059\u308b", "k_empty_library_store_name": "Kindle\u30b9\u30c8\u30a2", "k_empty_library_title": "\u73fe\u5728\u3001\u304a\u5ba2\u69d8\u306eKindle\u30e9\u30a4\u30d6\u30e9\u30ea\u306b\u672c\u306f\u3042\u308a\u307e\u305b\u3093\u3002", "k_empty_search_msg": "\u5165\u529b\u3057\u305f\u691c\u7d22\u6761\u4ef6\u306b\u4e00\u81f4\u3059\u308b\u30a2\u30a4\u30c6\u30e0\u306f\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f\u3002", "k_empty_search_offline": "\uff08\u30aa\u30d5\u30e9\u30a4\u30f3\u6642\u306f\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u672c\u306e\u307f\u3092\u691c\u7d22\u3067\u304d\u307e\u3059\u3002\uff09", "k_endOfFreeTrial_Text": "\u3053\u306e\u672c\u306e\u7121\u6599\u30c8\u30e9\u30a4\u30a2\u30eb\u306e\u671f\u9650\u304c\u5207\u308c\u3066\u3044\u307e\u3059\u3002\u3053\u306e\u672c\u3092\u7d99\u7d9a\u3057\u3066\u4f7f\u7528\u3059\u308b\u306b\u306f\u3001Kindle\u30b9\u30c8\u30a2\u3067\u8cfc\u5165\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_endOfFreeTrial_Title": "\u671f\u9650\u5207\u308c\u306e\u30a2\u30a4\u30c6\u30e0", "k_endOfFreeTrial_buyfullversion_button": "\u5b8c\u5168\u7248\u3092\u8cfc\u5165", "k_endOfFreeTrial_cancel_button": "\u30ad\u30e3\u30f3\u30bb\u30eb", "k_endOfFreeTrial_removebook_button": "\u672c\u3092\u524a\u9664", "k_endOfSample_Text": "\u30b5\u30f3\u30d7\u30eb\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u672b\u5c3e\u306b\u9054\u3057\u307e\u3057\u305f\u3002Kindle\u30b9\u30c8\u30a2\u304b\u3089\u5b8c\u5168\u7248\u3092\u8cfc\u5165\u3059\u308b\u304b\u3001\u30b5\u30f3\u30d7\u30eb\u306b\u623b\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002", "k_endOfSample_Title": "\u30b5\u30f3\u30d7\u30eb\u30b3\u30f3\u30c6\u30f3\u30c4\u306e\u672b\u5c3e", "k_endOfSample_buy_button": "\u5b8c\u5168\u7248\u3092\u5165\u624b", "k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "\u5168\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u30b9\u30c8\u30a2\u3067\u8cfc\u5165\u3059\u308b", "k_endOfSample_cancel_button": "\u30b5\u30f3\u30d7\u30eb\u306b\u623b\u308b", "k_freeTrialExpires_Day": "<span class=\"free_trial_remaining\">\u3042\u30681\u65e5</span>\u3067\u7121\u6599\u30c8\u30e9\u30a4\u30a2\u30eb\u306e\u671f\u9650\u304c\u5207\u308c\u307e\u3059", "k_freeTrialExpires_Days": "<span class=\"free_trial_remaining\">\u3042\u3068${days}\u65e5</span>\u3067\u7121\u6599\u30c8\u30e9\u30a4\u30a2\u30eb\u306e\u671f\u9650\u304c\u5207\u308c\u307e\u3059", "k_freeTrialExpires_less_than_a_day": "<span class=\"free_trial_remaining\">1\u65e5\u4ee5\u5185</span>\u306b\u7121\u6599\u30c8\u30e9\u30a4\u30a2\u30eb\u306e\u671f\u9650\u304c\u5207\u308c\u307e\u3059", "k_noAppMode_content": "\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002\u73fe\u5728\u3001\u30db\u30fc\u30e0\u753b\u9762\u306e\u30d6\u30c3\u30af\u30de\u30fc\u30af\u304b\u3089Kindle Cloud Reader\u3092\u958b\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093\u3002iPad\u3067\u8aad\u66f8\u3092\u7d9a\u3051\u308b\u306b\u306f\u3001\u4ee5\u4e0b\u3092\u30bf\u30c3\u30d7\u3057\u3066Safari\u3067\u958b\u304f\u304b\u3001\u7121\u6599\u306eKindle\u30a2\u30d7\u30ea\u3092\u3054\u4f7f\u7528\u304f\u3060\u3055\u3044\u3002", "k_noAppMode_safariLink": "Safari\u3067\u958b\u304f", "k_noAppMode_storeLink": "Kindle for iPad", "k_noDownloadedBooks_title": "\u73fe\u5728\u3001\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u305f\u672c\u306f\u3042\u308a\u307e\u305b\u3093\u3002", "k_offlineAccessDisabled_Text": "\u26a0\ufe0f \u4eca\u5f8c\u3001Kindle\u304b\u3089\u672c\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3057\u3066\u3001\u30aa\u30d5\u30e9\u30a4\u30f3\u72b6\u614b\u306e\u30a6\u30a7\u30d6\u30d6\u30e9\u30a6\u30b6\u30fc\u3067\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u306a\u304f\u306a\u308a\u307e\u3059\u3002 \u30a2\u30ab\u30a6\u30f3\u30c8\u304b\u3089\u30b5\u30a4\u30f3\u30aa\u30d5\u3059\u308b\u307e\u3067\u306f\u3001\u5f15\u304d\u7d9a\u304d\u30aa\u30d5\u30e9\u30a4\u30f3\u3067\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u6e08\u307f\u306e\u672c\u3092\u8aad\u3080\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002", "k_provide_feedback_error": "\u3053\u306e\u30e1\u30c3\u30bb\u30fc\u30b8\u306e\u9001\u4fe1\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_provide_feedback_sending": "\u9001\u4fe1\u4e2d...", "k_provide_feedback_success": "\u30e1\u30c3\u30bb\u30fc\u30b8\u304c\u6b63\u5e38\u306b\u9001\u4fe1\u3055\u308c\u307e\u3057\u305f\u3002 &#x2713;", "k_provide_feedback_text": "\u3054\u8cea\u554f\u307e\u305f\u306f\u30d5\u30a3\u30fc\u30c9\u30d0\u30c3\u30af\u3092\u5165\u529b\u3057\u3066\u300c\u9001\u4fe1\u300d\u3092\u30af\u30ea\u30c3\u30af\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_provide_feedback_title": "\u304a\u554f\u3044\u5408\u308f\u305b", "k_send_feedback_button": "\u9001\u4fe1", "k_store_open_failed_Error_Text": "Kindle\u30b9\u30c8\u30a2\u3092\u958b\u304f\u3068\u304d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_store_open_failed_Error_Title": "Kindle\u30b9\u30c8\u30a2\u3092\u958b\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093", "k_store_open_failed_offline_Error_Text": "\u3053\u306e\u64cd\u4f5c\u3092\u884c\u3046\u306b\u306f\u3001\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u3078\u306e\u63a5\u7d9a\u304c\u5fc5\u8981\u3067\u3059\u3002", "k_store_open_failed_offline_Error_Title": "Kindle\u30b9\u30c8\u30a2\u3092\u958b\u304f\u3053\u3068\u304c\u3067\u304d\u307e\u305b\u3093", "k_text_me_widget_EmailPhone": "E\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b", "k_text_me_widget_GetApp": "Go", "k_text_me_widget_invalid_input": "\u6709\u52b9\u306aE\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_text_me_widget_send_email_fail": "E\u30e1\u30fc\u30eb\u3092\u9001\u4fe1\u3067\u304d\u307e\u305b\u3093\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_text_me_widget_send_email_success": "\u30a2\u30d7\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\uff01 E\u30e1\u30fc\u30eb\u3092\u3054\u78ba\u8a8d\u304f\u3060\u3055\u3044\u3002", "k_text_me_widget_send_sms_fail": "\u9001\u4fe1\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_text_me_widget_send_sms_success": "\u30a2\u30d7\u30ea\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u3067\u304d\u307e\u3059\uff01 \u643a\u5e2f\u96fb\u8a71\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002", "k_text_me_widget_service_error": "\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002", "k_text_me_widget_submitting_request": "\u30ea\u30af\u30a8\u30b9\u30c8\u3092\u9001\u4fe1\u3057\u3066\u3044\u307e\u3059...", "k_window_title": "Kindle Cloud Reader", "metro_tutorial_children_book_click_instruction": "\u30d2\u30f3\u30c8: \u30c6\u30ad\u30b9\u30c8\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u62e1\u5927/\u7e2e\u5c0f\u3057\u307e\u3059", "metro_tutorial_children_book_tap_instruction": "\u30d2\u30f3\u30c8: \u30c6\u30ad\u30b9\u30c8\u3092\u30c0\u30d6\u30eb\u30bf\u30c3\u30d7\u3059\u308b\u3068\u3001\u62e1\u5927/\u7e2e\u5c0f\u3057\u307e\u3059", "metro_tutorial_children_book_text": "\u51b7\u305f\u3044\u6c34\u306e\u4e2d\u3092\u52d5\u7269\u305f\u3061\u306f\u3061\u3087\u3046\u3069\u591c\u660e\u3051\u524d\u306b\u5cf6\u306b\u7740\u304f\u307e\u3067\u6cf3\u304e\u7d9a\u3051\u307e\u3057\u305f\u3002", "metro_tutorial_comic_book_click_instruction1": "\u30d2\u30f3\u30c8: \u30d1\u30cd\u30eb\u3092\u30c0\u30d6\u30eb\u30af\u30ea\u30c3\u30af\u3059\u308b\u3068\u3001\u62e1\u5927/\u7e2e\u5c0f\u3057\u3001", "metro_tutorial_comic_book_click_instruction2": "\u30da\u30fc\u30b8\u3092\u53f3\u3078\u3081\u304f\u308b\u3068\u3001\u62e1\u5927/\u7e2e\u5c0f\u3055\u308c\u305f\u30d1\u30cd\u30eb\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002", "metro_tutorial_comic_book_tap_instruction1": "\u30d2\u30f3\u30c8: \u30d1\u30cd\u30eb\u3092\u30c0\u30d6\u30eb\u30bf\u30c3\u30d7\u3059\u308b\u3068\u3001\u62e1\u5927/\u7e2e\u5c0f\u3057\u3001", "metro_tutorial_comic_book_tap_instruction2": "\u30b9\u30ef\u30a4\u30d7\u3059\u308b\u3068\u3001\u62e1\u5927/\u7e2e\u5c0f\u3055\u308c\u305f\u30d1\u30cd\u30eb\u3092\u79fb\u52d5\u3057\u307e\u3059\u3002", "metro_tutorial_commic_book_dialogue": "Doomsday Machine\u306b\u3064\u3044\u3066\u77e5\u3063\u3066\u3044\u307e\u3059!"};
var Kindle = Kindle || {};Kindle.strings  = Kindle.strings || {};Kindle.strings['pt-BR']={"k_L_bad_download_Error_Text": "Para ler este eBook em seu Kindle, baixe-o da Nuvem.", "k_L_bad_download_Error_Title": "Erro ao abrir o conte\u00fado", "k_L_bookNotAvailable_Text": "Verifique a conex\u00e3o de rede e tente novamente.", "k_L_bookNotAvailable_Title": "N\u00e3o foi poss\u00edvel exibir o conte\u00fado", "k_L_cacheError": "Erro ao salvar o aplicativo. Clique aqui para tentar novamente.", "k_L_cacheError_pad": "Erro ao salvar o aplicativo. Toque aqui para tentar novamente.", "k_L_cached": "&#x2713; Aplicativo pronto para uso off-line", "k_L_caching": "Salvar aplicativo para uso off-line", "k_L_contact_us": "Fale conosco", "k_L_context_download_pin": "Baixar e fixar eBook", "k_L_context_pin": "Fixar eBook", "k_L_context_read": "Abrir eBook", "k_L_context_remove": "Remover eBook", "k_L_context_revoke_sample": "Excluir a amostra", "k_L_deregister_title": "Sair", "k_L_dialog_delete": "Excluir", "k_L_dialog_deleteFreeTrial_prompt_text": "Isto remover\u00e1 o livro permanentemente de sua conta.", "k_L_dialog_deleteFreeTrial_prompt_title": "Excluir avalia\u00e7\u00e3o gr\u00e1tis?", "k_L_dialog_delete_cancel": "Cancelar", "k_L_dialog_delete_prompt": "Isso remover\u00e1 <i>${bookTitle}</i> permanentemente da sua conta.", "k_L_dialog_delete_prompt_title": "Excluir a amostra?", "k_L_help": "Ajuda", "k_L_jp_merchandise_dialog_message": "Durante um per\u00edodo limitado, baixe gr\u00e1tis cap\u00edtulos dos t\u00edtulos de mang\u00e1s abaixo", "k_L_jp_merchandise_dialog_title": "Mang\u00e1s gr\u00e1tis dispon\u00edveis por tempo limitado", "k_L_legal_notices": "Avisos legais", "k_L_loadFailedError_Text": "Ocorreu um erro ao tentar carregar a biblioteca.", "k_L_loadFailedError_Title": "Erro ao carregar a biblioteca", "k_L_openBookAsinNotSpecified_Text": "O t\u00edtulo a ser aberto n\u00e3o foi especificado.", "k_L_openBookAsinNotSpecified_Title": "T\u00edtulo n\u00e3o especificado", "k_L_openBookContentLicenseExceededError_Text": "Voc\u00ea excedeu o limite do n\u00famero de dispositivos que podem ler este item. Voc\u00ea pode cancelar o registro de qualquer dispositivo que n\u00e3o esteja mais em uso e excluir o conte\u00fado, o que permitir\u00e1 baixar este item. Tamb\u00e9m \u00e9 poss\u00edvel adquirir outra c\u00f3pia na Loja Kindle.", "k_L_openBookContentLicenseExceededError_Title": "Limite da licen\u00e7a atingido", "k_L_openBookContentLoanEndedError_Text": "Este eBook foi emprestado a voc\u00ea e n\u00e3o pode ser aberto porque o empr\u00e9stimo terminou.", "k_L_openBookContentLoanEndedError_Title": "T\u00edtulo indispon\u00edvel", "k_L_openBookContentLoanedError_Text": "Este t\u00edtulo n\u00e3o pode ser aberto porque est\u00e1 atualmente emprestado.", "k_L_openBookContentLoanedError_Title": "T\u00edtulo indispon\u00edvel", "k_L_openBookContentRentalExpiredErrorMetro_Text": "O per\u00edodo de aluguel deste eBook expirou. V\u00e1 para a Loja Kindle para estender seu aluguel ou comprar o eBook. <br /><br />Seus destaques e notas est\u00e3o sempre dispon\u00edveis em ${link}, mesmo depois que o per\u00edodo de loca\u00e7\u00e3o expira.", "k_L_openBookContentRentalExpiredErrorMetro_Title": "Aluguel expirado", "k_L_openBookContentRentalExpiredError_Text": "No momento, voc\u00ea est\u00e1 na posi\u00e7\u00e3o ${currentLocation}. A \u00faltima posi\u00e7\u00e3o de leitura \u00e9 ${location} de \\\"${deviceName}\\\" \u00e0s ${time} em ${date}. Ir para essa posi\u00e7\u00e3o?", "k_L_openBookContentRentalExpiredError_Title": "Aluguel expirado", "k_L_openBookContentUnsupportedErrorMetro_Text": "Este t\u00edtulo n\u00e3o est\u00e1 dispon\u00edvel no Kindle para Windows 8.", "k_L_openBookContentUnsupportedErrorMetro_Title": "T\u00edtulo indispon\u00edvel", "k_L_openBookContentUnsupportedError_Text": "Este t\u00edtulo n\u00e3o est\u00e1 dispon\u00edvel no Kindle Cloud Reader.", "k_L_openBookContentUnsupportedError_Title": "T\u00edtulo indispon\u00edvel", "k_L_openBookContentUpgrade_ButtonText": "Continuar", "k_L_openBookContentUpgrade_Text": "H\u00e1 uma nova vers\u00e3o deste eBook dispon\u00edvel. A nova vers\u00e3o ser\u00e1 baixada enquanto voc\u00ea continua sua leitura.", "k_L_openBookContentUpgrade_Title": "Nova vers\u00e3o", "k_L_openBookGeoLocationNotAllowed_Text": "Esse t\u00edtulo n\u00e3o est\u00e1 dispon\u00edvel nesse pa\u00eds.", "k_L_openBookGeoLocationNotAllowed_Title": "T\u00edtulo indispon\u00edvel", "k_L_openBookLoadFailure_Text": "Ocorreu um erro ao abrir o item selecionado. Tente novamente mais tarde.", "k_L_openBookLoadFailure_Title": "Erro ao abrir o conte\u00fado", "k_L_openBookNetworkError_Text": "Ocorreu um erro ao abrir o item selecionado. Tente novamente mais tarde.", "k_L_openBookNetworkError_Title": "Erro ao abrir o conte\u00fado", "k_L_openBookSessionLimitExceededError_Text": "Voc\u00ea atingiu o n\u00famero m\u00e1ximo de sess\u00f5es simult\u00e2neas permitidas para esse t\u00edtulo. Tente novamente mais tarde.", "k_L_openBookSessionLimitExceededError_Title": "Limite da sess\u00e3o atingido", "k_L_openBookTimeoutError_Text": "Ocorreu um erro de conex\u00e3o. Tente novamente mais tarde.", "k_L_openBookTimeoutError_Title": "Erro de conex\u00e3o de rede", "k_L_outdatedChrome_Text": "Esta vers\u00e3o do Google Chrome n\u00e3o suporta o formato Chrome Extension atual. ${linkStart}Atualizar Google Chrome${linkEnd} para ativar o suporte off-line.", "k_L_outdatedChrome_Title": "N\u00e3o foi poss\u00edvel ativar o suporte off-line", "k_L_privacy": "Privacidade", "k_L_progress_dialog_message": "Este t\u00edtulo ser\u00e1 salvo na guia Baixados para leitura off-line at\u00e9 que voc\u00ea o remova. Por conveni\u00eancia, iremos baixar automaticamente os eBooks abertos recentemente e mant\u00ea-los at\u00e9 que o espa\u00e7o seja necess\u00e1rio.", "k_L_progress_dialog_title": "Baixando e fixando o eBook", "k_L_removeBookError_Text": "Ocorreu um erro ao remover o item selecionado. Para apagar o conte\u00fado baixado deste computador, escolha \\\"Desconectar\\\" no menu Configura\u00e7\u00f5es.", "k_L_removeBookError_Title": "Erro ao remover o conte\u00fado", "k_L_removeBookNetworkError_Text": "Ocorreu um erro ao remover o item selecionado. Tente novamente mais tarde.", "k_L_removeBookNetworkError_Title": "Erro ao remover o conte\u00fado", "k_L_revokeFailed_Text": "\u00c9 necess\u00e1ria uma conex\u00e3o com a Internet para essa opera\u00e7\u00e3o.", "k_L_revokeFailed_Title": "N\u00e3o \u00e9 poss\u00edvel excluir o eBook", "k_L_sample_badge_text": "AMOSTRA", "k_L_saveBookOutOfSpace_Text": "N\u00e3o h\u00e1 espa\u00e7o suficiente para salvar este item para leitura off-line. Voc\u00ea pode continuar para ler este t\u00edtulo quando estiver on-line. \u00c9 poss\u00edvel liberar espa\u00e7o removendo outros t\u00edtulos salvos. \u00c9 poss\u00edvel aumentar seu espa\u00e7o de armazenamento off-line. Para obter mais informa\u00e7\u00f5es, ${linkStart}clique aqui${linkEnd}.", "k_L_saveBookOutOfSpace_Title": "Erro ao salvar o conte\u00fado", "k_L_sort_author": "Classificar por autor", "k_L_sort_author_label": "Autor", "k_L_sort_recent": "Classificar por recente", "k_L_sort_recent_label": "Recente", "k_L_sort_title": "Classificar por t\u00edtulo", "k_L_sort_title_label": "T\u00edtulo", "k_L_storeNotAvailable_Text": "\u00c9 necess\u00e1ria uma conex\u00e3o com a Internet para comprar na Loja Kindle.", "k_L_storeNotAvailable_Title": "Nenhuma conex\u00e3o com a Internet", "k_L_syncFailedError_Text": "Ocorreu um erro ao sincronizar. Tente novamente mais tarde.", "k_L_syncFailedError_Title": "Falha de sincroniza\u00e7\u00e3o", "k_L_syncFailedOfflineError_Text": "\u00c9 necess\u00e1ria uma conex\u00e3o com a Internet para sincronizar a sua biblioteca.", "k_L_syncFailedOfflineError_Title": "Falha de sincroniza\u00e7\u00e3o", "k_L_terms_of_use": "Termos de uso", "k_L_text_me_wdiget_Instruction": "Para receber um link para download, insira seu e-mail ou n\u00famero de telefone", "k_L_text_me_widget_Text": "Desculpe. O <b>Kindle Cloud Reader</b> n\u00e3o p\u00f4de abrir este livro, mas voc\u00ea poder\u00e1 l\u00ea-lo no aplicativo Kindle gr\u00e1tis.", "k_L_toolbar_cloud_button": "Conte\u00fado da Nuvem", "k_L_toolbar_cloud_button_tooltip": "Conte\u00fado da Nuvem", "k_L_toolbar_cloud_label": "Nuvem", "k_L_toolbar_cloud_label_tooltip": "Nuvem", "k_L_toolbar_cover_slider": "Tamanho da capa", "k_L_toolbar_cover_slider_tooltip": "Tamanho da capa", "k_L_toolbar_downloaded_button": "Conte\u00fado baixado", "k_L_toolbar_downloaded_button_tooltip": "Conte\u00fado baixado", "k_L_toolbar_downloaded_label": "Baixados", "k_L_toolbar_downloaded_label_tooltip": "Baixados", "k_L_toolbar_grid_button": "Visualiza\u00e7\u00e3o de grade", "k_L_toolbar_grid_button_tooltip": "Visualiza\u00e7\u00e3o de grade", "k_L_toolbar_list_button": "Visualiza\u00e7\u00e3o de lista", "k_L_toolbar_list_button_tooltip": "Visualiza\u00e7\u00e3o de lista", "k_L_toolbar_manage_button": "Gerenciar", "k_L_toolbar_manage_button_tooltip": "Gerenciar", "k_L_toolbar_notebook_button": "Nota e destaques", "k_L_toolbar_notebook_button_tooltip": "Nota e destaques", "k_L_toolbar_search_button": "Pesquisar", "k_L_toolbar_search_button_tooltip": "Pesquisar", "k_L_toolbar_sort_button": "Classificar por", "k_L_toolbar_sort_button_tooltip": "Classificar por", "k_L_toolbar_store_button": "Loja Kindle", "k_L_toolbar_store_button_tooltip": "Loja Kindle", "k_L_toolbar_sync_button": "Sincronizar", "k_L_toolbar_sync_button_tooltip": "Sincronizar", "k_L_trial_badge_text": "AVALIA\u00c7\u00c3O", "k_L_unknownError_Text": "Ocorreu um erro ao tentar abrir o item selecionado. Tente novamente mais tarde.", "k_L_unknownError_Title": "Erro ao abrir o conte\u00fado", "k_RWIS_banner_message_desktop": "Para continuar a ler mais tarde, pressione ${bookmarkCommand} para marcar esta p\u00e1gina ou ${getAppStart}baixe um aplicativo gr\u00e1tis de leitura${getAppEnd} para seu celular ou tablet.", "k_RWIS_banner_message_ipad": "Para continuar a ler mais tarde, baixe nosso aplicativo ${getIPadAppStart}gr\u00e1tis para iPad${getIPadAppEnd}.", "k_R_annotation_pane_bookmark_label": "Marcador", "k_R_annotation_pane_cancel": "Cancelar", "k_R_annotation_pane_delete": "Excluir", "k_R_annotation_pane_delete_confirm": "Confirmar a exclus\u00e3o?", "k_R_annotation_pane_dont_delete": "N\u00e3o excluir", "k_R_annotation_pane_edit": "Editar nota", "k_R_annotation_pane_empty_note": "Este eBook n\u00e3o possui notas nem marcadores.", "k_R_annotation_pane_goto": "Ir para posi\u00e7\u00e3o", "k_R_annotation_pane_next": "Clique para avan\u00e7ar", "k_R_annotation_pane_no": "N\u00e3o", "k_R_annotation_pane_note_highlight": "Destaque", "k_R_annotation_pane_note_label": "Nota", "k_R_annotation_pane_notes_location": "Localiza\u00e7\u00e3o ${location}", "k_R_annotation_pane_notes_page": "P\u00e1gina ${page}", "k_R_annotation_pane_previous": "Clique para anterior", "k_R_annotation_pane_save": "Salvar nota", "k_R_annotation_pane_yes": "Sim", "k_R_beginning_title": "In\u00edcio", "k_R_book_extras_title": "Extras do eBook", "k_R_context_createHighlight": "Destaque", "k_R_context_createNote": "Nota", "k_R_context_deleteHighlight": "Excluir destaque", "k_R_context_editNote": "Editar nota", "k_R_cover_title": "Capa", "k_R_dialog_annotation_pane_title": "Notas e marcadores", "k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Observa\u00e7\u00f5es e destaques", "k_R_dialog_editNote_cancel": "Cancelar", "k_R_dialog_editNote_delete": "Excluir", "k_R_dialog_editNote_placeholder": "Digite sua nota aqui", "k_R_dialog_editNote_save": "Salvar", "k_R_dialog_editNote_title_create": "Criar nota", "k_R_dialog_editNote_title_edit": "Editar nota", "k_R_dialog_sitb_message_indexing": "O eBook est\u00e1 sendo indexado. Isso pode levar alguns instantes.", "k_R_dialog_sitb_pane_title_indexing": "Indexando...", "k_R_dialog_sitb_pane_title_notAvailable": "Pesquisa indispon\u00edvel", "k_R_dialog_sitb_pane_title_oneResultFound": "${numberResults} resultado encontrado", "k_R_dialog_sitb_pane_title_resultsFound": "${numberResults} resultados encontrados", "k_R_dialog_sitb_pane_title_searching": "Pesquisando...", "k_R_dialog_sitb_result_current_location": "Voc\u00ea est\u00e1 na localiza\u00e7\u00e3o ${location}", "k_R_dialog_sitb_result_current_location_past": "Voc\u00ea estava na localiza\u00e7\u00e3o ${location}", "k_R_dialog_sitb_result_current_page": "Voc\u00ea est\u00e1 na p\u00e1gina ${page}", "k_R_dialog_sitb_result_current_page_past": "Voc\u00ea estava na p\u00e1gina ${page}", "k_R_dialog_sitb_result_location": "Localiza\u00e7\u00e3o ${location}", "k_R_dialog_sitb_result_page": "P\u00e1gina ${page}", "k_R_dialog_unoptimizedFormat_close": "Fechar o eBook", "k_R_dialog_unoptimizedFormat_continue": "Continuar mesmo assim", "k_R_dialog_unoptimizedFormat_message": "Este eBook n\u00e3o est\u00e1 otimizado para o Kindle Cloud Reader neste dispositivo. Instale o ${linkStart}Kindle para iPad${linkEnd} para ler este item.", "k_R_dialog_unoptimizedFormat_metro_message": "Este eBook n\u00e3o est\u00e1 otimizado para o Kindle para Windows 8.", "k_R_dialog_unoptimizedFormat_stopSave": "Cancelar grava\u00e7\u00e3o", "k_R_dialog_unoptimizedFormat_title": "Conte\u00fado n\u00e3o suportado", "k_R_dialog_upgrade_btn": "Atualizar agora", "k_R_dialog_upgrade_countryBlk_btn": "Ir para a loja Windows", "k_R_dialog_upgrade_countryBlk_msg": "Esta vers\u00e3o do Kindle n\u00e3o oferece suporte ao conte\u00fado em seu idioma e/ou regi\u00e3o. <br/> Verifique a loja Windows para ver se h\u00e1 uma atualiza\u00e7\u00e3o dispon\u00edvel.", "k_R_dialog_upgrade_countryBlk_title": "Kindle na sua regi\u00e3o", "k_R_dialog_upgrade_langSupport_btn": "Atualizar agora", "k_R_dialog_upgrade_langSupport_msg": "Antes de iniciar a sua leitura, h\u00e1 uma atualiza\u00e7\u00e3o gratuita para dar suporte ao Kindle no seu idioma atual.", "k_R_dialog_upgrade_langSupport_title": "Atualiza\u00e7\u00e3o dispon\u00edvel", "k_R_dialog_upgrade_msg": " Fazer esta a posi\u00e7\u00e3o lida mais distante", "k_R_dialog_upgrade_title": "Atualiza\u00e7\u00e3o dispon\u00edvel", "k_R_dictionary_labels_Derivatives": "Derivados", "k_R_dictionary_labels_Ipa": "Ipa", "k_R_dictionary_labels_Notes": "Notas", "k_R_dictionary_labels_Origin": "Origem", "k_R_dictionary_labels_Phrases": "Frases", "k_R_dictionary_labels_Usage": "Uso", "k_R_dictionary_loading": "Carregando", "k_R_dictionary_not_available": "Dicion\u00e1rio indispon\u00edvel.", "k_R_dictionary_not_found": "Nenhum resultado no dicion\u00e1rio.", "k_R_dictionary_offline": "O dicion\u00e1rio est\u00e1 dispon\u00edvel uma vez que se esteja conectado \u00e0 Internet.", "k_R_dictionary_view_full": "Exibir defini\u00e7\u00e3o completa", "k_R_dictionary_view_full_i18n": "Defini\u00e7\u00e3o completa", "k_R_download_disk_error": "Baixado: ${percent}(<a href=\\\"${url}\\\" target=\\\"_blank\\\" id=\\\"kindleReader_download_disk_error\\\">Armazenamento do navegador cheio</a>)", "k_R_download_network_error": "Download interrompido: ${percent} (erro)", "k_R_downloaded": "${percent}% baixado", "k_R_downloading": "Baixando: ${percent}%", "k_R_embedded_logo_tooltip": "Abra o Kindle Cloud Reader em uma nova guia", "k_R_feature_not_available_dialog_buy_btn": "Comprar vers\u00e3o completa", "k_R_feature_not_available_dialog_text": "Esse recurso est\u00e1 habilitado na vers\u00e3o completa do eBook.", "k_R_feature_not_available_dialog_title": "Recurso indispon\u00edvel", "k_R_goto_bookmark_title": "Marcador...", "k_R_goto_dialog_error": "Insira um local v\u00e1lido (${minLocation}-${maxLocation}).", "k_R_goto_dialog_error_snapview": "Insira um local v\u00e1lido.", "k_R_goto_dialog_location_range": "(${minLocation} - ${maxLocation})", "k_R_goto_dialog_page_range": "(${range})", "k_R_goto_location_title": "Posi\u00e7\u00e3o\u2026", "k_R_goto_menu_goto_button": "Ir para posi\u00e7\u00e3o", "k_R_goto_menu_goto_location": "de ${lastLocation}", "k_R_goto_menu_goto_location_metro_title": "Digite a posi\u00e7\u00e3o", "k_R_goto_menu_goto_location_title": "Digite a posi\u00e7\u00e3o", "k_R_goto_menu_goto_message": "Posi\u00e7\u00e3o\u2026 ", "k_R_goto_menu_goto_page": "de ${lastPage}", "k_R_goto_menu_goto_page_button": "Ir para p\u00e1gina", "k_R_goto_menu_goto_page_message": "P\u00e1gina ", "k_R_goto_menu_goto_page_title": "Informe a p\u00e1gina", "k_R_goto_menu_goto_page_title_metro": "Informe a p\u00e1gina", "k_R_goto_menu_title": "Ir para", "k_R_goto_page_dialog_error": "Insira uma p\u00e1gina v\u00e1lida (${range}).", "k_R_goto_page_dialog_error_snapview": "Insira uma p\u00e1gina v\u00e1lida.", "k_R_goto_page_title": "P\u00e1gina...", "k_R_menuButton_back": "Voltar", "k_R_menuButton_back_tooltip": "Voltar", "k_R_menuButton_bookmark": "Marcador", "k_R_menuButton_bookmark_tooltip": "Adicionar/Remover marcador", "k_R_menuButton_columnMode": "Colunas", "k_R_menuButton_columnMode_tooltip": "Alternar colunas", "k_R_menuButton_controlPane": "Visualizar", "k_R_menuButton_controlPane_tooltip": "Configura\u00e7\u00f5es de visualiza\u00e7\u00e3o", "k_R_menuButton_enterImmersive_tooltip": "Entrar no modo de leitura de imers\u00e3o", "k_R_menuButton_exitImmersive_tooltip": "Sair do modo de leitura de imers\u00e3o", "k_R_menuButton_goto": "Ir para", "k_R_menuButton_goto_tooltip": "Ir para menu", "k_R_menuButton_notesAndMarks": "Notas/Marcaadores", "k_R_menuButton_notesAndMarks_tooltip": "Mostrar notas e marcadores", "k_R_menuButton_pin_start_metro": "Afixar no In\u00edcio", "k_R_menuButton_pin_start_metro_tooltip": "Afixar no In\u00edcio", "k_R_menuButton_sync": "Sincronizar", "k_R_menuButton_sync_tooltip": "Sincronizar", "k_R_menuInput_sitb_placeholder": "Pesquisar", "k_R_pageArrow_next": "Pr\u00f3xima p\u00e1gina", "k_R_pageArrow_prev": "P\u00e1gina anterior", "k_R_pageLoadError_Text": "Ocorreu um erro ao carregar a pr\u00f3xima p\u00e1gina. Tente novamente mais tarde.", "k_R_pageLoadError_Title": "Erro ao carregar o conte\u00fado", "k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550": "O suporte para leitores de tela n\u00e3o est\u00e1 dispon\u00edvel no momento. Para ler usando o leitor de tela, mude para o aplicativo Kindle no seu dispositivo.", "k_R_search_placeholder": "Encontrar no Livro", "k_R_settings_apply_button": "Aplicar configura\u00e7\u00f5es", "k_R_settings_colorMode_black": "Preto", "k_R_settings_colorMode_label": "COR DE FUNDO", "k_R_settings_colorMode_label_metro": "Cor de fundo", "k_R_settings_colorMode_sepia": "S\u00e9pia", "k_R_settings_colorMode_white": "Branco", "k_R_settings_column_disabled_msg": "Esse t\u00edtulo est\u00e1 dispon\u00edvel somente para leitura em uma coluna.", "k_R_settings_column_off_button": "Desativado", "k_R_settings_column_on_button": "Ativado", "k_R_settings_fontSize_label": "TAMANHO DA FONTE", "k_R_settings_fontSize_label_metro": "Tamanho da fonte", "k_R_settings_fontSize_tooltip_metro": "Aa", "k_R_settings_margins_label": "MARGENS", "k_R_settings_margins_label_metro": "Margens", "k_R_settings_multiColumnMode_label": "SOMENTE UMA COLUNA", "k_R_settings_multiColumnMode_label_metro": "Somente uma coluna", "k_R_settings_sampleText": "Emma Woodhouse, bonita, inteligente e rica, com uma disposi\u00e7\u00e3o de casa confort\u00e1vel e feliz, parecia reunir algumas das melhores b\u00ean\u00e7\u00e3os da exist\u00eancia; e tinha vivido quase vinte e um anos sem afli\u00e7\u00f5es ou ang\u00fastias.", "k_R_settings_showLocation_label": "MOSTRAR POSI\u00c7\u00c3O DE LEITURA", "k_R_settings_showLocation_label_metro": "Mostrar posi\u00e7\u00e3o de leitura", "k_R_settings_title_metro": "Visualizar op\u00e7\u00f5es", "k_R_show_database_title": "Mostrar banco de dados", "k_R_sitb_error_common_message": "Ocorreu um erro. Tente novamente mais tarde.", "k_R_sitb_error_common_title": "Pesquisa n\u00e3o conclu\u00edda", "k_R_sitb_error_index_not_available_message": "Esse eBook ainda n\u00e3o est\u00e1 habilitado para pesquisa. Tente novamente depois.", "k_R_sitb_error_index_not_available_title": "Pesquisa indispon\u00edvel", "k_R_sitb_error_language_not_supported_message": "A pesquisa n\u00e3o est\u00e1 dispon\u00edvel para esse t\u00edtulo, pois o idioma n\u00e3o \u00e9 suportado no momento. A equipe do Amazon Kindle est\u00e1 trabalhando para resolver esse problema.", "k_R_sitb_error_language_not_supported_title": "Pesquisa indispon\u00edvel", "k_R_sitb_error_language_undefined_message": "A pesquisa n\u00e3o est\u00e1 dispon\u00edvel para esse t\u00edtulo devido a um problema na gera\u00e7\u00e3o do \u00edndice para o t\u00edtulo.", "k_R_sitb_error_language_undefined_title": "Pesquisa indispon\u00edvel", "k_R_sitb_error_offline_message": "Uma conex\u00e3o com a rede \u00e9 necess\u00e1ria para concluir essa a\u00e7\u00e3o. Conecte-se a uma rede.", "k_R_sitb_error_offline_title": "Sem conex\u00e3o com a rede", "k_R_slider_loc_popup": "Pos. ${location}", "k_R_slider_location": "Posi\u00e7\u00e3o ${location} de ${totalLocations}", "k_R_slider_location_popup": "Posi\u00e7\u00e3o ${location}", "k_R_slider_pageNumber": "P\u00e1gina ${page} de ${totalPages}", "k_R_slider_pageNumber_popup": "P\u00e1gina ${page}", "k_R_slider_percentage": "${percent}%", "k_R_syncPosition_PN_labelText": "Atualmente, voc\u00ea est\u00e1 na p\u00e1gina ${currentPage}. A \u00faltima p\u00e1gina lida foi a ${page} do \\\"${deviceName}\\\", \u00e0s ${time} em ${date}. O que voc\u00ea gostaria de fazer?", "k_R_syncPosition_alreadyFurthest_Text": "Atualmente, voc\u00ea j\u00e1 est\u00e1 na \u00faltima posicao lida entre todos os seus dispositivos.", "k_R_syncPosition_cancelText": "Cancelar", "k_R_syncPosition_cantSync_Text": "Ocorreu um erro ao sincronizar. Tente novamente mais tarde.", "k_R_syncPosition_labelText": "No momento voc\u00ea est\u00e1 na posi\u00e7\u00e3o ${currentLocation}. A \u00faltima posi\u00e7\u00e3o de leitura \u00e9 ${location} de \\\"${deviceName}\\\" \u00e0s ${time} em ${date}. Ir para essa posi\u00e7\u00e3o?", "k_R_syncPosition_noDeviceName_PN_labelText": "Atualmente, voc\u00ea est\u00e1 na p\u00e1gina ${currentPage}. A \u00faltima p\u00e1gina lida em todos os seus dispositivos foi a ${page}. O que voc\u00ea gostaria de fazer?", "k_R_syncPosition_noDeviceName_labelText": "Voc\u00ea est\u00e1 atualmente na posi\u00e7\u00e3o ${currentLocation}. A \u00faltima posi\u00e7\u00e3o de leitura em todos os seus dispositivos \u00e9 ${location}. O que voc\u00ea gostaria de fazer?", "k_R_syncPosition_page_reset": "Fazer com que essa seja a \u00faltima p\u00e1gina lida", "k_R_syncPosition_page_sync": "Ir para a \u00faltima p\u00e1gina lida", "k_R_syncPosition_reset": "Fazer com que essa seja a \u00faltima posi\u00e7\u00e3o lida", "k_R_syncPosition_sync": "Ir para a \u00faltima posi\u00e7\u00e3o lida", "k_R_syncPosition_title": "Sincronizar com a \u00faltima p\u00e1gina lida", "k_R_table_of_contents_title": "\u00cdndice", "k_R_toolbar_iOS_sample_close_button": "Fechar", "k_R_toolbar_library_button": "Biblioteca", "k_R_toolbar_library_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Sua biblioteca", "k_R_toolbar_library_button_tooltip": "Biblioteca", "k_R_unimplementedFeature_Error_Text": "", "k_R_unimplementedFeature_Error_Title": "Recurso n\u00e3o implementado", "k_addToHomeScreen_strong_text": "Adicionar \u00e0 tela inicial", "k_addToHomeScreen_text": "Instale o Kindle Cloud Reader em seu iPad: toque na seta e ent\u00e3o, em ${addToHomeText}", "k_app_device_name_template": "%FIRST_NAME%'s%DUPE_STRATEGY_1ST%Kindle Cloud Reader", "k_author_conjunction": " e ", "k_banner_RWIS_message_desktop": "Continue lendo este livro em seu telefone ou tablet com nosso aplicativo Kindle gr\u00e1tis.", "k_banner_RWIS_message_desktop1": "Continue a ler este livro com mais recursos do Kindle em seu telefone ou tablet usando o aplicativo Kindle gr\u00e1tis.", "k_banner_RWIS_message_ipad": "Continue a ler este livro com nosso aplicativo Kindle gr\u00e1tis.", "k_banner_RWIS_message_kp": "Leggete gratis ovunque siate: scaricate Kindle per Android, iOS, PC, Mac e altro ancora.", "k_banner_bookmark_command": "CTRL+D", "k_banner_bookmark_command_mac": "Comando+D", "k_common_cancel_button": "Cancelar", "k_common_close_button": "Fechar", "k_common_confirm_button": "OK", "k_common_learn_more": "Saiba mais", "k_dialog_appCache_button_text": "OK", "k_dialog_appCache_instruction1_text": "Clique no bot\u00e3o Tela inicial do iPad para sair deste aplicativo.", "k_dialog_appCache_instruction2_text": "Clique no bot\u00e3o Tela inicial do iPad duas vezes para mostrar a bandeja de aplicativos em execu\u00e7\u00e3o (localizada na parte inferior da tela do iPad).", "k_dialog_appCache_instruction3_text": "Localize o \u00edcone do aplicativo Safari e mantenha pressionado o \u00edcone at\u00e9 que um sinal de menos apare\u00e7a no canto superior esquerdo. Toque no bot\u00e3o de menos.", "k_dialog_appCache_instruction4_text": "Localize outras inst\u00e2ncias do Kindle Cloud Reader e mantenha pressionado seu \u00edcone at\u00e9 que um bot\u00e3o de menos apare\u00e7a no canto superior esquerdo. Toque no bot\u00e3o de menos.", "k_dialog_appCache_instruction5_text": "Reinicie o Safari e tente carregar read.amazon.com novamente.", "k_dialog_appCache_message_text": "Encontramos um erro ao tentar salvar o aplicativo para leitura off-line. Para corrigir isso, voc\u00ea precisa reiniciar o aplicativo Safari e quaisquer outras inst\u00e2ncias em execu\u00e7\u00e3o do Kindle Cloud Reader.", "k_dialog_appCache_readmore_text": "Como fa\u00e7o para reiniciar o Safari e/ou Kindle Cloud Reader?", "k_dialog_appCache_step1_text": "Etapa 1.", "k_dialog_appCache_step2_text": "Etapa 2.", "k_dialog_appCache_step3_text": "Etapa 3.", "k_dialog_appCache_step4_text": "Etapa 4.", "k_dialog_appCache_step5_text": "Etapa 5.", "k_dialog_appCache_title_text": "Erro ao salvar o aplicativo", "k_dialog_dbBlocked_Text": "Ocorreu um erro ao se desconectar. Para resolver o problema, feche todas as abas quando estiver usando o Kindle Cloud Reader.", "k_dialog_dbBlocked_Title": "Sair", "k_dialog_enableOffline_button_text": "OK", "k_dialog_enable_offline_firefox_msg": "O Kindle Cloud Reader requer sua permiss\u00e3o para armazenar eBooks para leitura off-line. Se voc\u00ea selecionou \\\"Nunca para este site\\\" quando o Firefox solicitou permiss\u00e3o, precisar\u00e1 ${linkStart}seguir estas etapas${linkEnd} para ativar a leitura off-line no Firefox.", "k_dialog_enable_offline_title": "Ativar leitura off-line", "k_dialog_ffPrompting_Text": "Permita que o Kindle armazene mais de 50 MB de dados em seu computador para uso off-line.<br /><br />Para obter ajuda, leia Solu\u00e7\u00f5es de problemas e recursos do${linkStart}Kindle Cloud Reader${linkEnd}.", "k_dialog_ffPrompting_Title": "Permita o Armazenamento Off-line", "k_dialog_logoutConfirm_continue": "Prossiga para sair", "k_dialog_logoutConfirm_message": "Sair do Kindle remover\u00e1 todos os livros baixados do seu navegador. Se voc\u00ea fizer login novamente, s\u00f3 ser\u00e1 poss\u00edvel continuar a ler esses livros quando estiver conectado \u00e0 Internet.", "k_dialog_logout_message": "Aguarde enquanto apagamos seu conte\u00fado baixado.", "k_dialog_logout_title": "Desconectando do Kindle Cloud Reader...", "k_dialog_message_dismissButton_text": "OK", "k_dialog_message_retryButton_text": "Tentar novamente", "k_dialog_offlineLogout_Text": "\u00c9 necess\u00e1ria uma conex\u00e3o com a Internet para essa opera\u00e7\u00e3o.", "k_dialog_offlineLogout_Title": "N\u00e3o foi poss\u00edvel desconectar-se", "k_dialog_prevSignOutFailed_Text": "Problemas para se desconectar? Acesse Ajuda para procurar por poss\u00edveis solu\u00e7\u00f5es.", "k_dialog_prevSignOutFailed_Title": "Sair", "k_dialog_rental_expired_dismiss_button_text": "Ignorar", "k_dialog_rental_expired_extend_button_text": "Estender ou comprar", "k_dialog_smallWindow_button_ignore": "Ignorar", "k_dialog_smallWindow_msg": "Aumente o tamanho desta janela para obter a melhor experi\u00eancia de leitura com o Kindle Cloud Reader.", "k_dialog_smallWindow_title": "Expandir janela para ler com o Kindle Cloud Reader", "k_empty_library_free": "", "k_empty_library_legal": "*A disponibilidade de eBooks pode variar para clientes fora do pa\u00eds.", "k_empty_library_main": "A maior sele\u00e7\u00e3o de eBooks preferidos pelo p\u00fablico, com os melhores pre\u00e7os e mais de 2.500 eBooks gratuitos.", "k_empty_library_manga_button": "Compre mang\u00e1s gr\u00e1tis", "k_empty_library_manga_msg": "Compre a partir das sele\u00e7\u00f5es de mais de dois milh\u00f5es de livros em ${storeName}, incluindo os mais vendidos e quadrinhos gr\u00e1tis.", "k_empty_library_shop": "Comprar na Loja Kindle", "k_empty_library_store_name": "Loja Kindle", "k_empty_library_title": "No momento voc\u00ea n\u00e3o possui nenhum eBook em sua Biblioteca Kindle", "k_empty_search_msg": "Nenhum resultado para sua consulta.", "k_empty_search_offline": "(Voc\u00ea s\u00f3 pode pesquisar em eBooks j\u00e1 baixados quando estiver off-line.)", "k_endOfFreeTrial_Text": "A avalia\u00e7\u00e3o gratuita deste livro expirou. Para continuar usando o livro, compre este item na Loja Kindle.", "k_endOfFreeTrial_Title": "Item expirado", "k_endOfFreeTrial_buyfullversion_button": "Obter vers\u00e3o completa", "k_endOfFreeTrial_cancel_button": "Cancelar", "k_endOfFreeTrial_removebook_button": "Remover eBook", "k_endOfSample_Text": "Voc\u00ea atingiu o fim da amostra gratuita do eBook; por\u00e9m \u00e9 poss\u00edvel adquirir sua vers\u00e3o completa diretamente na Loja Kindle ou retornar para a amostra.", "k_endOfSample_Title": "Voc\u00ea chegou ao fim da amostra do eBook.", "k_endOfSample_buy_button": "Adquirir vers\u00e3o digital completa", "k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Compre a vers\u00e3o completa na loja", "k_endOfSample_cancel_button": "Retornar para a amostra", "k_freeTrialExpires_Day": "Sua avalia\u00e7\u00e3o gr\u00e1tis expira em <span class=\"free_trial_remaining\">1 dias</span>", "k_freeTrialExpires_Days": "Sua avalia\u00e7\u00e3o gr\u00e1tis expira em <span class=\"free_trial_remaining\">${days} dias</span>", "k_freeTrialExpires_less_than_a_day": "Sua avalia\u00e7\u00e3o gr\u00e1tis expira em <span class=\"free_trial_remaining\">menos de um dia</span>", "k_noAppMode_content": "Desculpe, mas no momento n\u00e3o \u00e9 poss\u00edvel abrir o Kindle Cloud Reader a partir do marcador existente em sua tela inicial. Para continuar a leitura no iPad, toque abaixo para abrir no Safari ou utilize o Aplicativo Kindle gratuito.", "k_noAppMode_safariLink": "Abrir no Safari", "k_noAppMode_storeLink": "Kindle para iPad", "k_noDownloadedBooks_title": "Atualmente, voc\u00ea n\u00e3o possui eBooks baixados.", "k_offlineAccessDisabled_Text": "\u26a0\ufe0f O Kindle n\u00e3o vai mais oferecer suporte ao download de livros para acesso offline no navegador da Web. Voc\u00ea pode continuar a ler seus livros j\u00e1 baixados offline at\u00e9 a pr\u00f3xima vez em que sair da sua conta.", "k_provide_feedback_error": "Ocorreu um erro ao tentar enviar esta mensagem. Tente novamente mais tarde.", "k_provide_feedback_sending": "Enviando...", "k_provide_feedback_success": "Mensagem enviada com sucesso! &#x2713;", "k_provide_feedback_text": "Digite sua pergunta ou sugest\u00f5es no espa\u00e7o abaixo.", "k_provide_feedback_title": "Fale conosco", "k_send_feedback_button": "Enviar", "k_store_open_failed_Error_Text": "Ocorreu um erro ao abrir a Loja Kindle. Tente novamente mais tarde.", "k_store_open_failed_Error_Title": "N\u00e3o \u00e9 poss\u00edvel abrir a loja Kindle", "k_store_open_failed_offline_Error_Text": "\u00c9 necess\u00e1ria uma conex\u00e3o com a Internet para essa opera\u00e7\u00e3o.", "k_store_open_failed_offline_Error_Title": "N\u00e3o \u00e9 poss\u00edvel abrir a loja Kindle", "k_text_me_widget_EmailPhone": "Inserir e-mail ou celular", "k_text_me_widget_GetApp": "Obter aplicativo agora", "k_text_me_widget_invalid_input": "Insira um n\u00famero de telefone ou endere\u00e7o de e-mail v\u00e1lidos.", "k_text_me_widget_send_email_fail": "Falha ao enviar um e-mail. Tente novamente mais tarde.", "k_text_me_widget_send_email_success": "O aplicativo est\u00e1 a caminho! Consulte seu e-mail.", "k_text_me_widget_send_sms_fail": "Falha ao enviar um texto. Tente novamente mais tarde.", "k_text_me_widget_send_sms_success": "O aplicativo est\u00e1 a caminho! Consulte seu telefone.", "k_text_me_widget_service_error": "Ocorreu um erro. Tente novamente mais tarde.", "k_text_me_widget_submitting_request": "Enviando solicita\u00e7\u00e3o...", "k_window_title": "Kindle Cloud Reader", "metro_tutorial_children_book_click_instruction": "Dica: clique duas vezes sobre o texto para ampli\u00e1-lo", "metro_tutorial_children_book_tap_instruction": "Dica: toque duas vezes sobre o texto para ampli\u00e1-lo", "metro_tutorial_children_book_text": "Pelas \u00e1guas frias, os animais nadam at\u00e9 chegarem a uma ilha, pouco antes do nascer do sol.", "metro_tutorial_comic_book_click_instruction1": "Dica: clique duas vezes sobre os pain\u00e9is para ampli\u00e1-los", "metro_tutorial_comic_book_click_instruction2": "e clique \u00e0 direita para navegar pelos pain\u00e9is com zoom.", "metro_tutorial_comic_book_tap_instruction1": "Dica: toque duas vezes nos pain\u00e9is para mpli\u00e1-los", "metro_tutorial_comic_book_tap_instruction2": "e deslize o dedo para navegar pelos pain\u00e9is com zoom.", "metro_tutorial_commic_book_dialogue": "N\u00d3S SABEMOS SOBRE A M\u00c1QUINA DO APOCALIPSE!"};
var Kindle = Kindle || {};Kindle.strings  = Kindle.strings || {};Kindle.strings['de-DE']={"k_L_bad_download_Error_Text": "Laden Sie dieses Buch aus der Cloud herunter, wenn Sie es auf Ihrem Kindle lesen m\u00f6chten.", "k_L_bad_download_Error_Title": "Fehler beim \u00d6ffnen der Inhalte", "k_L_bookNotAvailable_Text": "\u00dcberpr\u00fcfen Sie Ihre Netzwerkverbindung und versuchen Sie es erneut.", "k_L_bookNotAvailable_Title": "Inhalt kann nicht angezeigt werden", "k_L_cacheError": "Fehler beim Speichern der Anwendung. Klicken Sie hier, um es erneut zu versuchen.", "k_L_cacheError_pad": "Fehler beim Speichern der Anwendung. Tippen Sie hier, um es erneut zu versuchen.", "k_L_cached": "&#x2713; Anwendung f\u00fcr die Offline-Verwendung bereit", "k_L_caching": "Anwendung wird f\u00fcr Offline-Modus gespeichert", "k_L_contact_us": "Kontakt", "k_L_context_download_pin": "Buch herunterladen und anheften", "k_L_context_pin": "Buch anheften", "k_L_context_read": "Buch \u00f6ffnen", "k_L_context_remove": "Buch entfernen", "k_L_context_revoke_sample": "Leseprobe l\u00f6schen", "k_L_deregister_title": "Abmelden", "k_L_dialog_delete": "L\u00f6schen", "k_L_dialog_deleteFreeTrial_prompt_text": "Dadurch wird das Buch dauerhaft aus Ihrem Konto entfernt.", "k_L_dialog_deleteFreeTrial_prompt_title": "Probe-Abonnement l\u00f6schen?", "k_L_dialog_delete_cancel": "Abbrechen", "k_L_dialog_delete_prompt": "Dadurch wird <i>${bookTitle}</i> dauerhaft aus Ihrem Konto entfernt.", "k_L_dialog_delete_prompt_title": "Leseprobe l\u00f6schen?", "k_L_help": "Hilfe", "k_L_jp_merchandise_dialog_message": "Laden Sie f\u00fcr einen begrenzten Zeitraum kostenlose Kapitel aus den unten aufgef\u00fchrten Manga-Titeln herunter", "k_L_jp_merchandise_dialog_title": "Kostenloser Manga f\u00fcr einen begrenzten Zeitraum verf\u00fcgbar", "k_L_legal_notices": "Rechtliche Hinweise", "k_L_loadFailedError_Text": "Beim Laden der Bibliothek ist ein Fehler aufgetreten.", "k_L_loadFailedError_Title": "Fehler beim Laden der Bibliothek", "k_L_openBookAsinNotSpecified_Text": "Der zu \u00f6ffnende Titel wurde nicht festgelegt.", "k_L_openBookAsinNotSpecified_Title": "Titel nicht festgelegt", "k_L_openBookContentLicenseExceededError_Text": "Sie haben die Anzahl der Ger\u00e4te \u00fcberschritten, auf denen dieses Element gelesen werden kann. Sie k\u00f6nnen ein nicht mehr verwendetes Ger\u00e4t abmelden und den Inhalt l\u00f6schen, um dieses Element herunterzuladen. Sie k\u00f6nnen alternativ eine weitere Kopie im Kindle-Shop erwerben.", "k_L_openBookContentLicenseExceededError_Title": "Lizenzgrenzwert erreicht", "k_L_openBookContentLoanEndedError_Text": "Dieser Titel wurde an Sie verliehen und kann nicht ge\u00f6ffnet werden, da der Verleih beendet wurde.", "k_L_openBookContentLoanEndedError_Title": "Titel nicht verf\u00fcgbar", "k_L_openBookContentLoanedError_Text": "Dieser Titel kann nicht ge\u00f6ffnet werden, da er derzeit verliehen ist.", "k_L_openBookContentLoanedError_Title": "Titel nicht verf\u00fcgbar", "k_L_openBookContentRentalExpiredErrorMetro_Text": "Der Leihzeitraum dieses Buchs ist abgelaufen. Besuchen Sie den Kindle-Shop, um den Verleih zu verl\u00e4ngern oder das Buch zu kaufen. <br /><br />Ihre Markierungen und Notizen sind auch nach Ablauf des Leihzeitraums unter ${link} verf\u00fcgbar.", "k_L_openBookContentRentalExpiredErrorMetro_Title": "Leihfrist abgelaufen", "k_L_openBookContentRentalExpiredError_Text": "Die Leihfrist des Buchs ist abgelaufen. Verwenden Sie die Schaltfl\u00e4che \\\"Verl\u00e4ngern oder kaufen\\\" unten, um dieses Buch erneut zu leihen oder zu kaufen.", "k_L_openBookContentRentalExpiredError_Title": "Leihfrist abgelaufen", "k_L_openBookContentUnsupportedErrorMetro_Text": "Dieser Titel ist unter Kindle f\u00fcr Windows 8 nicht verf\u00fcgbar.", "k_L_openBookContentUnsupportedErrorMetro_Title": "Titel nicht verf\u00fcgbar", "k_L_openBookContentUnsupportedError_Text": "Dieser Titel ist in Kindle Cloud Reader nicht verf\u00fcgbar.", "k_L_openBookContentUnsupportedError_Title": "Titel nicht verf\u00fcgbar", "k_L_openBookContentUpgrade_ButtonText": "Weiter", "k_L_openBookContentUpgrade_Text": "Eine neue Version dieses Buchs ist verf\u00fcgbar. Die neue Version wird heruntergeladen, w\u00e4hrend sie weiterlesen.", "k_L_openBookContentUpgrade_Title": "Neue Version", "k_L_openBookGeoLocationNotAllowed_Text": "Dieser Titel ist in diesem Land nicht verf\u00fcgbar.", "k_L_openBookGeoLocationNotAllowed_Title": "Titel nicht verf\u00fcgbar", "k_L_openBookLoadFailure_Text": "Fehler beim \u00d6ffnen des ausgew\u00e4hlten Elements. Versuchen Sie es sp\u00e4ter erneut.", "k_L_openBookLoadFailure_Title": "Fehler beim \u00d6ffnen der Inhalte", "k_L_openBookNetworkError_Text": "Fehler beim \u00d6ffnen des ausgew\u00e4hlten Elements. Versuchen Sie es sp\u00e4ter erneut.", "k_L_openBookNetworkError_Title": "Fehler beim \u00d6ffnen der Inhalte", "k_L_openBookSessionLimitExceededError_Text": "Sie haben die maximale Anzahl an gleichzeitigen Sitzungen f\u00fcr diesen Titel erreicht. Versuchen Sie es sp\u00e4ter erneut.", "k_L_openBookSessionLimitExceededError_Title": "Sitzungsgrenzwert erreicht", "k_L_openBookTimeoutError_Text": "Ein Verbindungsfehler ist aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_L_openBookTimeoutError_Title": "Netzwerkverbindungsfehler", "k_L_outdatedChrome_Text": "Diese Version von Google Chrome unterst\u00fctzt das aktuelle Format der Chrome-Erweiterung nicht. ${linkStart}Google Chrome aktualisieren${linkEnd}, um den Offline-Support zu aktivieren.", "k_L_outdatedChrome_Title": "Offline-Support kann nicht aktiviert werden", "k_L_privacy": "Datenschutz", "k_L_progress_dialog_message": "Dieser Titel wird f\u00fcr den Offline-Lesemodus auf der Registerkarte \\\"Heruntergeladen\\\" gespeichert, bis Sie ihn entfernen. K\u00fcrzlich ge\u00f6ffnete B\u00fccher werden automatisch heruntergeladen und aufbewahrt, bis Speicherplatz f\u00fcr neue Inhalte erforderlich ist.", "k_L_progress_dialog_title": "Buch wird heruntergeladen und angeheftet", "k_L_removeBookError_Text": "Beim Entfernen des ausgew\u00e4hlten Elements ist ein Fehler aufgetreten. L\u00f6schen Sie heruntergeladene Inhalte von diesem Computer, indem Sie im Men\u00fc \\\"Einstellungen\\\" die Option \\\"Abmelden\\\" ausw\u00e4hlen.", "k_L_removeBookError_Title": "Fehler beim Entfernen der Inhalte", "k_L_removeBookNetworkError_Text": "Beim Entfernen des ausgew\u00e4hlten Elements ist ein Fehler aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_L_removeBookNetworkError_Title": "Fehler beim Entfernen der Inhalte", "k_L_revokeFailed_Text": "F\u00fcr diesen Vorgang ist eine Internetverbindung erforderlich.", "k_L_revokeFailed_Title": "Buch kann nicht gel\u00f6scht werden", "k_L_sample_badge_text": "LESEPROBE", "k_L_saveBookOutOfSpace_Text": "Es ist nicht gen\u00fcgend Speicherplatz vorhanden, um dieses Element im Offline-Modus zu lesen. Sie k\u00f6nnen diesen Titel online weiterlesen. Sie k\u00f6nnen Speicherplatz freigeben, indem Sie andere gespeicherte Titel entfernen. Sie k\u00f6nnen Ihren Offline-Speicherplatz erh\u00f6hen. Weitere Informationen finden Sie ${linkStart}hier${linkEnd}.", "k_L_saveBookOutOfSpace_Title": "Fehler beim Speichern der Inhalte", "k_L_sort_author": "Sortieren nach Autor", "k_L_sort_author_label": "Autor", "k_L_sort_recent": "Sortieren nach k\u00fcrzlich gelesenen", "k_L_sort_recent_label": "K\u00fcrzlich gelesen", "k_L_sort_title": "Sortieren nach Titel", "k_L_sort_title_label": "Titel", "k_L_storeNotAvailable_Text": "Es ist eine Internetverbindung erforderlich, um Eink\u00e4ufe im Kindle-Shop zu t\u00e4tigen.", "k_L_storeNotAvailable_Title": "Keine Internetverbindung", "k_L_syncFailedError_Text": "Bei der Synchronisierung ist ein Fehler aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_L_syncFailedError_Title": "Synchronisierung fehlgeschlagen", "k_L_syncFailedOfflineError_Text": "Es ist eine Internetverbindung erforderlich, um Ihre Bibliothek zu synchronisieren.", "k_L_syncFailedOfflineError_Title": "Synchronisierung fehlgeschlagen", "k_L_terms_of_use": "Nutzungsbedingungen", "k_L_text_me_wdiget_Instruction": "Geben Sie Ihre E-Mail-Adresse oder Telefonnummer ein, um einen Download-Link zu erhalten", "k_L_text_me_widget_Text": "Es tut uns leid. Der <b>Kindle Cloud Reader</b> kann dieses Buch nicht \u00f6ffnen, Sie k\u00f6nnen es aber mit unserer kostenlosen Kindle App lesen.", "k_L_toolbar_cloud_button": "Cloud-Inhalte", "k_L_toolbar_cloud_button_tooltip": "Cloud-Inhalte", "k_L_toolbar_cloud_label": "Cloud", "k_L_toolbar_cloud_label_tooltip": "Cloud", "k_L_toolbar_cover_slider": "Titelseitengr\u00f6\u00dfe", "k_L_toolbar_cover_slider_tooltip": "Titelseitengr\u00f6\u00dfe", "k_L_toolbar_downloaded_button": "Heruntergeladene Inhalte", "k_L_toolbar_downloaded_button_tooltip": "Heruntergeladene Inhalte", "k_L_toolbar_downloaded_label": "Heruntergeladen", "k_L_toolbar_downloaded_label_tooltip": "Heruntergeladen", "k_L_toolbar_grid_button": "Rasteransicht", "k_L_toolbar_grid_button_tooltip": "Rasteransicht", "k_L_toolbar_list_button": "Listenansicht", "k_L_toolbar_list_button_tooltip": "Listenansicht", "k_L_toolbar_manage_button": "Verwalten", "k_L_toolbar_manage_button_tooltip": "Verwalten", "k_L_toolbar_notebook_button": "Ihre Notizen und Markierungen", "k_L_toolbar_notebook_button_tooltip": "Ihre Notizen und Markierungen", "k_L_toolbar_search_button": "Suchen", "k_L_toolbar_search_button_tooltip": "Suche", "k_L_toolbar_sort_button": "Sortieren nach", "k_L_toolbar_sort_button_tooltip": "Sortieren nach", "k_L_toolbar_store_button": "Kindle-Shop", "k_L_toolbar_store_button_tooltip": "Kindle-Shop", "k_L_toolbar_sync_button": "Synchr.", "k_L_toolbar_sync_button_tooltip": "Synchr.", "k_L_trial_badge_text": "PROBE-ABO", "k_L_unknownError_Text": "Fehler beim \u00d6ffnen des ausgew\u00e4hlten Elements. Versuchen Sie es sp\u00e4ter erneut.", "k_L_unknownError_Title": "Fehler beim \u00d6ffnen der Inhalte", "k_RWIS_banner_message_desktop": "Wenn Sie sp\u00e4ter weiterlesen m\u00f6chten, dr\u00fccken Sie ${bookmarkCommand}, um ein Lesezeichen f\u00fcr diese Seite hinzuzuf\u00fcgen, oder ${getAppStart}laden Sie eine kostenlose Lese-App${getAppEnd} f\u00fcr Ihr Smartphone oder Tablet herunter.", "k_RWIS_banner_message_ipad": "Wenn Sie sp\u00e4ter weiterlesen m\u00f6chten, laden Sie unsere ${getIPadAppStart}kostenlose iPad-App${getIPadAppEnd} herunter.", "k_R_annotation_pane_bookmark_label": "Lesezeichen", "k_R_annotation_pane_cancel": "Abbrechen", "k_R_annotation_pane_delete": "L\u00f6schen", "k_R_annotation_pane_delete_confirm": "L\u00f6schen best\u00e4tigen?", "k_R_annotation_pane_dont_delete": "Nicht l\u00f6schen", "k_R_annotation_pane_edit": "Notiz bearbeiten", "k_R_annotation_pane_empty_note": "Dieses Buch enth\u00e4lt keine Notizen oder Markierungen.", "k_R_annotation_pane_goto": "Zur Position wechseln", "k_R_annotation_pane_next": "Klicken, um zum n\u00e4chsten Element zu wechseln", "k_R_annotation_pane_no": "Nein", "k_R_annotation_pane_note_highlight": "Markierung", "k_R_annotation_pane_note_label": "Notiz", "k_R_annotation_pane_notes_location": "Position ${location}", "k_R_annotation_pane_notes_page": "Seite ${page}", "k_R_annotation_pane_previous": "Klicken, um zum vorherigen Element zu wechseln", "k_R_annotation_pane_save": "Notiz speichern", "k_R_annotation_pane_yes": "Ja", "k_R_beginning_title": "Anfang", "k_R_book_extras_title": "Buch-Extras", "k_R_context_createHighlight": "Markierung", "k_R_context_createNote": "Notiz", "k_R_context_deleteHighlight": "Markierung l\u00f6schen", "k_R_context_editNote": "Notiz bearbeiten", "k_R_cover_title": "Titelseite", "k_R_dialog_annotation_pane_title": "Notizen und Markierungen", "k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Notizen und Markierungen", "k_R_dialog_editNote_cancel": "Abbrechen", "k_R_dialog_editNote_delete": "L\u00f6schen", "k_R_dialog_editNote_placeholder": "Geben Sie hier Ihre Notiz ein.", "k_R_dialog_editNote_save": "Speichern", "k_R_dialog_editNote_title_create": "Notiz erstellen", "k_R_dialog_editNote_title_edit": "Notiz bearbeiten", "k_R_dialog_sitb_message_indexing": "Das Buch wird indiziert. Dies kann einen Augenblick dauern.", "k_R_dialog_sitb_pane_title_indexing": "Indizierung l\u00e4uft...", "k_R_dialog_sitb_pane_title_notAvailable": "Suche nicht verf\u00fcgbar", "k_R_dialog_sitb_pane_title_oneResultFound": "${numberResults} Ergebnis gefunden", "k_R_dialog_sitb_pane_title_resultsFound": "${numberResults} Ergebnisse gefunden", "k_R_dialog_sitb_pane_title_searching": "Suche l\u00e4uft...", "k_R_dialog_sitb_result_current_location": "Sie befinden sich bei Position ${location}", "k_R_dialog_sitb_result_current_location_past": "Sie waren bei Position ${location}", "k_R_dialog_sitb_result_current_page": "Sie befinden sich auf Seite ${page}", "k_R_dialog_sitb_result_current_page_past": "Sie befanden sich auf Seite ${page}", "k_R_dialog_sitb_result_location": "Position ${location}", "k_R_dialog_sitb_result_page": "Seite ${page}", "k_R_dialog_unoptimizedFormat_close": "Buch schlie\u00dfen", "k_R_dialog_unoptimizedFormat_continue": "Trotzdem fortfahren", "k_R_dialog_unoptimizedFormat_message": "Dieses Buch ist auf diesem Ger\u00e4t nicht f\u00fcr Kindle Cloud Reader optimiert. Installieren Sie ${linkStart}Kindle f\u00fcr iPad${linkEnd}, um dieses Element zu lesen.", "k_R_dialog_unoptimizedFormat_metro_message": "Dieses Buch ist nicht f\u00fcr Kindle f\u00fcr Windows 8 optimiert.", "k_R_dialog_unoptimizedFormat_stopSave": "Speichern abbrechen", "k_R_dialog_unoptimizedFormat_title": "Nicht unterst\u00fctzter Inhalt", "k_R_dialog_upgrade_btn": "Jetzt aktualisieren", "k_R_dialog_upgrade_countryBlk_btn": "Zum Windows Store", "k_R_dialog_upgrade_countryBlk_msg": "Leider unterst\u00fctzt diese Kindle-Version keine Inhalte in Ihrer Sprache und/oder Ihrer Region. <br/>Besuchen Sie bitte den Windows Store, um zu pr\u00fcfen, ob ein Update verf\u00fcgbar ist.", "k_R_dialog_upgrade_countryBlk_title": "Kindle in Ihrer Region", "k_R_dialog_upgrade_langSupport_btn": "Jetzt aktualisieren", "k_R_dialog_upgrade_langSupport_msg": "Bevor Sie mit dem Lesen beginnen, m\u00fcssen Sie eine kostenlose Aktualisierung in ihrer Sprache durchf\u00fchren.", "k_R_dialog_upgrade_langSupport_title": "Update verf\u00fcgbar", "k_R_dialog_upgrade_msg": " Bevor Sie mit dem Lesen beginnen, m\u00fcssen Sie den Kindle kostenlos aktualisieren, damit er alle aktuellen Funktionen unterst\u00fctzt.", "k_R_dialog_upgrade_title": "Aktualisierung verf\u00fcgbar", "k_R_dictionary_labels_Derivatives": "Abgeleitete W\u00f6rter", "k_R_dictionary_labels_Ipa": "Internationales phonetisches Alphabet", "k_R_dictionary_labels_Notes": "Notizen", "k_R_dictionary_labels_Origin": "Herkunft", "k_R_dictionary_labels_Phrases": "S\u00e4tze", "k_R_dictionary_labels_Usage": "Verwendung", "k_R_dictionary_loading": "L\u00e4dt", "k_R_dictionary_not_available": "W\u00f6rterbuch nicht verf\u00fcgbar.", "k_R_dictionary_not_found": "Keine W\u00f6rterbuchergebnisse.", "k_R_dictionary_offline": "Das W\u00f6rterbuch ist verf\u00fcgbar, wenn eine Verbindung mit dem Internet besteht.", "k_R_dictionary_view_full": "Vollst\u00e4ndige Definition anzeigen", "k_R_dictionary_view_full_i18n": "Vollst\u00e4ndige Definition", "k_R_download_disk_error": "Heruntergeladen: ${percent}(<a href=\\\"${url}\\\" target=\\\"_blank\\\" id=\\\"kindleReader_download_disk_error\\\">Browser-Speicher voll</a>)", "k_R_download_network_error": "Download angehalten: ${percent} (Fehler)", "k_R_downloaded": "${percent} % heruntergeladen", "k_R_downloading": "Download: ${percent} %", "k_R_embedded_logo_tooltip": "Kindle Cloud Reader in neuer Registerkarte \u00f6ffnen", "k_R_feature_not_available_dialog_buy_btn": "Vollversion kaufen", "k_R_feature_not_available_dialog_text": "Diese Funktion ist in der Vollversion des Buches aktiviert.", "k_R_feature_not_available_dialog_title": "Funktion nicht verf\u00fcgbar", "k_R_goto_bookmark_title": "Lesezeichen...", "k_R_goto_dialog_error": "Bitte geben Sie eine g\u00fcltige Positionsnummer (${minLocation}-${maxLocation}) ein.", "k_R_goto_dialog_error_snapview": "Bitte geben Sie eine g\u00fcltige Positionsnummer ein.", "k_R_goto_dialog_location_range": "(${minLocation} - ${maxLocation})", "k_R_goto_dialog_page_range": "(${range})", "k_R_goto_location_title": "Position ...", "k_R_goto_menu_goto_button": "Zur Position wechseln", "k_R_goto_menu_goto_location": "von ${lastLocation}", "k_R_goto_menu_goto_location_metro_title": "Position eingeben", "k_R_goto_menu_goto_location_title": "Position eingeben", "k_R_goto_menu_goto_message": "Position ", "k_R_goto_menu_goto_page": "von ${lastPage}", "k_R_goto_menu_goto_page_button": "Zu Seite", "k_R_goto_menu_goto_page_message": "Seite ", "k_R_goto_menu_goto_page_title": "Seite eingeben", "k_R_goto_menu_goto_page_title_metro": "Seite eingeben", "k_R_goto_menu_title": "Gehe zu", "k_R_goto_page_dialog_error": "Geben Sie eine g\u00fcltige Seitenzahl ein (${range}).", "k_R_goto_page_dialog_error_snapview": "Geben Sie eine g\u00fcltige Seitenzahl ein.", "k_R_goto_page_title": "Seite...", "k_R_menuButton_back": "Zur\u00fcck", "k_R_menuButton_back_tooltip": "Zur\u00fcck", "k_R_menuButton_bookmark": "Lesezeichen", "k_R_menuButton_bookmark_tooltip": "Lesezeichen ein/ausschalten", "k_R_menuButton_columnMode": "Spalten", "k_R_menuButton_columnMode_tooltip": "Zwischen Spalten hin- und herschalten", "k_R_menuButton_controlPane": "Anzeigen", "k_R_menuButton_controlPane_tooltip": "Einstellungen anzeigen", "k_R_menuButton_enterImmersive_tooltip": "Umfassenden Lesemodus starten", "k_R_menuButton_exitImmersive_tooltip": "Umfassenden Lesemodus beenden", "k_R_menuButton_goto": "Gehe zu", "k_R_menuButton_goto_tooltip": "Men\u00fc Gehe zu", "k_R_menuButton_notesAndMarks": "Notizen/Markierungen", "k_R_menuButton_notesAndMarks_tooltip": "Notizen und Markierungen anzeigen", "k_R_menuButton_pin_start_metro": "Anheften", "k_R_menuButton_pin_start_metro_tooltip": "Anheften", "k_R_menuButton_sync": "Synchr.", "k_R_menuButton_sync_tooltip": "Synchronisieren", "k_R_menuInput_sitb_placeholder": "Suchen", "k_R_pageArrow_next": "N\u00e4chste Seite", "k_R_pageArrow_prev": "Vorherige Seite", "k_R_pageLoadError_Text": "Beim Laden der n\u00e4chsten Seite ist ein Fehler aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_R_pageLoadError_Title": "Fehler beim Laden der Inhalte", "k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Screenreader werden derzeit nicht unterst\u00fctzt. Wenn Sie zum Lesen einen Screenreader nutzen m\u00f6chten, wechseln Sie bitte zur Kindle App auf Ihrem Ger\u00e4t.", "k_R_search_placeholder": "Im Buch finden", "k_R_settings_apply_button": "Einstellungen \u00fcbernehmen", "k_R_settings_colorMode_black": "Schwarz", "k_R_settings_colorMode_label": "FARBMODUS", "k_R_settings_colorMode_label_metro": "Farbmodus", "k_R_settings_colorMode_sepia": "Sepia", "k_R_settings_colorMode_white": "Wei\u00df", "k_R_settings_column_disabled_msg": "Dieser Titel ist nur in der einspaltigen Ansicht verf\u00fcgbar.", "k_R_settings_column_off_button": "Aus", "k_R_settings_column_on_button": "Ein", "k_R_settings_fontSize_label": "SCHIFTGR\u00d6SSE", "k_R_settings_fontSize_label_metro": "Schriftgr\u00f6\u00dfe", "k_R_settings_fontSize_tooltip_metro": "Aa", "k_R_settings_margins_label": "RAHMEN", "k_R_settings_margins_label_metro": "R\u00e4nder", "k_R_settings_multiColumnMode_label": "NUR EINE SPALTE", "k_R_settings_multiColumnMode_label_metro": "Nur eine Spalte", "k_R_settings_sampleText": "Sch\u00f6n, aufgeweckt und reich, bei einem sorgenfreien Zuhause und einem gl\u00fccklichen Naturell war Emma Woodhouse offenbar mit einigen der erfreulichsten Vorz\u00fcge des Daseins gesegnet und hatte beinahe einundzwanzig Jahre fast ohne jeden Anlass zu Kummer und Verdruss auf dieser Welt verbracht.", "k_R_settings_showLocation_label": "GELESENE SEITE ANZEIGEN", "k_R_settings_showLocation_label_metro": "Gelesene Seite anzeigen", "k_R_settings_title_metro": "Anzeigeoptionen", "k_R_show_database_title": "Datenbank anzeigen", "k_R_sitb_error_common_message": "Es ist ein Fehler aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_R_sitb_error_common_title": "Suche nicht abgeschlossen", "k_R_sitb_error_index_not_available_message": "Dieses Buch wurde leider noch nicht f\u00fcr die Suche aktiviert. Versuchen Sie es sp\u00e4ter erneut.", "k_R_sitb_error_index_not_available_title": "Suche nicht verf\u00fcgbar", "k_R_sitb_error_language_not_supported_message": "Die Suche ist f\u00fcr diesen Titel nicht verf\u00fcgbar, weil die Sprache derzeit nicht unterst\u00fctzt wird. Das Amazon Kindle-Team arbeitet an der L\u00f6sung dieses Problems.", "k_R_sitb_error_language_not_supported_title": "Suche nicht verf\u00fcgbar", "k_R_sitb_error_language_undefined_message": "Die Suchfunktion ist f\u00fcr diesen Titel aufgrund eines Problems mit der Index-Erstellung f\u00fcr diesen Titel nicht verf\u00fcgbar.", "k_R_sitb_error_language_undefined_title": "Suche nicht verf\u00fcgbar", "k_R_sitb_error_offline_message": "Eine Netzwerkverbindung ist erforderlich, um diese Aktion durchzuf\u00fchren. Stellen Sie eine Verbindung mit einem Netzwerk her.", "k_R_sitb_error_offline_title": "Keine Netzwerkverbindung", "k_R_slider_loc_popup": "Pos. ${location}", "k_R_slider_location": "Position ${location} von ${totalLocations}", "k_R_slider_location_popup": "Position ${location}", "k_R_slider_pageNumber": "Seite ${page} von ${totalPages}", "k_R_slider_pageNumber_popup": "Seite ${page}", "k_R_slider_percentage": "${percent} %", "k_R_syncPosition_PN_labelText": "Sie befinden sich derzeit auf Seite ${currentPage}. Die zuletzt gelesene Seite ist ${page} auf \\\"${deviceName}\\\" am ${date} um ${time}. Was m\u00f6chten Sie tun?", "k_R_syncPosition_alreadyFurthest_Text": "Sie befinden sich derzeit auf der auf allen Ger\u00e4ten zuletzt gelesenen Seite.", "k_R_syncPosition_cancelText": "Abbrechen", "k_R_syncPosition_cantSync_Text": "Bei der Synchronisierung ist ein Fehler aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_R_syncPosition_labelText": "Sie befinden sich derzeit bei Position ${currentLocation}. Die zuletzt mit ${deviceName} gelesene Position ist ${location}, gelesen am ${date} um ${time}. Was m\u00f6chten Sie tun?", "k_R_syncPosition_noDeviceName_PN_labelText": "Sie befinden sich derzeit auf Seite ${currentPage}. Die zuletzt gelesene Seite auf allen Ger\u00e4ten ist ${page}. Was m\u00f6chten Sie tun?", "k_R_syncPosition_noDeviceName_labelText": "Sie befinden sich derzeit bei Position ${currentLocation}. Die auf allen Ihren Ger\u00e4ten zuletzt gelesene Position ist ${location}. Was m\u00f6chten Sie tun?", "k_R_syncPosition_page_reset": "Diese als zuletzt gelesene Seite festlegen", "k_R_syncPosition_page_sync": "Zur zuletzt gelesenen Seite gehen", "k_R_syncPosition_reset": "Diese Position zur zuletzt gelesenen bestimmen", "k_R_syncPosition_sync": "Zur zuletzt gelesenen Position gehen", "k_R_syncPosition_title": "Zuletzt gelesene Seite synchronisieren", "k_R_table_of_contents_title": "Inhaltsverzeichnis", "k_R_toolbar_iOS_sample_close_button": "Schlie\u00dfen", "k_R_toolbar_library_button": "Bibliothek", "k_R_toolbar_library_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Meine Bibliothek", "k_R_toolbar_library_button_tooltip": "Bibliothek", "k_R_unimplementedFeature_Error_Text": "", "k_R_unimplementedFeature_Error_Title": "Funktion nicht implementiert", "k_addToHomeScreen_strong_text": "Zur Startseite hinzuf\u00fcgen", "k_addToHomeScreen_text": "Installieren Sie den Kindle Cloud Reader auf Ihrem iPad: Tippen Sie auf den Pfeil und anschlie\u00dfend auf ${addToHomeText}", "k_app_device_name_template": "%FIRST_NAME%'s%DUPE_STRATEGY_1ST%Kindle Cloud Reader", "k_author_conjunction": " und ", "k_banner_RWIS_message_desktop": "Lesen Sie dieses Buch mit unserer kostenlosen Kindle-App auf Ihrem Telefon oder Tablet weiter.", "k_banner_RWIS_message_desktop1": "Lesen Sie dieses Buch mit der kostenlosen Kindle App auf Ihrem Telefon oder Tablet weiter und nutzen Sie zus\u00e4tzliche Kindle-Funktionen.", "k_banner_RWIS_message_ipad": "Lesen Sie dieses Buch in der kostenlosen Kindle App weiter.", "k_banner_RWIS_message_kp": "Unterwegs kostenlos lesen \u2013 Laden Sie Kindle f\u00fcr Android, iOS, PC, Mac und mehr herunter.", "k_banner_bookmark_command": "STRG+D", "k_banner_bookmark_command_mac": "Befehl+D", "k_banner_eucookie_message_desktop": "Wir verwenden Cookies und \u00e4hnliche Tools (zusammenfassend \u201eCookies\u201c genannt) ausschlie\u00dflich zur Bereitstellung unserer Dienste. Wir verwenden sie insbesondere, um zu erkennen, wenn Sie sich gerade anmelden, um Ihre Einstellungen zu speichern und um Inhalte bereitzustellen. Andere Amazon-Dienste verwenden Cookies m\u00f6glicherweise f\u00fcr zus\u00e4tzliche Zwecke. F\u00fcr weitere Informationen dar\u00fcber, wie Amazon Cookies verwendet, lesen Sie bitte den Amazon ", "k_banner_eucookie_message_learn_more": "Cookie-Hinweis", "k_banner_eucookie_message_postHref": ".", "k_banner_eucookie_message_refLink": "https:\\/\\/www.amazon.de\\/gp\\/help\\/customer\\/display.html?ie=UTF8&nodeId=201890250", "k_common_cancel_button": "Abbrechen", "k_common_close_button": "Schlie\u00dfen", "k_common_confirm_button": "OK", "k_common_learn_more": "Mehr dazu", "k_dialog_appCache_button_text": "OK", "k_dialog_appCache_instruction1_text": "Klicken Sie auf die Home-Taste des iPads, um diese Anwendung zu beenden.", "k_dialog_appCache_instruction2_text": "Klicken Sie zweimal auf die Home-Taste des iPads, um alle aktiven Anwendungen (unten im Bildschirm Ihres iPads) anzuzeigen.", "k_dialog_appCache_instruction3_text": "Suchen Sie nach dem Symbol der Safari-Anwendung, und halten Sie das Symbol gedr\u00fcckt, bis eine Minus-Schaltfl\u00e4che in der oberen linken Ecke angezeigt wird. Tippen Sie auf die Minus-Schaltfl\u00e4che.", "k_dialog_appCache_instruction4_text": "Suchen Sie nach aktiven Instanzen des Kindle Cloud Reader, und halten Sie das entsprechende Symbol gedr\u00fcckt, bis eine Minus-Schaltfl\u00e4che in der oberen linken Ecke angezeigt wird. Tippen Sie auf die Minus-Schaltfl\u00e4che.", "k_dialog_appCache_instruction5_text": "Starten Sie Safari neu, und versuchen Sie dann erneut, read.amazon.com zu laden.", "k_dialog_appCache_message_text": "Beim Speichern der Anwendung f\u00fcr den Offline-Lesemodus ist ein Fehler aufgetreten. Um diesen Fehler zu beheben, m\u00fcssen Sie die Safari-Anwendung und alle aktiven Instanzen des Kindle Cloud Reader neu starten.", "k_dialog_appCache_readmore_text": "Wie starte ich Safari und/oder Kindle Cloud Reader neu?", "k_dialog_appCache_step1_text": "Schritt 1.", "k_dialog_appCache_step2_text": "Schritt 2.", "k_dialog_appCache_step3_text": "Schritt 3.", "k_dialog_appCache_step4_text": "Schritt 4.", "k_dialog_appCache_step5_text": "Schritt 5.", "k_dialog_appCache_title_text": "Fehler beim Speichern der Anwendung", "k_dialog_dbBlocked_Text": "Beim Abmelden ist ein Fehler aufgetreten. Dieses Problem l\u00e4sst sich m\u00f6glicherweise durch Schlie\u00dfen anderer Registerkarten beheben, auf denen Kindle Cloud Reader ausgef\u00fchrt wird.", "k_dialog_dbBlocked_Title": "Abmelden", "k_dialog_enableOffline_button_text": "OK", "k_dialog_enable_offline_firefox_msg": "Kindle Cloud Reader ben\u00f6tigt Ihre Erlaubnis, um B\u00fccher f\u00fcr den Offline-Lesemodus zu speichern. Wenn Sie in Firefox \\\"Nie f\u00fcr diese Seite\\\" ausgew\u00e4hlt haben, ${linkStart}befolgen Sie diese Schritte${linkEnd}, um den Offline-Lesemodus in Firefox zu aktivieren.", "k_dialog_enable_offline_title": "Offline-Lesemodus aktivieren", "k_dialog_ffPrompting_Text": "Lassen Sie zu, dass der Kindle mehr als 50 MB Daten auf Ihrem Computer f\u00fcr die Offline-Verwendung speichert.<br /><br />Lesen Sie das Kindle Cloud Reader-Handbuch f\u00fcr ${linkStart}Fehlerbehebung und Ressourcen${linkEnd}, wenn Sie Hilfe ben\u00f6tigen.", "k_dialog_ffPrompting_Title": "Lassen Sie die Offline-Speicherung zu.", "k_dialog_logoutConfirm_continue": "Mit der Abmeldung fortfahren", "k_dialog_logoutConfirm_message": "Wenn Sie sich bei Kindle abmelden, werden alle heruntergeladenen B\u00fccher aus Ihrem Browser entfernt. Wenn Sie sich wieder anmelden, k\u00f6nnen Sie diese B\u00fccher nur weiterlesen, wenn Sie mit dem Internet verbunden sind.", "k_dialog_logout_message": "Warten Sie, w\u00e4hrend Ihre heruntergeladenen Inhalte gel\u00f6scht werden.", "k_dialog_logout_title": "Abmeldung bei Kindle Cloud Reader wird ausgef\u00fchrt ...", "k_dialog_message_dismissButton_text": "OK", "k_dialog_message_retryButton_text": "Erneut versuchen", "k_dialog_offlineLogout_Text": "Es ist eine Internetverbindung erforderlich, um sich beim Kindle Cloud Reader abzumelden.", "k_dialog_offlineLogout_Title": "Keine Internetverbindung", "k_dialog_prevSignOutFailed_Text": "Probleme beim Abmelden? Suchen Sie unter \u201eHilfe\u201c nach m\u00f6glichen L\u00f6sungen.", "k_dialog_prevSignOutFailed_Title": "Abmelden", "k_dialog_rental_expired_dismiss_button_text": "Verwerfen", "k_dialog_rental_expired_extend_button_text": "Verl\u00e4ngern oder kaufen", "k_dialog_smallWindow_button_ignore": "Ignorieren", "k_dialog_smallWindow_msg": "Vergr\u00f6\u00dfern Sie das Fenster, um das bestm\u00f6gliche Lese-Erlebnis mit dem Kindle Cloud Reader genie\u00dfen zu k\u00f6nnen.", "k_dialog_smallWindow_title": "Fenster vergr\u00f6\u00dfern, um mit dem Kindle Cloud Reader zu lesen", "k_empty_library_free": "Mit Tausenden von kostenlosen B\u00fcchern!", "k_empty_library_legal": "*Die Verf\u00fcgbarkeit der B\u00fccher kann f\u00fcr Kunden au\u00dferhalb der USA abweichen.", "k_empty_library_main": "Entdecken Sie mehr als zwei Millionen B\u00fccher im ${storeName}.", "k_empty_library_manga_button": "Holen Sie sich kostenlose Mangas", "k_empty_library_manga_msg": "Entdecken Sie mehr als zwei Millionen B\u00fccher im ${storeName}, darunter Bestseller und kostenlose Comics.", "k_empty_library_shop": "Im Kindle-Shop einkaufen", "k_empty_library_store_name": "Kindle-Shop", "k_empty_library_title": "Derzeit sind keine B\u00fccher in Ihrer Kindle-Bibliothek vorhanden.", "k_empty_search_msg": "Ihre Suchanfrage lieferte keine Ergebnisse.", "k_empty_search_offline": "(Nur heruntergeladene B\u00fccher k\u00f6nnen im Offline-Modus durchsucht werden.)", "k_endOfFreeTrial_Text": "Das Probe-Abonnement dieses Buchs ist abgelaufen. Wenn Sie dieses Buch weiterhin nutzen m\u00f6chten, kaufen Sie den Artikel im Kindle-Shop.", "k_endOfFreeTrial_Title": "Abgelaufenes Element", "k_endOfFreeTrial_buyfullversion_button": "Vollversion herunterladen", "k_endOfFreeTrial_cancel_button": "Abbrechen", "k_endOfFreeTrial_removebook_button": "Buch entfernen", "k_endOfSample_Text": "Sie haben das Ende der Leseprobe erreicht. Sie k\u00f6nnen die vollst\u00e4ndige Version im Kindle-Shop erwerben oder zu Ihrer Leseprobe zur\u00fcckkehren.", "k_endOfSample_Title": "Ende der Leseprobe", "k_endOfSample_buy_button": "Vollversion herunterladen", "k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Vollversion im Shop kaufen", "k_endOfSample_cancel_button": "Zur Leseprobe zur\u00fcckkehren", "k_freeTrialExpires_Day": "Ihr Probe-Abonnement l\u00e4uft ab in <span class=\"free_trial_remaining\">1 Tag</span>", "k_freeTrialExpires_Days": "Ihr Probe-Abonnement l\u00e4uft ab in <span class=\"free_trial_remaining\">${days} Tagen</span>", "k_freeTrialExpires_less_than_a_day": "Ihr Probe-Abonnement l\u00e4uft ab in <span class=\"free_trial_remaining\">weniger als einem Tag</span>", "k_noAppMode_content": "Leider k\u00f6nnen wird den Kindle Cloud Reader nicht \u00fcber Ihr vorhandenes Lesezeichen auf dem Startbildschirm \u00f6ffnen. Wenn Sie auf Ihrem iPad weiterlesen m\u00f6chten, tippen Sie unten, um das Buch in Safari zu \u00f6ffnen oder die kostenlose Kindle App zu verwenden.", "k_noAppMode_safariLink": "In Safari \u00f6ffnen", "k_noAppMode_storeLink": "Kindle f\u00fcr iPad", "k_noDownloadedBooks_title": "Sie haben derzeit keine B\u00fccher heruntergeladen.", "k_offlineAccessDisabled_Text": "\u26a0\ufe0f Kindle unterst\u00fctzt das Herunterladen von B\u00fcchern f\u00fcr den Offlinezugriff im Webbrowser nicht mehr. Sie k\u00f6nnen Ihre bereits heruntergeladenen B\u00fccher weiterhin offline lesen, bis Sie sich von Ihrem Konto abmelden.", "k_provide_feedback_error": "Beim Senden der Nachricht ist ein Fehler aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_provide_feedback_sending": "Wird gesendet ...", "k_provide_feedback_success": "Nachricht erfolgreich gesendet! &#x2713;", "k_provide_feedback_text": "Geben Sie Ihre Frage oder Ihr Feedback in das Feld unten ein.", "k_provide_feedback_title": "Kontakt", "k_send_feedback_button": "Senden", "k_store_open_failed_Error_Text": "Beim \u00d6ffnen des Kindle-Shops ist ein Fehler aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_store_open_failed_Error_Title": "Fehler beim \u00d6ffnen des Kindle-Shops", "k_store_open_failed_offline_Error_Text": "Es ist eine Internetverbindung erforderlich, um auf den Kindle-Shop zuzugreifen.", "k_store_open_failed_offline_Error_Title": "Fehler beim \u00d6ffnen des Kindle-Shops", "k_text_me_widget_EmailPhone": "E-Mail-Adresse oder Telefonnummer eingeben", "k_text_me_widget_GetApp": "App jetzt herunterladen", "k_text_me_widget_invalid_input": "Geben Sie eine g\u00fcltige Telefonnummer oder E-Mail-Adresse ein.", "k_text_me_widget_send_email_fail": "E-Mail konnte nicht gesendet werden. Versuchen Sie es sp\u00e4ter erneut.", "k_text_me_widget_send_email_success": "Die App ist unterwegs! \u00dcberpr\u00fcfen Sie Ihre E-Mails.", "k_text_me_widget_send_sms_fail": "SMS konnte nicht gesendet werden. Versuchen Sie es sp\u00e4ter erneut.", "k_text_me_widget_send_sms_success": "Die App ist unterwegs! \u00dcberpr\u00fcfen Sie Ihr Telefon.", "k_text_me_widget_service_error": "Es ist ein Fehler aufgetreten. Versuchen Sie es sp\u00e4ter erneut.", "k_text_me_widget_submitting_request": "Anfrage wird gesendet...", "k_window_title": "Kindle Cloud Reader", "metro_tutorial_children_book_click_instruction": "Tipp: Doppelklicken Sie auf den Text, um ihn zu vergr\u00f6\u00dfern.", "metro_tutorial_children_book_tap_instruction": "Tipp: Tippen Sie zweimal auf den Text, um ihn zu vergr\u00f6\u00dfern.", "metro_tutorial_children_book_text": "Die Tiere schwammen durch das kalte Wasser, bis sie den Strand der Insel vor Sonnenaufgang erreichten.", "metro_tutorial_comic_book_click_instruction1": "Tipp: Vergr\u00f6\u00dfern Sie die Fenster durch einen Doppelklick,", "metro_tutorial_comic_book_click_instruction2": "und bl\u00e4ttern Sie nach rechts, um in den vergr\u00f6\u00dferten Fenstern zu navigieren.", "metro_tutorial_comic_book_tap_instruction1": "Tipp: Tippen Sie zweimal auf die Fenster, um diese zu vergr\u00f6\u00dfern,", "metro_tutorial_comic_book_tap_instruction2": "und streichen Sie, um in den vergr\u00f6\u00dferten Fenstern zu navigieren.", "metro_tutorial_commic_book_dialogue": "WIR WISSEN VON DER WELTVERNICHTUNGSMASCHINE!"};
var Kindle = Kindle || {};Kindle.strings  = Kindle.strings || {};Kindle.strings['en-US']={"k_L_bad_download_Error_Text": "To read this book on your Kindle, please download it from the Cloud.", "k_L_bad_download_Error_Title": "Error Opening Content", "k_L_bookNotAvailable_Text": "Please check your network connection and try again.", "k_L_bookNotAvailable_Title": "Unable to display content", "k_L_cacheError": "Error saving app. Click here to try again.", "k_L_cacheError_pad": "Error saving app. Tap here to try again.", "k_L_cached": "&#x2713; App ready for offline use", "k_L_caching": "Saving app for offline use", "k_L_contact_us": "Contact Us", "k_L_context_download_pin": "Download & Pin Book", "k_L_context_pin": "Pin Book", "k_L_context_read": "Open Book", "k_L_context_remove": "Remove Book", "k_L_context_revoke_sample": "Delete Sample", "k_L_deregister_title": "Sign Out", "k_L_dialog_delete": "Delete", "k_L_dialog_deleteFreeTrial_prompt_text": "This will permanently remove the book from your account.", "k_L_dialog_deleteFreeTrial_prompt_title": "Delete Free Trial?", "k_L_dialog_delete_cancel": "Cancel", "k_L_dialog_delete_prompt": "This will permanently remove <i>${bookTitle}</i> from your account.", "k_L_dialog_delete_prompt_title": "Delete Sample?", "k_L_help": "Help", "k_L_jp_merchandise_dialog_message": "For a limited time, download free chapters from the manga titles below", "k_L_jp_merchandise_dialog_title": "Free manga available for a limited time", "k_L_legal_notices": "Legal Notices", "k_L_loadFailedError_Text": "An error occurred while trying to load the library.", "k_L_loadFailedError_Title": "Error Loading Library", "k_L_openBookAsinNotSpecified_Text": "The title to be opened was not specified.", "k_L_openBookAsinNotSpecified_Title": "Title Not Specified", "k_L_openBookContentLicenseExceededError_Text": "You have exceeded the limit on the number of devices that can read this item. You may deregister any device no longer in use and delete the content, which will allow you to download this item. You may also purchase another copy from the Kindle Store.", "k_L_openBookContentLicenseExceededError_Title": "License Limit Reached", "k_L_openBookContentLoanEndedError_Text": "This book was loaned to you and cannot be opened because the loan has ended.", "k_L_openBookContentLoanEndedError_Title": "Title Not Available", "k_L_openBookContentLoanedError_Text": "This title cannot be opened because it is currently on loan.", "k_L_openBookContentLoanedError_Title": "Title Not Available", "k_L_openBookContentRentalExpiredErrorMetro_Text": "The rental period on this book has expired. Go to the Kindle Store to extend your rental or purchase the book. <br /><br />Your highlights and notes are always available on ${link} even after your rental period has expired.", "k_L_openBookContentRentalExpiredErrorMetro_Title": "Rental Expired", "k_L_openBookContentRentalExpiredError_Text": "This rented book has reached its expiration date. Please select the Extend or Purchase button below if you would like to rent again or purchase this book.", "k_L_openBookContentRentalExpiredError_Title": "Rental Expired", "k_L_openBookContentUnsupportedErrorMetro_Text": "This title is not available on Kindle for Windows 8.", "k_L_openBookContentUnsupportedErrorMetro_Title": "Title Not Available", "k_L_openBookContentUnsupportedError_Text": "This title is not available on Kindle Cloud Reader.", "k_L_openBookContentUnsupportedError_Title": "Title Not Available", "k_L_openBookContentUpgrade_ButtonText": "Continue", "k_L_openBookContentUpgrade_Text": "A new version of this book is available. The new version will be downloaded while you continue to read.", "k_L_openBookContentUpgrade_Title": "New Version", "k_L_openBookGeoLocationNotAllowed_Text": "This title is not available in this country.", "k_L_openBookGeoLocationNotAllowed_Title": "Title Not Available", "k_L_openBookLoadFailure_Text": "An error occurred while opening the selected item. Please try again later.", "k_L_openBookLoadFailure_Title": "Error Opening Content", "k_L_openBookNetworkError_Text": "An error occurred while opening the selected item. Please try again later.", "k_L_openBookNetworkError_Title": "Error Opening Content", "k_L_openBookSessionLimitExceededError_Text": "You have reached the maximum number of concurrent sessions allowed for this title. Please try again later.", "k_L_openBookSessionLimitExceededError_Title": "Session Limit Reached", "k_L_openBookTimeoutError_Text": "A connection error occurred. Please try again later.", "k_L_openBookTimeoutError_Title": "Network Connection Error", "k_L_outdatedChrome_Text": "This version of Google Chrome does not support the current Chrome Extension format. ${linkStart}Update Google Chrome${linkEnd} to enable offline support.", "k_L_outdatedChrome_Title": "Unable to Enable Offline Support", "k_L_privacy": "Privacy", "k_L_progress_dialog_message": "This title will be saved in the Downloaded tab for offline reading until you remove it. For convenience, we also automatically download recently opened books and keep them until space is needed.", "k_L_progress_dialog_title": "Downloading & Pinning Book", "k_L_removeBookError_Text": "An error occurred while removing the selected item. Downloaded content can be erased from this computer by choosing \\\"Sign Out\\\" from the Settings menu.", "k_L_removeBookError_Title": "Error Removing Content", "k_L_removeBookNetworkError_Text": "An error occurred while removing the selected item. Please try again later.", "k_L_removeBookNetworkError_Title": "Error Removing Content", "k_L_revokeFailed_Text": "This operation requires a connection to the Internet.", "k_L_revokeFailed_Title": "Unable to delete book", "k_L_sample_badge_text": "SAMPLE", "k_L_saveBookOutOfSpace_Text": "There is not enough space to save this item for offline reading. You may continue to read this title while online. Space can be freed by removing other saved titles. You might be able to increase your offline storage space; for more information ${linkStart}click here${linkEnd}.", "k_L_saveBookOutOfSpace_Title": "Error Saving Content", "k_L_sort_author": "Sort by Author", "k_L_sort_author_label": "Author", "k_L_sort_recent": "Sort by Recent", "k_L_sort_recent_label": "Recent", "k_L_sort_title": "Sort by Title", "k_L_sort_title_label": "Title", "k_L_storeNotAvailable_Text": "A connection to the Internet is required to shop in the Kindle Store.", "k_L_storeNotAvailable_Title": "No Internet Connection", "k_L_syncFailedError_Text": "An error occurred while syncing. Please try again later.", "k_L_syncFailedError_Title": "Sync Failed", "k_L_syncFailedOfflineError_Text": "A connection to the Internet is required to sync your library.", "k_L_syncFailedOfflineError_Title": "Sync Failed", "k_L_terms_of_use": "Terms of Use", "k_L_text_me_wdiget_Instruction": "To receive a download link enter your email or phone number", "k_L_text_me_widget_Text": "We're sorry. <b>Kindle Cloud Reader</b> can't open this book, but you can read it with our free Kindle app.", "k_L_toolbar_cloud_button": "Cloud Content", "k_L_toolbar_cloud_button_tooltip": "Cloud Content", "k_L_toolbar_cloud_label": "Cloud", "k_L_toolbar_cloud_label_tooltip": "Cloud", "k_L_toolbar_cover_slider": "Cover Size", "k_L_toolbar_cover_slider_tooltip": "Cover Size", "k_L_toolbar_downloaded_button": "Downloaded Content", "k_L_toolbar_downloaded_button_tooltip": "Downloaded Content", "k_L_toolbar_downloaded_label": "Downloaded", "k_L_toolbar_downloaded_label_tooltip": "Downloaded", "k_L_toolbar_grid_button": "Grid View", "k_L_toolbar_grid_button_tooltip": "Grid View", "k_L_toolbar_list_button": "List View", "k_L_toolbar_list_button_tooltip": "List View", "k_L_toolbar_manage_button": "Manage", "k_L_toolbar_manage_button_tooltip": "Manage", "k_L_toolbar_notebook_button": "Your notes and highlights", "k_L_toolbar_notebook_button_tooltip": "Your notes and highlights", "k_L_toolbar_search_button": "Search", "k_L_toolbar_search_button_tooltip": "Search", "k_L_toolbar_sort_button": "Sort By", "k_L_toolbar_sort_button_tooltip": "Sort By", "k_L_toolbar_store_button": "Kindle Store", "k_L_toolbar_store_button_tooltip": "Kindle Store", "k_L_toolbar_sync_button": "Sync", "k_L_toolbar_sync_button_tooltip": "Sync", "k_L_trial_badge_text": "TRIAL", "k_L_unknownError_Text": "An error occurred while attempting to open the selected item. Please try again later.", "k_L_unknownError_Title": "Error Opening Content", "k_RWIS_banner_message_desktop": "To continue reading later, press ${bookmarkCommand} to bookmark this page or ${getAppStart}download a free reading app${getAppEnd} for your phone or tablet.", "k_RWIS_banner_message_ipad": "To continue reading later, download our ${getIPadAppStart}free iPad app${getIPadAppEnd}.", "k_R_annotation_pane_bookmark_label": "Bookmark", "k_R_annotation_pane_cancel": "Cancel", "k_R_annotation_pane_delete": "Delete", "k_R_annotation_pane_delete_confirm": "Confirm delete?", "k_R_annotation_pane_dont_delete": "Don't Delete", "k_R_annotation_pane_edit": "Edit Note", "k_R_annotation_pane_empty_note": "This book does not contain any notes or marks.", "k_R_annotation_pane_goto": "Go To Location", "k_R_annotation_pane_next": "Click for next", "k_R_annotation_pane_no": "No", "k_R_annotation_pane_note_highlight": "Highlight", "k_R_annotation_pane_note_label": "Note", "k_R_annotation_pane_notes_location": "Location ${location}", "k_R_annotation_pane_notes_page": "Page ${page}", "k_R_annotation_pane_previous": "Click for previous", "k_R_annotation_pane_save": "Save Note", "k_R_annotation_pane_yes": "Yes", "k_R_beginning_title": "Beginning", "k_R_book_extras_title": "Book Extras", "k_R_context_createHighlight": "Highlight", "k_R_context_createNote": "Note", "k_R_context_deleteHighlight": "Delete Highlight", "k_R_context_editNote": "Edit Note", "k_R_cover_title": "Cover", "k_R_dialog_annotation_pane_title": "Notes & Marks", "k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Notes & Highlights", "k_R_dialog_editNote_cancel": "Cancel", "k_R_dialog_editNote_delete": "Delete", "k_R_dialog_editNote_placeholder": "Type your note here", "k_R_dialog_editNote_save": "Save", "k_R_dialog_editNote_title_create": "Create Note", "k_R_dialog_editNote_title_edit": "Edit Note", "k_R_dialog_sitb_message_indexing": "The book is being indexed. This may take a moment.", "k_R_dialog_sitb_pane_title_indexing": "Indexing...", "k_R_dialog_sitb_pane_title_notAvailable": "Search Not Available", "k_R_dialog_sitb_pane_title_oneResultFound": "${numberResults} Result Found", "k_R_dialog_sitb_pane_title_resultsFound": "${numberResults} Results Found", "k_R_dialog_sitb_pane_title_searching": "Searching...", "k_R_dialog_sitb_result_current_location": "You are at Location ${location}", "k_R_dialog_sitb_result_current_location_past": "You were at Location ${location}", "k_R_dialog_sitb_result_current_page": "You are at Page ${page}", "k_R_dialog_sitb_result_current_page_past": "You were at Page ${page}", "k_R_dialog_sitb_result_location": "Location ${location}", "k_R_dialog_sitb_result_page": "Page ${page}", "k_R_dialog_unoptimizedFormat_close": "Close Book", "k_R_dialog_unoptimizedFormat_continue": "Continue Anyway", "k_R_dialog_unoptimizedFormat_message": "This book is not optimized for Kindle Cloud Reader on this device. Please install ${linkStart}Kindle for iPad${linkEnd} to read this item.", "k_R_dialog_unoptimizedFormat_metro_message": "This book is not optimized for Kindle for Windows 8.", "k_R_dialog_unoptimizedFormat_stopSave": "Cancel Save", "k_R_dialog_unoptimizedFormat_title": "Unsupported Content", "k_R_dialog_upgrade_btn": "Update Now", "k_R_dialog_upgrade_countryBlk_btn": "Go to Windows Store", "k_R_dialog_upgrade_countryBlk_msg": "Sorry, this version of Kindle does not support content in your language and/or region. <br/> Please check the Windows Store to see if an update is available.", "k_R_dialog_upgrade_countryBlk_title": "Kindle in Your Region", "k_R_dialog_upgrade_langSupport_btn": "Update Now", "k_R_dialog_upgrade_langSupport_msg": "Before you start reading, there is a free update to support Kindle in your current language.", "k_R_dialog_upgrade_langSupport_title": "Update Available", "k_R_dialog_upgrade_msg": " Before you start reading, Kindle needs a free update to support all the latest features.", "k_R_dialog_upgrade_title": "Update Available", "k_R_dictionary_label_RelatedWords": "Related Words", "k_R_dictionary_labels_Derivatives": "Derivatives", "k_R_dictionary_labels_Ipa": "Ipa", "k_R_dictionary_labels_Notes": "Notes", "k_R_dictionary_labels_Origin": "Origin", "k_R_dictionary_labels_Phrases": "Phrases", "k_R_dictionary_labels_Usage": "Usage", "k_R_dictionary_loading": "Loading", "k_R_dictionary_not_available": "Dictionary not available.", "k_R_dictionary_not_found": "No Dictionary Results.", "k_R_dictionary_offline": "The dictionary is available when connected to the Internet.", "k_R_dictionary_view_full": "View full definition", "k_R_dictionary_view_full_i18n": "Full Definition", "k_R_download_disk_error": "Downloaded: ${percent}(<a href=\\\"${url}\\\" target=\\\"_blank\\\" id=\\\"kindleReader_download_disk_error\\\">Browser Storage Full</a>)", "k_R_download_network_error": "Download Stalled: ${percent}(Error)", "k_R_downloaded": "Downloaded ${percent}%", "k_R_downloading": "Downloading: ${percent}%", "k_R_embedded_logo_tooltip": "Open Kindle Cloud Reader in a new tab", "k_R_feature_not_available_dialog_buy_btn": "Buy Full Version", "k_R_feature_not_available_dialog_text": "This feature is enabled in the full version of the book.", "k_R_feature_not_available_dialog_title": "Feature Not Available", "k_R_goto_bookmark_title": "Bookmark...", "k_R_goto_dialog_error": "Please enter a valid location (${minLocation}-${maxLocation}).", "k_R_goto_dialog_error_snapview": "Please enter a valid location.", "k_R_goto_dialog_location_range": "(${minLocation} - ${maxLocation})", "k_R_goto_dialog_page_range": "${range}", "k_R_goto_location_title": "Location...", "k_R_goto_menu_goto_button": "Go to location", "k_R_goto_menu_goto_location": "of ${lastLocation}", "k_R_goto_menu_goto_location_metro_title": "Enter Location", "k_R_goto_menu_goto_location_title": "Enter Location", "k_R_goto_menu_goto_message": "Location ", "k_R_goto_menu_goto_page": "of ${lastPage}", "k_R_goto_menu_goto_page_button": "Go to Page", "k_R_goto_menu_goto_page_message": "Page ", "k_R_goto_menu_goto_page_title": "Enter Page", "k_R_goto_menu_goto_page_title_metro": "Enter Page", "k_R_goto_menu_title": "Go To", "k_R_goto_page_dialog_error": "Please enter a valid page ${range}.", "k_R_goto_page_dialog_error_snapview": "Please enter a valid page.", "k_R_goto_page_title": "Page...", "k_R_menuButton_back": "Back", "k_R_menuButton_back_tooltip": "Back", "k_R_menuButton_bookmark": "Bookmark", "k_R_menuButton_bookmark_tooltip": "Toggle bookmark", "k_R_menuButton_columnMode": "Columns", "k_R_menuButton_columnMode_tooltip": "Toggle columns", "k_R_menuButton_controlPane": "View", "k_R_menuButton_controlPane_tooltip": "View settings", "k_R_menuButton_enterImmersive_tooltip": "Enter immersive reading mode", "k_R_menuButton_exitImmersive_tooltip": "Exit immersive reading mode", "k_R_menuButton_goto": "Go to", "k_R_menuButton_goto_tooltip": "Go to menu", "k_R_menuButton_notesAndMarks": "Notes/Marks", "k_R_menuButton_notesAndMarks_tooltip": "Show notes and marks", "k_R_menuButton_pin_start_metro": "Pin to Start", "k_R_menuButton_pin_start_metro_tooltip": "Pin to Start", "k_R_menuButton_sync": "Sync", "k_R_menuButton_sync_tooltip": "Synchronize", "k_R_menuInput_sitb_placeholder": "Search", "k_R_pageArrow_next": "Next Page", "k_R_pageArrow_prev": "Previous Page", "k_R_pageLoadError_Text": "An error occurred while loading the next page. Please try again later.", "k_R_pageLoadError_Title": "Error Loading Content", "k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Screen reader support is not currently available. In order to read using the screen reader, please switch to the Kindle app on your device.", "k_R_search_placeholder": "Find in Book", "k_R_settings_apply_button": "Apply Settings", "k_R_settings_colorMode_black": "Black", "k_R_settings_colorMode_label": "COLOR MODE", "k_R_settings_colorMode_label_metro": "Color Mode", "k_R_settings_colorMode_sepia": "Sepia", "k_R_settings_colorMode_white": "White", "k_R_settings_column_disabled_msg": "This title is only available in one-column reading.", "k_R_settings_column_off_button": "Off", "k_R_settings_column_on_button": "On", "k_R_settings_fontSize_label": "FONT SIZE", "k_R_settings_fontSize_label_metro": "Font Size", "k_R_settings_fontSize_tooltip_metro": "Aa", "k_R_settings_margins_label": "MARGINS", "k_R_settings_margins_label_metro": "Margins", "k_R_settings_multiColumnMode_label": "ONE COLUMN ONLY", "k_R_settings_multiColumnMode_label_metro": "One Column Only", "k_R_settings_sampleText": "Emma Woodhouse, handsome, clever, and rich, with a comfortable home and happy disposition, seemed to unite some of the best blessings of existence; and had lived nearly twenty-one years in the world with very little to distress or vex her.", "k_R_settings_showLocation_label": "SHOW READING LOCATION", "k_R_settings_showLocation_label_metro": "Show Reading Location", "k_R_settings_title_metro": "View Options", "k_R_show_database_title": "Show Database", "k_R_sitb_error_common_message": "An error occurred. Please try again later.", "k_R_sitb_error_common_title": "Search Not Completed", "k_R_sitb_error_index_not_available_message": "Sorry, this book is not yet enabled for searching. Please try again at a later time.", "k_R_sitb_error_index_not_available_title": "Search Not Available", "k_R_sitb_error_language_not_supported_message": "Search is not available for this title because the language is not currently supported. The Amazon Kindle team is working to resolve this issue.", "k_R_sitb_error_language_not_supported_title": "Search Not Available", "k_R_sitb_error_language_undefined_message": "Search is not available for this title due to a problem in generating the index for this title.", "k_R_sitb_error_language_undefined_title": "Search Not Available", "k_R_sitb_error_offline_message": "A network connection is required to complete this action. Please connect to a network.", "k_R_sitb_error_offline_title": "No Network Connection", "k_R_slider_loc_popup": "Loc ${location}", "k_R_slider_location": "Location ${location} of ${totalLocations}", "k_R_slider_location_popup": "Location ${location}", "k_R_slider_pageNumber": "Page ${page} of ${totalPages}", "k_R_slider_pageNumber_popup": "Page ${page}", "k_R_slider_percentage": "${percent}%", "k_R_syncPosition_PN_labelText": "You are currently at page ${currentPage}. The furthest page read is ${page} from \\\"${deviceName}\\\" at ${time} on ${date}. What would you like to do?", "k_R_syncPosition_alreadyFurthest_Text": "You are currently at the furthest location across all your devices.", "k_R_syncPosition_cancelText": "Cancel", "k_R_syncPosition_cantSync_Text": "An error occurred while syncing. Please try again later.", "k_R_syncPosition_labelText": "You are currently at location ${currentLocation}. The furthest read location is ${location} from \\\"${deviceName}\\\" at ${time} on ${date}. What would you like to do?", "k_R_syncPosition_noDeviceName_PN_labelText": "You are currently at page ${currentPage}. The furthest page read across all your devices is ${page}. What would you like to do?", "k_R_syncPosition_noDeviceName_labelText": "You are currently at location ${currentLocation}. The furthest read location across all your devices is ${location}. What would you like to do?", "k_R_syncPosition_page_reset": "Make This the Furthest Read Page", "k_R_syncPosition_page_sync": "Go to the Furthest Read Page", "k_R_syncPosition_reset": "Make This the Furthest Read Location", "k_R_syncPosition_sync": "Go to the Furthest Read Location", "k_R_syncPosition_title": "Sync to Furthest Page Read", "k_R_table_of_contents_title": "Table of Contents", "k_R_toolbar_iOS_sample_close_button": "Close", "k_R_toolbar_library_button": "Library", "k_R_toolbar_library_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Your Library", "k_R_toolbar_library_button_tooltip": "Library", "k_R_unimplementedFeature_Error_Text": "", "k_R_unimplementedFeature_Error_Title": "Feature not implemented", "k_addToHomeScreen_strong_text": "Add to Home Screen", "k_addToHomeScreen_text": "Install Kindle Cloud Reader on your iPad: tap on the arrow and then ${addToHomeText}", "k_app_device_name_template": "%FIRST_NAME%'s%DUPE_STRATEGY_1ST%Kindle Cloud Reader", "k_author_conjunction": " and ", "k_banner_RWIS_message_desktop": "Continue reading this book on your phone or tablet with our free Kindle app.", "k_banner_RWIS_message_desktop1": "Continue reading this book with more Kindle features on your phone or tablet with the free Kindle app.", "k_banner_RWIS_message_ipad": "Continue reading this book with our free Kindle app.", "k_banner_RWIS_message_kp": "Read on the go for free - download Kindle for Android, iOS, PC, Mac and more.", "k_banner_bookmark_command": "CTRL+D", "k_banner_bookmark_command_mac": "Command+D", "k_banner_eucookie_message_desktop": "We only use cookies and similar tools (collectively, \"cookies\") to provide our services, including to recognize you when you sign-in, keep track of your settings, and deliver content. Other Amazon services may use cookies for additional purposes. To learn more about how Amazon uses cookies, please read the", "k_banner_eucookie_message_learn_more": "Amazon Cookies Notice", "k_banner_eucookie_message_postHref": ".", "k_banner_eucookie_message_refLink": "https:\\/\\/www.amazon.co.uk\\/gp\\/help\\/customer\\/display.html?ie=UTF8&nodeId=201890250", "k_common_cancel_button": "Cancel", "k_common_close_button": "Close", "k_common_confirm_button": "OK", "k_common_learn_more": "Learn more", "k_dialog_appCache_button_text": "OK", "k_dialog_appCache_instruction1_text": "Click the iPad Home button to exit this application.", "k_dialog_appCache_instruction2_text": "Click the iPad Home button twice to show the running applications tray (located at the bottom of your iPad's screen).", "k_dialog_appCache_instruction3_text": "Locate the Safari application icon and press-and-hold on the icon until a minus button appears in the top left corner. Tap the minus button.", "k_dialog_appCache_instruction4_text": "Locate any other instances of Kindle Cloud Reader and press-and-hold its icon until a minus button appears in the top left corner. Tap the minus button.", "k_dialog_appCache_instruction5_text": "Restart Safari and try loading read.amazon.com again.", "k_dialog_appCache_message_text": "We encountered an error while trying to save the application for offline reading. To fix this you will need to restart the Safari application and any other running instances of Kindle Cloud Reader.", "k_dialog_appCache_readmore_text": "How do I restart Safari and/or Kindle Cloud Reader?", "k_dialog_appCache_step1_text": "Step 1.", "k_dialog_appCache_step2_text": "Step 2.", "k_dialog_appCache_step3_text": "Step 3.", "k_dialog_appCache_step4_text": "Step 4.", "k_dialog_appCache_step5_text": "Step 5.", "k_dialog_appCache_title_text": "Error Saving Application", "k_dialog_dbBlocked_Text": "There was a problem signing out. Closing other tabs running Kindle Cloud Reader may fix this problem.", "k_dialog_dbBlocked_Title": "Sign Out", "k_dialog_enableOffline_button_text": "OK", "k_dialog_enable_offline_firefox_msg": "Kindle Cloud Reader requires your permission to store books for offline reading. If you selected \\\"Never for This Site\\\" when Firefox asked for permission, you will need to ${linkStart}follow these steps${linkEnd} to enable offline reading in Firefox.", "k_dialog_enable_offline_title": "Enable Offline Reading", "k_dialog_ffPrompting_Text": "Please allow Kindle to store more than 50 MB of data on your computer for offline use.<br /><br />For help, read Kindle Cloud Reader ${linkStart}Troubleshooting & Resources${linkEnd}.", "k_dialog_ffPrompting_Title": "Please Allow Offline Storage", "k_dialog_logoutConfirm_continue": "Continue to log out", "k_dialog_logoutConfirm_message": "Logging out of Kindle will remove all downloaded books from your browser. If you log back in, you will only be able to continue reading these books when connected to the internet.", "k_dialog_logout_message": "Please wait while we clean up your downloaded content.", "k_dialog_logout_title": "Signing out of Kindle Cloud Reader...", "k_dialog_message_dismissButton_text": "OK", "k_dialog_message_retryButton_text": "Try Again", "k_dialog_offlineLogout_Text": "This operation requires a connection to the Internet.", "k_dialog_offlineLogout_Title": "Unable to sign out", "k_dialog_prevSignOutFailed_Text": "Problems signing out? Please visit Help to look for possible solutions.", "k_dialog_prevSignOutFailed_Title": "Sign Out", "k_dialog_rental_expired_dismiss_button_text": "Dismiss", "k_dialog_rental_expired_extend_button_text": "Extend or Purchase", "k_dialog_smallWindow_button_ignore": "Ignore", "k_dialog_smallWindow_msg": "Please increase the size of this window for the best reading experience with Kindle Cloud Reader.", "k_dialog_smallWindow_title": "Expand Window to Read with Kindle Cloud Reader", "k_empty_library_free": "Thousands of free books too!", "k_empty_library_legal": "*Book availability may vary for non-U.S. customers.", "k_empty_library_main": "Shop from over two million books in the ${storeName}.", "k_empty_library_manga_button": "Shop Free Manga", "k_empty_library_manga_msg": "Shop from selections of over two million books in the ${storeName}, including bestsellers and free comics.", "k_empty_library_shop": "Shop Kindle Store", "k_empty_library_store_name": "Kindle Store", "k_empty_library_title": "You currently have no books in your Kindle Library.", "k_empty_search_msg": "No results for your search query.", "k_empty_search_offline": "(Only downloaded books are searchable when offline.)", "k_endOfFreeTrial_Text": "The free trial for this book has expired. To continue using the book purchase this item in Kindle Store.", "k_endOfFreeTrial_Title": "Expired Item", "k_endOfFreeTrial_buyfullversion_button": "Get Full Version", "k_endOfFreeTrial_cancel_button": "Cancel", "k_endOfFreeTrial_removebook_button": "Remove Book", "k_endOfSample_Text": "You have reached the end of the sample content.  You can buy the full version from the Kindle Store or return to your sample.", "k_endOfSample_Title": "End of Sample Content", "k_endOfSample_buy_button": "Get Full Version", "k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Buy full version at store", "k_endOfSample_cancel_button": "Return to Sample", "k_freeTrialExpires_Day": "Your free trial expires in <span class=\"free_trial_remaining\">1 day</span>", "k_freeTrialExpires_Days": "Your free trial expires in <span class=\"free_trial_remaining\">${days} days</span>", "k_freeTrialExpires_less_than_a_day": "Your free trial expires in <span class=\"free_trial_remaining\">less than a day</span>", "k_noAppMode_content": "We\u2019re sorry, but we can\u2019t currently open Kindle Cloud Reader from your existing home screen bookmark.  To continue reading on your iPad, tap below to open in Safari or use the free Kindle App.", "k_noAppMode_safariLink": "Open in Safari", "k_noAppMode_storeLink": "Kindle for iPad", "k_noDownloadedBooks_title": "You currently have no downloaded books.", "k_offlineAccessDisabled_Text": "\u26a0\ufe0f Kindle will no longer support downloading books for offline access in the web browser. You can continue to read your existing downloaded books offline until you sign off from your account.", "k_provide_feedback_error": "An error occurred while attempting to send this message. Please try again later.", "k_provide_feedback_sending": "Sending...", "k_provide_feedback_success": "Message successfully sent! &#x2713;", "k_provide_feedback_text": "Please enter your question or feedback in the space below.", "k_provide_feedback_title": "Contact Us", "k_send_feedback_button": "Send", "k_store_open_failed_Error_Text": "An error occurred while opening the Kindle Store. Please try again later.", "k_store_open_failed_Error_Title": "Unable to Open Kindle Store", "k_store_open_failed_offline_Error_Text": "This operation requires a connection to the Internet.", "k_store_open_failed_offline_Error_Title": "Unable to Open Kindle Store", "k_text_me_widget_EmailPhone": "Enter Email or Phone #", "k_text_me_widget_GetApp": "Get App Now", "k_text_me_widget_invalid_input": "Please enter a valid phone number or email address.", "k_text_me_widget_send_email_fail": "Failed to send an email. Please try again later.", "k_text_me_widget_send_email_success": "The app is on the way! Please check your email.", "k_text_me_widget_send_sms_fail": "Failed to send a text. Please try again later.", "k_text_me_widget_send_sms_success": "The app is on the way! Please check your phone.", "k_text_me_widget_service_error": "An error occurred. Please try again later.", "k_text_me_widget_submitting_request": "Submitting Request...", "k_window_title": "Kindle Cloud Reader", "metro_tutorial_children_book_click_instruction": "Tip: Double-click on text to zoom", "metro_tutorial_children_book_tap_instruction": "Tip: Double-tap on text to zoom", "metro_tutorial_children_book_text": "Through chilly water, the animals swam until they reached an island beach just before dawn.", "metro_tutorial_comic_book_click_instruction1": "Tip: Double-click on panels to zoom,", "metro_tutorial_comic_book_click_instruction2": "then page right to navigate zoomed panels.", "metro_tutorial_comic_book_tap_instruction1": "Tip: Double-tap on panels to zoom,", "metro_tutorial_comic_book_tap_instruction2": "then swipe to navigate zoomed panels.", "metro_tutorial_commic_book_dialogue": "WE KNOW ABOUT THE DOOMSDAY MACHINE!"};
var Kindle = Kindle || {};Kindle.strings  = Kindle.strings || {};Kindle.strings['zh-CN']={"k_L_toolbar_notebook_button": "\u7b14\u8bb0\u548c\u6807\u6ce8", "k_L_toolbar_notebook_button_tooltip": "\u7b14\u8bb0\u548c\u6807\u6ce8", "k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550": "\u7b14\u8bb0\u548c\u6807\u6ce8", "k_R_dialog_upgrade_countryBlk_btn": "\u5e94\u7528\u5546\u5e97", "k_R_dialog_upgrade_countryBlk_msg": "\u5f88\u62b1\u6b49, Kindle \u6682\u65f6\u65e0\u6cd5\u63d0\u4f9b\u652f\u6301\u60a8\u6240\u5728\u5730\u533a\u548c\u60a8\u6240\u4f7f\u7528\u7684\u8bed\u8a00\u7684\u5185\u5bb9\u3002 <br/> \u8bf7\u5173\u6ce8 Windows \u5e94\u7528\u5546\u5e97\u4ee5\u83b7\u5f97\u66f4\u65b0\u3002", "k_R_dialog_upgrade_countryBlk_title": "\u5728\u60a8\u6240\u5728\u7684\u5730\u533a\u4f7f\u7528 Kindle", "k_dialog_smallWindow_button_ignore": "\u5ffd\u7565", "k_dialog_smallWindow_msg": "\u8bf7\u653e\u5927\u6b64\u7a97\u53e3\uff0c\u4ee5\u83b7\u5f97\u6700\u4f73 Kindle Cloud Reader \u9605\u8bfb\u4f53\u9a8c\u3002", "k_dialog_smallWindow_title": "\u5c55\u5f00\u7a97\u53e3\u4ee5\u4f7f\u7528 Kindle Cloud Reader \u9605\u8bfb", "k_window_title": "\u4e91\u7aef\u9605\u8bfb\u5668"};
var Kindle = Kindle || {};Kindle.strings  = Kindle.strings || {};Kindle.strings['es-ES']={"k_L_bad_download_Error_Text": "Para leer este libro en tu Kindle, desc\u00e1rgalo de la nube.", "k_L_bad_download_Error_Title": "Error al abrir el contenido", "k_L_bookNotAvailable_Text": "Compruebe su conexi\u00f3n de red e int\u00e9ntelo de nuevo.", "k_L_bookNotAvailable_Title": "No se puede mostrar el contenido", "k_L_cacheError": "Error al guardar la aplicaci\u00f3n. Haz clic para intentarlo de nuevo.", "k_L_cacheError_pad": "Error al guardar la aplicaci\u00f3n. Toca aqu\u00ed para intentarlo de nuevo.", "k_L_cached": "&#x2713; Aplicaci\u00f3n lista para su uso sin conexi\u00f3n", "k_L_caching": "Guardar aplicaci\u00f3n para su uso sin conexi\u00f3n", "k_L_contact_us": "Contacto", "k_L_context_download_pin": "Descargar y anclar libro", "k_L_context_pin": "Anclar libro", "k_L_context_read": "Abrir libro", "k_L_context_remove": "Eliminar libro", "k_L_context_revoke_sample": "Eliminar fragmento", "k_L_deregister_title": "Cerrar sesi\u00f3n", "k_L_dialog_delete": "Eliminar", "k_L_dialog_deleteFreeTrial_prompt_text": "Esta acci\u00f3n eliminar\u00e1 el libro de forma permanente de tu cuenta.", "k_L_dialog_deleteFreeTrial_prompt_title": "\u00bfDeseas eliminar la versi\u00f3n de prueba?", "k_L_dialog_delete_cancel": "Cancelar", "k_L_dialog_delete_prompt": "Esta acci\u00f3n eliminar\u00e1 <i>${bookTitle}</i> permanentemente de tu cuenta.", "k_L_dialog_delete_prompt_title": "\u00bfDeseas eliminar el fragmento?", "k_L_help": "Ayuda", "k_L_jp_merchandise_dialog_message": "Durante un periodo de tiempo limitado, descarga cap\u00edtulos gratuitos de los t\u00edtulos manga que aparecen a continuaci\u00f3n", "k_L_jp_merchandise_dialog_title": "T\u00edtulos manga gratuitos durante un periodo de tiempo limitado", "k_L_legal_notices": "Texto legal", "k_L_loadFailedError_Text": "Se ha producido un error al intentar cargar la biblioteca.", "k_L_loadFailedError_Title": "Error al cargar la biblioteca", "k_L_openBookAsinNotSpecified_Text": "No has especificado el t\u00edtulo que deseas abrir.", "k_L_openBookAsinNotSpecified_Title": "T\u00edtulo no especificado", "k_L_openBookContentLicenseExceededError_Text": "Has superado el l\u00edmite de dispositivos que pueden leer este elemento. Puedes anular el registro de cualquier dispositivo que no utilices y eliminar el contenido, lo que te permitir\u00e1 descargar el elemento. Tambi\u00e9n puedes comprar otra copia en la Tienda Kindle.", "k_L_openBookContentLicenseExceededError_Title": "Se ha alcanzado el l\u00edmite de licencias", "k_L_openBookContentLoanEndedError_Text": "Ya se te ha prestado este libro y no puedes abrirlo porque el pr\u00e9stamo ha finalizado.", "k_L_openBookContentLoanEndedError_Title": "T\u00edtulo no disponible", "k_L_openBookContentLoanedError_Text": "Este t\u00edtulo no puede abrirse porque, en este momento, se encuentras en pr\u00e9stamo.", "k_L_openBookContentLoanedError_Title": "T\u00edtulo no disponible", "k_L_openBookContentRentalExpiredErrorMetro_Text": "El periodo de pr\u00e9stamo de este libro ha caducado. Ve a la Tienda Kindle para ampliar tu pr\u00e9stamo o para adquirir el libro. <br /><br />Tus subrayados y notas estar\u00e1n disponibles en todo momento en ${link}, incluso una vez caducado el periodo de pr\u00e9stamo.", "k_L_openBookContentRentalExpiredErrorMetro_Title": "Pr\u00e9stamo caducado", "k_L_openBookContentRentalExpiredError_Text": "Se ha superado la fecha de caducidad del pr\u00e9stamo de este libro. Selecciona el bot\u00f3n Ampliar o comprar a continuaci\u00f3n si deseas adquirir o alquilar de nuevo este libro.", "k_L_openBookContentRentalExpiredError_Title": "Pr\u00e9stamo caducado", "k_L_openBookContentUnsupportedErrorMetro_Text": "Este t\u00edtulo no est\u00e1 disponible en Kindle para Windows 8.", "k_L_openBookContentUnsupportedErrorMetro_Title": "T\u00edtulo no disponible", "k_L_openBookContentUnsupportedError_Text": "Este t\u00edtulo no est\u00e1 disponible para Kindle Cloud Reader.", "k_L_openBookContentUnsupportedError_Title": "T\u00edtulo no disponible", "k_L_openBookContentUpgrade_ButtonText": "Continuar", "k_L_openBookContentUpgrade_Text": "Hay disponible una nueva versi\u00f3n del libro. Esta se descargar\u00e1 mientras lees.", "k_L_openBookContentUpgrade_Title": "Nueva versi\u00f3n disponible", "k_L_openBookGeoLocationNotAllowed_Text": "El t\u00edtulo no se encuentra disponible en este pa\u00eds.", "k_L_openBookGeoLocationNotAllowed_Title": "T\u00edtulo no disponible", "k_L_openBookLoadFailure_Text": "Se ha producido un error al abrir el elemento seleccionado. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_L_openBookLoadFailure_Title": "Error al abrir el contenido", "k_L_openBookNetworkError_Text": "Se ha producido un error al abrir el elemento seleccionado. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_L_openBookNetworkError_Title": "Error al abrir el contenido", "k_L_openBookSessionLimitExceededError_Text": "Has alcanzado el n\u00famero m\u00e1ximo permitido de sesiones simult\u00e1neas para este t\u00edtulo. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_L_openBookSessionLimitExceededError_Title": "Se ha alcanzado el l\u00edmite de sesiones", "k_L_openBookTimeoutError_Text": "Se ha producido un error de conexi\u00f3n. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_L_openBookTimeoutError_Title": "Error de conexi\u00f3n de red", "k_L_outdatedChrome_Text": "Esta versi\u00f3n de Google Chrome no es compatible con el formato de extensi\u00f3n de Chrome. ${linkStart}Actualiza Google Chrome${linkEnd} para activar la ayuda sin conexi\u00f3n.", "k_L_outdatedChrome_Title": "No se puede activar la ayuda sin conexi\u00f3n", "k_L_privacy": "Privacidad", "k_L_progress_dialog_message": "Este t\u00edtulo se almacenar\u00e1 hasta que lo elimines en la pesta\u00f1a Descargado para su lectura sin conexi\u00f3n. Para tu comodidad, hemos descargado los libros abiertos recientemente y se conservar\u00e1n hasta que necesites espacio.", "k_L_progress_dialog_title": "Descargar y anclar libro", "k_L_removeBookError_Text": "Se ha producido un error al eliminar el elemento seleccionado. Puedes borrar el contenido descargado en este equipo seleccionando \\\"Cerrar sesi\u00f3n\\\" en el men\u00fa Configuraci\u00f3n.", "k_L_removeBookError_Title": "Error al eliminar el contenido", "k_L_removeBookNetworkError_Text": "Se ha producido un error al intentar eliminar el elemento seleccionado. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_L_removeBookNetworkError_Title": "Error al eliminar el contenido", "k_L_revokeFailed_Text": "Se requiere conexi\u00f3n a Internet para esta operaci\u00f3n.", "k_L_revokeFailed_Title": "No se puede eliminar el libro", "k_L_sample_badge_text": "FRAGMENTO", "k_L_saveBookOutOfSpace_Text": "No hay suficiente espacio para guardar este elemento para su lectura sin conexi\u00f3n. Puedes seguir leyendo este t\u00edtulo mientras est\u00e9s conectado. Para liberar espacio, puedes eliminar otros t\u00edtulos guardados. Si lo deseas, puedes aumentar el espacio de almacenamiento sin conexi\u00f3n. Para obtener m\u00e1s informaci\u00f3n haz clic ${linkStart}aqu\u00ed${linkEnd}.", "k_L_saveBookOutOfSpace_Title": "Error al guardar el contenido", "k_L_sort_author": "Ordenar por Autor", "k_L_sort_author_label": "Autor", "k_L_sort_recent": "Ordenar por Los m\u00e1s recientes", "k_L_sort_recent_label": "Los m\u00e1s recientes", "k_L_sort_title": "Ordenar por T\u00edtulo", "k_L_sort_title_label": "T\u00edtulo", "k_L_storeNotAvailable_Text": "Se requiere conexi\u00f3n a Internet para poder comprar en la Tienda Kindle.", "k_L_storeNotAvailable_Title": "No hay conexi\u00f3n a Internet", "k_L_syncFailedError_Text": "Se ha producido un error durante la sincronizaci\u00f3n. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_L_syncFailedError_Title": "Error de sincronizaci\u00f3n", "k_L_syncFailedOfflineError_Text": "Se requiere una conexi\u00f3n a Internet para sincronizar la biblioteca.", "k_L_syncFailedOfflineError_Title": "Error de sincronizaci\u00f3n", "k_L_terms_of_use": "Condiciones de uso", "k_L_text_me_wdiget_Instruction": "Para recibir un enlace de descarga, introduce tu e-mail o n\u00famero de tel\u00e9fono", "k_L_text_me_widget_Text": "Lo sentimos. <b>Kindle Cloud Reader</b> no puede abrir este libro, pero puedes leerlo en la aplicaci\u00f3n gratuita de Kindle.", "k_L_toolbar_cloud_button": "Contenido en la nube", "k_L_toolbar_cloud_button_tooltip": "Contenido en la nube", "k_L_toolbar_cloud_label": "Cloud", "k_L_toolbar_cloud_label_tooltip": "Cloud", "k_L_toolbar_cover_slider": "Tama\u00f1o de la portada", "k_L_toolbar_cover_slider_tooltip": "Tama\u00f1o de la portada", "k_L_toolbar_downloaded_button": "Contenido descargado", "k_L_toolbar_downloaded_button_tooltip": "Contenido descargado", "k_L_toolbar_downloaded_label": "Descargado", "k_L_toolbar_downloaded_label_tooltip": "Descargado", "k_L_toolbar_grid_button": "Vista de cuadr\u00edcula", "k_L_toolbar_grid_button_tooltip": "Vista de cuadr\u00edcula", "k_L_toolbar_list_button": "Vista de lista", "k_L_toolbar_list_button_tooltip": "Vista de lista", "k_L_toolbar_manage_button": "Gestionar", "k_L_toolbar_manage_button_tooltip": "Gestionar", "k_L_toolbar_notebook_button": "Tus notas y subrayados", "k_L_toolbar_notebook_button_tooltip": "Tus notas y subrayados", "k_L_toolbar_search_button": "Buscar", "k_L_toolbar_search_button_tooltip": "Buscar", "k_L_toolbar_sort_button": "Ordenar por", "k_L_toolbar_sort_button_tooltip": "Ordenar por", "k_L_toolbar_store_button": "Tienda Kindle", "k_L_toolbar_store_button_tooltip": "Tienda Kindle", "k_L_toolbar_sync_button": "Sincronizar", "k_L_toolbar_sync_button_tooltip": "Sincronizar", "k_L_trial_badge_text": "PRUEBA", "k_L_unknownError_Text": "Se ha producido un error al intentar abrir el elemento seleccionado. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_L_unknownError_Title": "Error al abrir el contenido", "k_RWIS_banner_message_desktop": "Si deseas seguir leyendo m\u00e1s tarde, pulsa ${bookmarkCommand} para marcar esta p\u00e1gina o ${getAppStart}descargar una aplicaci\u00f3n de lectura gratuita${getAppEnd} para el tel\u00e9fono o la tableta.", "k_RWIS_banner_message_ipad": "Si deseas seguir leyendo m\u00e1s tarde, descarga la ${getIPadAppStart}aplicaci\u00f3n gratuita para iPad${getIPadAppEnd}.", "k_R_annotation_pane_bookmark_label": "Marcador", "k_R_annotation_pane_cancel": "Cancelar", "k_R_annotation_pane_delete": "Eliminar", "k_R_annotation_pane_delete_confirm": "\u00bfDeseas confirmar la eliminaci\u00f3n?", "k_R_annotation_pane_dont_delete": "No eliminar", "k_R_annotation_pane_edit": "Editar nota", "k_R_annotation_pane_empty_note": "Este libro no contiene notas ni marcadores.", "k_R_annotation_pane_goto": "Ir a la ubicaci\u00f3n", "k_R_annotation_pane_next": "Haz clic para ir al siguiente", "k_R_annotation_pane_no": "No", "k_R_annotation_pane_note_highlight": "Subrayar", "k_R_annotation_pane_note_label": "Nota", "k_R_annotation_pane_notes_location": "Posici\u00f3n ${location}", "k_R_annotation_pane_notes_page": "P\u00e1gina ${page}", "k_R_annotation_pane_previous": "Haz clic para ir al anterior", "k_R_annotation_pane_save": "Guardar nota", "k_R_annotation_pane_yes": "S\u00ed", "k_R_beginning_title": "Principio", "k_R_book_extras_title": "Contenido adicional", "k_R_context_createHighlight": "Subrayar", "k_R_context_createNote": "Nota", "k_R_context_deleteHighlight": "Eliminar subrayado", "k_R_context_editNote": "Editar nota", "k_R_cover_title": "Portada", "k_R_dialog_annotation_pane_title": "Notas y marcadores", "k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Notas y subrayado", "k_R_dialog_editNote_cancel": "Cancelar", "k_R_dialog_editNote_delete": "Eliminar", "k_R_dialog_editNote_placeholder": "Escribe tu nota aqu\u00ed", "k_R_dialog_editNote_save": "Guardar", "k_R_dialog_editNote_title_create": "Crear nota", "k_R_dialog_editNote_title_edit": "Editar nota", "k_R_dialog_sitb_message_indexing": "El libro se est\u00e1 indexando. Esta operaci\u00f3n puede tardar unos instantes.", "k_R_dialog_sitb_pane_title_indexing": "Indexando...", "k_R_dialog_sitb_pane_title_notAvailable": "B\u00fasqueda no disponible", "k_R_dialog_sitb_pane_title_oneResultFound": "Se encontr\u00f3 ${numberResults} resultado", "k_R_dialog_sitb_pane_title_resultsFound": "Se encontraron ${numberResults} resultados", "k_R_dialog_sitb_pane_title_searching": "Buscando...", "k_R_dialog_sitb_result_current_location": "Te encuentras en la posici\u00f3n ${location}", "k_R_dialog_sitb_result_current_location_past": "Te encontrabas en la posici\u00f3n ${location}", "k_R_dialog_sitb_result_current_page": "Te encuentras en la p\u00e1gina ${page}", "k_R_dialog_sitb_result_current_page_past": "Te encontrabas en la p\u00e1gina ${page}", "k_R_dialog_sitb_result_location": "Posici\u00f3n ${location}", "k_R_dialog_sitb_result_page": "P\u00e1gina ${page}", "k_R_dialog_unoptimizedFormat_close": "Cerrar libro", "k_R_dialog_unoptimizedFormat_continue": "Continuar de todos modos", "k_R_dialog_unoptimizedFormat_message": "Este libro no se ha optimizado para Kindle Cloud Reader en este dispositivo. Instala ${linkStart}Kindle para iPad${linkEnd} para poder leer este elemento.", "k_R_dialog_unoptimizedFormat_metro_message": "Este libro no se ha optimizado en Kindle para Windows 8.", "k_R_dialog_unoptimizedFormat_stopSave": "Cancelar operaci\u00f3n de guardar", "k_R_dialog_unoptimizedFormat_title": "Contenido no admitido", "k_R_dialog_upgrade_btn": "Actualizar ahora", "k_R_dialog_upgrade_countryBlk_btn": "Ir a la Tienda Windows", "k_R_dialog_upgrade_countryBlk_msg": "Lo sentimos, esta versi\u00f3n de Kindle no es compatible con el contenido disponible en tu idioma o regi\u00f3n. <br/> Visita la Tienda Windows para comprobar si existe alguna actualizaci\u00f3n disponible.", "k_R_dialog_upgrade_countryBlk_title": "Kindle en tu regi\u00f3n", "k_R_dialog_upgrade_langSupport_btn": "Actualizar ahora", "k_R_dialog_upgrade_langSupport_msg": "Antes de empezar a leer, hay una actualizaci\u00f3n disponible para proporcionar ayuda sobre Kindle en tu idioma actual.", "k_R_dialog_upgrade_langSupport_title": "Actualizaci\u00f3n disponible", "k_R_dialog_upgrade_msg": " Antes de empezar a leer, Kindle necesita una actualizaci\u00f3n gratuita para admitir las \u00faltimas funcionalidades.", "k_R_dialog_upgrade_title": "Actualizaci\u00f3n disponible", "k_R_dictionary_label_RelatedWords": "V\u00e9ase tambi\u00e9n", "k_R_dictionary_labels_Derivatives": "Derivados", "k_R_dictionary_labels_Ipa": "AFI", "k_R_dictionary_labels_Notes": "Notas", "k_R_dictionary_labels_Origin": "Origen", "k_R_dictionary_labels_Phrases": "Frases", "k_R_dictionary_labels_Usage": "Uso", "k_R_dictionary_loading": "Cargando", "k_R_dictionary_not_available": "Diccionario no disponible.", "k_R_dictionary_not_found": "No se han encontrado resultados en el diccionario.", "k_R_dictionary_offline": "El diccionario est\u00e1 disponible cuando te conectas a Internet.", "k_R_dictionary_view_full": "Ver definici\u00f3n completa", "k_R_dictionary_view_full_i18n": "Definici\u00f3n completa", "k_R_download_disk_error": "Descargado: ${percent}(<a href=\\\"${url}\\\" target=\\\"_blank\\\" id=\\\"kindleReader_download_disk_error\\\">Capacidad de almacenamiento del navegador completa</a>)", "k_R_download_network_error": "Descarga detenida: ${percent}(error)", "k_R_downloaded": "Descargado ${percent}%", "k_R_downloading": "Descargando: ${percent}%", "k_R_embedded_logo_tooltip": "Abrir Kindle Cloud Reader en una nueva pesta\u00f1a", "k_R_feature_not_available_dialog_buy_btn": "Comprar la versi\u00f3n completa", "k_R_feature_not_available_dialog_text": "Esta funcionalidad est\u00e1 habilitada para la versi\u00f3n completa del libro.", "k_R_feature_not_available_dialog_title": "Funcionalidad no disponible", "k_R_goto_bookmark_title": "Marcador...", "k_R_goto_dialog_error": "Introduce una posici\u00f3n v\u00e1lida (${minLocation}-${maxLocation}).", "k_R_goto_dialog_error_snapview": "Introduce una posici\u00f3n v\u00e1lida.", "k_R_goto_dialog_location_range": "(${minLocation} - ${maxLocation})", "k_R_goto_dialog_page_range": "${range}", "k_R_goto_location_title": "Ubicaci\u00f3n...", "k_R_goto_menu_goto_button": "Ir a la ubicaci\u00f3n", "k_R_goto_menu_goto_location": "de ${lastLocation}", "k_R_goto_menu_goto_location_metro_title": "Introducir posici\u00f3n", "k_R_goto_menu_goto_location_title": "Introducir posici\u00f3n", "k_R_goto_menu_goto_message": "Posici\u00f3n ", "k_R_goto_menu_goto_page": "de ${lastPage}", "k_R_goto_menu_goto_page_button": "Ir a la p\u00e1gina", "k_R_goto_menu_goto_page_message": "P\u00e1gina ", "k_R_goto_menu_goto_page_title": "Introducir p\u00e1gina", "k_R_goto_menu_goto_page_title_metro": "Introducir p\u00e1gina", "k_R_goto_menu_title": "Ir a", "k_R_goto_page_dialog_error": "Introduce una p\u00e1gina v\u00e1lida ${range}.", "k_R_goto_page_dialog_error_snapview": "Introduce una p\u00e1gina v\u00e1lida.", "k_R_goto_page_title": "P\u00e1gina...", "k_R_menuButton_back": "Atr\u00e1s", "k_R_menuButton_back_tooltip": "Atr\u00e1s", "k_R_menuButton_bookmark": "Marcador", "k_R_menuButton_bookmark_tooltip": "Alternar marcador", "k_R_menuButton_columnMode": "Columnas", "k_R_menuButton_columnMode_tooltip": "Alternar columnas", "k_R_menuButton_controlPane": "Visualizar", "k_R_menuButton_controlPane_tooltip": "Ver configuraci\u00f3n", "k_R_menuButton_enterImmersive_tooltip": "Obtener acceso al modo de lectura profunda", "k_R_menuButton_exitImmersive_tooltip": "Salir del modo de lectura profunda", "k_R_menuButton_goto": "Ir a", "k_R_menuButton_goto_tooltip": "Men\u00fa Ir a", "k_R_menuButton_notesAndMarks": "Notas/Marcadores", "k_R_menuButton_notesAndMarks_tooltip": "Mostrar notas y marcadores", "k_R_menuButton_pin_start_metro": "Anclar a Inicio", "k_R_menuButton_pin_start_metro_tooltip": "Anclar a Inicio", "k_R_menuButton_sync": "Sincronizar", "k_R_menuButton_sync_tooltip": "Sincronizar", "k_R_menuInput_sitb_placeholder": "Buscar", "k_R_pageArrow_next": "P\u00e1gina siguiente", "k_R_pageArrow_prev": "P\u00e1gina anterior", "k_R_pageLoadError_Text": "Se ha producido un error al cargar la siguiente p\u00e1gina. Int\u00e9ntalo m\u00e1s tarde.", "k_R_pageLoadError_Title": "Error al cargar el contenido", "k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Por ahora, no hay compatibilidad con lectores de pantalla. Para utilizar el lector de pantalla, cambie a la aplicaci\u00f3n Kindle de su dispositivo.", "k_R_search_placeholder": "Buscar en el libro", "k_R_settings_apply_button": "Aplicar configuraci\u00f3n", "k_R_settings_colorMode_black": "Negro", "k_R_settings_colorMode_label": "MODO DE COLOR", "k_R_settings_colorMode_label_metro": "Modo de color", "k_R_settings_colorMode_sepia": "Sepia", "k_R_settings_colorMode_white": "Blanco", "k_R_settings_column_disabled_msg": "Este t\u00edtulo solo est\u00e1 disponible para su lectura en una columna.", "k_R_settings_column_off_button": "Desactivado", "k_R_settings_column_on_button": "Activado", "k_R_settings_fontSize_label": "TAMA\u00d1O DE FUENTE", "k_R_settings_fontSize_label_metro": "Tama\u00f1o de fuente", "k_R_settings_fontSize_tooltip_metro": "Aa", "k_R_settings_margins_label": "M\u00c1RGENES", "k_R_settings_margins_label_metro": "M\u00e1rgenes", "k_R_settings_multiColumnMode_label": "SOLO UNA COLUMNA", "k_R_settings_multiColumnMode_label_metro": "Solo una columna", "k_R_settings_sampleText": "Emma Woodhouse, hermosa, inteligente y rica, con un hogar confortable y un temperamento feliz, parec\u00eda contar con una de las mejores existencias que pudieran desearse y hab\u00eda vivido durante veinti\u00fan a\u00f1os en el mundo, con apenas preocupaciones que pudieran afectarle.", "k_R_settings_showLocation_label": "MOSTRAR POSICI\u00d3N DE LECTURA", "k_R_settings_showLocation_label_metro": "Mostrar posici\u00f3n de lectura", "k_R_settings_title_metro": "Ver opciones", "k_R_show_database_title": "Mostrar base de datos", "k_R_sitb_error_common_message": "Error. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_R_sitb_error_common_title": "B\u00fasqueda no completada", "k_R_sitb_error_index_not_available_message": "Lo sentimos. Este libro no est\u00e1 habilitado para realizar b\u00fasquedas. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_R_sitb_error_index_not_available_title": "B\u00fasqueda no disponible", "k_R_sitb_error_language_not_supported_message": "La b\u00fasqueda no se encuentra disponible para este t\u00edtulo porque el idioma no se admite actualmente. El equipo de Amazon Kindle est\u00e1 trabajando para solucionar el error.", "k_R_sitb_error_language_not_supported_title": "B\u00fasqueda no disponible", "k_R_sitb_error_language_undefined_message": "La b\u00fasqueda de este t\u00edtulo no se encuentra disponible debido a que se ha producido un problema al generar el \u00edndice del t\u00edtulo.", "k_R_sitb_error_language_undefined_title": "B\u00fasqueda no disponible", "k_R_sitb_error_offline_message": "Esta acci\u00f3n requiere conexi\u00f3n de red. Con\u00e9ctate a una red.", "k_R_sitb_error_offline_title": "No hay conexi\u00f3n de red", "k_R_slider_loc_popup": "Pos. ${location}", "k_R_slider_location": "Posici\u00f3n ${location} de ${totalLocations}", "k_R_slider_location_popup": "Posici\u00f3n ${location}", "k_R_slider_pageNumber": "P\u00e1gina ${page} de ${totalPages}", "k_R_slider_pageNumber_popup": "P\u00e1gina ${page}", "k_R_slider_percentage": "${percent}%", "k_R_syncPosition_PN_labelText": "En este momento te encuentras en la p\u00e1gina ${currentPage}. La \u00faltima p\u00e1gina le\u00edda es la p\u00e1gina ${page} de \\\"${deviceName}\\\" a las ${time} del ${date}. \u00bfC\u00f3mo deseas proceder?", "k_R_syncPosition_alreadyFurthest_Text": "En este momento, te encuentras en la \u00faltima ubicaci\u00f3n le\u00edda en todos tus dispositivos.", "k_R_syncPosition_cancelText": "Cancelar", "k_R_syncPosition_cantSync_Text": "Se ha producido un error durante la sincronizaci\u00f3n. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_R_syncPosition_labelText": "En este momento te encuentras en la posici\u00f3n ${currentLocation}. La posici\u00f3n de lectura m\u00e1s avanzada es ${location} en \\\"${deviceName}\\\" a las ${time} del ${date}. \u00bfC\u00f3mo deseas proceder?", "k_R_syncPosition_noDeviceName_PN_labelText": "En este momento te encuentras en la p\u00e1gina ${currentPage}. La \u00faltima p\u00e1gina le\u00edda de todos tus dispositivos es la p\u00e1gina ${page}. \u00bfC\u00f3mo deseas proceder?", "k_R_syncPosition_noDeviceName_labelText": "En este momento te encuentras en la posici\u00f3n ${currentLocation}. La posici\u00f3n de lectura m\u00e1s avanzada en todos tus dispositivos es ${location}. \u00bfC\u00f3mo deseas proceder?", "k_R_syncPosition_page_reset": "Marcar como \u00faltima p\u00e1gina le\u00edda", "k_R_syncPosition_page_sync": "Ir a la \u00faltima p\u00e1gina le\u00edda", "k_R_syncPosition_reset": "Convertir esta posici\u00f3n de lectura en la m\u00e1s avanzada", "k_R_syncPosition_sync": "Ir a la posici\u00f3n de lectura m\u00e1s avanzada", "k_R_syncPosition_title": "Sincronizar la p\u00e1gina le\u00edda m\u00e1s avanzada", "k_R_table_of_contents_title": "\u00cdndice", "k_R_toolbar_iOS_sample_close_button": "Cerrar", "k_R_toolbar_library_button": "Biblioteca", "k_R_toolbar_library_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Mi biblioteca", "k_R_toolbar_library_button_tooltip": "Biblioteca", "k_R_unimplementedFeature_Error_Text": "", "k_R_unimplementedFeature_Error_Title": "Funci\u00f3n no implementada", "k_addToHomeScreen_strong_text": "A\u00f1adir a la pantalla de inicio", "k_addToHomeScreen_text": "Instala Kindle Cloud Reader en tu iPad: pulsa la flecha y, a continuaci\u00f3n, ${addToHomeText}", "k_app_device_name_template": "%FIRST_NAME%'s%DUPE_STRATEGY_1ST%Kindle Cloud Reader", "k_author_conjunction": " y ", "k_banner_RWIS_message_desktop": "Sigue leyendo este libro en tu tel\u00e9fono o tableta con nuestra aplicaci\u00f3n gratuita de Kindle.", "k_banner_RWIS_message_desktop1": "Sigue leyendo este libro con m\u00e1s caracter\u00edsticas Kindle en tu tel\u00e9fono o tableta con la aplicaci\u00f3n gratuita de Kindle.", "k_banner_RWIS_message_ipad": "Sigue leyendo este libro con la aplicaci\u00f3n gratuita de Kindle.", "k_banner_RWIS_message_kp": "Lee donde quieras gratis: descarga Kindle para Android, iOS, PC y Mac, entre otros.", "k_banner_bookmark_command": "CTRL+D", "k_banner_bookmark_command_mac": "Comando+D", "k_banner_eucookie_message_desktop": "\u00danicamente utilizamos cookies y herramientas similares (conjuntamente, \u201ccookies\u201d) para proporcionarte nuestros servicios, lo que incluye reconocerte cu\u00e1ndo te registras, mantener un registro de tus preferencias y proporcionar contenido. Otros servicios de Amazon pueden usar cookies para otros fines. Para obtener m\u00e1s informaci\u00f3n sobre c\u00f3mo usa Amazon las cookies, lee el", "k_banner_eucookie_message_learn_more": "Aviso de Cookies ", "k_banner_eucookie_message_postHref": "de Amazon.", "k_banner_eucookie_message_refLink": "https:\\/\\/www.amazon.es\\/gp\\/help\\/customer\\/display.html?ie=UTF8&nodeId=201890250", "k_common_cancel_button": "Cancelar", "k_common_close_button": "Cerrar", "k_common_confirm_button": "Aceptar", "k_common_learn_more": "M\u00e1s informaci\u00f3n", "k_dialog_appCache_button_text": "Aceptar", "k_dialog_appCache_instruction1_text": "Haz clic en el bot\u00f3n de inicio del iPad para salir de la aplicaci\u00f3n.", "k_dialog_appCache_instruction2_text": "Haz clic en el bot\u00f3n de inicio del iPad dos veces para mostrar la barra multitarea (situada en la parte inferior de la pantalla del iPad).", "k_dialog_appCache_instruction3_text": "Localiza el icono de la aplicaci\u00f3n Safari y mant\u00e9n presionado el icono hasta que aparezca un bot\u00f3n con el s\u00edmbolo menos (-) en la esquina superior izquierda. A continuaci\u00f3n, toca el bot\u00f3n con este s\u00edmbolo.", "k_dialog_appCache_instruction4_text": "Localiza el resto de instancias de Kindle Cloud Reader y mant\u00e9n presionados sus iconos hasta que aparezca el bot\u00f3n con el s\u00edmbolo menos (-) en la esquina superior izquierda. A continuaci\u00f3n, toca el bot\u00f3n con este s\u00edmbolo.", "k_dialog_appCache_instruction5_text": "Reinicia Safari e intenta cargar de nuevo read.amazon.com.", "k_dialog_appCache_message_text": "Hemos detectado un error al intentar guardar la aplicaci\u00f3n para la lectura sin conexi\u00f3n. Para solucionarlo, reinicia el navegador Safari, as\u00ed como cualquier otra instancia en ejecuci\u00f3n de Kindle Cloud Reader.", "k_dialog_appCache_readmore_text": "\u00bfC\u00f3mo puedo reiniciar Safari o Kindle Cloud Reader?", "k_dialog_appCache_step1_text": "Paso 1.", "k_dialog_appCache_step2_text": "Paso 2.", "k_dialog_appCache_step3_text": "Paso 3.", "k_dialog_appCache_step4_text": "Paso 4.", "k_dialog_appCache_step5_text": "Paso 5.", "k_dialog_appCache_title_text": "Error al guardar la aplicaci\u00f3n", "k_dialog_dbBlocked_Text": "Error al cerrar la sesi\u00f3n. Para solucionar el problema prueba a cerrar el resto de pesta\u00f1as en las que se est\u00e1 ejecutando Kindle Cloud Reader.", "k_dialog_dbBlocked_Title": "Cerrar sesi\u00f3n", "k_dialog_enableOffline_button_text": "Aceptar", "k_dialog_enable_offline_firefox_msg": "Kindle Cloud Reader necesita tu autorizaci\u00f3n para guardar libros para su lectura sin conexi\u00f3n. Si has seleccionado \\\"Nunca para este sitio\\\" cuando Firefox ha solicitado tu autorizaci\u00f3n, tendr\u00e1s que realizar ${linkStart}las siguientes acciones${linkEnd} para activar la lectura sin conexi\u00f3n en Firefox.", "k_dialog_enable_offline_title": "Activar lectura sin conexi\u00f3n", "k_dialog_ffPrompting_Text": "Permite a Kindle almacenar m\u00e1s de 50 MB de datos en tu ordenador para su uso sin conexi\u00f3n.<br /><br />Para obtener ayuda, consulta la secci\u00f3n de ${linkStart}soluci\u00f3n de problemas y recursos${linkEnd} de Kindle Cloud Reader.", "k_dialog_ffPrompting_Title": "Permitir almacenamiento sin conexi\u00f3n", "k_dialog_logoutConfirm_continue": "Continuar para cerrar la sesi\u00f3n", "k_dialog_logoutConfirm_message": "Si cierra sesi\u00f3n en Kindle, todos los libros descargados se eliminar\u00e1n de su navegador. Si vuelve a iniciar sesi\u00f3n, s\u00f3lo podr\u00e1 seguir leyendo estos libros cuando est\u00e9 conectado a Internet.", "k_dialog_logout_message": "Espera mientras limpiamos el contenido descargado.", "k_dialog_logout_title": "Cerrando sesi\u00f3n de Kindle Cloud Reader...", "k_dialog_message_dismissButton_text": "Aceptar", "k_dialog_message_retryButton_text": "Intentarlo de nuevo", "k_dialog_offlineLogout_Text": "Se requiere conexi\u00f3n a Internet para esta operaci\u00f3n.", "k_dialog_offlineLogout_Title": "No se puede cerrar sesi\u00f3n", "k_dialog_prevSignOutFailed_Text": "\u00bfProblemas para cerrar la sesi\u00f3n? Visita la secci\u00f3n de ayuda para buscar posibles soluciones.", "k_dialog_prevSignOutFailed_Title": "Cerrar sesi\u00f3n", "k_dialog_rental_expired_dismiss_button_text": "Rechazar", "k_dialog_rental_expired_extend_button_text": "Ampliar o comprar", "k_dialog_smallWindow_button_ignore": "Ignorar", "k_dialog_smallWindow_msg": "Aumente el tama\u00f1o de esta ventana para optimizar la experiencia de lectura con Kindle Cloud Reader.", "k_dialog_smallWindow_title": "Ampliar ventana para leer con Kindle Cloud Reader", "k_empty_library_free": "\u00a1Disfruta tambi\u00e9n de miles de libros gratuitos!", "k_empty_library_legal": "*La disponibilidad de los libros puede variar para los clientes que se encuentren fuera de EE. UU.", "k_empty_library_main": "Elige entre m\u00e1s de 950 000* libros en ${storeName}.", "k_empty_library_manga_button": "Obtener manga gratis", "k_empty_library_manga_msg": "Elige entre m\u00e1s de dos millones de libros en ${storeName}, incluidos los t\u00edtulos m\u00e1s vendidos y c\u00f3mics gratuitos.", "k_empty_library_shop": "Comprar en la Tienda Kindle", "k_empty_library_store_name": "Tienda Kindle", "k_empty_library_title": "Actualmente no hay libros en tu biblioteca Kindle.", "k_empty_search_msg": "No se han encontrado resultados para la b\u00fasqueda.", "k_empty_search_offline": "(Cuando no est\u00e9s conectado, solo podr\u00e1s buscar libros descargados).", "k_endOfFreeTrial_Text": "La versi\u00f3n de prueba de este libro ha caducado. Para continuar leyendo este libro c\u00f3mpralo en la Tienda Kindle.", "k_endOfFreeTrial_Title": "Contenido caducado", "k_endOfFreeTrial_buyfullversion_button": "Obtener la versi\u00f3n completa", "k_endOfFreeTrial_cancel_button": "Cancelar", "k_endOfFreeTrial_removebook_button": "Eliminar libro", "k_endOfSample_Text": "Has alcanzado el final del contenido de muestra. Puedes adquirir la versi\u00f3n completa en la Tienda Kindle o volver a la muestra.", "k_endOfSample_Title": "Fin del contenido de muestra", "k_endOfSample_buy_button": "Obtener la versi\u00f3n completa", "k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Comprar la versi\u00f3n completa en la tienda", "k_endOfSample_cancel_button": "Volver a la muestra", "k_freeTrialExpires_Day": "La versi\u00f3n de prueba caduca en <span class=\"free_trial_remaining\">1 d\u00edas</span>", "k_freeTrialExpires_Days": "La versi\u00f3n de prueba caduca en <span class=\"free_trial_remaining\">${days} d\u00edas</span>", "k_freeTrialExpires_less_than_a_day": "La versi\u00f3n de prueba caduca en <span class=\"free_trial_remaining\">menos de un d\u00eda</span>", "k_noAppMode_content": "Lo sentimos, pero en estos momentos no podemos abrir Kindle Cloud Reader desde el marcador de la pantalla de inicio actual.\u00a0 Para continuar leyendo en tu iPad, toca abajo para hacerlo en Safari o utiliza la aplicaci\u00f3n gratuita de Kindle.", "k_noAppMode_safariLink": "Abrir en Safari", "k_noAppMode_storeLink": "Kindle para iPad", "k_noDownloadedBooks_title": "En este momento no dispones de libros descargados.", "k_offlineAccessDisabled_Text": "\u26a0\ufe0f Kindle ya no admite la descarga de libros para su acceso sin conexi\u00f3n en el navegador web. Puede seguir leyendo los libros descargados sin conexi\u00f3n hasta que cierre sesi\u00f3n en su cuenta.", "k_provide_feedback_error": "Error al intentar enviar el mensaje. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_provide_feedback_sending": "Enviando...", "k_provide_feedback_success": "El mensaje se ha enviado con \u00e9xito &#x2713;", "k_provide_feedback_text": "Escribe tu pregunta o comentario en el espacio que aparece a continuaci\u00f3n.", "k_provide_feedback_title": "Contacto", "k_send_feedback_button": "Enviar", "k_store_open_failed_Error_Text": "Se ha producido un error al abrir la Tienda Kindle. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_store_open_failed_Error_Title": "No se puede abrir la Tienda Kindle", "k_store_open_failed_offline_Error_Text": "Se requiere conexi\u00f3n a Internet para esta operaci\u00f3n.", "k_store_open_failed_offline_Error_Title": "No se puede abrir la Tienda Kindle", "k_text_me_widget_EmailPhone": "Introduce tu e-mail o n\u00famero de tel\u00e9fono", "k_text_me_widget_GetApp": "Obtener la aplicaci\u00f3n ahora", "k_text_me_widget_invalid_input": "Introduce un n\u00famero de tel\u00e9fono o una direcci\u00f3n de e-mail v\u00e1lidos.", "k_text_me_widget_send_email_fail": "Error al enviar el e-mail. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_text_me_widget_send_email_success": "La aplicaci\u00f3n est\u00e1 en camino. Comprueba tu e-mail.", "k_text_me_widget_send_sms_fail": "Error al enviar el mensaje. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_text_me_widget_send_sms_success": "La aplicaci\u00f3n est\u00e1 en camino. Comprueba tu tel\u00e9fono.", "k_text_me_widget_service_error": "Error. Int\u00e9ntalo de nuevo m\u00e1s tarde.", "k_text_me_widget_submitting_request": "Enviando solicitud...", "k_window_title": "Kindle Cloud Reader", "metro_tutorial_children_book_click_instruction": "Sugerencia: Haz doble clic en el texto para ampliarlo", "metro_tutorial_children_book_tap_instruction": "Sugerencia: Toca dos veces el texto para ampliarlo", "metro_tutorial_children_book_text": "En el agua fr\u00eda, los animales nadaron hasta que alcanzaron una isla justo antes del amanecer.", "metro_tutorial_comic_book_click_instruction1": "Sugerencia: Haz doble clic en los paneles para ampliarlos,", "metro_tutorial_comic_book_click_instruction2": "y despl\u00e1zate hacia la derecha para navegar a los paneles ampliados.", "metro_tutorial_comic_book_tap_instruction1": "Sugerencia: Toca dos veces los paneles para ampliarlos,", "metro_tutorial_comic_book_tap_instruction2": "a continuaci\u00f3n, desliza el dedo para navegar a los paneles ampliados.", "metro_tutorial_commic_book_dialogue": "\u00a1SABEMOS LO DE LA M\u00c1QUINA DEL D\u00cdA DEL JUICIO FINAL!"};
var Kindle = Kindle || {};Kindle.strings  = Kindle.strings || {};Kindle.strings['fr-FR']={"k_L_bad_download_Error_Text": "Pour lire ce livre sur votre Kindle, veuillez le t\u00e9l\u00e9charger depuis le Cloud.", "k_L_bad_download_Error_Title": "Erreur d'ouverture du contenu", "k_L_bookNotAvailable_Text": "V\u00e9rifiez votre connexion r\u00e9seau, puis r\u00e9essayez.", "k_L_bookNotAvailable_Title": "Impossible d'afficher le contenu", "k_L_cacheError": "Erreur d'enregistrement de l'application. Cliquez ici pour r\u00e9essayer.", "k_L_cacheError_pad": "Erreur d'enregistrement de l'application. Appuyez ici pour r\u00e9essayer.", "k_L_cached": "&#x2713; Application pr\u00eate \u00e0 l'utilisation hors ligne", "k_L_caching": "Enregistrement de l'application pour utilisation hors ligne...", "k_L_contact_us": "Nous contacter", "k_L_context_download_pin": "T\u00e9l\u00e9charger et \u00e9pingler le livre", "k_L_context_pin": "Epingler le livre", "k_L_context_read": "Ouvrir le livre", "k_L_context_remove": "Supprimer le livre", "k_L_context_revoke_sample": "Supprimer l'extrait", "k_L_deregister_title": "D\u00e9connexion", "k_L_dialog_delete": "Supprimer", "k_L_dialog_deleteFreeTrial_prompt_text": "Cette action entra\u00eenera la suppression d\u00e9finitive de ce livre de votre compte.", "k_L_dialog_deleteFreeTrial_prompt_title": "Supprimer l'essai gratuit\u00a0?", "k_L_dialog_delete_cancel": "Annuler", "k_L_dialog_delete_prompt": "Cette action entra\u00eenera la suppression d\u00e9finitive de <i>${bookTitle}</i> de votre compte.", "k_L_dialog_delete_prompt_title": "Supprimer l'extrait ?", "k_L_help": "Aide", "k_L_jp_merchandise_dialog_message": "T\u00e9l\u00e9chargez des chapitres gratuits des manga suivants pour une dur\u00e9e limit\u00e9e", "k_L_jp_merchandise_dialog_title": "Manga gratuit accessible pour une dur\u00e9e limit\u00e9e", "k_L_legal_notices": "Mentions l\u00e9gales", "k_L_loadFailedError_Text": "Une erreur est survenue lors du chargement de la biblioth\u00e8que.", "k_L_loadFailedError_Title": "Erreur de chargement de la biblioth\u00e8que", "k_L_openBookAsinNotSpecified_Text": "Le titre \u00e0 ouvrir n'a pas \u00e9t\u00e9 sp\u00e9cifi\u00e9.", "k_L_openBookAsinNotSpecified_Title": "Titre non sp\u00e9cifi\u00e9", "k_L_openBookContentLicenseExceededError_Text": "Vous avez d\u00e9pass\u00e9 le nombre maximal d'appareils sur lequel vous pouvez lire cet \u00e9l\u00e9ment. Pour t\u00e9l\u00e9charger cet \u00e9l\u00e9ment, vous pouvez d\u00e9sinscrire l'un des appareils et en supprimer le contenu. Vous pouvez \u00e9galement acheter un autre exemplaire sur la boutique Kindle.", "k_L_openBookContentLicenseExceededError_Title": "Limitation de licence atteinte", "k_L_openBookContentLoanEndedError_Text": "Ce livre ne peut pas \u00eatre ouvert, car il \u00e9tait pr\u00eat\u00e9 et son pr\u00eat a expir\u00e9.", "k_L_openBookContentLoanEndedError_Title": "Titre non disponible", "k_L_openBookContentLoanedError_Text": "Ce titre ne peut pas \u00eatre ouvert pour le moment, car vous l'avez pr\u00eat\u00e9.", "k_L_openBookContentLoanedError_Title": "Titre non disponible", "k_L_openBookContentRentalExpiredErrorMetro_Text": "La dur\u00e9e de location pour ce livre a expir\u00e9. Rendez-vous sur la boutique Kindle pour prolonger la location du livre ou pour l'acheter. <br /><br />Vos notes et vos surlignements sont toujours disponibles sur ${link}, m\u00eame apr\u00e8s expiration de la location.", "k_L_openBookContentRentalExpiredErrorMetro_Title": "Expiration de la location", "k_L_openBookContentRentalExpiredError_Text": "La location de ce livre a expir\u00e9. S\u00e9lectionnez le bouton Prolonger ou Acheter ci-dessous si vous souhaitez relouer ou acheter ce livre.", "k_L_openBookContentRentalExpiredError_Title": "Expiration de la location", "k_L_openBookContentUnsupportedErrorMetro_Text": "Ce titre n'est pas disponible sur Kindle pour Windows 8.", "k_L_openBookContentUnsupportedErrorMetro_Title": "Titre non disponible", "k_L_openBookContentUnsupportedError_Text": "Ce titre n'est pas disponible sur Kindle Cloud Reader.", "k_L_openBookContentUnsupportedError_Title": "Titre non disponible", "k_L_openBookContentUpgrade_ButtonText": "Continuer", "k_L_openBookContentUpgrade_Text": "Une nouvelle version de ce livre est disponible. La nouvelle version sera t\u00e9l\u00e9charg\u00e9e pendant que vous poursuivez votre relecture.", "k_L_openBookContentUpgrade_Title": "Nouvelle version", "k_L_openBookGeoLocationNotAllowed_Text": "Ce titre n'est pas disponible dans ce pays.", "k_L_openBookGeoLocationNotAllowed_Title": "Titre non disponible", "k_L_openBookLoadFailure_Text": "Une erreur est survenue lors de l'ouverture de l'\u00e9l\u00e9ment s\u00e9lectionn\u00e9. R\u00e9essayez ult\u00e9rieurement.", "k_L_openBookLoadFailure_Title": "Erreur d'ouverture du contenu", "k_L_openBookNetworkError_Text": "Une erreur est survenue lors de l'ouverture de l'\u00e9l\u00e9ment s\u00e9lectionn\u00e9. R\u00e9essayez ult\u00e9rieurement.", "k_L_openBookNetworkError_Title": "Erreur d'ouverture du contenu", "k_L_openBookSessionLimitExceededError_Text": "Vous avez atteint le nombre maximal de sessions simultan\u00e9es autoris\u00e9es pour ce titre. R\u00e9essayez ult\u00e9rieurement.", "k_L_openBookSessionLimitExceededError_Title": "Nombre de sessions max. atteint", "k_L_openBookTimeoutError_Text": "Une erreur de connexion est survenue. R\u00e9essayez ult\u00e9rieurement.", "k_L_openBookTimeoutError_Title": "Erreur de connexion r\u00e9seau", "k_L_outdatedChrome_Text": "Cette version de Google Chrome ne prend pas en charge le format d'extension Chrome. ${linkStart}Mettez \u00e0 jour Google Chrome${linkEnd} pour activer l'aide hors ligne.", "k_L_outdatedChrome_Title": "Impossible d'activer l'aide hors ligne", "k_L_privacy": "Confidentialit\u00e9", "k_L_progress_dialog_message": "Ce titre sera enregistr\u00e9 dans l'onglet T\u00e9l\u00e9charg\u00e9 pour que vous puissiez le lire, jusqu'\u00e0 ce que vous l'effaciez. Pour votre confort, nous t\u00e9l\u00e9chargeons automatiquement les livres ouverts r\u00e9cemment tant que nous disposons d'espace libre.", "k_L_progress_dialog_title": "T\u00e9l\u00e9chargement et \u00e9pinglage du livre", "k_L_removeBookError_Text": "Une erreur est survenue lors de la suppression de l'\u00e9l\u00e9ment s\u00e9lectionn\u00e9. Le contenu t\u00e9l\u00e9charg\u00e9 peut \u00eatre effac\u00e9 de cet ordinateur en cliquant sur D\u00e9connexion dans le menu Param\u00e8tres.", "k_L_removeBookError_Title": "Erreur de suppression du contenu", "k_L_removeBookNetworkError_Text": "Une erreur est survenue lors de la suppression de l'\u00e9l\u00e9ment s\u00e9lectionn\u00e9. R\u00e9essayez ult\u00e9rieurement.", "k_L_removeBookNetworkError_Title": "Erreur de suppression du contenu", "k_L_revokeFailed_Text": "Cette op\u00e9ration n\u00e9cessite une connexion \u00e0 Internet.", "k_L_revokeFailed_Title": "Impossible de supprimer le livre", "k_L_sample_badge_text": "EXTRAIT", "k_L_saveBookOutOfSpace_Text": "L'espace disponible est insuffisant pour enregistrer cet \u00e9l\u00e9ment et le lire hors connexion. Vous pouvez continuer \u00e0 lire ce titre en ligne. Lib\u00e9rez de l'espace en effa\u00e7ant d'autres titres enregistr\u00e9s. Vous pouvez peut-\u00eatre augmenter votre espace de stockage hors connexion. Pour plus d'informations sur le sujet, ${linkStart}cliquez ici${linkEnd}.", "k_L_saveBookOutOfSpace_Title": "Erreur d'enregistrement du contenu", "k_L_sort_author": "Trier par auteur", "k_L_sort_author_label": "Auteur", "k_L_sort_recent": "Trier par nouveaut\u00e9", "k_L_sort_recent_label": "R\u00e9cent", "k_L_sort_title": "Trier par titre", "k_L_sort_title_label": "Titre", "k_L_storeNotAvailable_Text": "Une connexion Internet est n\u00e9cessaire pour effectuer des achats sur la boutique Kindle.", "k_L_storeNotAvailable_Title": "Aucune connexion Internet", "k_L_syncFailedError_Text": "Une erreur est survenue lors de la synchronisation. R\u00e9essayez ult\u00e9rieurement.", "k_L_syncFailedError_Title": "Echec de la synchronisation", "k_L_syncFailedOfflineError_Text": "Une connexion \u00e0 Internet est requise pour la synchronisation de votre biblioth\u00e8que.", "k_L_syncFailedOfflineError_Title": "Echec de la synchronisation", "k_L_terms_of_use": "Conditions g\u00e9n\u00e9rales d'utilisation", "k_L_text_me_wdiget_Instruction": "Pour obtenir un lien de t\u00e9l\u00e9chargement, saisissez votre adresse e-mail ou votre num\u00e9ro de t\u00e9l\u00e9phone", "k_L_text_me_widget_Text": "Malheureusement, <b>Kindle Cloud Reader</b> ne parvient pas \u00e0 ouvrir ce livre. Vous pouvez tout de m\u00eame le lire gr\u00e2ce \u00e0 notre application Kindle gratuite.", "k_L_toolbar_cloud_button": "Contenu sur le nuage", "k_L_toolbar_cloud_button_tooltip": "Contenu sur le nuage", "k_L_toolbar_cloud_label": "Cloud", "k_L_toolbar_cloud_label_tooltip": "Cloud", "k_L_toolbar_cover_slider": "Taille de la couverture", "k_L_toolbar_cover_slider_tooltip": "Taille de la couverture", "k_L_toolbar_downloaded_button": "Contenu t\u00e9l\u00e9charg\u00e9", "k_L_toolbar_downloaded_button_tooltip": "Contenu t\u00e9l\u00e9charg\u00e9", "k_L_toolbar_downloaded_label": "T\u00e9l\u00e9charg\u00e9", "k_L_toolbar_downloaded_label_tooltip": "T\u00e9l\u00e9charg\u00e9", "k_L_toolbar_grid_button": "Affichage grille", "k_L_toolbar_grid_button_tooltip": "Affichage grille", "k_L_toolbar_list_button": "Affichage liste", "k_L_toolbar_list_button_tooltip": "Affichage liste", "k_L_toolbar_manage_button": "G\u00e9rer", "k_L_toolbar_manage_button_tooltip": "G\u00e9rer", "k_L_toolbar_notebook_button": "Vos notes et surlignements", "k_L_toolbar_notebook_button_tooltip": "Vos notes et surlignements", "k_L_toolbar_search_button": "Rechercher", "k_L_toolbar_search_button_tooltip": "Recherche", "k_L_toolbar_sort_button": "Trier par", "k_L_toolbar_sort_button_tooltip": "Trier par", "k_L_toolbar_store_button": "Boutique Kindle", "k_L_toolbar_store_button_tooltip": "Boutique Kindle", "k_L_toolbar_sync_button": "Sync", "k_L_toolbar_sync_button_tooltip": "Sync", "k_L_trial_badge_text": "ESSAI", "k_L_unknownError_Text": "Une erreur est survenue lors de l'ouverture de l'\u00e9l\u00e9ment s\u00e9lectionn\u00e9. R\u00e9essayez ult\u00e9rieurement.", "k_L_unknownError_Title": "Erreur d'ouverture du contenu", "k_RWIS_banner_message_desktop": "Pour poursuivre la lecture plus tard, placez un signet en appuyant sur les touches ${bookmarkCommand} ou ${getAppStart}t\u00e9l\u00e9chargez une application gratuite de lecture${getAppEnd} pour votre t\u00e9l\u00e9phone ou votre tablette.", "k_RWIS_banner_message_ipad": "Pour continuer \u00e0 lire plus tard, t\u00e9l\u00e9chargez notre ${getIPadAppStart}application gratuite pour iPad${getIPadAppEnd}.", "k_R_annotation_pane_bookmark_label": "Signet", "k_R_annotation_pane_cancel": "Annuler", "k_R_annotation_pane_delete": "Supprimer", "k_R_annotation_pane_delete_confirm": "Confirmer la suppression ?", "k_R_annotation_pane_dont_delete": "Ne pas supprimer", "k_R_annotation_pane_edit": "Modifier la note", "k_R_annotation_pane_empty_note": "Ce livre ne contient aucune note ou annotation.", "k_R_annotation_pane_goto": "Se rendre \u00e0 l'emplacement", "k_R_annotation_pane_next": "Cliquez pour acc\u00e9der au suivant", "k_R_annotation_pane_no": "Non", "k_R_annotation_pane_note_highlight": "Surlignement", "k_R_annotation_pane_note_label": "Note", "k_R_annotation_pane_notes_location": "Emplacement ${location}", "k_R_annotation_pane_notes_page": "Page\u00a0${page}", "k_R_annotation_pane_previous": "Cliquez pour acc\u00e9der au pr\u00e9c\u00e9dent", "k_R_annotation_pane_save": "Enregistrer la note", "k_R_annotation_pane_yes": "Oui", "k_R_beginning_title": "D\u00e9but", "k_R_book_extras_title": "Plus d'infos", "k_R_context_createHighlight": "Surlignement", "k_R_context_createNote": "Note", "k_R_context_deleteHighlight": "Supprimer le surlignement", "k_R_context_editNote": "Modifier la note", "k_R_cover_title": "Couverture", "k_R_dialog_annotation_pane_title": "Notes et annotations", "k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Notes et surlignements", "k_R_dialog_editNote_cancel": "Annuler", "k_R_dialog_editNote_delete": "Supprimer", "k_R_dialog_editNote_placeholder": "Saisissez votre note ici", "k_R_dialog_editNote_save": "Enregistrer", "k_R_dialog_editNote_title_create": "Cr\u00e9er une note", "k_R_dialog_editNote_title_edit": "Modifier la note", "k_R_dialog_sitb_message_indexing": "Le livre est en cours d'indexation. Cela peut prendre quelques minutes.", "k_R_dialog_sitb_pane_title_indexing": "Indexation...", "k_R_dialog_sitb_pane_title_notAvailable": "Recherche non disponible", "k_R_dialog_sitb_pane_title_oneResultFound": "${numberResults}\u00a0r\u00e9sultat", "k_R_dialog_sitb_pane_title_resultsFound": "${numberResults}\u00a0r\u00e9sultats", "k_R_dialog_sitb_pane_title_searching": "Recherche...", "k_R_dialog_sitb_result_current_location": "Vous \u00eates \u00e0 l'emplacement\u00a0${location}", "k_R_dialog_sitb_result_current_location_past": "Vous \u00e9tiez \u00e0 l'emplacement\u00a0${location}", "k_R_dialog_sitb_result_current_page": "Vous \u00eates \u00e0 la page\u00a0${page}", "k_R_dialog_sitb_result_current_page_past": "Vous \u00e9tiez \u00e0 la page\u00a0${page}", "k_R_dialog_sitb_result_location": "Emplacement ${location}", "k_R_dialog_sitb_result_page": "Page\u00a0${page}", "k_R_dialog_unoptimizedFormat_close": "Fermer le livre", "k_R_dialog_unoptimizedFormat_continue": "Continuer tout de m\u00eame", "k_R_dialog_unoptimizedFormat_message": "Ce livre n'est pas optimis\u00e9 pour Kindle Cloud Reader sur cet appareil. Installez ${linkStart}Kindle pour iPad${linkEnd} pour lire cet \u00e9l\u00e9ment.", "k_R_dialog_unoptimizedFormat_metro_message": "Ce livre n'est pas optimis\u00e9 pour Kindle pour Windows 8.", "k_R_dialog_unoptimizedFormat_stopSave": "Annuler l'enregistrement", "k_R_dialog_unoptimizedFormat_title": "Contenu non pris en charge", "k_R_dialog_upgrade_btn": "Mettre \u00e0 jour maintenant", "k_R_dialog_upgrade_countryBlk_btn": "Acc\u00e9der au Windows Store", "k_R_dialog_upgrade_countryBlk_msg": "D\u00e9sol\u00e9, cette version de Kindle ne prend pas en charge votre langue et/ou zone g\u00e9ographique. <br/> Consultez le Windows Store pour voir si une mise \u00e0 jour est disponible.", "k_R_dialog_upgrade_countryBlk_title": "Kindle dans votre r\u00e9gion", "k_R_dialog_upgrade_langSupport_btn": "Mettre \u00e0 jour maintenant", "k_R_dialog_upgrade_langSupport_msg": "Avant de commencer votre lecture, une mise \u00e0 jour est n\u00e9cessaire pour la prise en charge de votre langue par Kindle.", "k_R_dialog_upgrade_langSupport_title": "Mise \u00e0 jour disponible", "k_R_dialog_upgrade_msg": " Avant de commencer votre lecture, Kindle doit effectuer une mise \u00e0 niveau gratuite pour prendre en charge les toutes derni\u00e8res fonctionnalit\u00e9s.", "k_R_dialog_upgrade_title": "Mise \u00e0 jour disponible", "k_R_dictionary_labels_Derivatives": "D\u00e9riv\u00e9s", "k_R_dictionary_labels_Ipa": "API", "k_R_dictionary_labels_Notes": "Notes", "k_R_dictionary_labels_Origin": "Origine", "k_R_dictionary_labels_Phrases": "Locutions", "k_R_dictionary_labels_Usage": "Usage", "k_R_dictionary_loading": "Chargement", "k_R_dictionary_not_available": "Dictionnaire indisponible.", "k_R_dictionary_not_found": "Aucun r\u00e9sultat dans le dictionnaire.", "k_R_dictionary_offline": "L'utilisation du dictionnaire n\u00e9cessite une connexion \u00e0 Internet.", "k_R_dictionary_view_full": "Voir la d\u00e9finition compl\u00e8te", "k_R_dictionary_view_full_i18n": "D\u00e9finition compl\u00e8te", "k_R_download_disk_error": "T\u00e9l\u00e9charg\u00e9 : $ {percent} (<a href=\\\"${url}\\\" target=\\\"_blank\\\" id=\\\"kindleReader_download_disk_error\\\">Espace de stockage du navigateur plein</a>)", "k_R_download_network_error": "T\u00e9l\u00e9chargement bloqu\u00e9 : $ {percent}(erreur)", "k_R_downloaded": "${percent} % t\u00e9l\u00e9charg\u00e9s", "k_R_downloading": "T\u00e9l\u00e9chargement : ${percent} %", "k_R_embedded_logo_tooltip": "Ouvrir Kindle Cloud Reader dans un nouvel onglet", "k_R_feature_not_available_dialog_buy_btn": "Acheter la version compl\u00e8te", "k_R_feature_not_available_dialog_text": "Cette fonctionnalit\u00e9 est disponible dans la version compl\u00e8te du livre.", "k_R_feature_not_available_dialog_title": "Fonctionnalit\u00e9 indisponible", "k_R_goto_bookmark_title": "Signet...", "k_R_goto_dialog_error": "Veuillez saisir un emplacement valide (${minLocation}-${maxLocation}).", "k_R_goto_dialog_error_snapview": "Entrez un emplacement valide.", "k_R_goto_dialog_location_range": "(${minLocation} - ${maxLocation})", "k_R_goto_dialog_page_range": "${range}", "k_R_goto_location_title": "Emplacement...", "k_R_goto_menu_goto_button": "Se rendre \u00e0 l'emplacement", "k_R_goto_menu_goto_location": "sur ${lastLocation}", "k_R_goto_menu_goto_location_metro_title": "Saisissez un emplacement", "k_R_goto_menu_goto_location_title": "Saisir un emplacement", "k_R_goto_menu_goto_message": "Emplacement ", "k_R_goto_menu_goto_page": "sur ${lastPage}", "k_R_goto_menu_goto_page_button": "Aller \u00e0 la page", "k_R_goto_menu_goto_page_message": "Page ", "k_R_goto_menu_goto_page_title": "Saisir une page", "k_R_goto_menu_goto_page_title_metro": "Saisir une page", "k_R_goto_menu_title": "Aller \u00e0", "k_R_goto_page_dialog_error": "Veuillez saisir une page valide ${range}.", "k_R_goto_page_dialog_error_snapview": "Veuillez saisir une page valide.", "k_R_goto_page_title": "Page...", "k_R_menuButton_back": "Retour", "k_R_menuButton_back_tooltip": "Retour", "k_R_menuButton_bookmark": "Signet", "k_R_menuButton_bookmark_tooltip": "Activer/d\u00e9sactiver le signet", "k_R_menuButton_columnMode": "Colonnes", "k_R_menuButton_columnMode_tooltip": "Activer/d\u00e9sactiver les colonnes", "k_R_menuButton_controlPane": "Affichage", "k_R_menuButton_controlPane_tooltip": "Param\u00e8tres d'affichage", "k_R_menuButton_enterImmersive_tooltip": "Passer en mode de lecture immersive", "k_R_menuButton_exitImmersive_tooltip": "Quitter le mode de lecture immersive", "k_R_menuButton_goto": "Aller \u00e0", "k_R_menuButton_goto_tooltip": "Menu Aller \u00e0", "k_R_menuButton_notesAndMarks": "Notes/Marques", "k_R_menuButton_notesAndMarks_tooltip": "Afficher les notes et annotations", "k_R_menuButton_pin_start_metro": "Epingler", "k_R_menuButton_pin_start_metro_tooltip": "Epingler", "k_R_menuButton_sync": "Sync", "k_R_menuButton_sync_tooltip": "Synchroniser", "k_R_menuInput_sitb_placeholder": "Rechercher", "k_R_pageArrow_next": "Page suivante", "k_R_pageArrow_prev": "Page pr\u00e9c\u00e9dente", "k_R_pageLoadError_Text": "Une erreur est survenue lors du chargement de la page suivante. R\u00e9essayez ult\u00e9rieurement.", "k_R_pageLoadError_Title": "Erreur de chargement du contenu", "k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550": "La prise en charge de la lecture assist\u00e9e n'est pas disponible \u00e0 l\u2019heure actuelle. Pour utiliser la fonction de lecture assist\u00e9e, veuillez utiliser l'application Kindle sur votre appareil.", "k_R_search_placeholder": "Rechercher dans le livre", "k_R_settings_apply_button": "Appliquer les param\u00e8tres", "k_R_settings_colorMode_black": "Noir", "k_R_settings_colorMode_label": "MODE COULEUR", "k_R_settings_colorMode_label_metro": "Mode couleur", "k_R_settings_colorMode_sepia": "S\u00e9pia", "k_R_settings_colorMode_white": "Blanc", "k_R_settings_column_disabled_msg": "Ce titre est uniquement disponible en lecture sur une colonne.", "k_R_settings_column_off_button": "D\u00e9sactiv\u00e9", "k_R_settings_column_on_button": "Activ\u00e9", "k_R_settings_fontSize_label": "TAILLE DE LA POLICE", "k_R_settings_fontSize_label_metro": "Taille de la police", "k_R_settings_fontSize_tooltip_metro": "Aa", "k_R_settings_margins_label": "MARGE", "k_R_settings_margins_label_metro": "Marges", "k_R_settings_multiColumnMode_label": "UNE COLONNE UNIQUE", "k_R_settings_multiColumnMode_label_metro": "Une colonne uniquement", "k_R_settings_sampleText": "Belle, intelligente et riche, jouissant d'une confortable demeure et d'un heureux caract\u00e8re, Emma Woodhouse semblait dot\u00e9e des plus pr\u00e9cieux avantages de l'existence ; et depuis pr\u00e8s de vingt et un ans qu'elle \u00e9tait sur cette terre, elle n'avait gu\u00e8re connu le chagrin et la contrari\u00e9t\u00e9.", "k_R_settings_showLocation_label": "AFFICHER L'EMPLACEMENT DE LECTURE", "k_R_settings_showLocation_label_metro": "Afficher l'emplacement de lecture", "k_R_settings_title_metro": "Options d'affichage", "k_R_show_database_title": "Afficher la base de donn\u00e9es", "k_R_sitb_error_common_message": "Une erreur s'est produite. Veuillez r\u00e9essayer plus tard.", "k_R_sitb_error_common_title": "Recherche non termin\u00e9e", "k_R_sitb_error_index_not_available_message": "D\u00e9sol\u00e9, il n'est pas encore possible d'effectuer des recherches dans ce livre. Merci de r\u00e9essayer ult\u00e9rieurement.", "k_R_sitb_error_index_not_available_title": "Recherche non disponible", "k_R_sitb_error_language_not_supported_message": "La recherche n'est pas disponible pour ce titre car la langue n'est pas encore prise en charge. L'\u00e9quipe Amazon Kindle travaille actuellement \u00e0 la r\u00e9solution de ce probl\u00e8me.", "k_R_sitb_error_language_not_supported_title": "Recherche non disponible", "k_R_sitb_error_language_undefined_message": "La recherche n'est pas disponible pour ce titre, car un probl\u00e8me est survenu lors de la g\u00e9n\u00e9ration de son index.", "k_R_sitb_error_language_undefined_title": "Recherche non disponible", "k_R_sitb_error_offline_message": "Une connexion r\u00e9seau est n\u00e9cessaire pour terminer cette action. Veuillez vous connecter \u00e0 un r\u00e9seau.", "k_R_sitb_error_offline_title": "Aucune connexion r\u00e9seau", "k_R_slider_loc_popup": "Emplacement ${location}", "k_R_slider_location": "Emplacement\u00a0${location} sur ${totalLocations}", "k_R_slider_location_popup": "Emplacement ${location}", "k_R_slider_pageNumber": "Page\u00a0${page}\u00a0sur\u00a0${totalPages}", "k_R_slider_pageNumber_popup": "Page ${page}", "k_R_slider_percentage": "${percent} %", "k_R_syncPosition_PN_labelText": "Vous \u00eates actuellement \u00e0 la page\u00a0${currentPage}. La derni\u00e8re page lue est l'emplacement\u00a0${page} sur \\\"${deviceName}\\\" \u00e0 ${time} le ${date}. Que souhaitez-vous faire\u00a0?", "k_R_syncPosition_alreadyFurthest_Text": "Vous vous trouvez sur la derni\u00e8re page que vous avez lue, tous appareils confondus.", "k_R_syncPosition_cancelText": "Annuler", "k_R_syncPosition_cantSync_Text": "Une erreur est survenue lors de la synchronisation. R\u00e9essayez ult\u00e9rieurement.", "k_R_syncPosition_labelText": "Vous \u00eates actuellement au point ${currentLocation}. Le point de lecture le plus avanc\u00e9 est ${location} sur \\\"${deviceName}\\\" \u00e0 ${time} le ${date}. Que souhaitez-vous faire ?", "k_R_syncPosition_noDeviceName_PN_labelText": "Vous \u00eates actuellement \u00e0 la page\u00a0${currentPage}. La derni\u00e8re page lue sur l'un de vos appareils est l'emplacement\u00a0${page}. Que souhaitez-vous faire\u00a0?", "k_R_syncPosition_noDeviceName_labelText": "Vous \u00eates actuellement au point ${currentLocation}. Le point de lecture le plus avanc\u00e9 est ${location} sur l'ensemble de vos appareils. Que souhaitez-vous faire ?", "k_R_syncPosition_page_reset": "D\u00e9finir comme derni\u00e8re page lue", "k_R_syncPosition_page_sync": "Aller \u00e0 la derni\u00e8re page lue", "k_R_syncPosition_reset": "Faire de ce point le point le plus avanc\u00e9", "k_R_syncPosition_sync": "Acc\u00e9der au point de lecture le plus avanc\u00e9", "k_R_syncPosition_title": "Synchroniser jusqu'\u00e0 la derni\u00e8re page lue", "k_R_table_of_contents_title": "Sommaire", "k_R_toolbar_iOS_sample_close_button": "Fermer", "k_R_toolbar_library_button": "Biblioth\u00e8que", "k_R_toolbar_library_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Votre biblioth\u00e8que", "k_R_toolbar_library_button_tooltip": "Biblioth\u00e8que", "k_R_unimplementedFeature_Error_Text": "", "k_R_unimplementedFeature_Error_Title": "Fonctionnalit\u00e9 non impl\u00e9ment\u00e9e", "k_addToHomeScreen_strong_text": "Ajouter \u00e0 l'\u00e9cran d'accueil", "k_addToHomeScreen_text": "Installez Kindle Cloud Reader sur votre iPad\u00a0: appuyez sur la fl\u00e8che, puis sur ${addToHomeText}.", "k_app_device_name_template": "%FIRST_NAME%'s%DUPE_STRATEGY_1ST%Kindle Cloud Reader", "k_author_conjunction": " et ", "k_banner_RWIS_message_desktop": "Continuez \u00e0 lire ce livre sur votre t\u00e9l\u00e9phone ou votre tablette avec notre application Kindle gratuite.", "k_banner_RWIS_message_desktop1": "Continuez la lecture de ce livre avec des fonctionnalit\u00e9s Kindle suppl\u00e9mentaires sur votre t\u00e9l\u00e9phone ou votre tablette gr\u00e2ce \u00e0 l'application de lecture gratuite Kindle.", "k_banner_RWIS_message_ipad": "Poursuivez la lecture de ce livre avec l'application gratuite Kindle.", "k_banner_RWIS_message_kp": "Lisez gratuitement \u00e0 tout moment\u00a0: t\u00e9l\u00e9chargez Kindle pour Android, iOS, PC, Mac et bien plus.", "k_banner_bookmark_command": "Ctrl + D", "k_banner_bookmark_command_mac": "Commande + D", "k_banner_eucookie_message_desktop": "Nous utilisons des cookies et des outils similaires (collectivement d\u00e9sign\u00e9s \u00ab cookies \u00bb) pour vous fournir nos services, y compris pour vous reconna\u00eetre lorsque vous vous connectez, pour assurer le suivi de vos param\u00e8tres, et pour fournir un contenu. Il se peut que d\u2019autres services Amazon utilisent des cookies pour des finalit\u00e9s suppl\u00e9mentaires. Pour en savoir plus sur la fa\u00e7on dont Amazon utilise des cookies, veuillez lire", "k_banner_eucookie_message_learn_more": "la Politique d'Amazon concernant les cookies", "k_banner_eucookie_message_postHref": ".", "k_banner_eucookie_message_refLink": "https:\\/\\/www.amazon.fr\\/gp\\/help\\/customer\\/display.html?ie=UTF8&nodeId=201890250", "k_common_cancel_button": "Annuler", "k_common_close_button": "Fermer", "k_common_confirm_button": "OK", "k_common_learn_more": "En savoir plus", "k_dialog_appCache_button_text": "OK", "k_dialog_appCache_instruction1_text": "Cliquez sur le bouton d'accueil de l'iPad pour quitter cette application.", "k_dialog_appCache_instruction2_text": "Cliquez deux fois sur le bouton d'accueil de l'iPad pour afficher les applications en cours d'ex\u00e9cution dans le bandeau en bas de l'\u00e9cran de votre iPad.", "k_dialog_appCache_instruction3_text": "Localisez l'ic\u00f4ne de l'application Safari et appuyez longuement sur l'ic\u00f4ne, jusqu'\u00e0 ce qu'un signe moins rouge apparaisse en haut \u00e0 gauche de l'ic\u00f4ne. Appuyez alors sur le signe moins.", "k_dialog_appCache_instruction4_text": "Localisez toutes les autres instances de Kindle Cloud Reader et appuyez longuement sur leur ic\u00f4ne jusqu'\u00e0 ce qu'un signe moins rouge apparaisse en haut \u00e0 gauche. Appuyez alors sur le signe moins.", "k_dialog_appCache_instruction5_text": "Relancez Safari et essayez de recharger la page read.amazon.com.", "k_dialog_appCache_message_text": "Une erreur est survenue lors de l'enregistrement de l'application pour la lecture hors connexion. Pour r\u00e9soudre ce probl\u00e8me, vous devez relancer Safari et toutes les instances ouvertes de Kindle Cloud Reader.", "k_dialog_appCache_readmore_text": "Comment relancer Safari ou Kindle Cloud Reader ?", "k_dialog_appCache_step1_text": "\u00c9tape 1.", "k_dialog_appCache_step2_text": "\u00c9tape 2.", "k_dialog_appCache_step3_text": "\u00c9tape 3.", "k_dialog_appCache_step4_text": "\u00c9tape 4.", "k_dialog_appCache_step5_text": "\u00c9tape 5.", "k_dialog_appCache_title_text": "Erreur d'enregistrement de l'application.", "k_dialog_dbBlocked_Text": "Un probl\u00e8me est survenu durant la d\u00e9connexion. La fermeture des autres onglets de Kindle Cloud Reader devrait r\u00e9soudre le probl\u00e8me.", "k_dialog_dbBlocked_Title": "D\u00e9connexion", "k_dialog_enableOffline_button_text": "OK", "k_dialog_enable_offline_firefox_msg": "Kindle Cloud Reader n\u00e9cessite votre autorisation pour stocker des livres pour la lecture hors connexion. Si vous avez s\u00e9lectionn\u00e9 Jamais pour ce site lorsque Firefox a demand\u00e9 votre autorisation, vous devez ${linkStart}suivre cette proc\u00e9dure${linkEnd} pour activer la lecture hors connexion sur Firefox.", "k_dialog_enable_offline_title": "Activer la lecture hors connexion", "k_dialog_ffPrompting_Text": "Veuillez autoriser Kindle \u00e0 stocker plus de 50 Mo de donn\u00e9es sur votre ordinateur pour une utilisation hors connexion.<br /><br />Pour obtenir de l'aide, consultez la rubrique ${linkStart}R\u00e9solution des probl\u00e8mes et ressources${linkEnd} de Kindle Cloud Reader.", "k_dialog_ffPrompting_Title": "Veuillez autoriser le stockage hors connexion", "k_dialog_logoutConfirm_continue": "Poursuivre la d\u00e9connexion", "k_dialog_logoutConfirm_message": "Si vous vous d\u00e9connectez de Kindle, tous les livres t\u00e9l\u00e9charg\u00e9s seront supprim\u00e9s de votre navigateur. Lors de votre reconnexion, vous ne pourrez poursuivre la lecture de ces livres qu'une fois connect\u00e9(e) \u00e0 Internet.", "k_dialog_logout_message": "Veuillez patienter pendant que nous nettoyons votre contenu t\u00e9l\u00e9charg\u00e9.", "k_dialog_logout_title": "D\u00e9connexion de Kindle Cloud Reader...", "k_dialog_message_dismissButton_text": "OK", "k_dialog_message_retryButton_text": "R\u00e9essayer", "k_dialog_offlineLogout_Text": "Cette op\u00e9ration n\u00e9cessite une connexion \u00e0 Internet.", "k_dialog_offlineLogout_Title": "Impossible de clore la session", "k_dialog_prevSignOutFailed_Text": "Vous rencontrez des probl\u00e8mes de d\u00e9connexion\u00a0? Consultez l'aide pour trouver des solutions.", "k_dialog_prevSignOutFailed_Title": "D\u00e9connexion", "k_dialog_rental_expired_dismiss_button_text": "Fermer", "k_dialog_rental_expired_extend_button_text": "Prolonger ou Acheter", "k_dialog_smallWindow_button_ignore": "Ignorer", "k_dialog_smallWindow_msg": "Veuillez agrandir cette fen\u00eatre pour pouvoir lire plus agr\u00e9ablement avec Kindle Cloud Reader.", "k_dialog_smallWindow_title": "Agrandissez la Fen\u00eatre pour Lire avec Kindle Cloud Reader", "k_empty_library_free": "Profitez \u00e9galement de milliers de livres gratuits\u00a0!", "k_empty_library_legal": "*La disponibilit\u00e9 des livres peut varier pour les utilisateurs en dehors des Etats-Unis.", "k_empty_library_main": "Trouvez votre bonheur parmi les deux millions de livres disponibles dans la ${storeName}.", "k_empty_library_manga_button": "Lisez des manga gratuitement", "k_empty_library_manga_msg": "Faites votre choix parmi plus de deux millions de livres, dont des best-sellers et des bandes dessin\u00e9es gratuites s\u00e9lectionn\u00e9s par la ${storeName}.", "k_empty_library_shop": "Visiter la boutique Kindle", "k_empty_library_store_name": "Boutique Kindle", "k_empty_library_title": "Vous n'avez actuellement aucun livre dans votre biblioth\u00e8que Kindle.", "k_empty_search_msg": "Aucun r\u00e9sultat pour vos crit\u00e8res de recherche.", "k_empty_search_offline": "(Quand vous n'\u00eates pas connect\u00e9 \u00e0 Internet, seuls les livres t\u00e9l\u00e9charg\u00e9s sont interrogeables.)", "k_endOfFreeTrial_Text": "La p\u00e9riode d'essai gratuit de ce livre a expir\u00e9. Achetez ce livre dans la boutique Kindle pour continuer \u00e0 lire.", "k_endOfFreeTrial_Title": "\u00c9l\u00e9ment expir\u00e9", "k_endOfFreeTrial_buyfullversion_button": "Obtenir la version compl\u00e8te", "k_endOfFreeTrial_cancel_button": "Annuler", "k_endOfFreeTrial_removebook_button": "Supprimer le livre", "k_endOfSample_Text": "Vous avez atteint la fin de l'extrait. Vous pouvez acheter la version compl\u00e8te sur la boutique Kindle ou retourner \u00e0 l'extrait.", "k_endOfSample_Title": "Fin de l'extrait", "k_endOfSample_buy_button": "Obtenir la version compl\u00e8te", "k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Acheter la version compl\u00e8te dans la boutique", "k_endOfSample_cancel_button": "Retourner \u00e0 l'extrait", "k_freeTrialExpires_Day": "Votre essai gratuit expire dans <span class=\"free_trial_remaining\">1\u00a0jour</span>", "k_freeTrialExpires_Days": "Votre essai gratuit expire dans <span class=\"free_trial_remaining\">${days} jours</span>", "k_freeTrialExpires_less_than_a_day": "Votre essai gratuit expire dans <span class=\"free_trial_remaining\">moins d'un jour</span>", "k_noAppMode_content": "D\u00e9sol\u00e9, nous ne parvenons pas pour le moment \u00e0 ouvrir Kindle Cloud Reader \u00e0 partir du signet de votre \u00e9cran d'accueil. Pour continuer la lecture sur votre iPad, touchez le bouton correspondant ci-dessous afin de lancer Safari ou d'utiliser l'application Kindle gratuite.", "k_noAppMode_safariLink": "Ouvrir dans Safari", "k_noAppMode_storeLink": "Kindle pour iPad", "k_noDownloadedBooks_title": "Vous n'avez aucun livre t\u00e9l\u00e9charg\u00e9 pour le moment.", "k_offlineAccessDisabled_Text": "\u26a0\ufe0f Kindle ne prendra plus en charge le t\u00e9l\u00e9chargement de livres pour un acc\u00e8s hors ligne dans le navigateur Web. Les livres que vous avez d\u00e9j\u00e0 t\u00e9l\u00e9charg\u00e9s seront disponibles hors ligne jusqu'\u00e0 ce que vous vous d\u00e9connectiez de votre compte.", "k_provide_feedback_error": "Une erreur est survenue lors de l'envoi du message. R\u00e9essayez ult\u00e9rieurement.", "k_provide_feedback_sending": "Envoi...", "k_provide_feedback_success": "Message envoy\u00e9 avec succ\u00e8s ! &#x2713;", "k_provide_feedback_text": "Saisissez votre question ou votre commentaire dans le champ ci-dessous.", "k_provide_feedback_title": "Nous contacter", "k_send_feedback_button": "Envoyer", "k_store_open_failed_Error_Text": "Une erreur est survenue lors de l'ouverture de la boutique Kindle. R\u00e9essayez ult\u00e9rieurement.", "k_store_open_failed_Error_Title": "Impossible d'ouvrir la boutique Kindle", "k_store_open_failed_offline_Error_Text": "Cette op\u00e9ration n\u00e9cessite une connexion \u00e0 Internet.", "k_store_open_failed_offline_Error_Title": "Impossible d'ouvrir la boutique Kindle", "k_text_me_widget_EmailPhone": "Adresse e-mail ou n\u00b0 de t\u00e9l\u00e9phone", "k_text_me_widget_GetApp": "Obtenir l'application", "k_text_me_widget_invalid_input": "Merci de renseigner une adresse e-mail ou un num\u00e9ro de t\u00e9l\u00e9phone valide.", "k_text_me_widget_send_email_fail": "L'envoi de l'e-mail a \u00e9chou\u00e9. R\u00e9essayez ult\u00e9rieurement.", "k_text_me_widget_send_email_success": "L'application est en route\u00a0! Consultez votre messagerie.", "k_text_me_widget_send_sms_fail": "L'envoi du SMS a \u00e9chou\u00e9. R\u00e9essayez ult\u00e9rieurement.", "k_text_me_widget_send_sms_success": "L'application est en route\u00a0! Consultez votre t\u00e9l\u00e9phone.", "k_text_me_widget_service_error": "Une erreur s'est produite. R\u00e9essayez plus tard.", "k_text_me_widget_submitting_request": "Envoi de la requ\u00eate...", "k_window_title": "Kindle Cloud Reader", "metro_tutorial_children_book_click_instruction": "Astuce\u00a0: double-cliquez sur le texte pour zoomer", "metro_tutorial_children_book_tap_instruction": "Astuce\u00a0: appuyez deux fois sur le texte pour zoomer", "metro_tutorial_children_book_text": "Les animaux travers\u00e8rent la mer glaciale jusqu'\u00e0 atteindre une \u00eele, juste avant le lever du soleil.", "metro_tutorial_comic_book_click_instruction1": "Astuce\u00a0: double-cliquez sur les cases pour zoomer,", "metro_tutorial_comic_book_click_instruction2": "puis sur la page de droite pour parcourir les cases agrandies.", "metro_tutorial_comic_book_tap_instruction1": "Astuce\u00a0: appuyez deux fois sur les cases pour zoomer,", "metro_tutorial_comic_book_tap_instruction2": "puis passez votre doigt sur l'\u00e9cran pour parcourir les cases agrandies.", "metro_tutorial_commic_book_dialogue": "NOUS SAVONS TOUT DE L'ENGIN DE L'APOCALYPSE\u00a0!"};
var Kindle = Kindle || {};Kindle.strings  = Kindle.strings || {};Kindle.strings['it-IT']={"k_L_bad_download_Error_Text": "Per leggere questo libro sul tuo Kindle, scaricalo dal cloud.", "k_L_bad_download_Error_Title": "Errore durante l'apertura dei contenuti", "k_L_bookNotAvailable_Text": "Controlla la connessione di rete e riprova.", "k_L_bookNotAvailable_Title": "Impossibile visualizzare il contenuto", "k_L_cacheError": "Errore durante il salvataggio dell'app. Clicca qui per riprovare.", "k_L_cacheError_pad": "Errore durante il salvataggio dell'app. Tocca qui per riprovare.", "k_L_cached": "&#x2713; App pronta per l'utilizzo offline", "k_L_caching": "Salvataggio app per l'utilizzo offline", "k_L_contact_us": "Contattaci", "k_L_context_download_pin": "Scarica e aggiungi eBook", "k_L_context_pin": "Aggiungi eBook", "k_L_context_read": "Apri libro", "k_L_context_remove": "Rimuovi libro", "k_L_context_revoke_sample": "Elimina estratto", "k_L_deregister_title": "Disconnetti", "k_L_dialog_delete": "Elimina", "k_L_dialog_deleteFreeTrial_prompt_text": "Questa operazione rimuover\u00e0 il libro dal tuo account in modo definitivo.", "k_L_dialog_deleteFreeTrial_prompt_title": "Eliminare la prova gratuita?", "k_L_dialog_delete_cancel": "Annulla", "k_L_dialog_delete_prompt": "Questa operazione eliminer\u00e0 <i>${bookTitle}</i> dall'account in modo definitivo.", "k_L_dialog_delete_prompt_title": "Eliminare l'estratto?", "k_L_help": "Aiuto", "k_L_jp_merchandise_dialog_message": "Per un periodo di tempo limitato, puoi scaricare capitoli gratuiti dai titoli manga riportati di seguito", "k_L_jp_merchandise_dialog_title": "Manga gratuiti disponibili per un periodo di tempo limitato", "k_L_legal_notices": "Note legali", "k_L_loadFailedError_Text": "Si \u00e8 verificato un errore durante il tentativo di caricare la libreria.", "k_L_loadFailedError_Title": "Errore durante il caricamento della libreria", "k_L_openBookAsinNotSpecified_Text": "Non \u00e8 stato specificato alcun titolo da aprire.", "k_L_openBookAsinNotSpecified_Title": "Titolo non specificato", "k_L_openBookContentLicenseExceededError_Text": "Hai superato il limite del numero di dispositivi in grado di leggere questo elemento. Puoi annullare la registrazione dei dispositivi non pi\u00f9 in uso ed eliminare i contenuti; ci\u00f2 consentir\u00e0 di scaricare questo elemento. Puoi anche acquistare un'altra copia da Kindle Store.", "k_L_openBookContentLicenseExceededError_Title": "Limite licenza raggiunto", "k_L_openBookContentLoanEndedError_Text": "Questo libro ti \u00e8 stato dato in prestito e non pu\u00f2 essere aperto poich\u00e9 il prestito \u00e8 terminato.", "k_L_openBookContentLoanEndedError_Title": "Titolo non disponibile", "k_L_openBookContentLoanedError_Text": "Questo titolo non pu\u00f2 essere aperto poich\u00e9 \u00e8 attualmente in prestito.", "k_L_openBookContentLoanedError_Title": "Titolo non disponibile", "k_L_openBookContentRentalExpiredErrorMetro_Text": "Il periodo per il prestito di questo libro \u00e8 scaduto. Vai a Kindle Store per estendere il prestito o acquistare il libro. <br /><br />Le evidenziazioni e le note sono sempre disponibili su ${link} anche dopo la scadenza del prestito.", "k_L_openBookContentRentalExpiredErrorMetro_Title": "Prestito scaduto", "k_L_openBookContentRentalExpiredError_Text": "Questo libro in prestito ha raggiunto la data di scadenza. Selezionare il pulsante Estendi o Acquista in basso se desideri prendere di nuovo in prestito o acquistare questo libro.", "k_L_openBookContentRentalExpiredError_Title": "Prestito scaduto", "k_L_openBookContentUnsupportedErrorMetro_Text": "Questo titolo non \u00e8 disponibile su Kindle per Windows 8.", "k_L_openBookContentUnsupportedErrorMetro_Title": "Titolo non disponibile", "k_L_openBookContentUnsupportedError_Text": "Questo titolo non \u00e8 disponibile su Kindle Cloud Reader.", "k_L_openBookContentUnsupportedError_Title": "Titolo non disponibile", "k_L_openBookContentUpgrade_ButtonText": "Continua", "k_L_openBookContentUpgrade_Text": "\u00c8 disponibile una nuova versione di questo libro, che verr\u00e0 scaricata senza dover interrompere la lettura.", "k_L_openBookContentUpgrade_Title": "Nuova versione", "k_L_openBookGeoLocationNotAllowed_Text": "Questo titolo non \u00e8 disponibile nel paese specificato.", "k_L_openBookGeoLocationNotAllowed_Title": "Titolo non disponibile", "k_L_openBookLoadFailure_Text": "Si \u00e8 verificato un errore durante l'apertura dell'elemento selezionato. Per favore, riprova pi\u00f9 tardi.", "k_L_openBookLoadFailure_Title": "Errore durante l'apertura dei contenuti", "k_L_openBookNetworkError_Text": "Si \u00e8 verificato un errore durante l'apertura dell'elemento selezionato. Per favore, riprova pi\u00f9 tardi.", "k_L_openBookNetworkError_Title": "Errore durante l'apertura dei contenuti", "k_L_openBookSessionLimitExceededError_Text": "Hai raggiunto il numero massimo di sessioni simultanee per questo titolo. Per favore, riprova pi\u00f9 tardi.", "k_L_openBookSessionLimitExceededError_Title": "Limite sessione raggiunto", "k_L_openBookTimeoutError_Text": "Si \u00e8 verificato un errore di connessione. Per favore, riprova pi\u00f9 tardi.", "k_L_openBookTimeoutError_Title": "Errore durante la connessione della rete", "k_L_outdatedChrome_Text": "Questa versione di Google Chrome non supporta il formato di estensione Chrome corrente. ${linkStart}Aggiorna Google Chrome${linkEnd} per attivare il supporto offline.", "k_L_outdatedChrome_Title": "Impossibile attivare il supporto offline", "k_L_privacy": "Privacy", "k_L_progress_dialog_message": "Questo titolo verr\u00e0 salvato nella scheda Scaricati per consentirne la lettura offline finch\u00e8 non ne effettuerai la rimozione. Per comodit\u00e0, verranno scaricati  e salvati automaticamente anche i libri aperti di recente fino a quando non sar\u00e0 necessario spazio di archiviazione.", "k_L_progress_dialog_title": "Download e aggiunta libro in corso", "k_L_removeBookError_Text": "Si \u00e8 verificato un errore durante la rimozione dell'elemento selezionato. I contenuti scaricati possono essere cancellati dal computer selezionando \\\"Disconnetti\\\" dal menu Impostazioni.", "k_L_removeBookError_Title": "Errore durante la rimozione dei contenuti", "k_L_removeBookNetworkError_Text": "Si \u00e8 verificato un errore durante la rimozione dell'elemento selezionato. Per favore, riprova pi\u00f9 tardi.", "k_L_removeBookNetworkError_Title": "Errore durante la rimozione dei contenuti", "k_L_revokeFailed_Text": "Questa operazione richiede una connessione a Internet.", "k_L_revokeFailed_Title": "Impossibile eliminare il libro", "k_L_sample_badge_text": "ESTRATTO", "k_L_saveBookOutOfSpace_Text": "Spazio disponibile insufficiente per salvare questo elemento per la lettura offline. Puoi continuare a leggere questo titolo quando sei online. Puoi aumentare lo spazio di archiviazione; per ulteriori informazioni ${linkStart}clicca qui${linkEnd}.", "k_L_saveBookOutOfSpace_Title": "Errore durante il salvataggio dei contenuti", "k_L_sort_author": "Ordina per autore", "k_L_sort_author_label": "Autore", "k_L_sort_recent": "Ordina per recenti", "k_L_sort_recent_label": "Recente", "k_L_sort_title": "Ordina per titolo", "k_L_sort_title_label": "Titolo", "k_L_storeNotAvailable_Text": "\u00c8 necessaria una connessione Internet per acquistare in Kindle Store.", "k_L_storeNotAvailable_Title": "Nessuna connessione Internet", "k_L_syncFailedError_Text": "Si \u00e8 verificato un errore durante la sincronizzazione. Per favore, riprova pi\u00f9 tardi.", "k_L_syncFailedError_Title": "Sincronizzazione non riuscita", "k_L_syncFailedOfflineError_Text": "Per sincronizzare la libreria \u00e8 richiesta una connessione a Internet.", "k_L_syncFailedOfflineError_Title": "Sincronizzazione non riuscita", "k_L_terms_of_use": "Termini di utilizzo", "k_L_text_me_wdiget_Instruction": "Per ricevere un link per il download immetti il tuo indirizzo e-mail o numero di telefono", "k_L_text_me_widget_Text": "Spiacenti. <b>Kindle Cloud Reader</b> non pu\u00f2 aprire il libro, ma puoi leggerlo con la nostra app Kindle gratuita.", "k_L_toolbar_cloud_button": "Contenuti cloud", "k_L_toolbar_cloud_button_tooltip": "Contenuti cloud", "k_L_toolbar_cloud_label": "Cloud", "k_L_toolbar_cloud_label_tooltip": "Cloud", "k_L_toolbar_cover_slider": "Dimensioni copertina", "k_L_toolbar_cover_slider_tooltip": "Dimensioni copertina", "k_L_toolbar_downloaded_button": "Contenuti scaricati", "k_L_toolbar_downloaded_button_tooltip": "Contenuti scaricati", "k_L_toolbar_downloaded_label": "Scaricati", "k_L_toolbar_downloaded_label_tooltip": "Scaricati", "k_L_toolbar_grid_button": "Disposizione a mosaico", "k_L_toolbar_grid_button_tooltip": "Disposizione a mosaico", "k_L_toolbar_list_button": "Visualizzazione a elenco", "k_L_toolbar_list_button_tooltip": "Visualizzazione a elenco", "k_L_toolbar_manage_button": "Gestisci", "k_L_toolbar_manage_button_tooltip": "Gestisci", "k_L_toolbar_notebook_button": "Le tue note ed evidenziazioni", "k_L_toolbar_notebook_button_tooltip": "Le tue note ed evidenziazioni", "k_L_toolbar_search_button": "Cerca", "k_L_toolbar_search_button_tooltip": "Cerca", "k_L_toolbar_sort_button": "Ordina per", "k_L_toolbar_sort_button_tooltip": "Ordina per", "k_L_toolbar_store_button": "Kindle Store", "k_L_toolbar_store_button_tooltip": "Kindle Store", "k_L_toolbar_sync_button": "Sinc.", "k_L_toolbar_sync_button_tooltip": "Sinc.", "k_L_trial_badge_text": "PROVA", "k_L_unknownError_Text": "Si \u00e8 verificato un errore durante il tentativo di aprire l'elemento selezionato. Per favore, riprova pi\u00f9 tardi.", "k_L_unknownError_Title": "Errore durante l'apertura dei contenuti", "k_RWIS_banner_message_desktop": "Per proseguire la lettura in un secondo momento, premi ${bookmarkCommand} per aggiungere un segnalibro alla pagina oppure ${getAppStart}scarica un'applicazione di lettura gratuita${getAppEnd} per il telefono o il tablet.", "k_RWIS_banner_message_ipad": "Per proseguire la lettura in un secondo momento, scarica la nostra ${getIPadAppStart}applicazione per iPad gratuita${getIPadAppEnd}.", "k_R_annotation_pane_bookmark_label": "Segnalibro", "k_R_annotation_pane_cancel": "Annulla", "k_R_annotation_pane_delete": "Elimina", "k_R_annotation_pane_delete_confirm": "Confermi eliminazione?", "k_R_annotation_pane_dont_delete": "Non eliminare", "k_R_annotation_pane_edit": "Modifica nota", "k_R_annotation_pane_empty_note": "Questo libro non contiene alcuna nota o riferimento", "k_R_annotation_pane_goto": "Vai alla posizione", "k_R_annotation_pane_next": "Clicca per il successivo", "k_R_annotation_pane_no": "No", "k_R_annotation_pane_note_highlight": "Evidenziazione", "k_R_annotation_pane_note_label": "Nota", "k_R_annotation_pane_notes_location": "Posizione ${location}", "k_R_annotation_pane_notes_page": "Pagina ${page}", "k_R_annotation_pane_previous": "Clicca per il precedente", "k_R_annotation_pane_save": "Salva nota", "k_R_annotation_pane_yes": "S\u00ec", "k_R_beginning_title": "Inizio", "k_R_book_extras_title": "Extra del libro", "k_R_context_createHighlight": "Evidenziazione", "k_R_context_createNote": "Nota", "k_R_context_deleteHighlight": "Elimina evidenziazione", "k_R_context_editNote": "Modifica nota", "k_R_cover_title": "Copertina", "k_R_dialog_annotation_pane_title": "Note e riferimenti", "k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550": "Note ed evidenziazioni", "k_R_dialog_editNote_cancel": "Annulla", "k_R_dialog_editNote_delete": "Elimina", "k_R_dialog_editNote_placeholder": "Digita la tua nota qui", "k_R_dialog_editNote_save": "Salva", "k_R_dialog_editNote_title_create": "Crea nota", "k_R_dialog_editNote_title_edit": "Modifica nota", "k_R_dialog_sitb_message_indexing": "Il libro \u00e8 in fase di indicizzazione. Questa operazione potrebbe richiedere alcuni momenti.", "k_R_dialog_sitb_pane_title_indexing": "Indicizzazione in corso...", "k_R_dialog_sitb_pane_title_notAvailable": "Ricerca non disponibile", "k_R_dialog_sitb_pane_title_oneResultFound": "${numberResults} risultati trovati", "k_R_dialog_sitb_pane_title_resultsFound": "${numberResults} risultati trovati", "k_R_dialog_sitb_pane_title_searching": "Ricerca in corso...", "k_R_dialog_sitb_result_current_location": "Sei alla posizione ${location}", "k_R_dialog_sitb_result_current_location_past": "Eri alla posizione ${location}", "k_R_dialog_sitb_result_current_page": "Sei a pagina ${page}", "k_R_dialog_sitb_result_current_page_past": "Eri a pagina ${page}", "k_R_dialog_sitb_result_location": "Posizione ${location}", "k_R_dialog_sitb_result_page": "Pagina ${page}", "k_R_dialog_unoptimizedFormat_close": "Chiudi libro", "k_R_dialog_unoptimizedFormat_continue": "Continua comunque", "k_R_dialog_unoptimizedFormat_message": "Questo libro non \u00e8 ottimizzato per Kindle Cloud Reader su questo dispositivo. Installare ${linkStart}Kindle per iPad${linkEnd} per leggere questo elemento.", "k_R_dialog_unoptimizedFormat_metro_message": "Questo libro non \u00e8 ottimizzato per Kindle per Windows 8.", "k_R_dialog_unoptimizedFormat_stopSave": "Annulla salvataggio", "k_R_dialog_unoptimizedFormat_title": "Contenuti non supportati", "k_R_dialog_upgrade_btn": "Aggiorna ora", "k_R_dialog_upgrade_countryBlk_btn": "Vai a Windows Store", "k_R_dialog_upgrade_countryBlk_msg": "Spiacenti, questa versione di Kindle non supporta la visualizzazione dei contenuti nella lingua desiderata. <br/> Verificare su Windows Store se \u00e8 disponibile un aggiornamento.", "k_R_dialog_upgrade_countryBlk_title": "Kindle nella tua area geografica", "k_R_dialog_upgrade_langSupport_btn": "Aggiorna ora", "k_R_dialog_upgrade_langSupport_msg": "Prima di iniziare la lettura, scarica un aggiornamento gratuito per il supporto di Kindle nella tua lingua.", "k_R_dialog_upgrade_langSupport_title": "Aggiornamento disponibile", "k_R_dialog_upgrade_msg": " Prima di iniziare la lettura, \u00e8 necessario l'aggiornamento gratuito di Kindle per il supporto di tutte le funzioni pi\u00f9 recenti.", "k_R_dialog_upgrade_title": "Aggiornamento disponibile", "k_R_dictionary_labels_Derivatives": "Derivate", "k_R_dictionary_labels_Ipa": "Afi", "k_R_dictionary_labels_Notes": "Note", "k_R_dictionary_labels_Origin": "Origine", "k_R_dictionary_labels_Phrases": "Frasi", "k_R_dictionary_labels_Usage": "Uso", "k_R_dictionary_loading": "Caricamento", "k_R_dictionary_not_available": "Dizionario non disponibile", "k_R_dictionary_not_found": "Nessun risultato nel dizionario.", "k_R_dictionary_offline": "Il dizionario \u00e8 disponibile se sei connesso a Internet.", "k_R_dictionary_view_full": "Visualizza definizione completa", "k_R_dictionary_view_full_i18n": "Definizione completa", "k_R_download_disk_error": "Scaricato: ${percent}(<a href=\\\"${url}\\\" target=\\\"_blank\\\" id=\\\"kindleReader_download_disk_error\\\">Archivio browser pieno</a>)", "k_R_download_network_error": "Download bloccato: ${percent}(Errore)", "k_R_downloaded": "Scaricato ${percent}%", "k_R_downloading": "Download in corso: ${percent}%", "k_R_embedded_logo_tooltip": "Apri Kindle Cloud Reader in una nuova scheda", "k_R_feature_not_available_dialog_buy_btn": "Acquista la versione completa", "k_R_feature_not_available_dialog_text": "Questa funzionalit\u00e0 \u00e8 abilitata nella versione completa del libro.", "k_R_feature_not_available_dialog_title": "Funzionalit\u00e0 non disponibile", "k_R_goto_bookmark_title": "Segnalibro...", "k_R_goto_dialog_error": "Inserisci una posizione valida (${minLocation}-${maxLocation}).", "k_R_goto_dialog_error_snapview": "Inserisci una posizione valida.", "k_R_goto_dialog_location_range": "(${minLocation} - ${maxLocation})", "k_R_goto_dialog_page_range": "${range}", "k_R_goto_location_title": "Posizione...", "k_R_goto_menu_goto_button": "Vai alla posizione", "k_R_goto_menu_goto_location": "di ${lastLocation}", "k_R_goto_menu_goto_location_metro_title": "Inserisci posizione", "k_R_goto_menu_goto_location_title": "Inserisci posizione", "k_R_goto_menu_goto_message": "Posizione ", "k_R_goto_menu_goto_page": "di ${lastPage}", "k_R_goto_menu_goto_page_button": "Vai alla pagina", "k_R_goto_menu_goto_page_message": "Pagina ", "k_R_goto_menu_goto_page_title": "Inserisci pagina", "k_R_goto_menu_goto_page_title_metro": "Inserisci pagina", "k_R_goto_menu_title": "Vai a", "k_R_goto_page_dialog_error": "Inserisci una pagina valida ${range}.", "k_R_goto_page_dialog_error_snapview": "Inserisci una pagina valida.", "k_R_goto_page_title": "Pagina...", "k_R_menuButton_back": "Indietro", "k_R_menuButton_back_tooltip": "Indietro", "k_R_menuButton_bookmark": "Segnalibro", "k_R_menuButton_bookmark_tooltip": "Seleziona/deseleziona segnalibro", "k_R_menuButton_columnMode": "Colonne", "k_R_menuButton_columnMode_tooltip": "Seleziona/deseleziona modalit\u00e0 di lettura", "k_R_menuButton_controlPane": "Visualizza", "k_R_menuButton_controlPane_tooltip": "Impostazioni visualizzazione", "k_R_menuButton_enterImmersive_tooltip": "Inserisci modalit\u00e0 lettura immersiva", "k_R_menuButton_exitImmersive_tooltip": "Esci dalla modalit\u00e0 di lettura immersiva", "k_R_menuButton_goto": "Vai a", "k_R_menuButton_goto_tooltip": "Vai a menu", "k_R_menuButton_notesAndMarks": "Note/Riferimenti", "k_R_menuButton_notesAndMarks_tooltip": "Mostra note e riferimenti", "k_R_menuButton_pin_start_metro": "Aggiungi a Start", "k_R_menuButton_pin_start_metro_tooltip": "Aggiungi a Start", "k_R_menuButton_sync": "Sinc.", "k_R_menuButton_sync_tooltip": "Sincronizza", "k_R_menuInput_sitb_placeholder": "Cerca", "k_R_pageArrow_next": "Pagina successiva", "k_R_pageArrow_prev": "Pagina precedente", "k_R_pageLoadError_Text": "Si \u00e8 verificato un errore durante il caricamento della pagina successiva. Per favore, riprova pi\u00f9 tardi.", "k_R_pageLoadError_Title": "Errore durante il caricamento dei contenuti", "k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550": "L\u2019utilit\u00e0 per la lettura dello schermo non \u00e8 al momento supportata. Per poter leggere utilizzando l\u2019utilit\u00e0 per la lettura dello schermo, passa all'applicazione Kindle sul tuo dispositivo.", "k_R_search_placeholder": "Trova nel libro", "k_R_settings_apply_button": "Usa impostazioni", "k_R_settings_colorMode_black": "Nero", "k_R_settings_colorMode_label": "MODALIT\u00c0 COLORE", "k_R_settings_colorMode_label_metro": "Modalit\u00e0 colore", "k_R_settings_colorMode_sepia": "Seppia", "k_R_settings_colorMode_white": "Bianco", "k_R_settings_column_disabled_msg": "Questo titolo \u00e8 disponibile solo per la lettura su una colonna.", "k_R_settings_column_off_button": "Disattiva", "k_R_settings_column_on_button": "Attiva", "k_R_settings_fontSize_label": "DIMENSIONE CARATTERE", "k_R_settings_fontSize_label_metro": "Dimensione carattere", "k_R_settings_fontSize_tooltip_metro": "Aa", "k_R_settings_margins_label": "MARGINI", "k_R_settings_margins_label_metro": "Margini", "k_R_settings_multiColumnMode_label": "SOLO UNA COLONNA", "k_R_settings_multiColumnMode_label_metro": "Solo una colonna", "k_R_settings_sampleText": "Emma Woodhouse, bella, intelligente e ricca, con una casa accogliente e un bel carattere, sembrava riunire alcune delle migliori benedizioni dell'esistenza. I suoi 21 anni li aveva trascorsi con pochissime angosce e turbamenti.", "k_R_settings_showLocation_label": "MOSTRA POSIZIONE DI LETTURA", "k_R_settings_showLocation_label_metro": "Mostra posizione di lettura", "k_R_settings_title_metro": "Opzioni di visualizzazione", "k_R_show_database_title": "Mostra database", "k_R_sitb_error_common_message": "Si \u00e8 verificato un errore. Riprova pi\u00f9 tardi.", "k_R_sitb_error_common_title": "Ricerca non completata", "k_R_sitb_error_index_not_available_message": "Spiacenti, questo libro non \u00e8 ancora stato abilitato per la ricerca. Per favore, riprova pi\u00f9 tardi.", "k_R_sitb_error_index_not_available_title": "Ricerca non disponibile", "k_R_sitb_error_language_not_supported_message": "La funzione di ricerca non \u00e8 disponibile per questo titolo poich\u00e9 la lingua al momento non \u00e8 supportata. Il team di Amazon Kindle sta lavorando per risolvere questo problema.", "k_R_sitb_error_language_not_supported_title": "Ricerca non disponibile", "k_R_sitb_error_language_undefined_message": "Ricerca di questo titolo non disponibile a causa di un problema durante la generazione del relativo indice.", "k_R_sitb_error_language_undefined_title": "Ricerca non disponibile", "k_R_sitb_error_offline_message": "Per completare l'operazione, \u00e8 necessario stabilire una connessione di rete. Connettersi a una rete.", "k_R_sitb_error_offline_title": "Nessuna connessione di rete", "k_R_slider_loc_popup": "Pos ${location}", "k_R_slider_location": "Posizione ${location} di ${totalLocations}", "k_R_slider_location_popup": "Posizione ${location}", "k_R_slider_pageNumber": "Pagina ${page} di ${totalPages}", "k_R_slider_pageNumber_popup": "Pagina ${page}", "k_R_slider_percentage": "${percent}%", "k_R_syncPosition_PN_labelText": "Stai visualizzando la pagina ${currentPage}. L'ultima pagina letta \u00e8 la numero ${page} da \\\"${deviceName}\\\" alle ore ${time} in data ${date}. Come desideri procedere?", "k_R_syncPosition_alreadyFurthest_Text": "Stai visualizzando l'ultima posizione tra tutti i dispositivi.", "k_R_syncPosition_cancelText": "Annulla", "k_R_syncPosition_cantSync_Text": "Si \u00e8 verificato un errore durante la sincronizzazione. Per favore, riprova pi\u00f9 tardi.", "k_R_syncPosition_labelText": "Stai visualizzando la posizione ${currentLocation}. L'ultima posizione di lettura \u00e8 ${location} da \\\"${deviceName}\\\" alle ${time} il ${date}. Come desideri procedere?", "k_R_syncPosition_noDeviceName_PN_labelText": "Stai visualizzando la pagina ${currentPage}. L'ultima pagina letta da uno dei tuoi dispositivi \u00e8 la numero ${page}. Come desideri procedere?", "k_R_syncPosition_noDeviceName_labelText": "Stai visualizzando la posizione ${currentLocation}. L'ultima posizione di lettura tra tutti i dispositivi \u00e8 ${location}. Come desideri procedere?", "k_R_syncPosition_page_reset": "Imposta questa pagina come ultima letta", "k_R_syncPosition_page_sync": "Vai all'ultima pagina letta", "k_R_syncPosition_reset": "Imposta questa posizione come ultima", "k_R_syncPosition_sync": "Vai all'ultima posizione di lettura", "k_R_syncPosition_title": "Sincronizza con l'ultima pagina letta", "k_R_table_of_contents_title": "Sommario", "k_R_toolbar_iOS_sample_close_button": "Chiudi", "k_R_toolbar_library_button": "Libreria", "k_R_toolbar_library_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "La tua libreria", "k_R_toolbar_library_button_tooltip": "Libreria", "k_R_unimplementedFeature_Error_Text": "", "k_R_unimplementedFeature_Error_Title": "Funzionalit\u00e0 non implementata", "k_addToHomeScreen_strong_text": "Aggiungi alla Schermata iniziale", "k_addToHomeScreen_text": "Installa Kindle Cloud Reader sul tuo iPad: tocca la freccia, quindi ${addToHomeText}", "k_app_device_name_template": "%FIRST_NAME%'s%DUPE_STRATEGY_1ST%Kindle Cloud Reader", "k_author_conjunction": " e ", "k_banner_RWIS_message_desktop": "Continua a leggere questo libro sul telefono o sul tablet con la nostra app Kindle gratuita.", "k_banner_RWIS_message_desktop1": "Continua a leggere questo libro sul telefono o sul tablet avendo a disposizione pi\u00f9 funzioni Kindle con l'app Kindle gratuita.", "k_banner_RWIS_message_ipad": "Continua a leggere questo libro con la nostra app Kindle gratuita.", "k_banner_RWIS_message_kp": "Leggete gratis ovunque siate: scaricate Kindle per Android, iOS, PC, Mac e altro ancora.", "k_banner_bookmark_command": "CTRL+D", "k_banner_bookmark_command_mac": "Comando+D", "k_banner_eucookie_message_desktop": "Utilizziamo cookie e altre tecnologie simili (congiuntamente, i \u201ccookie\u201d) per fornire i nostri servizi, tra cui riconoscerti quando effettui il log-in, tenere traccia delle tue impostazioni e per fornire contenuti. Altri servizi di Amazon potrebbero utilizzare i cookie per ulteriori finalit\u00e0. Per maggiori informazioni sull\u2019utilizzo dei cookie da parte di Amazon, ti invitiamo a leggere", "k_banner_eucookie_message_learn_more": "l\u2019Informativa sui Cookie ", "k_banner_eucookie_message_postHref": "di Amazon.", "k_banner_eucookie_message_refLink": "https:\\/\\/www.amazon.it\\/gp\\/help\\/customer\\/display.html?ie=UTF8&nodeId=201890250", "k_common_cancel_button": "Annulla", "k_common_close_button": "Chiudi", "k_common_confirm_button": "OK", "k_common_learn_more": "Maggiori informazioni", "k_dialog_appCache_button_text": "OK", "k_dialog_appCache_instruction1_text": "Clicca sul pulsante Home dell'iPad per uscire dall'applicazione.", "k_dialog_appCache_instruction2_text": "Clicca due volte sul pulsante Home dell'iPad per mostrare la barra delle applicazioni in esecuzione (situata in basso alla schermata dell'iPad).", "k_dialog_appCache_instruction3_text": "Individuare l'icona dell'applicazione Safari e tenerla premuta finch\u00e9 non appare un pulsante meno nell'angolo in alto a sinistra. Toccare il pulsante meno.", "k_dialog_appCache_instruction4_text": "Individuare qualsiasi altra istanza di Kindle Cloud Reader e tenere premuta la relativa icona finch\u00e9 un pulsante meno non appare nell'angolo in alto a sinistra. Toccare il pulsante meno.", "k_dialog_appCache_instruction5_text": "Riavviare Safari e tentare nuovamente di caricare read.amazon.com.", "k_dialog_appCache_message_text": "\u00c8 stato riscontrato un errore durante il tentativo di salvataggio dell'applicazione per la lettura offline. Per risolvere il problema \u00e8 necessario riavviare l'applicazione Safari e qualsiasi altra istanza in esecuzione di Kindle Cloud Reader.", "k_dialog_appCache_readmore_text": "Come riavvio Safari e/o Kindle Cloud Reader?", "k_dialog_appCache_step1_text": "Passaggio 1.", "k_dialog_appCache_step2_text": "Passaggio 2.", "k_dialog_appCache_step3_text": "Passaggio 3.", "k_dialog_appCache_step4_text": "Passaggio 4.", "k_dialog_appCache_step5_text": "Passaggio 5.", "k_dialog_appCache_title_text": "Errore durante il salvataggio dell'applicazione", "k_dialog_dbBlocked_Text": "Errore durante la disconnessione. Prova a chiudere le altre schede che utilizzano Kindle Cloud Reader per risolvere il problema.", "k_dialog_dbBlocked_Title": "Disconnetti", "k_dialog_enableOffline_button_text": "OK", "k_dialog_enable_offline_firefox_msg": "Kindle Cloud Reader richiede l'autorizzazione per archiviare libri per la lettura offline. Se hai selezionato \\\"Mai per questo sito\\\" quando Firefox ha chiesto l'autorizzazione, dovrai ${linkStart}seguire questa procedura${linkEnd} per attivare la lettura offline in Firefox.", "k_dialog_enable_offline_title": "Attiva lettura offline", "k_dialog_ffPrompting_Text": "Consenti l'archiviazione sul Kindle di oltre 50 MB di dati del tuo computer per l'utilizzo offline.<br /><br />Per assistenza, leggere la sezione relativa a ${linkStart}risoluzione dei problemi e risorse${linkEnd} di Kindle Cloud Reader.", "k_dialog_ffPrompting_Title": "Consenti archiviazione offline", "k_dialog_logoutConfirm_continue": "Continua per uscire", "k_dialog_logoutConfirm_message": "Se esci da Kindle rimuoverai tutti i libri scaricati dal browser. Se effettui nuovamente l'accesso, potrai continuare a leggere questi libri solo quando sarai connesso a Internet.", "k_dialog_logout_message": "Per favore, attendere il completamento della pulizia dei contenuti scaricati.", "k_dialog_logout_title": "Disconnessione da Kindle Cloud Reader in corso...", "k_dialog_message_dismissButton_text": "OK", "k_dialog_message_retryButton_text": "Riprova", "k_dialog_offlineLogout_Text": "Questa operazione richiede una connessione a Internet.", "k_dialog_offlineLogout_Title": "Impossibile disconnettersi", "k_dialog_prevSignOutFailed_Text": "Problemi durante la disconnessione? Visita l'Aiuto per cercare soluzioni possibili.", "k_dialog_prevSignOutFailed_Title": "Disconnetti", "k_dialog_rental_expired_dismiss_button_text": "Escludi", "k_dialog_rental_expired_extend_button_text": "Estendi o Acquista", "k_dialog_smallWindow_button_ignore": "Ignora", "k_dialog_smallWindow_msg": "Aumenta le dimensioni di questa finestra per vivere la migliore esperienza di lettura con Kindle Cloud Reader.", "k_dialog_smallWindow_title": "Espandi finestra per la lettura con Kindle Cloud Reader", "k_empty_library_free": "Migliaia di libri gratuiti!", "k_empty_library_legal": "*La disponibilit\u00e0 dei libri pu\u00f2 variare per i clienti al di fuori di Stati Uniti.", "k_empty_library_main": "Acquista tra oltre due milioni di libri in ${storeName}.", "k_empty_library_manga_button": "Cerca manga gratuiti", "k_empty_library_manga_msg": "Cerca tra una selezione di oltre due milioni di libri in ${storeName}, tra cui bestseller e fumetti gratuiti.", "k_empty_library_shop": "Entra nel Kindle Store", "k_empty_library_store_name": "Kindle Store", "k_empty_library_title": "Al momento non sono presenti libri nella tua libreria Kindle.", "k_empty_search_msg": "Nessun risultato per la ricerca", "k_empty_search_offline": "(se offline, \u00e8 possibile ricercare solo i libri scaricati).", "k_endOfFreeTrial_Text": "Il periodo di prova gratuita per questo libro \u00e8 scaduto. Per continuare a usare il libro, acquista questo articolo in Kindle Store.", "k_endOfFreeTrial_Title": "Articolo scaduto", "k_endOfFreeTrial_buyfullversion_button": "Acquista la versione completa", "k_endOfFreeTrial_cancel_button": "Annulla", "k_endOfFreeTrial_removebook_button": "Rimuovi libro", "k_endOfSample_Text": "Hai raggiunto il termine degli estratti di contenuti. Puoi acquistare la versione completa da Kindle Store o tornare all'estratto.", "k_endOfSample_Title": "Termine degli estratti di contenuti", "k_endOfSample_buy_button": "Acquista la versione completa", "k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550": "Acquista la versione completa nello store", "k_endOfSample_cancel_button": "Torna all'estratto", "k_freeTrialExpires_Day": "Il periodo di prova gratuita scade tra <span class=\"free_trial_remaining\">1 giorno</span>", "k_freeTrialExpires_Days": "Il periodo di prova gratuita scade tra <span class=\"free_trial_remaining\">${days} giorni</span>", "k_freeTrialExpires_less_than_a_day": "Il periodo di prova gratuita scade tra <span class=\"free_trial_remaining\">meno di un giorno</span>", "k_noAppMode_content": "Spiacenti, non possiamo aprire Kindle Cloud Reader dal segnalibro della tua schermata iniziale esistente. Per continuare la lettura sul tuo iPad, tocca in basso per utilizzare Safari oppure un'app Kindle gratuita.", "k_noAppMode_safariLink": "Apri in Safari", "k_noAppMode_storeLink": "Kindle per iPad", "k_noDownloadedBooks_title": "Al momento non hai nessun libro scaricato.", "k_offlineAccessDisabled_Text": "\u26a0\ufe0f Kindle non supporter\u00e0 pi\u00f9 il download di libri per l'accesso offline dal browser Web. Puoi continuare a leggere offline i tuoi libri gi\u00e0 scaricati fino alla disconnessione dal tuo account.", "k_provide_feedback_error": "Si \u00e8 verificato un errore durante il tentativo di invio del messaggio. Per favore, riprova pi\u00f9 tardi.", "k_provide_feedback_sending": "Invio in corso...", "k_provide_feedback_success": "Messaggio inviato correttamente. &#x2713;", "k_provide_feedback_text": "Inserisci la tua domanda o feedback nello spazio in basso.", "k_provide_feedback_title": "Contattaci", "k_send_feedback_button": "Invia", "k_store_open_failed_Error_Text": "Si \u00e8 verificato un errore durante l'apertura di Kindle Store. Per favore, riprova pi\u00f9 tardi.", "k_store_open_failed_Error_Title": "Impossibile aprire Kindle Store", "k_store_open_failed_offline_Error_Text": "Questa operazione richiede una connessione a Internet.", "k_store_open_failed_offline_Error_Title": "Impossibile aprire Kindle Store", "k_text_me_widget_EmailPhone": "Immetti e-mail o n. telefono", "k_text_me_widget_GetApp": "Scarica l'app ora", "k_text_me_widget_invalid_input": "Immetti un numero di telefono o un indirizzo e-mail valido.", "k_text_me_widget_send_email_fail": "Impossibile inviare e-mail. Riprova pi\u00f9 tardi.", "k_text_me_widget_send_email_success": "L'app sta per arrivare! Controlla le tue e-mail.", "k_text_me_widget_send_sms_fail": "Impossibile inviare SMS. Riprova pi\u00f9 tardi.", "k_text_me_widget_send_sms_success": "L'app sta per arrivare! Controlla il tuo telefono.", "k_text_me_widget_service_error": "Si \u00e8 verificato un errore. Riprova pi\u00f9 tardi.", "k_text_me_widget_submitting_request": "Invio richiesta in corso...", "k_window_title": "Kindle Cloud Reader", "metro_tutorial_children_book_click_instruction": "Suggerimento: fai doppio clic sul testo per ingrandirlo", "metro_tutorial_children_book_tap_instruction": "Suggerimento: tocca due volte il testo per ingrandirlo", "metro_tutorial_children_book_text": "Gli animali hanno nuotato nelle acque gelide fino a raggiungere un'isola, proprio prima dell'alba.", "metro_tutorial_comic_book_click_instruction1": "Suggerimento: clicca due volte sui pannelli per ingrandirli,", "metro_tutorial_comic_book_click_instruction2": "quindi sposta le pagine a destra per navigare.", "metro_tutorial_comic_book_tap_instruction1": "Suggerimento: tocca due volte i pannelli per ingrandirli,", "metro_tutorial_comic_book_tap_instruction2": "quindi scorri lateralmente per navigare.", "metro_tutorial_commic_book_dialogue": "SAPPIAMO TUTTO DELL'ORDIGNO DELLAPOCALISSE!"};
var Kindle = Kindle || {};Kindle.formats  = Kindle.formats || {};Kindle.formats['US']={"k_format_date": "MMM dd, yyyy", "k_format_date_time": "hh:mm a MMM dd, yyyy", "k_format_time": "hh:mm a"};
var Kindle = Kindle || {};Kindle.formats  = Kindle.formats || {};Kindle.formats['JP']={"k_format_date": "yyyy\u5e74MM\u6708dd\u65e5", "k_format_date_time": "yyyy\u5e74MM\u6708dd\u65e5ahh\u6642mm\u5206", "k_format_time": "ahh\u6642mm\u5206"};
var Kindle = Kindle || {};Kindle.formats  = Kindle.formats || {};Kindle.formats['BR']={"k_format_date": "MMM dd, yyyy", "k_format_date_time": "HH:mm MMM dd, yyyy", "k_format_time": "HH:mm "};
var Kindle = Kindle || {};Kindle.formats  = Kindle.formats || {};Kindle.formats['ES']={"k_format_date": "MMM dd, yyyy", "k_format_date_time": "HH:mm MMM dd, yyyy", "k_format_time": "HH:mm "};
var Kindle = Kindle || {};Kindle.formats  = Kindle.formats || {};Kindle.formats['FR']={"k_format_date": "dd MMM yyyy", "k_format_date_time": "HH:mm dd MMM yyyy", "k_format_time": "HH:mm "};
var Kindle = Kindle || {};Kindle.formats  = Kindle.formats || {};Kindle.formats['IT']={"k_format_date": "MMM dd, yyyy", "k_format_date_time": "HH:mm MMM dd, yyyy", "k_format_time": "HH:mm "};
var Kindle = Kindle || {};Kindle.formats  = Kindle.formats || {};Kindle.formats['DE']={"k_format_date": "dd. MMM yyyy", "k_format_date_time": "HH:mm dd. MMM yyyy", "k_format_time": "HH:mm "};
/*
 * =======================================================================
 * KindleUtils
 * 
 * This class provides information about the app version.
 *
 * Copyright (c) 2010-2012 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * =======================================================================
 */

var LocalStorageCounter = function(key) {

    var _key = key;

    function fail() {
        KindleDebug.error('no local storage');
    }

    function reset() {
        if (KindleLocalStorage.isLocalStorageEnabled()) {
            KindleLocalStorage.removeItem(_key);
        } else {     
            fail();
        }
    }

    function increment() {
        if (KindleLocalStorage.isLocalStorageEnabled()) {
            var oldval = parseInt(KindleLocalStorage.getItem(_key), 10);
            if (isNaN(oldval)) {
                oldval = 0;
            }
            KindleLocalStorage.setItem(_key, oldval + 1);
        } else {
            fail();
        }
    }

    function getValue() {
        if (KindleLocalStorage.isLocalStorageEnabled()) {
            var oldval = parseInt(KindleLocalStorage.getItem(_key), 10);
            if (isNaN(oldval)) {
                return 0;
            } else {
                return oldval;
            }
        } else {
            fail();
            return 0;
        }
    }

    return {reset: reset,
            increment: increment,
            getValue: getValue};
};

/**
 * Check if a value is a number (not including Infinity, -Inifity, NaN)
 * Originally from:
 *  http://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric
 *
 */
if (typeof isNumber === 'undefined') {
    var isNumber = function(n) {
        n = parseFloat(n);
        return !isNaN(n) && isFinite(n);
    }
}

/**
 * A dummy implementation of Object.freeze.  It does nothing.
 * Allows freeze to be used in code that also runs on iOS4.3.  (If the code works correctly elsewhere,
 * and the freeze isn't *required*, then running on iOS4.3 would be possible.)
 */
if (!Object.freeze) {
    Object.freeze = (function(o) {return o;});
}

/**
 * Determines whether a string ends with the characters of another string, 
 * returning true or false as appropriate
 * https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/endsWith
 */
if (!String.prototype.endsWith) {
    Object.defineProperty(String.prototype, 'endsWith', {
        enumerable: false,
        configurable: false,
        writable: false,
        value: function (searchString, position) {
            position = position || this.length;
            position = position - searchString.length;
            return this.lastIndexOf(searchString) === position;
        }
    });
}

/**
 * Intended to be instantiated as a member of another object that 
 * needs to be able to keep track of listeners.
 * It can delegate the listener-tracking to one of these objects.
 *
 * TODO look into jQuery.Callbacks (new in 1.7)
 * http://api.jquery.com/jQuery.Callbacks/
 */
var ListenerManager = function(properties) {

    var _listeners = {};
    var _eventProperties = {};

    function addEventListener(type, listener, useCapture) {
        // #ifdef DEBUG
        if (typeof listener !== 'function') {
            KindleDebug.error('listener should be a function');
        }
        // #endif

        if (_eventProperties[type] === undefined) {
            _eventProperties[type] = {};
        }
        
        // Are we listening for a new type of event
        if (_listeners[type] === undefined) {

            // Create list of listeners for each type of event.
            _listeners[type] = [listener];

        } else {
            // Add another listener for that type, if new listener.
            if (_listeners[type].indexOf(listener) < 0) {
                _listeners[type].push(listener);
            }
        }
    }

    function removeEventListener(type, listener) {
        if (_listeners[type]) {
            var i = _listeners[type].indexOf(listener);
            if (i >= 0) {
                _listeners[type].splice(i, 1);
            }
        }
    }

    /**
     * Is a listener registered for the given event type??
     * @param {String} type
     * @return {Boolean} true iff a listener is registered, false otherwise
     */
    function hasEventListener(type) {
        return !!(_listeners[type] && _listeners[type].length > 0);
    }

    function callEventListeners(type, e) {
        // The arguments, minus the type.
        var args = Array.prototype.slice.call(arguments).slice(1);

        // Do we already have any listeners?
        var listenersForType, properties, result;
        listenersForType = _listeners[type];
        properties = _eventProperties[type];
        if (listenersForType) {
            // Call all the listeners.
            for (var i = 0; i < listenersForType.length; i++) {
                result = listenersForType[i].apply(listenersForType[i], args);
                if (properties.vetoable && result === false) {
                    return false;
            }
        }
        return true;
    }
    
    function setEventProperties(type, props) {
        _eventProperties[type] = $.extend({}, props);
    }
        return true;
    }
    
    function setEventProperties(type, props) {
        _eventProperties[type] = $.extend({}, props);
    }

    return { 
        addEventListener: addEventListener,
        removeEventListener: removeEventListener,
        callEventListeners: callEventListeners,
        setEventProperties : setEventProperties,
        hasEventListener: hasEventListener
    };
};

/**
 * A simple mutual exclusion lock implementation. This class may be used to avoid race-conditions by ensuring that
 * only *one* client is using a particular resource at any particular time.
 *
 * Typical usage scenario:
 *
 *   var lock = Lock();
 *
 *   lock.acquire().done(function() {
 *       // Do work... (Possibly asynchronously)
 *
 *       // When the work is done...
 *       lock.release();
 *   });
 */
var Lock = function() {

    var owner;

    var waitList = [];

    return {
        /**
         * Acquires the lock.
         *
         * NOTE: It is vitally important that each (successful) call to acquire() is paired with a call to release().
         *       Failure to do so will result in all other clients being blocked forever!
         *
         * @return {jQuery.Promise} a promise that will be resolved when the lock is successfully acquired
         */
        acquire: function() {
            var dfd = $.Deferred();
            if (!owner) {
                // Uncontended lock can be acquired immediately
                owner = dfd.resolve();
            }
            else {
                // Must wait
                waitList.push(dfd);
            }
            return dfd.promise();
        },

        /**
         * Releases the lock and allows the next client (if any) to proceed.
         *
         * NOTE: It is vitally important that each (successful) call to acquire() is paired with a call to release().
         *       Failure to do so will result in all other clients being blocked forever!
         */
        release: function() {
            if (!owner) {
                throw new Error('release without acquire');
            }
            owner = waitList.shift();
            if (owner) {
                owner.resolve();
            }
        }
    };
};

/**
 * Some useful utilities function for Kindle.
 */
var KindleUtils = (function() { 
    /**
     * Waits for a period time, until the user stop firing events, then execute the function
     * @param {Object} fn - the function to be executed after the timeout
     * @param {int} timeout - time, in ms, be waited before executing fn
     * @param (optional) {Object} ctx - context to be bind to the function. 
     * @param (optional) {boolean} invokeAsap - if true, it will execute the function right away. False, otherwise
     * @return {function} closure that executes the fn after the timeout.
     */
    function debounce(fn, timeout, ctx, invokeAsap) {
        if (arguments.length === 3 && typeof invokeAsap !== 'boolean') {
            ctx = invokeAsap;
            invokeAsap = false;
        }
        var timer;
    
        return function() {
            var args = arguments;
            ctx = ctx || this;
            if (invokeAsap && !timer) {
                fn.apply(ctx, args);
            }
            clearTimeout(timer);
            timer = setTimeout(function() {
                if (!invokeAsap) {
                    fn.apply(ctx, args);
                }
                timer = null;
            }, timeout);
        };
    }

    /**
     * Converts a string to a byte array
     * @param {String} str - the string representation of the payload
     * @return {Uint8Array} the payload as a byte array
     */
    function strToBytes(str) {
        var bytes = new Uint8Array(str.length);
        for (var i=0; i<str.length; i++) {
            bytes[i] = str.charCodeAt(i);
        }
        return bytes;
    }

    return {
        debounce : debounce,
        strToBytes : strToBytes
    };
})();
/*
 * =======================================================================
 * KindleEventBroker
 *
 * This event broker is using a subscriber/publisher model. To be used with the reader toolbars
 * to decouple the view from the logic.
 *
 * This component is based on jQuery Callbacks as documented in http://api.jquery.com/jQuery.Callbacks/
 * Each event can have multiple callbacks attached to it. 
 *
 * Revision: $Revision:  $
 * Last Changed: $Date:  $
 * Changed By: $Author: aril$
 *
 * Copyright (c) 2010-2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * =======================================================================
 */
var KindleEventBroker = function(){

    // This objects keeps the list of callbacks in the form
    // key: eventName value: $.Callbacks 
    var events = {};

    /**
     * Subscribe to an event listener callback
     * @param {String} name of an event
     * @param {Function} callback to be executed when event is called
     */
    function subscribe(name, callback) {
        if (events[name]) {
            events[name].add(callback);
        } else {
            var cb = $.Callbacks();
            cb.add(callback);
            events[name] = cb;
        }
    }

    /**
     * Unsubscribe a specific callback for a event
     * @param {String} name of an event
     * @param {Function} callback to be removed
     */
    function unsubscribe(name, callback) {
        if (events[name]) {
            events[name].remove(callback); 
        }
    }

    /**
     * Execute callback(s) for the specified event
     * @param {String} name of an event
     * 
     * -Note: Will take additional arguments that will be used in
     * executing the callback.
     */
    function fire(name) {
        var params = Array.prototype.slice.call(arguments, 1);
        var cmd = events[name];
        if (events[name]) {
            cmd.fire.apply(this, params);
        }
    }

    return {
        fire                : fire,
        subscribe           : subscribe,
        unsubscribe         : unsubscribe
    };
}();
/**
 * =======================================================================
 * KindleConstants
 * Provides a single copy of constants.
 *
 * Revision: $Revision: $
 * Last Changed: $Date: ${TIME} $
 * Changed By: $Author: $
 *
 * Copyright (c) 2010-2012 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * =======================================================================
 *
 */
var Kindle = $.extend( (Kindle || {}),  {

    // Store a reference to KindleApp's window.
    // KindleReader, KindleLibrary, TOS, etc should refer to this instead of window.top
    // We need to do this so we can run KCR in another host's iframe.
    top: window,

    VERSION : {
        MAJOR : 9,
        MINOR : 9,
        PATCH : 9
        // See toString 
    },

    MODULE : {
        SERVICE_INITIALIZATION_ARGS: 'ServiceInitArgs',
        APPLICATION_ARGS:   'ApplicationArgs',
        
        SERVICE_CLIENT:     'ServiceClient',
        METRICS_MANAGER:    'metrics_manager',
        METRICS_UPLOADER:   'MetricsUploader',
        DB_CLIENT:          'DBClient',

        LOCATION_CONVERTER: 'locationConverter',
        SearchIndexManager: 'SearchIndexManager',
        PageNumberManager: 'PageNumberManager',
        SidecarManager: 'SidecarManager'
    },    
    
    ERROR : {
        // BookInfo errors
            OUT_OF_SPACE:               'OutOfSpace',
            UNKNOWN_DB_ERROR:           'UnknownDBError',
            TIMEOUT:                    'timeout',
            LOAD_FAILURE:               'LoadFailure',
            REMOVE_FAILURE:             'RemoveFailure',
            REMOVE_NETWORK_FAILURE:     'RemoveNetworkFailure',
            DB_LINGERING_WRITE:         'DbLingeringWrite',

        
        // Service errors
            CONTENT_LOANED:             "ContentLoaned",
            CONTENT_LOAN_ENDED:         "ContentLoanEnded",
            CONTENT_LICENSE_EXCEEDED:   "ContentLicenseExceeded",
            CONTENT_UNSUPPORTED:        "ContentUnsupported",
            CONTENT_RENTAL_EXPIRED:     "ContentRentalExpired",
            SESSION_LIMIT_EXCEEDED:     "SessionLimitExceeded",
            BOOK_NOT_AVAILABLE:         "BookNotAvailable",
            REVOKE_FAILED:              "RemoveOwnershipFailed",
            STORE_NOT_AVAILABLE:        "StoreNotAvailable",
            STORE_OPEN_FAILED:          "StoreOpenFailed",
            STORE_OPEN_OFFLINE_FAILED:  "StoreOpenOfflineFailed",
            SYNC_FAILED:                "SyncFailed",
            SYNC_FAILED_OFFLINE:        "SyncFailedOffline",
            GEOLOCATION_NOT_ALLOWED:    "GeoLocationNotAllowed",
            FREE_TRIAL_EXPIRED:         "FreeTrialExpired",

        // Open Book Fail errors:
            OPEN_BOOK_LOAD_FAILURE:     "LoadFailure",
            OPEN_BOOK_NETWORK_ERROR:    "NetworkError",
            OPEN_BOOK_CONTENT_UNAVAILABLE: "ContentUnavailable",
            OPEN_BOOK_UNKNOWN:          "Unknown",
            OPEN_BOOK_ASIN_NOT_SPECIFIED: "AsinNotSpecified",

        // Search Inside the Book errors:
            SITB_OFFLINE:                    "SitbOffline",
            SITB_INDEX_NOT_AVAILABLE:        "SitbIndexNotAvailable",
            SITB_INDEX_UNREADABLE:           "SitbIndexUnreadable",
            SITB_COMMON_ERROR:               "SitbCommonError",
            SITB_LANGUAGE_NOT_SUPPORTED:     "SitbLanguageNotSupported",
            SITB_LANGUAGE_UNDEFINED:         "SibtLanguageUndefined",

        // Page number errors:
            PN_DOWNLOAD_FAIL:           "PNDownloadFail",
            PN_REVOKED:                 "PNRevoked",
            
        // Other errors
            NOT_IMPLEMENTED:            "NotImplemented",
            NETWORK:                    "Network",
            CANCELLED:                  "cancelled",
            CONTENT_UPGRADE:            "ContentUpgrade",
            PINNED_CONTENT_UPGRADE:     "PinnedContentUpgrade",
            LIBRARY_LOAD_FAILED:        "LibraryLoadFailed",
            UNKNOWN_ERR:                "unknown",
            OUTDATED_CHROME:            "OutdatedChrome",

        // Not really errors, per se, but they flow through as though they are.
            USER_CLOSED_BOOK:           "ClosedBook",
            USER_CANCELLED_PIN:         "CancelledPin"
    },

    ERROR_CODE: {
        OFFLINE: '1001',
        NO_URL: '1002',
        CACHED_STATE: '1003',
        START_READING: '1004',

        RENDERER_INIT: '2001',
        RENDERER_METADATA: '2002',
        RENDERER_UNKNOWN: '2003'
    },
    
    BookInfo : {
        // The states a book can have in bookinfo
        CachedState: {
            PARTIAL: 'partial',
            CACHED: 'cached',
            PINNING: 'pinnning',
            PINNED: 'pinned',
            
            FULLY_DOWNLOADED: ['cached','pinned'],
            MAYBE_DOWNLOADED: ['partial', 'cached', 'pinning', 'pinned'],
            isFullyDownloaded: function(cachedState) {
                return (Kindle.BookInfo.CachedState.FULLY_DOWNLOADED.indexOf(cachedState) >= 0);
            },
            isMaybeDownloaded: function(cachedState) {
                return (Kindle.BookInfo.CachedState.MAYBE_DOWNLOADED.indexOf(cachedState) >= 0);
            }
        },
        PublisherMetadata: {
            COMIC: 'comic',
            CHILDREN: 'children'
        },
        BookType: {
            TOPAZ: 'topaz',
            MOBI8: 'mobi8',
            YJ: 'yj'
        }
    },

    Service : {
        // Authentication states
        NotAuth: 'NotAuth',
        AuthOK: 'AuthOK',
        AuthError: 'AuthError',
        AuthUserMismatch: 'AuthUserMismatch',
        AuthTokenMismatch: 'AuthTokenMismatch',
        
        DeviceTokenKey: 'kindleDeviceToken',
        UserHashIdKey:  'kindleUserHashId',
        EidKey:         'eid'
    },

    App : {
        //App constants
        FILE_LIST_VERSION: "2",
        LOGGED_IN : 'logged_in',
        BYPASS_LANDING_PAGE_STORAGE : 'bypass_landing_page',
        HAVE_RUN : 'haveRun', 
        LIBRARY_FAIL_FLAG : 'lf',
        // key for user's preferred dictionary selection in local storage
        USER_DICT_ASIN: 'user_dictionary_asin' 
    },

    Reader : {
        CloseButtonNone: 'none',
        CloseButtonAuto: 'auto'
    },
    
    DB : {
        NEVER: -1,

        // Database errors, returned in the {'code': xxx } part of error object.
        UNKNOWN_ERR    : 0,    // unknown error, not from database
        DATABASE_ERR   : 1,    // unknown error from database
        VERSION_ERR    : 2,    // tried to open with wrong version
        TOO_LARGE_ERR  : 3,    // too many rows returned
        QUOTA_ERR      : 4,    // database too large
        SYNTAX_ERR     : 5,    // bad SQL
        CONSTRAINT_ERR : 6,    // null/not-null, primary key
        TIMEOUT_ERR    : 7,    // couldn't finish in a reasonable time

        // Record data definition
        TEXT_TYPE: 1,
        NUMBER_TYPE: 2,
        OBJECT_TYPE: 4,
        BLOB_TYPE: 8,
        ALLOW_NULL: 16,
        PRIMARY_KEY: 32,
        AUTO_INCREMENT: 64,
        PIECE_ID_TYPE: 128,            // Used as a record id for a fragment, glyph, or skeleton.  Add in addition to NUMBER_TYPE.
        SECONDARY_KEY: 256,

        OPERATOR: "operator",
        VALUES: "values",
        
        NOT_EQUAL: "notEqual",
        IN_ARRAY:  "inArray",
        
        // Record operation
        INSERT_LIST_OPERATION: "insertList",
        UPDATE_RECORD_OPERATION: "updateRecord",
        UPSERT_RECORD_OPERATION: "upsertRecord",
        DELETE_RECORD_OPERATION: "deleteRecord",
        GET_RECORD_OPERATION: "getRecord",
        CREATE_TABLE_OPERATION: "createTable",
        ALTER_TABLE_OPERATION: "alterTable"
    },

    STORE : {
        OPEN_STORE: "open_store",
        GENERIC_ERROR: "generic_error",
        OFFLINE_ERROR: "offline_error",
        KINDLE_NODE: "1286228011",
        COMICS_NODE: "156104011",
        CHILDRENS_NODE: "726696011"
    },

    Notebook : {
        OPEN_NOTEBOOK: "open_notebook",
        GENERIC_ERROR: "generic_error",
        OFFLINE_ERROR: "offline_error"
    },

    APP_CACHE : {
        CACHE_PROGRESS: "cacheProgress",
        CACHE_CACHED: "cacheCached",
        CACHE_DONE: "cacheDone",
        CACHE_NEEDS_RETRY: "cacheNeedsRetry",
        CACHE_NEEDS_BROWSER_RESTART: "cacheNeedsBrowserRestart"
    },
    
    CONTENT_TYPE: {
        EBOK: "EBOK",
        EBSP: "EBSP"
    },

    opt: {
       // CASC-2981 Prevent crashing when huge notes persisted to db.
       maxNoteChars: 50000
    },
    
    ClientName : {
        KCR:   "K4W",
        KCRFree: "KCRFree",
        Metro: "KW8"
    },
    
    DeviceType: {
        KCR:   "A2CTZ977SKFQZY",
        Metro: "A3C2X3KG4GJCOD"
    },

    PFMLinks: {
        'A39IBJ37TRP1C6': { //com.au
            tld: "com.au",
            country: "AU"
        },
        'A2Q3Y263D00KWC': { //com.br
            Help107 : "",
            tld: "com.br",
            country: "BR"
        },
        'A2EUQ1WTGCTBG2': { //ca
            Help107 : "http://www.amazon.ca/gp/help/customer/display.html?nodeId=201292730",
            tld: "ca",
            country: "CA"
        }, 
        'AAHKV2X7AFYLW': { //cn
            tld: "cn",
            country: "CN"
        },
        'A1PA6795UKMFR9': { //de
            Help107 : "http://www.amazon.de/gp/help/customer/display.html?nodeId=201290580",
            tld: "de",
            country: "DE"
        }, 
        'A1RKKUPIHCS9HS': { //es
            Help107 : "http://www.amazon.es/gp/help/customer/display.html?nodeId=201291980",
            tld: "es",
            country: "ES"
        }, 
        'A13V1IB3VIYZZH': { //fr
            Help107 : "http://www.amazon.fr/gp/help/customer/display.html?nodeId=201291740",
            tld: "fr",
            country: "FR"
        },
        'A21TJRUUN4KGV': { //in
            tld: "in",
            country: "IN"
        },
        'APJ6JRA9NG5V4': { //it
            tld: "it",
            country: "IT"
        },
        'A1VC38T7YXB528': { //co.jp
            tld: "co.jp",
            country: "JP"
        },
        'A1AM78C64UM0Y8': { //com.mx
            Help107 : "http://www.amazon.com.mx/gp/help/customer/display.html?nodeId=201159430",
            tld: "com.mx",
            country: "MX"
        },
        'A1F83G8C2ARO7P': { //co.uk
            Help107 : "http://www.amazon.co.uk/gp/help/customer/display.html?nodeId=201290720",
            tld: "co.uk",
            country: "UK"
        }, 
        'ATVPDKIKX0DER': { //com
            Help107 : "http://www.amazon.com/gp/help/customer/display.html?nodeId=201159430",
            tld: "com",
            country: "US"
        }
    },

    CountryToDomainMap : {
        "us"      : "amazon.com",
        "de"      : "amazon.de",
        "uk"      : "amazon.co.uk",
        "it"      : "amazon.it",
        "fr"      : "amazon.fr",
        "es"      : "amazon.es",
        "jp"      : "amazon.co.jp",
        "cn"      : "amazon.cn",
        "in"      : "amazon.in",
        "au"      : "amazon.com.au",
        "mx"      : "amazon.com.mx",
        "ca"      : "amazon.ca",
        "br"      : "amazon.com.br"
    },

    PreProdToCountryMap : {
        'read-preprod' : 'us',
        'read-pre-prod-uk' : 'uk',
        'read-pre-prod-de' : 'de',
        'read-pre-prod-fr' : 'fr',
        'read-pre-prod-it' : 'it',
        'read-pre-prod-es' : 'es',
        'read-pre-prod-in' : 'in',
        'read-pre-prod-ca' : 'ca',
        'read-pre-prod-mx' : 'mx',
        'read-pre-prod-br' : 'br',
        'read-pre-prod-au' : 'au',
        'read-pre-prod-jp' : 'jp'
    },

    DomainToUBIDCookie : {
        "amazon.com" :      "ubid-main",
        "amazon.de" :       "ubid-acbde",
        "amazon.co.uk" :    "ubid-acbuk",
        "amazon.it" :       "ubid-acbit",
        "amazon.fr" :       "ubid-acbfr",
        "amazon.es" :       "ubid-acbes",
        "amazon.co.jp" :    "ubid-acbjp",
        "amazon.cn" :       "ubid-acbcn",
        "amazon.in" :       "ubid-acbin",
        "amazon.com.au" :   "ubid-acbau",
        "amazon.com.mx" :   "ubid-acbmx",
        "amazon.ca" :       "ubid-acbca",
        "amazon.com.br" :   "ubid-acbbr"
    },

    // AutoHide options for controlling reader chrome
    AutoHideOption : {
        Auto : "auto",  /* This option shows the reader chrome when book is opened but will dismiss when any user interaction occurs like a page turn */
        Timed : "timed", /* This option shows the reader chrome when book is opened but will dismiss with any user interaction or will dismiss after a certain amount of time */
        Off :  "off" /*  This option will turn off being able to hide the chrome and will be showing at all times. */
    },
    
    SITB : {
        LANGUAGE_NOT_SUPPORTED : "language_not_supported",
        LANGUAGE_UNDEFINED : "undefined"
    },
    
    CACHING : {
        ENABLED  : "enabled",
        DISABLED : "disabled",
        CACHING  : "caching"
    },

    SampleToDetailPageButton : {
        Close : "close",
        FeatureNotAvailable : "featureNotAvailable",
        EndAction : "endAction",
        Buy : "buy"
    }
});

// Building the reverse of CountryToDomainMap.
Kindle.DomainToCountryMap = {};
for (var prop in Kindle.CountryToDomainMap) {
    if(Kindle.CountryToDomainMap.hasOwnProperty(prop)) {
      Kindle.DomainToCountryMap[Kindle.CountryToDomainMap[prop]] = prop;
    }
}


Kindle.VERSION.toString = function() {
    return this.MAJOR + "." + this.MINOR + "." + this.PATCH;
};
/*
 * =======================================================================
 * KindleLocalStorage
 *
 * Local storage replacement for embedded operation.
 *
 * Revision: $Revision$
 * Last Changed: $Date$
 * Changed By: $Author$
 *
 * Copyright (c) 2010-2014 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * =======================================================================
 */


KindleLocalStorage = (function () {
    function isLocalStorageEnabled() {
        var TEST_LOCAL_STORAGE = "testLocalStorage";

        try {
            if (!window.localStorage) {
                return false;
            }

            window.localStorage.setItem(TEST_LOCAL_STORAGE, "1");
            window.localStorage.removeItem(TEST_LOCAL_STORAGE);
        } catch (error) {
            return false;
        }
        return true;
    }

    var ls = {};

    var simulatedLocalStorage = {
        getItem: function getItem(key) {
            return ls[key] || null;
        },
        setItem: function setItem(key, value) {
            ls[key] = value;
        },
        removeItem: function removeItem(key) {
            delete ls[key];
        },
        clear: function clear() {
            ls = {};
        },
        isLocalStorageEnabled: function isLocalStorageEnabled() {
            return false;
        }
    };

    var nativeLocalStorage = {
        getItem: function getItem(key) {
            return window.localStorage.getItem(key);
        },
        setItem: function setItem(key, value) {
            return window.localStorage.setItem(key, value);
        },
        removeItem: function removeItem(key) {
            return window.localStorage.removeItem(key);
        },
        clear: function clear() {
            return window.localStorage.clear();
        },
        isLocalStorageEnabled: function isLocalStorageEnabled() {
            return true;
        }
    };

    function initialize() {
        try {
            // Copy any parent implementation.
            if (window.parent.KindleLocalStorage) {
                return window.parent.KindleLocalStorage;
            }
        } catch (e) {
            // Ignore.
        }

        return (!isLocalStorageEnabled()) ? simulatedLocalStorage : nativeLocalStorage;
    }

    return initialize();
})();
(function() {
  var template = Handlebars.template, templates = Handlebars.templates = Handlebars.templates || {};
templates['KindleEUCookieNotification'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div id=\"kindleApp_banner\">\n    <div id=\"kindleApp_eucookie_banner_center\">\n        <p id=\"kindleApp_banner_eucookie_text\">";
  if (stack1 = helpers.message) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.message; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + " <a id=\"kindleApp_eu_cookie_banner_link\"  target=\"_blank\" href=\"";
  if (stack1 = helpers.refLink) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.refLink; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\">";
  if (stack1 = helpers.learnMoreLink) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.learnMoreLink; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "</a>";
  if (stack1 = helpers.postRefLink) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.postRefLink; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\n        </p>\n    </div>\n    <div id=\"kindleApp_banner_close_button\"></div>\n</div>";
  return buffer;
  });
templates['KindleEnableOfflineDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div id='kindle_dialog_enableOffline'>\n    <div class=\"box-top\">&nbsp;</div>\n    <div class=\"content-container\">\n        <div id=\"content\">\n            <h2 id=\"enable_offline_title\"></h2>\n            <p id=\"enable_offline_top_msg\" class=\"db-msg\"></p>\n        </div>\n    </div>\n    <div class=\"box-bottom\">\n        <p>\n            <span class=\"primary_btn\"id=\"kindle_dialog_enableOffline_button\"></span>\n        </p>\n    </div>\n</div>\n";
  });
templates['KindleFirefoxPromptingDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div id='kindle_dialog_ffPrompting'>\n    <div id=\"content\">\n        <div id='kindle_dialog_ffPrompting_message'>\n            <p id=\"kindle_dialog_ffPrompting_title_text\" class=\"kindle_dialog_title_text\"></p>\n            <div id=\"ffPrompting_img\">\n                <p id=\"kindle_dialog_ffPrompting_url\"></p>\n                <p id=\"kindle_dialog_ffPrompting_tab_title\"></p>\n            </div>\n            <p id=\"kindle_dialog_ffPrompting_text\" class=\"kindle_dialog_text\"> </p>\n        </div>\n    </div>\n</div>";
  });
templates['KindleLogoutDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div id='kindle_dialog_logoutConfirm'>\n    <div class=\"box-top\">&nbsp;</div>\n    <div class=\"content-container\">\n        <div id=\"content\">\n            <p id=\"kindle_dialog_logoutConfirm_content\" class=\"db-msg\"></p>\n        </div>\n    </div>\n    <div class=\"box-bottom\">\n        <p>\n            <span class=\"primary_btn\" id=\"kindle_dialog_logoutConfirm_continue\"></span>\n            <span class=\"chrome_btn\" id=\"kindle_dialog_logoutConfirm_cancel\"></span>\n        </p>\n    </div>\n</div>";
  });
templates['KindleMessageDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div id='kindle_dialog_message'>\n    <p id=\"kindle_dialog_message_title_text\" class=\"kindle_dialog_title_text\"></p>\n    <p id=\"kindle_dialog_message_text\" class=\"kindle_dialog_text\"> </p>\n</div>";
  });
templates['KindleNoAppModeWidget'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var buffer = "", stack1, stack2, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, functionType="function";


  buffer += "<div id=\"ios8mitigation-outter-wrapper\">\n    <div id=\"ios8mitigation-middle-wrapper\">\n        <div id=\"ios8mitigation-inner-wrapper\">\n            <div id=\"ios8mitigation-header\">\n            <div id=\"ios8mitigation-logo\"></div>\n            <div id=\"ios8mitigation-message-well\">\n                <p>";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_noAppMode_content", options) : helperMissing.call(depth0, "str", "k_noAppMode_content", options)))
    + "</p>\n                <a href=\"";
  if (stack2 = helpers.webLink) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.webLink; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  buffer += escapeExpression(stack2)
    + "\" class=\"ios8mitigation-button\" id=\"noAppMode_safariLink\">";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_noAppMode_safariLink", options) : helperMissing.call(depth0, "str", "k_noAppMode_safariLink", options)))
    + "</a>\n                <a href=\"";
  if (stack2 = helpers.storeLink) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.storeLink; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  buffer += escapeExpression(stack2)
    + "\" class=\"ios8mitigation-button\" id=\"noAppMode_storeLink\">";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_noAppMode_storeLink", options) : helperMissing.call(depth0, "str", "k_noAppMode_storeLink", options)))
    + "</a>\n            </div>\n        </div>\n    </div>\n</div>";
  return buffer;
  });
templates['KindleNotificationDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div id=\"kindleNotification\" class='ui-corner-all'>\n    <div class=\"notificationContainer\"></div>\n</div>";
  });
templates['KindleOfflineWarningBanner'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var buffer = "", stack1, stack2, options, helperMissing=helpers.helperMissing;


  buffer += "<div id=\"offlineWarning_banner\">\n    <div id=\"offlineWarning_banner_center\">\n        <div id=\"offlineWarning_banner_text\">\n            ";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_offlineAccessDisabled_Text", options) : helperMissing.call(depth0, "str", "k_offlineAccessDisabled_Text", options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n        </div>\n    </div>\n    <div id=\"offlineWarning_banner_close_button\"></div>\n</div>";
  return buffer;
  });
templates['KindlePopupMenu'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div>\n    <div id=\"kindle_menu_border\"></div>\n</div>";
  });
templates['KindlePromptDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div id='kindle_dialog_prompt'>\n    <p id='kindle_dialog_prompt_label' class='kindle_dialog_text'></p>\n</div>";
  });
templates['KindleRWISBanner'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, helperMissing=helpers.helperMissing, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n        <div id=\"kindleApp_banner_center\" class=\"kindleApp_banner_iPad\">\n            <img id=\"kindleApp_banner_book_cover\" alt=\"BookCover\" src=\"";
  if (stack1 = helpers.bookCoverURL) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.bookCoverURL; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\"/>\n            <div id=\"kindleApp_banner_RWIS_text\">\n                ";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_banner_RWIS_message_ipad", options) : helperMissing.call(depth0, "str", "k_banner_RWIS_message_ipad", options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += " \n            </div>\n            <a id=\"kindleApp_banner_get_app_button\" target=\"_blank\" href=\"";
  if (stack2 = helpers.learnMoreLink) { stack2 = stack2.call(depth0, {hash:{},data:data}); }
  else { stack2 = depth0.learnMoreLink; stack2 = typeof stack2 === functionType ? stack2.apply(depth0) : stack2; }
  buffer += escapeExpression(stack2)
    + "\">";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_text_me_widget_GetApp", options) : helperMissing.call(depth0, "str", "k_text_me_widget_GetApp", options)))
    + "</a>\n        </div>\n    ";
  return buffer;
  }

function program3(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n        <div id=\"kindleApp_banner_left\">\n            <img id=\"kindleApp_banner_book_cover\" alt=\"BookCover\" src=\"";
  if (stack1 = helpers.bookCoverURL) { stack1 = stack1.call(depth0, {hash:{},data:data}); }
  else { stack1 = depth0.bookCoverURL; stack1 = typeof stack1 === functionType ? stack1.apply(depth0) : stack1; }
  buffer += escapeExpression(stack1)
    + "\"/>\n            <div id=\"kindleApp_banner_RWIS_text\">\n                ";
  stack1 = helpers['if'].call(depth0, depth0.isKp, {hash:{},inverse:self.program(6, program6, data),fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n            </div>\n        </div>\n        <div id=\"kindleApp_banner_right\">\n            <div id=\"kindleApp_banner_text_me_widget_wrapper\"></div>\n        </div>\n    ";
  return buffer;
  }
function program4(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n                    ";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_banner_RWIS_message_kp", options) : helperMissing.call(depth0, "str", "k_banner_RWIS_message_kp", options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "                     \n                ";
  return buffer;
  }

function program6(depth0,data) {
  
  var buffer = "", stack1, stack2, options;
  buffer += "\n                    ";
  options = {hash:{},data:data};
  stack2 = ((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_banner_RWIS_message_desktop", options) : helperMissing.call(depth0, "str", "k_banner_RWIS_message_desktop", options));
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n                ";
  return buffer;
  }

  buffer += "<div id=\"kindleApp_banner\">\n    ";
  stack1 = helpers['if'].call(depth0, depth0.isiPad, {hash:{},inverse:self.program(3, program3, data),fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n    <div id=\"kindleApp_banner_close_button\"></div>\n</div>";
  return buffer;
  });
templates['KindleSigningOutDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var buffer = "", stack1, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;


  buffer += "<div id='kindle_signOut_message'>\n    <p id=\"kindle_signOut_message_title_text\" class=\"kindle_dialog_title_text\"> ";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_dialog_logout_title", options) : helperMissing.call(depth0, "str", "k_dialog_logout_title", options)))
    + " </p>\n    \n    <div id='logout_spinner'>\n    <div class=\"spinner\">\n        <div class=\"bar1\"></div>\n        <div class=\"bar2\"></div>\n        <div class=\"bar3\"></div>\n        <div class=\"bar4\"></div>\n        <div class=\"bar5\"></div>\n        <div class=\"bar6\"></div>\n        <div class=\"bar7\"></div>\n        <div class=\"bar8\"></div>  \n        <div class=\"bar9\"></div>      \n        <div class=\"bar10\"></div>         \n        <div class=\"bar11\"></div>             \n        <div class=\"bar12\"></div>                 \n    </div>                                  \n    </div>\n    <div id=\"kindle_signOut_message_text\" class=\"kindle_dialog_text\"> ";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_dialog_logout_message", options) : helperMissing.call(depth0, "str", "k_dialog_logout_message", options)))
    + "</div>\n</div>";
  return buffer;
  });
templates['KindleSimpleSpinner'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div class=\"spinner\">\n    <div class=\"bar1\"></div>\n    <div class=\"bar2\"></div>\n    <div class=\"bar3\"></div>\n    <div class=\"bar4\"></div>\n    <div class=\"bar5\"></div>\n    <div class=\"bar6\"></div>\n    <div class=\"bar7\"></div>\n    <div class=\"bar8\"></div>  \n    <div class=\"bar9\"></div>      \n    <div class=\"bar10\"></div>         \n    <div class=\"bar11\"></div>             \n    <div class=\"bar12\"></div>                 \n</div>";
  });
templates['KindleSmallWindowDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div id='kindle_dialog_smallWindow'>\n    <div class=\"box-top\">&nbsp;</div>\n    <div class=\"content-container\">\n        <div id=\"content\">\n            <h2 id=\"small_window_title\"></h2>\n            <span id=\"small_window_top_img\"></span>\n            <p id=\"small_window_description\" class=\"db-msg\"></p>\n            <div id=\"small_window_bottom_img\"></div>\n        </div>\n    </div>\n    <div class=\"box-bottom\">\n        <p>\n            <span class=\"primary_btn\" id=\"kindle_dialog_smallWindow_button\"></span>\n        </p>\n    </div>\n</div>";
  });
templates['KindleSpinner'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  


  return "<div id='loading_spinner' class='ui-helper-clearfix ui-corner-all'>\n    <div class=\"spinner\">\n        <div class=\"bar bar1\"></div>\n        <div class=\"bar bar2\"></div>\n        <div class=\"bar bar3\"></div>\n        <div class=\"bar bar4\"></div>\n        <div class=\"bar bar5\"></div>\n        <div class=\"bar bar6\"></div>\n        <div class=\"bar bar7\"></div>\n        <div class=\"bar bar8\"></div>  \n        <div class=\"bar bar9\"></div>      \n        <div class=\"bar bar10\"></div>         \n        <div class=\"bar bar11\"></div>             \n        <div class=\"bar bar12\"></div>                 \n    </div>                                          \n</div>";
  });
templates['KindleTextMeWidget'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var buffer = "", stack1, stack2, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  
  return "\n        <div id=\"textMe_Apple_icon\" class=\"textMe_image\"/>\n        ";
  }

function program3(depth0,data) {
  
  
  return "\n        <div id=\"textMe_Android_icon\" class=\"textMe_image\"/>\n        ";
  }

function program5(depth0,data) {
  
  
  return "\n        <div id=\"textMe_Windows_icon\"class=\"textMe_image\"/>\n        ";
  }

function program7(depth0,data) {
  
  
  return "\n        <div id=\"textMe_Amazon_icon\"class=\"textMe_image\"/>\n        ";
  }

  buffer += "<div class=\"textMe_widget\">\n    <div class=\"textMe_input_wrapper\">\n        <input type=\"text\" class=\"textMe_input\" placeholder=\"";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_text_me_widget_EmailPhone", options) : helperMissing.call(depth0, "str", "k_text_me_widget_EmailPhone", options)))
    + "\" name=\"textMe_input\" />\n        <div class=\"textMe_button\" name=\"textMe_button\" type=\"button\">";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_text_me_widget_GetApp", options) : helperMissing.call(depth0, "str", "k_text_me_widget_GetApp", options)))
    + "</div>\n        <div class=\"textMe_status\">\n            <span class=\"textMe_status_text\"></span>\n        </div>\n    </div>\n    <div class=\"textMe_image_wrapper\">\n        ";
  stack2 = helpers['if'].call(depth0, depth0.showAppleLogo, {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n        ";
  stack2 = helpers['if'].call(depth0, depth0.showAndroidLogo, {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n        ";
  stack2 = helpers['if'].call(depth0, depth0.showWindowsLogo, {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n        ";
  stack2 = helpers['if'].call(depth0, depth0.showAmazonLogo, {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});
  if(stack2 || stack2 === 0) { buffer += stack2; }
  buffer += "\n    </div>\n</div>";
  return buffer;
  });
templates['KindleUnoptimizedFormatDialog'] = template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [2,'>= 1.0.0-rc.3'];
helpers = helpers || Handlebars.helpers; data = data || {};
  var buffer = "", stack1, options, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;


  buffer += "<div id='kindleReader_dialog_unoptimizedFormat'>\n    <label id='kindleReader_dialog_unoptimizedFormat_title_id' class='kindle_dialog_title_text'>";
  options = {hash:{},data:data};
  buffer += escapeExpression(((stack1 = helpers.str),stack1 ? stack1.call(depth0, "k_R_dialog_unoptimizedFormat_title", options) : helperMissing.call(depth0, "str", "k_R_dialog_unoptimizedFormat_title", options)))
    + "</label>\n    <p id='kindleReader_dialog_unoptimizedFormat_message_id' class='kindle_dialog_text'></p>\n</div>";
  return buffer;
  });
})();
/*
 * =======================================================================
 * KindleTextMeWidget
 *
 * This is a widget that takes a email address or phone number and texts/emails the customer
 * the link for the KCP landing page.
 *
 * Copyright (c) 2010-2014 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * =======================================================================
 */

/**
 * Constructs a textme widget instance.
 * @param parent {string} - the name of the UI component that will host this text me widget.
 */
function KindleTextMeWidget(config, parent) {

    var COMPONENT_NAME = "KindleTextMeWidget";

    var Classes_List = {
        TextMeWidget : ".textMe_widget",
        TextMeInput  : ".textMe_input",
        TextMeButton : ".textMe_button",
        TextMeStatus : ".textMe_status",
        TextMeStatusText : ".textMe_status_text",
        TextMeImage  : ".textMe_image"
    };

    /**
     * Click event handler for the button. Sends the input to the module
     * responding for sending the request.
     * @param ev {Object} - jQuery event object.
     */
    function onClickTextMeButton(ev) {
        var val = $widgetInput.val().trim();

        // #ifdef DEBUG
        KindleDebug.log("TextMe Widget Value: " + val);
        // #endif
        
        KindleTextMeWidgetManager.send(val, statusUpdateCallback, parent);
    }

    function onInputFocus(ev) {
        $widgetStatusText.empty();
    }

    function onKeypress(ev) {
        // enter
        if (ev.which === 13) {
            $widgetButton.click();
        } 
    }

    /**
     * Updates the view with the latest status of the request.
     * @param color {string} - color of the message.
     * @param message {string} - message to be shown.
     */
    function updateStatus(color, message) {
        $widgetStatusText.text(message)
            .css('color', color);
    }

    /**
     * Callback for updating the view with the latest status of the text me widget.
     * @param status {Enum} - See KindleTextMeWidgetManager.TextMe_Widget_Status_code.
     */
    function statusUpdateCallback(status) {
        $widgetStatusText.empty();

        if (status === KindleTextMeWidgetManager.TextMe_Widget_Status_Code.Sending_In_Progress) {
            $widgetStatus.find('.spinner').css('display', 'inline-block');
            updateStatus('', ResourceBundle.getLocalizedString('k_text_me_widget_submitting_request'));
        } else {
            $widgetStatus.find('.spinner').css('display', 'none');
            switch (status) {
                // Not a valid input.
                case KindleTextMeWidgetManager.TextMe_Widget_Status_Code.Not_A_Valid_Input:
                    updateStatus('red', ResourceBundle.getLocalizedString('k_text_me_widget_invalid_input'));
                    break;
                // Send sms failure.
                case KindleTextMeWidgetManager.TextMe_Widget_Status_Code.Send_SMS_Failure:
                    updateStatus('red', ResourceBundle.getLocalizedString('k_text_me_widget_send_sms_fail'));
                    break;
                // Send email failure.
                case KindleTextMeWidgetManager.TextMe_Widget_Status_Code.Send_Email_Failure:
                    updateStatus('red', ResourceBundle.getLocalizedString('k_text_me_widget_send_email_fail'));
                    break;
                // Send sms success.
                case KindleTextMeWidgetManager.TextMe_Widget_Status_Code.Send_SMS_Success:
                    updateStatus('green', ResourceBundle.getLocalizedString('k_text_me_widget_send_sms_success'));
                    break;
                // Send email success.
                case KindleTextMeWidgetManager.TextMe_Widget_Status_Code.Send_Email_Success:
                    updateStatus('green', ResourceBundle.getLocalizedString('k_text_me_widget_send_email_success'));
                    break;
                // Service error.
                case KindleTextMeWidgetManager.TextMe_Widget_Status_Code.Service_Error_message:
                    updateStatus('red', ResourceBundle.getLocalizedString('k_text_me_widget_service_error'));
                    break;
                default:
            }
        }
    }

    // Constructing the widget.

    var $widget = $(Handlebars.templates[COMPONENT_NAME](config));
    var $widgetButton = $widget.find(Classes_List.TextMeButton);
    var $widgetInput = $widget.find(Classes_List.TextMeInput);
    var $widgetStatus = $widget.find(Classes_List.TextMeStatus);
    var $widgetStatusText = $widgetStatus.find(Classes_List.TextMeStatusText);

    var spinner = Handlebars.templates['KindleSimpleSpinner']({});
    $widgetStatus.prepend(spinner);

    $widgetButton.click(onClickTextMeButton);
    $widgetInput.keypress(onKeypress);
    $widgetInput.focus(onInputFocus);

    return $widget;
}
/*
 * =======================================================================
 * KindleSpinner
 *
 * This is the component the draws the CSS loading spinner
 *
 * Revision: $Revision:  $
 * Last Changed: $Date:  $
 * Changed By: $Author: shaneli$
 *
 * Copyright (c) 2010-2012 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * =======================================================================
 */

var KindleSpinner = function(){
    var COMPONENT_NAME = "KindleSpinner";

    var _component;
    var _initializeDeferred;

    function getInitPromise() {
        if (!_initializeDeferred) {
            _initializeDeferred = new jQuery.Deferred();
            KindleUXComponentManager.initializeComponent(COMPONENT_NAME, onInitializationDone);
        }
        return _initializeDeferred.promise();
    } 

    /**
     * Called when template initialize done to add component into the DOM
     * @param component Initialized component
     */
    function onInitializationDone(component){
        _component = component;
        _initializeDeferred.resolve();
    } // End of onInitializationDone

    /**
     * Show the spinner on top of the application content
     * NOTE: Fixes the spinner offcenter for iPad, the issue was that iPad defaults to an innerWidth/innerHeight of 1
     * sometimes which causes the spinner to be off center, so we use the outer width/height if the inner
     * width/height is less than 2. This only happens when we open a book that hasn't been opened before
     * and come back to the library.
     */
    function showSpinner(){
        $('body').append(_component);
        var w = window.innerWidth>1?window.innerWidth:window.outerWidth;
        var divw = parseInt(_component.css('width'),10);
        var h = window.innerHeight>1?window.innerHeight:window.outerHeight;
        var divh = parseInt(_component.css('height'), 10);
        _component.css('top', (h-divh)/2 + 'px').css('left', (w-divw)/2 + 'px');
    }

    /**
     * Show the spinner 
     */
    function show() {
        var promise = getInitPromise();
        $.when(promise).then(function() {
            showSpinner();
        });
    }

    /**
     * Hide the spinner 
     */
    function hide() {
        var promise = getInitPromise();
        $.when(promise).then(function() {
            $('#loading_spinner').detach();
        });
    } // End of hide


    return{
        show : show,
        hide : hide
    };
}();
/*
 * =======================================================================
 * KindleTextMeWidgetManager
 *
 * This is the modal for the TextMe Widget. The manager is responsible for constructing the ajax call with the
 * appropriate data to the service and signals the view to update along the way of processing the request.
 *
 * Copyright (c) 2010-2014 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * =======================================================================
 */
var KindleTextMeWidgetManager = function() {

    var TextMe_Widget_Status_Code = {
        Not_A_Valid_Input   : 0,
        Send_SMS_Failure    : 1,
        Send_Email_Failure  : 2,
        Send_SMS_Success    : 3,
        Send_Email_Success  : 4,
        Sending_In_Progress : 5,
        Service_Error_message : 6
    };

    var CommunicationType = {
        email : 'email',
        sms   : 'sms'
    };

    var _statusUpdateCallback;

    var _metricsManager;
    var _parentContainer;
    
    /**
     * Returns true if input is a valid email address. (Not necessary an email address that is being used)
     * @param value {string} - to verify whether or not it is an email address.
     * @return {Boolean} - true if value is a valid email address, false otherwise.
     */
    function isValidEmail(value) {
        // Use the browser's input validation to verify if input is a valid email address.
        var input = document.createElement('input');
        input.type = "email";
        input.value = value;
        // The browser considers an empty value as a valid e-mail address, but that's not 
        // what we want.
        return value && input.checkValidity();
    }

    /**
     * Returns true if input is a valid phone number.
     * @param value {string} - to verify whether or not it is a valid phone number.
     * @return {Boolean} - true if input is a valid phone number, false otherwise.
     */
    function isValidPhoneNumber(value) {
        // to see if input only contains digits, (), +, -, ,, ,/ , and .
        var phoneNumberRegex = /^([0-9\(\)\/\+\-\,\.]*)$/g;
        var digitsOnly = value.replace(/D/g, '');
        return digitsOnly.length >= 9 && digitsOnly.length < 20 && phoneNumberRegex.test(value);
    }

    /**
     * Returns true if texting is supported in the current marketplace. As of 9/10/2014, texting is not supported 
     * for the JP marketplace, so false for JP for now.
     */
    function isTextingSupported() {
        return !Kindle.URL.isJPDomain();
    }

    /**
     * As of 8/27/2014, RTE service is not yet available in the jp, mx, and br marketplaces. For these marketplaces
     * we need to prepend the country code.
     * @param value {string} - phone number
     * @return {string} - value || value with prepended country code.
     */
    function addCountryCode(value) {
        var isPreProd = Kindle.URL.isPreProd();
        var countryCode;

        if (isPreProd) {
            countryCode = Kindle.URL.getPreProdCountryCode();
            // empty countryCode in the preprod env implies that we are running in US preprod.
            countryCode = countryCode ? countryCode : 'us';
        } else {
            var amazonDomain = Kindle.URL.getAmazonDomain();
            countryCode = Kindle.DomainToCountryMap[amazonDomain];
        }

        if (value.charAt(0) !== '+') {
            switch (countryCode) {
                case 'jp':
                    value = '+81' + value;
                    break;
                case 'mx':
                    value = '+52' + value;
                    break;
                case 'br':
                    value = '+55' + value;
                    break;
                default:
            }
        }
        return value;
    }

    /**
     *
     */
    function getTextMeRefTagName() {
        switch (_parentContainer) {
            case "KindleUnsupportedContentDialog":
                return "kcr_tm_uscd";
            case "KindleRWISBanner":
                return "kcr_tm_rwis";
            default:
                return "";
        }
    }

    /**
     * Builds the data for the ajax request. Returns an empty string if value is not a valid email address
     * nor phone number.
     * @param value {string} - to verify whether or not it is a valid phone number or email address.
     * @return {Object} - if input is a valid email address or phone number returns {
     *   queryParams {string} - query params for the request or empty string if the input is not a valid phone number or email address.
     *   communicationType {string}
     * }
     */
    function constructParams(value) {
        var params = {};
        var queryParams = '';
        if (isValidEmail(value)) {
            params.communicationType = CommunicationType.email;
            queryParams += "?communicationType=" + CommunicationType.email;
        } else if (isTextingSupported() && isValidPhoneNumber(value)) {
            params.communicationType = CommunicationType.sms;
            value = addCountryCode(value);
            queryParams += "?communicationType=" + CommunicationType.sms;
        } else {
            return queryParams;
        }
        queryParams += "&recipient=" + encodeURIComponent(value);
        queryParams += "&ref=" + getTextMeRefTagName();
        queryParams += "&client=kcr";

        params.queryParams = queryParams;
        return params;
    }

    /**
     * Posts an XMLHttpRequest request to the service and signals the view on the current status.
     * @param queryParams {Object} - data to be sent to the service.
     */
    function submitRTERequest(params) {
        function onSuccess() {
            var data = xhr.responseText;
            if (typeof(data) === "string") {
                data = JSON.parse(data);
            } else {
                _statusUpdateCallback(TextMe_Widget_Status_Code.Service_Error);
            }
            
            // If the service returns 1, it's a success, 0 means failure.
            // In the case of service error, the response will contain a message - "Invalid Request"
            if (data && data.status === 1) {
                if (params.communicationType === CommunicationType.email) {
                    _statusUpdateCallback(TextMe_Widget_Status_Code.Send_Email_Success);
                    _metricsManager.emit("TextMeWidget::" + _parentContainer + "::SendEmailSuccess");
                } else {
                    _statusUpdateCallback(TextMe_Widget_Status_Code.Send_SMS_Success);
                    _metricsManager.emit("TextMeWidget::" + _parentContainer + "::SendSMSSuccess");
                }
            } else {
                // if status is not 1 and these is a message, the input is not a valid input.
                if (data.message) {
                    _statusUpdateCallback(TextMe_Widget_Status_Code.Not_A_Valid_Input);
                    _metricsManager.emit("TextMeWidget::" + _parentContainer + "::NotAValidInput");
                } else {
                    _statusUpdateCallback(TextMe_Widget_Status_Code.Service_Error);
                    _metricsManager.emit("TextMeWidget::" + _parentContainer + "::ServiceError");
                }
            }
        }

        function onError() {
            if (params.communicationType === CommunicationType.email) {
                _statusUpdateCallback(TextMe_Widget_Status_Code.Send_Email_Failure);
                _metricsManager.emit("TextMeWidget::" + _parentContainer + "::SendEmailFailure");
            } else {
                _statusUpdateCallback(TextMe_Widget_Status_Code.Send_SMS_Failure);
                _metricsManager.emit("TextMeWidget::" + _parentContainer + "::SendSMSFailure");
            }
        }

        function beforeSend() {
            _statusUpdateCallback(TextMe_Widget_Status_Code.Sending_In_Progress);
        }
    
        var RTEServiceURL = LinkUrls.getRTEServiceURL();

        var url = RTEServiceURL + params.queryParams;
        var xhr = createCORSRequest('POST', url);

        // Response handlers.
        xhr.onload = onSuccess;
        xhr.onerror = onError;

        beforeSend();
        xhr.send();
    }

    /**
     * Creates a XMLHttpRequest object with the method and url.
     */
    function createCORSRequest(method, url) {
      var xhr = new XMLHttpRequest();
      if ("withCredentials" in xhr) {

        // Check if the XMLHttpRequest object has a "withCredentials" property.
        // "withCredentials" only exists on XMLHTTPRequest2 objects.
        xhr.open(method, url, true);

      } else if (typeof XDomainRequest !== "undefined") {

        // Otherwise, check if XDomainRequest.
        // XDomainRequest only exists in IE, and is IE's way of making CORS requests.
        xhr = new XDomainRequest();
        xhr.open(method, url);

      } else {

        // Otherwise, CORS is not supported by the browser.
        xhr = null;

      }
      return xhr;
    }

    /**
     * Sends a request with the data to the email/text service.
     * @param value {string} - to verify whether or not it is a valid phone number or email address.
     * @param statusUpdateCallback {Function} - a callback for the status update.
     * @param parent {string} - the name of the UI component that is hosting this text me widget.
     */
    function send(value, statusUpdateCallback, parent) {
        if (!_metricsManager) {
            _metricsManager = KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER);
        }

        _parentContainer = parent;

        _statusUpdateCallback = statusUpdateCallback;
        var params = constructParams(value);

        if (!params.queryParams) {
            _metricsManager.emit("TextMeWidget::" + _parentContainer + "::NotAValidInput");
            _statusUpdateCallback(TextMe_Widget_Status_Code.Not_A_Valid_Input);
            return;
        }

        // RTE = Real Time Email service.
        submitRTERequest(params);
    }

    return {
        send : send,
        TextMe_Widget_Status_Code : TextMe_Widget_Status_Code
    };
}();
/////////////////////////
// END FILE lib/KindleCommon.js
/////////////////////////
/////////////////////////
// BEGIN FILE lib/KindleLibRdr.js
/////////////////////////
/*


Full source (including license, if applicable) included below.
*/
/*!
 * jQuery UI Effects Transfer 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Transfer
 *
 * Depends:
 *	jquery.effects.core.js
 */
;(function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.21",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),s&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})})(jQuery),
/*!
 * jQuery UI 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(
){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),
/*!
 * jQuery UI Widget 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),
/*!
 * jQuery UI Mouse 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
function(e,t){e.ui=e.ui||{};var n=/left|center|right/,r=/top|center|bottom/,i="center",s={},o=e.fn.position,u=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return o.apply(this,arguments);t=e.extend({},t);var u=e(t.of),a=u[0],f=(t.collision||"flip").split(" "),l=t.offset?t.offset.split(" "):[0,0],c,h,p;return a.nodeType===9?(c=u.width(),h=u.height(),p={top:0,left:0}):a.setTimeout?(c=u.width(),h=u.height(),p={top:u.scrollTop(),left:u.scrollLeft()}):a.preventDefault?(t.at="left top",c=h=0,p={top:t.of.pageY,left:t.of.pageX}):(c=u.outerWidth(),h=u.outerHeight(),p=u.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");e.length===1&&(e=n.test(e[0])?e.concat([i]):r.test(e[0])?[i].concat(e):[i,i]),e[0]=n.test(e[0])?e[0]:i,e[1]=r.test(e[1])?e[1]:i,t[this]=e}),f.length===1&&(f[1]=f[0]),l[0]=parseInt(l[0],10)||0,l.length===1&&(l[1]=l[0]),l[1]=parseInt(l[1],10)||0,t.at[0]==="right"?p.left+=c:t.at[0]===i&&(p.left+=c/2),t.at[1]==="bottom"?p.top+=h:t.at[1]===i&&(p.top+=h/2),p.left+=l[0],p.top+=l[1],this.each(function(){var n=e(this),r=n.outerWidth(),o=n.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,a=parseInt(e.curCSS(this,"marginTop",!0))||0,d=r+u+(parseInt(e.curCSS(this,"marginRight",!0))||0),v=o+a+(parseInt(e.curCSS(this,"marginBottom",!0))||0),m=e.extend({},p),g;t.my[0]==="right"?m.left-=r:t.my[0]===i&&(m.left-=r/2),t.my[1]==="bottom"?m.top-=o:t.my[1]===i&&(m.top-=o/2),s.fractions||(m.left=Math.round(m.left),m.top=Math.round(m.top)),g={left:m.left-u,top:m.top-a},e.each(["left","top"],function(n,i){e.ui.position[f[n]]&&e.ui.position[f[n]][i](m,{targetWidth:c,targetHeight:h,elemWidth:r,elemHeight:o,collisionPosition:g,collisionWidth:d,collisionHeight:v,offset:l,my:t.my,at:t.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(m,{using:t.using}))})},e.ui.position={fit:{left:function(t,n){var r=e(window),i=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft();t.left=i>0?t.left-i:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var r=e(window),i=n.collisionPosition.top+n.collisionHeight-
r.height()-r.scrollTop();t.top=i>0?t.top-i:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]===i)return;var r=e(window),s=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft(),o=n.my[0]==="left"?-n.elemWidth:n.my[0]==="right"?n.elemWidth:0,u=n.at[0]==="left"?n.targetWidth:-n.targetWidth,a=-2*n.offset[0];t.left+=n.collisionPosition.left<0?o+u+a:s>0?o+u+a:0},top:function(t,n){if(n.at[1]===i)return;var r=e(window),s=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop(),o=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,u=n.at[1]==="top"?n.targetHeight:-n.targetHeight,a=-2*n.offset[1];t.top+=n.collisionPosition.top<0?o+u+a:s>0?o+u+a:0}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),i=r.offset(),s=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,u={top:n.top-i.top+s,left:n.left-i.left+o};"using"in n?n.using.call(t,u):r.css(u)},e.fn.offset=function(t){var n=this[0];return!n||!n.ownerDocument?null:t?e.isFunction(t)?this.each(function(n){e(this).offset(t.call(this,n,e(this).offset()))}):this.each(function(){e.offset.setOffset(this,t)}):u.call(this)}),function(){var t=document.getElementsByTagName("body")[0],n=document.createElement("div"),r,i,o,u,a;r=document.createElement(t?"div":"body"),o={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},t&&e.extend(o,{position:"absolute",left:"-1000px",top:"-1000px"});for(var f in o)r.style[f]=o[f];r.appendChild(n),i=t||document.documentElement,i.insertBefore(r,i.firstChild),n.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",u=e(n).offset(function(e,t){return t}).offset(),r.innerHTML="",i.removeChild(r),a=u.top+u.left+(t?2e3:0),s.fractions=a>21&&a<22}()}(jQuery),
/*!
 * jQuery UI Position 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n.iframeFix&&e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element
).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3]?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2]?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left
:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.21"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,a=t.top,f=t.left;return e.ui.isOver(i+n,s+r,a,f,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"
),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height;for(var l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(!(c-s<o&&o<h+s&&p-s<a&&a<d+s||c-s<o&&o<h+s&&p-s<f&&f<d+s||c-s<u&&u<h+s&&p-s<a&&a<d+s||c-s<u&&u<h+s&&p-s<f&&f<d+s)){r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1;continue}if(i.snapMode!="inner"){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if(i.snapMode!="outer"){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),
/*!
 * jQuery UI Draggable 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.21"}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return a<=i&&s<=f&&l<=o&&u<=c;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height
,n.proportions.width);return d;case"touch":return(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c)&&(i>=a&&i<=f||s>=a&&s<=f||i<a&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(s=e.data(o[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),
/*!
 * jQuery UI Droppable 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
function(e,t){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()},function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;
n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",a=="auto"?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n=this.helper,r=this.options,i={},s=this,o=this.originalMousePosition,u=this.axis,a=t.pageX-o.left||0,f=t.pageY-o.top||0,l=this._change[u];if(!l)return!1;var c=l.apply(this,[t,a,f]),h=e.browser.msie&&e.browser.version<7,p=this.sizeDiff;this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)c=this._updateRatio(c,t);return c=this._respectSize(c,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(c),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}if(!(!e.browser.msie||!e(n).is(":hidden")&&!e(n).parents(":hidden").length))continue;i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position
:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.21"}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!a)return;i.containerElement=e(a);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,a=r.position,f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/
.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis,f=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),
/*!
 * jQuery UI Resizable 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(!a||a.element==n.element[0])return;var f=!1;r.tolerance=="touch"?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):r.tolerance=="fit"&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.21"})}(jQuery),
/*!
 * jQuery UI Selectable 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Selectables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance
:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=this,o=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==s)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==s&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var u=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(u=!0)});if(!u)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options,s=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0
:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=this,r=[],i=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],this.widgetName);f&&f!=this&&!f.options.disabled&&i.push([e.isFunction(f.options.items)?f.options.items.call(f.element):e(f.options.items,f.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),f])}}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=this,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s&&this.ready)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var a=u.length-1;a>=0;a--){var f=e.data(u[a],this.widgetName);f&&f!=this&&!f.options.disabled&&(i.push([e.isFunction(f.options.items)?f.options.items.call(f.element[0],t,{item:this.currentItem}):e(f.options.items,f.element),f]),this.containers.push(f))}}for(var o=i.length-1;o>=0;o--){var l=i[o][1],c=i[o][0];for(var a=0,h=c.length;a<h;a++){var p=e(c[a]);p.data(this.widgetName+"-item",l),n.push({item:p,instance:l,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==
String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(e,t){if(i&&!r.forcePlaceholderSize)return;t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){var n=null,r=null;for(var i=this.containers.length-1;i>=0;i--){if(e.ui.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.ui.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var a=this.items.length-1;a>=0;a--){if(!e.ui.contains(this.containers[r].element[0],this.items[a].item[0]))continue;var f=this.containers[r].floating?this.items[a].item.offset().left:this.items[a].item.offset().top;Math.abs(f-u)<s&&(s=Math.abs(f-u),o=this.items[a],this.direction=f-u>0?"down":"up")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent
[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2]?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a:a}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(t,n){this.reverting=!1;var r=[],i=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)if(this._storedCSS[s]=="auto"||this._storedCSS[s]=="static")this._storedCSS[s]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.21"})}(jQuery),
/*!
 * jQuery UI Sortable 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,n=t.options;t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind
("mouseenter.accordion",function(){if(n.disabled)return;e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(n.disabled)return;e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(n.disabled)return;e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(n.disabled)return;e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(n.navigation){var r=t.element.find("a").filter(n.navigationFilter).eq(0);if(r.length){var i=r.closest(".ui-accordion-header");i.length?t.active=i:t.active=r.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||n.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),n.event&&t.headers.bind(n.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var n=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&n.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t=="active"&&this.activate(n),t=="icons"&&(this._destroyIcons(),n&&this._createIcons()),t=="disabled"&&this.headers.add(this.headers.next())[n?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(this.options.disabled||t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return s?(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),!1):!0},resize:function(){var t=this.options,n;if(t.fillSpace){if(e.browser.msie){var r=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}n=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",r),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else t.autoHeight&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).height("").height())}).height(n));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?typeof t=="number"?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,n){var r=this.options;if(r.disabled)return;if(!t.target){if(!r.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),s={options:r,newHeader:e([]),oldHeader:r.active,newContent:e([]),oldContent:i},o=this.active=e([]);this._toggle(o,i,s);return}var u=e(t.currentTarget||n),a=u[0]===this.active[0];r.active=r.collapsible&&a?!1:this.headers.index(u);if(this.running||!r.collapsible&&a)return;var f=this.active,o=u.next(),i=this.active.next(),s={options:r,newHeader:a&&r.collapsible?e([]):u,oldHeader:this.active,newContent:a&&r.collapsible?e([]):o,oldContent:i},l=this.headers.index(this.active[0])>this.headers.index(u[0]);this.active=a?e([]):u,this._toggle(o,i,s,a,l),f.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),a||(u.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),u.next().addClass("ui-accordion-content-active"));return},_toggle:function(t,n,r,i,s){var o=this,u=o.options;o.toShow=t,o.toHide=n,o.data=r;var a=function(){if(!o)return;return o._completed.apply(o,arguments)};o._trigger("changestart",null,o.data),o.running=n.size()===0?t.size():n.size();if(u.animated){var f={};u.collapsible&&i?f={toShow:e([]),toHide:n,complete:a,down:s,autoHeight:u.autoHeight||u.fillSpace}:f={toShow:t,toHide:n,complete:a,down:s,autoHeight
:u.autoHeight||u.fillSpace},u.proxied||(u.proxied=u.animated),u.proxiedDuration||(u.proxiedDuration=u.duration),u.animated=e.isFunction(u.proxied)?u.proxied(f):u.proxied,u.duration=e.isFunction(u.proxiedDuration)?u.proxiedDuration(f):u.proxiedDuration;var l=e.ui.accordion.animations,c=u.duration,h=u.animated;h&&!l[h]&&!e.easing[h]&&(h="slide"),l[h]||(l[h]=function(e){this.slide(e,{easing:h,duration:c||700})}),l[h](f)}else u.collapsible&&i?t.toggle():(n.hide(),t.show()),a(!0);n.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),e.extend(e.ui.accordion,{version:"1.8.21",animations:{slide:function(t,n){t=e.extend({easing:"swing",duration:300},t,n);if(!t.toHide.size()){t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t);return}if(!t.toShow.size()){t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);return}var r=t.toShow.css("overflow"),i=0,s={},o={},u=["height","paddingTop","paddingBottom"],a,f=t.toShow;a=f[0].style.width,f.width(f.parent().width()-parseFloat(f.css("paddingLeft"))-parseFloat(f.css("paddingRight"))-(parseFloat(f.css("borderLeftWidth"))||0)-(parseFloat(f.css("borderRightWidth"))||0)),e.each(u,function(n,r){o[r]="hide";var i=(""+e.css(t.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);s[r]={value:i[1],unit:i[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(o,{step:function(e,n){n.prop=="height"&&(i=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start)),t.toShow[0].style[n.prop]=i*s[n.prop].value+s[n.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:a,overflow:r}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),
/*!
 * jQuery UI Accordion 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Accordion
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){var n=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t=this,n=this.element[0].ownerDocument,r;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(t.options.disabled||t.element.propAttr("readOnly"))return;r=!1;var i=e.ui.keyCode;switch(n.keyCode){case i.PAGE_UP:t._move("previousPage",n);break;case i.PAGE_DOWN:t._move("nextPage",n);break;case i.UP:t._keyEvent("previous",n);break;case i.DOWN:t._keyEvent("next",n);break;case i.ENTER:case i.NUMPAD_ENTER:t.menu.active&&(r=!0,n.preventDefault());case i.TAB:if(!t.menu.active)return;t.menu.select(n);break;case i.ESCAPE:t.element.val(t.term),t.close(n);break;default:clearTimeout(t.searching),t.searching=setTimeout(function(){t.term!=t.element.val()&&(t.selectedItem=null,t.search(null,n))},t.options.delay)}}).bind("keypress.autocomplete",function(e){r&&(r=!1,e.preventDefault())}).bind("focus.autocomplete",function(){if(t.options.disabled)return;t.selectedItem=null,t.previous=t.element.val()}).bind("blur.autocomplete",function(e){if(t.options.disabled)return;clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(e),t._change(e)},150)}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(n){var r=t.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(n){n.target!==t.element[0]&&n.target!==r&&!e.ui.contains(r,n.target)&&t.close()})},1),setTimeout(function(){clearTimeout(t.closing)},13)}).menu({focus:function(e,n){var r=n.item.data("item.autocomplete");!1!==t._trigger("focus",e,{item:r})&&/^key/.test(e.originalEvent.type)&&t.element.val(r.value)},selected:function(e,r){var i=r.item.data("item.autocomplete"),s=t.previous;t.element[0]!==n.activeElement&&(t.element.focus(),t.previous=s,setTimeout(function(){t.previous=s,t.selectedItem=i},1)),!1!==t._trigger("select",e,{item:i})&&t.element.val(i.value),t.term=t.element.val(),t.close(e),t.selectedItem=i},blur:function(e,n){t.menu.element.is(":visible")&&t.element.val()!==t.term&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),t.beforeunloadHandler=function(){t.element.removeAttr("autocomplete")},e(window).bind("beforeunload",t.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t==="source"&&this._initSource(),t==="appendTo"&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),t==="disabled"&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var t=this,n,r;e.isArray(this.options.source)?(n=this.options.source,this.source=function(t,r){r(e.ui.autocomplete.filter(n,t.term))}):typeof this.options.source=="string"?(r=this.options.source,this.source=function(n,i){t.xhr&&t.xhr.abort(),t.xhr=e.ajax({url:r,data:n,dataType:"json",success:function(e,t){i(e)},error:function(){i([])}})}):this.source=this.options.source},search:function(e,t){e=e!=null?e:this.element.val(),this.term=
this.element.val();if(e.length<this.options.minLength)return this.close(t);clearTimeout(this.closing);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close()},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItem(t,n)})},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this.element.val(this.term),this.menu.deactivate();return}this.menu[e](t)},widget:function(){return this.menu.element},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(n){if(!e(n.target).closest(".ui-menu-item a").length)return;n.preventDefault(),t.select(n)}),this.refresh()},refresh:function(){var t=this,n=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");n.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(n){t.activate(n,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){this.deactivate();if(this.hasScroll()){var n=t.offset().top-this.element.offset().top,r=this.element.scrollTop(),i=this.element.height();n<0?this.element.scrollTop(r+n):n>=i&&this.element.scrollTop(r+n-i+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,n){if(!this.active){this.activate(n,this.element.children(t));return}var r=this.active[e+"All"](".ui-menu-item").eq(0);r.length?this.activate(n,r):this.activate(n,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last()){this.activate(t,this.element.children(".ui-menu-item:first"));return}var n=this.active.offset().top,r=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n-r+e(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:last")),this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first()){this.activate(t,this.element.children(".ui-menu-item:last"));return}var n=this.active.offset().top,r=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n+r-e(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:first")),this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),
/*!
 * jQuery UI Autocomplete 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",f),typeof this.options.disabled!="boolean"?this.options.disabled=!!
this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c="ui-state-hover"+(a?"":" ui-state-active"),h="ui-state-focus";u.label===null&&(u.label=this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click.button",function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){t.buttonElement.addClass(h)}).bind("blur.button",function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change.button",function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown.button",function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup.button",function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,e(document).one("mouseup",function(){n=null})}).bind("mouseup.button",function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){if(u.disabled)return!1;(t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var n=this.element.is(":checked");n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",n)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments);if(t==="disabled"){n?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",n))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,n){t==="disabled"&&this.buttons.button("option",t,n),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}
(jQuery),
/*!
 * jQuery UI Button 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Button
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},s=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,r=t.options,i=r.title||"&#160;",s=e.ui.dialog.getTitleId(t.element),o=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(n+r.dialogClass).css({zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(e){t.moveToTop(!1,e)}),u=t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),a=(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o),f=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){f.addClass("ui-state-hover")},function(){f.removeClass("ui-state-hover")}).focus(function(){f.addClass("ui-state-focus")}).blur(function(){f.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(a),l=(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(f),c=e("<span></span>").addClass("ui-dialog-title").attr("id",s).html(i).prependTo(a);e.isFunction(r.beforeclose)&&!e.isFunction(r.beforeClose)&&(r.beforeClose=r.beforeclose),a.find("*").add(a).disableSelection(),r.draggable&&e.fn.draggable&&t._makeDraggable(),r.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(r.buttons),t._isOpen=!1,e.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!1===n._trigger("beforeClose",t))return;return n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n._isOpen=!1,n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",t)}):(n.uiDialog.hide(),n._trigger("close",t)),e.ui.dialog.overlay.resize(),n.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),n},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this,i=r.options,s;return i.modal&&!t||!i.stack&&!i.modal?r._trigger("focus",n):(i.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=i.zIndex),r.overlay&&(e.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},e.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",e.ui.dialog.maxZ),r.element.attr(s),r._trigger("focus",n),r)},open:function(){if(this._isOpen)return;var t=this,n=t.options,r=t.uiDialog;return t.overlay=n.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(n.position),r.show(n.show),t.moveToTop(!0),n.modal&&r.bind("keydown.ui-dialog",function(t){if(t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first"),i=n.filter(":last");if(t.target===i[0]&&!t.shiftKey)return r.focus(1),!1;if(t.target===r[0]&&t.shiftKey)return i.focus(1),!1}),e(t.element.find(":tabbable").get().concat(r.find(".ui-dialog-buttonpane :tabbable").get().concat(r.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t},_createButtons:function(t){var n=this,r=!1,i=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(i);n.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r&&(e.each(t,function(t,r){r=e.isFunction(r)?{click:r,text:t}:r;var i=e('<button type="button"></button>').click(function(){r.click.apply(n.element[0],arguments)}).appendTo(o);e.each(r,function(e,t){if(e==="click")return;e in s?i[e](t):i.attr(e,t)}),e.fn.button&&i.button()}),i.appendTo(n.uiDialog))},_makeDraggable:function(){function s(e){return{position:e.position,offset:e.offset}}var t=this,n=t.options,r=e(document),i;t.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(r,o){i=n.height==="auto"?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),t._trigger("dragStart",r,s(o))},drag:function(e,n){t._trigger("drag",e,s(n))},stop:function(o,u){n.position=[u.position.left-r.scrollLeft(),u.position.top-r.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),t._trigger("dragStop",o,s(u)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function u(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var r=this,i=r.options,s=r.uiDialog.css("position"),o=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";r.uiDialog.resizable({cancel:".ui-dialog-content"
,containment:"document",alsoResize:r.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:r._minHeight(),handles:o,start:function(t,n){e(this).addClass("ui-dialog-resizing"),r._trigger("resizeStart",t,u(n))},resize:function(e,t){r._trigger("resize",e,u(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),i.height=e(this).height(),i.width=e(this).width(),r._trigger("resizeStop",t,u(n)),e.ui.dialog.overlay.resize()}}).css("position",s).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i=this,s=i.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":i._createButtons(r);break;case"closeText":i.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":s.removeClass(i.options.dialogClass).addClass(n+r);break;case"disabled":r?s.addClass("ui-dialog-disabled"):s.removeClass("ui-dialog-disabled");break;case"draggable":var o=s.is(":data(draggable)");o&&!r&&s.draggable("destroy"),!o&&r&&i._makeDraggable();break;case"position":i._position(r);break;case"resizable":var u=s.is(":data(resizable)");u&&!r&&s.resizable("destroy"),u&&typeof r=="string"&&s.resizable("option","handles",r),!u&&r!==!1&&i._makeResizable(r);break;case"title":e(".ui-dialog-title",i.uiDialogTitlebar).html(""+(r||"&#160;"))}e.Widget.prototype._setOption.apply(i,arguments)},_size:function(){var t=this.options,n,r,i=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),t.minWidth>t.width&&(t.width=t.minWidth),n=this.uiDialog.css({height:"auto",width:t.width}).height(),r=Math.max(0,t.minHeight-n);if(t.height==="auto")if(e.support.minHeight)this.element.css({minHeight:r,height:"auto"});else{this.uiDialog.show();var s=this.element.css("height","auto").height();i||this.uiDialog.hide(),this.element.height(Math.max(s,r))}else this.element.height(Math.max(t.height-n,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.21",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances);n!=-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.remove();var r=0;e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),
/*!
 * jQuery UI Dialog 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,rtl:!1,step:1,value:0,values:null},_create:function(){var t=this,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+(r.rtl?" ui-slider-rtl":"")+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&
r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(var a=i.length;a<o;a+=1)u.push(s);this.handles=i.add(e(u.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){r.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(r){var i=e(this).data("index.ui-slider-handle"),s,o,u,a;if(t.options.disabled)return;switch(r.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:r.preventDefault();if(!t._keySliding){t._keySliding=!0,e(this).addClass("ui-state-active"),s=t._start(r,i);if(s===!1)return}}a=t.options.step,t.options.values&&t.options.values.length?o=u=t.values(i):o=u=t.value();switch(r.keyCode){case e.ui.keyCode.HOME:u=t._valueMin();break;case e.ui.keyCode.END:u=t._valueMax();break;case e.ui.keyCode.PAGE_UP:u=t._trimAlignValue(o+(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:u=t._trimAlignValue(o-(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===t._valueMax())return;u=t._trimAlignValue(o+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===t._valueMin())return;u=t._trimAlignValue(o-a)}t._slide(r,i,u)}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,r),t._change(n,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical"+(o.rtl?" ui-slider-rtl":"")+" ui-slider-disabled"+" ui-widget"+" ui-widget-content"+" ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u,a,f,l,c;return n.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,u=this,this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),a=t)}),n.range===!0&&this.values(1)===n.min&&(a+=1,o=e(this.handles[a])),f=this._start(t,a),f===!1?!1:(this._mouseSliding=!0,u._handleIndex=a,o.addClass("ui-state-active").focus(),l=o.offset(),c=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-o.width()/2,top:t.pageY-l.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,i),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),this.options.rtl&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(
t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"rtl":this.element.toggleClass("ui-slider-rtl",n),this._refreshValue();break;case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=this._animateOff?!1:n.animate,s,o={},u,a,f,l;this.options.values&&this.options.values.length?this.handles.each(function(t,a){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,s=r.options.rtl?100-s:s,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",e(this).stop(1,1)[i?"animate":"css"](o,n.animate),r.options.range===!0&&(r.orientation==="horizontal"?(t===0&&r.range.stop(1,1)[i?"animate":"css"](r.options.rtl?{right:100-s+"%"}:{left:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({width:(r.options.rtl?-1:1)*(s-u)+"%"},{queue:!1,duration:n.animate})):(t===0&&r.range.stop(1,1)[i?"animate":"css"](r.options.rtl?{top:100-s+"%"}:{bottom:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({height:(r.options.rtl?-1:1)*(s-u)+"%"},{queue:!1,duration:n.animate}))),u=s}):(a=this.value(),f=this._valueMin(),l=this._valueMax(),s=l!==f?(a-f)/(l-f)*100:0,s=r.options.rtl?100-s:s,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",this.handle.stop(1,1)[i?"animate":"css"](o,n.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[i?"animate":"css"]({width:(r.options.rtl?100-s:s)+"%"},n.animate),t==="max"&&this.orientation==="horizontal"&&this.range[i?"animate":"css"]({width:(r.options.rtl?s:100-s)+"%"},{queue:!1,duration:n.animate}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[i?"animate":"css"]({height:(r.options.rtl?100-s:s)+"%"},n.animate),t==="max"&&this.orientation==="vertical"&&this.range[i?"animate":"css"]({height:(r.options.rtl?s:100-s)+"%"},{queue:!1,duration:n.animate}))}}),e.extend(e.ui.slider,{version:"1.8.21"})}(jQuery),
/*!
 * jQuery UI Slider 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){function i(){return++n}function s(){return++r}var n=0,r=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if(e=="selected"){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+i()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+s());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(n){function h(t,n){t.css("display",""),!e.support.opacity&&n.opacity&&t[0].style.removeAttribute("filter")}var r=this,i=this.options,s=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,n){var o=e(n).attr("href"),u=o.split("#")[0],a;u&&(u===location.toString().split("#")[0]||(a=e("base")[0])&&u===a.href)&&(o=n.hash,n.href=o);if(s.test(o))r.panels=r.panels.add(r.element.find(r._sanitizeSelector(o)));else if(o&&o!=="#"){e.data(n,"href.tabs",o),e.data(n,"load.tabs",o.replace(/#.*$/,""));var f=r._tabId(n);n.href="#"+f;var l=r.element.find("#"+f);l.length||(l=e(i.panelTemplate).attr("id",f).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(r.panels[t-1]||r.list),l.data("destroy.tabs",!0)),r.panels=r.panels.add(l)}else i.disabled.push(t)}),n?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),i.selected===t?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return i.selected=e,!1}),typeof i.selected!="number"&&i.cookie&&(i.selected=parseInt(r._cookie(),10)),typeof i.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(i.selected=this.lis.index(this.lis.filter
(".ui-tabs-selected"))),i.selected=i.selected||(this.lis.length?0:-1)):i.selected===null&&(i.selected=-1),i.selected=i.selected>=0&&this.anchors[i.selected]||i.selected<0?i.selected:0,i.disabled=e.unique(i.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return r.lis.index(e)}))).sort(),e.inArray(i.selected,i.disabled)!=-1&&i.disabled.splice(e.inArray(i.selected,i.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),i.selected>=0&&this.anchors.length&&(r.element.find(r._sanitizeSelector(r.anchors[i.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(i.selected).addClass("ui-tabs-selected ui-state-active"),r.element.queue("tabs",function(){r._trigger("show",null,r._ui(r.anchors[i.selected],r.element.find(r._sanitizeSelector(r.anchors[i.selected].hash))[0]))}),this.load(i.selected)),e(window).bind("unload",function(){r.lis.add(r.anchors).unbind(".tabs"),r.lis=r.anchors=r.panels=null})):i.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[i.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),i.cookie&&this._cookie(i.selected,i.cookie);for(var o=0,u;u=this.lis[o];o++)e(u)[e.inArray(o,i.disabled)!=-1&&!e(u).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");i.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(i.event!=="mouseover"){var a=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},f=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){a("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){f("hover",e(this))}),this.anchors.bind("focus.tabs",function(){a("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){f("focus",e(this).closest("li"))})}var l,c;i.fx&&(e.isArray(i.fx)?(l=i.fx[0],c=i.fx[1]):l=c=i.fx);var p=c?function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.hide().removeClass("ui-tabs-hide").animate(c,c.duration||"normal",function(){h(n,c),r._trigger("show",null,r._ui(t,n[0]))})}:function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.removeClass("ui-tabs-hide"),r._trigger("show",null,r._ui(t,n[0]))},d=l?function(e,t){t.animate(l,l.duration||"normal",function(){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),h(t,l),r.element.dequeue("tabs")})}:function(e,t,n){r.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),r.element.dequeue("tabs")};this.anchors.bind(i.event+".tabs",function(){var t=this,n=e(t).closest("li"),s=r.panels.filter(":not(.ui-tabs-hide)"),o=r.element.find(r._sanitizeSelector(t.hash));if(n.hasClass("ui-tabs-selected")&&!i.collapsible||n.hasClass("ui-state-disabled")||n.hasClass("ui-state-processing")||r.panels.filter(":animated").length||r._trigger("select",null,r._ui(this,o[0]))===!1)return this.blur(),!1;i.selected=r.anchors.index(this),r.abort();if(i.collapsible){if(n.hasClass("ui-tabs-selected"))return i.selected=-1,i.cookie&&r._cookie(i.selected,i.cookie),r.element.queue("tabs",function(){d(t,s)}).dequeue("tabs"),this.blur(),!1;if(!s.length)return i.cookie&&r._cookie(i.selected,i.cookie),r.element.queue("tabs",function(){p(t,o)}),r.load(r.anchors.index(this)),this.blur(),!1}i.cookie&&r._cookie(i.selected,i.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";s.length&&r.element.queue("tabs",function(){d(t,s)}),r.element.queue("tabs",function(){p(t,o)}),r.load(r.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var n=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){n.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(n,r,i){i===t&&(i=this.anchors.length);var s=this,o=this.options,u=e(o.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,r)),a=n.indexOf("#")?this._tabId(e("a",u)[0]):n.replace("#","");u.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var f=s.element.find("#"+a);return f.length||(f=e(o.panelTemplate).attr("id",a).data("destroy.tabs",!0)),f.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),i>=this.lis.length?(u.appendTo(this.list),f.appendTo(this.list[0].parentNode)):(u.insertBefore(this.lis[i]),f.insertBefore(this.panels[i])),o.disabled=e.map(o.disabled,function(e,t){return e>=i?++e:e}),this._tabify(),this.anchors.length==1&&(o.selected=0,u.addClass("ui-tabs-selected ui-state-active"),f.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){s._trigger("show",null,s._ui(s.anchors[0],s.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.lis.eq(t).remove(),i=this.panels.eq(t).remove();return r.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e,n){return e!=t}),function(e,n){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this},enable:function(
t){t=this._getIndex(t);var n=this.options;if(e.inArray(t,n.disabled)==-1)return;return this.lis.eq(t).removeClass("ui-state-disabled"),n.disabled=e.grep(n.disabled,function(e,n){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this,n=this.options;return e!=n.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),n.disabled.push(e),n.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){e=this._getIndex(e);if(e==-1){if(!this.options.collapsible||this.options.selected==-1)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var n=this,r=this.options,i=this.anchors.eq(t)[0],s=e.data(i,"load.tabs");this.abort();if(!s||this.element.queue("tabs").length!==0&&e.data(i,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");if(r.spinner){var o=e("span",i);o.data("label.tabs",o.html()).html(r.spinner)}return this.xhr=e.ajax(e.extend({},r.ajaxOptions,{url:s,success:function(s,o){n.element.find(n._sanitizeSelector(i.hash)).html(s),n._cleanup(),r.cache&&e.data(i,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.success(s,o)}catch(u){}},error:function(e,s,o){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.error(e,s,t,i)}catch(o){}}})),n.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.21"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,t){var n=this,r=this.options,i=n._rotate||(n._rotate=function(t){clearTimeout(n.rotation),n.rotation=setTimeout(function(){var e=r.selected;n.select(++e<n.anchors.length?e:0)},e),t&&t.stopPropagation()}),s=n._unrotate||(n._unrotate=t?function(e){i()}:function(e){e.clientX&&n.rotate(null)});return e?(this.element.bind("tabsshow",i),this.anchors.bind(r.event+".tabs",s),i()):(clearTimeout(n.rotation),this.element.unbind("tabsshow",i),this.anchors.unbind(r.event+".tabs",s),delete this._rotate,delete this._unrotate),this}})}(jQuery),
/*!
 * jQuery UI Tabs 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Tabs
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,n){t==="value"&&(this.options.value=n,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.21"})}(jQuery),
/*!
 * jQuery UI Progressbar 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Progressbar
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */
jQuery.effects||function(e,t){function n(t){var n;return t&&t.constructor==Array&&t.length==3?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?i.transparent:i[e.trim(t).toLowerCase()]}function r(t,r){var i;do{i=e.curCSS(t,r);if(i!=""&&i!="transparent"||e.nodeName(t,"body"))break;r="backgroundColor"}while(t=t.parentNode);return n(i)}function u(){var e=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,t={},n,r;if(e&&e.length&&e[0]&&e[e[0]]){var i=e.length;while(i--)n=e[i],typeof e[n]=="string"&&(r=n.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),t[r]=e[n])}else for(n in e)typeof e[n]=="string"&&(t[n]=e[n]);return t}function a(t){var n,r;for(n in t)r=t[n],(r==null||e.isFunction(r)||n in o||/scrollbar/.test(n)||!/color/i.test(n)&&isNaN(parseFloat(r)))&&delete t[n];return t}function f(e,t){var n={_:0},r;for(r in t)e[r]!=t[r]&&(n[r]=t[r]);return n}function l(t,n,r,i){typeof t=="object"&&(i=n,r=null,n=t,t=n.effect),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n=n||{},r=r||n.duration,r=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,i=i||n.complete,[t,n,r,i]}function c(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects[t]?!0:!1}e.effects={}
,e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,i){e.fx.step[i]=function(e){e.colorInit||(e.start=r(e.elem,i),e.end=n(e.end),e.colorInit=!0),e.elem.style[i]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},s=["add","remove","toggle"],o={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,n,r,i){return e.isFunction(r)&&(i=r,r=null),this.queue(function(){var o=e(this),l=o.attr("style")||" ",c=a(u.call(this)),h,p=o.attr("class")||"";e.each(s,function(e,n){t[n]&&o[n+"Class"](t[n])}),h=a(u.call(this)),o.attr("class",p),o.animate(f(c,h),{queue:!1,duration:n,easing:r,complete:function(){e.each(s,function(e,n){t[n]&&o[n+"Class"](t[n])}),typeof o.attr("style")=="object"?(o.attr("style").cssText="",o.attr("style").cssText=l):o.attr("style",l),i&&i.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{add:t},n,r,i]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{remove:t},n,r,i]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.apply(this,[r?{add:n}:{remove:n},i,s,o]):this._toggleClass(n,r):e.effects.animateClass.apply(this,[{toggle:n},r,i,s])},switchClass:function(t,n,r,i,s){return e.effects.animateClass.apply(this,[{add:n,remove:t},r,i,s])}}),e.extend(e.effects,{version:"1.8.21",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return t=="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i=document.activeElement;try{i.id}catch(s){i=document.body}return t.wrap(r),(t[0]===i||e.contains(t[0],i))&&e(i).focus(),r=t.parent(),t.css("position")=="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),r.css(n).show()},removeWrapper:function(t){var n,r=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(n=t.parent().replaceWith(t),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n):t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(t,n,r,i){var s=l.apply(this,arguments),o={options:s[1],duration:s[2],callback:s[3]},u=o.options.mode,a=e.effects[t];return e.fx.off||!a?u?this[u](o.duration,o.callback):this.each(function(){o.callback&&o.callback.call(this)}):a.call(this,o)},_show:e.fn.show,show:function(e){if(c(e))return this._show.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(c(e))return this._hide.apply(this,arguments);var t=l.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(c(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=l.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,s){return e.easing[e.easing.def](t,n,r,i,s)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(
e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),i*(n/=s)*n*((o+1)*n-o)+r},easeOutBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),i*((n=n/s-1)*n*((o+1)*n+o)+1)+r},easeInOutBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),(n/=s/2)<1?i/2*n*n*(((o*=1.525)+1)*n-o)+r:i/2*((n-=2)*n*(((o*=1.525)+1)*n+o)+2)+r},easeInBounce:function(t,n,r,i,s){return i-e.easing.easeOutBounce(t,s-n,0,i,s)+r},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,r,i,s){return n<s/2?e.easing.easeInBounce(t,n*2,0,i,s)*.5+r:e.easing.easeOutBounce(t,n*2-s,0,i,s)*.5+i*.5+r}})}(jQuery),
/*!
 * jQuery UI Effects 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/
 */
function(e,t){e.effects.blind=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var u=e.effects.createWrapper(n).css({overflow:"hidden"}),a=s=="vertical"?"height":"width",f=s=="vertical"?u.height():u.width();i=="show"&&u.css(a,0);var l={};l[a]=i=="show"?f:0,u.animate(l,t.duration,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),
/*!
 * jQuery UI Effects Blind 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Blind
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.bounce=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"up",u=t.options.distance||20,a=t.options.times||5,f=t.duration||250;/show|hide/.test(i)&&r.push("opacity"),e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",u=t.options.distance||(l=="top"?n.outerHeight({margin:!0})/3:n.outerWidth({margin:!0})/3);i=="show"&&n.css("opacity",0).css(l,c=="pos"?-u:u),i=="hide"&&(u/=a*2),i!="hide"&&a--;if(i=="show"){var h={opacity:1};h[l]=(c=="pos"?"+=":"-=")+u,n.animate(h,f/2,t.options.easing),u/=2,a--}for(var p=0;p<a;p++){var d={},v={};d[l]=(c=="pos"?"-=":"+=")+u,v[l]=(c=="pos"?"+=":"-=")+u,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing),u=i=="hide"?u*2:u/2}if(i=="hide"){var h={opacity:0};h[l]=(c=="pos"?"-=":"+=")+u,n.animate(h,f/2,t.options.easing,function(){n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}else{var d={},v={};d[l]=(c=="pos"?"-=":"+=")+u,v[l]=(c=="pos"?"+=":"-=")+u,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),
/*!
 * jQuery UI Effects Bounce 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Bounce
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.clip=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","height","width"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var u=e.effects.createWrapper(n).css({overflow:"hidden"}),a=n[0].tagName=="IMG"?u:n,f={size:s=="vertical"?"height":"width",position:s=="vertical"?"top":"left"},l=s=="vertical"?a.height():a.width();i=="show"&&(a.css(f.size,0),a.css(f.position,l/2));var c={};c[f.size]=i=="show"?l:0,c[f.position]=i=="show"?0:l/2,a.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()}})})}}(jQuery),
/*!
 * jQuery UI Effects Clip 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Clip
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.drop=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","opacity"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var u=s=="up"||s=="down"?"top":"left",a=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(u=="top"?n.outerHeight({margin:!0})/2:n.outerWidth({margin:!0})/2);i=="show"&&n.css("opacity"
,0).css(u,a=="pos"?-f:f);var l={opacity:i=="show"?1:0};l[u]=(i=="show"?a=="pos"?"+=":"-=":a=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),
/*!
 * jQuery UI Effects Drop 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Drop
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.explode=function(t){return this.queue(function(){var n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,r=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode=t.options.mode=="toggle"?e(this).is(":visible")?"hide":"show":t.options.mode;var i=e(this).show().css("visibility","hidden"),s=i.offset();s.top-=parseInt(i.css("marginTop"),10)||0,s.left-=parseInt(i.css("marginLeft"),10)||0;var u=i.outerWidth(!0),a=i.outerHeight(!0);for(var f=0;f<n;f++)for(var l=0;l<r;l++)i.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-l*(u/r),top:-f*(a/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:u/r,height:a/n,left:s.left+l*(u/r)+(t.options.mode=="show"?(l-Math.floor(r/2))*(u/r):0),top:s.top+f*(a/n)+(t.options.mode=="show"?(f-Math.floor(n/2))*(a/n):0),opacity:t.options.mode=="show"?0:1}).animate({left:s.left+l*(u/r)+(t.options.mode=="show"?0:(l-Math.floor(r/2))*(u/r)),top:s.top+f*(a/n)+(t.options.mode=="show"?0:(f-Math.floor(n/2))*(a/n)),opacity:t.options.mode=="show"?1:0},t.duration||500);setTimeout(function(){t.options.mode=="show"?i.css({visibility:"visible"}):i.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(i[0]),i.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),
/*!
 * jQuery UI Effects Explode 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Explode
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.fade=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"hide");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),
/*!
 * jQuery UI Effects Fade 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fade
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.fold=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.size||15,u=!!t.options.horizFirst,a=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(n,r),n.show();var f=e.effects.createWrapper(n).css({overflow:"hidden"}),l=i=="show"!=u,c=l?["width","height"]:["height","width"],h=l?[f.width(),f.height()]:[f.height(),f.width()],p=/([0-9]+)%/.exec(s);p&&(s=parseInt(p[1],10)/100*h[i=="hide"?0:1]),i=="show"&&f.css(u?{height:0,width:s}:{height:s,width:0});var d={},v={};d[c[0]]=i=="show"?h[0]:s,v[c[1]]=i=="show"?h[1]:0,f.animate(d,a,t.options.easing).animate(v,a,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),
/*!
 * jQuery UI Effects Fold 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fold
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.highlight=function(t){return this.queue(function(){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],i=e.effects.setMode(n,t.options.mode||"show"),s={backgroundColor:n.css("backgroundColor")};i=="hide"&&(s.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),i=="show"&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),
/*!
 * jQuery UI Effects Highlight 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Highlight
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.pulsate=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"show"),i=(t.options.times||5)*2-1,s=t.duration?t.duration/2:e.fx.speeds._default/2,u=n.is(":visible"),a=0;u||(n.css("opacity",0).show(),a=1),(r=="hide"&&u||r=="show"&&!u)&&i--;for(var f=0;f<i;f++)n.animate({opacity:a},s,t.options.easing),a=(a+1)%2;n.animate({opacity:a},s,t.options.easing,function(){a==0&&n.hide(),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}).dequeue()})}}(jQuery),
/*!
 * jQuery UI Effects Pulsate 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Pulsate
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.puff=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"hide"),i=parseInt(t.options.percent,10)||150,s=i/100,u={height:n.height(),width:n.width()};e.extend(t.options,{fade:!0,mode:r,percent:r=="hide"?i:100,from:r=="hide"?u:{height:u.height*s,width:u.width*s}}),n.effect("scale",t.options,t.duration,t.callback),n.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var n=e(this),r=e.extend(!0,{},t.options),i=e.effects.setMode(n,t.options.mode||"effect"),s=parseInt(t.options.percent,10)||(parseInt(t.options.percent,10)==0?0:i=="hide"?0:100),u=t.options.direction||"both",a=t.options.origin;i!="effect"&&(r.origin=a||["middle","center"],r.restore=!0);var f={height:n.height(),width:n.width()};n.from=t.options.from||(i=="show"?{height:0,width:0}:f);var l={y:u!="horizontal"?s/100:1,x:u!="vertical"?s/100:1};n.to={height:f.height*l.y,width:f.width*l.x},t.options.fade&&(i=="show"&&(n.from.opacity=0,n.to.opacity=1),i=="hide"&&(n.from.opacity=1,n.to.opacity=0)),r.from=n.from,r.to=n.to,r.mode=i,n.effect("size",r,t.duration,t.callback),n.dequeue()})},e.effects.size=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],s=["width","height","overflow"],u=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.effects.setMode(n,t.options.mode||"effect"),c=t.options.restore||!1,h=t.options.scale||"both",p=t.options.origin,d={height:n.height(),width:n.width()};n.from=t.options.from||d,n.to=t.options.to||d;if(p){var v=
e.effects.getBaseline(p,d);n.from.top=(d.height-n.from.height)*v.y,n.from.left=(d.width-n.from.width)*v.x,n.to.top=(d.height-n.to.height)*v.y,n.to.left=(d.width-n.to.width)*v.x}var m={from:{y:n.from.height/d.height,x:n.from.width/d.width},to:{y:n.to.height/d.height,x:n.to.width/d.width}};if(h=="box"||h=="both")m.from.y!=m.to.y&&(r=r.concat(a),n.from=e.effects.setTransition(n,a,m.from.y,n.from),n.to=e.effects.setTransition(n,a,m.to.y,n.to)),m.from.x!=m.to.x&&(r=r.concat(f),n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to));(h=="content"||h=="both")&&m.from.y!=m.to.y&&(r=r.concat(u),n.from=e.effects.setTransition(n,u,m.from.y,n.from),n.to=e.effects.setTransition(n,u,m.to.y,n.to)),e.effects.save(n,c?r:i),n.show(),e.effects.createWrapper(n),n.css("overflow","hidden").css(n.from);if(h=="content"||h=="both")a=a.concat(["marginTop","marginBottom"]).concat(u),f=f.concat(["marginLeft","marginRight"]),s=r.concat(a).concat(f),n.find("*[width]").each(function(){var n=e(this);c&&e.effects.save(n,s);var r={height:n.height(),width:n.width()};n.from={height:r.height*m.from.y,width:r.width*m.from.x},n.to={height:r.height*m.to.y,width:r.width*m.to.x},m.from.y!=m.to.y&&(n.from=e.effects.setTransition(n,a,m.from.y,n.from),n.to=e.effects.setTransition(n,a,m.to.y,n.to)),m.from.x!=m.to.x&&(n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.options.easing,function(){c&&e.effects.restore(n,s)})});n.animate(n.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){n.to.opacity===0&&n.css("opacity",n.from.opacity),l=="hide"&&n.hide(),e.effects.restore(n,c?r:i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),
/*!
 * jQuery UI Effects Scale 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Scale
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.shake=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"left",u=t.options.distance||20,a=t.options.times||3,f=t.duration||t.options.duration||140;e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",h={},p={},d={};h[l]=(c=="pos"?"-=":"+=")+u,p[l]=(c=="pos"?"+=":"-=")+u*2,d[l]=(c=="pos"?"-=":"+=")+u*2,n.animate(h,f,t.options.easing);for(var v=1;v<a;v++)n.animate(p,f,t.options.easing).animate(d,f,t.options.easing);n.animate(p,f,t.options.easing).animate(h,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),
/*!
 * jQuery UI Effects Shake 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Shake
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.slide=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"show"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n).css({overflow:"hidden"});var u=s=="up"||s=="down"?"top":"left",a=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(u=="top"?n.outerHeight({margin:!0}):n.outerWidth({margin:!0}));i=="show"&&n.css(u,a=="pos"?isNaN(f)?"-"+f:-f:f);var l={};l[u]=(i=="show"?a=="pos"?"+=":"-=":a=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),
/*!
 * jQuery UI Effects Slide 1.8.21
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Slide
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.transfer=function(t){return this.queue(function(){var n=e(this),r=e(t.options.to),i=r.offset(),s={top:i.top,left:i.left,height:r.innerHeight(),width:r.innerWidth()},u=n.offset(),a=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:u.top,left:u.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(s,t.duration,t.options.easing,function(){a.remove(),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery);
/*!
 * Copyright (c) 2011 Matteo Spinelli, http://cubiq.org/
 * 
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without
 * restriction, including without limitation the rights to use,
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following
 * conditions:
 * 
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
 * OTHER DEALINGS IN THE SOFTWARE.
 */
(function(){var a=Math,b=function(a){return a>>0},c=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",d=/android/gi.test(navigator.appVersion),e=/iphone|ipad/gi.test(navigator.appVersion),f=/playbook/gi.test(navigator.appVersion),g=/hp-tablet/gi.test(navigator.appVersion),h="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,i="ontouchstart"in window&&!g,j=c+"Transform"in document.documentElement.style,k=e||f,l=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,17)}}(),m=function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),n="onorientationchange"in window?"orientationchange":"resize",o=i?"touchstart":"mousedown",p=i?"touchmove":"mousemove",q=i?"touchend":"mouseup",r=i?"touchcancel":"mouseup",s="translate"+(h?"3d(":"("),t=h?",0)":")",u=function(a,b){var d=this,e=document,f;d.wrapper=typeof a=="object"?a:e.getElementById(a);d.wrapper.style.overflow="hidden";d.scroller=d.wrapper.children[0];d.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,onRefresh:null,onBeforeScrollStart:null,onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(f in b)d.options[f]=b[f];d.x=d.options.x;d.y=d.options.y;d.options.useTransform=j?d.options.useTransform:false;d.options.hScrollbar=d.options.hScroll&&d.options.hScrollbar;d.options.vScrollbar=d.options.vScroll&&d.options.vScrollbar;d.options.useTransition=k&&d.options.useTransition;d.scroller.style[c+"TransitionProperty"]=d.options.useTransform?"-"+c.toLowerCase()+"-transform":"top left";d.scroller.style[c+"TransitionDuration"]="0";d.scroller.style[c+"TransformOrigin"]="0 0";if(d.options.useTransition)d.scroller.style[c+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)";if(d.options.useTransform)d.scroller.style[c+"Transform"]=s+d.x+"px,"+d.y+"px"+t;else d.scroller.style.cssText+=";position:absolute;top:"+d.y+"px;left:"+d.x+"px";d.refresh();d._bind(n,window);d._bind(o);if(!i)d._bind("mouseout",d.wrapper)};u.prototype={enabled:true,x:0,y:0,steps:[],scale:1,handleEvent:function(a){var b=this;switch(a.type){case o:if(!i&&a.button!==0)return;b._start(a);break;case p:b._move(a);break;case q:case r:b._end(a);break;case n:b._resize();break;case"mouseout":b._mouseout(a);break;case"webkitTransitionEnd":b._transitionEnd(a);break}},_resize:function(){this.refresh()},_pos:function(a,d){a=this.hScroll?a:0;d=this.vScroll?d:0;if(this.options.useTransform){this.scroller.style[c+"Transform"]=s+a+"px,"+d+"px"+t+" scale("+this.scale+")"}else{a=b(a);d=b(d);this.scroller.style.left=a+"px";this.scroller.style.top=d+"px"}this.x=a;this.y=d},_start:function(a){var b=this,d=i?a.touches[0]:a,e,f,g;if(!b.enabled)return;if(b.options.onBeforeScrollStart)b.options.onBeforeScrollStart.call(b,a);if(b.options.useTransition)b._transitionTime(0);b.moved=false;b.animating=false;b.zoomed=false;b.distX=0;b.distY=0;b.absDistX=0;b.absDistY=0;b.dirX=0;b.dirY=0;if(b.options.momentum){if(b.options.useTransform){e=getComputedStyle(b.scroller,null)[c+"Transform"].replace(/[^0-9-.,]/g,"").split(",");f=e[4]*1;g=e[5]*1}else{f=getComputedStyle(b.scroller,null).left.replace(/[^0-9-]/g,"")*1;g=getComputedStyle(b.scroller,null).top.replace(/[^0-9-]/g,"")*1}if(f!=b.x||g!=b.y){if(b.options.useTransition)b._unbind("webkitTransitionEnd");else m(b.aniTime);b.steps=[];b._pos(f,g)}}b.startX=b.x;b.startY=b.y;b.pointX=d.pageX;b.pointY=d.pageY;b.startTime=a.timeStamp||Date.now();if(b.options.onScrollStart)b.options.onScrollStart.call(b,a);b._bind(p);b._bind(q);b._bind(r)},_move:function(b){var c=this,d=i?b.touches[0]:b,e=d.pageX-c.pointX,f=d.pageY-c.pointY,g=c.x+e,h=c.y+f,j=b.timeStamp||Date.now();if(c.options.onBeforeScrollMove)c.options.onBeforeScrollMove.call(c,b);c.pointX=d.pageX;c.pointY=d.pageY;if(g>0||g<c.maxScrollX){g=c.options.bounce?c.x+e/2:g>=0||c.maxScrollX>=0?0:c.maxScrollX}if(h>0||h<c.maxScrollY){h=c.options.bounce?c.y+f/2:h>=0||c.maxScrollY>=0?0:c.maxScrollY}c.distX+=e;c.distY+=f;c.absDistX=a.abs(c.distX);c.absDistY=a.abs(c.distY);if(c.absDistX<6&&c.absDistY<6){return}if(c.options.lockDirection){if(c.absDistX>c.absDistY+5){h=c.y;f=0}else if(c.absDistY>c.absDistX+5){g=c.x;e=0}}c.moved=true;c._pos(g,h);c.dirX=e>0?-1:e<0?1:0;c.dirY=f>0?-1:f<0?1:0;if(j-c.startTime>300){c.startTime=j;c.startX=c.x;c.startY=c.y}if(c.options.onScrollMove)c.options.onScrollMove.call(c,b)},_end:function(c){if(i&&c.touches.length!=0)return;var d=this,e=i?c.changedTouches[0]:c,f,g,h={dist:0,time:0},j={dist:0,time:0},k=(c.timeStamp||Date.now())-d.startTime,l=d.x,m=d.y,n;d._unbind(p);d._unbind(q);d._unbind(r);if(d.options.onBeforeScrollEnd)d.options.onBeforeScrollEnd.call(d,c);if(!d.moved){if(i){f=e.target;while(f.nodeType!=1)f=f.parentNode;if(f.tagName!="SELECT"&&f.tagName!="INPUT"&&f.tagName!="TEXTAREA"){g=document.createEvent("MouseEvents");g.initMouseEvent("click",true,true,c.view,1,e.screenX,e.screenY,e.clientX,e.clientY,c.ctrlKey,c.altKey,c.shiftKey,c.metaKey,0,null);g._fake=true;f.dispatchEvent(g)}}d._resetPos(200);if(d.options.onTouchEnd)d.options.onTouchEnd.call(d,c);return}if(k<300&&d.options.momentum){h=l?d._momentum(l-d.startX,k,-d.x,d.scrollerW-d.wrapperW+d.x,d.options.bounce?d.wrapperW:0):h;j=m?d._momentum(m-d.startY,k,-d.y,d.maxScrollY<0?d.scrollerH-d.wrapperH+d.y:0,d.options.bounce?d.wrapperH:0):j;l=d.x+h.dist;m=d.y+j.dist;if(d.x>0&&l>0||d.x<d.maxScrollX&&l<d.maxScrollX)h={dist:0,time:0};if(d.y>0&&m>0||d.y<d.maxScrollY&&m<d.maxScrollY)j={dist:0,time:0}}if(h.dist||j.dist){n=a.max(a.max(h.time,j.time),10);d.scrollTo(b(l),b(m),n);if(d.options.onTouchEnd)d.options.onTouchEnd.call(d,c);return}d._resetPos(200);if(d.options.onTouchEnd)d.options.onTouchEnd.call(d,c)},_resetPos:function(a){var b=this,c=b.x>=0?0:b.x<b.maxScrollX?b.maxScrollX:b.x,d=b.y>=0||b.maxScrollY>0?0:b.y<b.maxScrollY?b.maxScrollY:b.y;if(c==b.x&&d==b.y){if(b.moved){if(b.options.onScrollEnd)b.options.onScrollEnd.call(b);b.moved=false}return}b.scrollTo(c,d,a||0)},_mouseout:function(a){var b=a.relatedTarget;if(!b){this._end(a);return}while(b=b.parentNode)if(b==this.wrapper)return;this._end(a)},_transitionEnd:function(a){var b=this;if(a.target!=b.scroller)return;b._unbind("webkitTransitionEnd");b._startAni()},_startAni:function(){var b=this,c=b.x,d=b.y,e=Date.now(),f,g,h;if(b.animating)return;if(!b.steps.length){b._resetPos(400);return}f=b.steps.shift();if(f.x==c&&f.y==d)f.time=0;b.animating=true;b.moved=true;if(b.options.useTransition){b._transitionTime(f.time);b._pos(f.x,f.y);b.animating=false;if(f.time)b._bind("webkitTransitionEnd");else b._resetPos(0);return}h=function(){var i=Date.now(),j,k;if(i>=e+f.time){b._pos(f.x,f.y);b.animating=false;if(b.options.onAnimationEnd)b.options.onAnimationEnd.call(b);b._startAni();return}i=(i-e)/f.time-1;g=a.sqrt(1-i*i);j=(f.x-c)*g+c;k=(f.y-d)*g+d;b._pos(j,k);if(b.animating)b.aniTime=l(h)};h()},_transitionTime:function(a){this.scroller.style[c+"TransitionDuration"]=a+"ms"},_momentum:function(c,d,e,f,g){var h=6e-4,i=a.abs(c)/d,j=i*i/(2*h),k=0,l=0;if(c>0&&j>e){l=g/(6/(j/i*h));e=e+l;i=i*e/j;j=e}else if(c<0&&j>f){l=g/(6/(j/i*h));f=f+l;i=i*f/j;j=f}j=j*(c<0?-1:1);k=i/h;return{dist:j,time:b(k)}},_offset:function(a){var b=-a.offsetLeft,c=-a.offsetTop;while(a=a.offsetParent){b-=a.offsetLeft;c-=a.offsetTop}return{left:b,top:c}},_bind:function(a,b,c){(b||this.scroller).addEventListener(a,this,!!c)},_unbind:function(a,b,c){(b||this.scroller).removeEventListener(a,this,!!c)},destroy:function(){var a=this;a.scroller.style[c+"Transform"]="";a._unbind(n,window);a._unbind(o);a._unbind(p);a._unbind(q);a._unbind(r);a._unbind("mouseout",a.wrapper);if(a.options.useTransition)a._unbind("webkitTransitionEnd");if(a.options.onDestroy)a.options.onDestroy.call(a)},refresh:function(){var a=this,b;a.wrapperW=a.wrapper.clientWidth;a.wrapperH=a.wrapper.clientHeight;a.scrollerW=a.scroller.offsetWidth;a.scrollerH=a.scroller.offsetHeight;a.maxScrollX=a.wrapperW-a.scrollerW;a.maxScrollY=a.wrapperH-a.scrollerH;a.dirX=0;a.dirY=0;a.hScroll=a.options.hScroll&&a.maxScrollX<0;a.vScroll=a.options.vScroll&&(!a.options.bounceLock&&!a.hScroll||a.scrollerH>a.wrapperH);b=a._offset(a.wrapper);a.wrapperOffsetLeft=-b.left;a.wrapperOffsetTop=-b.top;a.scroller.style[c+"TransitionDuration"]="0";a._resetPos(200)},scrollTo:function(a,b,c,d){var e=this,f=a,g,h;e.stop();if(!f.length)f=[{x:a,y:b,time:c,relative:d}];for(g=0,h=f.length;g<h;g++){if(f[g].relative){f[g].x=e.x-f[g].x;f[g].y=e.y-f[g].y}e.steps.push({x:f[g].x,y:f[g].y,time:f[g].time||0})}e._startAni()},scrollToElement:function(b,c){var d=this,e;b=b.nodeType?b:d.scroller.querySelector(b);if(!b)return;e=d._offset(b);e.left+=d.wrapperOffsetLeft;e.top+=d.wrapperOffsetTop;e.left=e.left>0?0:e.left<d.maxScrollX?d.maxScrollX:e.left;e.top=e.top>0?0:e.top<d.maxScrollY?d.maxScrollY:e.top;c=c===undefined?a.max(a.abs(e.left)*2,a.abs(e.top)*2):c;d.scrollTo(e.left,e.top,c)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(p);this._unbind(q);this._unbind(r)},enable:function(){this.enabled=true},stop:function(){m(this.aniTime);this.steps=[];this.moved=false;this.animating=false}};if(typeof exports!=="undefined")exports.iScroll=u;else window.iScroll=u})();
/*! Amazon elects to use this software under the MIT license. */
/*!
 * jScrollPane - v2.0.0beta11 - 2012-05-14
 * http://jscrollpane.kelvinluck.com/
 *
 * Copyright (c) 2010 Kelvin Luck
 * Dual licensed under the MIT and GPL licenses.
 */
(function(b,a,c){b.fn.jScrollPane=function(e){function d(D,O){var ay,Q=this,Y,aj,v,al,T,Z,y,q,az,aE,au,i,I,h,j,aa,U,ap,X,t,A,aq,af,am,G,l,at,ax,x,av,aH,f,L,ai=true,P=true,aG=false,k=false,ao=D.clone(false,false).empty(),ac=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";aH=D.css("paddingTop")+" "+D.css("paddingRight")+" "+D.css("paddingBottom")+" "+D.css("paddingLeft");f=(parseInt(D.css("paddingLeft"),10)||0)+(parseInt(D.css("paddingRight"),10)||0);function ar(aQ){var aL,aN,aM,aJ,aI,aP,aO=false,aK=false;ay=aQ;if(Y===c){aI=D.scrollTop();aP=D.scrollLeft();D.css({overflow:"hidden",padding:0});aj=D.innerWidth()+f;v=D.innerHeight();D.width(aj);Y=b('<div class="jspPane" />').css("padding",aH).append(D.children());al=b('<div class="jspContainer" />').css({width:aj+"px",height:v+"px"}).append(Y).appendTo(D)}else{D.css("width","");aO=ay.stickToBottom&&K();aK=ay.stickToRight&&B();aJ=D.innerWidth()+f!=aj||D.outerHeight()!=v;if(aJ){aj=D.innerWidth()+f;v=D.innerHeight();al.css({width:aj+"px",height:v+"px"})}if(!aJ&&L==T&&Y.outerHeight()==Z){D.width(aj);return}L=T;Y.css("width","");D.width(aj);al.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}Y.css("overflow","auto");if(aQ.contentWidth){T=aQ.contentWidth}else{T=Y[0].scrollWidth}Z=Y[0].scrollHeight;Y.css("overflow","");y=T/aj;q=Z/v;az=q>1;aE=y>1;if(!(aE||az)){D.removeClass("jspScrollable");Y.css({top:0,width:al.width()-f});n();E();R();w()}else{D.addClass("jspScrollable");aL=ay.maintainPosition&&(I||aa);if(aL){aN=aC();aM=aA()}aF();z();F();if(aL){N(aK?(T-aj):aN,false);M(aO?(Z-v):aM,false)}J();ag();an();if(ay.enableKeyboardNavigation){S()}if(ay.clickOnTrack){p()}C();if(ay.hijackInternalLinks){m()}}if(ay.autoReinitialise&&!av){av=setInterval(function(){ar(ay)},ay.autoReinitialiseDelay)}else{if(!ay.autoReinitialise&&av){clearInterval(av)}}aI&&D.scrollTop(0)&&M(aI,false);aP&&D.scrollLeft(0)&&N(aP,false);D.trigger("jsp-initialised",[aE||az])}function aF(){if(az){al.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />')));U=al.find(">.jspVerticalBar");ap=U.find(">.jspTrack");au=ap.find(">.jspDrag");if(ay.showArrows){aq=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",aD(0,-1)).bind("click.jsp",aB);af=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",aD(0,1)).bind("click.jsp",aB);if(ay.arrowScrollOnHover){aq.bind("mouseover.jsp",aD(0,-1,aq));af.bind("mouseover.jsp",aD(0,1,af))}ak(ap,ay.verticalArrowPositions,aq,af)}t=v;al.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){t-=b(this).outerHeight()});au.hover(function(){au.addClass("jspHover")},function(){au.removeClass("jspHover")}).bind("mousedown.jsp",function(aI){b("html").bind("dragstart.jsp selectstart.jsp",aB);au.addClass("jspActive");var s=aI.pageY-au.position().top;b("html").bind("mousemove.jsp",function(aJ){V(aJ.pageY-s,false)}).bind("mouseup.jsp mouseleave.jsp",aw);return false});o()}}function o(){ap.height(t+"px");I=0;X=ay.verticalGutter+ap.outerWidth();Y.width(aj-X-f);try{if(U.position().left===0){Y.css("margin-left",X+"px")}}catch(s){}}function z(){if(aE){al.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),b('<div class="jspCap jspCapRight" />')));am=al.find(">.jspHorizontalBar");G=am.find(">.jspTrack");h=G.find(">.jspDrag");if(ay.showArrows){ax=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",aD(-1,0)).bind("click.jsp",aB);x=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",aD(1,0)).bind("click.jsp",aB);if(ay.arrowScrollOnHover){ax.bind("mouseover.jsp",aD(-1,0,ax));x.bind("mouseover.jsp",aD(1,0,x))}ak(G,ay.horizontalArrowPositions,ax,x)}h.hover(function(){h.addClass("jspHover")},function(){h.removeClass("jspHover")}).bind("mousedown.jsp",function(aI){b("html").bind("dragstart.jsp selectstart.jsp",aB);h.addClass("jspActive");var s=aI.pageX-h.position().left;b("html").bind("mousemove.jsp",function(aJ){W(aJ.pageX-s,false)}).bind("mouseup.jsp mouseleave.jsp",aw);return false});l=al.innerWidth();ah()}}function ah(){al.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){l-=b(this).outerWidth()});G.width(l+"px");aa=0}function F(){if(aE&&az){var aI=G.outerHeight(),s=ap.outerWidth();t-=aI;b(am).find(">.jspCap:visible,>.jspArrow").each(function(){l+=b(this).outerWidth()});l-=s;v-=s;aj-=aI;G.parent().append(b('<div class="jspCorner" />').css("width",aI+"px"));o();ah()}if(aE){Y.width((al.outerWidth()-f)+"px")}Z=Y.outerHeight();q=Z/v;if(aE){at=Math.ceil(1/y*l);if(at>ay.horizontalDragMaxWidth){at=ay.horizontalDragMaxWidth}else{if(at<ay.horizontalDragMinWidth){at=ay.horizontalDragMinWidth}}h.width(at+"px");j=l-at;ae(aa)}if(az){A=Math.ceil(1/q*t);if(A>ay.verticalDragMaxHeight){A=ay.verticalDragMaxHeight}else{if(A<ay.verticalDragMinHeight){A=ay.verticalDragMinHeight}}au.height(A+"px");i=t-A;ad(I)}}function ak(aJ,aL,aI,s){var aN="before",aK="after",aM;if(aL=="os"){aL=/Mac/.test(navigator.platform)?"after":"split"}if(aL==aN){aK=aL}else{if(aL==aK){aN=aL;aM=aI;aI=s;s=aM}}aJ[aN](aI)[aK](s)}function aD(aI,s,aJ){return function(){H(aI,s,this,aJ);this.blur();return false}}function H(aL,aK,aO,aN){aO=b(aO).addClass("jspActive");var aM,aJ,aI=true,s=function(){if(aL!==0){Q.scrollByX(aL*ay.arrowButtonSpeed)}if(aK!==0){Q.scrollByY(aK*ay.arrowButtonSpeed)}aJ=setTimeout(s,aI?ay.initialDelay:ay.arrowRepeatFreq);aI=false};s();aM=aN?"mouseout.jsp":"mouseup.jsp";aN=aN||b("html");aN.bind(aM,function(){aO.removeClass("jspActive");aJ&&clearTimeout(aJ);aJ=null;aN.unbind(aM)})}function p(){w();if(az){ap.bind("mousedown.jsp",function(aN){if(aN.originalTarget===c||aN.originalTarget==aN.currentTarget){var aL=b(this),aO=aL.offset(),aM=aN.pageY-aO.top-I,aJ,aI=true,s=function(){var aR=aL.offset(),aS=aN.pageY-aR.top-A/2,aP=v*ay.scrollPagePercent,aQ=i*aP/(Z-v);if(aM<0){if(I-aQ>aS){Q.scrollByY(-aP)}else{V(aS)}}else{if(aM>0){if(I+aQ<aS){Q.scrollByY(aP)}else{V(aS)}}else{aK();return}}aJ=setTimeout(s,aI?ay.initialDelay:ay.trackClickRepeatFreq);aI=false},aK=function(){aJ&&clearTimeout(aJ);aJ=null;b(document).unbind("mouseup.jsp",aK)};s();b(document).bind("mouseup.jsp",aK);return false}})}if(aE){G.bind("mousedown.jsp",function(aN){if(aN.originalTarget===c||aN.originalTarget==aN.currentTarget){var aL=b(this),aO=aL.offset(),aM=aN.pageX-aO.left-aa,aJ,aI=true,s=function(){var aR=aL.offset(),aS=aN.pageX-aR.left-at/2,aP=aj*ay.scrollPagePercent,aQ=j*aP/(T-aj);if(aM<0){if(aa-aQ>aS){Q.scrollByX(-aP)}else{W(aS)}}else{if(aM>0){if(aa+aQ<aS){Q.scrollByX(aP)}else{W(aS)}}else{aK();return}}aJ=setTimeout(s,aI?ay.initialDelay:ay.trackClickRepeatFreq);aI=false},aK=function(){aJ&&clearTimeout(aJ);aJ=null;b(document).unbind("mouseup.jsp",aK)};s();b(document).bind("mouseup.jsp",aK);return false}})}}function w(){if(G){G.unbind("mousedown.jsp")}if(ap){ap.unbind("mousedown.jsp")}}function aw(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(au){au.removeClass("jspActive")}if(h){h.removeClass("jspActive")}}function V(s,aI){if(!az){return}if(s<0){s=0}else{if(s>i){s=i}}if(aI===c){aI=ay.animateScroll}if(aI){Q.animate(au,"top",s,ad)}else{au.css("top",s);ad(s)}}function ad(aI){if(aI===c){aI=au.position().top}al.scrollTop(0);I=aI;var aL=I===0,aJ=I==i,aK=aI/i,s=-aK*(Z-v);if(ai!=aL||aG!=aJ){ai=aL;aG=aJ;D.trigger("jsp-arrow-change",[ai,aG,P,k])}u(aL,aJ);Y.css("top",s);D.trigger("jsp-scroll-y",[-s,aL,aJ]).trigger("scroll")}function W(aI,s){if(!aE){return}if(aI<0){aI=0}else{if(aI>j){aI=j}}if(s===c){s=ay.animateScroll}if(s){Q.animate(h,"left",aI,ae)}else{h.css("left",aI);ae(aI)}}function ae(aI){if(aI===c){aI=h.position().left}al.scrollTop(0);aa=aI;var aL=aa===0,aK=aa==j,aJ=aI/j,s=-aJ*(T-aj);if(P!=aL||k!=aK){P=aL;k=aK;D.trigger("jsp-arrow-change",[ai,aG,P,k])}r(aL,aK);Y.css("left",s);D.trigger("jsp-scroll-x",[-s,aL,aK]).trigger("scroll")}function u(aI,s){if(ay.showArrows){aq[aI?"addClass":"removeClass"]("jspDisabled");af[s?"addClass":"removeClass"]("jspDisabled")}}function r(aI,s){if(ay.showArrows){ax[aI?"addClass":"removeClass"]("jspDisabled");x[s?"addClass":"removeClass"]("jspDisabled")}}function M(s,aI){var aJ=s/(Z-v);V(aJ*i,aI)}function N(aI,s){var aJ=aI/(T-aj);W(aJ*j,s)}function ab(aV,aQ,aJ){var aN,aK,aL,s=0,aU=0,aI,aP,aO,aS,aR,aT;try{aN=b(aV)}catch(aM){return}aK=aN.outerHeight();aL=aN.outerWidth();al.scrollTop(0);al.scrollLeft(0);while(!aN.is(".jspPane")){s+=aN.position().top;aU+=aN.position().left;aN=aN.offsetParent();if(/^body|html$/i.test(aN[0].nodeName)){return}}aI=aA();aO=aI+v;if(s<aI||aQ){aR=s-ay.verticalGutter}else{if(s+aK>aO){aR=s-v+aK+ay.verticalGutter}}if(aR){M(aR,aJ)}aP=aC();aS=aP+aj;if(aU<aP||aQ){aT=aU-ay.horizontalGutter}else{if(aU+aL>aS){aT=aU-aj+aL+ay.horizontalGutter}}if(aT){N(aT,aJ)}}function aC(){return -Y.position().left}function aA(){return -Y.position().top}function K(){var s=Z-v;return(s>20)&&(s-aA()<10)}function B(){var s=T-aj;return(s>20)&&(s-aC()<10)}function ag(){al.unbind(ac).bind(ac,function(aL,aM,aK,aI){var aJ=aa,s=I;Q.scrollBy(aK*ay.mouseWheelSpeed,-aI*ay.mouseWheelSpeed,false);return aJ==aa&&s==I})}function n(){al.unbind(ac)}function aB(){return false}function J(){Y.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(s){ab(s.target,false)})}function E(){Y.find(":input,a").unbind("focus.jsp")}function S(){var s,aI,aK=[];aE&&aK.push(am[0]);az&&aK.push(U[0]);Y.focus(function(){D.focus()});D.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(aN){if(aN.target!==this&&!(aK.length&&b(aN.target).closest(aK).length)){return}var aM=aa,aL=I;switch(aN.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=aN.keyCode;aJ();break;case 35:M(Z-v);s=null;break;case 36:M(0);s=null;break}aI=aN.keyCode==s&&aM!=aa||aL!=I;return !aI}).bind("keypress.jsp",function(aL){if(aL.keyCode==s){aJ()}return !aI});if(ay.hideFocus){D.css("outline","none");if("hideFocus" in al[0]){D.attr("hideFocus",true)}}else{D.css("outline","");if("hideFocus" in al[0]){D.attr("hideFocus",false)}}function aJ(){var aM=aa,aL=I;switch(s){case 40:Q.scrollByY(ay.keyboardSpeed,false);break;case 38:Q.scrollByY(-ay.keyboardSpeed,false);break;case 34:case 32:Q.scrollByY(v*ay.scrollPagePercent,false);break;case 33:Q.scrollByY(-v*ay.scrollPagePercent,false);break;case 39:Q.scrollByX(ay.keyboardSpeed,false);break;case 37:Q.scrollByX(-ay.keyboardSpeed,false);break}aI=aM!=aa||aL!=I;return aI}}function R(){D.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function C(){if(location.hash&&location.hash.length>1){var aK,aI,aJ=escape(location.hash.substr(1));try{aK=b("#"+aJ+', a[name="'+aJ+'"]')}catch(s){return}if(aK.length&&Y.find(aJ)){if(al.scrollTop()===0){aI=setInterval(function(){if(al.scrollTop()>0){ab(aK,true);b(document).scrollTop(al.position().top);clearInterval(aI)}},50)}else{ab(aK,true);b(document).scrollTop(al.position().top)}}}}function m(){if(b(document.body).data("jspHijack")){return}b(document.body).data("jspHijack",true);b(document.body).delegate("a[href*=#]","click",function(s){var aI=this.href.substr(0,this.href.indexOf("#")),aK=location.href,aO,aP,aJ,aM,aL,aN;if(location.href.indexOf("#")!==-1){aK=location.href.substr(0,location.href.indexOf("#"))}if(aI!==aK){return}aO=escape(this.href.substr(this.href.indexOf("#")+1));aP;try{aP=b("#"+aO+', a[name="'+aO+'"]')}catch(aQ){return}if(!aP.length){return}aJ=aP.closest(".jspScrollable");aM=aJ.data("jsp");aM.scrollToElement(aP,true);if(aJ[0].scrollIntoView){aL=b(a).scrollTop();aN=aP.offset().top;if(aN<aL||aN>aL+b(a).height()){aJ[0].scrollIntoView()}}s.preventDefault()})}function an(){var aJ,aI,aL,aK,aM,s=false;al.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick MSPointerDown.jsp MSPointerMove.jsp MSPointerUp.jsp MSPointerCancel.jsp").bind("touchstart.jsp MSPointerDown.jsp",function(aN){var aO;if(aN.originalEvent.touches){aO=aN.originalEvent.touches[0]}else{aO=aN.originalEvent}aJ=aC();aI=aA();aL=aO.pageX;aK=aO.pageY;aM=false;s=true}).bind("touchmove.jsp MSPointerMove.jsp",function(aQ){if(!s){return}var aP,aO=aa,aN=I;if(aQ.originalEvent.touches){aP=aQ.originalEvent.touches[0]}else{aP=aQ.originalEvent}Q.scrollTo(aJ+aL-aP.pageX,aI+aK-aP.pageY);aM=aM||Math.abs(aL-aP.pageX)>5||Math.abs(aK-aP.pageY)>5;return aO==aa&&aN==I}).bind("touchend.jsp MSPointerUp.jsp MSPointerCancel.jsp",function(aN){s=false}).bind("click.jsp-touchclick",function(aN){if(aM){aM=false;return false}})}function g(){var s=aA(),aI=aC();D.removeClass("jspScrollable").unbind(".jsp");D.replaceWith(ao.append(Y.children()));ao.scrollTop(s);ao.scrollLeft(aI);if(av){clearInterval(av)}}b.extend(Q,{reinitialise:function(aI){aI=b.extend({},ay,aI);ar(aI)},scrollToElement:function(aJ,aI,s){ab(aJ,aI,s)},scrollTo:function(aJ,s,aI){N(aJ,aI);M(s,aI)},scrollToX:function(aI,s){N(aI,s)},scrollToY:function(s,aI){M(s,aI)},scrollToPercentX:function(aI,s){N(aI*(T-aj),s)},scrollToPercentY:function(aI,s){M(aI*(Z-v),s)},scrollBy:function(aI,s,aJ){Q.scrollByX(aI,aJ);Q.scrollByY(s,aJ)},scrollByX:function(s,aJ){var aI=aC()+Math[s<0?"floor":"ceil"](s),aK=aI/(T-aj);W(aK*j,aJ)},scrollByY:function(s,aJ){var aI=aA()+Math[s<0?"floor":"ceil"](s),aK=aI/(Z-v);V(aK*i,aJ)},positionDragX:function(s,aI){W(s,aI)},positionDragY:function(aI,s){V(aI,s)},animate:function(aI,aL,s,aK){var aJ={};aJ[aL]=s;aI.animate(aJ,{duration:ay.animateDuration,easing:ay.animateEase,queue:false,step:aK})},getContentPositionX:function(){return aC()},getContentPositionY:function(){return aA()},getContentWidth:function(){return T},getContentHeight:function(){return Z},getPercentScrolledX:function(){return aC()/(T-aj)},getPercentScrolledY:function(){return aA()/(Z-v)},getIsScrollableH:function(){return aE},getIsScrollableV:function(){return az},getContentPane:function(){return Y},scrollToBottom:function(s){V(i,s)},hijackInternalLinks:b.noop,destroy:function(){g()}});ar(O)}e=b.extend({},b.fn.jScrollPane.defaults,e);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){e[this]=e[this]||e.speed});return this.each(function(){var f=b(this),g=f.data("jsp");if(g){g.reinitialise(e)}else{g=new d(f,e);f.data("jsp",g)}})};b.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);
(function(){function s(t,r,i,s){var o=this;o.el=e(t),o.callback=i,o.type=r,o.fn=i,o.options={onInit:function(){},onBeforeStart:function(){},onStart:function(){},onBeforeMove:function(){},onMove:function(){},onBeforeEnd:function(){},onEnd:function(){}},e.extend(s,o.options),o.options.onInit.call(o),n[r]&&n[r].type=="gesture"?o.el.bind("gesturestart",o):o.el.bind(e.startEv,o)}var e=function(e){return new t(e)},t=function(e){e.nodeType?e=[e]:typeof e=="string"&&(e=document.querySelectorAll(e)),this.length=e.length;for(var t=0;t<this.length;t++)this[t]=e[t];return this},n={tap:{type:"tap",options:{}},doubletap:{type:"tap",options:{neededTaps:2}},taphold:{type:"tap",options:{retain:600}},activate:{type:"tap",options:{retain:50}},swipe:{type:"swipe",options:{}},swipeleft:{type:"swipe",options:{direction:["W"]}},swiperight:{type:"swipe",options:{direction:["E"]}},pan:{type:"swipe",options:{fingers:2}},panup:{type:"swipe",options:{fingers:2,direction:["N"]}},pandown:{type:"swipe",options:{fingers:2,direction:["S"]}},gestures:{type:"gesture",options:{scale:!0,rotate:!0}},pinch:{type:"gesture",options:{scale:!0,maxScale:1,scaleThreshold:.2}},zoom:{type:"gesture",options:{scale:!0,minScale:1,scaleThreshold:.2}},scale:{type:"gesture",options:{scale:!0,scaleThreshold:.2}},rotate:{type:"gesture",options:{rotate:!0,rotateThreshold:10}}},r={},i=[];e.extend=function(e,t){for(var n in e)t[n]=e[n]},e.extend({isTouch:"ontouchstart"in window,isMSTouchEnabledDevice:window.navigator.msMaxTouchPoints>=1,isTouchEvent:function(t){return t.type==="touchstart"||t.type==="touchcancel"||t.type==="touchmove"||t.type==="touchend"||e.isMSTouchEnabledDevice&&(t.pointerType===t.MSPOINTER_TYPE_TOUCH||t.pointerType===t.MSPOINTER_TYPE_PEN)},hasClass:function(e,t){return(new RegExp("(^|\\s)"+t+"(\\s|$)")).test(e.className)},abs:function(e){return e<0?-e:e}},e),e.extend({startEv:e.isTouch?"touchstart":e.isMSTouchEnabledDevice?"MSPointerDown":"mousedown",moveEv:e.isTouch?"touchmove":e.isMSTouchEnabledDevice?"MSPointerMove":"mousemove",endEv:e.isTouch?"touchend":e.isMSTouchEnabledDevice?"MSPointerUp":"mouseup",cancelEv:e.isTouch?"touchcancel":e.isMSTouchEnabledDevice?"MSPointerCancel":"mouseup"},e),t.prototype={each:function(e){for(var t=0;t<this.length;t++)e.call(this[t]);return this},on:function(t,i,s){var o=this,u;return t=t.toLowerCase(),n[t]?(u=n[t].options,e.extend(s,u),o.each(function(){r[n[t].type](this,t,i,u)})):o},off:function(e,t){if(!e)return;var r=this;e=e.toLowerCase();if(!n[e])return r;var s=[];for(var o=i.length-1;o>=0;o--)if(this[0]==i[o].el[0]){var u=i[o];u.type===u.type&&(!t||u.fn===t)&&(s.push(u),i.splice(o,1))}},getEvents:function(){var e=this,t,n=i.length,r=[];for(t=0;t<n;t++)this[0]==i[t].el[0]&&r.push(i[t]);return r},bind:function(e,t,n){return this.each(function(){this.addEventListener(e,t,!!n)})},unbind:function(e,t,n){return this.each(function(){this.removeEventListener(e,t,!!n)})},hasClass:function(t){return e.hasClass(this[0],t)},addClass:function(){var t=arguments;for(var n=0,r=t.length;n<r;n++)this.each(function(){e.hasClass(this,t[n])||(this.className=this.className?this.className+" "+t[n]:t[n])});return this},removeClass:function(){var e=arguments;for(var t=0,n=e.length;t<n;t++)this.each(function(){this.className=this.className.replace(new RegExp("(^|\\s+)"+e[t]+"(\\s+|$)")," ")});return this},style:function(e,t){return typeof e=="string"&&t===undefined?window.getComputedStyle(this[0],null).getPropertyValue(e):(typeof e!="object"&&(e[e]=t),this.each(function(){for(var t in e)this.style[t]=e[t]}))},attr:function(e,t){var n=this;return t===undefined?n[0].getAttribute(e):n.each(function(){this.setAttribute(e,t)})}},r.tap=function(t,n,r,o){function u(t){var n=!1;if(!e.isTouch){if(!t)var t=window.event;t.which?n=t.which==3:t.button&&(n=t.button==2)}return n}o=o||{},i.push(new s(t,n,r,{onInit:function(){var e=this;e.ns={tapCount:0,anybutton:!1,neededTaps:o.neededTaps||1,interval:o.interval||400,expire:o.expire||0,retain:o.retain||0,touchOnly:!!o.touchOnly},e.neededTouches=o.fingers||1},onStart:function(t){var n=this;n.isTouchEvent=e.isTouchEvent(t);if(!n.isTouchEvent&&n.ns.touchOnly)return;!n.ns.anybutton&&u(t)&&(n.expired=!0),e.isMSTouchEnabledDevice||t.preventDefault(),n.el.addClass("active"),n.ns.retain&&(clearTimeout(n.ns.retainTimeout),n.ns.retainTimeout=null,n.ns.retainTimeout=setTimeout(function(){n.callback(n)},n.ns.retain)),n.ns.expire&&(clearTimeout(n.ns.expireTimeout),n.ns.expireTimeout=null,n.ns.expireTimeout=setTimeout(function(){n.expired=!0},n.ns.expire))},onMove:function(t){var n=this;if(!e.isTouchEvent(t)&&n.ns.touchOnly)return;if(n.moved||n.expired)n.ns.retainTimeout&&(clearTimeout(n.ns.retainTimeout),n.ns.retainTimeout=null),n.ns.expireTimeout&&(clearTimeout(n.ns.expireTimeout),n.ns.expireTimeout=null),n.el.removeClass("active")},onEnd:function(t){var n=this;if(!e.isTouchEvent(t)&&n.ns.touchOnly)return;n.el.removeClass("active"),n.ns.tapCount++;if(n.ns.retainTimeout){clearTimeout(n.ns.retainTimeout),n.ns.retainTimeout=null;return}n.ns.expireTimeout&&(clearTimeout(n.ns.expireTimeout),n.ns.expireTimeout=null),n.ns.intervalTimeout&&clearTimeout(n.ns.intervalTimeout);if(n.ns.tapCount<n.ns.neededTaps){n.ns.intervalTimeout=setTimeout(function(){n.ns.tapCount=0},n.ns.interval);return}n.ns.tapCount=0,!n.moved&&!n.expired&&n.callback.call(n)}}))},r.swipe=function(t,n,r,o){o=o||{},i.push(new s(t,n,r,{onInit:function(){var e=this;e.ns={distance:o.distance||60,direction:o.direction||["E","W"],activateOn:o.activateOn||"end",touchOnly:!!o.touchOnly},e.neededTouches=o.fingers||1},onStart:function(t){var n=this;n.isTouchEvent=e.isTouchEvent(t);if(!n.isTouchEvent&&n.ns.touchOnly)return;e.isMSTouchEnabledDevice||t.preventDefault(),n.ns.activated=!1},onMove:function(t){var n=this;if(!e.isTouchEvent(t)&&n.ns.touchOnly)return;!n.ns.activated&&n.ns.activateOn=="move"&&n.ns.direction.indexOf(n.startDir)!=-1&&(n.absDistX>=n.ns.distance&&(n.startDir=="E"||n.startDir=="W")||n.absDistY>=n.ns.distance&&(n.startDir=="N"||
n.startDir=="S"))&&(n.ns.activated=!0,n.callback(n))},onEnd:function(t){var n=this;if(!e.isTouchEvent(t)&&n.ns.touchOnly)return;n.ns.activateOn=="end"&&n.ns.direction.indexOf(n.startDir)!=-1&&(n.absDistX>=n.ns.distance&&(n.startDir=="E"||n.startDir=="W")||n.absDistY>=n.ns.distance&&(n.startDir=="N"||n.startDir=="S"))&&n.callback(n)}}))},r.gesture=function(t,n,r,o){o=o||{},i.push(new s(t,n,r,{onInit:function(){var e=this;e.ns={scaleThreshold:o.scaleThreshold||0,rotateThreshold:o.rotateThreshold||0,minScale:o.minScale||0,maxScale:o.maxScale||0,applyTransform:o.applyTransform},e.applyRotate=!!o.rotate,e.applyScale=!!o.scale},onStart:function(){this.ns.activated=!1},onChange:function(){var e=this;e.ns.applyTransform&&e.el.style({webkitTransform:e.transform})},onEnd:function(){var t=this;t.applyScale&&t.ns.minScale&&t.relScale>t.ns.minScale+t.ns.scaleThreshold?(t.callback(t),t.ns.activated=!0):t.applyScale&&t.ns.maxScale&&t.relScale<t.ns.maxScale-t.ns.scaleThreshold?(t.callback(t),t.ns.activated=!0):t.applyScale&&!t.ns.maxScale&&!t.ns.minScale&&e.abs(t.relScale)>t.ns.scaleThreshold&&(t.callback(t),t.ns.activated=!0),t.applyRotate&&!t.ns.activated&&e.abs(t.relRotation)>t.ns.rotateThreshold&&t.callback(t)}}))},s.prototype={moveThreshold:12,neededTouches:1,handleEvent:function(t){var n=this;switch(t.type){case e.startEv:n._start(t);break;case e.moveEv:n._move(t);break;case e.endEv:case e.cancelEv:n._end(t);break;case"gesturestart":n._gestStart(t);break;case"gesturechange":n._gestChange(t);break;case"gestureend":case"gesturecancel":n._gestEnd(t)}},_start:function(t){var n=this,r=e.isTouch?t.touches[0]:t;n.fingers=e.isTouch?t.touches.length:t.ctrlKey?2:1,n.options.onBeforeStart.call(n,t);if(n.fingers!=n.neededTouches)return;n.x=r.pageX,n.y=r.pageY,n.startX=r.pageX,n.startY=r.pageY,n.deltaX=0,n.deltaY=0,n.distX=0,n.distY=0,n.absDistX=0,n.absDistY=0,n.odometerX=0,n.odometerY=0,n.dirX=0,n.dirY=0,n.absDirX=0,n.absDirY=0,n.startDir="",n.startTime=t.timeStamp,n.currentTime=t.timeStamp,n.duration=0,n.moved=!1,n.expired=!1,n.el.bind(e.moveEv,n),n.el.bind(e.endEv,n),n.el.bind(e.cancelEv,n),n.options.onStart.call(n,t)},_move:function(t){var n=this,r=e.isTouch?t.changedTouches[0]:t,i,s;n.fingers=e.isTouch?t.touches.length:t.ctrlKey?2:1,n.options.onBeforeMove.call(n,t);if(n.fingers!=n.neededTouches)return;n.deltaX=n.x-r.pageX,n.deltaY=n.y-r.pageY,n.x=r.pageX,n.y=r.pageY,n.distX=n.x-n.startX,n.distY=n.y-n.startY,n.absDistX=e.abs(n.distX),n.absDistY=e.abs(n.distY),n.odometerX+=n.deltaX<0?-n.deltaX:n.deltaX,n.odometerY+=n.deltaY<0?-n.deltaY:n.deltaY,i=n.dirX,s=n.dirY,n.dirX=n.deltaX>0?1:-1,n.dirY=n.deltaY>0?1:-1,n.absDirX=n.distX>0?1:-1,n.absDirY=n.distY>0?1:-1;if(n.absDistX>n.moveThreshold||n.absDistY>n.moveThreshold&&!n.startDir)n.moved=!0,n.absDistX>n.absDistY+n.moveThreshold/2?n.startDir=n.distX>0?"E":"W":n.absDistY>n.absDistX+n.moveThreshold/2?n.startDir=n.distY>0?"S":"N":(n.startDir=n.distY>0?"S":"N",n.startDir+=n.distX>0?"E":"W");n.currentTime=t.timeStamp,n.currentTime-n.startTime>250&&(n.currentTime=t.timeStamp),n.options.onMove.call(n,t)},_end:function(t){var n=this;n.options.onBeforeEnd.call(n,t),n.fingers=e.isTouch?t.touches.length:0;if(n.fingers!=0)return;n.duration=t.timeStamp-n.startTime,n.velocityX=n.distX/(t.timeStamp-n.currentTime)*1e3,n.velocityY=n.distY/(t.timeStamp-n.currentTime)*1e3,n.el.unbind(e.moveEv,n),n.el.unbind(e.endEv,n),n.el.unbind(e.cancelEv,n),n.options.onEnd.call(n,t)},_gestStart:function(e){var t=this;t.el.addClass("gesturing"),t.scale=1,t.rotation=0,t.transform="",t.startTime=e.timeStamp,t.duration=0,t.matrix=new WebKitCSSMatrix(t.el.style("-webkit-transform")),t.options.onStart.call(t,e),t.el.bind("gesturechange",t),t.el.bind("gestureend",t),t.el.bind("gesturecancel",t)},_gestChange:function(e){var t=this,n=t.matrix;t.relScale=e.scale,t.relRotation=e.rotation,t.applyScale&&(t.scale*=e.scale,n=n.scale(e.scale)),t.applyRotate&&(t.rotation*=e.rotation,n=n.rotate(e.rotation)),t.transform=n,t.options.onChange.call(t,e)},_gestEnd:function(e){var t=this;t.el.removeClass("gesturing"),t.duration=e.timeStamp-t.startTime,t.el.unbind("gesturechange",t),t.el.unbind("gestureend",t),t.el.unbind("gesturecancel",t),t.options.onEnd.call(t,e)},destroy:function(){var t=this;return n[type].type=="gesture"?(t.el.unbind("gesturestart",t),t.el.unbind("gesturechange",t),t.el.unbind("gestureend",t),t.el.unbind("gesturecancel",t)):(t.el.unbind(e.startEv,t),t.el.unbind(e.moveEv,t),t.el.unbind(e.endEv,t),t.el.unbind(e.cancelEv,t)),null}},window.gt=e})();
/*!
 * Copyright (c) 2010-2012 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 */
String.prototype.format=function(){var b=arguments;return this.replace(/\${(\d+)}/g,function(c,a){return typeof b[a]!="undefined"?b[a]:"${"+a+"}"})};
/*! Copyright (c) 2011 Brandon Aaron (http://brandonaaron.net)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Thanks to: http://adomas.org/javascript-mouse-wheel/ for some pointers.
 * Thanks to: Mathias Bank(http://www.mathias-bank.de) for a scope bug fix.
 * Thanks to: Seamus Leahy for adding deltaX and deltaY
 *
 * Version: 3.0.6
 * 
 * Requires: 1.2.2+
 */

(function($) {

var types = ['DOMMouseScroll', 'mousewheel'];

if ($.event.fixHooks) {
    for ( var i=types.length; i; ) {
        $.event.fixHooks[ types[--i] ] = $.event.mouseHooks;
    }
}

$.event.special.mousewheel = {
    setup: function() {
        if ( this.addEventListener ) {
            for ( var i=types.length; i; ) {
                this.addEventListener( types[--i], handler, false );
            }
        } else {
            this.onmousewheel = handler;
        }
    },

    teardown: function() {
        if ( this.removeEventListener ) {
            for ( var i=types.length; i; ) {
                this.removeEventListener( types[--i], handler, false );
            }
        } else {
            this.onmousewheel = null;
        }
    }
};

$.fn.extend({
    mousewheel: function(fn) {
        return fn ? this.bind("mousewheel", fn) : this.trigger("mousewheel");
    },

    unmousewheel: function(fn) {
        return this.unbind("mousewheel", fn);
    }
});


function handler(event) {
    var orgEvent = event || window.event, args = [].slice.call( arguments, 1 ), delta = 0, returnValue = true, deltaX = 0, deltaY = 0;
    event = $.event.fix(orgEvent);
    event.type = "mousewheel";

    // Old school scrollwheel delta
    if ( orgEvent.wheelDelta ) { delta = orgEvent.wheelDelta/120; }
    if ( orgEvent.detail     ) { delta = -orgEvent.detail/3; }

    // New school multidimensional scroll (touchpads) deltas
    deltaY = delta;

    // Gecko
    if ( orgEvent.axis !== undefined && orgEvent.axis === orgEvent.HORIZONTAL_AXIS ) {
        deltaY = 0;
        deltaX = -1*delta;
    }

    // Webkit
    if ( orgEvent.wheelDeltaY !== undefined ) { deltaY = orgEvent.wheelDeltaY/120; }
    if ( orgEvent.wheelDeltaX !== undefined ) { deltaX = -1*orgEvent.wheelDeltaX/120; }

    // Add event and delta to the front of the arguments
    args.unshift(event, delta, deltaX, deltaY);

    return ($.event.dispatch || $.event.handle).apply(this, args);
}

})(jQuery);
/*! jquery.jsonp 2.1.4 (c)2010 Julian Aubourg | MIT License
// http://code.google.com/p/jquery-jsonp/
*/
(function(e,b){function d(){}function t(C){c=[C]}function m(C){f.insertBefore(C,f.firstChild)}function l(E,C,D){return E&&E.apply(C.context||C,D)}function k(C){return/\?/.test(C)?"&":"?"}var n="async",s="charset",q="",A="error",r="_jqjsp",w="on",o=w+"click",p=w+A,a=w+"load",i=w+"readystatechange",z="removeChild",g="<script/>",v="success",y="timeout",x=e.browser,f=e("head")[0]||document.documentElement,u={},j=0,c,h={callback:r,url:location.href};function B(C){C=e.extend({},h,C);var Q=C.complete,E=C.dataFilter,M=C.callbackParameter,R=C.callback,G=C.cache,J=C.pageCache,I=C.charset,D=C.url,L=C.data,P=C.timeout,O,K=0,H=d;C.abort=function(){!K++&&H()};if(l(C.beforeSend,C,[C])===false||K){return C}D=D||q;L=L?((typeof L)=="string"?L:e.param(L,C.traditional)):q;D+=L?(k(D)+L):q;M&&(D+=k(D)+encodeURIComponent(M)+"=?");!G&&!J&&(D+=k(D)+"_"+(new Date()).getTime()+"=");D=D.replace(/=\?(&|$)/,"="+R+"$1");function N(S){!K++&&b(function(){H();J&&(u[D]={s:[S]});E&&(S=E.apply(C,[S]));l(C.success,C,[S,v]);l(Q,C,[C,v])},0)}function F(S){!K++&&b(function(){H();J&&S!=y&&(u[D]=S);l(C.error,C,[C,S]);l(Q,C,[C,S])},0)}J&&(O=u[D])?(O.s?N(O.s[0]):F(O)):b(function(T,S,U){if(!K){U=P>0&&b(function(){F(y)},P);H=function(){U&&clearTimeout(U);T[i]=T[o]=T[a]=T[p]=null;f[z](T);S&&f[z](S)};window[R]=t;T=e(g)[0];T.id=r+j++;if(I){T[s]=I}function V(W){(T[o]||d)();W=c;c=undefined;W?N(W[0]):F(A)}if(x.msie){T.event=o;T.htmlFor=T.id;T[i]=function(){/loaded|complete/.test(T.readyState)&&V()}}else{T[p]=T[a]=V;x.opera?((S=e(g)[0]).text="jQuery('#"+T.id+"')[0]."+p+"()"):T[n]=n}T.src=D;m(T);S&&m(S)}},0);return C}B.setup=function(C){e.extend(h,C)};e.jsonp=B})(jQuery,setTimeout);
var SunSpiderBenchmark=function(){return{get3DSpeed:function(){function e(c,b){var e=c.V[0],j=b.V[0],n=c.V[1],g=b.V[1],d=Math.abs(j-e),f=Math.abs(g-n),m=e,h=n,i,l,k;j=j>=e?e=1:e=-1;g=g>=n?n=1:n=-1;d>=f?(g=e=0,i=d,l=d/2,k=f):(n=j=0,i=f,l=f/2,k=d,d=f);d=Math.round(a.LastPx+d);for(f=a.LastPx;f<d;f++)l+=k,l>=i&&(l-=i,m+=e,h+=n),m+=j,h+=g;a.LastPx=d}function i(a,b,e){this.V=[a,b,e,1]}function k(a,b){for(var e=[[],[],[],[]],j=0,d=0;j<4;j++)for(d=0;d<4;d++)e[j][d]=a[j][0]*b[0][d]+a[j][1]*b[1][d]+a[j][2]*
b[2][d]+a[j][3]*b[3][d];return e}function t(a,b){for(var e=[],d=0;d<4;d++)e[d]=a[d][0]*b[0]+a[d][1]*b[1]+a[d][2]*b[2]+a[d][3]*b[3];return e}function q(a,b,d,e){return k([[1,0,0,b],[0,1,0,d],[0,0,1,e],[0,0,0,1]],a)}function u(){var c=[],b=5;for(a.LastPx=0;b>-1;b--){for(var d=c,g=b,i=l,k=a.Normal[b],o=[],f=0;f<3;f++)o[f]=i[f][0]*k[0]+i[f][1]*k[1]+i[f][2]*k[2];d[g]=o}c[0][2]<0&&(a.Line[0]||(e(a[0],a[1]),a.Line[0]=!0),a.Line[1]||(e(a[1],a[2]),a.Line[1]=!0),a.Line[2]||(e(a[2],a[3]),a.Line[2]=!0),a.Line[3]||
(e(a[3],a[0]),a.Line[3]=!0));c[1][2]<0&&(a.Line[2]||(e(a[3],a[2]),a.Line[2]=!0),a.Line[9]||(e(a[2],a[6]),a.Line[9]=!0),a.Line[6]||(e(a[6],a[7]),a.Line[6]=!0),a.Line[10]||(e(a[7],a[3]),a.Line[10]=!0));c[2][2]<0&&(a.Line[4]||(e(a[4],a[5]),a.Line[4]=!0),a.Line[5]||(e(a[5],a[6]),a.Line[5]=!0),a.Line[6]||(e(a[6],a[7]),a.Line[6]=!0),a.Line[7]||(e(a[7],a[4]),a.Line[7]=!0));c[3][2]<0&&(a.Line[4]||(e(a[4],a[5]),a.Line[4]=!0),a.Line[8]||(e(a[5],a[1]),a.Line[8]=!0),a.Line[0]||(e(a[1],a[0]),a.Line[0]=!0),a.Line[11]||
(e(a[0],a[4]),a.Line[11]=!0));c[4][2]<0&&(a.Line[11]||(e(a[4],a[0]),a.Line[11]=!0),a.Line[3]||(e(a[0],a[3]),a.Line[3]=!0),a.Line[10]||(e(a[3],a[7]),a.Line[10]=!0),a.Line[7]||(e(a[7],a[4]),a.Line[7]=!0));c[5][2]<0&&(a.Line[8]||(e(a[1],a[5]),a.Line[8]=!0),a.Line[5]||(e(a[5],a[6]),a.Line[5]=!0),a.Line[9]||(e(a[6],a[2]),a.Line[9]=!0),a.Line[1]||(e(a[2],a[1]),a.Line[1]=!0));a.Line=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];a.LastPx=0}function v(){if(!(d.LoopCount>d.LoopMax)){for(var c=String(d.LoopCount);c.length<
3;)c=" "+c;g=q(r,-a[8].V[0],-a[8].V[1],-a[8].V[2]);var b=1;b*=Math.PI/180;c=Math.cos(b);b=Math.sin(b);g=k([[1,0,0,0],[0,c,-b,0],[0,b,c,0],[0,0,0,1]],g);b=3;b*=Math.PI/180;c=Math.cos(b);b=Math.sin(b);g=k([[c,0,b,0],[0,1,0,0],[-b,0,c,0],[0,0,0,1]],g);b=5;b*=Math.PI/180;c=Math.cos(b);b=Math.sin(b);g=k([[c,-b,0,0],[b,c,0,0],[0,0,1,0],[0,0,0,1]],g);g=q(g,a[8].V[0],a[8].V[1],a[8].V[2]);l=k(g,l);for(c=8;c>-1;c--)a[c].V=t(g,a[c].V);u();d.LoopCount++;v()}}function s(c){o.V=[150,150,20,1];d.LoopCount=0;d.LoopMax=
50;d.TimeMax=0;d.TimeAvg=0;d.TimeMin=0;d.TimeTemp=0;d.TimeTotal=0;d.Init=!1;g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[0]=new i(-c,-c,c);a[1]=new i(-c,c,c);a[2]=new i(c,c,c);a[3]=new i(c,-c,c);a[4]=new i(-c,-c,-c);a[5]=new i(-c,c,-c);a[6]=new i(c,c,-c);a[7]=new i(c,-c,-c);a[8]=new i(0,0,0);a.Edge=[[0,1,2],[3,2,6],[7,6,5],[4,5,1],[4,0,3],[1,5,6]];a.Normal=[];for(var b=0;b<a.Edge.length;b++){for(var e=a.Normal,
j=b,n=a[a.Edge[b][0]].V,p=a[a.Edge[b][1]].V,s=a[a.Edge[b][2]].V,f=[],m=[],h=0;h<3;h++)f[h]=n[h]-p[h],m[h]=s[h]-p[h];h=[];h[0]=f[1]*m[2]-f[2]*m[1];h[1]=f[2]*m[0]-f[0]*m[2];h[2]=f[0]*m[1]-f[1]*m[0];f=h;m=Math.sqrt(f[0]*f[0]+f[1]*f[1]+f[2]*f[2]);for(h=0;h<3;h++)f[h]/=m;f[3]=1;e[j]=f}a.Line=[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1,!1];a.NumPx=18*c;for(b=0;b<a.NumPx;b++)i(0,0,0);g=q(g,o.V[0],o.V[1],o.V[2]);l=k(g,l);for(b=0;b<9;b++)a[b].V=t(g,a[b].V);u();d.Init=!0;v()}for(var w=new Date,a=[],g=[],l=[],r=[],o=
{},d={},p=20;p<=160;p*=2)s(p);LoopTime=d=o=r=l=g=a=null;return new Date-w}}}();
/*!
 * ========================================================================================
 * Copyright (c) 2012, various,
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *   * Redistributions of source code must retain the above copyright
 *     notice, this list of conditions and the following disclaimer.
 *   * Redistributions in binary form must reproduce the above copyright
 *     notice, this list of conditions and the following disclaimer in the
 *     documentation and/or other materials provided with the distribution.
 *   * Neither the name of the <organization> nor the
 *     names of its contributors may be used to endorse or promote products
 *     derived from this software without specific prior written permission.

 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL <COPYRIGHT HOLDER> BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * ========================================================================================
 */
;var PorterStemmer=function(){function e(e,t){function h(){}function p(){console.log(Array.prototype.slice.call(arguments).join(" "))}var n={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},r={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},i="[^aeiou]",s="[aeiouy]",o=i+"[^aeiouy]*",u=s+"[aeiou]*",a="^("+o+")?"+u+o,f="^("+o+")?"+u+o+"("+u+")?$",l="^("+o+")?"+u+o+u+o,c="^("+o+")?"+s,d,v,m,g,y,b,w,E,S=e;t?E=p:E=h;if(e.length<3)return e;m=e.substr(0,1),m=="y"&&(e=m.toUpperCase()+e.substr(1)),g=/^(.+?)(ss|i)es$/,y=/^(.+?)([^s])s$/,g.test(e)?(e=e.replace(g,"$1$2"),E("1a",g,e)):y.test(e)&&(e=e.replace(y,"$1$2"),E("1a",y,e)),g=/^(.+?)eed$/,y=/^(.+?)(ed|ing)$/;if(g.test(e)){var x=g.exec(e);g=new RegExp(a),g.test(x[1])&&(g=/.$/,e=e.replace(g,""),E("1b",g,e))}else if(y.test(e)){var x=y.exec(e);d=x[1],y=new RegExp(c),y.test(d)&&(e=d,E("1b",y,e),y=/(at|bl|iz)$/,b=new RegExp("([^aeiouylsz])\\1$"),w=new RegExp("^"+o+s+"[^aeiouwxy]$"),y.test(e)?(e+="e",E("1b",y,e)):b.test(e)?(g=/.$/,e=e.replace(g,""),E("1b",b,e)):w.test(e)&&(e+="e",E("1b",w,e)))}g=new RegExp("^(.*"+s+".*)y$");if(g.test(e)){var x=g.exec(e);d=x[1],e=d+"i",E("1c",g,e)}g=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/;if(g.test(e)){var x=g.exec(e);d=x[1],v=x[2],g=new RegExp(a),g.test(d)&&(e=d+n[v],E("2",g,e))}g=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/;if(g.test(e)){var x=g.exec(e);d=x[1],v=x[2],g=new RegExp(a),g.test(d)&&(e=d+r[v],E("3",g,e))}g=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,y=/^(.+?)(s|t)(ion)$/;if(g.test(e)){var x=g.exec(e);d=x[1],g=new RegExp(l),g.test(d)&&(e=d,E("4",g,e))}else if(y.test(e)){var x=y.exec(e);d=x[1]+x[2],y=new RegExp(l),y.test(d)&&(e=d,E("4",y,e))}g=/^(.+?)e$/;if(g.test(e)){var x=g.exec(e);d=x[1],g=new RegExp(l),y=new RegExp(f),b=new RegExp("^"+o+s+"[^aeiouwxy]$");if(g.test(d)||y.test(d)&&!b.test(d))e=d,E("5",g,y,b,e)}return g=/ll$/,y=new RegExp(l),g.test(e)&&y.test(e)&&(g=/.$/,e=e.replace(g,""),E("5",g,y,e)),m=="y"&&(e=m.toLowerCase()+e.substr(1)),e}return{stemmer:e}}();
/*!
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
var CryptoJS=CryptoJS||function(u,p){var d={},l=d.lib={},s=function(){},t=l.Base={extend:function(a){s.prototype=this;var c=new s;a&&c.mixIn(a);c.hasOwnProperty("init")||(c.init=function(){c.$super.init.apply(this,arguments)});c.init.prototype=c;c.$super=this;return c},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var c in a)a.hasOwnProperty(c)&&(this[c]=a[c]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},
r=l.WordArray=t.extend({init:function(a,c){a=this.words=a||[];this.sigBytes=c!=p?c:4*a.length},toString:function(a){return(a||v).stringify(this)},concat:function(a){var c=this.words,e=a.words,j=this.sigBytes;a=a.sigBytes;this.clamp();if(j%4)for(var k=0;k<a;k++)c[j+k>>>2]|=(e[k>>>2]>>>24-8*(k%4)&255)<<24-8*((j+k)%4);else if(65535<e.length)for(k=0;k<a;k+=4)c[j+k>>>2]=e[k>>>2];else c.push.apply(c,e);this.sigBytes+=a;return this},clamp:function(){var a=this.words,c=this.sigBytes;a[c>>>2]&=4294967295<<
32-8*(c%4);a.length=u.ceil(c/4)},clone:function(){var a=t.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var c=[],e=0;e<a;e+=4)c.push(4294967296*u.random()|0);return new r.init(c,a)}}),w=d.enc={},v=w.Hex={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++){var k=c[j>>>2]>>>24-8*(j%4)&255;e.push((k>>>4).toString(16));e.push((k&15).toString(16))}return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j+=2)e[j>>>3]|=parseInt(a.substr(j,
2),16)<<24-4*(j%8);return new r.init(e,c/2)}},b=w.Latin1={stringify:function(a){var c=a.words;a=a.sigBytes;for(var e=[],j=0;j<a;j++)e.push(String.fromCharCode(c[j>>>2]>>>24-8*(j%4)&255));return e.join("")},parse:function(a){for(var c=a.length,e=[],j=0;j<c;j++)e[j>>>2]|=(a.charCodeAt(j)&255)<<24-8*(j%4);return new r.init(e,c)}},x=w.Utf8={stringify:function(a){try{return decodeURIComponent(escape(b.stringify(a)))}catch(c){throw Error("Malformed UTF-8 data");}},parse:function(a){return b.parse(unescape(encodeURIComponent(a)))}},
q=l.BufferedBlockAlgorithm=t.extend({reset:function(){this._data=new r.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=x.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var c=this._data,e=c.words,j=c.sigBytes,k=this.blockSize,b=j/(4*k),b=a?u.ceil(b):u.max((b|0)-this._minBufferSize,0);a=b*k;j=u.min(4*a,j);if(a){for(var q=0;q<a;q+=k)this._doProcessBlock(e,q);q=e.splice(0,a);c.sigBytes-=j}return new r.init(q,j)},clone:function(){var a=t.clone.call(this);
a._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:t.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,e){return(new a.init(e)).finalize(b)}},_createHmacHelper:function(a){return function(b,e){return(new n.HMAC.init(a,
e)).finalize(b)}}});var n=d.algo={};return d}(Math);
(function(){var u=CryptoJS,p=u.lib.WordArray;u.enc.Base64={stringify:function(d){var l=d.words,p=d.sigBytes,t=this._map;d.clamp();d=[];for(var r=0;r<p;r+=3)for(var w=(l[r>>>2]>>>24-8*(r%4)&255)<<16|(l[r+1>>>2]>>>24-8*((r+1)%4)&255)<<8|l[r+2>>>2]>>>24-8*((r+2)%4)&255,v=0;4>v&&r+0.75*v<p;v++)d.push(t.charAt(w>>>6*(3-v)&63));if(l=t.charAt(64))for(;d.length%4;)d.push(l);return d.join("")},parse:function(d){var l=d.length,s=this._map,t=s.charAt(64);t&&(t=d.indexOf(t),-1!=t&&(l=t));for(var t=[],r=0,w=0;w<
l;w++)if(w%4){var v=s.indexOf(d.charAt(w-1))<<2*(w%4),b=s.indexOf(d.charAt(w))>>>6-2*(w%4);t[r>>>2]|=(v|b)<<24-8*(r%4);r++}return p.create(t,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();
(function(u){function p(b,n,a,c,e,j,k){b=b+(n&a|~n&c)+e+k;return(b<<j|b>>>32-j)+n}function d(b,n,a,c,e,j,k){b=b+(n&c|a&~c)+e+k;return(b<<j|b>>>32-j)+n}function l(b,n,a,c,e,j,k){b=b+(n^a^c)+e+k;return(b<<j|b>>>32-j)+n}function s(b,n,a,c,e,j,k){b=b+(a^(n|~c))+e+k;return(b<<j|b>>>32-j)+n}for(var t=CryptoJS,r=t.lib,w=r.WordArray,v=r.Hasher,r=t.algo,b=[],x=0;64>x;x++)b[x]=4294967296*u.abs(u.sin(x+1))|0;r=r.MD5=v.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},
_doProcessBlock:function(q,n){for(var a=0;16>a;a++){var c=n+a,e=q[c];q[c]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360}var a=this._hash.words,c=q[n+0],e=q[n+1],j=q[n+2],k=q[n+3],z=q[n+4],r=q[n+5],t=q[n+6],w=q[n+7],v=q[n+8],A=q[n+9],B=q[n+10],C=q[n+11],u=q[n+12],D=q[n+13],E=q[n+14],x=q[n+15],f=a[0],m=a[1],g=a[2],h=a[3],f=p(f,m,g,h,c,7,b[0]),h=p(h,f,m,g,e,12,b[1]),g=p(g,h,f,m,j,17,b[2]),m=p(m,g,h,f,k,22,b[3]),f=p(f,m,g,h,z,7,b[4]),h=p(h,f,m,g,r,12,b[5]),g=p(g,h,f,m,t,17,b[6]),m=p(m,g,h,f,w,22,b[7]),
f=p(f,m,g,h,v,7,b[8]),h=p(h,f,m,g,A,12,b[9]),g=p(g,h,f,m,B,17,b[10]),m=p(m,g,h,f,C,22,b[11]),f=p(f,m,g,h,u,7,b[12]),h=p(h,f,m,g,D,12,b[13]),g=p(g,h,f,m,E,17,b[14]),m=p(m,g,h,f,x,22,b[15]),f=d(f,m,g,h,e,5,b[16]),h=d(h,f,m,g,t,9,b[17]),g=d(g,h,f,m,C,14,b[18]),m=d(m,g,h,f,c,20,b[19]),f=d(f,m,g,h,r,5,b[20]),h=d(h,f,m,g,B,9,b[21]),g=d(g,h,f,m,x,14,b[22]),m=d(m,g,h,f,z,20,b[23]),f=d(f,m,g,h,A,5,b[24]),h=d(h,f,m,g,E,9,b[25]),g=d(g,h,f,m,k,14,b[26]),m=d(m,g,h,f,v,20,b[27]),f=d(f,m,g,h,D,5,b[28]),h=d(h,f,
m,g,j,9,b[29]),g=d(g,h,f,m,w,14,b[30]),m=d(m,g,h,f,u,20,b[31]),f=l(f,m,g,h,r,4,b[32]),h=l(h,f,m,g,v,11,b[33]),g=l(g,h,f,m,C,16,b[34]),m=l(m,g,h,f,E,23,b[35]),f=l(f,m,g,h,e,4,b[36]),h=l(h,f,m,g,z,11,b[37]),g=l(g,h,f,m,w,16,b[38]),m=l(m,g,h,f,B,23,b[39]),f=l(f,m,g,h,D,4,b[40]),h=l(h,f,m,g,c,11,b[41]),g=l(g,h,f,m,k,16,b[42]),m=l(m,g,h,f,t,23,b[43]),f=l(f,m,g,h,A,4,b[44]),h=l(h,f,m,g,u,11,b[45]),g=l(g,h,f,m,x,16,b[46]),m=l(m,g,h,f,j,23,b[47]),f=s(f,m,g,h,c,6,b[48]),h=s(h,f,m,g,w,10,b[49]),g=s(g,h,f,m,
E,15,b[50]),m=s(m,g,h,f,r,21,b[51]),f=s(f,m,g,h,u,6,b[52]),h=s(h,f,m,g,k,10,b[53]),g=s(g,h,f,m,B,15,b[54]),m=s(m,g,h,f,e,21,b[55]),f=s(f,m,g,h,v,6,b[56]),h=s(h,f,m,g,x,10,b[57]),g=s(g,h,f,m,t,15,b[58]),m=s(m,g,h,f,D,21,b[59]),f=s(f,m,g,h,z,6,b[60]),h=s(h,f,m,g,C,10,b[61]),g=s(g,h,f,m,j,15,b[62]),m=s(m,g,h,f,A,21,b[63]);a[0]=a[0]+f|0;a[1]=a[1]+m|0;a[2]=a[2]+g|0;a[3]=a[3]+h|0},_doFinalize:function(){var b=this._data,n=b.words,a=8*this._nDataBytes,c=8*b.sigBytes;n[c>>>5]|=128<<24-c%32;var e=u.floor(a/
4294967296);n[(c+64>>>9<<4)+15]=(e<<8|e>>>24)&16711935|(e<<24|e>>>8)&4278255360;n[(c+64>>>9<<4)+14]=(a<<8|a>>>24)&16711935|(a<<24|a>>>8)&4278255360;b.sigBytes=4*(n.length+1);this._process();b=this._hash;n=b.words;for(a=0;4>a;a++)c=n[a],n[a]=(c<<8|c>>>24)&16711935|(c<<24|c>>>8)&4278255360;return b},clone:function(){var b=v.clone.call(this);b._hash=this._hash.clone();return b}});t.MD5=v._createHelper(r);t.HmacMD5=v._createHmacHelper(r)})(Math);
(function(){var u=CryptoJS,p=u.lib,d=p.Base,l=p.WordArray,p=u.algo,s=p.EvpKDF=d.extend({cfg:d.extend({keySize:4,hasher:p.MD5,iterations:1}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,r){for(var p=this.cfg,s=p.hasher.create(),b=l.create(),u=b.words,q=p.keySize,p=p.iterations;u.length<q;){n&&s.update(n);var n=s.update(d).finalize(r);s.reset();for(var a=1;a<p;a++)n=s.finalize(n),s.reset();b.concat(n)}b.sigBytes=4*q;return b}});u.EvpKDF=function(d,l,p){return s.create(p).compute(d,
l)}})();
CryptoJS.lib.Cipher||function(u){var p=CryptoJS,d=p.lib,l=d.Base,s=d.WordArray,t=d.BufferedBlockAlgorithm,r=p.enc.Base64,w=p.algo.EvpKDF,v=d.Cipher=t.extend({cfg:l.extend(),createEncryptor:function(e,a){return this.create(this._ENC_XFORM_MODE,e,a)},createDecryptor:function(e,a){return this.create(this._DEC_XFORM_MODE,e,a)},init:function(e,a,b){this.cfg=this.cfg.extend(b);this._xformMode=e;this._key=a;this.reset()},reset:function(){t.reset.call(this);this._doReset()},process:function(e){this._append(e);return this._process()},
finalize:function(e){e&&this._append(e);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(b,k,d){return("string"==typeof k?c:a).encrypt(e,b,k,d)},decrypt:function(b,k,d){return("string"==typeof k?c:a).decrypt(e,b,k,d)}}}});d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var b=p.mode={},x=function(e,a,b){var c=this._iv;c?this._iv=u:c=this._prevBlock;for(var d=0;d<b;d++)e[a+d]^=
c[d]},q=(d.BlockCipherMode=l.extend({createEncryptor:function(e,a){return this.Encryptor.create(e,a)},createDecryptor:function(e,a){return this.Decryptor.create(e,a)},init:function(e,a){this._cipher=e;this._iv=a}})).extend();q.Encryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize;x.call(this,e,a,c);b.encryptBlock(e,a);this._prevBlock=e.slice(a,a+c)}});q.Decryptor=q.extend({processBlock:function(e,a){var b=this._cipher,c=b.blockSize,d=e.slice(a,a+c);b.decryptBlock(e,a);x.call(this,
e,a,c);this._prevBlock=d}});b=b.CBC=q;q=(p.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,l=[],n=0;n<c;n+=4)l.push(d);c=s.create(l,c);a.concat(c)},unpad:function(a){a.sigBytes-=a.words[a.sigBytes-1>>>2]&255}};d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:b,padding:q}),reset:function(){v.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,
this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var n=d.CipherParams=l.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),b=(p.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;a=a.salt;return(a?s.create([1398893684,
1701076831]).concat(a).concat(b):b).toString(r)},parse:function(a){a=r.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=s.create(b.slice(2,4));b.splice(0,4);a.sigBytes-=16}return n.create({ciphertext:a,salt:c})}},a=d.SerializableCipher=l.extend({cfg:l.extend({format:b}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var l=a.createEncryptor(c,d);b=l.finalize(b);l=l.cfg;return n.create({ciphertext:b,key:c,iv:l.iv,algorithm:a,mode:l.mode,padding:l.padding,blockSize:a.blockSize,formatter:d.format})},
decrypt:function(a,b,c,d){d=this.cfg.extend(d);b=this._parse(b,d.format);return a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),p=(p.kdf={}).OpenSSL={execute:function(a,b,c,d){d||(d=s.random(8));a=w.create({keySize:b+c}).compute(a,d);c=s.create(a.words.slice(b),4*c);a.sigBytes=4*b;return n.create({key:a,iv:c,salt:d})}},c=d.PasswordBasedCipher=a.extend({cfg:a.cfg.extend({kdf:p}),encrypt:function(b,c,d,l){l=this.cfg.extend(l);d=l.kdf.execute(d,
b.keySize,b.ivSize);l.iv=d.iv;b=a.encrypt.call(this,b,c,d.key,l);b.mixIn(d);return b},decrypt:function(b,c,d,l){l=this.cfg.extend(l);c=this._parse(c,l.format);d=l.kdf.execute(d,b.keySize,b.ivSize,c.salt);l.iv=d.iv;return a.decrypt.call(this,b,c,d.key,l)}})}();
(function(){for(var u=CryptoJS,p=u.lib.BlockCipher,d=u.algo,l=[],s=[],t=[],r=[],w=[],v=[],b=[],x=[],q=[],n=[],a=[],c=0;256>c;c++)a[c]=128>c?c<<1:c<<1^283;for(var e=0,j=0,c=0;256>c;c++){var k=j^j<<1^j<<2^j<<3^j<<4,k=k>>>8^k&255^99;l[e]=k;s[k]=e;var z=a[e],F=a[z],G=a[F],y=257*a[k]^16843008*k;t[e]=y<<24|y>>>8;r[e]=y<<16|y>>>16;w[e]=y<<8|y>>>24;v[e]=y;y=16843009*G^65537*F^257*z^16843008*e;b[k]=y<<24|y>>>8;x[k]=y<<16|y>>>16;q[k]=y<<8|y>>>24;n[k]=y;e?(e=z^a[a[a[G^z]]],j^=a[a[j]]):e=j=1}var H=[0,1,2,4,8,
16,32,64,128,27,54],d=d.AES=p.extend({_doReset:function(){for(var a=this._key,c=a.words,d=a.sigBytes/4,a=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],j=0;j<a;j++)if(j<d)e[j]=c[j];else{var k=e[j-1];j%d?6<d&&4==j%d&&(k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255]):(k=k<<8|k>>>24,k=l[k>>>24]<<24|l[k>>>16&255]<<16|l[k>>>8&255]<<8|l[k&255],k^=H[j/d|0]<<24);e[j]=e[j-d]^k}c=this._invKeySchedule=[];for(d=0;d<a;d++)j=a-d,k=d%4?e[j]:e[j-4],c[d]=4>d||4>=j?k:b[l[k>>>24]]^x[l[k>>>16&255]]^q[l[k>>>
8&255]]^n[l[k&255]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,t,r,w,v,l)},decryptBlock:function(a,c){var d=a[c+1];a[c+1]=a[c+3];a[c+3]=d;this._doCryptBlock(a,c,this._invKeySchedule,b,x,q,n,s);d=a[c+1];a[c+1]=a[c+3];a[c+3]=d},_doCryptBlock:function(a,b,c,d,e,j,l,f){for(var m=this._nRounds,g=a[b]^c[0],h=a[b+1]^c[1],k=a[b+2]^c[2],n=a[b+3]^c[3],p=4,r=1;r<m;r++)var q=d[g>>>24]^e[h>>>16&255]^j[k>>>8&255]^l[n&255]^c[p++],s=d[h>>>24]^e[k>>>16&255]^j[n>>>8&255]^l[g&255]^c[p++],t=
d[k>>>24]^e[n>>>16&255]^j[g>>>8&255]^l[h&255]^c[p++],n=d[n>>>24]^e[g>>>16&255]^j[h>>>8&255]^l[k&255]^c[p++],g=q,h=s,k=t;q=(f[g>>>24]<<24|f[h>>>16&255]<<16|f[k>>>8&255]<<8|f[n&255])^c[p++];s=(f[h>>>24]<<24|f[k>>>16&255]<<16|f[n>>>8&255]<<8|f[g&255])^c[p++];t=(f[k>>>24]<<24|f[n>>>16&255]<<16|f[g>>>8&255]<<8|f[h&255])^c[p++];n=(f[n>>>24]<<24|f[g>>>16&255]<<16|f[h>>>8&255]<<8|f[k&255])^c[p++];a[b]=q;a[b+1]=s;a[b+2]=t;a[b+3]=n},keySize:8});u.AES=p._createHelper(d)})();
/*
CryptoJS v3.1.2
code.google.com/p/crypto-js
(c) 2009-2013 by Jeff Mott. All rights reserved.
code.google.com/p/crypto-js/wiki/License
*/
(function(){var C=CryptoJS;var C_lib=C.lib;var WordArray=C_lib.WordArray;var superInit=WordArray.init;var subInit=WordArray.init=function(typedArray){if(typedArray instanceof ArrayBuffer){typedArray=new Uint8Array(typedArray)}if((window.Int8Array&&typedArray instanceof Int8Array)||(window.Uint8ClampedArray&&typedArray instanceof Uint8ClampedArray)||(window.Int16Array&&typedArray instanceof Int16Array)||(window.Uint16Array&&typedArray instanceof Uint16Array)||(window.Int32Array&&typedArray instanceof Int32Array)||(window.Uint32Array&&typedArray instanceof Uint32Array)||(window.Float32Array&&typedArray instanceof Float32Array)||(window.Float64Array&&typedArray instanceof Float64Array)){typedArray=new Uint8Array(typedArray.buffer,typedArray.byteOffset,typedArray.byteLength)}if(typedArray instanceof Uint8Array){var typedArrayByteLength=typedArray.byteLength;var words=[];for(var i=0;i<typedArrayByteLength;i++){words[i>>>2]|=typedArray[i]<<(24-(i%4)*8)}superInit.call(this,words,typedArrayByteLength)}else{superInit.apply(this,arguments)}};subInit.prototype=WordArray}());
/*
 Copyright (c) 2013 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
(function(obj){var ERR_BAD_FORMAT="File format is not recognized.";var ERR_ENCRYPTED="File contains encrypted entry.";var ERR_ZIP64="File is using Zip64 (4gb+ file size).";var ERR_READ="Error while reading zip file.";var ERR_WRITE="Error while writing zip file.";var ERR_WRITE_DATA="Error while writing file data.";var ERR_READ_DATA="Error while reading file data.";var ERR_DUPLICATED_NAME="File already exists.";var CHUNK_SIZE=512*1024;var INFLATE_JS="inflate.js";var DEFLATE_JS="deflate.js";var TEXT_PLAIN="text/plain";var MESSAGE_EVENT="message";var appendABViewSupported;try{appendABViewSupported=new Blob([new DataView(new ArrayBuffer(0))]).size===0}catch(e){}function Crc32(){var crc=-1,that=this;that.append=function(data){var offset,table=that.table;for(offset=0;offset<data.length;offset++)crc=(crc>>>8)^table[(crc^data[offset])&0xFF]};that.get=function(){return~crc}}Crc32.prototype.table=(function(){var i,j,t,table=[];for(i=0;i<256;i++){t=i;for(j=0;j<8;j++)if(t&1)t=(t>>>1)^0xEDB88320;else t=t>>>1;table[i]=t}return table})();function blobSlice(blob,index,length){if(blob.slice)return blob.slice(index,index+length);else if(blob.webkitSlice)return blob.webkitSlice(index,index+length);else if(blob.mozSlice)return blob.mozSlice(index,index+length);else if(blob.msSlice)return blob.msSlice(index,index+length)}function getDataHelper(byteLength,bytes){var dataBuffer,dataArray;dataBuffer=new ArrayBuffer(byteLength);dataArray=new Uint8Array(dataBuffer);if(bytes)dataArray.set(bytes,0);return{buffer:dataBuffer,array:dataArray,view:new DataView(dataBuffer)}}function Reader(){}function TextReader(text){var that=this,blobReader;function init(callback,onerror){var blob=new Blob([text],{type:TEXT_PLAIN});blobReader=new BlobReader(blob);blobReader.init(function(){that.size=blobReader.size;callback()},onerror)}function readUint8Array(index,length,callback,onerror){blobReader.readUint8Array(index,length,callback,onerror)}that.size=0;that.init=init;that.readUint8Array=readUint8Array}TextReader.prototype=new Reader();TextReader.prototype.constructor=TextReader;function Data64URIReader(dataURI){var that=this,dataStart;function init(callback){var dataEnd=dataURI.length;while(dataURI.charAt(dataEnd-1)=="=")dataEnd--;dataStart=dataURI.indexOf(",")+1;that.size=Math.floor((dataEnd-dataStart)*0.75);callback()}function readUint8Array(index,length,callback){var i,data=getDataHelper(length);var start=Math.floor(index/3)*4;var end=Math.ceil((index+length)/3)*4;var bytes=obj.atob(dataURI.substring(start+dataStart,end+dataStart));var delta=index-Math.floor(start/4)*3;for(i=delta;i<delta+length;i++)data.array[i-delta]=bytes.charCodeAt(i);callback(data.array)}that.size=0;that.init=init;that.readUint8Array=readUint8Array}Data64URIReader.prototype=new Reader();Data64URIReader.prototype.constructor=Data64URIReader;function BlobReader(blob){var that=this;function init(callback){this.size=blob.size;callback()}function readUint8Array(index,length,callback,onerror){var reader=new FileReader();reader.onload=function(e){callback(new Uint8Array(e.target.result))};reader.onerror=onerror;reader.readAsArrayBuffer(blobSlice(blob,index,length))}that.size=0;that.init=init;that.readUint8Array=readUint8Array}BlobReader.prototype=new Reader();BlobReader.prototype.constructor=BlobReader;function Writer(){}Writer.prototype.getData=function(callback){callback(this.data)};function TextWriter(encoding){var that=this,blob;function init(callback){blob=new Blob([],{type:TEXT_PLAIN});callback()}function writeUint8Array(array,callback){blob=new Blob([blob,appendABViewSupported?array:array.buffer],{type:TEXT_PLAIN});callback()}function getData(callback,onerror){var reader=new FileReader();reader.onload=function(e){callback(e.target.result)};reader.onerror=onerror;reader.readAsText(blob,encoding)}that.init=init;that.writeUint8Array=writeUint8Array;that.getData=getData}TextWriter.prototype=new Writer();TextWriter.prototype.constructor=TextWriter;function Data64URIWriter(contentType){var that=this,data="",pending="";function init(callback){data+="data:"+(contentType||"")+";base64,";callback()}function writeUint8Array(array,callback){var i,delta=pending.length,dataString=pending;pending="";for(i=0;i<(Math.floor((delta+array.length)/3)*3)-delta;i++)dataString+=String.fromCharCode(array[i]);for(;i<array.length;i++)pending+=String.fromCharCode(array[i]);if(dataString.length>2)data+=obj.btoa(dataString);else pending=dataString;callback()}function getData(callback){callback(data+obj.btoa(pending))}that.init=init;that.writeUint8Array=writeUint8Array;that.getData=getData}Data64URIWriter.prototype=new Writer();Data64URIWriter.prototype.constructor=Data64URIWriter;function BlobWriter(contentType){var blob,that=this;function init(callback){blob=new Blob([],{type:contentType});callback()}function writeUint8Array(array,callback){blob=new Blob([blob,appendABViewSupported?array:array.buffer],{type:contentType});callback()}function getData(callback){callback(blob)}that.init=init;that.writeUint8Array=writeUint8Array;that.getData=getData}BlobWriter.prototype=new Writer();BlobWriter.prototype.constructor=BlobWriter;function launchWorkerProcess(worker,reader,writer,offset,size,onappend,onprogress,onend,onreaderror,onwriteerror){var chunkIndex=0,index,outputSize;function onflush(){worker.removeEventListener(MESSAGE_EVENT,onmessage,false);onend(outputSize)}function onmessage(event){var message=event.data,data=message.data;if(message.onappend){outputSize+=data.length;writer.writeUint8Array(data,function(){onappend(false,data);step()},onwriteerror)}if(message.onflush)if(data){outputSize+=data.length;writer.writeUint8Array(data,function(){onappend(false,data);onflush()},onwriteerror)}else onflush();if(message.progress&&onprogress)onprogress(index+message.current,size)}function step(){index=chunkIndex*CHUNK_SIZE;if(index<size)reader.readUint8Array(offset+index,Math.min(CHUNK_SIZE,size-index),function(array){worker.postMessage({append:true,data:array});chunkIndex++;if(onprogress)onprogress(index,size);onappend(true,array)},onreaderror);else worker.postMessage({flush:true})}outputSize=0;worker.addEventListener(MESSAGE_EVENT,onmessage,false);step()}function launchProcess(process,reader,writer,offset,size,onappend,onprogress,onend,onreaderror,onwriteerror){var chunkIndex=0,index,outputSize=0;function step(){var outputData;index=chunkIndex*CHUNK_SIZE;if(index<size)reader.readUint8Array(offset+index,Math.min(CHUNK_SIZE,size-index),function(inputData){var outputData=process.append(inputData,function(){if(onprogress)onprogress(offset+index,size)});outputSize+=outputData.length;onappend(true,inputData);writer.writeUint8Array(outputData,function(){onappend(false,outputData);chunkIndex++;setTimeout(step,1)},onwriteerror);if(onprogress)onprogress(index,size)},onreaderror);else{outputData=process.flush();if(outputData){outputSize+=outputData.length;writer.writeUint8Array(outputData,function(){onappend(false,outputData);onend(outputSize)},onwriteerror)}else onend(outputSize)}}step()}function inflate(reader,writer,offset,size,computeCrc32,onend,onprogress,onreaderror,onwriteerror){var worker,crc32=new Crc32();function oninflateappend(sending,array){if(computeCrc32&&!sending)crc32.append(array)}function oninflateend(outputSize){onend(outputSize,crc32.get())}if(obj.zip.useWebWorkers){worker=new Worker(obj.zip.workerScriptsPath+INFLATE_JS);launchWorkerProcess(worker,reader,writer,offset,size,oninflateappend,onprogress,oninflateend,onreaderror,onwriteerror)}else launchProcess(new obj.zip.Inflater(),reader,writer,offset,size,oninflateappend,onprogress,oninflateend,onreaderror,onwriteerror);return worker}function deflate(reader,writer,level,onend,onprogress,onreaderror,onwriteerror){var worker,crc32=new Crc32();function ondeflateappend(sending,array){if(sending)crc32.append(array)}function ondeflateend(outputSize){onend(outputSize,crc32.get())}function onmessage(){worker.removeEventListener(MESSAGE_EVENT,onmessage,false);launchWorkerProcess(worker,reader,writer,0,reader.size,ondeflateappend,onprogress,ondeflateend,onreaderror,onwriteerror)}if(obj.zip.useWebWorkers){worker=new Worker(obj.zip.workerScriptsPath+DEFLATE_JS);worker.addEventListener(MESSAGE_EVENT,onmessage,false);worker.postMessage({init:true,level:level})}else launchProcess(new obj.zip.Deflater(),reader,writer,0,reader.size,ondeflateappend,onprogress,ondeflateend,onreaderror,onwriteerror);return worker}function copy(reader,writer,offset,size,computeCrc32,onend,onprogress,onreaderror,onwriteerror){var chunkIndex=0,crc32=new Crc32();function step(){var index=chunkIndex*CHUNK_SIZE;if(index<size)reader.readUint8Array(offset+index,Math.min(CHUNK_SIZE,size-index),function(array){if(computeCrc32)crc32.append(array);if(onprogress)onprogress(index,size,array);writer.writeUint8Array(array,function(){chunkIndex++;step()},onwriteerror)},onreaderror);else onend(size,crc32.get())}step()}function decodeASCII(str){var i,out="",charCode,extendedASCII=['\u00C7','\u00FC','\u00E9','\u00E2','\u00E4','\u00E0','\u00E5','\u00E7','\u00EA','\u00EB','\u00E8','\u00EF','\u00EE','\u00EC','\u00C4','\u00C5','\u00C9','\u00E6','\u00C6','\u00F4','\u00F6','\u00F2','\u00FB','\u00F9','\u00FF','\u00D6','\u00DC','\u00F8','\u00A3','\u00D8','\u00D7','\u0192','\u00E1','\u00ED','\u00F3','\u00FA','\u00F1','\u00D1','\u00AA','\u00BA','\u00BF','\u00AE','\u00AC','\u00BD','\u00BC','\u00A1','\u00AB','\u00BB','_','_','_','\u00A6','\u00A6','\u00C1','\u00C2','\u00C0','\u00A9','\u00A6','\u00A6','+','+','\u00A2','\u00A5','+','+','-','-','+','-','+','\u00E3','\u00C3','+','+','-','-','\u00A6','-','+','\u00A4','\u00F0','\u00D0','\u00CA','\u00CB','\u00C8','i','\u00CD','\u00CE','\u00CF','+','+','_','_','\u00A6','\u00CC','_','\u00D3','\u00DF','\u00D4','\u00D2','\u00F5','\u00D5','\u00B5','\u00FE','\u00DE','\u00DA','\u00DB','\u00D9','\u00FD','\u00DD','\u00AF','\u00B4','\u00AD','\u00B1','_','\u00BE','\u00B6','\u00A7','\u00F7','\u00B8','\u00B0','\u00A8','\u00B7','\u00B9','\u00B3','\u00B2','_',' '];for(i=0;i<str.length;i++){charCode=str.charCodeAt(i)&0xFF;if(charCode>127)out+=extendedASCII[charCode-128];else out+=String.fromCharCode(charCode)}return out}function decodeUTF8(string){return decodeURIComponent(escape(string))}function getString(bytes){var i,str="";for(i=0;i<bytes.length;i++)str+=String.fromCharCode(bytes[i]);return str}function getDate(timeRaw){var date=(timeRaw&0xffff0000)>>16,time=timeRaw&0x0000ffff;try{return new Date(1980+((date&0xFE00)>>9),((date&0x01E0)>>5)-1,date&0x001F,(time&0xF800)>>11,(time&0x07E0)>>5,(time&0x001F)*2,0)}catch(e){}}function readCommonHeader(entry,data,index,centralDirectory,onerror){entry.version=data.view.getUint16(index,true);entry.bitFlag=data.view.getUint16(index+2,true);entry.compressionMethod=data.view.getUint16(index+4,true);entry.lastModDateRaw=data.view.getUint32(index+6,true);entry.lastModDate=getDate(entry.lastModDateRaw);if((entry.bitFlag&0x01)===0x01){onerror(ERR_ENCRYPTED);return}if(centralDirectory||(entry.bitFlag&0x0008)!=0x0008){entry.crc32=data.view.getUint32(index+10,true);entry.compressedSize=data.view.getUint32(index+14,true);entry.uncompressedSize=data.view.getUint32(index+18,true)}if(entry.compressedSize===0xFFFFFFFF||entry.uncompressedSize===0xFFFFFFFF){onerror(ERR_ZIP64);return}entry.filenameLength=data.view.getUint16(index+22,true);entry.extraFieldLength=data.view.getUint16(index+24,true)}function createZipReader(reader,onerror){function Entry(){}Entry.prototype.getData=function(writer,onend,onprogress,checkCrc32){var that=this,worker;function terminate(callback,param){if(worker)worker.terminate();worker=null;if(callback)callback(param)}function testCrc32(crc32){var dataCrc32=getDataHelper(4);dataCrc32.view.setUint32(0,crc32);return that.crc32==dataCrc32.view.getUint32(0)}function getWriterData(uncompressedSize,crc32){if(checkCrc32&&!testCrc32(crc32))onreaderror();else writer.getData(function(data){terminate(onend,data)})}function onreaderror(){terminate(onerror,ERR_READ_DATA)}function onwriteerror(){terminate(onerror,ERR_WRITE_DATA)}reader.readUint8Array(that.offset,30,function(bytes){var data=getDataHelper(bytes.length,bytes),dataOffset;if(data.view.getUint32(0)!=0x504b0304){onerror(ERR_BAD_FORMAT);return}readCommonHeader(that,data,4,false,onerror);dataOffset=that.offset+30+that.filenameLength+that.extraFieldLength;writer.init(function(){if(that.compressionMethod===0)copy(reader,writer,dataOffset,that.compressedSize,checkCrc32,getWriterData,onprogress,onreaderror,onwriteerror);else worker=inflate(reader,writer,dataOffset,that.compressedSize,checkCrc32,getWriterData,onprogress,onreaderror,onwriteerror)},onwriteerror)},onreaderror)};function seekEOCDR(offset,entriesCallback){reader.readUint8Array(reader.size-offset,offset,function(bytes){var dataView=getDataHelper(bytes.length,bytes).view;if(dataView.getUint32(0)!=0x504b0506){seekEOCDR(offset+1,entriesCallback)}else{entriesCallback(dataView)}},function(){onerror(ERR_READ)})}return{getEntries:function(callback){if(reader.size<22){onerror(ERR_BAD_FORMAT);return}seekEOCDR(22,function(dataView){var datalength,fileslength;datalength=dataView.getUint32(16,true);fileslength=dataView.getUint16(8,true);reader.readUint8Array(datalength,reader.size-datalength,function(bytes){var i,index=0,entries=[],entry,filename,comment,data=getDataHelper(bytes.length,bytes);for(i=0;i<fileslength;i++){entry=new Entry();if(data.view.getUint32(index)!=0x504b0102){onerror(ERR_BAD_FORMAT);return}readCommonHeader(entry,data,index+6,true,onerror);entry.commentLength=data.view.getUint16(index+32,true);entry.directory=((data.view.getUint8(index+38)&0x10)==0x10);entry.offset=data.view.getUint32(index+42,true);filename=getString(data.array.subarray(index+46,index+46+entry.filenameLength));entry.filename=((entry.bitFlag&0x0800)===0x0800)?decodeUTF8(filename):decodeASCII(filename);if(!entry.directory&&entry.filename.charAt(entry.filename.length-1)=="/")entry.directory=true;comment=getString(data.array.subarray(index+46+entry.filenameLength+entry.extraFieldLength,index+46+entry.filenameLength+entry.extraFieldLength+entry.commentLength));entry.comment=((entry.bitFlag&0x0800)===0x0800)?decodeUTF8(comment):decodeASCII(comment);entries.push(entry);index+=46+entry.filenameLength+entry.extraFieldLength+entry.commentLength}callback(entries)},function(){onerror(ERR_READ)})})},close:function(callback){if(callback)callback()}}}function encodeUTF8(string){return unescape(encodeURIComponent(string))}function getBytes(str){var i,array=[];for(i=0;i<str.length;i++)array.push(str.charCodeAt(i));return array}function createZipWriter(writer,onerror,dontDeflate){var worker,files={},filenames=[],datalength=0;function terminate(callback,message){if(worker)worker.terminate();worker=null;if(callback)callback(message)}function onwriteerror(){terminate(onerror,ERR_WRITE)}function onreaderror(){terminate(onerror,ERR_READ_DATA)}return{add:function(name,reader,onend,onprogress,options){var header,filename,date;function writeHeader(callback){var data;date=options.lastModDate||new Date();header=getDataHelper(26);files[name]={headerArray:header.array,directory:options.directory,filename:filename,offset:datalength,comment:getBytes(encodeUTF8(options.comment||""))};header.view.setUint32(0,0x14000808);if(options.version)header.view.setUint8(0,options.version);if(!dontDeflate&&options.level!==0&&!options.directory)header.view.setUint16(4,0x0800);header.view.setUint16(6,(((date.getHours()<<6)|date.getMinutes())<<5)|date.getSeconds()/2,true);header.view.setUint16(8,((((date.getFullYear()-1980)<<4)|(date.getMonth()+1))<<5)|date.getDate(),true);header.view.setUint16(22,filename.length,true);data=getDataHelper(30+filename.length);data.view.setUint32(0,0x504b0304);data.array.set(header.array,4);data.array.set(filename,30);datalength+=data.array.length;writer.writeUint8Array(data.array,callback,onwriteerror)}function writeFooter(compressedLength,crc32){var footer=getDataHelper(16);datalength+=compressedLength||0;footer.view.setUint32(0,0x504b0708);if(typeof crc32!="undefined"){header.view.setUint32(10,crc32,true);footer.view.setUint32(4,crc32,true)}if(reader){footer.view.setUint32(8,compressedLength,true);header.view.setUint32(14,compressedLength,true);footer.view.setUint32(12,reader.size,true);header.view.setUint32(18,reader.size,true)}writer.writeUint8Array(footer.array,function(){datalength+=16;terminate(onend)},onwriteerror)}function writeFile(){options=options||{};name=name.trim();if(options.directory&&name.charAt(name.length-1)!="/")name+="/";if(files.hasOwnProperty(name)){onerror(ERR_DUPLICATED_NAME);return}filename=getBytes(encodeUTF8(name));filenames.push(name);writeHeader(function(){if(reader)if(dontDeflate||options.level===0)copy(reader,writer,0,reader.size,true,writeFooter,onprogress,onreaderror,onwriteerror);else worker=deflate(reader,writer,options.level,writeFooter,onprogress,onreaderror,onwriteerror);else writeFooter()},onwriteerror)}if(reader)reader.init(writeFile,onreaderror);else writeFile()},close:function(callback){var data,length=0,index=0,indexFilename,file;for(indexFilename=0;indexFilename<filenames.length;indexFilename++){file=files[filenames[indexFilename]];length+=46+file.filename.length+file.comment.length}data=getDataHelper(length+22);for(indexFilename=0;indexFilename<filenames.length;indexFilename++){file=files[filenames[indexFilename]];data.view.setUint32(index,0x504b0102);data.view.setUint16(index+4,0x1400);data.array.set(file.headerArray,index+6);data.view.setUint16(index+32,file.comment.length,true);if(file.directory)data.view.setUint8(index+38,0x10);data.view.setUint32(index+42,file.offset,true);data.array.set(file.filename,index+46);data.array.set(file.comment,index+46+file.filename.length);index+=46+file.filename.length+file.comment.length}data.view.setUint32(index,0x504b0506);data.view.setUint16(index+8,filenames.length,true);data.view.setUint16(index+10,filenames.length,true);data.view.setUint32(index+12,length,true);data.view.setUint32(index+16,datalength,true);writer.writeUint8Array(data.array,function(){terminate(function(){writer.getData(callback)})},onwriteerror)}}}obj.zip={Reader:Reader,Writer:Writer,BlobReader:BlobReader,Data64URIReader:Data64URIReader,TextReader:TextReader,BlobWriter:BlobWriter,Data64URIWriter:Data64URIWriter,TextWriter:TextWriter,createReader:function(reader,callback,onerror){reader.init(function(){callback(createZipReader(reader,onerror))},onerror)},createWriter:function(writer,callback,onerror,dontDeflate){writer.init(function(){callback(createZipWriter(writer,onerror,dontDeflate))},onerror)},workerScriptsPath:"",useWebWorkers:true}})(this);
/*
 Copyright (c) 2013 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright
 notice, this list of conditions and the following disclaimer in
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */
(function(){var ERR_HTTP_RANGE="HTTP Range not supported.";var Reader=zip.Reader;var Writer=zip.Writer;var ZipDirectoryEntry;var appendABViewSupported;try{appendABViewSupported=new Blob([new DataView(new ArrayBuffer(0))]).size===0}catch(e){}function HttpReader(url){var that=this;function getData(callback,onerror){var request;if(!that.data){request=new XMLHttpRequest();request.addEventListener("load",function(){if(!that.size)that.size=Number(request.getResponseHeader("Content-Length"));that.data=new Uint8Array(request.response);callback()},false);request.addEventListener("error",onerror,false);request.open("GET",url);request.responseType="arraybuffer";request.send()}else callback()}function init(callback,onerror){var request=new XMLHttpRequest();request.addEventListener("load",function(){that.size=Number(request.getResponseHeader("Content-Length"));callback()},false);request.addEventListener("error",onerror,false);request.open("HEAD",url);request.send()}function readUint8Array(index,length,callback,onerror){getData(function(){callback(new Uint8Array(that.data.subarray(index,index+length)))},onerror)}that.size=0;that.init=init;that.readUint8Array=readUint8Array}HttpReader.prototype=new Reader();HttpReader.prototype.constructor=HttpReader;function HttpRangeReader(url){var that=this;function init(callback,onerror){var request=new XMLHttpRequest();request.addEventListener("load",function(){that.size=Number(request.getResponseHeader("Content-Length"));if(request.getResponseHeader("Accept-Ranges")=="bytes")callback();else onerror(ERR_HTTP_RANGE)},false);request.addEventListener("error",onerror,false);request.open("HEAD",url);request.send()}function readArrayBuffer(index,length,callback,onerror){var request=new XMLHttpRequest();request.open("GET",url);request.responseType="arraybuffer";request.setRequestHeader("Range","bytes="+index+"-"+(index+length-1));request.addEventListener("load",function(){callback(request.response)},false);request.addEventListener("error",onerror,false);request.send()}function readUint8Array(index,length,callback,onerror){readArrayBuffer(index,length,function(arraybuffer){callback(new Uint8Array(arraybuffer))},onerror)}that.size=0;that.init=init;that.readUint8Array=readUint8Array}HttpRangeReader.prototype=new Reader();HttpRangeReader.prototype.constructor=HttpRangeReader;function ArrayBufferReader(arrayBuffer){var that=this;function init(callback,onerror){that.size=arrayBuffer.byteLength;callback()}function readUint8Array(index,length,callback,onerror){callback(new Uint8Array(arrayBuffer.slice(index,index+length)))}that.size=0;that.init=init;that.readUint8Array=readUint8Array}ArrayBufferReader.prototype=new Reader();ArrayBufferReader.prototype.constructor=ArrayBufferReader;function ArrayBufferWriter(){var array,that=this;function init(callback,onerror){array=new Uint8Array();callback()}function writeUint8Array(arr,callback,onerror){var tmpArray=new Uint8Array(array.length+arr.length);tmpArray.set(array);tmpArray.set(arr,array.length);array=tmpArray;callback()}function getData(callback){callback(array.buffer)}that.init=init;that.writeUint8Array=writeUint8Array;that.getData=getData}ArrayBufferWriter.prototype=new Writer();ArrayBufferWriter.prototype.constructor=ArrayBufferWriter;function FileWriter(fileEntry,contentType){var writer,that=this;function init(callback,onerror){fileEntry.createWriter(function(fileWriter){writer=fileWriter;callback()},onerror)}function writeUint8Array(array,callback,onerror){var blob=new Blob([appendABViewSupported?array:array.buffer],{type:contentType});writer.onwrite=function(){writer.onwrite=null;callback()};writer.onerror=onerror;writer.write(blob)}function getData(callback){fileEntry.file(callback)}that.init=init;that.writeUint8Array=writeUint8Array;that.getData=getData}FileWriter.prototype=new Writer();FileWriter.prototype.constructor=FileWriter;zip.FileWriter=FileWriter;zip.HttpReader=HttpReader;zip.HttpRangeReader=HttpRangeReader;zip.ArrayBufferReader=ArrayBufferReader;zip.ArrayBufferWriter=ArrayBufferWriter;if(zip.fs){ZipDirectoryEntry=zip.fs.ZipDirectoryEntry;ZipDirectoryEntry.prototype.addHttpContent=function(name,URL,useRangeHeader){function addChild(parent,name,params,directory){if(parent.directory)return directory?new ZipDirectoryEntry(parent.fs,name,params,parent):new zip.fs.ZipFileEntry(parent.fs,name,params,parent);else throw"Parent entry is not a directory."}return addChild(this,name,{data:URL,Reader:useRangeHeader?HttpRangeReader:HttpReader})};ZipDirectoryEntry.prototype.importHttpContent=function(URL,useRangeHeader,onend,onerror){this.importZip(useRangeHeader?new HttpRangeReader(URL):new HttpReader(URL),onend,onerror)};zip.fs.FS.prototype.importHttpContent=function(URL,useRangeHeader,onend,onerror){this.entries=[];this.root=new ZipDirectoryEntry(this);this.root.importHttpContent(URL,useRangeHeader,onend,onerror)}}})();
/*
 Copyright (c) 2013 Gildas Lormeau. All rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice,
 this list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright 
 notice, this list of conditions and the following disclaimer in 
 the documentation and/or other materials provided with the distribution.

 3. The names of the authors may not be used to endorse or promote products
 derived from this software without specific prior written permission.

 THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL JCRAFT,
 INC. OR ANY CONTRIBUTORS TO THIS SOFTWARE BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA,
 OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * This program is based on JZlib 1.0.2 ymnk, JCraft,Inc.
 * JZlib is based on zlib-1.1.3, so all credit should go authors
 * Jean-loup Gailly(jloup@gzip.org) and Mark Adler(madler@alumni.caltech.edu)
 * and contributors of zlib.
 */
(function(obj){var MAX_BITS=15;var Z_OK=0;var Z_STREAM_END=1;var Z_NEED_DICT=2;var Z_STREAM_ERROR=-2;var Z_DATA_ERROR=-3;var Z_MEM_ERROR=-4;var Z_BUF_ERROR=-5;var inflate_mask=[0x00000000,0x00000001,0x00000003,0x00000007,0x0000000f,0x0000001f,0x0000003f,0x0000007f,0x000000ff,0x000001ff,0x000003ff,0x000007ff,0x00000fff,0x00001fff,0x00003fff,0x00007fff,0x0000ffff];var MANY=1440;var Z_NO_FLUSH=0;var Z_FINISH=4;var fixed_bl=9;var fixed_bd=5;var fixed_tl=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255];var fixed_td=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577];var cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0];var cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112];var cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];var cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];var BMAX=15;function InfTree(){var that=this;var hn;var v;var c;var r;var u;var x;function huft_build(b,bindex,n,s,d,e,t,m,hp,hn,v){var a;var f;var g;var h;var i;var j;var k;var l;var mask;var p;var q;var w;var xp;var y;var z;p=0;i=n;do{c[b[bindex+p]]++;p++;i--}while(i!==0);if(c[0]==n){t[0]=-1;m[0]=0;return Z_OK}l=m[0];for(j=1;j<=BMAX;j++)if(c[j]!==0)break;k=j;if(l<j){l=j}for(i=BMAX;i!==0;i--){if(c[i]!==0)break}g=i;if(l>i){l=i}m[0]=l;for(y=1<<j;j<i;j++,y<<=1){if((y-=c[j])<0){return Z_DATA_ERROR}}if((y-=c[i])<0){return Z_DATA_ERROR}c[i]+=y;x[1]=j=0;p=1;xp=2;while(--i!==0){x[xp]=(j+=c[p]);xp++;p++}i=0;p=0;do{if((j=b[bindex+p])!==0){v[x[j]++]=i}p++}while(++i<n);n=x[g];x[0]=i=0;p=0;h=-1;w=-l;u[0]=0;q=0;z=0;for(;k<=g;k++){a=c[k];while(a--!==0){while(k>w+l){h++;w+=l;z=g-w;z=(z>l)?l:z;if((f=1<<(j=k-w))>a+1){f-=a+1;xp=k;if(j<z){while(++j<z){if((f<<=1)<=c[++xp])break;f-=c[xp]}}}z=1<<j;if(hn[0]+z>MANY){return Z_DATA_ERROR}u[h]=q=hn[0];hn[0]+=z;if(h!==0){x[h]=i;r[0]=j;r[1]=l;j=i>>>(w-l);r[2]=(q-u[h-1]-j);hp.set(r,(u[h-1]+j)*3)}else{t[0]=q}}r[1]=(k-w);if(p>=n){r[0]=128+64}else if(v[p]<s){r[0]=(v[p]<256?0:32+64);r[2]=v[p++]}else{r[0]=(e[v[p]-s]+16+64);r[2]=d[v[p++]-s]}f=1<<(k-w);for(j=i>>>w;j<z;j+=f){hp.set(r,(q+j)*3)}for(j=1<<(k-1);(i&j)!==0;j>>>=1){i^=j}i^=j;mask=(1<<w)-1;while((i&mask)!=x[h]){h--;w-=l;mask=(1<<w)-1}}}return y!==0&&g!=1?Z_BUF_ERROR:Z_OK}function initWorkArea(vsize){var i;if(!hn){hn=[];v=[];c=new Int32Array(BMAX+1);r=[];u=new Int32Array(BMAX);x=new Int32Array(BMAX+1)}if(v.length<vsize){v=[]}for(i=0;i<vsize;i++){v[i]=0}for(i=0;i<BMAX+1;i++){c[i]=0}for(i=0;i<3;i++){r[i]=0}u.set(c.subarray(0,BMAX),0);x.set(c.subarray(0,BMAX+1),0)}that.inflate_trees_bits=function(c,bb,tb,hp,z){var result;initWorkArea(19);hn[0]=0;result=huft_build(c,0,19,19,null,null,tb,bb,hp,hn,v);if(result==Z_DATA_ERROR){z.msg="oversubscribed dynamic bit lengths tree"}else if(result==Z_BUF_ERROR||bb[0]===0){z.msg="incomplete dynamic bit lengths tree";result=Z_DATA_ERROR}return result};that.inflate_trees_dynamic=function(nl,nd,c,bl,bd,tl,td,hp,z){var result;initWorkArea(288);hn[0]=0;result=huft_build(c,0,nl,257,cplens,cplext,tl,bl,hp,hn,v);if(result!=Z_OK||bl[0]===0){if(result==Z_DATA_ERROR){z.msg="oversubscribed literal/length tree"}else if(result!=Z_MEM_ERROR){z.msg="incomplete literal/length tree";result=Z_DATA_ERROR}return result}initWorkArea(288);result=huft_build(c,nl,nd,0,cpdist,cpdext,td,bd,hp,hn,v);if(result!=Z_OK||(bd[0]===0&&nl>257)){if(result==Z_DATA_ERROR){z.msg="oversubscribed distance tree"}else if(result==Z_BUF_ERROR){z.msg="incomplete distance tree";result=Z_DATA_ERROR}else if(result!=Z_MEM_ERROR){z.msg="empty distance tree with lengths";result=Z_DATA_ERROR}return result}return Z_OK}}InfTree.inflate_trees_fixed=function(bl,bd,tl,td){bl[0]=fixed_bl;bd[0]=fixed_bd;tl[0]=fixed_tl;td[0]=fixed_td;return Z_OK};var START=0;var LEN=1;var LENEXT=2;var DIST=3;var DISTEXT=4;var COPY=5;var LIT=6;var WASH=7;var END=8;var BADCODE=9;function InfCodes(){var that=this;var mode;var len=0;var tree;var tree_index=0;var need=0;var lit=0;var get=0;var dist=0;var lbits=0;var dbits=0;var ltree;var ltree_index=0;var dtree;var dtree_index=0;function inflate_fast(bl,bd,tl,tl_index,td,td_index,s,z){var t;var tp;var tp_index;var e;var b;var k;var p;var n;var q;var m;var ml;var md;var c;var d;var r;var tp_index_t_3;p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;q=s.write;m=q<s.read?s.read-q-1:s.end-q;ml=inflate_mask[bl];md=inflate_mask[bd];do{while(k<(20)){n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}t=b&ml;tp=tl;tp_index=tl_index;tp_index_t_3=(tp_index+t)*3;if((e=tp[tp_index_t_3])===0){b>>=(tp[tp_index_t_3+1]);k-=(tp[tp_index_t_3+1]);s.window[q++]=tp[tp_index_t_3+2];m--;continue}do{b>>=(tp[tp_index_t_3+1]);k-=(tp[tp_index_t_3+1]);if((e&16)!==0){e&=15;c=tp[tp_index_t_3+2]+(b&inflate_mask[e]);b>>=e;k-=e;while(k<(15)){n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}t=b&md;tp=td;tp_index=td_index;tp_index_t_3=(tp_index+t)*3;e=tp[tp_index_t_3];do{b>>=(tp[tp_index_t_3+1]);k-=(tp[tp_index_t_3+1]);if((e&16)!==0){e&=15;while(k<(e)){n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}d=tp[tp_index_t_3+2]+(b&inflate_mask[e]);b>>=(e);k-=(e);m-=c;if(q>=d){r=q-d;if(q-r>0&&2>(q-r)){s.window[q++]=s.window[r++];s.window[q++]=s.window[r++];c-=2}else{s.window.set(s.window.subarray(r,r+2),q);q+=2;r+=2;c-=2}}else{r=q-d;do{r+=s.end}while(r<0);e=s.end-r;if(c>e){c-=e;if(q-r>0&&e>(q-r)){do{s.window[q++]=s.window[r++]}while(--e!==0)}else{s.window.set(s.window.subarray(r,r+e),q);q+=e;r+=e;e=0}r=0}}if(q-r>0&&c>(q-r)){do{s.window[q++]=s.window[r++]}while(--c!==0)}else{s.window.set(s.window.subarray(r,r+c),q);q+=c;r+=c;c=0}break}else if((e&64)===0){t+=tp[tp_index_t_3+2];t+=(b&inflate_mask[e]);tp_index_t_3=(tp_index+t)*3;e=tp[tp_index_t_3]}else{z.msg="invalid distance code";c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return Z_DATA_ERROR}}while(true);break}if((e&64)===0){t+=tp[tp_index_t_3+2];t+=(b&inflate_mask[e]);tp_index_t_3=(tp_index+t)*3;if((e=tp[tp_index_t_3])===0){b>>=(tp[tp_index_t_3+1]);k-=(tp[tp_index_t_3+1]);s.window[q++]=tp[tp_index_t_3+2];m--;break}}else if((e&32)!==0){c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return Z_STREAM_END}else{z.msg="invalid literal/length code";c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return Z_DATA_ERROR}}while(true)}while(m>=258&&n>=10);c=z.avail_in-n;c=(k>>3)<c?k>>3:c;n+=c;p-=c;k-=c<<3;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return Z_OK}that.init=function(bl,bd,tl,tl_index,td,td_index){mode=START;lbits=bl;dbits=bd;ltree=tl;ltree_index=tl_index;dtree=td;dtree_index=td_index;tree=null};that.proc=function(s,z,r){var j;var tindex;var e;var b=0;var k=0;var p=0;var n;var q;var m;var f;p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;q=s.write;m=q<s.read?s.read-q-1:s.end-q;while(true){switch(mode){case START:if(m>=258&&n>=10){s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;r=inflate_fast(lbits,dbits,ltree,ltree_index,dtree,dtree_index,s,z);p=z.next_in_index;n=z.avail_in;b=s.bitb;k=s.bitk;q=s.write;m=q<s.read?s.read-q-1:s.end-q;if(r!=Z_OK){mode=r==Z_STREAM_END?WASH:BADCODE;break}}need=lbits;tree=ltree;tree_index=ltree_index;mode=LEN;case LEN:j=need;while(k<(j)){if(n!==0)r=Z_OK;else{s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}tindex=(tree_index+(b&inflate_mask[j]))*3;b>>>=(tree[tindex+1]);k-=(tree[tindex+1]);e=tree[tindex];if(e===0){lit=tree[tindex+2];mode=LIT;break}if((e&16)!==0){get=e&15;len=tree[tindex+2];mode=LENEXT;break}if((e&64)===0){need=e;tree_index=tindex/3+tree[tindex+2];break}if((e&32)!==0){mode=WASH;break}mode=BADCODE;z.msg="invalid literal/length code";r=Z_DATA_ERROR;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r);case LENEXT:j=get;while(k<(j)){if(n!==0)r=Z_OK;else{s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}len+=(b&inflate_mask[j]);b>>=j;k-=j;need=dbits;tree=dtree;tree_index=dtree_index;mode=DIST;case DIST:j=need;while(k<(j)){if(n!==0)r=Z_OK;else{s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}tindex=(tree_index+(b&inflate_mask[j]))*3;b>>=tree[tindex+1];k-=tree[tindex+1];e=(tree[tindex]);if((e&16)!==0){get=e&15;dist=tree[tindex+2];mode=DISTEXT;break}if((e&64)===0){need=e;tree_index=tindex/3+tree[tindex+2];break}mode=BADCODE;z.msg="invalid distance code";r=Z_DATA_ERROR;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r);case DISTEXT:j=get;while(k<(j)){if(n!==0)r=Z_OK;else{s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}dist+=(b&inflate_mask[j]);b>>=j;k-=j;mode=COPY;case COPY:f=q-dist;while(f<0){f+=s.end}while(len!==0){if(m===0){if(q==s.end&&s.read!==0){q=0;m=q<s.read?s.read-q-1:s.end-q}if(m===0){s.write=q;r=s.inflate_flush(z,r);q=s.write;m=q<s.read?s.read-q-1:s.end-q;if(q==s.end&&s.read!==0){q=0;m=q<s.read?s.read-q-1:s.end-q}if(m===0){s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r)}}}s.window[q++]=s.window[f++];m--;if(f==s.end)f=0;len--}mode=START;break;case LIT:if(m===0){if(q==s.end&&s.read!==0){q=0;m=q<s.read?s.read-q-1:s.end-q}if(m===0){s.write=q;r=s.inflate_flush(z,r);q=s.write;m=q<s.read?s.read-q-1:s.end-q;if(q==s.end&&s.read!==0){q=0;m=q<s.read?s.read-q-1:s.end-q}if(m===0){s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r)}}}r=Z_OK;s.window[q++]=lit;m--;mode=START;break;case WASH:if(k>7){k-=8;n++;p--}s.write=q;r=s.inflate_flush(z,r);q=s.write;m=q<s.read?s.read-q-1:s.end-q;if(s.read!=s.write){s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r)}mode=END;case END:r=Z_STREAM_END;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r);case BADCODE:r=Z_DATA_ERROR;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r);default:r=Z_STREAM_ERROR;s.bitb=b;s.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;s.write=q;return s.inflate_flush(z,r)}}};that.free=function(){}}var border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var TYPE=0;var LENS=1;var STORED=2;var TABLE=3;var BTREE=4;var DTREE=5;var CODES=6;var DRY=7;var DONELOCKS=8;var BADBLOCKS=9;function InfBlocks(z,w){var that=this;var mode=TYPE;var left=0;var table=0;var index=0;var blens;var bb=[0];var tb=[0];var codes=new InfCodes();var last=0;var hufts=new Int32Array(MANY*3);var check=0;var inftree=new InfTree();that.bitk=0;that.bitb=0;that.window=new Uint8Array(w);that.end=w;that.read=0;that.write=0;that.reset=function(z,c){if(c)c[0]=check;if(mode==CODES){codes.free(z)}mode=TYPE;that.bitk=0;that.bitb=0;that.read=that.write=0};that.reset(z,null);that.inflate_flush=function(z,r){var n;var p;var q;p=z.next_out_index;q=that.read;n=((q<=that.write?that.write:that.end)-q);if(n>z.avail_out)n=z.avail_out;if(n!==0&&r==Z_BUF_ERROR)r=Z_OK;z.avail_out-=n;z.total_out+=n;z.next_out.set(that.window.subarray(q,q+n),p);p+=n;q+=n;if(q==that.end){q=0;if(that.write==that.end)that.write=0;n=that.write-q;if(n>z.avail_out)n=z.avail_out;if(n!==0&&r==Z_BUF_ERROR)r=Z_OK;z.avail_out-=n;z.total_out+=n;z.next_out.set(that.window.subarray(q,q+n),p);p+=n;q+=n}z.next_out_index=p;that.read=q;return r};that.proc=function(z,r){var t;var b;var k;var p;var n;var q;var m;var i;p=z.next_in_index;n=z.avail_in;b=that.bitb;k=that.bitk;q=that.write;m=(q<that.read?that.read-q-1:that.end-q);while(true){switch(mode){case TYPE:while(k<(3)){if(n!==0){r=Z_OK}else{that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}t=(b&7);last=t&1;switch(t>>>1){case 0:b>>>=(3);k-=(3);t=k&7;b>>>=(t);k-=(t);mode=LENS;break;case 1:var bl=[];var bd=[];var tl=[[]];var td=[[]];InfTree.inflate_trees_fixed(bl,bd,tl,td);codes.init(bl[0],bd[0],tl[0],0,td[0],0);b>>>=(3);k-=(3);mode=CODES;break;case 2:b>>>=(3);k-=(3);mode=TABLE;break;case 3:b>>>=(3);k-=(3);mode=BADBLOCKS;z.msg="invalid block type";r=Z_DATA_ERROR;that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}break;case LENS:while(k<(32)){if(n!==0){r=Z_OK}else{that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}if((((~b)>>>16)&0xffff)!=(b&0xffff)){mode=BADBLOCKS;z.msg="invalid stored block lengths";r=Z_DATA_ERROR;that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}left=(b&0xffff);b=k=0;mode=left!==0?STORED:(last!==0?DRY:TYPE);break;case STORED:if(n===0){that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}if(m===0){if(q==that.end&&that.read!==0){q=0;m=(q<that.read?that.read-q-1:that.end-q)}if(m===0){that.write=q;r=that.inflate_flush(z,r);q=that.write;m=(q<that.read?that.read-q-1:that.end-q);if(q==that.end&&that.read!==0){q=0;m=(q<that.read?that.read-q-1:that.end-q)}if(m===0){that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}}}r=Z_OK;t=left;if(t>n)t=n;if(t>m)t=m;that.window.set(z.read_buf(p,t),q);p+=t;n-=t;q+=t;m-=t;if((left-=t)!==0)break;mode=last!==0?DRY:TYPE;break;case TABLE:while(k<(14)){if(n!==0){r=Z_OK}else{that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}table=t=(b&0x3fff);if((t&0x1f)>29||((t>>5)&0x1f)>29){mode=BADBLOCKS;z.msg="too many length or distance symbols";r=Z_DATA_ERROR;that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}t=258+(t&0x1f)+((t>>5)&0x1f);if(!blens||blens.length<t){blens=[]}else{for(i=0;i<t;i++){blens[i]=0}}b>>>=(14);k-=(14);index=0;mode=BTREE;case BTREE:while(index<4+(table>>>10)){while(k<(3)){if(n!==0){r=Z_OK}else{that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}blens[border[index++]]=b&7;b>>>=(3);k-=(3)}while(index<19){blens[border[index++]]=0}bb[0]=7;t=inftree.inflate_trees_bits(blens,bb,tb,hufts,z);if(t!=Z_OK){r=t;if(r==Z_DATA_ERROR){blens=null;mode=BADBLOCKS}that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}index=0;mode=DTREE;case DTREE:while(true){t=table;if(!(index<258+(t&0x1f)+((t>>5)&0x1f))){break}var j,c;t=bb[0];while(k<(t)){if(n!==0){r=Z_OK}else{that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}t=hufts[(tb[0]+(b&inflate_mask[t]))*3+1];c=hufts[(tb[0]+(b&inflate_mask[t]))*3+2];if(c<16){b>>>=(t);k-=(t);blens[index++]=c}else{i=c==18?7:c-14;j=c==18?11:3;while(k<(t+i)){if(n!==0){r=Z_OK}else{that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}n--;b|=(z.read_byte(p++)&0xff)<<k;k+=8}b>>>=(t);k-=(t);j+=(b&inflate_mask[i]);b>>>=(i);k-=(i);i=index;t=table;if(i+j>258+(t&0x1f)+((t>>5)&0x1f)||(c==16&&i<1)){blens=null;mode=BADBLOCKS;z.msg="invalid bit length repeat";r=Z_DATA_ERROR;that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}c=c==16?blens[i-1]:0;do{blens[i++]=c}while(--j!==0);index=i}}tb[0]=-1;var bl_=[];var bd_=[];var tl_=[];var td_=[];bl_[0]=9;bd_[0]=6;t=table;t=inftree.inflate_trees_dynamic(257+(t&0x1f),1+((t>>5)&0x1f),blens,bl_,bd_,tl_,td_,hufts,z);if(t!=Z_OK){if(t==Z_DATA_ERROR){blens=null;mode=BADBLOCKS}r=t;that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}codes.init(bl_[0],bd_[0],hufts,tl_[0],hufts,td_[0]);mode=CODES;case CODES:that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;if((r=codes.proc(that,z,r))!=Z_STREAM_END){return that.inflate_flush(z,r)}r=Z_OK;codes.free(z);p=z.next_in_index;n=z.avail_in;b=that.bitb;k=that.bitk;q=that.write;m=(q<that.read?that.read-q-1:that.end-q);if(last===0){mode=TYPE;break}mode=DRY;case DRY:that.write=q;r=that.inflate_flush(z,r);q=that.write;m=(q<that.read?that.read-q-1:that.end-q);if(that.read!=that.write){that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}mode=DONELOCKS;case DONELOCKS:r=Z_STREAM_END;that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r);case BADBLOCKS:r=Z_DATA_ERROR;that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r);default:r=Z_STREAM_ERROR;that.bitb=b;that.bitk=k;z.avail_in=n;z.total_in+=p-z.next_in_index;z.next_in_index=p;that.write=q;return that.inflate_flush(z,r)}}};that.free=function(z){that.reset(z,null);that.window=null;hufts=null};that.set_dictionary=function(d,start,n){that.window.set(d.subarray(start,start+n),0);that.read=that.write=n};that.sync_point=function(){return mode==LENS?1:0}}var PRESET_DICT=0x20;var Z_DEFLATED=8;var METHOD=0;var FLAG=1;var DICT4=2;var DICT3=3;var DICT2=4;var DICT1=5;var DICT0=6;var BLOCKS=7;var DONE=12;var BAD=13;var mark=[0,0,0xff,0xff];function Inflate(){var that=this;that.mode=0;that.method=0;that.was=[0];that.need=0;that.marker=0;that.wbits=0;function inflateReset(z){if(!z||!z.istate)return Z_STREAM_ERROR;z.total_in=z.total_out=0;z.msg=null;z.istate.mode=BLOCKS;z.istate.blocks.reset(z,null);return Z_OK}that.inflateEnd=function(z){if(that.blocks)that.blocks.free(z);that.blocks=null;return Z_OK};that.inflateInit=function(z,w){z.msg=null;that.blocks=null;if(w<8||w>15){that.inflateEnd(z);return Z_STREAM_ERROR}that.wbits=w;z.istate.blocks=new InfBlocks(z,1<<w);inflateReset(z);return Z_OK};that.inflate=function(z,f){var r;var b;if(!z||!z.istate||!z.next_in)return Z_STREAM_ERROR;f=f==Z_FINISH?Z_BUF_ERROR:Z_OK;r=Z_BUF_ERROR;while(true){switch(z.istate.mode){case METHOD:if(z.avail_in===0)return r;r=f;z.avail_in--;z.total_in++;if(((z.istate.method=z.read_byte(z.next_in_index++))&0xf)!=Z_DEFLATED){z.istate.mode=BAD;z.msg="unknown compression method";z.istate.marker=5;break}if((z.istate.method>>4)+8>z.istate.wbits){z.istate.mode=BAD;z.msg="invalid window size";z.istate.marker=5;break}z.istate.mode=FLAG;case FLAG:if(z.avail_in===0)return r;r=f;z.avail_in--;z.total_in++;b=(z.read_byte(z.next_in_index++))&0xff;if((((z.istate.method<<8)+b)%31)!==0){z.istate.mode=BAD;z.msg="incorrect header check";z.istate.marker=5;break}if((b&PRESET_DICT)===0){z.istate.mode=BLOCKS;break}z.istate.mode=DICT4;case DICT4:if(z.avail_in===0)return r;r=f;z.avail_in--;z.total_in++;z.istate.need=((z.read_byte(z.next_in_index++)&0xff)<<24)&0xff000000;z.istate.mode=DICT3;case DICT3:if(z.avail_in===0)return r;r=f;z.avail_in--;z.total_in++;z.istate.need+=((z.read_byte(z.next_in_index++)&0xff)<<16)&0xff0000;z.istate.mode=DICT2;case DICT2:if(z.avail_in===0)return r;r=f;z.avail_in--;z.total_in++;z.istate.need+=((z.read_byte(z.next_in_index++)&0xff)<<8)&0xff00;z.istate.mode=DICT1;case DICT1:if(z.avail_in===0)return r;r=f;z.avail_in--;z.total_in++;z.istate.need+=(z.read_byte(z.next_in_index++)&0xff);z.istate.mode=DICT0;return Z_NEED_DICT;case DICT0:z.istate.mode=BAD;z.msg="need dictionary";z.istate.marker=0;return Z_STREAM_ERROR;case BLOCKS:r=z.istate.blocks.proc(z,r);if(r==Z_DATA_ERROR){z.istate.mode=BAD;z.istate.marker=0;break}if(r==Z_OK){r=f}if(r!=Z_STREAM_END){return r}r=f;z.istate.blocks.reset(z,z.istate.was);z.istate.mode=DONE;case DONE:return Z_STREAM_END;case BAD:return Z_DATA_ERROR;default:return Z_STREAM_ERROR}}};that.inflateSetDictionary=function(z,dictionary,dictLength){var index=0;var length=dictLength;if(!z||!z.istate||z.istate.mode!=DICT0)return Z_STREAM_ERROR;if(length>=(1<<z.istate.wbits)){length=(1<<z.istate.wbits)-1;index=dictLength-length}z.istate.blocks.set_dictionary(dictionary,index,length);z.istate.mode=BLOCKS;return Z_OK};that.inflateSync=function(z){var n;var p;var m;var r,w;if(!z||!z.istate)return Z_STREAM_ERROR;if(z.istate.mode!=BAD){z.istate.mode=BAD;z.istate.marker=0}if((n=z.avail_in)===0)return Z_BUF_ERROR;p=z.next_in_index;m=z.istate.marker;while(n!==0&&m<4){if(z.read_byte(p)==mark[m]){m++}else if(z.read_byte(p)!==0){m=0}else{m=4-m}p++;n--}z.total_in+=p-z.next_in_index;z.next_in_index=p;z.avail_in=n;z.istate.marker=m;if(m!=4){return Z_DATA_ERROR}r=z.total_in;w=z.total_out;inflateReset(z);z.total_in=r;z.total_out=w;z.istate.mode=BLOCKS;return Z_OK};that.inflateSyncPoint=function(z){if(!z||!z.istate||!z.istate.blocks)return Z_STREAM_ERROR;return z.istate.blocks.sync_point()}}function ZStream(){}ZStream.prototype={inflateInit:function(bits){var that=this;that.istate=new Inflate();if(!bits)bits=MAX_BITS;return that.istate.inflateInit(that,bits)},inflate:function(f){var that=this;if(!that.istate)return Z_STREAM_ERROR;return that.istate.inflate(that,f)},inflateEnd:function(){var that=this;if(!that.istate)return Z_STREAM_ERROR;var ret=that.istate.inflateEnd(that);that.istate=null;return ret},inflateSync:function(){var that=this;if(!that.istate)return Z_STREAM_ERROR;return that.istate.inflateSync(that)},inflateSetDictionary:function(dictionary,dictLength){var that=this;if(!that.istate)return Z_STREAM_ERROR;return that.istate.inflateSetDictionary(that,dictionary,dictLength)},read_byte:function(start){var that=this;return that.next_in.subarray(start,start+1)[0]},read_buf:function(start,size){var that=this;return that.next_in.subarray(start,start+size)}};function Inflater(){var that=this;var z=new ZStream();var bufsize=512;var flush=Z_NO_FLUSH;var buf=new Uint8Array(bufsize);var nomoreinput=false;z.inflateInit();z.next_out=buf;that.append=function(data,onprogress){var err,buffers=[],lastIndex=0,bufferIndex=0,bufferSize=0,array;if(data.length===0)return;z.next_in_index=0;z.next_in=data;z.avail_in=data.length;do{z.next_out_index=0;z.avail_out=bufsize;if((z.avail_in===0)&&(!nomoreinput)){z.next_in_index=0;nomoreinput=true}err=z.inflate(flush);if(nomoreinput&&(err==Z_BUF_ERROR))return-1;if(err!=Z_OK&&err!=Z_STREAM_END)throw"inflating: "+z.msg;if((nomoreinput||err==Z_STREAM_END)&&(z.avail_in==data.length))return-1;if(z.next_out_index)if(z.next_out_index==bufsize)buffers.push(new Uint8Array(buf));else buffers.push(new Uint8Array(buf.subarray(0,z.next_out_index)));bufferSize+=z.next_out_index;if(onprogress&&z.next_in_index>0&&z.next_in_index!=lastIndex){onprogress(z.next_in_index);lastIndex=z.next_in_index}}while(z.avail_in>0||z.avail_out===0);array=new Uint8Array(bufferSize);buffers.forEach(function(chunk){array.set(chunk,bufferIndex);bufferIndex+=chunk.length});return array};that.flush=function(){z.inflateEnd()}}var inflater;if(obj.zip)obj.zip.Inflater=Inflater;else{inflater=new Inflater();obj.addEventListener("message",function(event){var message=event.data;if(message.append)obj.postMessage({onappend:true,data:inflater.append(message.data,function(current){obj.postMessage({progress:true,current:current})})});if(message.flush){inflater.flush();obj.postMessage({onflush:true})}},false)}})(this);
/*!
 * Licensed under the BSD License.
 * Snowball JavaScript Library v0.4
 * http://snowball.tartarus.org/
 * https://github.com/mazko/jssnowball
 *
 * Copyright 13.01.02 23:17:29, Oleg Mazko
 * http://www.opensource.org/licenses/bsd-license.html
 */
;function Snowball(e){function t(e,t,n,r){if(!e&&e!=""||!t&&t!=0||!n)throw"Bad Among initialisation: s:"+e+", substring_i: "+t+", result: "+n;this.s_size=e.length,this.s=function(){var t=e.length,n=new Array(t);for(var r=0;r<t;r++)n[r]=e.charCodeAt(r);return n}(),this.substring_i=t,this.result=n,this.method=r}function n(){var e;return{bra:0,ket:0,limit:0,cursor:0,limit_backward:0,setCurrent:function(t){e=t,this.cursor=0,this.limit=t.length,this.limit_backward=0,this.bra=this.cursor,this.ket=this.limit},getCurrent:function(){var t=e;return e=null,t},in_grouping:function(t,n,r){if(this.cursor>=this.limit)return!1;var i=e.charCodeAt(this.cursor);return i>r||i<n?!1:(i-=n,(t[i>>3]&1<<(i&7))==0?!1:(this.cursor++,!0))},in_grouping_b:function(t,n,r){if(this.cursor<=this.limit_backward)return!1;var i=e.charCodeAt(this.cursor-1);return i>r||i<n?!1:(i-=n,(t[i>>3]&1<<(i&7))==0?!1:(this.cursor--,!0))},out_grouping:function(t,n,r){if(this.cursor>=this.limit)return!1;var i=e.charCodeAt(this.cursor);return i>r||i<n?(this.cursor++,!0):(i-=n,(t[i>>3]&1<<(i&7))==0?(this.cursor++,!0):!1)},out_grouping_b:function(t,n,r){if(this.cursor<=this.limit_backward)return!1;var i=e.charCodeAt(this.cursor-1);return i>r||i<n?(this.cursor--,!0):(i-=n,(t[i>>3]&1<<(i&7))==0?(this.cursor--,!0):!1)},eq_s:function(t,n){if(this.limit-this.cursor<t)return!1;var r;for(r=0;r!=t;r++)if(e.charCodeAt(this.cursor+r)!=n.charCodeAt(r))return!1;return this.cursor+=t,!0},eq_s_b:function(t,n){if(this.cursor-this.limit_backward<t)return!1;var r;for(r=0;r!=t;r++)if(e.charCodeAt(this.cursor-t+r)!=n.charCodeAt(r))return!1;return this.cursor-=t,!0},eq_v_b:function(e){return this.eq_s_b(e.length,e)},find_among:function(t,n){var r=0,i=n,s=this.cursor,o=this.limit,u=0,a=0,f=!1;for(;;){var l=r+(i-r>>1),c=0,h=u<a?u:a,p=t[l];for(var d=h;d<p.s_size;d++){if(s+h==o){c=-1;break}c=e.charCodeAt(s+h)-p.s[d];if(c)break;h++}c<0?(i=l,a=h):(r=l,u=h);if(i-r<=1){if(r>0||i==r||f)break;f=!0}}for(;;){var p=t[r];if(u>=p.s_size){this.cursor=s+p.s_size;if(!p.method)return p.result;var v=p.method();this.cursor=s+p.s_size;if(v)return p.result}r=p.substring_i;if(r<0)return 0}},find_among_b:function(t,n){var r=0,i=n,s=this.cursor,o=this.limit_backward,u=0,a=0,f=!1;for(;;){var l=r+(i-r>>1),c=0,h=u<a?u:a,p=t[l];for(var d=p.s_size-1-h;d>=0;d--){if(s-h==o){c=-1;break}c=e.charCodeAt(s-1-h)-p.s[d];if(c)break;h++}c<0?(i=l,a=h):(r=l,u=h);if(i-r<=1){if(r>0||i==r||f)break;f=!0}}for(;;){var p=t[r];if(u>=p.s_size){this.cursor=s-p.s_size;if(!p.method)return p.result;var v=p.method();this.cursor=s-p.s_size;if(v)return p.result}r=p.substring_i;if(r<0)return 0}},replace_s:function(t,n,r){var i=r.length-(n-t),s=e.substring(0,t),o=e.substring(n);return e=s+r+o,this.limit+=i,this.cursor>=n?this.cursor+=i:this.cursor>t&&(this.cursor=t),i},slice_check:function(){if(this.bra<0||this.bra>this.ket||this.ket>this.limit||this.limit>e.length)throw"faulty slice operation"},slice_from:function(e){this.slice_check(),this.replace_s(this.bra,this.ket,e)},slice_del:function(){this.slice_from("")},insert:function(e,t,n){var r=this.replace_s(e,t,n);e<=this.bra&&(this.bra+=r),e<=this.ket&&(this.ket+=r)},slice_to:function(){return this.slice_check(),e.substring(this.bra,this.ket)},get_size_of_p:function(){return e?encodeURIComponent(e).match(/%..|./g).length+1:1}}}var r={armenianStemmer:function(){function l(){var e;a=f.limit,u=f.limit,e=f.cursor;e:do{t:for(;;){n:do{if(!f.in_grouping(o,1377,1413))break n;break t}while(!1);if(f.cursor>=f.limit)break e;f.cursor++}a=f.cursor;r:for(;;){i:do{if(!f.out_grouping(o,1377,1413))break i;break r}while(!1);if(f.cursor>=f.limit)break e;f.cursor++}s:for(;;){o:do{if(!f.in_grouping(o,1377,1413))break o;break s}while(!1);if(f.cursor>=f.limit)break e;f.cursor++}u:for(;;){a:do{if(!f.out_grouping(o,1377,1413))break a;break u}while(!1);if(f.cursor>=f.limit)break e;f.cursor++}u=f.cursor}while(!1);return f.cursor=e,!0}function c(){return u<=f.cursor?!0:!1}function h(){var t;f.ket=f.cursor,t=f.find_among_b(e,23);if(t==0)return!1;f.bra=f.cursor;switch(t){case 0:return!1;case 1:f.slice_del()}return!0}function p(){var e;f.ket=f.cursor,e=f.find_among_b(r,71);if(e==0)return!1;f.bra=f.cursor;switch(e){case 0:return!1;case 1:f.slice_del()}return!0}function d(){var e;f.ket=f.cursor,e=f.find_among_b(i,40);if(e==0)return!1;f.bra=f.cursor;switch(e){case 0:return!1;case 1:f.slice_del()}return!0}function v(){var e;f.ket=f.cursor,e=f.find_among_b(s,57);if(e==0)return!1;f.bra=f.cursor;if(!c())return!1;switch(e){case 0:return!1;case 1:f.slice_del()}return!0}var e=[new t("\u0580\u0578\u0580\u0564",-1,1),new t("\u0565\u0580\u0578\u0580\u0564",0,1),new t("\u0561\u056c\u056b",-1,1),new t("\u0561\u056f\u056b",-1,1),new t("\u0578\u0580\u0561\u056f",-1,1),new t("\u0565\u0572",-1,1),new t("\u0561\u056f\u0561\u0576",-1,1),new t("\u0561\u0580\u0561\u0576",-1,1),new t("\u0565\u0576",-1,1),new t("\u0565\u056f\u0565\u0576",8,1),new t("\u0565\u0580\u0565\u0576",8,1),new t("\u0578\u0580\u0567\u0576",-1,1),new t("\u056b\u0576",-1,1),new t("\u0563\u056b\u0576",12,1),new t("\u0578\u057e\u056b\u0576",12,1),new t("\u056c\u0561\u0575\u0576",-1,1),new t("\u057e\u0578\u0582\u0576",-1,1),new t("\u057a\u0565\u057d",-1,1),new t("\u056b\u057e",-1,1),new t("\u0561\u057f",-1,1),new t("\u0561\u057e\u0565\u057f",-1,1),new t("\u056f\u0578\u057f",-1,1),new t("\u0562\u0561\u0580",-1,1)],r=[new t("\u0561",-1,1),new t("\u0561\u0581\u0561",0,1),new t("\u0565\u0581\u0561",0,1),new t("\u057e\u0565",-1,1),new t("\u0561\u0581\u0580\u056b",-1,1),new t("\u0561\u0581\u056b",-1,1),new t("\u0565\u0581\u056b",-1,1),new t("\u057e\u0565\u0581\u056b",6,1),new t("\u0561\u056c",-1,1),new t("\u0568\u0561\u056c",8,1),new t("\u0561\u0576\u0561\u056c",8,1),new t("\u0565\u0576\u0561\u056c",8,1),new t("\u0561\u0581\u0576\u0561\u056c",8,1),new t("\u0565\u056c",-1,1),new t("\u0568\u0565\u056c",13,1),new t("\u0576\u0565\u056c",13,1),new t("\u0581\u0576\u0565\u056c",15,1),new t("\u0565\u0581\u0576\u0565\u056c",16,1),new t("\u0579\u0565\u056c"
,13,1),new t("\u057e\u0565\u056c",13,1),new t("\u0561\u0581\u057e\u0565\u056c",19,1),new t("\u0565\u0581\u057e\u0565\u056c",19,1),new t("\u057f\u0565\u056c",13,1),new t("\u0561\u057f\u0565\u056c",22,1),new t("\u0578\u057f\u0565\u056c",22,1),new t("\u056f\u0578\u057f\u0565\u056c",24,1),new t("\u057e\u0561\u056e",-1,1),new t("\u0578\u0582\u0574",-1,1),new t("\u057e\u0578\u0582\u0574",27,1),new t("\u0561\u0576",-1,1),new t("\u0581\u0561\u0576",29,1),new t("\u0561\u0581\u0561\u0576",30,1),new t("\u0561\u0581\u0580\u056b\u0576",-1,1),new t("\u0561\u0581\u056b\u0576",-1,1),new t("\u0565\u0581\u056b\u0576",-1,1),new t("\u057e\u0565\u0581\u056b\u0576",34,1),new t("\u0561\u056c\u056b\u057d",-1,1),new t("\u0565\u056c\u056b\u057d",-1,1),new t("\u0561\u057e",-1,1),new t("\u0561\u0581\u0561\u057e",38,1),new t("\u0565\u0581\u0561\u057e",38,1),new t("\u0561\u056c\u0578\u057e",-1,1),new t("\u0565\u056c\u0578\u057e",-1,1),new t("\u0561\u0580",-1,1),new t("\u0561\u0581\u0561\u0580",43,1),new t("\u0565\u0581\u0561\u0580",43,1),new t("\u0561\u0581\u0580\u056b\u0580",-1,1),new t("\u0561\u0581\u056b\u0580",-1,1),new t("\u0565\u0581\u056b\u0580",-1,1),new t("\u057e\u0565\u0581\u056b\u0580",48,1),new t("\u0561\u0581",-1,1),new t("\u0565\u0581",-1,1),new t("\u0561\u0581\u0580\u0565\u0581",51,1),new t("\u0561\u056c\u0578\u0582\u0581",-1,1),new t("\u0565\u056c\u0578\u0582\u0581",-1,1),new t("\u0561\u056c\u0578\u0582",-1,1),new t("\u0565\u056c\u0578\u0582",-1,1),new t("\u0561\u0584",-1,1),new t("\u0581\u0561\u0584",57,1),new t("\u0561\u0581\u0561\u0584",58,1),new t("\u0561\u0581\u0580\u056b\u0584",-1,1),new t("\u0561\u0581\u056b\u0584",-1,1),new t("\u0565\u0581\u056b\u0584",-1,1),new t("\u057e\u0565\u0581\u056b\u0584",62,1),new t("\u0561\u0576\u0584",-1,1),new t("\u0581\u0561\u0576\u0584",64,1),new t("\u0561\u0581\u0561\u0576\u0584",65,1),new t("\u0561\u0581\u0580\u056b\u0576\u0584",-1,1),new t("\u0561\u0581\u056b\u0576\u0584",-1,1),new t("\u0565\u0581\u056b\u0576\u0584",-1,1),new t("\u057e\u0565\u0581\u056b\u0576\u0584",69,1)],i=[new t("\u0578\u0580\u0564",-1,1),new t("\u0578\u0582\u0575\u0569",-1,1),new t("\u0578\u0582\u0570\u056b",-1,1),new t("\u0581\u056b",-1,1),new t("\u056b\u056c",-1,1),new t("\u0561\u056f",-1,1),new t("\u0575\u0561\u056f",5,1),new t("\u0561\u0576\u0561\u056f",5,1),new t("\u056b\u056f",-1,1),new t("\u0578\u0582\u056f",-1,1),new t("\u0561\u0576",-1,1),new t("\u057a\u0561\u0576",10,1),new t("\u057d\u057f\u0561\u0576",10,1),new t("\u0561\u0580\u0561\u0576",10,1),new t("\u0565\u0572\u0567\u0576",-1,1),new t("\u0575\u0578\u0582\u0576",-1,1),new t("\u0578\u0582\u0569\u0575\u0578\u0582\u0576",15,1),new t("\u0561\u056e\u0578",-1,1),new t("\u056b\u0579",-1,1),new t("\u0578\u0582\u057d",-1,1),new t("\u0578\u0582\u057d\u057f",-1,1),new t("\u0563\u0561\u0580",-1,1),new t("\u057e\u0578\u0580",-1,1),new t("\u0561\u057e\u0578\u0580",22,1),new t("\u0578\u0581",-1,1),new t("\u0561\u0576\u0585\u0581",-1,1),new t("\u0578\u0582",-1,1),new t("\u0584",-1,1),new t("\u0579\u0565\u0584",27,1),new t("\u056b\u0584",27,1),new t("\u0561\u056c\u056b\u0584",29,1),new t("\u0561\u0576\u056b\u0584",29,1),new t("\u057e\u0561\u056e\u0584",27,1),new t("\u0578\u0582\u0575\u0584",27,1),new t("\u0565\u0576\u0584",27,1),new t("\u0578\u0576\u0584",27,1),new t("\u0578\u0582\u0576\u0584",27,1),new t("\u0574\u0578\u0582\u0576\u0584",36,1),new t("\u056b\u0579\u0584",27,1),new t("\u0561\u0580\u0584",27,1)],s=[new t("\u057d\u0561",-1,1),new t("\u057e\u0561",-1,1),new t("\u0561\u0574\u0562",-1,1),new t("\u0564",-1,1),new t("\u0561\u0576\u0564",3,1),new t("\u0578\u0582\u0569\u0575\u0561\u0576\u0564",4,1),new t("\u057e\u0561\u0576\u0564",4,1),new t("\u0578\u057b\u0564",3,1),new t("\u0565\u0580\u0564",3,1),new t("\u0576\u0565\u0580\u0564",8,1),new t("\u0578\u0582\u0564",3,1),new t("\u0568",-1,1),new t("\u0561\u0576\u0568",11,1),new t("\u0578\u0582\u0569\u0575\u0561\u0576\u0568",12,1),new t("\u057e\u0561\u0576\u0568",12,1),new t("\u0578\u057b\u0568",11,1),new t("\u0565\u0580\u0568",11,1),new t("\u0576\u0565\u0580\u0568",16,1),new t("\u056b",-1,1),new t("\u057e\u056b",18,1),new t("\u0565\u0580\u056b",18,1),new t("\u0576\u0565\u0580\u056b",20,1),new t("\u0561\u0576\u0578\u0582\u0574",-1,1),new t("\u0565\u0580\u0578\u0582\u0574",-1,1),new t("\u0576\u0565\u0580\u0578\u0582\u0574",23,1),new t("\u0576",-1,1),new t("\u0561\u0576",25,1),new t("\u0578\u0582\u0569\u0575\u0561\u0576",26,1),new t("\u057e\u0561\u0576",26,1),new t("\u056b\u0576",25,1),new t("\u0565\u0580\u056b\u0576",29,1),new t("\u0576\u0565\u0580\u056b\u0576",30,1),new t("\u0578\u0582\u0569\u0575\u0561\u0576\u0576",25,1),new t("\u0565\u0580\u0576",25,1),new t("\u0576\u0565\u0580\u0576",33,1),new t("\u0578\u0582\u0576",25,1),new t("\u0578\u057b",-1,1),new t("\u0578\u0582\u0569\u0575\u0561\u0576\u057d",-1,1),new t("\u057e\u0561\u0576\u057d",-1,1),new t("\u0578\u057b\u057d",-1,1),new t("\u0578\u057e",-1,1),new t("\u0561\u0576\u0578\u057e",40,1),new t("\u057e\u0578\u057e",40,1),new t("\u0565\u0580\u0578\u057e",40,1),new t("\u0576\u0565\u0580\u0578\u057e",43,1),new t("\u0565\u0580",-1,1),new t("\u0576\u0565\u0580",45,1),new t("\u0581",-1,1),new t("\u056b\u0581",47,1),new t("\u057e\u0561\u0576\u056b\u0581",48,1),new t("\u0578\u057b\u056b\u0581",48,1),new t("\u057e\u056b\u0581",48,1),new t("\u0565\u0580\u056b\u0581",48,1),new t("\u0576\u0565\u0580\u056b\u0581",52,1),new t("\u0581\u056b\u0581",48,1),new t("\u0578\u0581",47,1),new t("\u0578\u0582\u0581",47,1)],o=[209,4,128,0,18],u,a,f=new n;this.stem=function(){var e,t,n,r,i,s,o;e=f.cursor;e:do if(!l())break e;while(!1);f.cursor=e,f.limit_backward=f.cursor,f.cursor=f.limit,t=f.limit-f.cursor;if(f.cursor<a)return!1;f.cursor=a,n=f.limit_backward,f.limit_backward=f.cursor,f.cursor=f.limit-t,r=f.limit-f.cursor;t:do if(!v())break t;while(!1);f.cursor=f.limit-r,i=f.limit-f.cursor;n:do if(!p())break n;while(!1);f.cursor=f.limit-i,s=f.limit-f.cursor;r:do if(!h())break r;while(!1);f.cursor=f.limit-s,o=f.limit-f.cursor;i:do if(!d())break i;while(!1);return f.
cursor=f.limit-o,f.limit_backward=n,f.cursor=f.limit_backward,!0},this.setCurrent=function(e){f.setCurrent(e)},this.getCurrent=function(){return f.getCurrent()}},basqueStemmer:function(){function l(){var e,t,n,r,i;a=f.limit,u=f.limit,o=f.limit,e=f.cursor;e:do{t:do{t=f.cursor;n:do{if(!f.in_grouping(s,97,117))break n;r:do{n=f.cursor;i:do{if(!f.out_grouping(s,97,117))break i;s:for(;;){o:do{if(!f.in_grouping(s,97,117))break o;break s}while(!1);if(f.cursor>=f.limit)break i;f.cursor++}break r}while(!1);f.cursor=n;if(!f.in_grouping(s,97,117))break n;u:for(;;){a:do{if(!f.out_grouping(s,97,117))break a;break u}while(!1);if(f.cursor>=f.limit)break n;f.cursor++}}while(!1);break t}while(!1);f.cursor=t;if(!f.out_grouping(s,97,117))break e;f:do{r=f.cursor;l:do{if(!f.out_grouping(s,97,117))break l;c:for(;;){h:do{if(!f.in_grouping(s,97,117))break h;break c}while(!1);if(f.cursor>=f.limit)break l;f.cursor++}break f}while(!1);f.cursor=r;if(!f.in_grouping(s,97,117))break e;if(f.cursor>=f.limit)break e;f.cursor++}while(!1)}while(!1);a=f.cursor}while(!1);f.cursor=e,i=f.cursor;p:do{d:for(;;){v:do{if(!f.in_grouping(s,97,117))break v;break d}while(!1);if(f.cursor>=f.limit)break p;f.cursor++}m:for(;;){g:do{if(!f.out_grouping(s,97,117))break g;break m}while(!1);if(f.cursor>=f.limit)break p;f.cursor++}u=f.cursor;y:for(;;){b:do{if(!f.in_grouping(s,97,117))break b;break y}while(!1);if(f.cursor>=f.limit)break p;f.cursor++}w:for(;;){E:do{if(!f.out_grouping(s,97,117))break E;break w}while(!1);if(f.cursor>=f.limit)break p;f.cursor++}o=f.cursor}while(!1);return f.cursor=i,!0}function c(){return a<=f.cursor?!0:!1}function h(){return o<=f.cursor?!0:!1}function p(){return u<=f.cursor?!0:!1}function d(){var t;f.ket=f.cursor,t=f.find_among_b(e,109);if(t==0)return!1;f.bra=f.cursor;switch(t){case 0:return!1;case 1:if(!c())return!1;f.slice_del();break;case 2:if(!h())return!1;f.slice_del();break;case 3:f.slice_from("atseden");break;case 4:f.slice_from("arabera");break;case 5:f.slice_from("baditu")}return!0}function v(){var e;f.ket=f.cursor,e=f.find_among_b(r,295);if(e==0)return!1;f.bra=f.cursor;switch(e){case 0:return!1;case 1:if(!c())return!1;f.slice_del();break;case 2:if(!h())return!1;f.slice_del();break;case 3:f.slice_from("jok");break;case 4:if(!p())return!1;f.slice_del();break;case 5:f.slice_from("tra");break;case 6:f.slice_from("minutu");break;case 7:f.slice_from("zehar");break;case 8:f.slice_from("geldi");break;case 9:f.slice_from("igaro");break;case 10:f.slice_from("aurka")}return!0}function m(){var e;f.ket=f.cursor,e=f.find_among_b(i,19);if(e==0)return!1;f.bra=f.cursor;switch(e){case 0:return!1;case 1:if(!c())return!1;f.slice_del();break;case 2:f.slice_from("z")}return!0}var e=[new t("idea",-1,1),new t("bidea",0,1),new t("kidea",0,1),new t("pidea",0,1),new t("kundea",-1,1),new t("galea",-1,1),new t("tailea",-1,1),new t("tzailea",-1,1),new t("gunea",-1,1),new t("kunea",-1,1),new t("tzaga",-1,1),new t("gaia",-1,1),new t("aldia",-1,1),new t("taldia",12,1),new t("karia",-1,1),new t("garria",-1,2),new t("karria",-1,1),new t("ka",-1,1),new t("tzaka",17,1),new t("la",-1,1),new t("mena",-1,1),new t("pena",-1,1),new t("kina",-1,1),new t("ezina",-1,1),new t("tezina",23,1),new t("kuna",-1,1),new t("tuna",-1,1),new t("kizuna",-1,1),new t("era",-1,1),new t("bera",28,1),new t("arabera",29,4),new t("kera",28,1),new t("pera",28,1),new t("orra",-1,1),new t("korra",33,1),new t("dura",-1,1),new t("gura",-1,1),new t("kura",-1,1),new t("tura",-1,1),new t("eta",-1,1),new t("keta",39,1),new t("gailua",-1,1),new t("eza",-1,1),new t("erreza",42,1),new t("tza",-1,2),new t("gaitza",44,1),new t("kaitza",44,1),new t("kuntza",44,1),new t("ide",-1,1),new t("bide",48,1),new t("kide",48,1),new t("pide",48,1),new t("kunde",-1,1),new t("tzake",-1,1),new t("tzeke",-1,1),new t("le",-1,1),new t("gale",55,1),new t("taile",55,1),new t("tzaile",55,1),new t("gune",-1,1),new t("kune",-1,1),new t("tze",-1,1),new t("atze",61,1),new t("gai",-1,1),new t("aldi",-1,1),new t("taldi",64,1),new t("ki",-1,1),new t("ari",-1,1),new t("kari",67,1),new t("lari",67,1),new t("tari",67,1),new t("etari",70,1),new t("garri",-1,2),new t("karri",-1,1),new t("arazi",-1,1),new t("tarazi",74,1),new t("an",-1,1),new t("ean",76,1),new t("rean",77,1),new t("kan",76,1),new t("etan",76,1),new t("atseden",-1,3),new t("men",-1,1),new t("pen",-1,1),new t("kin",-1,1),new t("rekin",84,1),new t("ezin",-1,1),new t("tezin",86,1),new t("tun",-1,1),new t("kizun",-1,1),new t("go",-1,1),new t("ago",90,1),new t("tio",-1,1),new t("dako",-1,1),new t("or",-1,1),new t("kor",94,1),new t("tzat",-1,1),new t("du",-1,1),new t("gailu",-1,1),new t("tu",-1,1),new t("atu",99,1),new t("aldatu",100,1),new t("tatu",100,1),new t("baditu",99,5),new t("ez",-1,1),new t("errez",104,1),new t("tzez",104,1),new t("gaitz",-1,1),new t("kaitz",-1,1)],r=[new t("ada",-1,1),new t("kada",0,1),new t("anda",-1,1),new t("denda",-1,1),new t("gabea",-1,1),new t("kabea",-1,1),new t("aldea",-1,1),new t("kaldea",6,1),new t("taldea",6,1),new t("ordea",-1,1),new t("zalea",-1,1),new t("tzalea",10,1),new t("gilea",-1,1),new t("emea",-1,1),new t("kumea",-1,1),new t("nea",-1,1),new t("enea",15,1),new t("zionea",15,1),new t("unea",15,1),new t("gunea",18,1),new t("pea",-1,1),new t("aurrea",-1,1),new t("tea",-1,1),new t("kotea",22,1),new t("artea",22,1),new t("ostea",22,1),new t("etxea",-1,1),new t("ga",-1,1),new t("anga",27,1),new t("gaia",-1,1),new t("aldia",-1,1),new t("taldia",30,1),new t("handia",-1,1),new t("mendia",-1,1),new t("geia",-1,1),new t("egia",-1,1),new t("degia",35,1),new t("tegia",35,1),new t("nahia",-1,1),new t("ohia",-1,1),new t("kia",-1,1),new t("tokia",40,1),new t("oia",-1,1),new t("koia",42,1),new t("aria",-1,1),new t("karia",44,1),new t("laria",44,1),new t("taria",44,1),new t("eria",-1,1),new t("keria",48,1),new t("teria",48,1),new t("garria",-1,2),new t("larria",-1,1),new t("kirria",-1,1),new t("duria",-1,1),new t("asia",-1,1),new t("tia",-1,1),new t("ezia",-1,1),new t("bizia",-1,1),new t("ontzia",-1,1),new t("ka",-1,1),new t("joka"
,60,3),new t("aurka",60,10),new t("ska",60,1),new t("xka",60,1),new t("zka",60,1),new t("gibela",-1,1),new t("gela",-1,1),new t("kaila",-1,1),new t("skila",-1,1),new t("tila",-1,1),new t("ola",-1,1),new t("na",-1,1),new t("kana",72,1),new t("ena",72,1),new t("garrena",74,1),new t("gerrena",74,1),new t("urrena",74,1),new t("zaina",72,1),new t("tzaina",78,1),new t("kina",72,1),new t("mina",72,1),new t("garna",72,1),new t("una",72,1),new t("duna",83,1),new t("asuna",83,1),new t("tasuna",85,1),new t("ondoa",-1,1),new t("kondoa",87,1),new t("ngoa",-1,1),new t("zioa",-1,1),new t("koa",-1,1),new t("takoa",91,1),new t("zkoa",91,1),new t("noa",-1,1),new t("zinoa",94,1),new t("aroa",-1,1),new t("taroa",96,1),new t("zaroa",96,1),new t("eroa",-1,1),new t("oroa",-1,1),new t("osoa",-1,1),new t("toa",-1,1),new t("ttoa",102,1),new t("ztoa",102,1),new t("txoa",-1,1),new t("tzoa",-1,1),new t("\u00f1oa",-1,1),new t("ra",-1,1),new t("ara",108,1),new t("dara",109,1),new t("liara",109,1),new t("tiara",109,1),new t("tara",109,1),new t("etara",113,1),new t("tzara",109,1),new t("bera",108,1),new t("kera",108,1),new t("pera",108,1),new t("ora",108,2),new t("tzarra",108,1),new t("korra",108,1),new t("tra",108,1),new t("sa",-1,1),new t("osa",123,1),new t("ta",-1,1),new t("eta",125,1),new t("keta",126,1),new t("sta",125,1),new t("dua",-1,1),new t("mendua",129,1),new t("ordua",129,1),new t("lekua",-1,1),new t("burua",-1,1),new t("durua",-1,1),new t("tsua",-1,1),new t("tua",-1,1),new t("mentua",136,1),new t("estua",136,1),new t("txua",-1,1),new t("zua",-1,1),new t("tzua",140,1),new t("za",-1,1),new t("eza",142,1),new t("eroza",142,1),new t("tza",142,2),new t("koitza",145,1),new t("antza",145,1),new t("gintza",145,1),new t("kintza",145,1),new t("kuntza",145,1),new t("gabe",-1,1),new t("kabe",-1,1),new t("kide",-1,1),new t("alde",-1,1),new t("kalde",154,1),new t("talde",154,1),new t("orde",-1,1),new t("ge",-1,1),new t("zale",-1,1),new t("tzale",159,1),new t("gile",-1,1),new t("eme",-1,1),new t("kume",-1,1),new t("ne",-1,1),new t("zione",164,1),new t("une",164,1),new t("gune",166,1),new t("pe",-1,1),new t("aurre",-1,1),new t("te",-1,1),new t("kote",170,1),new t("arte",170,1),new t("oste",170,1),new t("etxe",-1,1),new t("gai",-1,1),new t("di",-1,1),new t("aldi",176,1),new t("taldi",177,1),new t("geldi",176,8),new t("handi",176,1),new t("mendi",176,1),new t("gei",-1,1),new t("egi",-1,1),new t("degi",183,1),new t("tegi",183,1),new t("nahi",-1,1),new t("ohi",-1,1),new t("ki",-1,1),new t("toki",188,1),new t("oi",-1,1),new t("goi",190,1),new t("koi",190,1),new t("ari",-1,1),new t("kari",193,1),new t("lari",193,1),new t("tari",193,1),new t("garri",-1,2),new t("larri",-1,1),new t("kirri",-1,1),new t("duri",-1,1),new t("asi",-1,1),new t("ti",-1,1),new t("ontzi",-1,1),new t("\u00f1i",-1,1),new t("ak",-1,1),new t("ek",-1,1),new t("tarik",-1,1),new t("gibel",-1,1),new t("ail",-1,1),new t("kail",209,1),new t("kan",-1,1),new t("tan",-1,1),new t("etan",212,1),new t("en",-1,4),new t("ren",214,2),new t("garren",215,1),new t("gerren",215,1),new t("urren",215,1),new t("ten",214,4),new t("tzen",214,4),new t("zain",-1,1),new t("tzain",221,1),new t("kin",-1,1),new t("min",-1,1),new t("dun",-1,1),new t("asun",-1,1),new t("tasun",226,1),new t("aizun",-1,1),new t("ondo",-1,1),new t("kondo",229,1),new t("go",-1,1),new t("ngo",231,1),new t("zio",-1,1),new t("ko",-1,1),new t("trako",234,5),new t("tako",234,1),new t("etako",236,1),new t("eko",234,1),new t("tariko",234,1),new t("sko",234,1),new t("tuko",234,1),new t("minutuko",241,6),new t("zko",234,1),new t("no",-1,1),new t("zino",244,1),new t("ro",-1,1),new t("aro",246,1),new t("igaro",247,9),new t("taro",247,1),new t("zaro",247,1),new t("ero",246,1),new t("giro",246,1),new t("oro",246,1),new t("oso",-1,1),new t("to",-1,1),new t("tto",255,1),new t("zto",255,1),new t("txo",-1,1),new t("tzo",-1,1),new t("gintzo",259,1),new t("\u00f1o",-1,1),new t("zp",-1,1),new t("ar",-1,1),new t("dar",263,1),new t("behar",263,1),new t("zehar",263,7),new t("liar",263,1),new t("tiar",263,1),new t("tar",263,1),new t("tzar",263,1),new t("or",-1,2),new t("kor",271,1),new t("os",-1,1),new t("ket",-1,1),new t("du",-1,1),new t("mendu",275,1),new t("ordu",275,1),new t("leku",-1,1),new t("buru",-1,2),new t("duru",-1,1),new t("tsu",-1,1),new t("tu",-1,1),new t("tatu",282,4),new t("mentu",282,1),new t("estu",282,1),new t("txu",-1,1),new t("zu",-1,1),new t("tzu",287,1),new t("gintzu",288,1),new t("z",-1,1),new t("ez",290,1),new t("eroz",290,1),new t("tz",290,1),new t("koitz",293,1)],i=[new t("zlea",-1,2),new t("keria",-1,1),new t("la",-1,1),new t("era",-1,1),new t("dade",-1,1),new t("tade",-1,1),new t("date",-1,1),new t("tate",-1,1),new t("gi",-1,1),new t("ki",-1,1),new t("ik",-1,1),new t("lanik",10,1),new t("rik",10,1),new t("larik",12,1),new t("ztik",10,1),new t("go",-1,1),new t("ro",-1,1),new t("ero",16,1),new t("to",-1,1)],s=[17,65,16],o,u,a,f=new n;this.stem=function(){var e,t,n,r;e=f.cursor;e:do if(!l())break e;while(!1);f.cursor=e,f.limit_backward=f.cursor,f.cursor=f.limit;t:for(;;){t=f.limit-f.cursor;n:do{if(!d())break n;continue t}while(!1);f.cursor=f.limit-t;break t}r:for(;;){n=f.limit-f.cursor;i:do{if(!v())break i;continue r}while(!1);f.cursor=f.limit-n;break r}r=f.limit-f.cursor;s:do if(!m())break s;while(!1);return f.cursor=f.limit-r,f.cursor=f.limit_backward,!0},this.setCurrent=function(e){f.setCurrent(e)},this.getCurrent=function(){return f.getCurrent()}},catalanStemmer:function(){function c(){var e;f=l.limit,a=l.limit,e=l.cursor;e:do{t:for(;;){n:do{if(!l.in_grouping(u,97,252))break n;break t}while(!1);if(l.cursor>=l.limit)break e;l.cursor++}r:for(;;){i:do{if(!l.out_grouping(u,97,252))break i;break r}while(!1);if(l.cursor>=l.limit)break e;l.cursor++}f=l.cursor;s:for(;;){o:do{if(!l.in_grouping(u,97,252))break o;break s}while(!1);if(l.cursor>=l.limit)break e;l.cursor++}u:for(;;){a:do{if(!l.out_grouping(u,97,252))break a;break u}while(!1);if(l.cursor>=l.limit)break e;l.cursor++}a=l.cursor}while(!1);return l.cursor=e,!0
}function h(){var t,n;e:for(;;){n=l.cursor;t:do{l.bra=l.cursor,t=l.find_among(e,13);if(t==0)break t;l.ket=l.cursor;switch(t){case 0:break t;case 1:l.slice_from("a");break;case 2:l.slice_from("a");break;case 3:l.slice_from("e");break;case 4:l.slice_from("e");break;case 5:l.slice_from("i");break;case 6:l.slice_from("i");break;case 7:l.slice_from("o");break;case 8:l.slice_from("o");break;case 9:l.slice_from("u");break;case 10:l.slice_from("u");break;case 11:l.slice_from("i");break;case 12:l.slice_from(".");break;case 13:if(l.cursor>=l.limit)break t;l.cursor++}continue e}while(!1);l.cursor=n;break e}return!0}function p(){return f<=l.cursor?!0:!1}function d(){return a<=l.cursor?!0:!1}function v(){var e;l.ket=l.cursor,e=l.find_among_b(r,39);if(e==0)return!1;l.bra=l.cursor;switch(e){case 0:return!1;case 1:if(!p())return!1;l.slice_del()}return!0}function m(){var e;l.ket=l.cursor,e=l.find_among_b(i,200);if(e==0)return!1;l.bra=l.cursor;switch(e){case 0:return!1;case 1:if(!p())return!1;l.slice_del();break;case 2:if(!d())return!1;l.slice_del();break;case 3:if(!d())return!1;l.slice_from("log");break;case 4:if(!d())return!1;l.slice_from("ic");break;case 5:if(!p())return!1;l.slice_from("c")}return!0}function g(){var e;l.ket=l.cursor,e=l.find_among_b(s,283);if(e==0)return!1;l.bra=l.cursor;switch(e){case 0:return!1;case 1:if(!p())return!1;l.slice_del();break;case 2:if(!d())return!1;l.slice_del()}return!0}function y(){var e;l.ket=l.cursor,e=l.find_among_b(o,22);if(e==0)return!1;l.bra=l.cursor;switch(e){case 0:return!1;case 1:if(!p())return!1;l.slice_del();break;case 2:if(!p())return!1;l.slice_from("ic")}return!0}var e=[new t("",-1,13),new t("\u00b7",0,12),new t("\u00e0",0,2),new t("\u00e1",0,1),new t("\u00e8",0,4),new t("\u00e9",0,3),new t("\u00ec",0,6),new t("\u00ed",0,5),new t("\u00ef",0,11),new t("\u00f2",0,8),new t("\u00f3",0,7),new t("\u00fa",0,9),new t("\u00fc",0,10)],r=[new t("la",-1,1),new t("-la",0,1),new t("sela",0,1),new t("le",-1,1),new t("me",-1,1),new t("-me",4,1),new t("se",-1,1),new t("-te",-1,1),new t("hi",-1,1),new t("'hi",8,1),new t("li",-1,1),new t("-li",10,1),new t("'l",-1,1),new t("'m",-1,1),new t("-m",-1,1),new t("'n",-1,1),new t("-n",-1,1),new t("ho",-1,1),new t("'ho",17,1),new t("lo",-1,1),new t("selo",19,1),new t("'s",-1,1),new t("las",-1,1),new t("selas",22,1),new t("les",-1,1),new t("-les",24,1),new t("'ls",-1,1),new t("-ls",-1,1),new t("'ns",-1,1),new t("-ns",-1,1),new t("ens",-1,1),new t("los",-1,1),new t("selos",31,1),new t("nos",-1,1),new t("-nos",33,1),new t("vos",-1,1),new t("us",-1,1),new t("-us",36,1),new t("'t",-1,1)],i=[new t("ica",-1,4),new t("l\u00f3gica",0,3),new t("enca",-1,1),new t("ada",-1,2),new t("ancia",-1,1),new t("encia",-1,1),new t("\u00e8ncia",-1,1),new t("\u00edcia",-1,1),new t("logia",-1,3),new t("inia",-1,1),new t("\u00edinia",9,1),new t("eria",-1,1),new t("\u00e0ria",-1,1),new t("at\u00f2ria",-1,1),new t("alla",-1,1),new t("ella",-1,1),new t("\u00edvola",-1,1),new t("ima",-1,1),new t("\u00edssima",17,1),new t("qu\u00edssima",18,5),new t("ana",-1,1),new t("ina",-1,1),new t("era",-1,1),new t("sfera",22,1),new t("ora",-1,1),new t("dora",24,1),new t("adora",25,1),new t("adura",-1,1),new t("esa",-1,1),new t("osa",-1,1),new t("assa",-1,1),new t("essa",-1,1),new t("issa",-1,1),new t("eta",-1,1),new t("ita",-1,1),new t("ota",-1,1),new t("ista",-1,1),new t("ialista",36,1),new t("ionista",36,1),new t("iva",-1,1),new t("ativa",39,1),new t("n\u00e7a",-1,1),new t("log\u00eda",-1,3),new t("ic",-1,4),new t("\u00edstic",43,1),new t("enc",-1,1),new t("esc",-1,1),new t("ud",-1,1),new t("atge",-1,1),new t("ble",-1,1),new t("able",49,1),new t("ible",49,1),new t("isme",-1,1),new t("ialisme",52,1),new t("ionisme",52,1),new t("ivisme",52,1),new t("aire",-1,1),new t("icte",-1,1),new t("iste",-1,1),new t("ici",-1,1),new t("\u00edci",-1,1),new t("logi",-1,3),new t("ari",-1,1),new t("tori",-1,1),new t("al",-1,1),new t("il",-1,1),new t("all",-1,1),new t("ell",-1,1),new t("\u00edvol",-1,1),new t("isam",-1,1),new t("issem",-1,1),new t("\u00ecssem",-1,1),new t("\u00edssem",-1,1),new t("\u00edssim",-1,1),new t("qu\u00edssim",73,5),new t("amen",-1,1),new t("\u00ecssin",-1,1),new t("ar",-1,1),new t("ificar",77,1),new t("egar",77,1),new t("ejar",77,1),new t("itar",77,1),new t("itzar",77,1),new t("fer",-1,1),new t("or",-1,1),new t("dor",84,1),new t("dur",-1,1),new t("doras",-1,1),new t("ics",-1,4),new t("l\u00f3gics",88,3),new t("uds",-1,1),new t("nces",-1,1),new t("ades",-1,2),new t("ancies",-1,1),new t("encies",-1,1),new t("\u00e8ncies",-1,1),new t("\u00edcies",-1,1),new t("logies",-1,3),new t("inies",-1,1),new t("\u00ednies",-1,1),new t("eries",-1,1),new t("\u00e0ries",-1,1),new t("at\u00f2ries",-1,1),new t("bles",-1,1),new t("ables",103,1),new t("ibles",103,1),new t("imes",-1,1),new t("\u00edssimes",106,1),new t("qu\u00edssimes",107,5),new t("formes",-1,1),new t("ismes",-1,1),new t("ialismes",110,1),new t("ines",-1,1),new t("eres",-1,1),new t("ores",-1,1),new t("dores",114,1),new t("idores",115,1),new t("dures",-1,1),new t("eses",-1,1),new t("oses",-1,1),new t("asses",-1,1),new t("ictes",-1,1),new t("ites",-1,1),new t("otes",-1,1),new t("istes",-1,1),new t("ialistes",124,1),new t("ionistes",124,1),new t("iques",-1,4),new t("l\u00f3giques",127,3),new t("ives",-1,1),new t("atives",129,1),new t("log\u00edes",-1,3),new t("alleng\u00fces",-1,1),new t("icis",-1,1),new t("\u00edcis",-1,1),new t("logis",-1,3),new t("aris",-1,1),new t("toris",-1,1),new t("ls",-1,1),new t("als",138,1),new t("ells",138,1),new t("ims",-1,1),new t("\u00edssims",141,1),new t("qu\u00edssims",142,5),new t("ions",-1,1),new t("cions",144,1),new t("acions",145,2),new t("esos",-1,1),new t("osos",-1,1),new t("assos",-1,1),new t("issos",-1,1),new t("ers",-1,1),new t("ors",-1,1),new t("dors",152,1),new t("adors",153,1),new t("idors",153,1),new t("ats",-1,1),new t("itats",156,1),new t("bilitats",157,1),new t("ivitats",157,1),new t("ativitats",159,1),new t("\u00eftats",156,1),new t("ets",-1,1),new t("ants",-1,1),new t("ents"
,-1,1),new t("ments",164,1),new t("aments",165,1),new t("ots",-1,1),new t("uts",-1,1),new t("ius",-1,1),new t("trius",169,1),new t("atius",169,1),new t("\u00e8s",-1,1),new t("\u00e9s",-1,1),new t("\u00eds",-1,1),new t("d\u00eds",174,1),new t("\u00f3s",-1,1),new t("itat",-1,1),new t("bilitat",177,1),new t("ivitat",177,1),new t("ativitat",179,1),new t("\u00eftat",-1,1),new t("et",-1,1),new t("ant",-1,1),new t("ent",-1,1),new t("ient",184,1),new t("ment",184,1),new t("ament",186,1),new t("isament",187,1),new t("ot",-1,1),new t("isseu",-1,1),new t("\u00ecsseu",-1,1),new t("\u00edsseu",-1,1),new t("triu",-1,1),new t("\u00edssiu",-1,1),new t("atiu",-1,1),new t("\u00f3",-1,1),new t("i\u00f3",196,1),new t("ci\u00f3",197,1),new t("aci\u00f3",198,1)],s=[new t("aba",-1,1),new t("esca",-1,1),new t("isca",-1,1),new t("\u00efsca",-1,1),new t("ada",-1,1),new t("ida",-1,1),new t("uda",-1,1),new t("\u00efda",-1,1),new t("ia",-1,1),new t("aria",8,1),new t("iria",8,1),new t("ara",-1,1),new t("iera",-1,1),new t("ira",-1,1),new t("adora",-1,1),new t("\u00efra",-1,1),new t("ava",-1,1),new t("ixa",-1,1),new t("itza",-1,1),new t("\u00eda",-1,1),new t("ar\u00eda",19,1),new t("er\u00eda",19,1),new t("ir\u00eda",19,1),new t("\u00efa",-1,1),new t("isc",-1,1),new t("\u00efsc",-1,1),new t("ad",-1,1),new t("ed",-1,1),new t("id",-1,1),new t("ie",-1,1),new t("re",-1,1),new t("dre",30,1),new t("ase",-1,1),new t("iese",-1,1),new t("aste",-1,1),new t("iste",-1,1),new t("ii",-1,1),new t("ini",-1,1),new t("esqui",-1,1),new t("eixi",-1,1),new t("itzi",-1,1),new t("am",-1,1),new t("em",-1,1),new t("arem",42,1),new t("irem",42,1),new t("\u00e0rem",42,1),new t("\u00edrem",42,1),new t("\u00e0ssem",42,1),new t("\u00e9ssem",42,1),new t("iguem",42,1),new t("\u00efguem",42,1),new t("avem",42,1),new t("\u00e0vem",42,1),new t("\u00e1vem",42,1),new t("ir\u00ecem",42,1),new t("\u00edem",42,1),new t("ar\u00edem",55,1),new t("ir\u00edem",55,1),new t("assim",-1,1),new t("essim",-1,1),new t("issim",-1,1),new t("\u00e0ssim",-1,1),new t("\u00e8ssim",-1,1),new t("\u00e9ssim",-1,1),new t("\u00edssim",-1,1),new t("\u00efm",-1,1),new t("an",-1,1),new t("aban",66,1),new t("arian",66,1),new t("aran",66,1),new t("ieran",66,1),new t("iran",66,1),new t("\u00edan",66,1),new t("ar\u00edan",72,1),new t("er\u00edan",72,1),new t("ir\u00edan",72,1),new t("en",-1,1),new t("ien",76,1),new t("arien",77,1),new t("irien",77,1),new t("aren",76,1),new t("eren",76,1),new t("iren",76,1),new t("\u00e0ren",76,1),new t("\u00efren",76,1),new t("asen",76,1),new t("iesen",76,1),new t("assen",76,1),new t("essen",76,1),new t("issen",76,1),new t("\u00e9ssen",76,1),new t("\u00efssen",76,1),new t("esquen",76,1),new t("isquen",76,1),new t("\u00efsquen",76,1),new t("aven",76,1),new t("ixen",76,1),new t("eixen",96,1),new t("\u00efxen",76,1),new t("\u00efen",76,1),new t("in",-1,1),new t("inin",100,1),new t("sin",100,1),new t("isin",102,1),new t("assin",102,1),new t("essin",102,1),new t("issin",102,1),new t("\u00efssin",102,1),new t("esquin",100,1),new t("eixin",100,1),new t("aron",-1,1),new t("ieron",-1,1),new t("ar\u00e1n",-1,1),new t("er\u00e1n",-1,1),new t("ir\u00e1n",-1,1),new t("i\u00efn",-1,1),new t("ado",-1,1),new t("ido",-1,1),new t("ando",-1,2),new t("iendo",-1,1),new t("io",-1,1),new t("ixo",-1,1),new t("eixo",121,1),new t("\u00efxo",-1,1),new t("itzo",-1,1),new t("ar",-1,1),new t("tzar",125,1),new t("er",-1,1),new t("eixer",127,1),new t("ir",-1,1),new t("ador",-1,1),new t("as",-1,1),new t("abas",131,1),new t("adas",131,1),new t("idas",131,1),new t("aras",131,1),new t("ieras",131,1),new t("\u00edas",131,1),new t("ar\u00edas",137,1),new t("er\u00edas",137,1),new t("ir\u00edas",137,1),new t("ids",-1,1),new t("es",-1,1),new t("ades",142,1),new t("ides",142,1),new t("udes",142,1),new t("\u00efdes",142,1),new t("atges",142,1),new t("ies",142,1),new t("aries",148,1),new t("iries",148,1),new t("ares",142,1),new t("ires",142,1),new t("adores",142,1),new t("\u00efres",142,1),new t("ases",142,1),new t("ieses",142,1),new t("asses",142,1),new t("esses",142,1),new t("isses",142,1),new t("\u00efsses",142,1),new t("ques",142,1),new t("esques",161,1),new t("\u00efsques",161,1),new t("aves",142,1),new t("ixes",142,1),new t("eixes",165,1),new t("\u00efxes",142,1),new t("\u00efes",142,1),new t("abais",-1,1),new t("arais",-1,1),new t("ierais",-1,1),new t("\u00edais",-1,1),new t("ar\u00edais",172,1),new t("er\u00edais",172,1),new t("ir\u00edais",172,1),new t("aseis",-1,1),new t("ieseis",-1,1),new t("asteis",-1,1),new t("isteis",-1,1),new t("inis",-1,1),new t("sis",-1,1),new t("isis",181,1),new t("assis",181,1),new t("essis",181,1),new t("issis",181,1),new t("\u00efssis",181,1),new t("esquis",-1,1),new t("eixis",-1,1),new t("itzis",-1,1),new t("\u00e1is",-1,1),new t("ar\u00e9is",-1,1),new t("er\u00e9is",-1,1),new t("ir\u00e9is",-1,1),new t("ams",-1,1),new t("ados",-1,1),new t("idos",-1,1),new t("amos",-1,1),new t("\u00e1bamos",197,1),new t("\u00e1ramos",197,1),new t("i\u00e9ramos",197,1),new t("\u00edamos",197,1),new t("ar\u00edamos",201,1),new t("er\u00edamos",201,1),new t("ir\u00edamos",201,1),new t("aremos",-1,1),new t("eremos",-1,1),new t("iremos",-1,1),new t("\u00e1semos",-1,1),new t("i\u00e9semos",-1,1),new t("imos",-1,1),new t("adors",-1,1),new t("ass",-1,1),new t("erass",212,1),new t("ess",-1,1),new t("ats",-1,1),new t("its",-1,1),new t("ents",-1,1),new t("\u00e0s",-1,1),new t("ar\u00e0s",218,1),new t("ir\u00e0s",218,1),new t("ar\u00e1s",-1,1),new t("er\u00e1s",-1,1),new t("ir\u00e1s",-1,1),new t("\u00e9s",-1,1),new t("ar\u00e9s",224,1),new t("\u00eds",-1,1),new t("i\u00efs",-1,1),new t("at",-1,1),new t("it",-1,1),new t("ant",-1,1),new t("ent",-1,1),new t("int",-1,1),new t("ut",-1,1),new t("\u00eft",-1,1),new t("au",-1,1),new t("erau",235,1),new t("ieu",-1,1),new t("ineu",-1,1),new t("areu",-1,1),new t("ireu",-1,1),new t("\u00e0reu",-1,1),new t("\u00edreu",-1,1),new t("asseu",-1,1),new t("esseu",-1,1),new t("eresseu",244,1),new t("\u00e0sseu",-1,1),new t("\u00e9sseu",-1,1),new t("igueu"
,-1,1),new t("\u00efgueu",-1,1),new t("\u00e0veu",-1,1),new t("\u00e1veu",-1,1),new t("itzeu",-1,1),new t("\u00eceu",-1,1),new t("ir\u00eceu",253,1),new t("\u00edeu",-1,1),new t("ar\u00edeu",255,1),new t("ir\u00edeu",255,1),new t("assiu",-1,1),new t("issiu",-1,1),new t("\u00e0ssiu",-1,1),new t("\u00e8ssiu",-1,1),new t("\u00e9ssiu",-1,1),new t("\u00edssiu",-1,1),new t("\u00efu",-1,1),new t("ix",-1,1),new t("eix",265,1),new t("\u00efx",-1,1),new t("itz",-1,1),new t("i\u00e0",-1,1),new t("ar\u00e0",-1,1),new t("ir\u00e0",-1,1),new t("itz\u00e0",-1,1),new t("ar\u00e1",-1,1),new t("er\u00e1",-1,1),new t("ir\u00e1",-1,1),new t("ir\u00e8",-1,1),new t("ar\u00e9",-1,1),new t("er\u00e9",-1,1),new t("ir\u00e9",-1,1),new t("\u00ed",-1,1),new t("i\u00ef",-1,1),new t("i\u00f3",-1,1)],o=[new t("a",-1,1),new t("e",-1,1),new t("i",-1,1),new t("\u00efn",-1,1),new t("o",-1,1),new t("ir",-1,1),new t("s",-1,1),new t("is",6,1),new t("os",6,1),new t("\u00efs",6,1),new t("it",-1,1),new t("eu",-1,1),new t("iu",-1,1),new t("iqu",-1,2),new t("itz",-1,1),new t("\u00e0",-1,1),new t("\u00e1",-1,1),new t("\u00e9",-1,1),new t("\u00ec",-1,1),new t("\u00ed",-1,1),new t("\u00ef",-1,1),new t("\u00f3",-1,1)],u=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,128,129,81,6,10],a,f,l=new n;this.stem=function(){var e,t,n,r,i,s;e=l.cursor;e:do if(!c())break e;while(!1);l.cursor=e,l.limit_backward=l.cursor,l.cursor=l.limit,t=l.limit-l.cursor;t:do if(!v())break t;while(!1);l.cursor=l.limit-t,n=l.limit-l.cursor;n:do r:do{r=l.limit-l.cursor;i:do{if(!m())break i;break r}while(!1);l.cursor=l.limit-r;if(!g())break n}while(!1);while(!1);l.cursor=l.limit-n,i=l.limit-l.cursor;s:do if(!y())break s;while(!1);l.cursor=l.limit-i,l.cursor=l.limit_backward,s=l.cursor;o:do if(!h())break o;while(!1);return l.cursor=s,!0},this.setCurrent=function(e){l.setCurrent(e)},this.getCurrent=function(){return l.getCurrent()}},czechStemmer:function(){function d(){var e;h=p.limit,c=p.limit,e=p.cursor;e:do{t:for(;;){n:do{if(!p.out_grouping(l,97,367))break n;break t}while(!1);if(p.cursor>=p.limit)break e;p.cursor++}h=p.cursor;r:for(;;){i:do{if(!p.out_grouping(l,97,367))break i;break r}while(!1);if(p.cursor>=p.limit)break e;p.cursor++}s:for(;;){o:do{if(!p.in_grouping(l,97,367))break o;break s}while(!1);if(p.cursor>=p.limit)break e;p.cursor++}c=p.cursor}while(!1);return p.cursor=e,!0}function v(){return h<=p.cursor?!0:!1}function m(){return c<=p.cursor?!0:!1}function g(){var t;p.ket=p.cursor,t=p.find_among_b(e,14);if(t==0)return!1;p.bra=p.cursor;if(!v())return!1;switch(t){case 0:return!1;case 1:p.slice_from("k");break;case 2:p.slice_from("h");break;case 3:p.slice_from("ck");break;case 4:p.slice_from("sk")}return!0}function y(){var e,t;p.ket=p.cursor,e=p.find_among_b(r,3);if(e==0)return!1;p.bra=p.cursor;if(!v())return!1;switch(e){case 0:return!1;case 1:p.slice_del();break;case 2:p.slice_del(),t=p.limit-p.cursor;e:do if(!g()){p.cursor=p.limit-t;break e}while(!1)}return!0}function b(){var e,t,n;p.ket=p.cursor,e=p.find_among_b(i,48);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_del();break;case 2:p.slice_del(),t=p.limit-p.cursor;e:do if(!g()){p.cursor=p.limit-t;break e}while(!1);break;case 3:p.slice_from("e"),n=p.limit-p.cursor;t:do if(!g()){p.cursor=p.limit-n;break t}while(!1)}return!0}function w(){var e;p.ket=p.cursor,e=p.find_among_b(s,68);if(e==0)return!1;p.bra=p.cursor;if(!m())return!1;switch(e){case 0:return!1;case 1:p.slice_del();break;case 2:p.slice_from("i");if(!g())return!1;break;case 3:p.slice_from("e");if(!g())return!1;break;case 4:p.slice_from("\u00e9");if(!g())return!1;break;case 5:p.slice_from("\u011b");if(!g())return!1;break;case 6:p.slice_from("\u00ed");if(!g())return!1}return!0}function E(){var e;p.ket=p.cursor,e=p.find_among_b(o,6);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_del()}return!0}function S(){var e;p.ket=p.cursor,e=p.find_among_b(u,4);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_del();break;case 2:p.slice_from("i");if(!g())return!1}return!0}function x(){var e;p.ket=p.cursor,e=p.find_among_b(a,42);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_del();break;case 2:p.slice_from("e");if(!g())return!1;break;case 3:p.slice_from("\u00e9");if(!g())return!1;break;case 4:p.slice_from("i");if(!g())return!1;break;case 5:p.slice_from("\u00ed");if(!g())return!1;break;case 6:p.slice_from("\u00e1");break;case 7:p.slice_from("a");break;case 8:p.slice_from("o");break;case 9:p.slice_from("u")}return!0}function T(){var e;p.ket=p.cursor,e=p.find_among_b(f,2);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_from("\u011b");if(!g())return!1;break;case 2:p.slice_from("e");if(!g())return!1}return!0}function N(){var e,t,n,r;e=p.limit-p.cursor;e:do if(!T())break e;while(!1);p.cursor=p.limit-e,t=p.limit-p.cursor;t:do if(!x())break t;while(!1);p.cursor=p.limit-t,n=p.limit-p.cursor;n:do if(!S())break n;while(!1);p.cursor=p.limit-n;r:do{r=p.limit-p.cursor;i:do{if(!w())break i;break r}while(!1);p.cursor=p.limit-r;if(!E())return!1}while(!1);return!0}var e=[new t("ce",-1,1),new t("ze",-1,2),new t("\u017ee",-1,2),new t("ci",-1,1),new t("\u010dti",-1,3),new t("\u0161ti",-1,4),new t("zi",-1,2),new t("\u010di",-1,1),new t("\u017ei",-1,2),new t("\u010dt\u00e9",-1,3),new t("\u0161t\u00e9",-1,4),new t("\u010d",-1,1),new t("\u010dt\u011b",-1,3),new t("\u0161t\u011b",-1,4)],r=[new t("in",-1,2),new t("ov",-1,1),new t("\u016fv",-1,1)],i=[new t("a",-1,1),new t("ama",0,1),new t("ata",0,1),new t("e",-1,2),new t("\u011bte",3,2),new t("ech",-1,2),new t("atech",5,1),new t("ich",-1,2),new t("\u00e1ch",-1,1),new t("\u00edch",-1,2),new t("\u00fdch",-1,1),new t("i",-1,2),new t("mi",11,1),new t("ami",12,1),new t("emi",12,2),new t("\u00edmi",12,2),new t("\u00fdmi",12,1),new t("\u011bmi",12,2),new t("\u011bti",11,2),new t("ovi",11,1),new t("em",-1,3),new t("\u011btem",20,1),new t("\u00e1m",-1,1),new t("\u00e9m",-1,2),new t("\u00edm",-1,2),new t("\u00fdm",-1,1),new t("at\u016fm",-1,1
),new t("o",-1,1),new t("iho",27,2),new t("\u00e9ho",27,2),new t("\u00edho",27,2),new t("es",-1,2),new t("os",-1,1),new t("us",-1,1),new t("at",-1,1),new t("u",-1,1),new t("imu",35,2),new t("\u00e9mu",35,2),new t("ou",35,1),new t("y",-1,1),new t("aty",39,1),new t("\u00e1",-1,1),new t("\u00e9",-1,1),new t("ov\u00e9",42,1),new t("\u00ed",-1,2),new t("\u00fd",-1,1),new t("\u011b",-1,2),new t("\u016f",-1,1)],s=[new t("ob",-1,1),new t("itb",-1,2),new t("ec",-1,3),new t("inec",2,2),new t("obinec",3,1),new t("ovec",2,1),new t("ic",-1,2),new t("enic",6,3),new t("och",-1,1),new t("\u00e1sek",-1,1),new t("nk",-1,1),new t("isk",-1,2),new t("ovisk",11,1),new t("tk",-1,1),new t("vk",-1,1),new t("n\u00edk",-1,1),new t("ovn\u00edk",15,1),new t("ov\u00edk",-1,1),new t("\u010dk",-1,1),new t("i\u0161k",-1,2),new t("u\u0161k",-1,1),new t("dl",-1,1),new t("itel",-1,2),new t("ul",-1,1),new t("an",-1,1),new t("\u010dan",24,1),new t("en",-1,3),new t("in",-1,2),new t("\u0161tin",27,1),new t("ovin",27,1),new t("teln",-1,1),new t("\u00e1rn",-1,1),new t("\u00edrn",-1,6),new t("oun",-1,1),new t("loun",33,1),new t("ovn",-1,1),new t("yn",-1,1),new t("kyn",36,1),new t("\u00e1n",-1,1),new t("i\u00e1n",38,2),new t("\u00edn",-1,6),new t("\u010dn",-1,1),new t("\u011bn",-1,5),new t("as",-1,1),new t("it",-1,2),new t("ot",-1,1),new t("ist",-1,2),new t("ost",-1,1),new t("nost",47,1),new t("out",-1,1),new t("ovi\u0161t",-1,1),new t("iv",-1,2),new t("ov",-1,1),new t("tv",-1,1),new t("ctv",53,1),new t("stv",53,1),new t("ovstv",55,1),new t("ovtv",53,1),new t("a\u010d",-1,1),new t("\u00e1\u010d",-1,1),new t("o\u0148",-1,1),new t("\u00e1\u0159",-1,1),new t("k\u00e1\u0159",61,1),new t("ion\u00e1\u0159",61,2),new t("\u00e9\u0159",-1,4),new t("n\u00e9\u0159",64,1),new t("\u00ed\u0159",-1,6),new t("ou\u0161",-1,1)],o=[new t("c",-1,1),new t("k",-1,1),new t("l",-1,1),new t("n",-1,1),new t("t",-1,1),new t("\u010d",-1,1)],u=[new t("isk",-1,2),new t("\u00e1k",-1,1),new t("izn",-1,2),new t("ajzn",-1,1)],a=[new t("k",-1,1),new t("ak",0,7),new t("ek",0,2),new t("anek",2,1),new t("enek",2,2),new t("inek",2,4),new t("onek",2,1),new t("unek",2,1),new t("\u00e1nek",2,1),new t("a\u010dek",2,1),new t("e\u010dek",2,2),new t("i\u010dek",2,4),new t("o\u010dek",2,1),new t("u\u010dek",2,1),new t("\u00e1\u010dek",2,1),new t("\u00e9\u010dek",2,3),new t("\u00ed\u010dek",2,5),new t("ou\u0161ek",2,1),new t("ik",0,4),new t("ank",0,1),new t("enk",0,1),new t("ink",0,1),new t("onk",0,1),new t("unk",0,1),new t("\u00e1nk",0,1),new t("\u00e9nk",0,1),new t("\u00ednk",0,1),new t("ok",0,8),new t("\u00e1tk",0,1),new t("uk",0,9),new t("\u00e1k",0,6),new t("\u00e9k",0,3),new t("\u00edk",0,5),new t("a\u010dk",0,1),new t("e\u010dk",0,1),new t("i\u010dk",0,1),new t("o\u010dk",0,1),new t("u\u010dk",0,1),new t("\u00e1\u010dk",0,1),new t("\u00e9\u010dk",0,1),new t("\u00ed\u010dk",0,1),new t("u\u0161k",0,1)],f=[new t("ej\u0161",-1,2),new t("\u011bj\u0161",-1,1)],l=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,0,1,17,4,18,0,0,0,4,0,0,0,0,0,0,0,0,0,64],c,h,p=new n;this.stem=function(){var e;e=p.cursor;e:do if(!d())break e;while(!1);return p.cursor=e,p.limit_backward=p.cursor,p.cursor=p.limit,b()?y()?N()?(p.cursor=p.limit_backward,!0):!1:!1:!1},this.setCurrent=function(e){p.setCurrent(e)},this.getCurrent=function(){return p.getCurrent()}},danishStemmer:function(){function c(){var e,t;a=l.limit,e=l.cursor;var n=l.cursor+3;if(0>n||n>l.limit)return!1;l.cursor=n,u=l.cursor,l.cursor=e;e:for(;;){t=l.cursor;t:do{if(!l.in_grouping(s,97,248))break t;l.cursor=t;break e}while(!1);l.cursor=t;if(l.cursor>=l.limit)return!1;l.cursor++}n:for(;;){r:do{if(!l.out_grouping(s,97,248))break r;break n}while(!1);if(l.cursor>=l.limit)return!1;l.cursor++}a=l.cursor;i:do{if(!(a<u))break i;a=u}while(!1);return!0}function h(){var t,n,r;n=l.limit-l.cursor;if(l.cursor<a)return!1;l.cursor=a,r=l.limit_backward,l.limit_backward=l.cursor,l.cursor=l.limit-n,l.ket=l.cursor,t=l.find_among_b(e,32);if(t==0)return l.limit_backward=r,!1;l.bra=l.cursor,l.limit_backward=r;switch(t){case 0:return!1;case 1:l.slice_del();break;case 2:if(!l.in_grouping_b(o,97,229))return!1;l.slice_del()}return!0}function p(){var e,t,n;return e=l.limit-l.cursor,t=l.limit-l.cursor,l.cursor<a?!1:(l.cursor=a,n=l.limit_backward,l.limit_backward=l.cursor,l.cursor=l.limit-t,l.ket=l.cursor,l.find_among_b(r,4)==0?(l.limit_backward=n,!1):(l.bra=l.cursor,l.limit_backward=n,l.cursor=l.limit-e,l.cursor<=l.limit_backward?!1:(l.cursor--,l.bra=l.cursor,l.slice_del(),!0)))}function d(){var e,t,n,r,s;t=l.limit-l.cursor;e:do{l.ket=l.cursor;if(!l.eq_s_b(2,"st"))break e;l.bra=l.cursor;if(!l.eq_s_b(2,"ig"))break e;l.slice_del()}while(!1);l.cursor=l.limit-t,n=l.limit-l.cursor;if(l.cursor<a)return!1;l.cursor=a,r=l.limit_backward,l.limit_backward=l.cursor,l.cursor=l.limit-n,l.ket=l.cursor,e=l.find_among_b(i,5);if(e==0)return l.limit_backward=r,!1;l.bra=l.cursor,l.limit_backward=r;switch(e){case 0:return!1;case 1:l.slice_del(),s=l.limit-l.cursor;t:do if(!p())break t;while(!1);l.cursor=l.limit-s;break;case 2:l.slice_from("l\u00f8s")}return!0}function v(){var e,t;return e=l.limit-l.cursor,l.cursor<a?!1:(l.cursor=a,t=l.limit_backward,l.limit_backward=l.cursor,l.cursor=l.limit-e,l.ket=l.cursor,l.out_grouping_b(s,97,248)?(l.bra=l.cursor,f=l.slice_to(f),l.limit_backward=t,l.eq_v_b(f)?(l.slice_del(),!0):!1):(l.limit_backward=t,!1))}var e=[new t("hed",-1,1),new t("ethed",0,1),new t("ered",-1,1),new t("e",-1,1),new t("erede",3,1),new t("ende",3,1),new t("erende",5,1),new t("ene",3,1),new t("erne",3,1),new t("ere",3,1),new t("en",-1,1),new t("heden",10,1),new t("eren",10,1),new t("er",-1,1),new t("heder",13,1),new t("erer",13,1),new t("s",-1,2),new t("heds",16,1),new t("es",16,1),new t("endes",18,1),new t("erendes",19,1),new t("enes",18,1),new t("ernes",18,1),new t("eres",18,1),new t("ens",16,1),new t("hedens",24,1),new t("erens",24,1),new t("ers",16,1),new t("ets",16,1),new t("erets",28,1),new t("et",-1,1),new t("eret",30,1)],r=[new t("gd",-1,-1),new t("dt",-1,-1),new t("gt",-1,-1),new t("kt"
,-1,-1)],i=[new t("ig",-1,1),new t("lig",0,1),new t("elig",1,1),new t("els",-1,1),new t("l\u00f8st",-1,2)],s=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,0,48,0,128],o=[239,254,42,3,0,0,0,0,0,0,0,0,0,0,0,0,16],u,a,f="",l=new n;this.stem=function(){var e,t,n,r,i;e=l.cursor;e:do if(!c())break e;while(!1);l.cursor=e,l.limit_backward=l.cursor,l.cursor=l.limit,t=l.limit-l.cursor;t:do if(!h())break t;while(!1);l.cursor=l.limit-t,n=l.limit-l.cursor;n:do if(!p())break n;while(!1);l.cursor=l.limit-n,r=l.limit-l.cursor;r:do if(!d())break r;while(!1);l.cursor=l.limit-r,i=l.limit-l.cursor;i:do if(!v())break i;while(!1);return l.cursor=l.limit-i,l.cursor=l.limit_backward,!0},this.setCurrent=function(e){l.setCurrent(e)},this.getCurrent=function(){return l.getCurrent()}},dutchStemmer:function(){function v(){var t,n,r,i,s,o,u;n=d.cursor;e:for(;;){r=d.cursor;t:do{d.bra=d.cursor,t=d.find_among(e,11);if(t==0)break t;d.ket=d.cursor;switch(t){case 0:break t;case 1:d.slice_from("a");break;case 2:d.slice_from("e");break;case 3:d.slice_from("i");break;case 4:d.slice_from("o");break;case 5:d.slice_from("u");break;case 6:if(d.cursor>=d.limit)break t;d.cursor++}continue e}while(!1);d.cursor=r;break e}d.cursor=n,i=d.cursor;n:do{d.bra=d.cursor;if(!d.eq_s(1,"y")){d.cursor=i;break n}d.ket=d.cursor,d.slice_from("Y")}while(!1);r:for(;;){s=d.cursor;i:do{s:for(;;){o=d.cursor;o:do{if(!d.in_grouping(a,97,232))break o;d.bra=d.cursor;u:do{u=d.cursor;a:do{if(!d.eq_s(1,"i"))break a;d.ket=d.cursor;if(!d.in_grouping(a,97,232))break a;d.slice_from("I");break u}while(!1);d.cursor=u;if(!d.eq_s(1,"y"))break o;d.ket=d.cursor,d.slice_from("Y")}while(!1);d.cursor=o;break s}while(!1);d.cursor=o;if(d.cursor>=d.limit)break i;d.cursor++}continue r}while(!1);d.cursor=s;break r}return!0}function m(){h=d.limit,c=d.limit;e:for(;;){t:do{if(!d.in_grouping(a,97,232))break t;break e}while(!1);if(d.cursor>=d.limit)return!1;d.cursor++}n:for(;;){r:do{if(!d.out_grouping(a,97,232))break r;break n}while(!1);if(d.cursor>=d.limit)return!1;d.cursor++}h=d.cursor;i:do{if(!(h<3))break i;h=3}while(!1);s:for(;;){o:do{if(!d.in_grouping(a,97,232))break o;break s}while(!1);if(d.cursor>=d.limit)return!1;d.cursor++}u:for(;;){a:do{if(!d.out_grouping(a,97,232))break a;break u}while(!1);if(d.cursor>=d.limit)return!1;d.cursor++}return c=d.cursor,!0}function g(){var e,t;e:for(;;){t=d.cursor;t:do{d.bra=d.cursor,e=d.find_among(r,3);if(e==0)break t;d.ket=d.cursor;switch(e){case 0:break t;case 1:d.slice_from("y");break;case 2:d.slice_from("i");break;case 3:if(d.cursor>=d.limit)break t;d.cursor++}continue e}while(!1);d.cursor=t;break e}return!0}function y(){return h<=d.cursor?!0:!1}function b(){return c<=d.cursor?!0:!1}function w(){var e;return e=d.limit-d.cursor,d.find_among_b(i,3)==0?!1:(d.cursor=d.limit-e,d.ket=d.cursor,d.cursor<=d.limit_backward?!1:(d.cursor--,d.bra=d.cursor,d.slice_del(),!0))}function E(){var e;return p=!1,d.ket=d.cursor,d.eq_s_b(1,"e")?(d.bra=d.cursor,y()?(e=d.limit-d.cursor,d.out_grouping_b(a,97,232)?(d.cursor=d.limit-e,d.slice_del(),p=!0,w()?!0:!1):!1):!1):!1}function S(){var e,t;if(!y())return!1;e=d.limit-d.cursor;if(!d.out_grouping_b(a,97,232))return!1;d.cursor=d.limit-e,t=d.limit-d.cursor;e:do{if(!d.eq_s_b(3,"gem"))break e;return!1}while(!1);return d.cursor=d.limit-t,d.slice_del(),w()?!0:!1}function x(){var e,t,n,r,i,c,h,v,m,g,x;t=d.limit-d.cursor;e:do{d.ket=d.cursor,e=d.find_among_b(s,5);if(e==0)break e;d.bra=d.cursor;switch(e){case 0:break e;case 1:if(!y())break e;d.slice_from("heid");break;case 2:if(!S())break e;break;case 3:if(!y())break e;if(!d.out_grouping_b(l,97,232))break e;d.slice_del()}}while(!1);d.cursor=d.limit-t,n=d.limit-d.cursor;t:do if(!E())break t;while(!1);d.cursor=d.limit-n,r=d.limit-d.cursor;n:do{d.ket=d.cursor;if(!d.eq_s_b(4,"heid"))break n;d.bra=d.cursor;if(!b())break n;i=d.limit-d.cursor;r:do{if(!d.eq_s_b(1,"c"))break r;break n}while(!1);d.cursor=d.limit-i,d.slice_del(),d.ket=d.cursor;if(!d.eq_s_b(2,"en"))break n;d.bra=d.cursor;if(!S())break n}while(!1);d.cursor=d.limit-r,c=d.limit-d.cursor;i:do{d.ket=d.cursor,e=d.find_among_b(o,6);if(e==0)break i;d.bra=d.cursor;switch(e){case 0:break i;case 1:if(!b())break i;d.slice_del();s:do{h=d.limit-d.cursor;o:do{d.ket=d.cursor;if(!d.eq_s_b(2,"ig"))break o;d.bra=d.cursor;if(!b())break o;v=d.limit-d.cursor;u:do{if(!d.eq_s_b(1,"e"))break u;break o}while(!1);d.cursor=d.limit-v,d.slice_del();break s}while(!1);d.cursor=d.limit-h;if(!w())break i}while(!1);break;case 2:if(!b())break i;m=d.limit-d.cursor;a:do{if(!d.eq_s_b(1,"e"))break a;break i}while(!1);d.cursor=d.limit-m,d.slice_del();break;case 3:if(!b())break i;d.slice_del();if(!E())break i;break;case 4:if(!b())break i;d.slice_del();break;case 5:if(!b())break i;if(!p)break i;d.slice_del()}}while(!1);d.cursor=d.limit-c,g=d.limit-d.cursor;f:do{if(!d.out_grouping_b(f,73,232))break f;x=d.limit-d.cursor;if(d.find_among_b(u,4)==0)break f;if(!d.out_grouping_b(a,97,232))break f;d.cursor=d.limit-x,d.ket=d.cursor;if(d.cursor<=d.limit_backward)break f;d.cursor--,d.bra=d.cursor,d.slice_del()}while(!1);return d.cursor=d.limit-g,!0}var e=[new t("",-1,6),new t("\u00e1",0,1),new t("\u00e4",0,1),new t("\u00e9",0,2),new t("\u00eb",0,2),new t("\u00ed",0,3),new t("\u00ef",0,3),new t("\u00f3",0,4),new t("\u00f6",0,4),new t("\u00fa",0,5),new t("\u00fc",0,5)],r=[new t("",-1,3),new t("I",0,2),new t("Y",0,1)],i=[new t("dd",-1,-1),new t("kk",-1,-1),new t("tt",-1,-1)],s=[new t("ene",-1,2),new t("se",-1,3),new t("en",-1,2),new t("heden",2,1),new t("s",-1,3)],o=[new t("end",-1,1),new t("ig",-1,2),new t("ing",-1,1),new t("lijk",-1,3),new t("baar",-1,4),new t("bar",-1,5)],u=[new t("aa",-1,-1),new t("ee",-1,-1),new t("oo",-1,-1),new t("uu",-1,-1)],a=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,0,128],f=[1,0,0,17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,0,128],l=[17,67,16,1,0,0,0,0,0,0,0,0,0,0,0,0,128],c,h,p,d=new n;this.stem=function(){var e,t,n,r;e=d.cursor;e:do if(!v())break e;while(!1);d.cursor=e,t=d.cursor;t:do if(!m())break t;while(!1);d.cursor=t,d.limit_backward=d.cursor,d.cursor=d.limit,n=d.limit-d.cursor
;n:do if(!x())break n;while(!1);d.cursor=d.limit-n,d.cursor=d.limit_backward,r=d.cursor;r:do if(!g())break r;while(!1);return d.cursor=r,!0},this.setCurrent=function(e){d.setCurrent(e)},this.getCurrent=function(){return d.getCurrent()}},englishStemmer:function(){function w(){var e,t,n,r,i;m=!1,e=b.cursor;e:do{b.bra=b.cursor;if(!b.eq_s(1,"'"))break e;b.ket=b.cursor,b.slice_del()}while(!1);b.cursor=e,t=b.cursor;t:do{b.bra=b.cursor;if(!b.eq_s(1,"y"))break t;b.ket=b.cursor,b.slice_from("Y"),m=!0}while(!1);b.cursor=t,n=b.cursor;do n:for(;;){r=b.cursor;r:do{i:for(;;){i=b.cursor;s:do{if(!b.in_grouping(p,97,121))break s;b.bra=b.cursor;if(!b.eq_s(1,"y"))break s;b.ket=b.cursor,b.cursor=i;break i}while(!1);b.cursor=i;if(b.cursor>=b.limit)break r;b.cursor++}b.slice_from("Y"),m=!0;continue n}while(!1);b.cursor=r;break n}while(!1);return b.cursor=n,!0}function E(){var t,n;y=b.limit,g=b.limit,t=b.cursor;e:do{t:do{n=b.cursor;n:do{if(b.find_among(e,3)==0)break n;break t}while(!1);b.cursor=n;r:for(;;){i:do{if(!b.in_grouping(p,97,121))break i;break r}while(!1);if(b.cursor>=b.limit)break e;b.cursor++}s:for(;;){o:do{if(!b.out_grouping(p,97,121))break o;break s}while(!1);if(b.cursor>=b.limit)break e;b.cursor++}}while(!1);y=b.cursor;u:for(;;){a:do{if(!b.in_grouping(p,97,121))break a;break u}while(!1);if(b.cursor>=b.limit)break e;b.cursor++}f:for(;;){l:do{if(!b.out_grouping(p,97,121))break l;break f}while(!1);if(b.cursor>=b.limit)break e;b.cursor++}g=b.cursor}while(!1);return b.cursor=t,!0}function S(){var e;e:do{e=b.limit-b.cursor;t:do{if(!b.out_grouping_b(d,89,121))break t;if(!b.in_grouping_b(p,97,121))break t;if(!b.out_grouping_b(p,97,121))break t;break e}while(!1);b.cursor=b.limit-e;if(!b.out_grouping_b(p,97,121))return!1;if(!b.in_grouping_b(p,97,121))return!1;if(b.cursor>b.limit_backward)return!1}while(!1);return!0}function x(){return y<=b.cursor?!0:!1}function T(){return g<=b.cursor?!0:!1}function N(){var e,t,n;t=b.limit-b.cursor;e:do{b.ket=b.cursor,e=b.find_among_b(r,3);if(e==0){b.cursor=b.limit-t;break e}b.bra=b.cursor;switch(e){case 0:b.cursor=b.limit-t;break e;case 1:b.slice_del()}}while(!1);b.ket=b.cursor,e=b.find_among_b(i,6);if(e==0)return!1;b.bra=b.cursor;switch(e){case 0:return!1;case 1:b.slice_from("ss");break;case 2:t:do{n=b.limit-b.cursor;n:do{var s=b.cursor-2;if(b.limit_backward>s||s>b.limit)break n;b.cursor=s,b.slice_from("i");break t}while(!1);b.cursor=b.limit-n,b.slice_from("ie")}while(!1);break;case 3:if(b.cursor<=b.limit_backward)return!1;b.cursor--;r:for(;;){i:do{if(!b.in_grouping_b(p,97,121))break i;break r}while(!1);if(b.cursor<=b.limit_backward)return!1;b.cursor--}b.slice_del()}return!0}function C(){var e,t,n,r;b.ket=b.cursor,e=b.find_among_b(o,6);if(e==0)return!1;b.bra=b.cursor;switch(e){case 0:return!1;case 1:if(!x())return!1;b.slice_from("ee");break;case 2:t=b.limit-b.cursor;e:for(;;){t:do{if(!b.in_grouping_b(p,97,121))break t;break e}while(!1);if(b.cursor<=b.limit_backward)return!1;b.cursor--}b.cursor=b.limit-t,b.slice_del(),n=b.limit-b.cursor,e=b.find_among_b(s,13);if(e==0)return!1;b.cursor=b.limit-n;switch(e){case 0:return!1;case 1:var i=b.cursor;b.insert(b.cursor,b.cursor,"e"),b.cursor=i;break;case 2:b.ket=b.cursor;if(b.cursor<=b.limit_backward)return!1;b.cursor--,b.bra=b.cursor,b.slice_del();break;case 3:if(b.cursor!=y)return!1;r=b.limit-b.cursor;if(!S())return!1;b.cursor=b.limit-r;var i=b.cursor;b.insert(b.cursor,b.cursor,"e"),b.cursor=i}}return!0}function k(){var e,t;b.ket=b.cursor;e:do{e=b.limit-b.cursor;t:do{if(!b.eq_s_b(1,"y"))break t;break e}while(!1);b.cursor=b.limit-e;if(!b.eq_s_b(1,"Y"))return!1}while(!1);b.bra=b.cursor;if(!b.out_grouping_b(p,97,121))return!1;t=b.limit-b.cursor;n:do{if(b.cursor>b.limit_backward)break n;return!1}while(!1);return b.cursor=b.limit-t,b.slice_from("i"),!0}function L(){var e;b.ket=b.cursor,e=b.find_among_b(u,24);if(e==0)return!1;b.bra=b.cursor;if(!x())return!1;switch(e){case 0:return!1;case 1:b.slice_from("tion");break;case 2:b.slice_from("ence");break;case 3:b.slice_from("ance");break;case 4:b.slice_from("able");break;case 5:b.slice_from("ent");break;case 6:b.slice_from("ize");break;case 7:b.slice_from("ate");break;case 8:b.slice_from("al");break;case 9:b.slice_from("ful");break;case 10:b.slice_from("ous");break;case 11:b.slice_from("ive");break;case 12:b.slice_from("ble");break;case 13:if(!b.eq_s_b(1,"l"))return!1;b.slice_from("og");break;case 14:b.slice_from("ful");break;case 15:b.slice_from("less");break;case 16:if(!b.in_grouping_b(v,99,116))return!1;b.slice_del()}return!0}function A(){var e;b.ket=b.cursor,e=b.find_among_b(a,9);if(e==0)return!1;b.bra=b.cursor;if(!x())return!1;switch(e){case 0:return!1;case 1:b.slice_from("tion");break;case 2:b.slice_from("ate");break;case 3:b.slice_from("al");break;case 4:b.slice_from("ic");break;case 5:b.slice_del();break;case 6:if(!T())return!1;b.slice_del()}return!0}function O(){var e,t;b.ket=b.cursor,e=b.find_among_b(f,18);if(e==0)return!1;b.bra=b.cursor;if(!T())return!1;switch(e){case 0:return!1;case 1:b.slice_del();break;case 2:e:do{t=b.limit-b.cursor;t:do{if(!b.eq_s_b(1,"s"))break t;break e}while(!1);b.cursor=b.limit-t;if(!b.eq_s_b(1,"t"))return!1}while(!1);b.slice_del()}return!0}function M(){var e,t,n;b.ket=b.cursor,e=b.find_among_b(l,2);if(e==0)return!1;b.bra=b.cursor;switch(e){case 0:return!1;case 1:e:do{t=b.limit-b.cursor;t:do{if(!T())break t;break e}while(!1);b.cursor=b.limit-t;if(!x())return!1;n=b.limit-b.cursor;n:do{if(!S())break n;return!1}while(!1);b.cursor=b.limit-n}while(!1);b.slice_del();break;case 2:if(!T())return!1;if(!b.eq_s_b(1,"l"))return!1;b.slice_del()}return!0}function _(){return b.ket=b.cursor,b.find_among_b(c,8)==0?!1:(b.bra=b.cursor,b.cursor>b.limit_backward?!1:!0)}function D(){var e;b.bra=b.cursor,e=b.find_among(h,18);if(e==0)return!1;b.ket=b.cursor;if(b.cursor<b.limit)return!1;switch(e){case 0:return!1;case 1:b.slice_from("ski");break;case 2:b.slice_from("sky");break;case 3:b.slice_from("die");break;case 4:b.slice_from("lie");break;case 5:b.slice_from("tie");break;case 6:
b.slice_from("idl");break;case 7:b.slice_from("gentl");break;case 8:b.slice_from("ugli");break;case 9:b.slice_from("earli");break;case 10:b.slice_from("onli");break;case 11:b.slice_from("singl")}return!0}function P(){var e,t;if(!m)return!1;e:for(;;){e=b.cursor;t:do{n:for(;;){t=b.cursor;r:do{b.bra=b.cursor;if(!b.eq_s(1,"Y"))break r;b.ket=b.cursor,b.cursor=t;break n}while(!1);b.cursor=t;if(b.cursor>=b.limit)break t;b.cursor++}b.slice_from("y");continue e}while(!1);b.cursor=e;break e}return!0}var e=[new t("arsen",-1,-1),new t("commun",-1,-1),new t("gener",-1,-1)],r=[new t("'",-1,1),new t("'s'",0,1),new t("'s",-1,1)],i=[new t("ied",-1,2),new t("s",-1,3),new t("ies",1,2),new t("sses",1,1),new t("ss",1,-1),new t("us",1,-1)],s=[new t("",-1,3),new t("bb",0,2),new t("dd",0,2),new t("ff",0,2),new t("gg",0,2),new t("bl",0,1),new t("mm",0,2),new t("nn",0,2),new t("pp",0,2),new t("rr",0,2),new t("at",0,1),new t("tt",0,2),new t("iz",0,1)],o=[new t("ed",-1,2),new t("eed",0,1),new t("ing",-1,2),new t("edly",-1,2),new t("eedly",3,1),new t("ingly",-1,2)],u=[new t("anci",-1,3),new t("enci",-1,2),new t("ogi",-1,13),new t("li",-1,16),new t("bli",3,12),new t("abli",4,4),new t("alli",3,8),new t("fulli",3,14),new t("lessli",3,15),new t("ousli",3,10),new t("entli",3,5),new t("aliti",-1,8),new t("biliti",-1,12),new t("iviti",-1,11),new t("tional",-1,1),new t("ational",14,7),new t("alism",-1,8),new t("ation",-1,7),new t("ization",17,6),new t("izer",-1,6),new t("ator",-1,7),new t("iveness",-1,11),new t("fulness",-1,9),new t("ousness",-1,10)],a=[new t("icate",-1,4),new t("ative",-1,6),new t("alize",-1,3),new t("iciti",-1,4),new t("ical",-1,4),new t("tional",-1,1),new t("ational",5,2),new t("ful",-1,5),new t("ness",-1,5)],f=[new t("ic",-1,1),new t("ance",-1,1),new t("ence",-1,1),new t("able",-1,1),new t("ible",-1,1),new t("ate",-1,1),new t("ive",-1,1),new t("ize",-1,1),new t("iti",-1,1),new t("al",-1,1),new t("ism",-1,1),new t("ion",-1,2),new t("er",-1,1),new t("ous",-1,1),new t("ant",-1,1),new t("ent",-1,1),new t("ment",15,1),new t("ement",16,1)],l=[new t("e",-1,1),new t("l",-1,2)],c=[new t("succeed",-1,-1),new t("proceed",-1,-1),new t("exceed",-1,-1),new t("canning",-1,-1),new t("inning",-1,-1),new t("earring",-1,-1),new t("herring",-1,-1),new t("outing",-1,-1)],h=[new t("andes",-1,-1),new t("atlas",-1,-1),new t("bias",-1,-1),new t("cosmos",-1,-1),new t("dying",-1,3),new t("early",-1,9),new t("gently",-1,7),new t("howe",-1,-1),new t("idly",-1,6),new t("lying",-1,4),new t("news",-1,-1),new t("only",-1,10),new t("singly",-1,11),new t("skies",-1,2),new t("skis",-1,1),new t("sky",-1,-1),new t("tying",-1,5),new t("ugly",-1,8)],p=[17,65,16,1],d=[1,17,65,208,1],v=[55,141,2],m,g,y,b=new n;this.stem=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h;e:do{e=b.cursor;t:do{if(!D())break t;break e}while(!1);b.cursor=e;n:do{t=b.cursor;r:do{var p=b.cursor+3;if(0>p||p>b.limit)break r;b.cursor=p;break n}while(!1);b.cursor=t;break e}while(!1);b.cursor=e,n=b.cursor;i:do if(!w())break i;while(!1);b.cursor=n,r=b.cursor;s:do if(!E())break s;while(!1);b.cursor=r,b.limit_backward=b.cursor,b.cursor=b.limit,i=b.limit-b.cursor;o:do if(!N())break o;while(!1);b.cursor=b.limit-i;u:do{s=b.limit-b.cursor;a:do{if(!_())break a;break u}while(!1);b.cursor=b.limit-s,o=b.limit-b.cursor;f:do if(!C())break f;while(!1);b.cursor=b.limit-o,u=b.limit-b.cursor;l:do if(!k())break l;while(!1);b.cursor=b.limit-u,a=b.limit-b.cursor;c:do if(!L())break c;while(!1);b.cursor=b.limit-a,f=b.limit-b.cursor;h:do if(!A())break h;while(!1);b.cursor=b.limit-f,l=b.limit-b.cursor;p:do if(!O())break p;while(!1);b.cursor=b.limit-l,c=b.limit-b.cursor;d:do if(!M())break d;while(!1);b.cursor=b.limit-c}while(!1);b.cursor=b.limit_backward,h=b.cursor;v:do if(!P())break v;while(!1);b.cursor=h}while(!1);return!0},this.setCurrent=function(e){b.setCurrent(e)},this.getCurrent=function(){return b.getCurrent()}},finnishStemmer:function(){function E(){var e,t;b=w.limit,y=w.limit;e:for(;;){e=w.cursor;t:do{if(!w.in_grouping(p,97,246))break t;w.cursor=e;break e}while(!1);w.cursor=e;if(w.cursor>=w.limit)return!1;w.cursor++}n:for(;;){r:do{if(!w.out_grouping(p,97,246))break r;break n}while(!1);if(w.cursor>=w.limit)return!1;w.cursor++}b=w.cursor;i:for(;;){t=w.cursor;s:do{if(!w.in_grouping(p,97,246))break s;w.cursor=t;break i}while(!1);w.cursor=t;if(w.cursor>=w.limit)return!1;w.cursor++}o:for(;;){u:do{if(!w.out_grouping(p,97,246))break u;break o}while(!1);if(w.cursor>=w.limit)return!1;w.cursor++}return y=w.cursor,!0}function S(){return y<=w.cursor?!0:!1}function x(){var t,n,r;n=w.limit-w.cursor;if(w.cursor<b)return!1;w.cursor=b,r=w.limit_backward,w.limit_backward=w.cursor,w.cursor=w.limit-n,w.ket=w.cursor,t=w.find_among_b(e,10);if(t==0)return w.limit_backward=r,!1;w.bra=w.cursor,w.limit_backward=r;switch(t){case 0:return!1;case 1:if(!w.in_grouping_b(v,97,246))return!1;break;case 2:if(!S())return!1}return w.slice_del(),!0}function T(){var e,t,n,u;t=w.limit-w.cursor;if(w.cursor<b)return!1;w.cursor=b,n=w.limit_backward,w.limit_backward=w.cursor,w.cursor=w.limit-t,w.ket=w.cursor,e=w.find_among_b(o,9);if(e==0)return w.limit_backward=n,!1;w.bra=w.cursor,w.limit_backward=n;switch(e){case 0:return!1;case 1:u=w.limit-w.cursor;e:do{if(!w.eq_s_b(1,"k"))break e;return!1}while(!1);w.cursor=w.limit-u,w.slice_del();break;case 2:w.slice_del(),w.ket=w.cursor;if(!w.eq_s_b(3,"kse"))return!1;w.bra=w.cursor,w.slice_from("ksi");break;case 3:w.slice_del();break;case 4:if(w.find_among_b(r,6)==0)return!1;w.slice_del();break;case 5:if(w.find_among_b(i,6)==0)return!1;w.slice_del();break;case 6:if(w.find_among_b(s,2)==0)return!1;w.slice_del()}return!0}function N(){return w.find_among_b(u,7)==0?!1:!0}function C(){return w.eq_s_b(1,"i")?w.in_grouping_b(d,97,246)?!0:!1:!1}function k(){var e,t,n,r,i,s;t=w.limit-w.cursor;if(w.cursor<b)return!1;w.cursor=b,n=w.limit_backward,w.limit_backward=w.cursor,w.cursor=w.limit-t,w.ket=w.cursor,e=w.find_among_b(a,30);if(e==0)return w.limit_backward=n,!1;w.bra=w.cursor,w.limit_backward=n;switch(e){case 0:return!1
;case 1:if(!w.eq_s_b(1,"a"))return!1;break;case 2:if(!w.eq_s_b(1,"e"))return!1;break;case 3:if(!w.eq_s_b(1,"i"))return!1;break;case 4:if(!w.eq_s_b(1,"o"))return!1;break;case 5:if(!w.eq_s_b(1,"\u00e4"))return!1;break;case 6:if(!w.eq_s_b(1,"\u00f6"))return!1;break;case 7:r=w.limit-w.cursor;e:do{i=w.limit-w.cursor;t:do{s=w.limit-w.cursor;n:do{if(!N())break n;break t}while(!1);w.cursor=w.limit-s;if(!w.eq_s_b(2,"ie")){w.cursor=w.limit-r;break e}}while(!1);w.cursor=w.limit-i;if(w.cursor<=w.limit_backward){w.cursor=w.limit-r;break e}w.cursor--,w.bra=w.cursor}while(!1);break;case 8:if(!w.in_grouping_b(p,97,246))return!1;if(!w.out_grouping_b(p,97,246))return!1;break;case 9:if(!w.eq_s_b(1,"e"))return!1}return w.slice_del(),m=!0,!0}function L(){var e,t,n,r;t=w.limit-w.cursor;if(w.cursor<y)return!1;w.cursor=y,n=w.limit_backward,w.limit_backward=w.cursor,w.cursor=w.limit-t,w.ket=w.cursor,e=w.find_among_b(f,14);if(e==0)return w.limit_backward=n,!1;w.bra=w.cursor,w.limit_backward=n;switch(e){case 0:return!1;case 1:r=w.limit-w.cursor;e:do{if(!w.eq_s_b(2,"po"))break e;return!1}while(!1);w.cursor=w.limit-r}return w.slice_del(),!0}function A(){var e,t;return e=w.limit-w.cursor,w.cursor<b?!1:(w.cursor=b,t=w.limit_backward,w.limit_backward=w.cursor,w.cursor=w.limit-e,w.ket=w.cursor,w.find_among_b(l,2)==0?(w.limit_backward=t,!1):(w.bra=w.cursor,w.limit_backward=t,w.slice_del(),!0))}function O(){var e,t,n,r,i,s,o;t=w.limit-w.cursor;if(w.cursor<b)return!1;w.cursor=b,n=w.limit_backward,w.limit_backward=w.cursor,w.cursor=w.limit-t,w.ket=w.cursor;if(!w.eq_s_b(1,"t"))return w.limit_backward=n,!1;w.bra=w.cursor,r=w.limit-w.cursor;if(!w.in_grouping_b(p,97,246))return w.limit_backward=n,!1;w.cursor=w.limit-r,w.slice_del(),w.limit_backward=n,i=w.limit-w.cursor;if(w.cursor<y)return!1;w.cursor=y,s=w.limit_backward,w.limit_backward=w.cursor,w.cursor=w.limit-i,w.ket=w.cursor,e=w.find_among_b(c,2);if(e==0)return w.limit_backward=s,!1;w.bra=w.cursor,w.limit_backward=s;switch(e){case 0:return!1;case 1:o=w.limit-w.cursor;e:do{if(!w.eq_s_b(2,"po"))break e;return!1}while(!1);w.cursor=w.limit-o}return w.slice_del(),!0}function M(){var e,t,n,r,i,s,o,u,a;e=w.limit-w.cursor;if(w.cursor<b)return!1;w.cursor=b,t=w.limit_backward,w.limit_backward=w.cursor,w.cursor=w.limit-e,n=w.limit-w.cursor;e:do{r=w.limit-w.cursor;if(!N())break e;w.cursor=w.limit-r,w.ket=w.cursor;if(w.cursor<=w.limit_backward)break e;w.cursor--,w.bra=w.cursor,w.slice_del()}while(!1);w.cursor=w.limit-n,i=w.limit-w.cursor;t:do{w.ket=w.cursor;if(!w.in_grouping_b(h,97,228))break t;w.bra=w.cursor;if(!w.out_grouping_b(p,97,246))break t;w.slice_del()}while(!1);w.cursor=w.limit-i,s=w.limit-w.cursor;n:do{w.ket=w.cursor;if(!w.eq_s_b(1,"j"))break n;w.bra=w.cursor;r:do{o=w.limit-w.cursor;i:do{if(!w.eq_s_b(1,"o"))break i;break r}while(!1);w.cursor=w.limit-o;if(!w.eq_s_b(1,"u"))break n}while(!1);w.slice_del()}while(!1);w.cursor=w.limit-s,u=w.limit-w.cursor;s:do{w.ket=w.cursor;if(!w.eq_s_b(1,"o"))break s;w.bra=w.cursor;if(!w.eq_s_b(1,"j"))break s;w.slice_del()}while(!1);w.cursor=w.limit-u,w.limit_backward=t;o:for(;;){a=w.limit-w.cursor;u:do{if(!w.out_grouping_b(p,97,246))break u;w.cursor=w.limit-a;break o}while(!1);w.cursor=w.limit-a;if(w.cursor<=w.limit_backward)return!1;w.cursor--}return w.ket=w.cursor,w.cursor<=w.limit_backward?!1:(w.cursor--,w.bra=w.cursor,g=w.slice_to(g),w.eq_v_b(g)?(w.slice_del(),!0):!1)}var e=[new t("pa",-1,1),new t("sti",-1,2),new t("kaan",-1,1),new t("han",-1,1),new t("kin",-1,1),new t("h\u00e4n",-1,1),new t("k\u00e4\u00e4n",-1,1),new t("ko",-1,1),new t("p\u00e4",-1,1),new t("k\u00f6",-1,1)],r=[new t("lla",-1,-1),new t("na",-1,-1),new t("ssa",-1,-1),new t("ta",-1,-1),new t("lta",3,-1),new t("sta",3,-1)],i=[new t("ll\u00e4",-1,-1),new t("n\u00e4",-1,-1),new t("ss\u00e4",-1,-1),new t("t\u00e4",-1,-1),new t("lt\u00e4",3,-1),new t("st\u00e4",3,-1)],s=[new t("lle",-1,-1),new t("ine",-1,-1)],o=[new t("nsa",-1,3),new t("mme",-1,3),new t("nne",-1,3),new t("ni",-1,2),new t("si",-1,1),new t("an",-1,4),new t("en",-1,6),new t("\u00e4n",-1,5),new t("ns\u00e4",-1,3)],u=[new t("aa",-1,-1),new t("ee",-1,-1),new t("ii",-1,-1),new t("oo",-1,-1),new t("uu",-1,-1),new t("\u00e4\u00e4",-1,-1),new t("\u00f6\u00f6",-1,-1)],a=[new t("a",-1,8),new t("lla",0,-1),new t("na",0,-1),new t("ssa",0,-1),new t("ta",0,-1),new t("lta",4,-1),new t("sta",4,-1),new t("tta",4,9),new t("lle",-1,-1),new t("ine",-1,-1),new t("ksi",-1,-1),new t("n",-1,7),new t("han",11,1),new t("den",11,-1,C),new t("seen",11,-1,N),new t("hen",11,2),new t("tten",11,-1,C),new t("hin",11,3),new t("siin",11,-1,C),new t("hon",11,4),new t("h\u00e4n",11,5),new t("h\u00f6n",11,6),new t("\u00e4",-1,8),new t("ll\u00e4",22,-1),new t("n\u00e4",22,-1),new t("ss\u00e4",22,-1),new t("t\u00e4",22,-1),new t("lt\u00e4",26,-1),new t("st\u00e4",26,-1),new t("tt\u00e4",26,9)],f=[new t("eja",-1,-1),new t("mma",-1,1),new t("imma",1,-1),new t("mpa",-1,1),new t("impa",3,-1),new t("mmi",-1,1),new t("immi",5,-1),new t("mpi",-1,1),new t("impi",7,-1),new t("ej\u00e4",-1,-1),new t("mm\u00e4",-1,1),new t("imm\u00e4",10,-1),new t("mp\u00e4",-1,1),new t("imp\u00e4",12,-1)],l=[new t("i",-1,-1),new t("j",-1,-1)],c=[new t("mma",-1,1),new t("imma",0,-1)],h=[17,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8],p=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,0,8,0,32],d=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,32],v=[17,97,24,1,0,0,0,0,0,0,0,0,0,0,0,0,8,0,32],m,g="",y,b,w=new n;this.stem=function(){var e,t,n,r,i,s,o,u,a;e=w.cursor;e:do if(!E())break e;while(!1);w.cursor=e,m=!1,w.limit_backward=w.cursor,w.cursor=w.limit,t=w.limit-w.cursor;t:do if(!x())break t;while(!1);w.cursor=w.limit-t,n=w.limit-w.cursor;n:do if(!T())break n;while(!1);w.cursor=w.limit-n,r=w.limit-w.cursor;r:do if(!k())break r;while(!1);w.cursor=w.limit-r,i=w.limit-w.cursor;i:do if(!L())break i;while(!1);w.cursor=w.limit-i;s:do{s=w.limit-w.cursor;o:do{if(!m)break o;o=w.limit-w.cursor;u:do if(!A())break u;while(!1);w.cursor=w.limit-o;break s}while(!1);w.cursor=w.limit-s,u=w.limit-w.cursor;a:do if(!O())break a;while(!1);
w.cursor=w.limit-u}while(!1);a=w.limit-w.cursor;f:do if(!M())break f;while(!1);return w.cursor=w.limit-a,w.cursor=w.limit_backward,!0},this.setCurrent=function(e){w.setCurrent(e)},this.getCurrent=function(){return w.getCurrent()}},frenchStemmer:function(){function g(){var e,t,n,r;e:for(;;){e=m.cursor;t:do{n:for(;;){t=m.cursor;r:do{i:do{n=m.cursor;s:do{if(!m.in_grouping(c,97,251))break s;m.bra=m.cursor;o:do{r=m.cursor;u:do{if(!m.eq_s(1,"u"))break u;m.ket=m.cursor;if(!m.in_grouping(c,97,251))break u;m.slice_from("U");break o}while(!1);m.cursor=r;a:do{if(!m.eq_s(1,"i"))break a;m.ket=m.cursor;if(!m.in_grouping(c,97,251))break a;m.slice_from("I");break o}while(!1);m.cursor=r;if(!m.eq_s(1,"y"))break s;m.ket=m.cursor,m.slice_from("Y")}while(!1);break i}while(!1);m.cursor=n;f:do{m.bra=m.cursor;if(!m.eq_s(1,"y"))break f;m.ket=m.cursor;if(!m.in_grouping(c,97,251))break f;m.slice_from("Y");break i}while(!1);m.cursor=n;if(!m.eq_s(1,"q"))break r;m.bra=m.cursor;if(!m.eq_s(1,"u"))break r;m.ket=m.cursor,m.slice_from("U")}while(!1);m.cursor=t;break n}while(!1);m.cursor=t;if(m.cursor>=m.limit)break t;m.cursor++}continue e}while(!1);m.cursor=e;break e}return!0}function y(){var t,n,r;v=m.limit,d=m.limit,p=m.limit,t=m.cursor;e:do{t:do{n=m.cursor;n:do{if(!m.in_grouping(c,97,251))break n;if(!m.in_grouping(c,97,251))break n;if(m.cursor>=m.limit)break n;m.cursor++;break t}while(!1);m.cursor=n;r:do{if(m.find_among(e,3)==0)break r;break t}while(!1);m.cursor=n;if(m.cursor>=m.limit)break e;m.cursor++;i:for(;;){s:do{if(!m.in_grouping(c,97,251))break s;break i}while(!1);if(m.cursor>=m.limit)break e;m.cursor++}}while(!1);v=m.cursor}while(!1);m.cursor=t,r=m.cursor;o:do{u:for(;;){a:do{if(!m.in_grouping(c,97,251))break a;break u}while(!1);if(m.cursor>=m.limit)break o;m.cursor++}f:for(;;){l:do{if(!m.out_grouping(c,97,251))break l;break f}while(!1);if(m.cursor>=m.limit)break o;m.cursor++}d=m.cursor;c:for(;;){h:do{if(!m.in_grouping(c,97,251))break h;break c}while(!1);if(m.cursor>=m.limit)break o;m.cursor++}p:for(;;){d:do{if(!m.out_grouping(c,97,251))break d;break p}while(!1);if(m.cursor>=m.limit)break o;m.cursor++}p=m.cursor}while(!1);return m.cursor=r,!0}function b(){var e,t;e:for(;;){t=m.cursor;t:do{m.bra=m.cursor,e=m.find_among(r,4);if(e==0)break t;m.ket=m.cursor;switch(e){case 0:break t;case 1:m.slice_from("i");break;case 2:m.slice_from("u");break;case 3:m.slice_from("y");break;case 4:if(m.cursor>=m.limit)break t;m.cursor++}continue e}while(!1);m.cursor=t;break e}return!0}function w(){return v<=m.cursor?!0:!1}function E(){return d<=m.cursor?!0:!1}function S(){return p<=m.cursor?!0:!1}function x(){var e,t,n,r,u,a,f,l,h,p,d,v;m.ket=m.cursor,e=m.find_among_b(o,43);if(e==0)return!1;m.bra=m.cursor;switch(e){case 0:return!1;case 1:if(!S())return!1;m.slice_del();break;case 2:if(!S())return!1;m.slice_del(),t=m.limit-m.cursor;e:do{m.ket=m.cursor;if(!m.eq_s_b(2,"ic")){m.cursor=m.limit-t;break e}m.bra=m.cursor;t:do{n=m.limit-m.cursor;n:do{if(!S())break n;m.slice_del();break t}while(!1);m.cursor=m.limit-n,m.slice_from("iqU")}while(!1)}while(!1);break;case 3:if(!S())return!1;m.slice_from("log");break;case 4:if(!S())return!1;m.slice_from("u");break;case 5:if(!S())return!1;m.slice_from("ent");break;case 6:if(!w())return!1;m.slice_del(),r=m.limit-m.cursor;r:do{m.ket=m.cursor,e=m.find_among_b(i,6);if(e==0){m.cursor=m.limit-r;break r}m.bra=m.cursor;switch(e){case 0:m.cursor=m.limit-r;break r;case 1:if(!S()){m.cursor=m.limit-r;break r}m.slice_del(),m.ket=m.cursor;if(!m.eq_s_b(2,"at")){m.cursor=m.limit-r;break r}m.bra=m.cursor;if(!S()){m.cursor=m.limit-r;break r}m.slice_del();break;case 2:i:do{u=m.limit-m.cursor;s:do{if(!S())break s;m.slice_del();break i}while(!1);m.cursor=m.limit-u;if(!E()){m.cursor=m.limit-r;break r}m.slice_from("eux")}while(!1);break;case 3:if(!S()){m.cursor=m.limit-r;break r}m.slice_del();break;case 4:if(!w()){m.cursor=m.limit-r;break r}m.slice_from("i")}}while(!1);break;case 7:if(!S())return!1;m.slice_del(),a=m.limit-m.cursor;o:do{m.ket=m.cursor,e=m.find_among_b(s,3);if(e==0){m.cursor=m.limit-a;break o}m.bra=m.cursor;switch(e){case 0:m.cursor=m.limit-a;break o;case 1:u:do{f=m.limit-m.cursor;a:do{if(!S())break a;m.slice_del();break u}while(!1);m.cursor=m.limit-f,m.slice_from("abl")}while(!1);break;case 2:f:do{l=m.limit-m.cursor;l:do{if(!S())break l;m.slice_del();break f}while(!1);m.cursor=m.limit-l,m.slice_from("iqU")}while(!1);break;case 3:if(!S()){m.cursor=m.limit-a;break o}m.slice_del()}}while(!1);break;case 8:if(!S())return!1;m.slice_del(),h=m.limit-m.cursor;c:do{m.ket=m.cursor;if(!m.eq_s_b(2,"at")){m.cursor=m.limit-h;break c}m.bra=m.cursor;if(!S()){m.cursor=m.limit-h;break c}m.slice_del(),m.ket=m.cursor;if(!m.eq_s_b(2,"ic")){m.cursor=m.limit-h;break c}m.bra=m.cursor;h:do{p=m.limit-m.cursor;p:do{if(!S())break p;m.slice_del();break h}while(!1);m.cursor=m.limit-p,m.slice_from("iqU")}while(!1)}while(!1);break;case 9:m.slice_from("eau");break;case 10:if(!E())return!1;m.slice_from("al");break;case 11:d:do{d=m.limit-m.cursor;v:do{if(!S())break v;m.slice_del();break d}while(!1);m.cursor=m.limit-d;if(!E())return!1;m.slice_from("eux")}while(!1);break;case 12:if(!E())return!1;if(!m.out_grouping_b(c,97,251))return!1;m.slice_del();break;case 13:if(!w())return!1;return m.slice_from("ant"),!1;case 14:if(!w())return!1;return m.slice_from("ent"),!1;case 15:v=m.limit-m.cursor;if(!m.in_grouping_b(c,97,251))return!1;if(!w())return!1;return m.cursor=m.limit-v,m.slice_del(),!1}return!0}function T(){var e,t,n;t=m.limit-m.cursor;if(m.cursor<v)return!1;m.cursor=v,n=m.limit_backward,m.limit_backward=m.cursor,m.cursor=m.limit-t,m.ket=m.cursor,e=m.find_among_b(u,35);if(e==0)return m.limit_backward=n,!1;m.bra=m.cursor;switch(e){case 0:return m.limit_backward=n,!1;case 1:if(!m.out_grouping_b(c,97,251))return m.limit_backward=n,!1;m.slice_del()}return m.limit_backward=n,!0}function N(){var e,t,n,r;t=m.limit-m.cursor;if(m.cursor<v)return!1;m.cursor=v,n=m.limit_backward,m.limit_backward=m.cursor,m.cursor=m.limit-t,m.ket=m.cursor,e=m.find_among_b(a,38
);if(e==0)return m.limit_backward=n,!1;m.bra=m.cursor;switch(e){case 0:return m.limit_backward=n,!1;case 1:if(!S())return m.limit_backward=n,!1;m.slice_del();break;case 2:m.slice_del();break;case 3:m.slice_del(),r=m.limit-m.cursor;e:do{m.ket=m.cursor;if(!m.eq_s_b(1,"e")){m.cursor=m.limit-r;break e}m.bra=m.cursor,m.slice_del()}while(!1)}return m.limit_backward=n,!0}function C(){var e,t,n,r,i,s;t=m.limit-m.cursor;e:do{m.ket=m.cursor;if(!m.eq_s_b(1,"s")){m.cursor=m.limit-t;break e}m.bra=m.cursor,n=m.limit-m.cursor;if(!m.out_grouping_b(h,97,232)){m.cursor=m.limit-t;break e}m.cursor=m.limit-n,m.slice_del()}while(!1);r=m.limit-m.cursor;if(m.cursor<v)return!1;m.cursor=v,i=m.limit_backward,m.limit_backward=m.cursor,m.cursor=m.limit-r,m.ket=m.cursor,e=m.find_among_b(f,7);if(e==0)return m.limit_backward=i,!1;m.bra=m.cursor;switch(e){case 0:return m.limit_backward=i,!1;case 1:if(!S())return m.limit_backward=i,!1;t:do{s=m.limit-m.cursor;n:do{if(!m.eq_s_b(1,"s"))break n;break t}while(!1);m.cursor=m.limit-s;if(!m.eq_s_b(1,"t"))return m.limit_backward=i,!1}while(!1);m.slice_del();break;case 2:m.slice_from("i");break;case 3:m.slice_del();break;case 4:if(!m.eq_s_b(2,"gu"))return m.limit_backward=i,!1;m.slice_del()}return m.limit_backward=i,!0}function k(){var e;return e=m.limit-m.cursor,m.find_among_b(l,5)==0?!1:(m.cursor=m.limit-e,m.ket=m.cursor,m.cursor<=m.limit_backward?!1:(m.cursor--,m.bra=m.cursor,m.slice_del(),!0))}function L(){var e,t=1;e:for(;;){t:do{if(!m.out_grouping_b(c,97,251))break t;t--;continue e}while(!1);break e}if(t>0)return!1;m.ket=m.cursor;n:do{e=m.limit-m.cursor;r:do{if(!m.eq_s_b(1,"\u00e9"))break r;break n}while(!1);m.cursor=m.limit-e;if(!m.eq_s_b(1,"\u00e8"))return!1}while(!1);return m.bra=m.cursor,m.slice_from("e"),!0}var e=[new t("col",-1,-1),new t("par",-1,-1),new t("tap",-1,-1)],r=[new t("",-1,4),new t("I",0,1),new t("U",0,2),new t("Y",0,3)],i=[new t("iqU",-1,3),new t("abl",-1,3),new t("I\u00e8r",-1,4),new t("i\u00e8r",-1,4),new t("eus",-1,2),new t("iv",-1,1)],s=[new t("ic",-1,2),new t("abil",-1,1),new t("iv",-1,3)],o=[new t("iqUe",-1,1),new t("atrice",-1,2),new t("ance",-1,1),new t("ence",-1,5),new t("logie",-1,3),new t("able",-1,1),new t("isme",-1,1),new t("euse",-1,11),new t("iste",-1,1),new t("ive",-1,8),new t("if",-1,8),new t("usion",-1,4),new t("ation",-1,2),new t("ution",-1,4),new t("ateur",-1,2),new t("iqUes",-1,1),new t("atrices",-1,2),new t("ances",-1,1),new t("ences",-1,5),new t("logies",-1,3),new t("ables",-1,1),new t("ismes",-1,1),new t("euses",-1,11),new t("istes",-1,1),new t("ives",-1,8),new t("ifs",-1,8),new t("usions",-1,4),new t("ations",-1,2),new t("utions",-1,4),new t("ateurs",-1,2),new t("ments",-1,15),new t("ements",30,6),new t("issements",31,12),new t("it\u00e9s",-1,7),new t("ment",-1,15),new t("ement",34,6),new t("issement",35,12),new t("amment",34,13),new t("emment",34,14),new t("aux",-1,10),new t("eaux",39,9),new t("eux",-1,1),new t("it\u00e9",-1,7)],u=[new t("ira",-1,1),new t("ie",-1,1),new t("isse",-1,1),new t("issante",-1,1),new t("i",-1,1),new t("irai",4,1),new t("ir",-1,1),new t("iras",-1,1),new t("ies",-1,1),new t("\u00eemes",-1,1),new t("isses",-1,1),new t("issantes",-1,1),new t("\u00eetes",-1,1),new t("is",-1,1),new t("irais",13,1),new t("issais",13,1),new t("irions",-1,1),new t("issions",-1,1),new t("irons",-1,1),new t("issons",-1,1),new t("issants",-1,1),new t("it",-1,1),new t("irait",21,1),new t("issait",21,1),new t("issant",-1,1),new t("iraIent",-1,1),new t("issaIent",-1,1),new t("irent",-1,1),new t("issent",-1,1),new t("iront",-1,1),new t("\u00eet",-1,1),new t("iriez",-1,1),new t("issiez",-1,1),new t("irez",-1,1),new t("issez",-1,1)],a=[new t("a",-1,3),new t("era",0,2),new t("asse",-1,3),new t("ante",-1,3),new t("\u00e9e",-1,2),new t("ai",-1,3),new t("erai",5,2),new t("er",-1,2),new t("as",-1,3),new t("eras",8,2),new t("\u00e2mes",-1,3),new t("asses",-1,3),new t("antes",-1,3),new t("\u00e2tes",-1,3),new t("\u00e9es",-1,2),new t("ais",-1,3),new t("erais",15,2),new t("ions",-1,1),new t("erions",17,2),new t("assions",17,3),new t("erons",-1,2),new t("ants",-1,3),new t("\u00e9s",-1,2),new t("ait",-1,3),new t("erait",23,2),new t("ant",-1,3),new t("aIent",-1,3),new t("eraIent",26,2),new t("\u00e8rent",-1,2),new t("assent",-1,3),new t("eront",-1,2),new t("\u00e2t",-1,3),new t("ez",-1,2),new t("iez",32,2),new t("eriez",33,2),new t("assiez",33,3),new t("erez",32,2),new t("\u00e9",-1,2)],f=[new t("e",-1,3),new t("I\u00e8re",0,2),new t("i\u00e8re",0,2),new t("ion",-1,1),new t("Ier",-1,2),new t("ier",-1,2),new t("\u00eb",-1,4)],l=[new t("ell",-1,-1),new t("eill",-1,-1),new t("enn",-1,-1),new t("onn",-1,-1),new t("ett",-1,-1)],c=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,128,130,103,8,5],h=[1,65,20,0,0,0,0,0,0,0,0,0,0,0,0,0,128],p,d,v,m=new n;this.stem=function(){var e,t,n,r,i,s,o,u,a,f,l;e=m.cursor;e:do if(!g())break e;while(!1);m.cursor=e,t=m.cursor;t:do if(!y())break t;while(!1);m.cursor=t,m.limit_backward=m.cursor,m.cursor=m.limit,n=m.limit-m.cursor;n:do r:do{r=m.limit-m.cursor;i:do{i=m.limit-m.cursor;s:do{s=m.limit-m.cursor;o:do{if(!x())break o;break s}while(!1);m.cursor=m.limit-s;u:do{if(!T())break u;break s}while(!1);m.cursor=m.limit-s;if(!N())break i}while(!1);m.cursor=m.limit-i,o=m.limit-m.cursor;a:do{m.ket=m.cursor;f:do{u=m.limit-m.cursor;l:do{if(!m.eq_s_b(1,"Y"))break l;m.bra=m.cursor,m.slice_from("i");break f}while(!1);m.cursor=m.limit-u;if(!m.eq_s_b(1,"\u00e7")){m.cursor=m.limit-o;break a}m.bra=m.cursor,m.slice_from("c")}while(!1)}while(!1);break r}while(!1);m.cursor=m.limit-r;if(!C())break n}while(!1);while(!1);m.cursor=m.limit-n,a=m.limit-m.cursor;c:do if(!k())break c;while(!1);m.cursor=m.limit-a,f=m.limit-m.cursor;h:do if(!L())break h;while(!1);m.cursor=m.limit-f,m.cursor=m.limit_backward,l=m.cursor;p:do if(!b())break p;while(!1);return m.cursor=l,!0},this.setCurrent=function(e){m.setCurrent(e)},this.getCurrent=function(){return m.getCurrent()}},germanStemmer:function(){function d(){var e,t,n,r,i,s;e=p.cursor;e:for(;;){t=p.cursor;t:do{n:do{n=p.cursor
;r:do{p.bra=p.cursor;if(!p.eq_s(1,"\u00df"))break r;p.ket=p.cursor,p.slice_from("ss");break n}while(!1);p.cursor=n;if(p.cursor>=p.limit)break t;p.cursor++}while(!1);continue e}while(!1);p.cursor=t;break e}p.cursor=e;i:for(;;){r=p.cursor;s:do{o:for(;;){i=p.cursor;u:do{if(!p.in_grouping(u,97,252))break u;p.bra=p.cursor;a:do{s=p.cursor;f:do{if(!p.eq_s(1,"u"))break f;p.ket=p.cursor;if(!p.in_grouping(u,97,252))break f;p.slice_from("U");break a}while(!1);p.cursor=s;if(!p.eq_s(1,"y"))break u;p.ket=p.cursor;if(!p.in_grouping(u,97,252))break u;p.slice_from("Y")}while(!1);p.cursor=i;break o}while(!1);p.cursor=i;if(p.cursor>=p.limit)break s;p.cursor++}continue i}while(!1);p.cursor=r;break i}return!0}function v(){var e;h=p.limit,c=p.limit,e=p.cursor;var t=p.cursor+3;if(0>t||t>p.limit)return!1;p.cursor=t,l=p.cursor,p.cursor=e;e:for(;;){t:do{if(!p.in_grouping(u,97,252))break t;break e}while(!1);if(p.cursor>=p.limit)return!1;p.cursor++}n:for(;;){r:do{if(!p.out_grouping(u,97,252))break r;break n}while(!1);if(p.cursor>=p.limit)return!1;p.cursor++}h=p.cursor;i:do{if(!(h<l))break i;h=l}while(!1);s:for(;;){o:do{if(!p.in_grouping(u,97,252))break o;break s}while(!1);if(p.cursor>=p.limit)return!1;p.cursor++}u:for(;;){a:do{if(!p.out_grouping(u,97,252))break a;break u}while(!1);if(p.cursor>=p.limit)return!1;p.cursor++}return c=p.cursor,!0}function m(){var t,n;e:for(;;){n=p.cursor;t:do{p.bra=p.cursor,t=p.find_among(e,6);if(t==0)break t;p.ket=p.cursor;switch(t){case 0:break t;case 1:p.slice_from("y");break;case 2:p.slice_from("u");break;case 3:p.slice_from("a");break;case 4:p.slice_from("o");break;case 5:p.slice_from("u");break;case 6:if(p.cursor>=p.limit)break t;p.cursor++}continue e}while(!1);p.cursor=n;break e}return!0}function g(){return h<=p.cursor?!0:!1}function y(){return c<=p.cursor?!0:!1}function b(){var e,t,n,u,l,c,h,d,v,m,b;t=p.limit-p.cursor;e:do{p.ket=p.cursor,e=p.find_among_b(r,7);if(e==0)break e;p.bra=p.cursor;if(!g())break e;switch(e){case 0:break e;case 1:p.slice_del();break;case 2:p.slice_del(),n=p.limit-p.cursor;t:do{p.ket=p.cursor;if(!p.eq_s_b(1,"s")){p.cursor=p.limit-n;break t}p.bra=p.cursor;if(!p.eq_s_b(3,"nis")){p.cursor=p.limit-n;break t}p.slice_del()}while(!1);break;case 3:if(!p.in_grouping_b(a,98,116))break e;p.slice_del()}}while(!1);p.cursor=p.limit-t,u=p.limit-p.cursor;n:do{p.ket=p.cursor,e=p.find_among_b(i,4);if(e==0)break n;p.bra=p.cursor;if(!g())break n;switch(e){case 0:break n;case 1:p.slice_del();break;case 2:if(!p.in_grouping_b(f,98,116))break n;var w=p.cursor-3;if(p.limit_backward>w||w>p.limit)break n;p.cursor=w,p.slice_del()}}while(!1);p.cursor=p.limit-u,l=p.limit-p.cursor;r:do{p.ket=p.cursor,e=p.find_among_b(o,8);if(e==0)break r;p.bra=p.cursor;if(!y())break r;switch(e){case 0:break r;case 1:p.slice_del(),c=p.limit-p.cursor;i:do{p.ket=p.cursor;if(!p.eq_s_b(2,"ig")){p.cursor=p.limit-c;break i}p.bra=p.cursor,h=p.limit-p.cursor;s:do{if(!p.eq_s_b(1,"e"))break s;p.cursor=p.limit-c;break i}while(!1);p.cursor=p.limit-h;if(!y()){p.cursor=p.limit-c;break i}p.slice_del()}while(!1);break;case 2:d=p.limit-p.cursor;o:do{if(!p.eq_s_b(1,"e"))break o;break r}while(!1);p.cursor=p.limit-d,p.slice_del();break;case 3:p.slice_del(),v=p.limit-p.cursor;u:do{p.ket=p.cursor;a:do{m=p.limit-p.cursor;f:do{if(!p.eq_s_b(2,"er"))break f;break a}while(!1);p.cursor=p.limit-m;if(!p.eq_s_b(2,"en")){p.cursor=p.limit-v;break u}}while(!1);p.bra=p.cursor;if(!g()){p.cursor=p.limit-v;break u}p.slice_del()}while(!1);break;case 4:p.slice_del(),b=p.limit-p.cursor;l:do{p.ket=p.cursor,e=p.find_among_b(s,2);if(e==0){p.cursor=p.limit-b;break l}p.bra=p.cursor;if(!y()){p.cursor=p.limit-b;break l}switch(e){case 0:p.cursor=p.limit-b;break l;case 1:p.slice_del()}}while(!1)}}while(!1);return p.cursor=p.limit-l,!0}var e=[new t("",-1,6),new t("U",0,2),new t("Y",0,1),new t("\u00e4",0,3),new t("\u00f6",0,4),new t("\u00fc",0,5)],r=[new t("e",-1,2),new t("em",-1,1),new t("en",-1,2),new t("ern",-1,1),new t("er",-1,1),new t("s",-1,3),new t("es",5,2)],i=[new t("en",-1,1),new t("er",-1,1),new t("st",-1,2),new t("est",2,1)],s=[new t("ig",-1,1),new t("lich",-1,1)],o=[new t("end",-1,1),new t("ig",-1,2),new t("ung",-1,1),new t("lich",-1,3),new t("isch",-1,2),new t("ik",-1,2),new t("heit",-1,3),new t("keit",-1,4)],u=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,0,8,0,32,8],a=[117,30,5],f=[117,30,4],l,c,h,p=new n;this.stem=function(){var e,t,n,r;e=p.cursor;e:do if(!d())break e;while(!1);p.cursor=e,t=p.cursor;t:do if(!v())break t;while(!1);p.cursor=t,p.limit_backward=p.cursor,p.cursor=p.limit,n=p.limit-p.cursor;n:do if(!b())break n;while(!1);p.cursor=p.limit-n,p.cursor=p.limit_backward,r=p.cursor;r:do if(!m())break r;while(!1);return p.cursor=r,!0},this.setCurrent=function(e){p.setCurrent(e)},this.getCurrent=function(){return p.getCurrent()}},hungarianStemmer:function(){function g(){var t,n,r;v=m.limit;e:do{t=m.cursor;t:do{if(!m.in_grouping(d,97,252))break t;n:for(;;){n=m.cursor;r:do{if(!m.out_grouping(d,97,252))break r;m.cursor=n;break n}while(!1);m.cursor=n;if(m.cursor>=m.limit)break t;m.cursor++}i:do{r=m.cursor;s:do{if(m.find_among(e,8)==0)break s;break i}while(!1);m.cursor=r;if(m.cursor>=m.limit)break t;m.cursor++}while(!1);v=m.cursor;break e}while(!1);m.cursor=t;if(!m.out_grouping(d,97,252))return!1;o:for(;;){u:do{if(!m.in_grouping(d,97,252))break u;break o}while(!1);if(m.cursor>=m.limit)return!1;m.cursor++}v=m.cursor}while(!1);return!0}function y(){return v<=m.cursor?!0:!1}function b(){var e;m.ket=m.cursor,e=m.find_among_b(r,2);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:m.slice_from("a");break;case 2:m.slice_from("e")}return!0}function w(){var e;return e=m.limit-m.cursor,m.find_among_b(i,23)==0?!1:(m.cursor=m.limit-e,!0)}function E(){if(m.cursor<=m.limit_backward)return!1;m.cursor--,m.ket=m.cursor;var e=m.cursor-1;return m.limit_backward>e||e>m.limit?!1:(m.cursor=e,m.bra=m.cursor,m.slice_del(),!0)}function S(){var e;m.ket=m.cursor,e=m.find_among_b(s,2);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0
:return!1;case 1:if(!w())return!1;break;case 2:if(!w())return!1}return m.slice_del(),E()?!0:!1}function x(){return m.ket=m.cursor,m.find_among_b(o,44)==0?!1:(m.bra=m.cursor,y()?(m.slice_del(),b()?!0:!1):!1)}function T(){var e;m.ket=m.cursor,e=m.find_among_b(u,3);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:m.slice_from("e");break;case 2:m.slice_from("a");break;case 3:m.slice_from("a")}return!0}function N(){var e;m.ket=m.cursor,e=m.find_among_b(a,6);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:m.slice_del();break;case 2:m.slice_del();break;case 3:m.slice_from("a");break;case 4:m.slice_from("e")}return!0}function C(){var e;m.ket=m.cursor,e=m.find_among_b(f,2);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:if(!w())return!1;break;case 2:if(!w())return!1}return m.slice_del(),E()?!0:!1}function k(){var e;m.ket=m.cursor,e=m.find_among_b(l,7);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:m.slice_from("a");break;case 2:m.slice_from("e");break;case 3:m.slice_del();break;case 4:m.slice_del();break;case 5:m.slice_del();break;case 6:m.slice_del();break;case 7:m.slice_del()}return!0}function L(){var e;m.ket=m.cursor,e=m.find_among_b(c,12);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:m.slice_del();break;case 2:m.slice_from("e");break;case 3:m.slice_from("a");break;case 4:m.slice_del();break;case 5:m.slice_from("e");break;case 6:m.slice_from("a");break;case 7:m.slice_del();break;case 8:m.slice_from("e");break;case 9:m.slice_del()}return!0}function A(){var e;m.ket=m.cursor,e=m.find_among_b(h,31);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:m.slice_del();break;case 2:m.slice_from("a");break;case 3:m.slice_from("e");break;case 4:m.slice_del();break;case 5:m.slice_from("a");break;case 6:m.slice_from("e");break;case 7:m.slice_del();break;case 8:m.slice_del();break;case 9:m.slice_del();break;case 10:m.slice_from("a");break;case 11:m.slice_from("e");break;case 12:m.slice_del();break;case 13:m.slice_del();break;case 14:m.slice_from("a");break;case 15:m.slice_from("e");break;case 16:m.slice_del();break;case 17:m.slice_del();break;case 18:m.slice_del();break;case 19:m.slice_from("a");break;case 20:m.slice_from("e")}return!0}function O(){var e;m.ket=m.cursor,e=m.find_among_b(p,42);if(e==0)return!1;m.bra=m.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:m.slice_del();break;case 2:m.slice_from("a");break;case 3:m.slice_from("e");break;case 4:m.slice_del();break;case 5:m.slice_del();break;case 6:m.slice_del();break;case 7:m.slice_from("a");break;case 8:m.slice_from("e");break;case 9:m.slice_del();break;case 10:m.slice_del();break;case 11:m.slice_del();break;case 12:m.slice_from("a");break;case 13:m.slice_from("e");break;case 14:m.slice_del();break;case 15:m.slice_del();break;case 16:m.slice_del();break;case 17:m.slice_del();break;case 18:m.slice_from("a");break;case 19:m.slice_from("e");break;case 20:m.slice_del();break;case 21:m.slice_del();break;case 22:m.slice_from("a");break;case 23:m.slice_from("e");break;case 24:m.slice_del();break;case 25:m.slice_del();break;case 26:m.slice_del();break;case 27:m.slice_from("a");break;case 28:m.slice_from("e");break;case 29:m.slice_del()}return!0}var e=[new t("cs",-1,-1),new t("dzs",-1,-1),new t("gy",-1,-1),new t("ly",-1,-1),new t("ny",-1,-1),new t("sz",-1,-1),new t("ty",-1,-1),new t("zs",-1,-1)],r=[new t("\u00e1",-1,1),new t("\u00e9",-1,2)],i=[new t("bb",-1,-1),new t("cc",-1,-1),new t("dd",-1,-1),new t("ff",-1,-1),new t("gg",-1,-1),new t("jj",-1,-1),new t("kk",-1,-1),new t("ll",-1,-1),new t("mm",-1,-1),new t("nn",-1,-1),new t("pp",-1,-1),new t("rr",-1,-1),new t("ccs",-1,-1),new t("ss",-1,-1),new t("zzs",-1,-1),new t("tt",-1,-1),new t("vv",-1,-1),new t("ggy",-1,-1),new t("lly",-1,-1),new t("nny",-1,-1),new t("tty",-1,-1),new t("ssz",-1,-1),new t("zz",-1,-1)],s=[new t("al",-1,1),new t("el",-1,2)],o=[new t("ba",-1,-1),new t("ra",-1,-1),new t("be",-1,-1),new t("re",-1,-1),new t("ig",-1,-1),new t("nak",-1,-1),new t("nek",-1,-1),new t("val",-1,-1),new t("vel",-1,-1),new t("ul",-1,-1),new t("n\u00e1l",-1,-1),new t("n\u00e9l",-1,-1),new t("b\u00f3l",-1,-1),new t("r\u00f3l",-1,-1),new t("t\u00f3l",-1,-1),new t("b\u00f5l",-1,-1),new t("r\u00f5l",-1,-1),new t("t\u00f5l",-1,-1),new t("\u00fcl",-1,-1),new t("n",-1,-1),new t("an",19,-1),new t("ban",20,-1),new t("en",19,-1),new t("ben",22,-1),new t("k\u00e9ppen",22,-1),new t("on",19,-1),new t("\u00f6n",19,-1),new t("k\u00e9pp",-1,-1),new t("kor",-1,-1),new t("t",-1,-1),new t("at",29,-1),new t("et",29,-1),new t("k\u00e9nt",29,-1),new t("ank\u00e9nt",32,-1),new t("enk\u00e9nt",32,-1),new t("onk\u00e9nt",32,-1),new t("ot",29,-1),new t("\u00e9rt",29,-1),new t("\u00f6t",29,-1),new t("hez",-1,-1),new t("hoz",-1,-1),new t("h\u00f6z",-1,-1),new t("v\u00e1",-1,-1),new t("v\u00e9",-1,-1)],u=[new t("\u00e1n",-1,2),new t("\u00e9n",-1,1),new t("\u00e1nk\u00e9nt",-1,3)],a=[new t("stul",-1,2),new t("astul",0,1),new t("\u00e1stul",0,3),new t("st\u00fcl",-1,2),new t("est\u00fcl",3,1),new t("\u00e9st\u00fcl",3,4)],f=[new t("\u00e1",-1,1),new t("\u00e9",-1,2)],l=[new t("k",-1,7),new t("ak",0,4),new t("ek",0,6),new t("ok",0,5),new t("\u00e1k",0,1),new t("\u00e9k",0,2),new t("\u00f6k",0,3)],c=[new t("\u00e9i",-1,7),new t("\u00e1\u00e9i",0,6),new t("\u00e9\u00e9i",0,5),new t("\u00e9",-1,9),new t("k\u00e9",3,4),new t("ak\u00e9",4,1),new t("ek\u00e9",4,1),new t("ok\u00e9",4,1),new t("\u00e1k\u00e9",4,3),new t("\u00e9k\u00e9",4,2),new t("\u00f6k\u00e9",4,1),new t("\u00e9\u00e9",3,8)],h=[new t("a",-1,18),new t("ja",0,17),new t("d",-1,16),new t("ad",2,13),new t("ed",2,13),new t("od",2,13),new t("\u00e1d",2,14),new t("\u00e9d",2,15),new t("\u00f6d",2,13),new t("e",-1,18),new t("je",9,17),new t("nk",-1,4),new t("unk",11,1),new t("\u00e1nk",11,2),new t("\u00e9nk",11,3),new t("\u00fcnk",11,1),new t("uk",-1,8),new t("juk",16,7),new t("\u00e1juk",17,5
),new t("\u00fck",-1,8),new t("j\u00fck",19,7),new t("\u00e9j\u00fck",20,6),new t("m",-1,12),new t("am",22,9),new t("em",22,9),new t("om",22,9),new t("\u00e1m",22,10),new t("\u00e9m",22,11),new t("o",-1,18),new t("\u00e1",-1,19),new t("\u00e9",-1,20)],p=[new t("id",-1,10),new t("aid",0,9),new t("jaid",1,6),new t("eid",0,9),new t("jeid",3,6),new t("\u00e1id",0,7),new t("\u00e9id",0,8),new t("i",-1,15),new t("ai",7,14),new t("jai",8,11),new t("ei",7,14),new t("jei",10,11),new t("\u00e1i",7,12),new t("\u00e9i",7,13),new t("itek",-1,24),new t("eitek",14,21),new t("jeitek",15,20),new t("\u00e9itek",14,23),new t("ik",-1,29),new t("aik",18,26),new t("jaik",19,25),new t("eik",18,26),new t("jeik",21,25),new t("\u00e1ik",18,27),new t("\u00e9ik",18,28),new t("ink",-1,20),new t("aink",25,17),new t("jaink",26,16),new t("eink",25,17),new t("jeink",28,16),new t("\u00e1ink",25,18),new t("\u00e9ink",25,19),new t("aitok",-1,21),new t("jaitok",32,20),new t("\u00e1itok",-1,22),new t("im",-1,5),new t("aim",35,4),new t("jaim",36,1),new t("eim",35,4),new t("jeim",38,1),new t("\u00e1im",35,2),new t("\u00e9im",35,3)],d=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,0,1,17,52,14],v,m=new n;this.stem=function(){var e,t,n,r,i,s,o,u,a,f;e=m.cursor;e:do if(!g())break e;while(!1);m.cursor=e,m.limit_backward=m.cursor,m.cursor=m.limit,t=m.limit-m.cursor;t:do if(!S())break t;while(!1);m.cursor=m.limit-t,n=m.limit-m.cursor;n:do if(!x())break n;while(!1);m.cursor=m.limit-n,r=m.limit-m.cursor;r:do if(!T())break r;while(!1);m.cursor=m.limit-r,i=m.limit-m.cursor;i:do if(!N())break i;while(!1);m.cursor=m.limit-i,s=m.limit-m.cursor;s:do if(!C())break s;while(!1);m.cursor=m.limit-s,o=m.limit-m.cursor;o:do if(!L())break o;while(!1);m.cursor=m.limit-o,u=m.limit-m.cursor;u:do if(!A())break u;while(!1);m.cursor=m.limit-u,a=m.limit-m.cursor;a:do if(!O())break a;while(!1);m.cursor=m.limit-a,f=m.limit-m.cursor;f:do if(!k())break f;while(!1);return m.cursor=m.limit-f,m.cursor=m.limit_backward,!0},this.setCurrent=function(e){m.setCurrent(e)},this.getCurrent=function(){return m.getCurrent()}},italianStemmer:function(){function g(){var t,n,r,i,s,o;n=m.cursor;e:for(;;){r=m.cursor;t:do{m.bra=m.cursor,t=m.find_among(e,7);if(t==0)break t;m.ket=m.cursor;switch(t){case 0:break t;case 1:m.slice_from("\u00e0");break;case 2:m.slice_from("\u00e8");break;case 3:m.slice_from("\u00ec");break;case 4:m.slice_from("\u00f2");break;case 5:m.slice_from("\u00f9");break;case 6:m.slice_from("qU");break;case 7:if(m.cursor>=m.limit)break t;m.cursor++}continue e}while(!1);m.cursor=r;break e}m.cursor=n;n:for(;;){i=m.cursor;r:do{i:for(;;){s=m.cursor;s:do{if(!m.in_grouping(l,97,249))break s;m.bra=m.cursor;o:do{o=m.cursor;u:do{if(!m.eq_s(1,"u"))break u;m.ket=m.cursor;if(!m.in_grouping(l,97,249))break u;m.slice_from("U");break o}while(!1);m.cursor=o;if(!m.eq_s(1,"i"))break s;m.ket=m.cursor;if(!m.in_grouping(l,97,249))break s;m.slice_from("I")}while(!1);m.cursor=s;break i}while(!1);m.cursor=s;if(m.cursor>=m.limit)break r;m.cursor++}continue n}while(!1);m.cursor=i;break n}return!0}function y(){var e,t,n,r,i;v=m.limit,d=m.limit,p=m.limit,e=m.cursor;e:do{t:do{t=m.cursor;n:do{if(!m.in_grouping(l,97,249))break n;r:do{n=m.cursor;i:do{if(!m.out_grouping(l,97,249))break i;s:for(;;){o:do{if(!m.in_grouping(l,97,249))break o;break s}while(!1);if(m.cursor>=m.limit)break i;m.cursor++}break r}while(!1);m.cursor=n;if(!m.in_grouping(l,97,249))break n;u:for(;;){a:do{if(!m.out_grouping(l,97,249))break a;break u}while(!1);if(m.cursor>=m.limit)break n;m.cursor++}}while(!1);break t}while(!1);m.cursor=t;if(!m.out_grouping(l,97,249))break e;f:do{r=m.cursor;l:do{if(!m.out_grouping(l,97,249))break l;c:for(;;){h:do{if(!m.in_grouping(l,97,249))break h;break c}while(!1);if(m.cursor>=m.limit)break l;m.cursor++}break f}while(!1);m.cursor=r;if(!m.in_grouping(l,97,249))break e;if(m.cursor>=m.limit)break e;m.cursor++}while(!1)}while(!1);v=m.cursor}while(!1);m.cursor=e,i=m.cursor;p:do{d:for(;;){v:do{if(!m.in_grouping(l,97,249))break v;break d}while(!1);if(m.cursor>=m.limit)break p;m.cursor++}m:for(;;){g:do{if(!m.out_grouping(l,97,249))break g;break m}while(!1);if(m.cursor>=m.limit)break p;m.cursor++}d=m.cursor;y:for(;;){b:do{if(!m.in_grouping(l,97,249))break b;break y}while(!1);if(m.cursor>=m.limit)break p;m.cursor++}w:for(;;){E:do{if(!m.out_grouping(l,97,249))break E;break w}while(!1);if(m.cursor>=m.limit)break p;m.cursor++}p=m.cursor}while(!1);return m.cursor=i,!0}function b(){var e,t;e:for(;;){t=m.cursor;t:do{m.bra=m.cursor,e=m.find_among(r,3);if(e==0)break t;m.ket=m.cursor;switch(e){case 0:break t;case 1:m.slice_from("i");break;case 2:m.slice_from("u");break;case 3:if(m.cursor>=m.limit)break t;m.cursor++}continue e}while(!1);m.cursor=t;break e}return!0}function w(){return v<=m.cursor?!0:!1}function E(){return d<=m.cursor?!0:!1}function S(){return p<=m.cursor?!0:!1}function x(){var e;m.ket=m.cursor;if(m.find_among_b(i,37)==0)return!1;m.bra=m.cursor,e=m.find_among_b(s,5);if(e==0)return!1;if(!w())return!1;switch(e){case 0:return!1;case 1:m.slice_del();break;case 2:m.slice_from("e")}return!0}function T(){var e,t,n,r,i;m.ket=m.cursor,e=m.find_among_b(a,51);if(e==0)return!1;m.bra=m.cursor;switch(e){case 0:return!1;case 1:if(!S())return!1;m.slice_del();break;case 2:if(!S())return!1;m.slice_del(),t=m.limit-m.cursor;e:do{m.ket=m.cursor;if(!m.eq_s_b(2,"ic")){m.cursor=m.limit-t;break e}m.bra=m.cursor;if(!S()){m.cursor=m.limit-t;break e}m.slice_del()}while(!1);break;case 3:if(!S())return!1;m.slice_from("log");break;case 4:if(!S())return!1;m.slice_from("u");break;case 5:if(!S())return!1;m.slice_from("ente");break;case 6:if(!w())return!1;m.slice_del();break;case 7:if(!E())return!1;m.slice_del(),n=m.limit-m.cursor;t:do{m.ket=m.cursor,e=m.find_among_b(o,4);if(e==0){m.cursor=m.limit-n;break t}m.bra=m.cursor;if(!S()){m.cursor=m.limit-n;break t}m.slice_del();switch(e){case 0:m.cursor=m.limit-n;break t;case 1:m.ket=m.cursor;if(!m.eq_s_b(2,"at")){m.cursor=m.limit-n;break t}m.bra=m.cursor;if(!S()){m.cursor=m.limit-n;break t}m.slice_del
()}}while(!1);break;case 8:if(!S())return!1;m.slice_del(),r=m.limit-m.cursor;n:do{m.ket=m.cursor,e=m.find_among_b(u,3);if(e==0){m.cursor=m.limit-r;break n}m.bra=m.cursor;switch(e){case 0:m.cursor=m.limit-r;break n;case 1:if(!S()){m.cursor=m.limit-r;break n}m.slice_del()}}while(!1);break;case 9:if(!S())return!1;m.slice_del(),i=m.limit-m.cursor;r:do{m.ket=m.cursor;if(!m.eq_s_b(2,"at")){m.cursor=m.limit-i;break r}m.bra=m.cursor;if(!S()){m.cursor=m.limit-i;break r}m.slice_del(),m.ket=m.cursor;if(!m.eq_s_b(2,"ic")){m.cursor=m.limit-i;break r}m.bra=m.cursor;if(!S()){m.cursor=m.limit-i;break r}m.slice_del()}while(!1)}return!0}function N(){var e,t,n;t=m.limit-m.cursor;if(m.cursor<v)return!1;m.cursor=v,n=m.limit_backward,m.limit_backward=m.cursor,m.cursor=m.limit-t,m.ket=m.cursor,e=m.find_among_b(f,87);if(e==0)return m.limit_backward=n,!1;m.bra=m.cursor;switch(e){case 0:return m.limit_backward=n,!1;case 1:m.slice_del()}return m.limit_backward=n,!0}function C(){var e,t;e=m.limit-m.cursor;e:do{m.ket=m.cursor;if(!m.in_grouping_b(c,97,242)){m.cursor=m.limit-e;break e}m.bra=m.cursor;if(!w()){m.cursor=m.limit-e;break e}m.slice_del(),m.ket=m.cursor;if(!m.eq_s_b(1,"i")){m.cursor=m.limit-e;break e}m.bra=m.cursor;if(!w()){m.cursor=m.limit-e;break e}m.slice_del()}while(!1);t=m.limit-m.cursor;t:do{m.ket=m.cursor;if(!m.eq_s_b(1,"h")){m.cursor=m.limit-t;break t}m.bra=m.cursor;if(!m.in_grouping_b(h,99,103)){m.cursor=m.limit-t;break t}if(!w()){m.cursor=m.limit-t;break t}m.slice_del()}while(!1);return!0}var e=[new t("",-1,7),new t("qu",0,6),new t("\u00e1",0,1),new t("\u00e9",0,2),new t("\u00ed",0,3),new t("\u00f3",0,4),new t("\u00fa",0,5)],r=[new t("",-1,3),new t("I",0,1),new t("U",0,2)],i=[new t("la",-1,-1),new t("cela",0,-1),new t("gliela",0,-1),new t("mela",0,-1),new t("tela",0,-1),new t("vela",0,-1),new t("le",-1,-1),new t("cele",6,-1),new t("gliele",6,-1),new t("mele",6,-1),new t("tele",6,-1),new t("vele",6,-1),new t("ne",-1,-1),new t("cene",12,-1),new t("gliene",12,-1),new t("mene",12,-1),new t("sene",12,-1),new t("tene",12,-1),new t("vene",12,-1),new t("ci",-1,-1),new t("li",-1,-1),new t("celi",20,-1),new t("glieli",20,-1),new t("meli",20,-1),new t("teli",20,-1),new t("veli",20,-1),new t("gli",20,-1),new t("mi",-1,-1),new t("si",-1,-1),new t("ti",-1,-1),new t("vi",-1,-1),new t("lo",-1,-1),new t("celo",31,-1),new t("glielo",31,-1),new t("melo",31,-1),new t("telo",31,-1),new t("velo",31,-1)],s=[new t("ando",-1,1),new t("endo",-1,1),new t("ar",-1,2),new t("er",-1,2),new t("ir",-1,2)],o=[new t("ic",-1,-1),new t("abil",-1,-1),new t("os",-1,-1),new t("iv",-1,1)],u=[new t("ic",-1,1),new t("abil",-1,1),new t("iv",-1,1)],a=[new t("ica",-1,1),new t("logia",-1,3),new t("osa",-1,1),new t("ista",-1,1),new t("iva",-1,9),new t("anza",-1,1),new t("enza",-1,5),new t("ice",-1,1),new t("atrice",7,1),new t("iche",-1,1),new t("logie",-1,3),new t("abile",-1,1),new t("ibile",-1,1),new t("usione",-1,4),new t("azione",-1,2),new t("uzione",-1,4),new t("atore",-1,2),new t("ose",-1,1),new t("ante",-1,1),new t("mente",-1,1),new t("amente",19,7),new t("iste",-1,1),new t("ive",-1,9),new t("anze",-1,1),new t("enze",-1,5),new t("ici",-1,1),new t("atrici",25,1),new t("ichi",-1,1),new t("abili",-1,1),new t("ibili",-1,1),new t("ismi",-1,1),new t("usioni",-1,4),new t("azioni",-1,2),new t("uzioni",-1,4),new t("atori",-1,2),new t("osi",-1,1),new t("anti",-1,1),new t("amenti",-1,6),new t("imenti",-1,6),new t("isti",-1,1),new t("ivi",-1,9),new t("ico",-1,1),new t("ismo",-1,1),new t("oso",-1,1),new t("amento",-1,6),new t("imento",-1,6),new t("ivo",-1,9),new t("it\u00e0",-1,8),new t("ist\u00e0",-1,1),new t("ist\u00e8",-1,1),new t("ist\u00ec",-1,1)],f=[new t("isca",-1,1),new t("enda",-1,1),new t("ata",-1,1),new t("ita",-1,1),new t("uta",-1,1),new t("ava",-1,1),new t("eva",-1,1),new t("iva",-1,1),new t("erebbe",-1,1),new t("irebbe",-1,1),new t("isce",-1,1),new t("ende",-1,1),new t("are",-1,1),new t("ere",-1,1),new t("ire",-1,1),new t("asse",-1,1),new t("ate",-1,1),new t("avate",16,1),new t("evate",16,1),new t("ivate",16,1),new t("ete",-1,1),new t("erete",20,1),new t("irete",20,1),new t("ite",-1,1),new t("ereste",-1,1),new t("ireste",-1,1),new t("ute",-1,1),new t("erai",-1,1),new t("irai",-1,1),new t("isci",-1,1),new t("endi",-1,1),new t("erei",-1,1),new t("irei",-1,1),new t("assi",-1,1),new t("ati",-1,1),new t("iti",-1,1),new t("eresti",-1,1),new t("iresti",-1,1),new t("uti",-1,1),new t("avi",-1,1),new t("evi",-1,1),new t("ivi",-1,1),new t("isco",-1,1),new t("ando",-1,1),new t("endo",-1,1),new t("Yamo",-1,1),new t("iamo",-1,1),new t("avamo",-1,1),new t("evamo",-1,1),new t("ivamo",-1,1),new t("eremo",-1,1),new t("iremo",-1,1),new t("assimo",-1,1),new t("ammo",-1,1),new t("emmo",-1,1),new t("eremmo",54,1),new t("iremmo",54,1),new t("immo",-1,1),new t("ano",-1,1),new t("iscano",58,1),new t("avano",58,1),new t("evano",58,1),new t("ivano",58,1),new t("eranno",-1,1),new t("iranno",-1,1),new t("ono",-1,1),new t("iscono",65,1),new t("arono",65,1),new t("erono",65,1),new t("irono",65,1),new t("erebbero",-1,1),new t("irebbero",-1,1),new t("assero",-1,1),new t("essero",-1,1),new t("issero",-1,1),new t("ato",-1,1),new t("ito",-1,1),new t("uto",-1,1),new t("avo",-1,1),new t("evo",-1,1),new t("ivo",-1,1),new t("ar",-1,1),new t("ir",-1,1),new t("er\u00e0",-1,1),new t("ir\u00e0",-1,1),new t("er\u00f2",-1,1),new t("ir\u00f2",-1,1)],l=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,128,128,8,2,1],c=[17,65,0,0,0,0,0,0,0,0,0,0,0,0,0,128,128,8,2],h=[17],p,d,v,m=new n;this.stem=function(){var e,t,n,r,i,s,o;e=m.cursor;e:do if(!g())break e;while(!1);m.cursor=e,t=m.cursor;t:do if(!y())break t;while(!1);m.cursor=t,m.limit_backward=m.cursor,m.cursor=m.limit,n=m.limit-m.cursor;n:do if(!x())break n;while(!1);m.cursor=m.limit-n,r=m.limit-m.cursor;r:do i:do{i=m.limit-m.cursor;s:do{if(!T())break s;break i}while(!1);m.cursor=m.limit-i;if(!N())break r}while(!1);while(!1);m.cursor=m.limit-r,s=m.limit-m.cursor;o:do if(!C())break o;while(!1);m.cursor=m.limit-s,m.cursor=m.limit_backward,o=m.cursor;u:do if(!
b())break u;while(!1);return m.cursor=o,!0},this.setCurrent=function(e){m.setCurrent(e)},this.getCurrent=function(){return m.getCurrent()}},irishStemmer:function(){function c(){var e,t;f=l.limit,a=l.limit,u=l.limit,e=l.cursor;e:do{t:for(;;){n:do{if(!l.in_grouping(o,97,250))break n;break t}while(!1);if(l.cursor>=l.limit)break e;l.cursor++}f=l.cursor}while(!1);l.cursor=e,t=l.cursor;r:do{i:for(;;){s:do{if(!l.in_grouping(o,97,250))break s;break i}while(!1);if(l.cursor>=l.limit)break r;l.cursor++}o:for(;;){u:do{if(!l.out_grouping(o,97,250))break u;break o}while(!1);if(l.cursor>=l.limit)break r;l.cursor++}a=l.cursor;a:for(;;){f:do{if(!l.in_grouping(o,97,250))break f;break a}while(!1);if(l.cursor>=l.limit)break r;l.cursor++}l:for(;;){c:do{if(!l.out_grouping(o,97,250))break c;break l}while(!1);if(l.cursor>=l.limit)break r;l.cursor++}u=l.cursor}while(!1);return l.cursor=t,!0}function h(){var t;l.bra=l.cursor,t=l.find_among(e,24);if(t==0)return!1;l.ket=l.cursor;switch(t){case 0:return!1;case 1:l.slice_del();break;case 2:l.slice_del();break;case 3:l.slice_from("f");break;case 4:l.slice_del();break;case 5:l.slice_from("s");break;case 6:l.slice_from("b");break;case 7:l.slice_from("c");break;case 8:l.slice_from("d");break;case 9:l.slice_from("f");break;case 10:l.slice_from("g");break;case 11:l.slice_from("p");break;case 12:l.slice_from("s");break;case 13:l.slice_from("t");break;case 14:l.slice_from("b");break;case 15:l.slice_from("c");break;case 16:l.slice_from("d");break;case 17:l.slice_from("f");break;case 18:l.slice_from("g");break;case 19:l.slice_from("m");break;case 20:l.slice_from("p");break;case 21:l.slice_from("t")}return!0}function p(){return f<=l.cursor?!0:!1}function d(){return a<=l.cursor?!0:!1}function v(){return u<=l.cursor?!0:!1}function m(){var e;l.ket=l.cursor,e=l.find_among_b(r,16);if(e==0)return!1;l.bra=l.cursor;switch(e){case 0:return!1;case 1:if(!d())return!1;l.slice_del();break;case 2:if(!v())return!1;l.slice_del()}return!0}function g(){var e;l.ket=l.cursor,e=l.find_among_b(i,25);if(e==0)return!1;l.bra=l.cursor;switch(e){case 0:return!1;case 1:if(!v())return!1;l.slice_del();break;case 2:l.slice_from("arc");break;case 3:l.slice_from("gin");break;case 4:l.slice_from("graf");break;case 5:l.slice_from("paite");break;case 6:l.slice_from("\u00f3id")}return!0}function y(){var e;l.ket=l.cursor,e=l.find_among_b(s,12);if(e==0)return!1;l.bra=l.cursor;switch(e){case 0:return!1;case 1:if(!p())return!1;l.slice_del();break;case 2:if(!d())return!1;l.slice_del()}return!0}var e=[new t("b'",-1,4),new t("bh",-1,14),new t("bhf",1,9),new t("bp",-1,11),new t("ch",-1,15),new t("d'",-1,2),new t("d'fh",5,3),new t("dh",-1,16),new t("dt",-1,13),new t("fh",-1,17),new t("gc",-1,7),new t("gh",-1,18),new t("h-",-1,1),new t("m'",-1,4),new t("mb",-1,6),new t("mh",-1,19),new t("n-",-1,1),new t("nd",-1,8),new t("ng",-1,10),new t("ph",-1,20),new t("sh",-1,5),new t("t-",-1,1),new t("th",-1,21),new t("ts",-1,12)],r=[new t("\u00edochta",-1,1),new t("a\u00edochta",0,1),new t("ire",-1,2),new t("aire",2,2),new t("abh",-1,1),new t("eabh",4,1),new t("ibh",-1,1),new t("aibh",6,1),new t("amh",-1,1),new t("eamh",8,1),new t("imh",-1,1),new t("aimh",10,1),new t("\u00edocht",-1,1),new t("a\u00edocht",12,1),new t("ir\u00ed",-1,2),new t("air\u00ed",14,2)],i=[new t("\u00f3ideacha",-1,6),new t("patacha",-1,5),new t("achta",-1,1),new t("arcachta",2,2),new t("eachta",2,1),new t("grafa\u00edochta",-1,4),new t("paite",-1,5),new t("ach",-1,1),new t("each",7,1),new t("\u00f3ideach",8,6),new t("gineach",8,3),new t("patach",7,5),new t("grafa\u00edoch",-1,4),new t("pataigh",-1,5),new t("\u00f3idigh",-1,6),new t("acht\u00fail",-1,1),new t("eacht\u00fail",15,1),new t("gineas",-1,3),new t("ginis",-1,3),new t("acht",-1,1),new t("arcacht",19,2),new t("eacht",19,1),new t("grafa\u00edocht",-1,4),new t("arcachta\u00ed",-1,2),new t("grafa\u00edochta\u00ed",-1,4)],s=[new t("imid",-1,1),new t("aimid",0,1),new t("\u00edmid",-1,1),new t("a\u00edmid",2,1),new t("adh",-1,2),new t("eadh",4,2),new t("faidh",-1,1),new t("fidh",-1,1),new t("\u00e1il",-1,2),new t("ain",-1,2),new t("tear",-1,2),new t("tar",-1,2)],o=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,0,1,17,4,2],u,a,f,l=new n;this.stem=function(){var e,t,n,r,i;e=l.cursor;e:do if(!h())break e;while(!1);l.cursor=e,t=l.cursor;t:do if(!c())break t;while(!1);l.cursor=t,l.limit_backward=l.cursor,l.cursor=l.limit,n=l.limit-l.cursor;n:do if(!m())break n;while(!1);l.cursor=l.limit-n,r=l.limit-l.cursor;r:do if(!g())break r;while(!1);l.cursor=l.limit-r,i=l.limit-l.cursor;i:do if(!y())break i;while(!1);return l.cursor=l.limit-i,l.cursor=l.limit_backward,!0},this.setCurrent=function(e){l.setCurrent(e)},this.getCurrent=function(){return l.getCurrent()}},norwegianStemmer:function(){function l(){var e,t;a=f.limit,e=f.cursor;var n=f.cursor+3;if(0>n||n>f.limit)return!1;f.cursor=n,u=f.cursor,f.cursor=e;e:for(;;){t=f.cursor;t:do{if(!f.in_grouping(s,97,248))break t;f.cursor=t;break e}while(!1);f.cursor=t;if(f.cursor>=f.limit)return!1;f.cursor++}n:for(;;){r:do{if(!f.out_grouping(s,97,248))break r;break n}while(!1);if(f.cursor>=f.limit)return!1;f.cursor++}a=f.cursor;i:do{if(!(a<u))break i;a=u}while(!1);return!0}function c(){var t,n,r,i;n=f.limit-f.cursor;if(f.cursor<a)return!1;f.cursor=a,r=f.limit_backward,f.limit_backward=f.cursor,f.cursor=f.limit-n,f.ket=f.cursor,t=f.find_among_b(e,29);if(t==0)return f.limit_backward=r,!1;f.bra=f.cursor,f.limit_backward=r;switch(t){case 0:return!1;case 1:f.slice_del();break;case 2:e:do{i=f.limit-f.cursor;t:do{if(!f.in_grouping_b(o,98,122))break t;break e}while(!1);f.cursor=f.limit-i;if(!f.eq_s_b(1,"k"))return!1;if(!f.out_grouping_b(s,97,248))return!1}while(!1);f.slice_del();break;case 3:f.slice_from("er")}return!0}function h(){var e,t,n;return e=f.limit-f.cursor,t=f.limit-f.cursor,f.cursor<a?!1:(f.cursor=a,n=f.limit_backward,f.limit_backward=f.cursor,f.cursor=f.limit-t,f.ket=f.cursor,f.find_among_b(r,2)==0?(f.limit_backward=n,!1):(f.bra=f.cursor,f.limit_backward=n,f.cursor=f.limit-e,f.cursor<=f.limit_backward?!1
:(f.cursor--,f.bra=f.cursor,f.slice_del(),!0)))}function p(){var e,t,n;t=f.limit-f.cursor;if(f.cursor<a)return!1;f.cursor=a,n=f.limit_backward,f.limit_backward=f.cursor,f.cursor=f.limit-t,f.ket=f.cursor,e=f.find_among_b(i,11);if(e==0)return f.limit_backward=n,!1;f.bra=f.cursor,f.limit_backward=n;switch(e){case 0:return!1;case 1:f.slice_del()}return!0}var e=[new t("a",-1,1),new t("e",-1,1),new t("ede",1,1),new t("ande",1,1),new t("ende",1,1),new t("ane",1,1),new t("ene",1,1),new t("hetene",6,1),new t("erte",1,3),new t("en",-1,1),new t("heten",9,1),new t("ar",-1,1),new t("er",-1,1),new t("heter",12,1),new t("s",-1,2),new t("as",14,1),new t("es",14,1),new t("edes",16,1),new t("endes",16,1),new t("enes",16,1),new t("hetenes",19,1),new t("ens",14,1),new t("hetens",21,1),new t("ers",14,1),new t("ets",14,1),new t("et",-1,1),new t("het",25,1),new t("ert",-1,3),new t("ast",-1,1)],r=[new t("dt",-1,-1),new t("vt",-1,-1)],i=[new t("leg",-1,1),new t("eleg",0,1),new t("ig",-1,1),new t("eig",2,1),new t("lig",2,1),new t("elig",4,1),new t("els",-1,1),new t("lov",-1,1),new t("elov",7,1),new t("slov",7,1),new t("hetslov",9,1)],s=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,0,48,0,128],o=[119,125,149,1],u,a,f=new n;this.stem=function(){var e,t,n,r;e=f.cursor;e:do if(!l())break e;while(!1);f.cursor=e,f.limit_backward=f.cursor,f.cursor=f.limit,t=f.limit-f.cursor;t:do if(!c())break t;while(!1);f.cursor=f.limit-t,n=f.limit-f.cursor;n:do if(!h())break n;while(!1);f.cursor=f.limit-n,r=f.limit-f.cursor;r:do if(!p())break r;while(!1);return f.cursor=f.limit-r,f.cursor=f.limit_backward,!0},this.setCurrent=function(e){f.setCurrent(e)},this.getCurrent=function(){return f.getCurrent()}},porterStemmer:function(){function d(){return p.out_grouping_b(f,89,121)?p.in_grouping_b(a,97,121)?p.out_grouping_b(a,97,121)?!0:!1:!1:!1}function v(){return h<=p.cursor?!0:!1}function m(){return c<=p.cursor?!0:!1}function g(){var t;p.ket=p.cursor,t=p.find_among_b(e,4);if(t==0)return!1;p.bra=p.cursor;switch(t){case 0:return!1;case 1:p.slice_from("ss");break;case 2:p.slice_from("i");break;case 3:p.slice_del()}return!0}function y(){var e,t,n,s;p.ket=p.cursor,e=p.find_among_b(i,3);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:if(!v())return!1;p.slice_from("ee");break;case 2:t=p.limit-p.cursor;e:for(;;){t:do{if(!p.in_grouping_b(a,97,121))break t;break e}while(!1);if(p.cursor<=p.limit_backward)return!1;p.cursor--}p.cursor=p.limit-t,p.slice_del(),n=p.limit-p.cursor,e=p.find_among_b(r,13);if(e==0)return!1;p.cursor=p.limit-n;switch(e){case 0:return!1;case 1:var o=p.cursor;p.insert(p.cursor,p.cursor,"e"),p.cursor=o;break;case 2:p.ket=p.cursor;if(p.cursor<=p.limit_backward)return!1;p.cursor--,p.bra=p.cursor,p.slice_del();break;case 3:if(p.cursor!=h)return!1;s=p.limit-p.cursor;if(!d())return!1;p.cursor=p.limit-s;var o=p.cursor;p.insert(p.cursor,p.cursor,"e"),p.cursor=o}}return!0}function b(){var e;p.ket=p.cursor;e:do{e=p.limit-p.cursor;t:do{if(!p.eq_s_b(1,"y"))break t;break e}while(!1);p.cursor=p.limit-e;if(!p.eq_s_b(1,"Y"))return!1}while(!1);p.bra=p.cursor;n:for(;;){r:do{if(!p.in_grouping_b(a,97,121))break r;break n}while(!1);if(p.cursor<=p.limit_backward)return!1;p.cursor--}return p.slice_from("i"),!0}function w(){var e;p.ket=p.cursor,e=p.find_among_b(s,20);if(e==0)return!1;p.bra=p.cursor;if(!v())return!1;switch(e){case 0:return!1;case 1:p.slice_from("tion");break;case 2:p.slice_from("ence");break;case 3:p.slice_from("ance");break;case 4:p.slice_from("able");break;case 5:p.slice_from("ent");break;case 6:p.slice_from("e");break;case 7:p.slice_from("ize");break;case 8:p.slice_from("ate");break;case 9:p.slice_from("al");break;case 10:p.slice_from("al");break;case 11:p.slice_from("ful");break;case 12:p.slice_from("ous");break;case 13:p.slice_from("ive");break;case 14:p.slice_from("ble")}return!0}function E(){var e;p.ket=p.cursor,e=p.find_among_b(o,7);if(e==0)return!1;p.bra=p.cursor;if(!v())return!1;switch(e){case 0:return!1;case 1:p.slice_from("al");break;case 2:p.slice_from("ic");break;case 3:p.slice_del()}return!0}function S(){var e,t;p.ket=p.cursor,e=p.find_among_b(u,19);if(e==0)return!1;p.bra=p.cursor;if(!m())return!1;switch(e){case 0:return!1;case 1:p.slice_del();break;case 2:e:do{t=p.limit-p.cursor;t:do{if(!p.eq_s_b(1,"s"))break t;break e}while(!1);p.cursor=p.limit-t;if(!p.eq_s_b(1,"t"))return!1}while(!1);p.slice_del()}return!0}function x(){var e,t;p.ket=p.cursor;if(!p.eq_s_b(1,"e"))return!1;p.bra=p.cursor;e:do{e=p.limit-p.cursor;t:do{if(!m())break t;break e}while(!1);p.cursor=p.limit-e;if(!v())return!1;t=p.limit-p.cursor;n:do{if(!d())break n;return!1}while(!1);p.cursor=p.limit-t}while(!1);return p.slice_del(),!0}function T(){return p.ket=p.cursor,p.eq_s_b(1,"l")?(p.bra=p.cursor,m()?p.eq_s_b(1,"l")?(p.slice_del(),!0):!1:!1):!1}var e=[new t("s",-1,3),new t("ies",0,2),new t("sses",0,1),new t("ss",0,-1)],r=[new t("",-1,3),new t("bb",0,2),new t("dd",0,2),new t("ff",0,2),new t("gg",0,2),new t("bl",0,1),new t("mm",0,2),new t("nn",0,2),new t("pp",0,2),new t("rr",0,2),new t("at",0,1),new t("tt",0,2),new t("iz",0,1)],i=[new t("ed",-1,2),new t("eed",0,1),new t("ing",-1,2)],s=[new t("anci",-1,3),new t("enci",-1,2),new t("abli",-1,4),new t("eli",-1,6),new t("alli",-1,9),new t("ousli",-1,12),new t("entli",-1,5),new t("aliti",-1,10),new t("biliti",-1,14),new t("iviti",-1,13),new t("tional",-1,1),new t("ational",10,8),new t("alism",-1,10),new t("ation",-1,8),new t("ization",13,7),new t("izer",-1,7),new t("ator",-1,8),new t("iveness",-1,13),new t("fulness",-1,11),new t("ousness",-1,12)],o=[new t("icate",-1,2),new t("ative",-1,3),new t("alize",-1,1),new t("iciti",-1,2),new t("ical",-1,2),new t("ful",-1,3),new t("ness",-1,3)],u=[new t("ic",-1,1),new t("ance",-1,1),new t("ence",-1,1),new t("able",-1,1),new t("ible",-1,1),new t("ate",-1,1),new t("ive",-1,1),new t("ize",-1,1),new t("iti",-1,1),new t("al",-1,1),new t("ism",-1,1),new t("ion",-1,2),new t("er",-1,1),new t("ous",-1,1),new t("ant",-1,1),new t("ent",-1,1),new t("ment",15,1),new t("ement",16,1),new 
t("ou",-1,1)],a=[17,65,16,1],f=[1,17,65,208,1],l,c,h,p=new n;this.stem=function(){var e,t,n,r,i,s,o,u,f,d,v,m,N,C,k,L;l=!1,e=p.cursor;e:do{p.bra=p.cursor;if(!p.eq_s(1,"y"))break e;p.ket=p.cursor,p.slice_from("Y"),l=!0}while(!1);p.cursor=e,t=p.cursor;do t:for(;;){n=p.cursor;n:do{r:for(;;){r=p.cursor;i:do{if(!p.in_grouping(a,97,121))break i;p.bra=p.cursor;if(!p.eq_s(1,"y"))break i;p.ket=p.cursor,p.cursor=r;break r}while(!1);p.cursor=r;if(p.cursor>=p.limit)break n;p.cursor++}p.slice_from("Y"),l=!0;continue t}while(!1);p.cursor=n;break t}while(!1);p.cursor=t,h=p.limit,c=p.limit,i=p.cursor;s:do{o:for(;;){u:do{if(!p.in_grouping(a,97,121))break u;break o}while(!1);if(p.cursor>=p.limit)break s;p.cursor++}a:for(;;){f:do{if(!p.out_grouping(a,97,121))break f;break a}while(!1);if(p.cursor>=p.limit)break s;p.cursor++}h=p.cursor;l:for(;;){c:do{if(!p.in_grouping(a,97,121))break c;break l}while(!1);if(p.cursor>=p.limit)break s;p.cursor++}h:for(;;){p:do{if(!p.out_grouping(a,97,121))break p;break h}while(!1);if(p.cursor>=p.limit)break s;p.cursor++}c=p.cursor}while(!1);p.cursor=i,p.limit_backward=p.cursor,p.cursor=p.limit,s=p.limit-p.cursor;d:do if(!g())break d;while(!1);p.cursor=p.limit-s,o=p.limit-p.cursor;v:do if(!y())break v;while(!1);p.cursor=p.limit-o,u=p.limit-p.cursor;m:do if(!b())break m;while(!1);p.cursor=p.limit-u,f=p.limit-p.cursor;g:do if(!w())break g;while(!1);p.cursor=p.limit-f,d=p.limit-p.cursor;y:do if(!E())break y;while(!1);p.cursor=p.limit-d,v=p.limit-p.cursor;b:do if(!S())break b;while(!1);p.cursor=p.limit-v,m=p.limit-p.cursor;w:do if(!x())break w;while(!1);p.cursor=p.limit-m,N=p.limit-p.cursor;E:do if(!T())break E;while(!1);p.cursor=p.limit-N,p.cursor=p.limit_backward,C=p.cursor;S:do{if(!l)break S;x:for(;;){k=p.cursor;T:do{N:for(;;){L=p.cursor;C:do{p.bra=p.cursor;if(!p.eq_s(1,"Y"))break C;p.ket=p.cursor,p.cursor=L;break N}while(!1);p.cursor=L;if(p.cursor>=p.limit)break T;p.cursor++}p.slice_from("y");continue x}while(!1);p.cursor=k;break x}}while(!1);return p.cursor=C,!0},this.setCurrent=function(e){p.setCurrent(e)},this.getCurrent=function(){return p.getCurrent()}},portugueseStemmer:function(){function m(){var t,n;e:for(;;){n=v.cursor;t:do{v.bra=v.cursor,t=v.find_among(e,3);if(t==0)break t;v.ket=v.cursor;switch(t){case 0:break t;case 1:v.slice_from("a~");break;case 2:v.slice_from("o~");break;case 3:if(v.cursor>=v.limit)break t;v.cursor++}continue e}while(!1);v.cursor=n;break e}return!0}function g(){var e,t,n,r,i;d=v.limit,p=v.limit,h=v.limit,e=v.cursor;e:do{t:do{t=v.cursor;n:do{if(!v.in_grouping(c,97,250))break n;r:do{n=v.cursor;i:do{if(!v.out_grouping(c,97,250))break i;s:for(;;){o:do{if(!v.in_grouping(c,97,250))break o;break s}while(!1);if(v.cursor>=v.limit)break i;v.cursor++}break r}while(!1);v.cursor=n;if(!v.in_grouping(c,97,250))break n;u:for(;;){a:do{if(!v.out_grouping(c,97,250))break a;break u}while(!1);if(v.cursor>=v.limit)break n;v.cursor++}}while(!1);break t}while(!1);v.cursor=t;if(!v.out_grouping(c,97,250))break e;f:do{r=v.cursor;l:do{if(!v.out_grouping(c,97,250))break l;c:for(;;){h:do{if(!v.in_grouping(c,97,250))break h;break c}while(!1);if(v.cursor>=v.limit)break l;v.cursor++}break f}while(!1);v.cursor=r;if(!v.in_grouping(c,97,250))break e;if(v.cursor>=v.limit)break e;v.cursor++}while(!1)}while(!1);d=v.cursor}while(!1);v.cursor=e,i=v.cursor;p:do{d:for(;;){v:do{if(!v.in_grouping(c,97,250))break v;break d}while(!1);if(v.cursor>=v.limit)break p;v.cursor++}m:for(;;){g:do{if(!v.out_grouping(c,97,250))break g;break m}while(!1);if(v.cursor>=v.limit)break p;v.cursor++}p=v.cursor;y:for(;;){b:do{if(!v.in_grouping(c,97,250))break b;break y}while(!1);if(v.cursor>=v.limit)break p;v.cursor++}w:for(;;){E:do{if(!v.out_grouping(c,97,250))break E;break w}while(!1);if(v.cursor>=v.limit)break p;v.cursor++}h=v.cursor}while(!1);return v.cursor=i,!0}function y(){var e,t;e:for(;;){t=v.cursor;t:do{v.bra=v.cursor,e=v.find_among(r,3);if(e==0)break t;v.ket=v.cursor;switch(e){case 0:break t;case 1:v.slice_from("\u00e3");break;case 2:v.slice_from("\u00f5");break;case 3:if(v.cursor>=v.limit)break t;v.cursor++}continue e}while(!1);v.cursor=t;break e}return!0}function b(){return d<=v.cursor?!0:!1}function w(){return p<=v.cursor?!0:!1}function E(){return h<=v.cursor?!0:!1}function S(){var e,t,n,r,a;v.ket=v.cursor,e=v.find_among_b(u,45);if(e==0)return!1;v.bra=v.cursor;switch(e){case 0:return!1;case 1:if(!E())return!1;v.slice_del();break;case 2:if(!E())return!1;v.slice_from("log");break;case 3:if(!E())return!1;v.slice_from("u");break;case 4:if(!E())return!1;v.slice_from("ente");break;case 5:if(!w())return!1;v.slice_del(),t=v.limit-v.cursor;e:do{v.ket=v.cursor,e=v.find_among_b(i,4);if(e==0){v.cursor=v.limit-t;break e}v.bra=v.cursor;if(!E()){v.cursor=v.limit-t;break e}v.slice_del();switch(e){case 0:v.cursor=v.limit-t;break e;case 1:v.ket=v.cursor;if(!v.eq_s_b(2,"at")){v.cursor=v.limit-t;break e}v.bra=v.cursor;if(!E()){v.cursor=v.limit-t;break e}v.slice_del()}}while(!1);break;case 6:if(!E())return!1;v.slice_del(),n=v.limit-v.cursor;t:do{v.ket=v.cursor,e=v.find_among_b(s,3);if(e==0){v.cursor=v.limit-n;break t}v.bra=v.cursor;switch(e){case 0:v.cursor=v.limit-n;break t;case 1:if(!E()){v.cursor=v.limit-n;break t}v.slice_del()}}while(!1);break;case 7:if(!E())return!1;v.slice_del(),r=v.limit-v.cursor;n:do{v.ket=v.cursor,e=v.find_among_b(o,3);if(e==0){v.cursor=v.limit-r;break n}v.bra=v.cursor;switch(e){case 0:v.cursor=v.limit-r;break n;case 1:if(!E()){v.cursor=v.limit-r;break n}v.slice_del()}}while(!1);break;case 8:if(!E())return!1;v.slice_del(),a=v.limit-v.cursor;r:do{v.ket=v.cursor;if(!v.eq_s_b(2,"at")){v.cursor=v.limit-a;break r}v.bra=v.cursor;if(!E()){v.cursor=v.limit-a;break r}v.slice_del()}while(!1);break;case 9:if(!b())return!1;if(!v.eq_s_b(1,"e"))return!1;v.slice_from("ir")}return!0}function x(){var e,t,n;t=v.limit-v.cursor;if(v.cursor<d)return!1;v.cursor=d,n=v.limit_backward,v.limit_backward=v.cursor,v.cursor=v.limit-t,v.ket=v.cursor,e=v.find_among_b(a,120);if(e==0)return v.limit_backward=n,!1;v.bra=v.cursor;switch(
e){case 0:return v.limit_backward=n,!1;case 1:v.slice_del()}return v.limit_backward=n,!0}function T(){var e;v.ket=v.cursor,e=v.find_among_b(f,7);if(e==0)return!1;v.bra=v.cursor;switch(e){case 0:return!1;case 1:if(!b())return!1;v.slice_del()}return!0}function N(){var e,t,n,r;v.ket=v.cursor,e=v.find_among_b(l,4);if(e==0)return!1;v.bra=v.cursor;switch(e){case 0:return!1;case 1:if(!b())return!1;v.slice_del(),v.ket=v.cursor;e:do{t=v.limit-v.cursor;t:do{if(!v.eq_s_b(1,"u"))break t;v.bra=v.cursor,n=v.limit-v.cursor;if(!v.eq_s_b(1,"g"))break t;v.cursor=v.limit-n;break e}while(!1);v.cursor=v.limit-t;if(!v.eq_s_b(1,"i"))return!1;v.bra=v.cursor,r=v.limit-v.cursor;if(!v.eq_s_b(1,"c"))return!1;v.cursor=v.limit-r}while(!1);if(!b())return!1;v.slice_del();break;case 2:v.slice_from("c")}return!0}var e=[new t("",-1,3),new t("\u00e3",0,1),new t("\u00f5",0,2)],r=[new t("",-1,3),new t("a~",0,1),new t("o~",0,2)],i=[new t("ic",-1,-1),new t("ad",-1,-1),new t("os",-1,-1),new t("iv",-1,1)],s=[new t("ante",-1,1),new t("avel",-1,1),new t("\u00edvel",-1,1)],o=[new t("ic",-1,1),new t("abil",-1,1),new t("iv",-1,1)],u=[new t("ica",-1,1),new t("\u00e2ncia",-1,1),new t("\u00eancia",-1,4),new t("ira",-1,9),new t("adora",-1,1),new t("osa",-1,1),new t("ista",-1,1),new t("iva",-1,8),new t("eza",-1,1),new t("log\u00eda",-1,2),new t("idade",-1,7),new t("ante",-1,1),new t("mente",-1,6),new t("amente",12,5),new t("\u00e1vel",-1,1),new t("\u00edvel",-1,1),new t("uci\u00f3n",-1,3),new t("ico",-1,1),new t("ismo",-1,1),new t("oso",-1,1),new t("amento",-1,1),new t("imento",-1,1),new t("ivo",-1,8),new t("a\u00e7a~o",-1,1),new t("ador",-1,1),new t("icas",-1,1),new t("\u00eancias",-1,4),new t("iras",-1,9),new t("adoras",-1,1),new t("osas",-1,1),new t("istas",-1,1),new t("ivas",-1,8),new t("ezas",-1,1),new t("log\u00edas",-1,2),new t("idades",-1,7),new t("uciones",-1,3),new t("adores",-1,1),new t("antes",-1,1),new t("a\u00e7o~es",-1,1),new t("icos",-1,1),new t("ismos",-1,1),new t("osos",-1,1),new t("amentos",-1,1),new t("imentos",-1,1),new t("ivos",-1,8)],a=[new t("ada",-1,1),new t("ida",-1,1),new t("ia",-1,1),new t("aria",2,1),new t("eria",2,1),new t("iria",2,1),new t("ara",-1,1),new t("era",-1,1),new t("ira",-1,1),new t("ava",-1,1),new t("asse",-1,1),new t("esse",-1,1),new t("isse",-1,1),new t("aste",-1,1),new t("este",-1,1),new t("iste",-1,1),new t("ei",-1,1),new t("arei",16,1),new t("erei",16,1),new t("irei",16,1),new t("am",-1,1),new t("iam",20,1),new t("ariam",21,1),new t("eriam",21,1),new t("iriam",21,1),new t("aram",20,1),new t("eram",20,1),new t("iram",20,1),new t("avam",20,1),new t("em",-1,1),new t("arem",29,1),new t("erem",29,1),new t("irem",29,1),new t("assem",29,1),new t("essem",29,1),new t("issem",29,1),new t("ado",-1,1),new t("ido",-1,1),new t("ando",-1,1),new t("endo",-1,1),new t("indo",-1,1),new t("ara~o",-1,1),new t("era~o",-1,1),new t("ira~o",-1,1),new t("ar",-1,1),new t("er",-1,1),new t("ir",-1,1),new t("as",-1,1),new t("adas",47,1),new t("idas",47,1),new t("ias",47,1),new t("arias",50,1),new t("erias",50,1),new t("irias",50,1),new t("aras",47,1),new t("eras",47,1),new t("iras",47,1),new t("avas",47,1),new t("es",-1,1),new t("ardes",58,1),new t("erdes",58,1),new t("irdes",58,1),new t("ares",58,1),new t("eres",58,1),new t("ires",58,1),new t("asses",58,1),new t("esses",58,1),new t("isses",58,1),new t("astes",58,1),new t("estes",58,1),new t("istes",58,1),new t("is",-1,1),new t("ais",71,1),new t("eis",71,1),new t("areis",73,1),new t("ereis",73,1),new t("ireis",73,1),new t("\u00e1reis",73,1),new t("\u00e9reis",73,1),new t("\u00edreis",73,1),new t("\u00e1sseis",73,1),new t("\u00e9sseis",73,1),new t("\u00edsseis",73,1),new t("\u00e1veis",73,1),new t("\u00edeis",73,1),new t("ar\u00edeis",84,1),new t("er\u00edeis",84,1),new t("ir\u00edeis",84,1),new t("ados",-1,1),new t("idos",-1,1),new t("amos",-1,1),new t("\u00e1ramos",90,1),new t("\u00e9ramos",90,1),new t("\u00edramos",90,1),new t("\u00e1vamos",90,1),new t("\u00edamos",90,1),new t("ar\u00edamos",95,1),new t("er\u00edamos",95,1),new t("ir\u00edamos",95,1),new t("emos",-1,1),new t("aremos",99,1),new t("eremos",99,1),new t("iremos",99,1),new t("\u00e1ssemos",99,1),new t("\u00eassemos",99,1),new t("\u00edssemos",99,1),new t("imos",-1,1),new t("armos",-1,1),new t("ermos",-1,1),new t("irmos",-1,1),new t("\u00e1mos",-1,1),new t("ar\u00e1s",-1,1),new t("er\u00e1s",-1,1),new t("ir\u00e1s",-1,1),new t("eu",-1,1),new t("iu",-1,1),new t("ou",-1,1),new t("ar\u00e1",-1,1),new t("er\u00e1",-1,1),new t("ir\u00e1",-1,1)],f=[new t("a",-1,1),new t("i",-1,1),new t("o",-1,1),new t("os",-1,1),new t("\u00e1",-1,1),new t("\u00ed",-1,1),new t("\u00f3",-1,1)],l=[new t("e",-1,1),new t("\u00e7",-1,2),new t("\u00e9",-1,1),new t("\u00ea",-1,1)],c=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,0,3,19,12,2],h,p,d,v=new n;this.stem=function(){var e,t,n,r,i,s,o,u,a,f;e=v.cursor;e:do if(!m())break e;while(!1);v.cursor=e,t=v.cursor;t:do if(!g())break t;while(!1);v.cursor=t,v.limit_backward=v.cursor,v.cursor=v.limit,n=v.limit-v.cursor;n:do r:do{r=v.limit-v.cursor;i:do{i=v.limit-v.cursor;s:do{s=v.limit-v.cursor;o:do{if(!S())break o;break s}while(!1);v.cursor=v.limit-s;if(!x())break i}while(!1);v.cursor=v.limit-i,o=v.limit-v.cursor;u:do{v.ket=v.cursor;if(!v.eq_s_b(1,"i"))break u;v.bra=v.cursor,u=v.limit-v.cursor;if(!v.eq_s_b(1,"c"))break u;v.cursor=v.limit-u;if(!b())break u;v.slice_del()}while(!1);v.cursor=v.limit-o;break r}while(!1);v.cursor=v.limit-r;if(!T())break n}while(!1);while(!1);v.cursor=v.limit-n,a=v.limit-v.cursor;a:do if(!N())break a;while(!1);v.cursor=v.limit-a,v.cursor=v.limit_backward,f=v.cursor;f:do if(!y())break f;while(!1);return v.cursor=f,!0},this.setCurrent=function(e){v.setCurrent(e)},this.getCurrent=function(){return v.getCurrent()}},romanianStemmer:function(){function d(){var e,t,n;e:for(;;){e=p.cursor;t:do{n:for(;;){t=p.cursor;r:do{if(!p.in_grouping(a,97,259))break r;p.bra=p.cursor;i:do{n=p.cursor;s:do{if(!p.eq_s(1,"u"))break s;p.ket=p.cursor;if(!p.in_grouping(a,97,259))break s;p.slice_from("U");break i
}while(!1);p.cursor=n;if(!p.eq_s(1,"i"))break r;p.ket=p.cursor;if(!p.in_grouping(a,97,259))break r;p.slice_from("I")}while(!1);p.cursor=t;break n}while(!1);p.cursor=t;if(p.cursor>=p.limit)break t;p.cursor++}continue e}while(!1);p.cursor=e;break e}return!0}function v(){var e,t,n,r,i;h=p.limit,c=p.limit,l=p.limit,e=p.cursor;e:do{t:do{t=p.cursor;n:do{if(!p.in_grouping(a,97,259))break n;r:do{n=p.cursor;i:do{if(!p.out_grouping(a,97,259))break i;s:for(;;){o:do{if(!p.in_grouping(a,97,259))break o;break s}while(!1);if(p.cursor>=p.limit)break i;p.cursor++}break r}while(!1);p.cursor=n;if(!p.in_grouping(a,97,259))break n;u:for(;;){a:do{if(!p.out_grouping(a,97,259))break a;break u}while(!1);if(p.cursor>=p.limit)break n;p.cursor++}}while(!1);break t}while(!1);p.cursor=t;if(!p.out_grouping(a,97,259))break e;f:do{r=p.cursor;l:do{if(!p.out_grouping(a,97,259))break l;c:for(;;){h:do{if(!p.in_grouping(a,97,259))break h;break c}while(!1);if(p.cursor>=p.limit)break l;p.cursor++}break f}while(!1);p.cursor=r;if(!p.in_grouping(a,97,259))break e;if(p.cursor>=p.limit)break e;p.cursor++}while(!1)}while(!1);h=p.cursor}while(!1);p.cursor=e,i=p.cursor;p:do{d:for(;;){v:do{if(!p.in_grouping(a,97,259))break v;break d}while(!1);if(p.cursor>=p.limit)break p;p.cursor++}m:for(;;){g:do{if(!p.out_grouping(a,97,259))break g;break m}while(!1);if(p.cursor>=p.limit)break p;p.cursor++}c=p.cursor;y:for(;;){b:do{if(!p.in_grouping(a,97,259))break b;break y}while(!1);if(p.cursor>=p.limit)break p;p.cursor++}w:for(;;){E:do{if(!p.out_grouping(a,97,259))break E;break w}while(!1);if(p.cursor>=p.limit)break p;p.cursor++}l=p.cursor}while(!1);return p.cursor=i,!0}function m(){var t,n;e:for(;;){n=p.cursor;t:do{p.bra=p.cursor,t=p.find_among(e,3);if(t==0)break t;p.ket=p.cursor;switch(t){case 0:break t;case 1:p.slice_from("i");break;case 2:p.slice_from("u");break;case 3:if(p.cursor>=p.limit)break t;p.cursor++}continue e}while(!1);p.cursor=n;break e}return!0}function g(){return h<=p.cursor?!0:!1}function y(){return c<=p.cursor?!0:!1}function b(){return l<=p.cursor?!0:!1}function w(){var e,t;p.ket=p.cursor,e=p.find_among_b(r,16);if(e==0)return!1;p.bra=p.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:p.slice_del();break;case 2:p.slice_from("a");break;case 3:p.slice_from("e");break;case 4:p.slice_from("i");break;case 5:t=p.limit-p.cursor;e:do{if(!p.eq_s_b(2,"ab"))break e;return!1}while(!1);p.cursor=p.limit-t,p.slice_from("i");break;case 6:p.slice_from("at");break;case 7:p.slice_from("a\u0163i")}return!0}function E(){var e,t;t=p.limit-p.cursor,p.ket=p.cursor,e=p.find_among_b(i,46);if(e==0)return!1;p.bra=p.cursor;if(!y())return!1;switch(e){case 0:return!1;case 1:p.slice_from("abil");break;case 2:p.slice_from("ibil");break;case 3:p.slice_from("iv");break;case 4:p.slice_from("ic");break;case 5:p.slice_from("at");break;case 6:p.slice_from("it")}return f=!0,p.cursor=p.limit-t,!0}function S(){var e,t;f=!1;e:for(;;){t=p.limit-p.cursor;t:do{if(!E())break t;continue e}while(!1);p.cursor=p.limit-t;break e}p.ket=p.cursor,e=p.find_among_b(s,62);if(e==0)return!1;p.bra=p.cursor;if(!b())return!1;switch(e){case 0:return!1;case 1:p.slice_del();break;case 2:if(!p.eq_s_b(1,"\u0163"))return!1;p.bra=p.cursor,p.slice_from("t");break;case 3:p.slice_from("ist")}return f=!0,!0}function x(){var e,t,n,r;t=p.limit-p.cursor;if(p.cursor<h)return!1;p.cursor=h,n=p.limit_backward,p.limit_backward=p.cursor,p.cursor=p.limit-t,p.ket=p.cursor,e=p.find_among_b(o,94);if(e==0)return p.limit_backward=n,!1;p.bra=p.cursor;switch(e){case 0:return p.limit_backward=n,!1;case 1:e:do{r=p.limit-p.cursor;t:do{if(!p.out_grouping_b(a,97,259))break t;break e}while(!1);p.cursor=p.limit-r;if(!p.eq_s_b(1,"u"))return p.limit_backward=n,!1}while(!1);p.slice_del();break;case 2:p.slice_del()}return p.limit_backward=n,!0}function T(){var e;p.ket=p.cursor,e=p.find_among_b(u,5);if(e==0)return!1;p.bra=p.cursor;if(!g())return!1;switch(e){case 0:return!1;case 1:p.slice_del()}return!0}var e=[new t("",-1,3),new t("I",0,1),new t("U",0,2)],r=[new t("ea",-1,3),new t("a\u0163ia",-1,7),new t("aua",-1,2),new t("iua",-1,4),new t("a\u0163ie",-1,7),new t("ele",-1,3),new t("ile",-1,5),new t("iile",6,4),new t("iei",-1,4),new t("atei",-1,6),new t("ii",-1,4),new t("ului",-1,1),new t("ul",-1,1),new t("elor",-1,3),new t("ilor",-1,4),new t("iilor",14,4)],i=[new t("icala",-1,4),new t("iciva",-1,4),new t("ativa",-1,5),new t("itiva",-1,6),new t("icale",-1,4),new t("a\u0163iune",-1,5),new t("i\u0163iune",-1,6),new t("atoare",-1,5),new t("itoare",-1,6),new t("\u0103toare",-1,5),new t("icitate",-1,4),new t("abilitate",-1,1),new t("ibilitate",-1,2),new t("ivitate",-1,3),new t("icive",-1,4),new t("ative",-1,5),new t("itive",-1,6),new t("icali",-1,4),new t("atori",-1,5),new t("icatori",18,4),new t("itori",-1,6),new t("\u0103tori",-1,5),new t("icitati",-1,4),new t("abilitati",-1,1),new t("ivitati",-1,3),new t("icivi",-1,4),new t("ativi",-1,5),new t("itivi",-1,6),new t("icit\u0103i",-1,4),new t("abilit\u0103i",-1,1),new t("ivit\u0103i",-1,3),new t("icit\u0103\u0163i",-1,4),new t("abilit\u0103\u0163i",-1,1),new t("ivit\u0103\u0163i",-1,3),new t("ical",-1,4),new t("ator",-1,5),new t("icator",35,4),new t("itor",-1,6),new t("\u0103tor",-1,5),new t("iciv",-1,4),new t("ativ",-1,5),new t("itiv",-1,6),new t("ical\u0103",-1,4),new t("iciv\u0103",-1,4),new t("ativ\u0103",-1,5),new t("itiv\u0103",-1,6)],s=[new t("ica",-1,1),new t("abila",-1,1),new t("ibila",-1,1),new t("oasa",-1,1),new t("ata",-1,1),new t("ita",-1,1),new t("anta",-1,1),new t("ista",-1,3),new t("uta",-1,1),new t("iva",-1,1),new t("ic",-1,1),new t("ice",-1,1),new t("abile",-1,1),new t("ibile",-1,1),new t("isme",-1,3),new t("iune",-1,2),new t("oase",-1,1),new t("ate",-1,1),new t("itate",17,1),new t("ite",-1,1),new t("ante",-1,1),new t("iste",-1,3),new t("ute",-1,1),new t("ive",-1,1),new t("ici",-1,1),new t("abili",-1,1),new t("ibili",-1,1),new t("iuni",-1,2),new t("atori",-1,1),new t("osi",-1,1),new t("ati",-1,1),new t("itati",30,1),new t("iti",-1,1),new t("anti",-1,1),new t("isti",-1
,3),new t("uti",-1,1),new t("i\u015fti",-1,3),new t("ivi",-1,1),new t("it\u0103i",-1,1),new t("o\u015fi",-1,1),new t("it\u0103\u0163i",-1,1),new t("abil",-1,1),new t("ibil",-1,1),new t("ism",-1,3),new t("ator",-1,1),new t("os",-1,1),new t("at",-1,1),new t("it",-1,1),new t("ant",-1,1),new t("ist",-1,3),new t("ut",-1,1),new t("iv",-1,1),new t("ic\u0103",-1,1),new t("abil\u0103",-1,1),new t("ibil\u0103",-1,1),new t("oas\u0103",-1,1),new t("at\u0103",-1,1),new t("it\u0103",-1,1),new t("ant\u0103",-1,1),new t("ist\u0103",-1,3),new t("ut\u0103",-1,1),new t("iv\u0103",-1,1)],o=[new t("ea",-1,1),new t("ia",-1,1),new t("esc",-1,1),new t("\u0103sc",-1,1),new t("ind",-1,1),new t("\u00e2nd",-1,1),new t("are",-1,1),new t("ere",-1,1),new t("ire",-1,1),new t("\u00e2re",-1,1),new t("se",-1,2),new t("ase",10,1),new t("sese",10,2),new t("ise",10,1),new t("use",10,1),new t("\u00e2se",10,1),new t("e\u015fte",-1,1),new t("\u0103\u015fte",-1,1),new t("eze",-1,1),new t("ai",-1,1),new t("eai",19,1),new t("iai",19,1),new t("sei",-1,2),new t("e\u015fti",-1,1),new t("\u0103\u015fti",-1,1),new t("ui",-1,1),new t("ezi",-1,1),new t("\u00e2i",-1,1),new t("a\u015fi",-1,1),new t("se\u015fi",-1,2),new t("ase\u015fi",29,1),new t("sese\u015fi",29,2),new t("ise\u015fi",29,1),new t("use\u015fi",29,1),new t("\u00e2se\u015fi",29,1),new t("i\u015fi",-1,1),new t("u\u015fi",-1,1),new t("\u00e2\u015fi",-1,1),new t("a\u0163i",-1,2),new t("ea\u0163i",38,1),new t("ia\u0163i",38,1),new t("e\u0163i",-1,2),new t("i\u0163i",-1,2),new t("\u00e2\u0163i",-1,2),new t("ar\u0103\u0163i",-1,1),new t("ser\u0103\u0163i",-1,2),new t("aser\u0103\u0163i",45,1),new t("seser\u0103\u0163i",45,2),new t("iser\u0103\u0163i",45,1),new t("user\u0103\u0163i",45,1),new t("\u00e2ser\u0103\u0163i",45,1),new t("ir\u0103\u0163i",-1,1),new t("ur\u0103\u0163i",-1,1),new t("\u00e2r\u0103\u0163i",-1,1),new t("am",-1,1),new t("eam",54,1),new t("iam",54,1),new t("em",-1,2),new t("asem",57,1),new t("sesem",57,2),new t("isem",57,1),new t("usem",57,1),new t("\u00e2sem",57,1),new t("im",-1,2),new t("\u00e2m",-1,2),new t("\u0103m",-1,2),new t("ar\u0103m",65,1),new t("ser\u0103m",65,2),new t("aser\u0103m",67,1),new t("seser\u0103m",67,2),new t("iser\u0103m",67,1),new t("user\u0103m",67,1),new t("\u00e2ser\u0103m",67,1),new t("ir\u0103m",65,1),new t("ur\u0103m",65,1),new t("\u00e2r\u0103m",65,1),new t("au",-1,1),new t("eau",76,1),new t("iau",76,1),new t("indu",-1,1),new t("\u00e2ndu",-1,1),new t("ez",-1,1),new t("easc\u0103",-1,1),new t("ar\u0103",-1,1),new t("ser\u0103",-1,2),new t("aser\u0103",84,1),new t("seser\u0103",84,2),new t("iser\u0103",84,1),new t("user\u0103",84,1),new t("\u00e2ser\u0103",84,1),new t("ir\u0103",-1,1),new t("ur\u0103",-1,1),new t("\u00e2r\u0103",-1,1),new t("eaz\u0103",-1,1)],u=[new t("a",-1,1),new t("e",-1,1),new t("ie",1,1),new t("i",-1,1),new t("\u0103",-1,1)],a=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,0,2,32,0,0,4],f,l,c,h,p=new n;this.stem=function(){var e,t,n,r,i,s,o,u;e=p.cursor;e:do if(!d())break e;while(!1);p.cursor=e,t=p.cursor;t:do if(!v())break t;while(!1);p.cursor=t,p.limit_backward=p.cursor,p.cursor=p.limit,n=p.limit-p.cursor;n:do if(!w())break n;while(!1);p.cursor=p.limit-n,r=p.limit-p.cursor;r:do if(!S())break r;while(!1);p.cursor=p.limit-r,i=p.limit-p.cursor;i:do s:do{s=p.limit-p.cursor;o:do{if(!f)break o;break s}while(!1);p.cursor=p.limit-s;if(!x())break i}while(!1);while(!1);p.cursor=p.limit-i,o=p.limit-p.cursor;u:do if(!T())break u;while(!1);p.cursor=p.limit-o,p.cursor=p.limit_backward,u=p.cursor;a:do if(!m())break a;while(!1);return p.cursor=u,!0},this.setCurrent=function(e){p.setCurrent(e)},this.getCurrent=function(){return p.getCurrent()}},russianStemmer:function(){function d(){var e;h=p.limit,c=p.limit,e=p.cursor;e:do{t:for(;;){n:do{if(!p.in_grouping(l,1072,1103))break n;break t}while(!1);if(p.cursor>=p.limit)break e;p.cursor++}h=p.cursor;r:for(;;){i:do{if(!p.out_grouping(l,1072,1103))break i;break r}while(!1);if(p.cursor>=p.limit)break e;p.cursor++}s:for(;;){o:do{if(!p.in_grouping(l,1072,1103))break o;break s}while(!1);if(p.cursor>=p.limit)break e;p.cursor++}u:for(;;){a:do{if(!p.out_grouping(l,1072,1103))break a;break u}while(!1);if(p.cursor>=p.limit)break e;p.cursor++}c=p.cursor}while(!1);return p.cursor=e,!0}function v(){return c<=p.cursor?!0:!1}function m(){var t,n;p.ket=p.cursor,t=p.find_among_b(e,9);if(t==0)return!1;p.bra=p.cursor;switch(t){case 0:return!1;case 1:e:do{n=p.limit-p.cursor;t:do{if(!p.eq_s_b(1,"\u0430"))break t;break e}while(!1);p.cursor=p.limit-n;if(!p.eq_s_b(1,"\u044f"))return!1}while(!1);p.slice_del();break;case 2:p.slice_del()}return!0}function g(){var e;p.ket=p.cursor,e=p.find_among_b(r,26);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_del()}return!0}function y(){var e,t,n;if(!g())return!1;t=p.limit-p.cursor;e:do{p.ket=p.cursor,e=p.find_among_b(i,8);if(e==0){p.cursor=p.limit-t;break e}p.bra=p.cursor;switch(e){case 0:p.cursor=p.limit-t;break e;case 1:t:do{n=p.limit-p.cursor;n:do{if(!p.eq_s_b(1,"\u0430"))break n;break t}while(!1);p.cursor=p.limit-n;if(!p.eq_s_b(1,"\u044f")){p.cursor=p.limit-t;break e}}while(!1);p.slice_del();break;case 2:p.slice_del()}}while(!1);return!0}function b(){var e;p.ket=p.cursor,e=p.find_among_b(s,2);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_del()}return!0}function w(){var e,t;p.ket=p.cursor,e=p.find_among_b(o,46);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:e:do{t=p.limit-p.cursor;t:do{if(!p.eq_s_b(1,"\u0430"))break t;break e}while(!1);p.cursor=p.limit-t;if(!p.eq_s_b(1,"\u044f"))return!1}while(!1);p.slice_del();break;case 2:p.slice_del()}return!0}function E(){var e;p.ket=p.cursor,e=p.find_among_b(u,36);if(e==0)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_del()}return!0}function S(){var e;p.ket=p.cursor,e=p.find_among_b(a,2);if(e==0)return!1;p.bra=p.cursor;if(!v())return!1;switch(e){case 0:return!1;case 1:p.slice_del()}return!0}function x(){var e;p.ket=p.cursor,e=p.find_among_b(f,4);if(e==0
)return!1;p.bra=p.cursor;switch(e){case 0:return!1;case 1:p.slice_del(),p.ket=p.cursor;if(!p.eq_s_b(1,"\u043d"))return!1;p.bra=p.cursor;if(!p.eq_s_b(1,"\u043d"))return!1;p.slice_del();break;case 2:if(!p.eq_s_b(1,"\u043d"))return!1;p.slice_del();break;case 3:p.slice_del()}return!0}var e=[new t("\u0432",-1,1),new t("\u0438\u0432",0,2),new t("\u044b\u0432",0,2),new t("\u0432\u0448\u0438",-1,1),new t("\u0438\u0432\u0448\u0438",3,2),new t("\u044b\u0432\u0448\u0438",3,2),new t("\u0432\u0448\u0438\u0441\u044c",-1,1),new t("\u0438\u0432\u0448\u0438\u0441\u044c",6,2),new t("\u044b\u0432\u0448\u0438\u0441\u044c",6,2)],r=[new t("\u0435\u0435",-1,1),new t("\u0438\u0435",-1,1),new t("\u043e\u0435",-1,1),new t("\u044b\u0435",-1,1),new t("\u0438\u043c\u0438",-1,1),new t("\u044b\u043c\u0438",-1,1),new t("\u0435\u0439",-1,1),new t("\u0438\u0439",-1,1),new t("\u043e\u0439",-1,1),new t("\u044b\u0439",-1,1),new t("\u0435\u043c",-1,1),new t("\u0438\u043c",-1,1),new t("\u043e\u043c",-1,1),new t("\u044b\u043c",-1,1),new t("\u0435\u0433\u043e",-1,1),new t("\u043e\u0433\u043e",-1,1),new t("\u0435\u043c\u0443",-1,1),new t("\u043e\u043c\u0443",-1,1),new t("\u0438\u0445",-1,1),new t("\u044b\u0445",-1,1),new t("\u0435\u044e",-1,1),new t("\u043e\u044e",-1,1),new t("\u0443\u044e",-1,1),new t("\u044e\u044e",-1,1),new t("\u0430\u044f",-1,1),new t("\u044f\u044f",-1,1)],i=[new t("\u0435\u043c",-1,1),new t("\u043d\u043d",-1,1),new t("\u0432\u0448",-1,1),new t("\u0438\u0432\u0448",2,2),new t("\u044b\u0432\u0448",2,2),new t("\u0449",-1,1),new t("\u044e\u0449",5,1),new t("\u0443\u044e\u0449",6,2)],s=[new t("\u0441\u044c",-1,1),new t("\u0441\u044f",-1,1)],o=[new t("\u043b\u0430",-1,1),new t("\u0438\u043b\u0430",0,2),new t("\u044b\u043b\u0430",0,2),new t("\u043d\u0430",-1,1),new t("\u0435\u043d\u0430",3,2),new t("\u0435\u0442\u0435",-1,1),new t("\u0438\u0442\u0435",-1,2),new t("\u0439\u0442\u0435",-1,1),new t("\u0435\u0439\u0442\u0435",7,2),new t("\u0443\u0439\u0442\u0435",7,2),new t("\u043b\u0438",-1,1),new t("\u0438\u043b\u0438",10,2),new t("\u044b\u043b\u0438",10,2),new t("\u0439",-1,1),new t("\u0435\u0439",13,2),new t("\u0443\u0439",13,2),new t("\u043b",-1,1),new t("\u0438\u043b",16,2),new t("\u044b\u043b",16,2),new t("\u0435\u043c",-1,1),new t("\u0438\u043c",-1,2),new t("\u044b\u043c",-1,2),new t("\u043d",-1,1),new t("\u0435\u043d",22,2),new t("\u043b\u043e",-1,1),new t("\u0438\u043b\u043e",24,2),new t("\u044b\u043b\u043e",24,2),new t("\u043d\u043e",-1,1),new t("\u0435\u043d\u043e",27,2),new t("\u043d\u043d\u043e",27,1),new t("\u0435\u0442",-1,1),new t("\u0443\u0435\u0442",30,2),new t("\u0438\u0442",-1,2),new t("\u044b\u0442",-1,2),new t("\u044e\u0442",-1,1),new t("\u0443\u044e\u0442",34,2),new t("\u044f\u0442",-1,2),new t("\u043d\u044b",-1,1),new t("\u0435\u043d\u044b",37,2),new t("\u0442\u044c",-1,1),new t("\u0438\u0442\u044c",39,2),new t("\u044b\u0442\u044c",39,2),new t("\u0435\u0448\u044c",-1,1),new t("\u0438\u0448\u044c",-1,2),new t("\u044e",-1,2),new t("\u0443\u044e",44,2)],u=[new t("\u0430",-1,1),new t("\u0435\u0432",-1,1),new t("\u043e\u0432",-1,1),new t("\u0435",-1,1),new t("\u0438\u0435",3,1),new t("\u044c\u0435",3,1),new t("\u0438",-1,1),new t("\u0435\u0438",6,1),new t("\u0438\u0438",6,1),new t("\u0430\u043c\u0438",6,1),new t("\u044f\u043c\u0438",6,1),new t("\u0438\u044f\u043c\u0438",10,1),new t("\u0439",-1,1),new t("\u0435\u0439",12,1),new t("\u0438\u0435\u0439",13,1),new t("\u0438\u0439",12,1),new t("\u043e\u0439",12,1),new t("\u0430\u043c",-1,1),new t("\u0435\u043c",-1,1),new t("\u0438\u0435\u043c",18,1),new t("\u043e\u043c",-1,1),new t("\u044f\u043c",-1,1),new t("\u0438\u044f\u043c",21,1),new t("\u043e",-1,1),new t("\u0443",-1,1),new t("\u0430\u0445",-1,1),new t("\u044f\u0445",-1,1),new t("\u0438\u044f\u0445",26,1),new t("\u044b",-1,1),new t("\u044c",-1,1),new t("\u044e",-1,1),new t("\u0438\u044e",30,1),new t("\u044c\u044e",30,1),new t("\u044f",-1,1),new t("\u0438\u044f",33,1),new t("\u044c\u044f",33,1)],a=[new t("\u043e\u0441\u0442",-1,1),new t("\u043e\u0441\u0442\u044c",-1,1)],f=[new t("\u0435\u0439\u0448\u0435",-1,1),new t("\u043d",-1,2),new t("\u0435\u0439\u0448",-1,1),new t("\u044c",-1,3)],l=[33,65,8,232],c,h,p=new n;this.stem=function(){var e,t,n,r,i,s,o,u,a,f;e=p.cursor;e:do if(!d())break e;while(!1);p.cursor=e,p.limit_backward=p.cursor,p.cursor=p.limit,t=p.limit-p.cursor;if(p.cursor<h)return!1;p.cursor=h,n=p.limit_backward,p.limit_backward=p.cursor,p.cursor=p.limit-t,r=p.limit-p.cursor;t:do n:do{i=p.limit-p.cursor;r:do{if(!m())break r;break n}while(!1);p.cursor=p.limit-i,s=p.limit-p.cursor;i:do if(!b()){p.cursor=p.limit-s;break i}while(!1);s:do{o=p.limit-p.cursor;o:do{if(!y())break o;break s}while(!1);p.cursor=p.limit-o;u:do{if(!w())break u;break s}while(!1);p.cursor=p.limit-o;if(!E())break t}while(!1)}while(!1);while(!1);p.cursor=p.limit-r,u=p.limit-p.cursor;a:do{p.ket=p.cursor;if(!p.eq_s_b(1,"\u0438")){p.cursor=p.limit-u;break a}p.bra=p.cursor,p.slice_del()}while(!1);a=p.limit-p.cursor;f:do if(!S())break f;while(!1);p.cursor=p.limit-a,f=p.limit-p.cursor;l:do if(!x())break l;while(!1);return p.cursor=p.limit-f,p.limit_backward=n,p.cursor=p.limit_backward,!0},this.setCurrent=function(e){p.setCurrent(e)},this.getCurrent=function(){return p.getCurrent()}},spanishStemmer:function(){function g(){var e,t,n,r,i;v=m.limit,d=m.limit,p=m.limit,e=m.cursor;e:do{t:do{t=m.cursor;n:do{if(!m.in_grouping(h,97,252))break n;r:do{n=m.cursor;i:do{if(!m.out_grouping(h,97,252))break i;s:for(;;){o:do{if(!m.in_grouping(h,97,252))break o;break s}while(!1);if(m.cursor>=m.limit)break i;m.cursor++}break r}while(!1);m.cursor=n;if(!m.in_grouping(h,97,252))break n;u:for(;;){a:do{if(!m.out_grouping(h,97,252))break a;break u}while(!1);if(m.cursor>=m.limit)break n;m.cursor++}}while(!1);break t}while(!1);m.cursor=t;if(!m.out_grouping(h,97,252))break e;f:do{r=m.cursor;l:do{if(!m.out_grouping(h,97,252))break l;c:for(;;){h:do{if(!m.in_grouping(h,97,252))break h;break c}while(!1);if(m.cursor>=m.limit)break l;m.cursor++}break f}while(!1);m.
cursor=r;if(!m.in_grouping(h,97,252))break e;if(m.cursor>=m.limit)break e;m.cursor++}while(!1)}while(!1);v=m.cursor}while(!1);m.cursor=e,i=m.cursor;p:do{d:for(;;){v:do{if(!m.in_grouping(h,97,252))break v;break d}while(!1);if(m.cursor>=m.limit)break p;m.cursor++}m:for(;;){g:do{if(!m.out_grouping(h,97,252))break g;break m}while(!1);if(m.cursor>=m.limit)break p;m.cursor++}d=m.cursor;y:for(;;){b:do{if(!m.in_grouping(h,97,252))break b;break y}while(!1);if(m.cursor>=m.limit)break p;m.cursor++}w:for(;;){E:do{if(!m.out_grouping(h,97,252))break E;break w}while(!1);if(m.cursor>=m.limit)break p;m.cursor++}p=m.cursor}while(!1);return m.cursor=i,!0}function y(){var t,n;e:for(;;){n=m.cursor;t:do{m.bra=m.cursor,t=m.find_among(e,6);if(t==0)break t;m.ket=m.cursor;switch(t){case 0:break t;case 1:m.slice_from("a");break;case 2:m.slice_from("e");break;case 3:m.slice_from("i");break;case 4:m.slice_from("o");break;case 5:m.slice_from("u");break;case 6:if(m.cursor>=m.limit)break t;m.cursor++}continue e}while(!1);m.cursor=n;break e}return!0}function b(){return v<=m.cursor?!0:!1}function w(){return d<=m.cursor?!0:!1}function E(){return p<=m.cursor?!0:!1}function S(){var e;m.ket=m.cursor;if(m.find_among_b(r,13)==0)return!1;m.bra=m.cursor,e=m.find_among_b(i,11);if(e==0)return!1;if(!b())return!1;switch(e){case 0:return!1;case 1:m.bra=m.cursor,m.slice_from("iendo");break;case 2:m.bra=m.cursor,m.slice_from("ando");break;case 3:m.bra=m.cursor,m.slice_from("ar");break;case 4:m.bra=m.cursor,m.slice_from("er");break;case 5:m.bra=m.cursor,m.slice_from("ir");break;case 6:m.slice_del();break;case 7:if(!m.eq_s_b(1,"u"))return!1;m.slice_del()}return!0}function x(){var e,t,n,r,i,f;m.ket=m.cursor,e=m.find_among_b(a,46);if(e==0)return!1;m.bra=m.cursor;switch(e){case 0:return!1;case 1:if(!E())return!1;m.slice_del();break;case 2:if(!E())return!1;m.slice_del(),t=m.limit-m.cursor;e:do{m.ket=m.cursor;if(!m.eq_s_b(2,"ic")){m.cursor=m.limit-t;break e}m.bra=m.cursor;if(!E()){m.cursor=m.limit-t;break e}m.slice_del()}while(!1);break;case 3:if(!E())return!1;m.slice_from("log");break;case 4:if(!E())return!1;m.slice_from("u");break;case 5:if(!E())return!1;m.slice_from("ente");break;case 6:if(!w())return!1;m.slice_del(),n=m.limit-m.cursor;t:do{m.ket=m.cursor,e=m.find_among_b(s,4);if(e==0){m.cursor=m.limit-n;break t}m.bra=m.cursor;if(!E()){m.cursor=m.limit-n;break t}m.slice_del();switch(e){case 0:m.cursor=m.limit-n;break t;case 1:m.ket=m.cursor;if(!m.eq_s_b(2,"at")){m.cursor=m.limit-n;break t}m.bra=m.cursor;if(!E()){m.cursor=m.limit-n;break t}m.slice_del()}}while(!1);break;case 7:if(!E())return!1;m.slice_del(),r=m.limit-m.cursor;n:do{m.ket=m.cursor,e=m.find_among_b(o,3);if(e==0){m.cursor=m.limit-r;break n}m.bra=m.cursor;switch(e){case 0:m.cursor=m.limit-r;break n;case 1:if(!E()){m.cursor=m.limit-r;break n}m.slice_del()}}while(!1);break;case 8:if(!E())return!1;m.slice_del(),i=m.limit-m.cursor;r:do{m.ket=m.cursor,e=m.find_among_b(u,3);if(e==0){m.cursor=m.limit-i;break r}m.bra=m.cursor;switch(e){case 0:m.cursor=m.limit-i;break r;case 1:if(!E()){m.cursor=m.limit-i;break r}m.slice_del()}}while(!1);break;case 9:if(!E())return!1;m.slice_del(),f=m.limit-m.cursor;i:do{m.ket=m.cursor;if(!m.eq_s_b(2,"at")){m.cursor=m.limit-f;break i}m.bra=m.cursor;if(!E()){m.cursor=m.limit-f;break i}m.slice_del()}while(!1)}return!0}function T(){var e,t,n;t=m.limit-m.cursor;if(m.cursor<v)return!1;m.cursor=v,n=m.limit_backward,m.limit_backward=m.cursor,m.cursor=m.limit-t,m.ket=m.cursor,e=m.find_among_b(f,12);if(e==0)return m.limit_backward=n,!1;m.bra=m.cursor,m.limit_backward=n;switch(e){case 0:return!1;case 1:if(!m.eq_s_b(1,"u"))return!1;m.slice_del()}return!0}function N(){var e,t,n,r,i;t=m.limit-m.cursor;if(m.cursor<v)return!1;m.cursor=v,n=m.limit_backward,m.limit_backward=m.cursor,m.cursor=m.limit-t,m.ket=m.cursor,e=m.find_among_b(l,96);if(e==0)return m.limit_backward=n,!1;m.bra=m.cursor,m.limit_backward=n;switch(e){case 0:return!1;case 1:r=m.limit-m.cursor;e:do{if(!m.eq_s_b(1,"u")){m.cursor=m.limit-r;break e}i=m.limit-m.cursor;if(!m.eq_s_b(1,"g")){m.cursor=m.limit-r;break e}m.cursor=m.limit-i}while(!1);m.bra=m.cursor,m.slice_del();break;case 2:m.slice_del()}return!0}function C(){var e,t,n;m.ket=m.cursor,e=m.find_among_b(c,8);if(e==0)return!1;m.bra=m.cursor;switch(e){case 0:return!1;case 1:if(!b())return!1;m.slice_del();break;case 2:if(!b())return!1;m.slice_del(),t=m.limit-m.cursor;e:do{m.ket=m.cursor;if(!m.eq_s_b(1,"u")){m.cursor=m.limit-t;break e}m.bra=m.cursor,n=m.limit-m.cursor;if(!m.eq_s_b(1,"g")){m.cursor=m.limit-t;break e}m.cursor=m.limit-n;if(!b()){m.cursor=m.limit-t;break e}m.slice_del()}while(!1)}return!0}var e=[new t("",-1,6),new t("\u00e1",0,1),new t("\u00e9",0,2),new t("\u00ed",0,3),new t("\u00f3",0,4),new t("\u00fa",0,5)],r=[new t("la",-1,-1),new t("sela",0,-1),new t("le",-1,-1),new t("me",-1,-1),new t("se",-1,-1),new t("lo",-1,-1),new t("selo",5,-1),new t("las",-1,-1),new t("selas",7,-1),new t("les",-1,-1),new t("los",-1,-1),new t("selos",10,-1),new t("nos",-1,-1)],i=[new t("ando",-1,6),new t("iendo",-1,6),new t("yendo",-1,7),new t("\u00e1ndo",-1,2),new t("i\u00e9ndo",-1,1),new t("ar",-1,6),new t("er",-1,6),new t("ir",-1,6),new t("\u00e1r",-1,3),new t("\u00e9r",-1,4),new t("\u00edr",-1,5)],s=[new t("ic",-1,-1),new t("ad",-1,-1),new t("os",-1,-1),new t("iv",-1,1)],o=[new t("able",-1,1),new t("ible",-1,1),new t("ante",-1,1)],u=[new t("ic",-1,1),new t("abil",-1,1),new t("iv",-1,1)],a=[new t("ica",-1,1),new t("ancia",-1,2),new t("encia",-1,5),new t("adora",-1,2),new t("osa",-1,1),new t("ista",-1,1),new t("iva",-1,9),new t("anza",-1,1),new t("log\u00eda",-1,3),new t("idad",-1,8),new t("able",-1,1),new t("ible",-1,1),new t("ante",-1,2),new t("mente",-1,7),new t("amente",13,6),new t("aci\u00f3n",-1,2),new t("uci\u00f3n",-1,4),new t("ico",-1,1),new t("ismo",-1,1),new t("oso",-1,1),new t("amiento",-1,1),new t("imiento",-1,1),new t("ivo",-1,9),new t("ador",-1,2),new t("icas",-1,1),new t("ancias",-1,2),new t("encias",-1,5),new t("adoras",-1,2),new t("osas",-1,1),new 
t("istas",-1,1),new t("ivas",-1,9),new t("anzas",-1,1),new t("log\u00edas",-1,3),new t("idades",-1,8),new t("ables",-1,1),new t("ibles",-1,1),new t("aciones",-1,2),new t("uciones",-1,4),new t("adores",-1,2),new t("antes",-1,2),new t("icos",-1,1),new t("ismos",-1,1),new t("osos",-1,1),new t("amientos",-1,1),new t("imientos",-1,1),new t("ivos",-1,9)],f=[new t("ya",-1,1),new t("ye",-1,1),new t("yan",-1,1),new t("yen",-1,1),new t("yeron",-1,1),new t("yendo",-1,1),new t("yo",-1,1),new t("yas",-1,1),new t("yes",-1,1),new t("yais",-1,1),new t("yamos",-1,1),new t("y\u00f3",-1,1)],l=[new t("aba",-1,2),new t("ada",-1,2),new t("ida",-1,2),new t("ara",-1,2),new t("iera",-1,2),new t("\u00eda",-1,2),new t("ar\u00eda",5,2),new t("er\u00eda",5,2),new t("ir\u00eda",5,2),new t("ad",-1,2),new t("ed",-1,2),new t("id",-1,2),new t("ase",-1,2),new t("iese",-1,2),new t("aste",-1,2),new t("iste",-1,2),new t("an",-1,2),new t("aban",16,2),new t("aran",16,2),new t("ieran",16,2),new t("\u00edan",16,2),new t("ar\u00edan",20,2),new t("er\u00edan",20,2),new t("ir\u00edan",20,2),new t("en",-1,1),new t("asen",24,2),new t("iesen",24,2),new t("aron",-1,2),new t("ieron",-1,2),new t("ar\u00e1n",-1,2),new t("er\u00e1n",-1,2),new t("ir\u00e1n",-1,2),new t("ado",-1,2),new t("ido",-1,2),new t("ando",-1,2),new t("iendo",-1,2),new t("ar",-1,2),new t("er",-1,2),new t("ir",-1,2),new t("as",-1,2),new t("abas",39,2),new t("adas",39,2),new t("idas",39,2),new t("aras",39,2),new t("ieras",39,2),new t("\u00edas",39,2),new t("ar\u00edas",45,2),new t("er\u00edas",45,2),new t("ir\u00edas",45,2),new t("es",-1,1),new t("ases",49,2),new t("ieses",49,2),new t("abais",-1,2),new t("arais",-1,2),new t("ierais",-1,2),new t("\u00edais",-1,2),new t("ar\u00edais",55,2),new t("er\u00edais",55,2),new t("ir\u00edais",55,2),new t("aseis",-1,2),new t("ieseis",-1,2),new t("asteis",-1,2),new t("isteis",-1,2),new t("\u00e1is",-1,2),new t("\u00e9is",-1,1),new t("ar\u00e9is",64,2),new t("er\u00e9is",64,2),new t("ir\u00e9is",64,2),new t("ados",-1,2),new t("idos",-1,2),new t("amos",-1,2),new t("\u00e1bamos",70,2),new t("\u00e1ramos",70,2),new t("i\u00e9ramos",70,2),new t("\u00edamos",70,2),new t("ar\u00edamos",74,2),new t("er\u00edamos",74,2),new t("ir\u00edamos",74,2),new t("emos",-1,1),new t("aremos",78,2),new t("eremos",78,2),new t("iremos",78,2),new t("\u00e1semos",78,2),new t("i\u00e9semos",78,2),new t("imos",-1,2),new t("ar\u00e1s",-1,2),new t("er\u00e1s",-1,2),new t("ir\u00e1s",-1,2),new t("\u00eds",-1,2),new t("ar\u00e1",-1,2),new t("er\u00e1",-1,2),new t("ir\u00e1",-1,2),new t("ar\u00e9",-1,2),new t("er\u00e9",-1,2),new t("ir\u00e9",-1,2),new t("i\u00f3",-1,2)],c=[new t("a",-1,1),new t("e",-1,2),new t("o",-1,1),new t("os",-1,1),new t("\u00e1",-1,1),new t("\u00e9",-1,2),new t("\u00ed",-1,1),new t("\u00f3",-1,1)],h=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,0,1,17,4,10],p,d,v,m=new n;this.stem=function(){var e,t,n,r,i,s;e=m.cursor;e:do if(!g())break e;while(!1);m.cursor=e,m.limit_backward=m.cursor,m.cursor=m.limit,t=m.limit-m.cursor;t:do if(!S())break t;while(!1);m.cursor=m.limit-t,n=m.limit-m.cursor;n:do r:do{r=m.limit-m.cursor;i:do{if(!x())break i;break r}while(!1);m.cursor=m.limit-r;s:do{if(!T())break s;break r}while(!1);m.cursor=m.limit-r;if(!N())break n}while(!1);while(!1);m.cursor=m.limit-n,i=m.limit-m.cursor;o:do if(!C())break o;while(!1);m.cursor=m.limit-i,m.cursor=m.limit_backward,s=m.cursor;u:do if(!y())break u;while(!1);return m.cursor=s,!0},this.setCurrent=function(e){m.setCurrent(e)},this.getCurrent=function(){return m.getCurrent()}},sloveneStemmer:function(){var e=[new t("anski",-1,1),new t("evski",-1,1),new t("ovski",-1,1)],r=[new t("stvo",-1,1),new t("\u0161tvo",-1,1)],i=[new t("ega",-1,1),new t("ija",-1,1),new t("ila",-1,1),new t("ema",-1,1),new t("vna",-1,1),new t("ite",-1,1),new t("ste",-1,1),new t("\u0161\u010de",-1,1),new t("ski",-1,1),new t("\u0161ki",-1,1),new t("iti",-1,1),new t("ovi",-1,1),new t("\u010dek",-1,1),new t("ovm",-1,1),new t("\u010dan",-1,1),new t("len",-1,1),new t("ven",-1,1),new t("\u0161en",-1,1),new t("ejo",-1,1),new t("ijo",-1,1),new t("ast",-1,1),new t("ost",-1,1)],s=[new t("ja",-1,1),new t("ka",-1,1),new t("ma",-1,1),new t("ec",-1,1),new t("je",-1,1),new t("eg",-1,1),new t("eh",-1,1),new t("ih",-1,1),new t("mi",-1,1),new t("ti",-1,1),new t("ij",-1,1),new t("al",-1,1),new t("il",-1,1),new t("em",-1,1),new t("om",-1,1),new t("an",-1,1),new t("en",-1,1),new t("in",-1,1),new t("do",-1,1),new t("jo",-1,1),new t("ir",-1,1),new t("at",-1,1),new t("ev",-1,1),new t("iv",-1,1),new t("ov",-1,1),new t("o\u010d",-1,1)],o=[new t("a",-1,1),new t("c",-1,1),new t("e",-1,1),new t("i",-1,1),new t("m",-1,1),new t("o",-1,1),new t("u",-1,1),new t("\u0161",-1,1)],u=[new t("a",-1,1),new t("e",-1,1),new t("i",-1,1),new t("o",-1,1),new t("u",-1,1)],a=[255,255,62,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,0,0,0,0,0,0,0,0,0,0,1,0,0,32],f=[17,65,16],l=[119,95,23,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,128,0,0,0,16],c,h=new n;this.stem=function(){var t,n,a,f,p,d,v,m,g,y,b;c=h.limit,h.limit_backward=h.cursor,h.cursor=h.limit,n=h.limit-h.cursor;do for(a=4;a>0;a--){f=h.limit-h.cursor;e:do{if(!(c>8)){h.cursor=h.limit-f;break e}h.ket=h.cursor,t=h.find_among_b(e,3);if(t==0){h.cursor=h.limit-f;break e}h.bra=h.cursor;switch(t){case 0:h.cursor=h.limit-f;break e;case 1:h.slice_del()}}while(!1);p=h.limit-h.cursor;t:do{if(!(c>7)){h.cursor=h.limit-p;break t}h.ket=h.cursor,t=h.find_among_b(r,2);if(t==0){h.cursor=h.limit-p;break t}h.bra=h.cursor;switch(t){case 0:h.cursor=h.limit-p;break t;case 1:h.slice_del()}}while(!1);c=h.get_size_of_p(),d=h.limit-h.cursor;n:do{if(!(c>6)){h.cursor=h.limit-d;break n}h.ket=h.cursor,t=h.find_among_b(i,22);if(t==0){h.cursor=h.limit-d;break n}h.bra=h.cursor;switch(t){case 0:h.cursor=h.limit-d;break n;case 1:h.slice_del()}}while(!1);c=h.get_size_of_p(),v=h.limit-h.cursor;r:do{if(!(c>6)){h.cursor=h.limit-v;break r}h.ket=h.cursor,t=h.find_among_b(s,26);if(t==0){h.cursor=h.limit-v;break r}h.bra=h.cursor;switch(t){case 0:h.cursor=h
.limit-v;break r;case 1:h.slice_del()}}while(!1);c=h.get_size_of_p(),m=h.limit-h.cursor;i:do{if(!(c>5)){h.cursor=h.limit-m;break i}h.ket=h.cursor,t=h.find_among_b(o,8);if(t==0){h.cursor=h.limit-m;break i}h.bra=h.cursor;switch(t){case 0:h.cursor=h.limit-m;break i;case 1:h.slice_del()}}while(!1);c=h.get_size_of_p(),g=h.limit-h.cursor;s:do{if(!(c>6)){h.cursor=h.limit-g;break s}h.ket=h.cursor;if(!h.in_grouping_b(l,98,382)){h.cursor=h.limit-g;break s}h.bra=h.cursor,y=h.limit-h.cursor;if(!h.in_grouping_b(l,98,382)){h.cursor=h.limit-g;break s}h.cursor=h.limit-y,h.slice_del()}while(!1);c=h.get_size_of_p(),b=h.limit-h.cursor;o:do{if(!(c>5)){h.cursor=h.limit-b;break o}h.ket=h.cursor,t=h.find_among_b(u,5);if(t==0){h.cursor=h.limit-b;break o}h.bra=h.cursor;switch(t){case 0:h.cursor=h.limit-b;break o;case 1:h.slice_del()}}while(!1)}while(!1);return h.cursor=h.limit-n,h.cursor=h.limit_backward,!0},this.setCurrent=function(e){h.setCurrent(e)},this.getCurrent=function(){return h.getCurrent()}},swedishStemmer:function(){function l(){var e,t;a=f.limit,e=f.cursor;var n=f.cursor+3;if(0>n||n>f.limit)return!1;f.cursor=n,u=f.cursor,f.cursor=e;e:for(;;){t=f.cursor;t:do{if(!f.in_grouping(s,97,246))break t;f.cursor=t;break e}while(!1);f.cursor=t;if(f.cursor>=f.limit)return!1;f.cursor++}n:for(;;){r:do{if(!f.out_grouping(s,97,246))break r;break n}while(!1);if(f.cursor>=f.limit)return!1;f.cursor++}a=f.cursor;i:do{if(!(a<u))break i;a=u}while(!1);return!0}function c(){var t,n,r;n=f.limit-f.cursor;if(f.cursor<a)return!1;f.cursor=a,r=f.limit_backward,f.limit_backward=f.cursor,f.cursor=f.limit-n,f.ket=f.cursor,t=f.find_among_b(e,37);if(t==0)return f.limit_backward=r,!1;f.bra=f.cursor,f.limit_backward=r;switch(t){case 0:return!1;case 1:f.slice_del();break;case 2:if(!f.in_grouping_b(o,98,121))return!1;f.slice_del()}return!0}function h(){var e,t,n;return e=f.limit-f.cursor,f.cursor<a?!1:(f.cursor=a,t=f.limit_backward,f.limit_backward=f.cursor,f.cursor=f.limit-e,n=f.limit-f.cursor,f.find_among_b(r,7)==0?(f.limit_backward=t,!1):(f.cursor=f.limit-n,f.ket=f.cursor,f.cursor<=f.limit_backward?(f.limit_backward=t,!1):(f.cursor--,f.bra=f.cursor,f.slice_del(),f.limit_backward=t,!0)))}function p(){var e,t,n;t=f.limit-f.cursor;if(f.cursor<a)return!1;f.cursor=a,n=f.limit_backward,f.limit_backward=f.cursor,f.cursor=f.limit-t,f.ket=f.cursor,e=f.find_among_b(i,5);if(e==0)return f.limit_backward=n,!1;f.bra=f.cursor;switch(e){case 0:return f.limit_backward=n,!1;case 1:f.slice_del();break;case 2:f.slice_from("l\u00f6s");break;case 3:f.slice_from("full")}return f.limit_backward=n,!0}var e=[new t("a",-1,1),new t("arna",0,1),new t("erna",0,1),new t("heterna",2,1),new t("orna",0,1),new t("ad",-1,1),new t("e",-1,1),new t("ade",6,1),new t("ande",6,1),new t("arne",6,1),new t("are",6,1),new t("aste",6,1),new t("en",-1,1),new t("anden",12,1),new t("aren",12,1),new t("heten",12,1),new t("ern",-1,1),new t("ar",-1,1),new t("er",-1,1),new t("heter",18,1),new t("or",-1,1),new t("s",-1,2),new t("as",21,1),new t("arnas",22,1),new t("ernas",22,1),new t("ornas",22,1),new t("es",21,1),new t("ades",26,1),new t("andes",26,1),new t("ens",21,1),new t("arens",29,1),new t("hetens",29,1),new t("erns",21,1),new t("at",-1,1),new t("andet",-1,1),new t("het",-1,1),new t("ast",-1,1)],r=[new t("dd",-1,-1),new t("gd",-1,-1),new t("nn",-1,-1),new t("dt",-1,-1),new t("gt",-1,-1),new t("kt",-1,-1),new t("tt",-1,-1)],i=[new t("ig",-1,1),new t("lig",0,1),new t("els",-1,1),new t("fullt",-1,3),new t("l\u00f6st",-1,2)],s=[17,65,16,1,0,0,0,0,0,0,0,0,0,0,0,0,24,0,32],o=[119,127,149],u,a,f=new n;this.stem=function(){var e,t,n,r;e=f.cursor;e:do if(!l())break e;while(!1);f.cursor=e,f.limit_backward=f.cursor,f.cursor=f.limit,t=f.limit-f.cursor;t:do if(!c())break t;while(!1);f.cursor=f.limit-t,n=f.limit-f.cursor;n:do if(!h())break n;while(!1);f.cursor=f.limit-n,r=f.limit-f.cursor;r:do if(!p())break r;while(!1);return f.cursor=f.limit-r,f.cursor=f.limit_backward,!0},this.setCurrent=function(e){f.setCurrent(e)},this.getCurrent=function(){return f.getCurrent()}},turkishStemmer:function(){function j(){var e,t,n,r,i,s,o,u,a,f,l;e=B.limit-B.cursor;e:for(;;){t=B.limit-B.cursor;t:do{if(!B.in_grouping_b(C,97,305))break t;B.cursor=B.limit-t;break e}while(!1);B.cursor=B.limit-t;if(B.cursor<=B.limit_backward)return!1;B.cursor--}n:do{n=B.limit-B.cursor;r:do{if(!B.eq_s_b(1,"a"))break r;i:for(;;){r=B.limit-B.cursor;s:do{if(!B.in_grouping_b(L,97,305))break s;B.cursor=B.limit-r;break i}while(!1);B.cursor=B.limit-r;if(B.cursor<=B.limit_backward)break r;B.cursor--}break n}while(!1);B.cursor=B.limit-n;o:do{if(!B.eq_s_b(1,"e"))break o;u:for(;;){i=B.limit-B.cursor;a:do{if(!B.in_grouping_b(A,101,252))break a;B.cursor=B.limit-i;break u}while(!1);B.cursor=B.limit-i;if(B.cursor<=B.limit_backward)break o;B.cursor--}break n}while(!1);B.cursor=B.limit-n;f:do{if(!B.eq_s_b(1,"\u0131"))break f;l:for(;;){s=B.limit-B.cursor;c:do{if(!B.in_grouping_b(O,97,305))break c;B.cursor=B.limit-s;break l}while(!1);B.cursor=B.limit-s;if(B.cursor<=B.limit_backward)break f;B.cursor--}break n}while(!1);B.cursor=B.limit-n;h:do{if(!B.eq_s_b(1,"i"))break h;p:for(;;){o=B.limit-B.cursor;d:do{if(!B.in_grouping_b(M,101,105))break d;B.cursor=B.limit-o;break p}while(!1);B.cursor=B.limit-o;if(B.cursor<=B.limit_backward)break h;B.cursor--}break n}while(!1);B.cursor=B.limit-n;v:do{if(!B.eq_s_b(1,"o"))break v;m:for(;;){u=B.limit-B.cursor;g:do{if(!B.in_grouping_b(_,111,117))break g;B.cursor=B.limit-u;break m}while(!1);B.cursor=B.limit-u;if(B.cursor<=B.limit_backward)break v;B.cursor--}break n}while(!1);B.cursor=B.limit-n;y:do{if(!B.eq_s_b(1,"\u00f6"))break y;b:for(;;){a=B.limit-B.cursor;w:do{if(!B.in_grouping_b(D,246,252))break w;B.cursor=B.limit-a;break b}while(!1);B.cursor=B.limit-a;if(B.cursor<=B.limit_backward)break y;B.cursor--}break n}while(!1);B.cursor=B.limit-n;E:do{if(!B.eq_s_b(1,"u"))break E;S:for(;;){f=B.limit-B.cursor;x:do{if(!B.in_grouping_b(_,111,117))break x;B.cursor=B.limit-f;break S}while(!1);B.cursor=B.limit-f;if(B.cursor<=B.limit_backward
)break E;B.cursor--}break n}while(!1);B.cursor=B.limit-n;if(!B.eq_s_b(1,"\u00fc"))return!1;T:for(;;){l=B.limit-B.cursor;N:do{if(!B.in_grouping_b(D,246,252))break N;B.cursor=B.limit-l;break T}while(!1);B.cursor=B.limit-l;if(B.cursor<=B.limit_backward)return!1;B.cursor--}}while(!1);return B.cursor=B.limit-e,!0}function F(){var e,t,n,r,i,s,o;e:do{e=B.limit-B.cursor;t:do{t=B.limit-B.cursor;if(!B.eq_s_b(1,"n"))break t;B.cursor=B.limit-t;if(B.cursor<=B.limit_backward)break t;B.cursor--,n=B.limit-B.cursor;if(!B.in_grouping_b(C,97,305))break t;B.cursor=B.limit-n;break e}while(!1);B.cursor=B.limit-e,r=B.limit-B.cursor;n:do{i=B.limit-B.cursor;if(!B.eq_s_b(1,"n"))break n;return B.cursor=B.limit-i,!1}while(!1);B.cursor=B.limit-r,s=B.limit-B.cursor;if(B.cursor<=B.limit_backward)return!1;B.cursor--,o=B.limit-B.cursor;if(!B.in_grouping_b(C,97,305))return!1;B.cursor=B.limit-o,B.cursor=B.limit-s}while(!1);return!0}function I(){var e,t,n,r,i,s,o;e:do{e=B.limit-B.cursor;t:do{t=B.limit-B.cursor;if(!B.eq_s_b(1,"s"))break t;B.cursor=B.limit-t;if(B.cursor<=B.limit_backward)break t;B.cursor--,n=B.limit-B.cursor;if(!B.in_grouping_b(C,97,305))break t;B.cursor=B.limit-n;break e}while(!1);B.cursor=B.limit-e,r=B.limit-B.cursor;n:do{i=B.limit-B.cursor;if(!B.eq_s_b(1,"s"))break n;return B.cursor=B.limit-i,!1}while(!1);B.cursor=B.limit-r,s=B.limit-B.cursor;if(B.cursor<=B.limit_backward)return!1;B.cursor--,o=B.limit-B.cursor;if(!B.in_grouping_b(C,97,305))return!1;B.cursor=B.limit-o,B.cursor=B.limit-s}while(!1);return!0}function q(){var e,t,n,r,i,s,o;e:do{e=B.limit-B.cursor;t:do{t=B.limit-B.cursor;if(!B.eq_s_b(1,"y"))break t;B.cursor=B.limit-t;if(B.cursor<=B.limit_backward)break t;B.cursor--,n=B.limit-B.cursor;if(!B.in_grouping_b(C,97,305))break t;B.cursor=B.limit-n;break e}while(!1);B.cursor=B.limit-e,r=B.limit-B.cursor;n:do{i=B.limit-B.cursor;if(!B.eq_s_b(1,"y"))break n;return B.cursor=B.limit-i,!1}while(!1);B.cursor=B.limit-r,s=B.limit-B.cursor;if(B.cursor<=B.limit_backward)return!1;B.cursor--,o=B.limit-B.cursor;if(!B.in_grouping_b(C,97,305))return!1;B.cursor=B.limit-o,B.cursor=B.limit-s}while(!1);return!0}function R(){var e,t,n,r,i,s,o;e:do{e=B.limit-B.cursor;t:do{t=B.limit-B.cursor;if(!B.in_grouping_b(k,105,305))break t;B.cursor=B.limit-t;if(B.cursor<=B.limit_backward)break t;B.cursor--,n=B.limit-B.cursor;if(!B.out_grouping_b(C,97,305))break t;B.cursor=B.limit-n;break e}while(!1);B.cursor=B.limit-e,r=B.limit-B.cursor;n:do{i=B.limit-B.cursor;if(!B.in_grouping_b(k,105,305))break n;return B.cursor=B.limit-i,!1}while(!1);B.cursor=B.limit-r,s=B.limit-B.cursor;if(B.cursor<=B.limit_backward)return!1;B.cursor--,o=B.limit-B.cursor;if(!B.out_grouping_b(C,97,305))return!1;B.cursor=B.limit-o,B.cursor=B.limit-s}while(!1);return!0}function U(){return B.find_among_b(e,10)==0?!1:R()?!0:!1}function z(){return j()?B.in_grouping_b(k,105,305)?I()?!0:!1:!1:!1}function W(){return B.find_among_b(r,2)==0?!1:!0}function X(){return j()?B.in_grouping_b(k,105,305)?q()?!0:!1:!1:!1}function V(){return j()?B.find_among_b(i,4)==0?!1:!0:!1}function $(){return j()?B.find_among_b(s,4)==0?!1:F()?!0:!1:!1}function J(){return j()?B.find_among_b(o,2)==0?!1:q()?!0:!1:!1}function K(){return j()?B.find_among_b(u,2)==0?!1:!0:!1}function Q(){return j()?B.find_among_b(a,4)==0?!1:!0:!1}function G(){return j()?B.find_among_b(f,2)==0?!1:!0:!1}function Y(){return j()?B.find_among_b(l,4)==0?!1:!0:!1}function Z(){return j()?B.find_among_b(c,2)==0?!1:!0:!1}function et(){return j()?B.find_among_b(h,2)==0?!1:q()?!0:!1:!1}function tt(){return B.eq_s_b(2,"ki")?!0:!1}function nt(){return j()?B.find_among_b(p,2)==0?!1:F()?!0:!1:!1}function rt(){return j()?B.find_among_b(d,4)==0?!1:q()?!0:!1:!1}function it(){return j()?B.find_among_b(v,4)==0?!1:!0:!1}function st(){return j()?B.find_among_b(m,4)==0?!1:q()?!0:!1:!1}function ot(){return B.find_among_b(g,4)==0?!1:!0}function ut(){return j()?B.find_among_b(y,2)==0?!1:!0:!1}function at(){return j()?B.find_among_b(b,4)==0?!1:!0:!1}function ft(){return j()?B.find_among_b(w,8)==0?!1:!0:!1}function lt(){return B.find_among_b(E,2)==0?!1:!0}function ct(){return j()?B.find_among_b(S,32)==0?!1:q()?!0:!1:!1}function ht(){return B.find_among_b(x,8)==0?!1:q()?!0:!1}function pt(){return j()?B.find_among_b(T,4)==0?!1:q()?!0:!1:!1}function dt(){return B.eq_s_b(3,"ken")?q()?!0:!1:!1}function vt(){var e,t,n,r,i,s,o,u,a,f;B.ket=B.cursor,P=!0;e:do{e=B.limit-B.cursor;t:do{n:do{t=B.limit-B.cursor;r:do{if(!pt())break r;break n}while(!1);B.cursor=B.limit-t;i:do{if(!ct())break i;break n}while(!1);B.cursor=B.limit-t;s:do{if(!ht())break s;break n}while(!1);B.cursor=B.limit-t;if(!dt())break t}while(!1);break e}while(!1);B.cursor=B.limit-e;o:do{if(!lt())break o;u:do{n=B.limit-B.cursor;a:do{if(!ot())break a;break u}while(!1);B.cursor=B.limit-n;f:do{if(!ut())break f;break u}while(!1);B.cursor=B.limit-n;l:do{if(!rt())break l;break u}while(!1);B.cursor=B.limit-n;c:do{if(!it())break c;break u}while(!1);B.cursor=B.limit-n;h:do{if(!st())break h;break u}while(!1);B.cursor=B.limit-n}while(!1);if(!pt())break o;break e}while(!1);B.cursor=B.limit-e;p:do{if(!ut())break p;B.bra=B.cursor,B.slice_del(),r=B.limit-B.cursor;d:do{B.ket=B.cursor;v:do{i=B.limit-B.cursor;m:do{if(!ft())break m;break v}while(!1);B.cursor=B.limit-i;g:do{if(!ct())break g;break v}while(!1);B.cursor=B.limit-i;y:do{if(!ht())break y;break v}while(!1);B.cursor=B.limit-i;if(!pt()){B.cursor=B.limit-r;break d}}while(!1)}while(!1);P=!1;break e}while(!1);B.cursor=B.limit-e;b:do{if(!at())break b;w:do{s=B.limit-B.cursor;E:do{if(!ct())break E;break w}while(!1);B.cursor=B.limit-s;if(!ht())break b}while(!1);break e}while(!1);B.cursor=B.limit-e;S:do{x:do{o=B.limit-B.cursor;T:do{if(!ot())break T;break x}while(!1);B.cursor=B.limit-o;N:do{if(!st())break N;break x}while(!1);B.cursor=B.limit-o;C:do{if(!it())break C;break x}while(!1);B.cursor=B.limit-o;if(!rt())break S}while(!1);B.bra=B.cursor,B.slice_del(),u=B.limit-B.cursor;k:do{B.ket=B.cursor;if(!pt()){B.cursor=B.limit-u;break k}}while(!1);break e}while(!1);B.cursor=B.
limit-e;if(!ft())return!1;B.bra=B.cursor,B.slice_del(),a=B.limit-B.cursor;L:do{B.ket=B.cursor;A:do{f=B.limit-B.cursor;O:do{if(!ot())break O;break A}while(!1);B.cursor=B.limit-f;M:do{if(!ut())break M;break A}while(!1);B.cursor=B.limit-f;_:do{if(!rt())break _;break A}while(!1);B.cursor=B.limit-f;D:do{if(!it())break D;break A}while(!1);B.cursor=B.limit-f;P:do{if(!st())break P;break A}while(!1);B.cursor=B.limit-f}while(!1);if(!pt()){B.cursor=B.limit-a;break L}}while(!1)}while(!1);return B.bra=B.cursor,B.slice_del(),!0}function mt(){var e,t,n,r,i,s,o,u,a,f,l;B.ket=B.cursor;if(!tt())return!1;e:do{e=B.limit-B.cursor;t:do{if(!Q())break t;B.bra=B.cursor,B.slice_del(),t=B.limit-B.cursor;n:do{B.ket=B.cursor;r:do{n=B.limit-B.cursor;i:do{if(!ut())break i;B.bra=B.cursor,B.slice_del(),r=B.limit-B.cursor;s:do if(!mt()){B.cursor=B.limit-r;break s}while(!1);break r}while(!1);B.cursor=B.limit-n;if(!U()){B.cursor=B.limit-t;break n}B.bra=B.cursor,B.slice_del(),i=B.limit-B.cursor;o:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-i;break o}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-i;break o}}while(!1)}while(!1)}while(!1);break e}while(!1);B.cursor=B.limit-e;u:do{if(!$())break u;B.bra=B.cursor,B.slice_del(),s=B.limit-B.cursor;a:do{B.ket=B.cursor;f:do{o=B.limit-B.cursor;l:do{if(!W())break l;B.bra=B.cursor,B.slice_del();break f}while(!1);B.cursor=B.limit-o;c:do{B.ket=B.cursor;h:do{u=B.limit-B.cursor;p:do{if(!U())break p;break h}while(!1);B.cursor=B.limit-u;if(!z())break c}while(!1);B.bra=B.cursor,B.slice_del(),a=B.limit-B.cursor;d:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-a;break d}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-a;break d}}while(!1);break f}while(!1);B.cursor=B.limit-o;if(!mt()){B.cursor=B.limit-s;break a}}while(!1)}while(!1);break e}while(!1);B.cursor=B.limit-e;if(!G())return!1;v:do{f=B.limit-B.cursor;m:do{if(!W())break m;B.bra=B.cursor,B.slice_del();break v}while(!1);B.cursor=B.limit-f;g:do{if(!z())break g;B.bra=B.cursor,B.slice_del(),l=B.limit-B.cursor;y:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-l;break y}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-l;break y}}while(!1);break v}while(!1);B.cursor=B.limit-f;if(!mt())return!1}while(!1)}while(!1);return!0}function gt(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C;e:do{e=B.limit-B.cursor;t:do{B.ket=B.cursor;if(!ut())break t;B.bra=B.cursor,B.slice_del(),t=B.limit-B.cursor;n:do if(!mt()){B.cursor=B.limit-t;break n}while(!1);break e}while(!1);B.cursor=B.limit-e;r:do{B.ket=B.cursor;if(!nt())break r;B.bra=B.cursor,B.slice_del(),n=B.limit-B.cursor;i:do s:do{r=B.limit-B.cursor;o:do{B.ket=B.cursor;if(!W())break o;B.bra=B.cursor,B.slice_del();break s}while(!1);B.cursor=B.limit-r;u:do{B.ket=B.cursor;a:do{i=B.limit-B.cursor;f:do{if(!U())break f;break a}while(!1);B.cursor=B.limit-i;if(!z())break u}while(!1);B.bra=B.cursor,B.slice_del(),s=B.limit-B.cursor;l:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-s;break l}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-s;break l}}while(!1);break s}while(!1);B.cursor=B.limit-r,B.ket=B.cursor;if(!ut()){B.cursor=B.limit-n;break i}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-n;break i}}while(!1);while(!1);break e}while(!1);B.cursor=B.limit-e;c:do{B.ket=B.cursor;h:do{o=B.limit-B.cursor;p:do{if(!G())break p;break h}while(!1);B.cursor=B.limit-o;if(!K())break c}while(!1);d:do{u=B.limit-B.cursor;v:do{if(!W())break v;B.bra=B.cursor,B.slice_del();break d}while(!1);B.cursor=B.limit-u;m:do{if(!z())break m;B.bra=B.cursor,B.slice_del(),a=B.limit-B.cursor;g:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-a;break g}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-a;break g}}while(!1);break d}while(!1);B.cursor=B.limit-u;if(!mt())break c}while(!1);break e}while(!1);B.cursor=B.limit-e;y:do{B.ket=B.cursor;b:do{f=B.limit-B.cursor;w:do{if(!Z())break w;break b}while(!1);B.cursor=B.limit-f;if(!V())break y}while(!1);E:do{l=B.limit-B.cursor;S:do{if(!z())break S;B.bra=B.cursor,B.slice_del(),c=B.limit-B.cursor;x:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-c;break x}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-c;break x}}while(!1);break E}while(!1);B.cursor=B.limit-l;if(!W())break y}while(!1);break e}while(!1);B.cursor=B.limit-e;T:do{B.ket=B.cursor;if(!Y())break T;B.bra=B.cursor,B.slice_del(),h=B.limit-B.cursor;N:do{B.ket=B.cursor;C:do{p=B.limit-B.cursor;k:do{if(!U())break k;B.bra=B.cursor,B.slice_del(),d=B.limit-B.cursor;L:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-d;break L}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-d;break L}}while(!1);break C}while(!1);B.cursor=B.limit-p;A:do{if(!ut())break A;B.bra=B.cursor,B.slice_del(),v=B.limit-B.cursor;O:do if(!mt()){B.cursor=B.limit-v;break O}while(!1);break C}while(!1);B.cursor=B.limit-p;if(!mt()){B.cursor=B.limit-h;break N}}while(!1)}while(!1);break e}while(!1);B.cursor=B.limit-e;M:do{B.ket=B.cursor;_:do{m=B.limit-B.cursor;D:do{if(!$())break D;break _}while(!1);B.cursor=B.limit-m;if(!et())break M}while(!1);B.bra=B.cursor,B.slice_del(),g=B.limit-B.cursor;P:do H:do{y=B.limit-B.cursor;B:do{B.ket=B.cursor;if(!ut())break B;B.bra=B.cursor,B.slice_del();if(!mt())break B;break H}while(!1);B.cursor=B.limit-y;j:do{B.ket=B.cursor;F:do{b=B.limit-B.cursor;I:do{if(!U())break I;break F}while(!1);B.cursor=B.limit-b;if(!z())break j}while(!1);B.bra=B.cursor,B.slice_del(),w=B.limit-B.cursor;q:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-w;break q}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-w;break q}}while(!1);break H}while(!1);B.cursor=B.limit-y;if(!mt()){B.cursor=B.limit-g;break P}}while(!1);while(!1);break e}while(!1);B.cursor=B.limit-e;R:do{B.ket=B.cursor;if(!W())break R;B.bra=B.cursor,B.slice_del();break e}while(!1);B.cursor=B.limit-e;U:do{if(!mt())break U;break e}while(!1);B.cursor=B.limit-e;z:do{B.ket=B.cursor;W:do{E=B.limit-B.cursor;X:do{if(!Q())break X;break W}while(!1);B.cursor=B.limit-E;V:do{if(!X())break V;break W}while(!1);B.cursor=B.limit-E;if(!J())break z}while(!1);B.bra=B.cursor,B.slice_del(),S=B.limit-
B.cursor;$:do{B.ket=B.cursor;J:do{x=B.limit-B.cursor;K:do{if(!U())break K;B.bra=B.cursor,B.slice_del(),T=B.limit-B.cursor;Q:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-T;break Q}}while(!1);break J}while(!1);B.cursor=B.limit-x;if(!ut()){B.cursor=B.limit-S;break $}}while(!1);B.bra=B.cursor,B.slice_del(),B.ket=B.cursor;if(!mt()){B.cursor=B.limit-S;break $}}while(!1);break e}while(!1);B.cursor=B.limit-e,B.ket=B.cursor;G:do{N=B.limit-B.cursor;Y:do{if(!U())break Y;break G}while(!1);B.cursor=B.limit-N;if(!z())return!1}while(!1);B.bra=B.cursor,B.slice_del(),C=B.limit-B.cursor;Z:do{B.ket=B.cursor;if(!ut()){B.cursor=B.limit-C;break Z}B.bra=B.cursor,B.slice_del();if(!mt()){B.cursor=B.limit-C;break Z}}while(!1)}while(!1);return!0}function yt(){var e;B.ket=B.cursor,e=B.find_among_b(N,4);if(e==0)return!1;B.bra=B.cursor;switch(e){case 0:return!1;case 1:B.slice_from("p");break;case 2:B.slice_from("\u00e7");break;case 3:B.slice_from("t");break;case 4:B.slice_from("k")}return!0}function bt(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d;e=B.limit-B.cursor;e:do{t=B.limit-B.cursor;t:do{if(!B.eq_s_b(1,"d"))break t;break e}while(!1);B.cursor=B.limit-t;if(!B.eq_s_b(1,"g"))return!1}while(!1);B.cursor=B.limit-e;n:do{n=B.limit-B.cursor;r:do{r=B.limit-B.cursor;i:for(;;){i=B.limit-B.cursor;s:do{if(!B.in_grouping_b(C,97,305))break s;B.cursor=B.limit-i;break i}while(!1);B.cursor=B.limit-i;if(B.cursor<=B.limit_backward)break r;B.cursor--}o:do{s=B.limit-B.cursor;u:do{if(!B.eq_s_b(1,"a"))break u;break o}while(!1);B.cursor=B.limit-s;if(!B.eq_s_b(1,"\u0131"))break r}while(!1);B.cursor=B.limit-r;var v=B.cursor;B.insert(B.cursor,B.cursor,"\u0131"),B.cursor=v;break n}while(!1);B.cursor=B.limit-n;a:do{o=B.limit-B.cursor;f:for(;;){u=B.limit-B.cursor;l:do{if(!B.in_grouping_b(C,97,305))break l;B.cursor=B.limit-u;break f}while(!1);B.cursor=B.limit-u;if(B.cursor<=B.limit_backward)break a;B.cursor--}c:do{a=B.limit-B.cursor;h:do{if(!B.eq_s_b(1,"e"))break h;break c}while(!1);B.cursor=B.limit-a;if(!B.eq_s_b(1,"i"))break a}while(!1);B.cursor=B.limit-o;var v=B.cursor;B.insert(B.cursor,B.cursor,"i"),B.cursor=v;break n}while(!1);B.cursor=B.limit-n;p:do{f=B.limit-B.cursor;d:for(;;){l=B.limit-B.cursor;v:do{if(!B.in_grouping_b(C,97,305))break v;B.cursor=B.limit-l;break d}while(!1);B.cursor=B.limit-l;if(B.cursor<=B.limit_backward)break p;B.cursor--}m:do{c=B.limit-B.cursor;g:do{if(!B.eq_s_b(1,"o"))break g;break m}while(!1);B.cursor=B.limit-c;if(!B.eq_s_b(1,"u"))break p}while(!1);B.cursor=B.limit-f;var v=B.cursor;B.insert(B.cursor,B.cursor,"u"),B.cursor=v;break n}while(!1);B.cursor=B.limit-n,h=B.limit-B.cursor;y:for(;;){p=B.limit-B.cursor;b:do{if(!B.in_grouping_b(C,97,305))break b;B.cursor=B.limit-p;break y}while(!1);B.cursor=B.limit-p;if(B.cursor<=B.limit_backward)return!1;B.cursor--}w:do{d=B.limit-B.cursor;E:do{if(!B.eq_s_b(1,"\u00f6"))break E;break w}while(!1);B.cursor=B.limit-d;if(!B.eq_s_b(1,"\u00fc"))return!1}while(!1);B.cursor=B.limit-h;var v=B.cursor;B.insert(B.cursor,B.cursor,"\u00fc"),B.cursor=v}while(!1);return!0}function wt(){var e,t;e=B.cursor;var n=2;e:for(;;){t=B.cursor;t:do{n:for(;;){r:do{if(!B.in_grouping(C,97,305))break r;break n}while(!1);if(B.cursor>=B.limit)break t;B.cursor++}n--;continue e}while(!1);B.cursor=t;break e}return n>0?!1:(B.cursor=e,!0)}function Et(){var e,t,n;e:do{e=B.cursor;t:do{t=B.cursor;n:for(;;){r:do{if(!B.eq_s(2,"ad"))break r;break n}while(!1);if(B.cursor>=B.limit)break t;B.cursor++}H=2;if(H!=B.limit)break t;B.cursor=t;break e}while(!1);B.cursor=e,n=B.cursor;i:for(;;){s:do{if(!B.eq_s(5,"soyad"))break s;break i}while(!1);if(B.cursor>=B.limit)return!1;B.cursor++}H=5;if(H!=B.limit)return!1;B.cursor=n}while(!1);return!0}function St(){var e,t,n;e=B.cursor;e:do{if(!Et())break e;return!1}while(!1);B.cursor=e,B.limit_backward=B.cursor,B.cursor=B.limit,t=B.limit-B.cursor;t:do if(!bt())break t;while(!1);B.cursor=B.limit-t,n=B.limit-B.cursor;n:do if(!yt())break n;while(!1);return B.cursor=B.limit-n,B.cursor=B.limit_backward,!0}var e=[new t("m",-1,-1),new t("n",-1,-1),new t("miz",-1,-1),new t("niz",-1,-1),new t("muz",-1,-1),new t("nuz",-1,-1),new t("m\u00fcz",-1,-1),new t("n\u00fcz",-1,-1),new t("m\u0131z",-1,-1),new t("n\u0131z",-1,-1)],r=[new t("leri",-1,-1),new t("lar\u0131",-1,-1)],i=[new t("ni",-1,-1),new t("nu",-1,-1),new t("n\u00fc",-1,-1),new t("n\u0131",-1,-1)],s=[new t("in",-1,-1),new t("un",-1,-1),new t("\u00fcn",-1,-1),new t("\u0131n",-1,-1)],o=[new t("a",-1,-1),new t("e",-1,-1)],u=[new t("na",-1,-1),new t("ne",-1,-1)],a=[new t("da",-1,-1),new t("ta",-1,-1),new t("de",-1,-1),new t("te",-1,-1)],f=[new t("nda",-1,-1),new t("nde",-1,-1)],l=[new t("dan",-1,-1),new t("tan",-1,-1),new t("den",-1,-1),new t("ten",-1,-1)],c=[new t("ndan",-1,-1),new t("nden",-1,-1)],h=[new t("la",-1,-1),new t("le",-1,-1)],p=[new t("ca",-1,-1),new t("ce",-1,-1)],d=[new t("im",-1,-1),new t("um",-1,-1),new t("\u00fcm",-1,-1),new t("\u0131m",-1,-1)],v=[new t("sin",-1,-1),new t("sun",-1,-1),new t("s\u00fcn",-1,-1),new t("s\u0131n",-1,-1)],m=[new t("iz",-1,-1),new t("uz",-1,-1),new t("\u00fcz",-1,-1),new t("\u0131z",-1,-1)],g=[new t("siniz",-1,-1),new t("sunuz",-1,-1),new t("s\u00fcn\u00fcz",-1,-1),new t("s\u0131n\u0131z",-1,-1)],y=[new t("lar",-1,-1),new t("ler",-1,-1)],b=[new t("niz",-1,-1),new t("nuz",-1,-1),new t("n\u00fcz",-1,-1),new t("n\u0131z",-1,-1)],w=[new t("dir",-1,-1),new t("tir",-1,-1),new t("dur",-1,-1),new t("tur",-1,-1),new t("d\u00fcr",-1,-1),new t("t\u00fcr",-1,-1),new t("d\u0131r",-1,-1),new t("t\u0131r",-1,-1)],E=[new t("cas\u0131na",-1,-1),new t("cesine",-1,-1)],S=[new t("di",-1,-1),new t("ti",-1,-1),new t("dik",-1,-1),new t("tik",-1,-1),new t("duk",-1,-1),new t("tuk",-1,-1),new t("d\u00fck",-1,-1),new t("t\u00fck",-1,-1),new t("d\u0131k",-1,-1),new t("t\u0131k",-1,-1),new t("dim",-1,-1),new t("tim",-1,-1),new t("dum",-1,-1),new t("tum",-1,-1),new t("d\u00fcm",-1,-1),new t("t\u00fcm",-1,-1),new t("d\u0131m",-1,-1),new t("t\u0131m",-1,-1),new t("din",-1,-1),new t("tin",-1,-1),new t("dun",-1,-1),new t("tun",-1,-1),new t("d\u00fcn"
,-1,-1),new t("t\u00fcn",-1,-1),new t("d\u0131n",-1,-1),new t("t\u0131n",-1,-1),new t("du",-1,-1),new t("tu",-1,-1),new t("d\u00fc",-1,-1),new t("t\u00fc",-1,-1),new t("d\u0131",-1,-1),new t("t\u0131",-1,-1)],x=[new t("sa",-1,-1),new t("se",-1,-1),new t("sak",-1,-1),new t("sek",-1,-1),new t("sam",-1,-1),new t("sem",-1,-1),new t("san",-1,-1),new t("sen",-1,-1)],T=[new t("mi\u015f",-1,-1),new t("mu\u015f",-1,-1),new t("m\u00fc\u015f",-1,-1),new t("m\u0131\u015f",-1,-1)],N=[new t("b",-1,1),new t("c",-1,2),new t("d",-1,3),new t("\u011f",-1,4)],C=[17,65,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,32,8,0,0,0,0,0,0,1],k=[1,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,1],L=[1,64,16,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],A=[17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,130],O=[1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],M=[17],_=[65],D=[65],P,H,B=new n;this.stem=function(){var e,t;if(!wt())return!1;B.limit_backward=B.cursor,B.cursor=B.limit,e=B.limit-B.cursor;e:do if(!vt())break e;while(!1);B.cursor=B.limit-e;if(!P)return!1;t=B.limit-B.cursor;t:do if(!gt())break t;while(!1);return B.cursor=B.limit-t,B.cursor=B.limit_backward,St()?!0:!1},this.setCurrent=function(e){B.setCurrent(e)},this.getCurrent=function(){return B.getCurrent()}}},i=e.toLowerCase()+"Stemmer";return new r[i]};
/*
 * =======================================================================
 * KindleStylesheetManager
 *
 * Handles dynamically determined stylesheets.
 *
 * Copyright (c) 2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * =======================================================================
 */
var KindleStylesheetManager = (function() {
    return {
        /**
         * Dynamically adds a stylesheet to the current document, but only if the condition evaluates to true.
         *
         * @param {boolean} condition Should the style sheet be used?
         * @param {string} stylesheet the filename of the stylesheet to use
         */
        useStylesheetIf: function (condition, stylesheet) {
            if (condition) {
                var link = document.createElement('LINK');
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = stylesheet;
                document.head.appendChild(link);
            }
        }
    };
})();
/////////////////////////
// END FILE lib/KindleLibRdr.js
/////////////////////////
/////////////////////////
// BEGIN FILE js/KindleReaderApp-min.js
/////////////////////////
/*


Full source (including license, if applicable) included below.
*/
/*
 * Copyright (c) 2014 Amazon.com, Inc. All rights reserved.
 */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(q){return q.raw=q};$jscomp.createTemplateTagFirstArgWithRaw=function(q,m){q.raw=m;return q};$jscomp.arrayIteratorImpl=function(q){var m=0;return function(){return m<q.length?{done:!1,value:q[m++]}:{done:!0}}};$jscomp.arrayIterator=function(q){return{next:$jscomp.arrayIteratorImpl(q)}};$jscomp.makeIterator=function(q){var m="undefined"!=typeof Symbol&&Symbol.iterator&&q[Symbol.iterator];return m?m.call(q):$jscomp.arrayIterator(q)};
$jscomp.arrayFromIterator=function(q){for(var m,g=[];!(m=q.next()).done;)g.push(m.value);return g};$jscomp.arrayFromIterable=function(q){return q instanceof Array?q:$jscomp.arrayFromIterator($jscomp.makeIterator(q))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(q,m,g){if(q==Array.prototype||q==Object.prototype)return q;q[m]=g.value;return q};$jscomp.getGlobal=function(q){q=["object"==typeof globalThis&&globalThis,q,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var m=0;m<q.length;++m){var g=q[m];if(g&&g.Math==Math)return g}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(q,m){var g=$jscomp.propertyToPolyfillSymbol[m];if(null==g)return q[m];g=q[g];return void 0!==g?g:q[m]};
$jscomp.polyfill=function(q,m,g,b){m&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(q,m,g,b):$jscomp.polyfillUnisolated(q,m,g,b))};$jscomp.polyfillUnisolated=function(q,m,g,b){g=$jscomp.global;q=q.split(".");for(b=0;b<q.length-1;b++){var e=q[b];if(!(e in g))return;g=g[e]}q=q[q.length-1];b=g[q];m=m(b);m!=b&&null!=m&&$jscomp.defineProperty(g,q,{configurable:!0,writable:!0,value:m})};
$jscomp.polyfillIsolated=function(q,m,g,b){var e=q.split(".");q=1===e.length;b=e[0];b=!q&&b in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var d=0;d<e.length-1;d++){var a=e[d];if(!(a in b))return;b=b[a]}e=e[e.length-1];g=$jscomp.IS_SYMBOL_NATIVE&&"es6"===g?b[e]:null;m=m(g);null!=m&&(q?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:m}):m!==g&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(b,e,{configurable:!0,writable:!0,value:m})))};$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(q){if(q)return q;var m=function(e,d){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:d})};m.prototype.toString=function(){return this.$jscomp$symbol$id_};var g=0,b=function(e){if(this instanceof b)throw new TypeError("Symbol is not a constructor");return new m("jscomp_symbol_"+(e||"")+"_"+g++,e)};return b},"es6","es3");$jscomp.initSymbolIterator=function(){};
$jscomp.polyfill("Symbol.iterator",function(q){if(q)return q;q=Symbol("Symbol.iterator");for(var m="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),g=0;g<m.length;g++){var b=$jscomp.global[m[g]];"function"===typeof b&&"function"!=typeof b.prototype[q]&&$jscomp.defineProperty(b.prototype,q,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return q},"es6",
"es3");$jscomp.initSymbolAsyncIterator=function(){};$jscomp.iteratorPrototype=function(q){q={next:q};q[Symbol.iterator]=function(){return this};return q};$jscomp.iteratorFromArray=function(q,m){q instanceof String&&(q+="");var g=0,b=!1,e={next:function(){if(!b&&g<q.length){var d=g++;return{value:m(d,q[d]),done:!1}}b=!0;return{done:!0,value:void 0}}};e[Symbol.iterator]=function(){return e};return e};
$jscomp.polyfill("Array.prototype.keys",function(q){return q?q:function(){return $jscomp.iteratorFromArray(this,function(m){return m})}},"es6","es3");$jscomp.polyfill("Object.is",function(q){return q?q:function(m,g){return m===g?0!==m||1/m===1/g:m!==m&&g!==g}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(q){return q?q:function(m,g){var b=this;b instanceof String&&(b=String(b));var e=b.length;g=g||0;for(0>g&&(g=Math.max(g+e,0));g<e;g++){var d=b[g];if(d===m||Object.is(d,m))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(q,m,g){if(null==q)throw new TypeError("The 'this' value for String.prototype."+g+" must not be null or undefined");if(m instanceof RegExp)throw new TypeError("First argument to String.prototype."+g+" must not be a regular expression");return q+""};$jscomp.polyfill("String.prototype.includes",function(q){return q?q:function(m,g){return-1!==$jscomp.checkStringArgs(this,m,"includes").indexOf(m,g||0)}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(q){return q?q:function(m,g){var b=$jscomp.checkStringArgs(this,m,"startsWith");m+="";var e=b.length,d=m.length;g=Math.max(0,Math.min(g|0,b.length));for(var a=0;a<d&&g<e;)if(b[g++]!=m[a++])return!1;return a>=d}},"es6","es3");
$jscomp.polyfill("String.prototype.endsWith",function(q){return q?q:function(m,g){var b=$jscomp.checkStringArgs(this,m,"endsWith");m+="";void 0===g&&(g=b.length);g=Math.max(0,Math.min(g|0,b.length));for(var e=m.length;0<e&&0<g;)if(b[--g]!=m[--e])return!1;return 0>=e}},"es6","es3");$jscomp.checkEs6ConformanceViaProxy=function(){try{var q={},m=Object.create(new $jscomp.global.Proxy(q,{get:function(g,b,e){return g==q&&"q"==b&&e==m}}));return!0===m.q}catch(g){return!1}};
$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(q,m){return Object.prototype.hasOwnProperty.call(q,m)};
$jscomp.polyfill("WeakMap",function(q){function m(){if(!q||!Object.seal)return!1;try{var h=Object.seal({}),n=Object.seal({}),l=new q([[h,2],[n,3]]);if(2!=l.get(h)||3!=l.get(n))return!1;l.delete(h);l.set(n,4);return!l.has(h)&&4==l.get(n)}catch(u){return!1}}function g(){}function b(h){var n=typeof h;return"object"===n&&null!==h||"function"===n}function e(h){if(!$jscomp.owns(h,a)){var n=new g;$jscomp.defineProperty(h,a,{value:n})}}function d(h){if(!$jscomp.ISOLATE_POLYFILLS){var n=Object[h];n&&(Object[h]=
function(l){if(l instanceof g)return l;Object.isExtensible(l)&&e(l);return n(l)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(q&&$jscomp.ES6_CONFORMANCE)return q}else if(m())return q;var a="$jscomp_hidden_"+Math.random();d("freeze");d("preventExtensions");d("seal");var c=0,f=function(h){this.id_=(c+=Math.random()+1).toString();if(h){h=$jscomp.makeIterator(h);for(var n;!(n=h.next()).done;)n=n.value,this.set(n[0],n[1])}};f.prototype.set=function(h,n){if(!b(h))throw Error("Invalid WeakMap key");
e(h);if(!$jscomp.owns(h,a))throw Error("WeakMap key fail: "+h);h[a][this.id_]=n;return this};f.prototype.get=function(h){return b(h)&&$jscomp.owns(h,a)?h[a][this.id_]:void 0};f.prototype.has=function(h){return b(h)&&$jscomp.owns(h,a)&&$jscomp.owns(h[a],this.id_)};f.prototype.delete=function(h){return b(h)&&$jscomp.owns(h,a)&&$jscomp.owns(h[a],this.id_)?delete h[a][this.id_]:!1};return f},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(q){function m(){if($jscomp.ASSUME_NO_NATIVE_MAP||!q||"function"!=typeof q||!q.prototype.entries||"function"!=typeof Object.seal)return!1;try{var f=Object.seal({x:4}),h=new q($jscomp.makeIterator([[f,"s"]]));if("s"!=h.get(f)||1!=h.size||h.get({x:4})||h.set({x:4},"t")!=h||2!=h.size)return!1;var n=h.entries(),l=n.next();if(l.done||l.value[0]!=f||"s"!=l.value[1])return!1;l=n.next();return l.done||4!=l.value[0].x||"t"!=l.value[1]||!n.next().done?!1:!0}catch(u){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(q&&$jscomp.ES6_CONFORMANCE)return q}else if(m())return q;var g=new WeakMap,b=function(f){this.data_={};this.head_=a();this.size=0;if(f){f=$jscomp.makeIterator(f);for(var h;!(h=f.next()).done;)h=h.value,this.set(h[0],h[1])}};b.prototype.set=function(f,h){f=0===f?0:f;var n=e(this,f);n.list||(n.list=this.data_[n.id]=[]);n.entry?n.entry.value=h:(n.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:f,value:h},n.list.push(n.entry),
this.head_.previous.next=n.entry,this.head_.previous=n.entry,this.size++);return this};b.prototype.delete=function(f){f=e(this,f);return f.entry&&f.list?(f.list.splice(f.index,1),f.list.length||delete this.data_[f.id],f.entry.previous.next=f.entry.next,f.entry.next.previous=f.entry.previous,f.entry.head=null,this.size--,!0):!1};b.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=a();this.size=0};b.prototype.has=function(f){return!!e(this,f).entry};b.prototype.get=function(f){return(f=
e(this,f).entry)&&f.value};b.prototype.entries=function(){return d(this,function(f){return[f.key,f.value]})};b.prototype.keys=function(){return d(this,function(f){return f.key})};b.prototype.values=function(){return d(this,function(f){return f.value})};b.prototype.forEach=function(f,h){for(var n=this.entries(),l;!(l=n.next()).done;)l=l.value,f.call(h,l[1],l[0],this)};b.prototype[Symbol.iterator]=b.prototype.entries;var e=function(f,h){var n=h&&typeof h;"object"==n||"function"==n?g.has(h)?n=g.get(h):
(n=""+ ++c,g.set(h,n)):n="p_"+h;var l=f.data_[n];if(l&&$jscomp.owns(f.data_,n))for(f=0;f<l.length;f++){var u=l[f];if(h!==h&&u.key!==u.key||h===u.key)return{id:n,list:l,index:f,entry:u}}return{id:n,list:l,index:-1,entry:void 0}},d=function(f,h){var n=f.head_;return $jscomp.iteratorPrototype(function(){if(n){for(;n.head!=f.head_;)n=n.previous;for(;n.next!=n.head;)return n=n.next,{done:!1,value:h(n)};n=null}return{done:!0,value:void 0}})},a=function(){var f={};return f.previous=f.next=f.head=f},c=0;
return b},"es6","es3");$jscomp.findInternal=function(q,m,g){q instanceof String&&(q=String(q));for(var b=q.length,e=0;e<b;e++){var d=q[e];if(m.call(g,d,e,q))return{i:e,v:d}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(q){return q?q:function(m,g){return $jscomp.findInternal(this,m,g).v}},"es6","es3");$jscomp.polyfill("Number.parseInt",function(q){return q||parseInt},"es6","es3");
$jscomp.polyfill("Array.prototype.fill",function(q){return q?q:function(m,g,b){var e=this.length||0;0>g&&(g=Math.max(0,e+g));if(null==b||b>e)b=e;b=Number(b);0>b&&(b=Math.max(0,e+b));for(g=Number(g||0);g<b;g++)this[g]=m;return this}},"es6","es3");$jscomp.typedArrayFill=function(q){return q?q:Array.prototype.fill};$jscomp.polyfill("Int8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint8Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Uint8ClampedArray.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint16Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Int32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Uint32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.polyfill("Float32Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");
$jscomp.polyfill("Float64Array.prototype.fill",$jscomp.typedArrayFill,"es6","es5");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(q){function m(){this.batch_=null}function g(a){return a instanceof e?a:new e(function(c,f){c(a)})}if(q&&!$jscomp.FORCE_POLYFILL_PROMISE)return q;m.prototype.asyncExecute=function(a){if(null==this.batch_){this.batch_=[];var c=this;this.asyncExecuteFunction(function(){c.executeBatch_()})}this.batch_.push(a)};var b=$jscomp.global.setTimeout;m.prototype.asyncExecuteFunction=function(a){b(a,0)};m.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=
this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var f=a[c];a[c]=null;try{f()}catch(h){this.asyncThrow_(h)}}}this.batch_=null};m.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(f){c.reject(f)}};e.prototype.createResolveAndReject_=function(){function a(h){return function(n){f||(f=!0,h.call(c,n))}}var c=this,f=!1;
return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var c=void 0;try{c=a.then}catch(f){this.reject_(f);return}"function"==typeof c?
this.settleSameAsThenable_(c,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=0;a<this.onSettledCallbacks_.length;++a)d.asyncExecute(this.onSettledCallbacks_[a]);
this.onSettledCallbacks_=null}};var d=new m;e.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};e.prototype.settleSameAsThenable_=function(a,c){var f=this.createResolveAndReject_();try{a.call(c,f.resolve,f.reject)}catch(h){f.reject(h)}};e.prototype.then=function(a,c){function f(u,x){return"function"==typeof u?function(t){try{h(u(t))}catch(v){n(v)}}:x}var h,n,l=new e(function(u,x){h=u;n=x});this.callWhenSettled_(f(a,h),f(c,n));return l};
e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,c){function f(){switch(h.state_){case 1:a(h.result_);break;case 2:c(h.result_);break;default:throw Error("Unexpected state: "+h.state_);}}var h=this;null==this.onSettledCallbacks_?d.asyncExecute(f):this.onSettledCallbacks_.push(f)};e.resolve=g;e.reject=function(a){return new e(function(c,f){f(a)})};e.race=function(a){return new e(function(c,f){for(var h=$jscomp.makeIterator(a),n=h.next();!n.done;n=h.next())g(n.value).callWhenSettled_(c,
f)})};e.all=function(a){var c=$jscomp.makeIterator(a),f=c.next();return f.done?g([]):new e(function(h,n){function l(t){return function(v){u[t]=v;x--;0==x&&h(u)}}var u=[],x=0;do u.push(void 0),x++,g(f.value).callWhenSettled_(l(u.length-1),n),f=c.next();while(!f.done)})};return e},"es6","es3");
$jscomp.polyfill("Array.from",function(q){return q?q:function(m,g,b){g=null!=g?g:function(c){return c};var e=[],d="undefined"!=typeof Symbol&&Symbol.iterator&&m[Symbol.iterator];if("function"==typeof d){m=d.call(m);for(var a=0;!(d=m.next()).done;)e.push(g.call(b,d.value,a++))}else for(d=m.length,a=0;a<d;a++)e.push(g.call(b,m[a],a));return e}},"es6","es3");
$jscomp.polyfill("Promise.allSettled",function(q){function m(b){return{status:"fulfilled",value:b}}function g(b){return{status:"rejected",reason:b}}return q?q:function(b){var e=this;b=Array.from(b,function(d){return e.resolve(d).then(m,g)});return e.all(b)}},"es_2020","es3");
function KindleModuleManagerFactory(){function q(v,r){if(x[v])throw"Duplicate registration of module "+v;if(!r)throw"Module is not initialized with an object "+v;x[v]=r;t[v].resolve(r)}function m(v){if(x.hasOwnProperty(v))throw"Duplicate registration of module "+v;x[v]=void 0}function g(v,r){t[v]||(t[v]=new jQuery.Deferred);q(v,r)}function b(v,r){m(v);t[v]||(t[v]=new jQuery.Deferred);r(t[v]);t[v].done(function(k){q(v,k)})}function e(v,r){b(v,function(k){r.done(k.resolve).fail(k.reject)})}function d(v){t[v]||
(t[v]=new jQuery.Deferred);return t[v].promise()}function a(v){if(!x[v])throw"Trying to get uninitialized module "+v;return x[v]}function c(v){return x.hasOwnProperty(v)}function f(v){return v&&$.isFunction(v.promise)?v:d(v)}function h(v,r){x[v]=r}function n(v){var r=x[v];return{done:function(k){k(r)},fail:function(){},when:function(k){k(r)}}}function l(v){for(var r={},k=0;k<v.length;k++)r[name]=x[v];return{done:function(y){y(r)},fail:function(){},when:function(y){y(r)}}}function u(){x={}}var x={},
t={};return{CONSTANTS:"Constants",DB_CLIENT:"DBClient",RESOURCE_BUNDLE:"ResourceBundle",METRICS_MANAGER:"metrics_manager",SERVICE_CLIENT:"ServiceClient",APP_REGISTRATION:"Registration",JOURNAL_MANAGER:"JournalManager",BOOK_METADATA:"book_metaData",BOOK_FRAGMAP:"book_fragmap",EMBEDDED_HOSTINTERFACE:"embeddedHostInterface",CONTENT_MIGRATION:"contentMigration",NETWORK:"network",LINK_URLS:"linkUrls",ERROR_CODE_CANCEL:"canceled",registerModule:g,registerModuleList:function(v){for(var r in v)g(r,v[r])},
registerModuleWithInitializer:b,registerModuleWithDeferred:e,detachModule:function(v){var r=x[v],k=t[v];k&&!k.isResolved()&&k.reject("canceled");delete x[v];delete t[v];return r},getModule:d,getModuleList:function(v){var r=new jQuery.Deferred,k,y=[];for(k=0;k<v.length;k++)y.push(d(v[k]));$.when.apply($,y).done(function(){var w,z={};for(w=0;w<v.length;w++)z[v[w]]=arguments[w];r.resolve(z)}).fail(r.reject);return r.promise()},getModuleSync:a,isModuleInitialized:function(v){return void 0!==x[v]},isModuleRegistered:c,
switchToTestMode:function(){this.registerModuleTest=h;this.getModule=n;this.getModuleSync=a;this.getModuleList=l;this.clear=u;delete this.registerModuleWithDeferred;delete this.registerModuleWithInitializer},define:function(v,r,k){if(!c(v)){var y=[],w=$.Deferred();e(v,w);r&&r.length&&r.forEach(function(z){y.push(f(z))});$.when.apply($,y).then(function(){if("function"===typeof k){var z=$.makeArray(arguments);z=k.apply(k,z)}else z=k;z&&$.isFunction(z.promise)?z.then(w.resolve,function(){w.reject()}):
w.resolve(z)},function(){w.reject()})}},require:function(v,r){$.isArray(v)||(v=[v]);var k=[];v.forEach(function(z){k.push(f(z))});if(!r){var y=$.Deferred();var w=y.promise()}$.when.apply($,k).then(function(){var z=$.makeArray(arguments);r?r.apply(r,z):y.resolve.apply(y,z)},function(){y&&y.reject()});return w}}}var KindleModuleManager=KindleModuleManagerFactory();
(function(){var q=Handlebars.template,m=Handlebars.templates=Handlebars.templates||{};m["Embedded/KindleReaderHeaderBar"]=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g="<div id='kindleReader_header' class='immersive_slide_area'>\n    <div id='kindleReader_header_left'>\n        <div id=\"kindleReader_kindleLogo_embedded\" class=\"kindleReader_kindleLogo\"\n            tabindex = 1;\n            data-action='reader_open_full_kcr'\n            title='"+
(h((c=e.str,c?c.call(b,"k_R_embedded_logo_tooltip",d):f.call(b,"str","k_R_embedded_logo_tooltip",d)))+"'\n        ></div>\n\n        <div class=\"readerControls\">\n\n            <div\n                id='kindleReader_button_goto'\n                class='header_bar_icon disabled'\n                title='");d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_goto_tooltip",d):f.call(b,"str","k_R_menuButton_goto_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_show_goto'\n            ></div>\n\n            <div\n                id='kindleReader_button_controlPanel'\n                class='header_bar_icon disabled'\n                title='";
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_controlPane_tooltip",d):f.call(b,"str","k_R_menuButton_controlPane_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_show_settings'\n            ></div>\n\n            <div\n                id='kindleReader_bookmark'\n                class='header_bar_icon disabled'\n                title='";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_bookmark_tooltip",d):f.call(b,"str","k_R_menuButton_bookmark_tooltip",
d)))+"'\n                tabindex = 1;\n                data-action='reader_bookmark'\n            ></div>\n\n            <div\n                id='kindleReader_button_note'\n                class='header_bar_icon disabled'\n                title='";d={hash:{},data:a};return g+=h((c=e.str,c?c.call(b,"k_R_menuButton_notesAndMarks_tooltip",d):f.call(b,"str","k_R_menuButton_notesAndMarks_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_show_notes'\n            ></div>\n        </div>\n    </div>\n    <div id='kindleReader_header_right'>\n        <div id='readerControlsRight' class='readerControls'>\n            <div id='kindleReader_sitb' class='disabled'>\n                <div id='kindleReader_input_sitb'>\n                    <input id='kindleReader_input_sitb_box' type='text' tabindex = 1 />\n                    <div id='kindleReader_input_sitb_clear'></div>\n                </div>\n                <button id='kindleReader_button_sitb' class='header_bar_button' tabindex = 1 value='' data-action='reader_search'/>\n            </div>\n        </div>\n    </div>\n</div>"});
m.KindleAnnotationComponentFactory=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c=this.escapeExpression,f=e.helperMissing;g="<div id='";(d=e.id)?d=d.call(b,{hash:{},data:a}):(d=b.id,d="function"===typeof d?d.apply(b):d);g+=c(d)+'\' class="kindleReader_annotation_pane_notes clearfix" >\n    <p class="kindleReader_annotation_pane_notes_context">     \n    </p>\n    <p>\n    <textarea\n        id="kindleReader_annotation_pane_edit_textArea"\n        rows="10"\n        maxlength="';
(d=e.maxNoteChars)?d=d.call(b,{hash:{},data:a}):(d=b.maxNoteChars,d="function"===typeof d?d.apply(b):d);g+=c(d)+'"\n        >';(d=e.context)?d=d.call(b,{hash:{},data:a}):(d=b.context,d="function"===typeof d?d.apply(b):d);g+=c(d)+'</textarea>\n    </p>\n    <div class="kindleReader_annotation_pane_notes_metadata_container clearfix">\n        <div class="kindleReader_annotation_pane_icon"></div>\n        <label class="kindleReader_annotation_pane_notes_pageLabel">';(d=e.pageLabel)?d=d.call(b,{hash:{},
data:a}):(d=b.pageLabel,d="function"===typeof d?d.apply(b):d);g+=c(d)+'</label>\n        <input type="hidden" name="kindleReader_annotation_pane_notes_start" value=';(d=e.start)?d=d.call(b,{hash:{},data:a}):(d=b.start,d="function"===typeof d?d.apply(b):d);g+=c(d)+'/>\n        \n        <span class="kindleReader_annotation_pane_notes_trashcan kindleReader_annotation_pane_action_btn" title=\'';var h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_delete",h):f.call(b,"str","k_R_annotation_pane_delete",
h)))+"'></span>\n        <span class=\"kindleReader_annotation_pane_notes_goto kindleReader_annotation_pane_action_btn\" title='";h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_goto",h):f.call(b,"str","k_R_annotation_pane_goto",h)))+"'></span>\n        <span class=\"kindleReader_annotation_pane_notes_edit kindleReader_annotation_pane_action_btn\" title='";h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_edit",h):f.call(b,"str","k_R_annotation_pane_edit",h)))+"'></span>\n        <div class=\"kindleReader_annotation_pane_notes_save kindleReader_annotation_pane_notes_button kindleReader_annotation_pane_action_btn\" title='";
h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_save",h):f.call(b,"str","k_R_annotation_pane_save",h)))+"'>";h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_dialog_editNote_save",h):f.call(b,"str","k_R_dialog_editNote_save",h)))+'</div>\n        <div class="kindleReader_annotation_pane_notes_cancel kindleReader_annotation_pane_notes_button kindleReader_annotation_pane_action_btn" title=\'';h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_cancel",h):f.call(b,"str",
"k_R_annotation_pane_cancel",h)))+"'>";h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_dialog_editNote_cancel",h):f.call(b,"str","k_R_dialog_editNote_cancel",h)))+'</div>\n        <div class="kindleReader_annotation_pane_notes_yes kindleReader_annotation_pane_notes_button kindleReader_annotation_pane_action_btn" title=\'';h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_delete",h):f.call(b,"str","k_R_annotation_pane_delete",h)))+"'>";h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_yes",
h):f.call(b,"str","k_R_annotation_pane_yes",h)))+'</div>\n        <div class="kindleReader_annotation_pane_notes_no kindleReader_annotation_pane_notes_button kindleReader_annotation_pane_action_btn" title=\'';h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_dont_delete",h):f.call(b,"str","k_R_annotation_pane_dont_delete",h)))+"'>";h={hash:{},data:a};g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_no",h):f.call(b,"str","k_R_annotation_pane_no",h)))+'</div>\n        <span class="kindleReader_annotation_notes_delete_confirm">';
h={hash:{},data:a};return g+=c((d=e.str,d?d.call(b,"k_R_annotation_pane_delete_confirm",h):f.call(b,"str","k_R_annotation_pane_delete_confirm",h)))+'</span>\n    </div>\n        \n\n</div>\n<div class="kindleReader_annotation_pane_notes_divider_top"></div>\n<div class="kindleReader_annotation_pane_notes_divider_bottom"></div>'});m.KindleImageViewer=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};d=this.escapeExpression;g='<div class="imageViewerBackdrop">\n    <img class="imageViewerImage" src=';
(e=e.imageSource)?e=e.call(b,{hash:{},data:a}):(e=b.imageSource,e="function"===typeof e?e.apply(b):e);return g+=d(e)+"></img>\n</div>"});m.KindleReaderAnnotationsPane=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g='<div id="kindleReader_annotations_pane">\n    <div id="kindleReader_annotations_pane_header">'+(h((c=e.str,c?c.call(b,"k_R_dialog_annotation_pane_title",d):f.call(b,"str","k_R_dialog_annotation_pane_title",
d)))+'</div>\n    <div id="kindleReader_annotations_pane_scrollWrapper">\n        <div id="kindleReader_annotations_pane_container"></div>\n    </div>\n    <div id="kindleReader_annotations_pane_notes_empty">');d={hash:{},data:a};return g+=h((c=e.str,c?c.call(b,"k_R_annotation_pane_empty_note",d):f.call(b,"str","k_R_annotation_pane_empty_note",d)))+"</div>\n</div>"});m.KindleReaderBookmarkOverlay=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return'<div id=\'bookmark_overlay_div\' class="immersive_slide_area" data-action="reader_bookmark" ></div>'});
m["KindleReaderBuyButton-MANGA_LIBRARY_KCR_INTEGRATION_332550"]=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c;g=e.helperMissing;d=this.escapeExpression;a={hash:{},data:a};return'<div id="kindleReader_Buy_Full_Button" tabindex="2" data-action=\'reader_buy_full_book\'>\n\t'+(d((c=e.str,c?c.call(b,"k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550",a):g.call(b,"str","k_endOfSample_buy_button-MANGA_LIBRARY_KCR_INTEGRATION_332550",a)))+"\n</div>")});
m.KindleReaderBuyButton=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c;g=e.helperMissing;d=this.escapeExpression;a={hash:{},data:a};return'<div id="kindleReader_Buy_Full_Button" tabindex="2" data-action=\'reader_buy_full_book\'>\n\t'+(d((c=e.str,c?c.call(b,"k_endOfSample_buy_button",a):g.call(b,"str","k_endOfSample_buy_button",a)))+"\n</div>")});m.KindleReaderContextMenu=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return'<div id="kindleReader_menu_contextMenu">\n    <div id="kindle_menu_loading" class="dictionary_loading"/>\n    <div id="kindle_menu_border"/>\n</div>'});
m.KindleReaderContextMenuDictionaryDotCom=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c=this.escapeExpression;g='<div class="dictionary"> \n    <div class="term"> \n        <span class="entry">';(d=e.entry)?d=d.call(b,{hash:{},data:a}):(d=b.entry,d="function"===typeof d?d.apply(b):d);g+=c(d)+'</span><span class="audio" id="dictionary_audio"></span><span class="pronunciation">';(d=e.pronunciation)?d=d.call(b,{hash:{},data:a}):(d=b.pronunciation,d="function"===
typeof d?d.apply(b):d);if(d||0===d)g+=d;g+='</span><br/>\n    </div> \n    <div class="definition">';(d=e.definition)?d=d.call(b,{hash:{},data:a}):(d=b.definition,d="function"===typeof d?d.apply(b):d);if(d||0===d)g+=d;g+='</div>  \n    <div class="reference"><a class="view_full_link" href="';(d=e.view_full_url)?d=d.call(b,{hash:{},data:a}):(d=b.view_full_url,d="function"===typeof d?d.apply(b):d);g+=c(d)+'" target="_blank"><span class="view_full">';(d=e.view_full)?d=d.call(b,{hash:{},data:a}):(d=b.view_full,
d="function"===typeof d?d.apply(b):d);return g+=c(d)+'</span><span class="view_full_logo"></span></a></div>\n</div>'});m.KindleReaderDictionary=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};g="";var c=this.escapeExpression;if((d=e["if"].call(b,b.isForContextMenu,{hash:{},inverse:this.program(3,function(f,h){return'\n    <div class="dictionary i18n full_definition">\n'},a),fn:this.program(1,function(f,h){return'\n    <div class="dictionary i18n">\n'},a),data:a}))||
0===d)g+=d;g+='\n        <div id="dictionaryList" class="dictionaryList">';(d=e.dictionaryUsed)?d=d.call(b,{hash:{},data:a}):(d=b.dictionaryUsed,d="function"===typeof d?d.apply(b):d);if(d||0===d)g+=d;g+="\n            ";if((d=e["if"].call(b,b.dictionaryListMenuEnabled,{hash:{},inverse:this.noop,fn:this.program(5,function(f,h){return'\n            <span class="downArrow"></span>\n            '},a),data:a}))||0===d)g+=d;g+="\n        </div>\n\n        ";if((d=e["if"].call(b,b.isForContextMenu,{hash:{},
inverse:this.program(9,function(f,h){return'\n            <div id="kindleReader_dictionary_scrollWrapper">\n                <div id="kindleReader_full_definition_scrollContainer" class="dictionaryMain"/>\n            </div>\n        '},a),fn:this.program(7,function(f,h){return'\n            <div class="dictionaryMain contextMenu"/>\n        '},a),data:a}))||0===d)g+=d;g+="\n        \n        ";if((d=e["if"].call(b,b.view_full,{hash:{},inverse:this.noop,fn:this.program(11,function(f,h){var n;var l=
'\n        <div class="reference"><a class="view_full_link" href="" target="_blank"><span class="view_full">';(n=e.view_full)?n=n.call(f,{hash:{},data:h}):(n=f.view_full,n="function"===typeof n?n.apply(f):n);return l+=c(n)+'</span><span class="rightArrow"></span></a></div>\n        '},a),data:a}))||0===d)g+=d;return g+"\n    </div>"});m.KindleReaderDictionaryDefinitions=q(function(g,b,e,d,a){function c(G,Q){var H;var X="\n                ";if((H=e["if"].call(G,G.partOfSpeech,{hash:{},inverse:K.noop,
fn:K.program(3,f,Q),data:Q}))||0===H)X+=H;X+="\n                ";if((H=e["if"].call(G,G.ipa,{hash:{},inverse:K.noop,fn:K.program(5,h,Q),data:Q}))||0===H)X+=H;X+='\n                <ul class="definitions_list content">\n                    ';if((H=e.each.call(G,G.definitions,{hash:{},inverse:K.noop,fn:K.program(7,n,Q),data:Q}))||0===H)X+=H;return X+"\n                </ul>\n            "}function f(G,Q){var H;Q='\n                <span class="word_type">';if((G=(H=G.partOfSpeech,"function"===typeof H?
H.apply(G):H))||0===G)Q+=G;return Q+"</span>\n                "}function h(G,Q){var H;Q='\n                <span class="ipa">';if((G=(H=G.ipa,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</span>\n                "}function n(G,Q){var H,X;var fa="\n                        ";if((H=e["if"].call(G,G.context,{hash:{},inverse:K.noop,fn:K.program(8,l,Q),data:Q}))||0===H)fa+=H;fa+="\n                        <li>";if((X=(H=G.definition,"function"===typeof H?H.apply(G):H))||0===X)fa+=X;fa+="</li>\n                        ";
if((X=e["if"].call(G,G.info,{hash:{},inverse:K.noop,fn:K.program(10,u,Q),data:Q}))||0===X)fa+=X;fa+="\n\n                        ";if((X=e["if"].call(G,G.subDefinitions,{hash:{},inverse:K.noop,fn:K.program(12,x,Q),data:Q}))||0===X)fa+=X;fa+="\n                        ";if((X=e["if"].call(G,G.orthography,{hash:{},inverse:K.noop,fn:K.program(15,v,Q),data:Q}))||0===X)fa+=X;fa+="\n                        ";if((X=e["if"].call(G,G.morphology,{hash:{},inverse:K.noop,fn:K.program(17,r,Q),data:Q}))||0===X)fa+=
X;return fa+"\n                    "}function l(G,Q){var H;Q="\n                        <li>\n                            <ul>        \n                                <li>";if((G=(H=G.context,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</li>\n                            </ul>\n                        </li>\n                        "}function u(G,Q){var H;Q="\n                        <li>\n                            <ul>        \n                                <li>";if((G=(H=G.info,
"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</li>\n                            </ul>\n                        </li>\n                        "}function x(G,Q){var H="\n                        <li>\n                            <ul>\n                                ";if((G=e.each.call(G,G.subDefinitions,{hash:{},inverse:K.noop,fn:K.program(13,t,Q),data:Q}))||0===G)H+=G;return H+"\n                            </ul>\n                        </li>\n                        "}function t(G,
Q){Q="\n                                <li>";if((G="function"===typeof G?G.apply(G):G)||0===G)Q+=G;return Q+"</li>\n                                "}function v(G,Q){var H;Q="\n                        <li>\n                            <ul>        \n                                <li>";if((G=(H=G.orthography,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</li>\n                            </ul>\n                        </li>\n                        "}function r(G,Q){var H;Q="\n                        <li>\n                            <ul>        \n                                <li>";
if((G=(H=G.morphology,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</li>\n                            </ul>\n                        </li>\n                        "}function k(G,Q){var H;var X="\n            ";if((H=e["if"].call(G,G.origin,{hash:{},inverse:K.noop,fn:K.program(20,y,Q),data:Q}))||0===H)X+=H;X+="\n\n            ";if((H=e["if"].call(G,G.derivatives,{hash:{},inverse:K.noop,fn:K.program(26,B,Q),data:Q}))||0===H)X+=H;X+="\n\n            ";if((H=e["if"].call(G,G.usage,{hash:{},
inverse:K.noop,fn:K.program(28,C,Q),data:Q}))||0===H)X+=H;X+="\n\n            ";if((H=e["if"].call(G,G.ipa,{hash:{},inverse:K.noop,fn:K.program(30,D,Q),data:Q}))||0===H)X+=H;X+="\n            \n            ";if((H=e["if"].call(G,G.relatedWords,{hash:{},inverse:K.noop,fn:K.program(32,F,Q),data:Q}))||0===H)X+=H;X+="\n            \n            ";if((H=e["if"].call(G,G.morphology,{hash:{},inverse:K.noop,fn:K.program(35,N,Q),data:Q}))||0===H)X+=H;X+="\n\n            ";if((H=e["if"].call(G,G.phrases,{hash:{},
inverse:K.noop,fn:K.program(37,L,Q),data:Q}))||0===H)X+=H;return X+"\n        "}function y(G,Q){var H,X;var fa="\n                \n                <div>"+U((H=(H=G.labels,null==H||!1===H?H:H.Origin),"function"===typeof H?H.apply(G):H))+"</div>\n                ";if((X=e["if"].call(G,(H=G.origin,null==H||!1===H?H:H.origin),{hash:{},inverse:K.noop,fn:K.program(21,w,Q),data:Q}))||0===X)fa+=X;fa+="\n\n                ";if((X=e["if"].call(G,(H=G.origin,null==H||!1===H?H:H.notes),{hash:{},inverse:K.noop,
fn:K.program(23,z,Q),data:Q}))||0===X)fa+=X;return fa+"\n\n            "}function w(G,Q){var H;Q='\n                    <div class="origin content">';if((G=(H=(H=G.origin,null==H||!1===H?H:H.origin),"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</div>\n                "}function z(G,Q){var H;var X='\n                    <div class="origin content">'+U((H=(H=G.labels,null==H||!1===H?H:H.Notes),"function"===typeof H?H.apply(G):H))+'\n                        <ul class="phrase_list content">\n                            ';
if((G=e.each.call(G,(H=G.origin,null==H||!1===H?H:H.notes),{hash:{},inverse:K.noop,fn:K.program(24,A,Q),data:Q}))||0===G)X+=G;return X+"\n                        </ul>\n                    </div>\n                "}function A(G,Q){Q="\n                                <li>";if((G="function"===typeof G?G.apply(G):G)||0===G)Q+=G;return Q+"</li>\n                            "}function B(G,Q){var H;Q="\n            \n            <div>"+U((H=(H=G.labels,null==H||!1===H?H:H.Derivatives),"function"===typeof H?
H.apply(G):H))+'</div>\n            <div class="derivatives content">';if((G=(H=G.derivatives,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</div>\n            "}function C(G,Q){var H;Q="\n            \n            <div>"+U((H=(H=G.labels,null==H||!1===H?H:H.Usage),"function"===typeof H?H.apply(G):H))+'</div>\n            <div class="usage content">';if((G=(H=G.usage,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</div>\n            "}function D(G,Q){var H;Q="\n            \n            <div>"+
U((H=(H=G.labels,null==H||!1===H?H:H.Ipa),"function"===typeof H?H.apply(G):H))+'</div>\n            <div class="ipa content">';if((G=(H=G.ipa,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</div>\n            "}function F(G,Q){var H,X;var fa="\n            \n            <div>";if((X=(H=(H=G.labels,null==H||!1===H?H:H.RelatedWords),"function"===typeof H?H.apply(G):H))||0===X)fa+=X;fa+='</div>\n            <div class="relatedWords">\n                <ul class="list content">\n                    ';
if((X=e.each.call(G,G.relatedWords,{hash:{},inverse:K.noop,fn:K.program(33,M,Q),data:Q}))||0===X)fa+=X;return fa+"\n                </ul>\n            </div>\n            "}function M(G,Q){Q="\n                    <li>";if((G="function"===typeof G?G.apply(G):G)||0===G)Q+=G;return Q+"</li>\n                    "}function N(G,Q){var H;Q='\n            \n            <div class="morphology content">';if((G=(H=G.morphology,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</div>\n            "}
function L(G,Q){var H,X;var fa="\n            \n            <div>";if((X=(H=(H=G.labels,null==H||!1===H?H:H.Phrases),"function"===typeof H?H.apply(G):H))||0===X)fa+=X;fa+='</div>\n            <div class="phrases">\n                <ul class="list content">\n                    ';if((X=e.each.call(G,G.phrases,{hash:{},inverse:K.noop,fn:K.program(38,P,Q),data:Q}))||0===X)fa+=X;return fa+"\n                </ul>\n            </div>\n            "}function P(G,Q){var H,X;var fa="\n                    <li>";
if((X=(H=G.phrase,"function"===typeof H?H.apply(G):H))||0===X)fa+=X;fa+="\n                        ";if((X=e["if"].call(G,G.definitions,{hash:{},inverse:K.noop,fn:K.program(39,V,Q),data:Q}))||0===X)fa+=X;return fa+"\n                    </li>\n                    "}function V(G,Q){var H='\n                            <ul class="definitions_list content">';if((G=e.each.call(G,G.definitions,{hash:{},inverse:K.noop,fn:K.program(40,Z,Q),data:Q}))||0===G)H+=G;return H+"\n                            </ul>\n                        "}
function Z(G,Q){var H,X;var fa="\n                                    ";if((H=e["if"].call(G,G.context,{hash:{},inverse:K.noop,fn:K.program(41,R,Q),data:Q}))||0===H)fa+=H;fa+="\n                                    <li>";if((X=(H=G.definition,"function"===typeof H?H.apply(G):H))||0===X)fa+=X;fa+="</li>\n                                    ";if((X=e["if"].call(G,G.info,{hash:{},inverse:K.noop,fn:K.program(43,I,Q),data:Q}))||0===X)fa+=X;fa+="\n            \n                                    ";if((X=
e["if"].call(G,G.subDefinitions,{hash:{},inverse:K.noop,fn:K.program(45,T,Q),data:Q}))||0===X)fa+=X;fa+="\n                                    ";if((X=e["if"].call(G,G.orthography,{hash:{},inverse:K.noop,fn:K.program(48,S,Q),data:Q}))||0===X)fa+=X;fa+="\n                                    ";if((X=e["if"].call(G,G.morphology,{hash:{},inverse:K.noop,fn:K.program(50,W,Q),data:Q}))||0===X)fa+=X;return fa+"\n                                "}function R(G,Q){var H;Q="\n                                    <li>\n                                        <ul>        \n                                            <li>";
if((G=(H=G.context,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</li>\n                                        </ul>\n                                    </li>\n                                    "}function I(G,Q){var H;Q="\n                                    <li>\n                                        <ul>        \n                                            <li>";if((G=(H=G.info,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</li>\n                                        </ul>\n                                    </li>\n                                    "}
function T(G,Q){var H="\n                                    <li>\n                                        <ul>\n                                            ";if((G=e.each.call(G,G.subDefinitions,{hash:{},inverse:K.noop,fn:K.program(46,J,Q),data:Q}))||0===G)H+=G;return H+"\n                                        </ul>\n                                    </li>\n                                    "}function J(G,Q){Q="\n                                            <li>";if((G="function"===typeof G?
G.apply(G):G)||0===G)Q+=G;return Q+"</li>\n                                            "}function S(G,Q){var H;Q="\n                                    <li>\n                                        <ul>        \n                                            <li>";if((G=(H=G.orthography,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</li>\n                                        </ul>\n                                    </li>\n                                    "}function W(G,Q){var H;
Q="\n                                    <li>\n                                        <ul>        \n                                            <li>";if((G=(H=G.morphology,"function"===typeof H?H.apply(G):H))||0===G)Q+=G;return Q+"</li>\n                                        </ul>\n                                    </li>\n                                    "}this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};g="";var K=this,U=this.escapeExpression;if((b=e.each.call(b,b.results,{hash:{},
inverse:K.noop,fn:K.programWithDepth(function(G,Q,H){var X;var fa='\n    <div class="dictionary_result">\n        <div class="term">\n            <span class="entry">'+U((X=G.headword,"function"===typeof X?X.apply(G):X))+'</span><br/>\n        </div>\n        <div class="definition">\n            ';if((X=e.each.call(G,G.definitionsGroups,{hash:{},inverse:K.noop,fn:K.program(2,c,Q),data:Q}))||0===X)fa+=X;fa+="\n        </div>\n        \n        ";if((X=e["if"].call(G,H.isFullDefPane,{hash:{},inverse:K.noop,
fn:K.program(19,k,Q),data:Q}))||0===X)fa+=X;return fa+"\n    </div>\n"},a,b),data:a}))||0===b)g+=b;return g+"\n"});m.KindleReaderEditNoteDialog=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c=this.escapeExpression,f=e.helperMissing;g='<div id="kindleReader_dialog_editNote">\n    <label id="kindleReader_dialog_editNote_title" class="kindle_dialog_title_text"></label>\n    <p>\n    <textarea\n        id="kindleReader_dialog_editNote_noteText"\n        cols="60"\n        rows="10"\n        maxlength="';
(d=e.maxNoteChars)?d=d.call(b,{hash:{},data:a}):(d=b.maxNoteChars,d="function"===typeof d?d.apply(b):d);g+=c(d)+"\"\n        placeholder='";a={hash:{},data:a};return g+=c((d=e.str,d?d.call(b,"k_R_dialog_editNote_placeholder",a):f.call(b,"str","k_R_dialog_editNote_placeholder",a)))+"'\n        ></textarea>\n    </p>\n</div>"});m.KindleReaderEmbeddedError=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return'<div id="kindleReader_embeddedError">\n    <div id="kindleReader_embeddedError_icon"></div>\n    <div id="kindleReader_embeddedError_text"></div>\n</div>'});
m.KindleReaderFreeTrialExpiredDialog=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g="<div id='kindleReader_dialog_freeTrialExpired'>\n    <label id='kindleReader_dialog_freeTrialExpired_title' class='kindle_dialog_title_text'>"+(h((c=e.str,c?c.call(b,"k_endOfFreeTrial_Title",d):f.call(b,"str","k_endOfFreeTrial_Title",d)))+"</label>\n    <p id='kindleReader_dialog_freeTrialExpired_label' class='kindle_dialog_text'></p>\n    <label id='kindleReader_dialog_freeTrialExpired_text' class='kindle_dialog_text'>");
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_endOfFreeTrial_Text",d):f.call(b,"str","k_endOfFreeTrial_Text",d)))+'</label>\n    <p id=\'kindleReader_dialog_freeTrialExpired_label\' class=\'kindle_dialog_text\'></p>\n    <div class=\'button-area\'>\n        <button id="kindleReader_dialog_buyFullVersion_btn" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false">\n            <span class="ui-button-text">';d={hash:{},data:a};
g+=h((c=e.str,c?c.call(b,"k_endOfFreeTrial_buyfullversion_button",d):f.call(b,"str","k_endOfFreeTrial_buyfullversion_button",d)))+"</span>\n        </button>\n        ";if((b=e["if"].call(b,b._isRemovalForFreeTrialsEnabled,{hash:{},inverse:this.noop,fn:this.program(1,function(n,l){var u;l={hash:{},data:l};return'\n        <button id="kindleReader_dialog_removeBook_btn" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false">\n            <span class="ui-button-text">'+
(h((u=e.str,u?u.call(n,"k_endOfFreeTrial_removebook_button",l):f.call(n,"str","k_endOfFreeTrial_removebook_button",l)))+"</span>\n        </button>\n        ")},a),data:a}))||0===b)g+=b;return g+"\n    </div>\n</div>"});m.KindleReaderFreeTrialMessageBar=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return"<div id='freeTrial_message_container'>\n    <div id='freeTrial_expiration_message'></div>\n</div>\n"});m.KindleReaderFullDefinitionPane=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];
e=e||g.helpers;a=a||{};var c;g=e.helperMissing;d=this.escapeExpression;a={hash:{},data:a};return'<div id="kindleReader_full_definition_pane">\n    <div id="kindleReader_full_definition_header">'+(d((c=e.str,c?c.call(b,"k_R_dictionary_view_full_i18n",a):g.call(b,"str","k_R_dictionary_view_full_i18n",a)))+'</div>\n    <div id="kindleReader_full_definition_content">\n        <div id="kindleReader_full_definition_loading" class="dictionary_loading"/>\n    </div>\n</div>')});m.KindleReaderGoToDialog=q(function(g,
b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g="<div id='kindleReader_dialog_goto'>\n    <label id='kindleReader_dialog_gotoTitle' class='kindle_dialog_title_text'>"+(h((c=e.str,c?c.call(b,"k_R_goto_menu_goto_location_title",d):f.call(b,"str","k_R_goto_menu_goto_location_title",d)))+"</label>\n\t<p>\n\t    <div id='kindleReader_dialog_gotoLabel' for='kindleReader_dialog_gotoField'  class='kindle_dialog_text'>");
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_goto_menu_goto_message",d):f.call(b,"str","k_R_goto_menu_goto_message",d)))+"</div>\n        <div class=\"goto_from\">\n            <input type='number' name='name' size='7' id='kindleReader_dialog_gotoField'>\n        </div>\n        <div id='kindleReader_dialog_gotoLocation' for='kindleReader_dialog_gotoField' class='kindle_dialog_text'>";d={hash:{},data:a};return g+=h((c=e.str,c?c.call(b,"k_R_goto_menu_goto_location",d):f.call(b,"str","k_R_goto_menu_goto_location",
d)))+"</div>\n    </p>\n</div>"});m.KindleReaderGoToPageDialog=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g="<div id='kindleReader_dialog_goto_page'>\n    <label id='kindleReader_dialog_gotoPageTitle' class='kindle_dialog_title_text'>"+(h((c=e.str,c?c.call(b,"k_R_goto_menu_goto_page_title",d):f.call(b,"str","k_R_goto_menu_goto_page_title",d)))+"</label>\n\t<p>\n\t    <div id='kindleReader_dialog_gotoPageLabel' for='kindleReader_dialog_gotoPageField'  class='kindle_dialog_text'>");
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_goto_menu_goto_page_message",d):f.call(b,"str","k_R_goto_menu_goto_page_message",d)))+"</div>\n        <div class=\"goto_from\">\n            <input type='text' name='name' size='7' id='kindleReader_dialog_gotoPageField'>\n        </div>\n        <div id='kindleReader_dialog_gotoPage' for='kindleReader_dialog_gotoPageField'  class='kindle_dialog_text'>";d={hash:{},data:a};return g+=h((c=e.str,c?c.call(b,"k_R_goto_menu_goto_page",d):f.call(b,"str","k_R_goto_menu_goto_page",
d)))+"</div>\n    </p>\n</div>"});m.KindleReaderImmersiveModeExit=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return"<div class='immersive_exit header'></div>\n<div class='immersive_exit footer'></div>"});m.KindleReaderLocationBar=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c=e.helperMissing,f=this.escapeExpression;g="<div id='kindleReader_footer' class=\"immersive_slide_area\">\n    ";if((b=e["if"].call(b,b.isRtl,{hash:{},inverse:this.program(3,
function(h,n){var l;n={hash:{},data:n};return"\n        <div id=\"kindleReader_footer_readerControls_left\">\n            <div\n                id='kindleReader_button_back'\n                tabindex = 1;\n                class='disabled'\n                title='"+(f((l=e.str,l?l.call(h,"k_R_menuButton_back_tooltip",n):c.call(h,"str","k_R_menuButton_back_tooltip",n)))+"'\n                data-action='reader_back'\n            ></div>\n        </div>\n\n        <div id=\"kindleReader_footer_readerControls_middle\">\n            <div id='kindleReader_progressbar_div'></div>\n            <div id='kindleReader_footer_message' class='message'></div>\n            <div id='kindleReader_download_progress' class='kindleReader_footer_fading message'>\n                <span id=\"kindleReader_checkmark\"></span>\n                <span id=\"kindleReader_download_progress_message\"></span>\n            </div>\n        </div>\n\n        <div id=\"kindleReader_footer_readerControls_right\"/>\n\n        <div id='kindleReader_locationPopup_div'>\n            <div id='kindleReader_locationPopup_labelDiv' class='ui-helper-clearfix ui-corner-all'></div>\n        </div>\n    ")},
a),fn:this.program(1,function(h,n){var l;n={hash:{},data:n};return"\n        <div id=\"kindleReader_footer_readerControls_left\" />\n\n        <div id=\"kindleReader_footer_readerControls_middle\">\n            <div id='kindleReader_progressbar_div'></div>\n            <div id='kindleReader_footer_message' class='message'></div>\n            <div id='kindleReader_download_progress' class='kindleReader_footer_fading message'>\n                <span id=\"kindleReader_checkmark\"></span>\n                <span id=\"kindleReader_download_progress_message\"></span>\n            </div>\n        </div>\n\n        <div id=\"kindleReader_footer_readerControls_right\">\n            <div\n                id='kindleReader_button_back'\n                tabindex = 1;\n                class='disabled rtl'\n                title='"+
(f((l=e.str,l?l.call(h,"k_R_menuButton_back_tooltip",n):c.call(h,"str","k_R_menuButton_back_tooltip",n)))+"'\n                data-action='reader_back'\n            ></div>\n        </div>\n\n        <div id='kindleReader_locationPopup_div'>\n            <div id='kindleReader_locationPopup_labelDiv' class='ui-helper-clearfix ui-corner-all'></div>\n        </div>\n    ")},a),data:a}))||0===b)g+=b;return g+"\n</div>"});m.KindleReaderPageArrow=q(function(g,b,e,d,a){function c(l,u){var x;u={hash:{},data:u};
return"\n        <div class='kindleReader_arrowBtn' title='"+(n((x=e.str,x?x.call(l,"k_R_pageArrow_next",u):h.call(l,"str","k_R_pageArrow_next",u)))+"'></div>\n        ")}function f(l,u){var x;u={hash:{},data:u};return"\n        <div class='kindleReader_arrowBtn' title='"+(n((x=e.str,x?x.call(l,"k_R_pageArrow_prev",u):h.call(l,"str","k_R_pageArrow_prev",u)))+"'></div>\n        ")}this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var h=e.helperMissing,n=this.escapeExpression;g="<div id=\"kindleReader_sideMargin\">\n    <div id='kindleReader_pageTurnAreaLeft' class='kindleReader_pageTurnArea'>\n        ";
if((d=e["if"].call(b,b.rtlPageAdvance,{hash:{},inverse:this.program(3,f,a),fn:this.program(1,c,a),data:a}))||0===d)g+=d;g+="\n    </div>\n    <div id='kindleReader_pageTurnAreaRight' class='kindleReader_pageTurnArea'>\n        ";if((d=e["if"].call(b,b.rtlPageAdvance,{hash:{},inverse:this.program(1,c,a),fn:this.program(3,f,a),data:a}))||0===d)g+=d;return g+"\n    </div>\n</div>"});m.KindleReaderSampleEnd=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return'<div id=\'kindle_sample_end_message\'>\n    <p id="kindle_sample_end_title_text" class="kindle_dialog_title_text"></p>\n    <p id="kindle_sample_end_message_text" class="kindle_dialog_text"> </p>\n</div>'});
m.KindleReaderSettingsDialog=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g="<div id='kindleReader_controlPanel'>\n    <div id='kindleReader_controlPanel_preview'></div>\n    \x3c!-- text size --\x3e\n    <div id='kindleReader_controlPanel_fontSize' class=\"kindleReader_settings_section\">\n        <label class='kindleReader_controlPanel_fieldLabel'>"+(h((c=e.str,c?c.call(b,"k_R_settings_fontSize_label",
d):f.call(b,"str","k_R_settings_fontSize_label",d)))+"</label>\n        <div class=\"kindleReader_controlPanel_optionButtons\">\n            <div id=\"kindleReader_controlPanel_xSmallFont\" class='kindleReader_controlPanel_5button'></div>\n            <div id=\"kindleReader_controlPanel_smallFont\"  class='kindleReader_controlPanel_5button'></div>\n            <div id=\"kindleReader_controlPanel_mediumFont\" class='kindleReader_controlPanel_5button'></div>\n            <div id=\"kindleReader_controlPanel_largeFont\"  class='kindleReader_controlPanel_5button'></div>\n            <div id=\"kindleReader_controlPanel_xLargeFont\" class='kindleReader_controlPanel_5button'></div>\n        </div>\n        <div class=\"kindleReader_controlPanel_buttonIndicators\">\n            <div id='kindleReader_controlPanel_xSmallFontSelected' class='kindleReader_controlPanel_5selectedDot'></div>\n            <div id='kindleReader_controlPanel_smallFontSelected'  class='kindleReader_controlPanel_5selectedDot'></div>\n            <div id='kindleReader_controlPanel_mediumFontSelected' class='kindleReader_controlPanel_5selectedDot'></div>\n            <div id='kindleReader_controlPanel_largeFontSelected'  class='kindleReader_controlPanel_5selectedDot'></div>\n            <div id='kindleReader_controlPanel_xLargeFontSelected' class='kindleReader_controlPanel_5selectedDot'></div>\n        </div>\n    </div>\n\n    \x3c!-- margins --\x3e\n    <div id='kindleReader_controlPanel_margin' class=\"kindleReader_settings_section\">\n        <label class='kindleReader_controlPanel_fieldLabel'>");
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_margins_label",d):f.call(b,"str","k_R_settings_margins_label",d)))+"</label>\n        <div class=\"kindleReader_controlPanel_optionButtons\">\n            <div id='kindleReader_controlPanel_xSmallMargin' class='kindleReader_controlPanel_5button'></div>\n            <div id='kindleReader_controlPanel_smallMargin'  class='kindleReader_controlPanel_5button'></div>\n            <div id='kindleReader_controlPanel_mediumMargin' class='kindleReader_controlPanel_5button'></div>\n            <div id='kindleReader_controlPanel_largeMargin'  class='kindleReader_controlPanel_5button'></div>\n            <div id='kindleReader_controlPanel_xLargeMargin' class='kindleReader_controlPanel_5button'></div>\n        </div>\n        <div class=\"kindleReader_controlPanel_buttonIndicators\">\n            <div id='kindleReader_controlPanel_xSmallMarginSelected' class='kindleReader_controlPanel_5selectedDot'></div>\n            <div id='kindleReader_controlPanel_smallMarginSelected'  class='kindleReader_controlPanel_5selectedDot'></div>\n            <div id='kindleReader_controlPanel_mediumMarginSelected' class='kindleReader_controlPanel_5selectedDot'></div>\n            <div id='kindleReader_controlPanel_largeMarginSelected'  class='kindleReader_controlPanel_5selectedDot'></div>\n            <div id='kindleReader_controlPanel_xLargeMarginSelected' class='kindleReader_controlPanel_5selectedDot'></div>\n        </div>\n    </div>\n    \n    \x3c!-- color mode --\x3e\n    <div id='kindleReader_controlPanel_colorMode' class=\"kindleReader_settings_section\">\n        <label class='kindleReader_controlPanel_fieldLabel'>";
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_colorMode_label",d):f.call(b,"str","k_R_settings_colorMode_label",d)))+"</label>\n        <div class=\"kindleReader_controlPanel_optionButtons\">\n            <div id='kindleReader_controlPanel_colorWhite' class='kindleReader_controlPanel_3button'>";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_colorMode_white",d):f.call(b,"str","k_R_settings_colorMode_white",d)))+"</div>\n            <div id='kindleReader_controlPanel_colorSepia' class='kindleReader_controlPanel_3button'>";
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_colorMode_sepia",d):f.call(b,"str","k_R_settings_colorMode_sepia",d)))+"</div>\n            <div id='kindleReader_controlPanel_colorBlack' class='kindleReader_controlPanel_3button'>";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_colorMode_black",d):f.call(b,"str","k_R_settings_colorMode_black",d)))+"</div>\n        </div>\n        <div class=\"kindleReader_controlPanel_buttonIndicators\">\n            <div id='kindleReader_controlPanel_colorWhiteSelected' class='kindleReader_controlPanel_3selectedDot'></div>\n            <div id='kindleReader_controlPanel_colorSepiaSelected' class='kindleReader_controlPanel_3selectedDot'></div>\n            <div id='kindleReader_controlPanel_colorBlackSelected' class='kindleReader_controlPanel_3selectedDot'></div>\n        </div>\n    </div>\n\n    \x3c!-- multi-column mode --\x3e\n    <div id='kindleReader_controlPanel_multiColumn' class=\"kindleReader_settings_section\">\n        <label class='kindleReader_controlPanel_fieldLabel'>";
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_multiColumnMode_label",d):f.call(b,"str","k_R_settings_multiColumnMode_label",d)))+"</label>\n        <div class=\"kindleReader_controlPanel_optionButtons\">\n            <div id='kindleReader_controlPanel_columnButton_on' class='kindleReader_controlPanel_switch'>";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_column_on_button",d):f.call(b,"str","k_R_settings_column_on_button",d)))+"</div>\n            <div id='kindleReader_controlPanel_columnButton_off' class='kindleReader_controlPanel_switch'>";
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_column_off_button",d):f.call(b,"str","k_R_settings_column_off_button",d)))+"</div>\n        </div>\n        <div id='kindleReader_controlPanel_optionButtons_msg' class='kindleReader_controlPanel_optionButtons_msg'>";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_column_disabled_msg",d):f.call(b,"str","k_R_settings_column_disabled_msg",d)))+"</div>\n    </div>\n\n    \x3c!-- show reading location mode --\x3e\n    <div id='kindleReader_controlPanel_showLocation' class=\"kindleReader_settings_showLocation kindleReader_settings_section\">\n        <label class='kindleReader_controlPanel_fieldLabel'>";
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_showLocation_label",d):f.call(b,"str","k_R_settings_showLocation_label",d)))+"</label>\n        <div class=\"kindleReader_controlPanel_optionButtons\">\n            <div id='kindleReader_controlPanel_showLocationButton_on' class='kindleReader_controlPanel_switch'>";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_settings_column_on_button",d):f.call(b,"str","k_R_settings_column_on_button",d)))+"</div>\n            <div id='kindleReader_controlPanel_showLocationButton_off' class='kindleReader_controlPanel_switch'>";
d={hash:{},data:a};return g+=h((c=e.str,c?c.call(b,"k_R_settings_column_off_button",d):f.call(b,"str","k_R_settings_column_off_button",d)))+"</div>\n        </div>\n    </div>\n        \n</div>"});m.KindleReaderSitbPane=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c;g=e.helperMissing;d=this.escapeExpression;a={hash:{},data:a};return'<div id="kindleReader_sitb_pane">\n    <div id="kindleReader_sitb_pane_header">\n        <div id="kindleReader_sitb_pane_title"></div>\n        <div id="kindleReader_sitb_pane_close_btn" class="closeButtonDark"></div>\n    </div>\n    <div id="kindleReader_sitb_pane_scrollWrapper">\n        <div id="kindleReader_sitb_pane_container" tabindex="-1"></div>\n        \n        <div id="kindleReader_sitb_message">'+
(d((c=e.str,c?c.call(b,"k_R_dialog_sitb_message_indexing",a):g.call(b,"str","k_R_dialog_sitb_message_indexing",a)))+'</div>\n    </div>\n    <div id="kindleReader_sitb_pane_beak"></div>\n</div>')});m.KindleReaderSitbResult=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return'<div class="kindleReader_sitb_result_container">\n    <div class="kindleReader_sitb_result_context_body"></div>\n    <div class="kindleReader_sitb_context_footer">\n        \n        \n        \n        <span class="kindleReader_sitb_location"></span>\n    </div>\n</div>'});
m.KindleReaderSitbResultCurLocMarker=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return'<div id="kindleReader_sitb_pane_cur_loc_marker" class="kindleReader_sitb_result_container marker">\n    <div class="kindleReader_sitb_result_cur_loc_marker"></div>\n</div>'});m.KindleReaderStatusMessage=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return'<div id=\'kindleReader_statusMessage_div\' class=\'ui-helper-clearfix ui-corner-all\'>\n    <div class="spinner">\n        <div class="bar1"></div>\n        <div class="bar2"></div>\n        <div class="bar3"></div>\n        <div class="bar4"></div>\n        <div class="bar5"></div>\n        <div class="bar6"></div>\n        <div class="bar7"></div>\n        <div class="bar8"></div>  \n        <div class="bar9"></div>      \n        <div class="bar10"></div>         \n        <div class="bar11"></div>             \n        <div class="bar12"></div>                 \n    </div>                                          \n    <span id=\'kindleReader_statusMessage_text\'></span>\n</div>'});
m.KindleReaderStorageViewer=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return'<div id="kindleReader_storage_viewer" class="kindleReader_storage_viewer">\n  <div id="kindleReader_storage_viewer_panel">\n\n    <form id="kindleReader_storage_viewer_header">\n        <select name="stores" id="kindleReader_storage_viewer_stores">\n            <option selected="selected">Display table\u2026</option>\n        </select>\n\n        <div id="kindleReader_storage_viewer_query">\n            <input type="search" autocomplete="on" form="queryForm" name="kindleReader_storage_viewer_query" id="q" size="75" placeholder="Query text" />\n            <select id="kindleReader_storage_viewer_queryDB" name="queryDB" onchange="SV.runQuery(this.options[this.selectedIndex].value)">\n                <option>on</option>\n            </select>\n        </div>\n\n        <div id="kindleReader_storage_viewer_clearStorageDiv">\n            <input type="button" id="kindleReader_storage_viewer_clearStorageButton" name="clearStorageDiv" value="Clear HTML5 storage">\n        </div>\n        <div id="kindleReader_storage_viewer_close_btn" class="closeButtonDark"></div>\n    </form>\n\n    <div id="kindleReader_storage_viewer_results_section">\n        <table id="kindleReader_storage_viewer_results">\n        </table>\n    </div>\n  </div>\n</div>'});
m.KindleReaderSyncPositionDialog=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g="<div id='kindleReader_dialog_syncPosition'>\n    <label id='kindleReader_dialog_syncPosition_title' class='kindle_dialog_title_text'>"+(h((c=e.str,c?c.call(b,"k_R_syncPosition_title",d):f.call(b,"str","k_R_syncPosition_title",d)))+'</label>\n    <p id=\'kindleReader_dialog_syncPosition_label\' class=\'kindle_dialog_text\'></p>\n    <div class=\'button-area\'>\n        <button id="kindleReader_dialog_syncPosition_sync_btn" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false">\n        \t<span class="ui-button-text">');
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_syncPosition_sync",d):f.call(b,"str","k_R_syncPosition_sync",d)))+'</span>\n        </button>\n        <button id="kindleReader_dialog_syncPosition_reset_btn" type="button" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only" role="button" aria-disabled="false">\n        \t<span class="ui-button-text">';d={hash:{},data:a};return g+=h((c=e.str,c?c.call(b,"k_R_syncPosition_reset",d):f.call(b,"str","k_R_syncPosition_reset",d)))+
"</span>\n        </button>\n    </div>\n</div>"});m["MANGA_LIBRARY_KCR_INTEGRATION_332550=T1/KindleReaderHeaderBar"]=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g="<div id='kindleReader_header' class='immersive_slide_area'>\n    <div id='kindleReader_header_left'>\n        <div\n            role ='alert'\n            tabindex='1'\n            aria-label='"+(h((c=e.str,c?c.call(b,"k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550",
d):f.call(b,"str","k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550",d)))+"'\n            id='screen_reader_not_supported_message'\n        ></div>\n        <div\n            id=\"header_kindleLogo\"\n            class=\"kindleReader_kindleLogo\"\n            data-action='reader_close'\n        ></div>\n        <div class=\"readerControls\">\n            <div\n                id='kindleReader_button_close'\n                class='kbtn header_bar_icon'\n                title='");
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_toolbar_library_button_tooltip",d):f.call(b,"str","k_R_toolbar_library_button_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_close'\n            ></div>\n\n            <div\n                id='kindleReader_button_goto'\n                class='header_bar_icon disabled'\n                title='";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_goto_tooltip",d):f.call(b,"str","k_R_menuButton_goto_tooltip",
d)))+"'\n                tabindex = 1;\n                data-action='reader_show_goto'\n            ></div>\n\n            <div\n                id='kindleReader_button_controlPanel'\n                class='header_bar_icon disabled'\n                title='";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_controlPane_tooltip",d):f.call(b,"str","k_R_menuButton_controlPane_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_show_settings'\n            ></div>\n\n            <div\n                id='kindleReader_bookmark'\n                class='header_bar_icon disabled'\n                title='";
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_bookmark_tooltip",d):f.call(b,"str","k_R_menuButton_bookmark_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_bookmark'\n            ></div>\n\n            <div\n                id='kindleReader_button_note'\n                class='header_bar_icon disabled'\n                title='";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_notesAndMarks_tooltip",d):f.call(b,"str","k_R_menuButton_notesAndMarks_tooltip",
d)))+"'\n                tabindex = 1;\n                data-action='reader_show_notes'\n            ></div>\n\n            <div\n                id='kindleReader_button_sync'\n                class='header_bar_icon disabled'\n                title='";d={hash:{},data:a};return g+=h((c=e.str,c?c.call(b,"k_R_menuButton_sync_tooltip",d):f.call(b,"str","k_R_menuButton_sync_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_sync'\n            ></div>\n        </div>\n    </div>\n    <div id='kindleReader_header_right'>\n        <div id='readerControlsRight' class='readerControls'>\n            <div id='kindleReader_sitb' class='disabled'>\n                <div id='kindleReader_input_sitb'>\n                    <input id='kindleReader_input_sitb_box' type='text' tabindex = 1 />\n                    <div id='kindleReader_input_sitb_clear'></div>\n                </div>\n                <button id='kindleReader_button_sitb' class='header_bar_button' tabindex = 1 value='' data-action='reader_search'/>\n            </div>\n        </div>\n    </div>\n</div>"});
m.ReaderImmersiveModeIcon=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];return"<div class='immersive_icon_tap_target' data-action=\"immersive_icon\"><div id='immersive_icon'></div></div>"});m["default/KindleReaderHeaderBar"]=q(function(g,b,e,d,a){this.compilerInfo=[2,">= 1.0.0-rc.3"];e=e||g.helpers;a=a||{};var c,f=e.helperMissing,h=this.escapeExpression;d={hash:{},data:a};g="<div id='kindleReader_header' class='immersive_slide_area'>\n    <div id='kindleReader_header_left'>\n        <div class=\"kindleReader_kindleLogo\" />\n        <div class=\"readerControls\">\n            <div\n                id='kindleReader_button_close'\n                class='kbtn header_bar_icon'\n                title='"+
(h((c=e.str,c?c.call(b,"k_R_toolbar_library_button_tooltip",d):f.call(b,"str","k_R_toolbar_library_button_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_close'\n            ></div>\n\n            <div\n                id='kindleReader_button_goto'\n                class='header_bar_icon disabled'\n                title='");d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_goto_tooltip",d):f.call(b,"str","k_R_menuButton_goto_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_show_goto'\n            ></div>\n\n            <div\n                id='kindleReader_button_controlPanel'\n                class='header_bar_icon disabled'\n                title='";
d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_controlPane_tooltip",d):f.call(b,"str","k_R_menuButton_controlPane_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_show_settings'\n            ></div>\n\n            <div\n                id='kindleReader_bookmark'\n                class='header_bar_icon disabled'\n                title='";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_bookmark_tooltip",d):f.call(b,"str","k_R_menuButton_bookmark_tooltip",
d)))+"'\n                tabindex = 1;\n                data-action='reader_bookmark'\n            ></div>\n\n            <div\n                id='kindleReader_button_note'\n                class='header_bar_icon disabled'\n                title='";d={hash:{},data:a};g+=h((c=e.str,c?c.call(b,"k_R_menuButton_notesAndMarks_tooltip",d):f.call(b,"str","k_R_menuButton_notesAndMarks_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_show_notes'\n            ></div>\n\n            <div\n                id='kindleReader_button_sync'\n                class='header_bar_icon disabled'\n                title='";
d={hash:{},data:a};return g+=h((c=e.str,c?c.call(b,"k_R_menuButton_sync_tooltip",d):f.call(b,"str","k_R_menuButton_sync_tooltip",d)))+"'\n                tabindex = 1;\n                data-action='reader_sync'\n            ></div>\n        </div>\n    </div>\n    <div id='kindleReader_header_right'>\n        <div id='readerControlsRight' class='readerControls'>\n            <div id='kindleReader_sitb' class='disabled'>\n                <div id='kindleReader_input_sitb'>\n                    <input id='kindleReader_input_sitb_box' type='text' tabindex = 1 />\n                    <div id='kindleReader_input_sitb_clear'></div>\n                </div>\n                <button id='kindleReader_button_sitb' class='header_bar_button' tabindex = 1 value='' data-action='reader_search'/>\n            </div>\n        </div>\n    </div>\n</div>"})})();
(function(){var q=Handlebars.template;(Handlebars.templates=Handlebars.templates||{}).KindleReaderHeaderBar=q(function(m,g,b,e,d){this.compilerInfo=[2,">= 1.0.0-rc.3"];b=b||m.helpers;d=d||{};var a,c=b.helperMissing,f=this.escapeExpression;e={hash:{},data:d};m="<div id='kindleReader_header' class='immersive_slide_area'>\n    <div id='kindleReader_header_left'>\n        <div\n            role ='alert'\n            tabindex='1'\n            aria-label='"+(f((a=b.str,a?a.call(g,"k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550",
e):c.call(g,"str","k_R_screen_reader_not_supported_message_MANGA_LIBRARY_KCR_INTEGRATION_332550",e)))+"'\n            id='screen_reader_not_supported_message'\n        ></div>\n        <div\n            id=\"header_kindleLogo\"\n            class=\"kindleReader_kindleLogo\"\n            data-action='reader_close'\n        ></div>\n        <div class=\"readerControls\">\n            <div\n                id='kindleReader_button_close'\n                class='kbtn header_bar_icon'\n                title='");
e={hash:{},data:d};m+=f((a=b.str,a?a.call(g,"k_R_toolbar_library_button_tooltip",e):c.call(g,"str","k_R_toolbar_library_button_tooltip",e)))+"'\n                tabindex = 1;\n                data-action='reader_close'\n            ></div>\n\n            <div\n                id='kindleReader_button_goto'\n                class='header_bar_icon disabled'\n                title='";e={hash:{},data:d};m+=f((a=b.str,a?a.call(g,"k_R_menuButton_goto_tooltip",e):c.call(g,"str","k_R_menuButton_goto_tooltip",
e)))+"'\n                tabindex = 1;\n                data-action='reader_show_goto'\n            ></div>\n\n            <div\n                id='kindleReader_button_controlPanel'\n                class='header_bar_icon disabled'\n                title='";e={hash:{},data:d};m+=f((a=b.str,a?a.call(g,"k_R_menuButton_controlPane_tooltip",e):c.call(g,"str","k_R_menuButton_controlPane_tooltip",e)))+"'\n                tabindex = 1;\n                data-action='reader_show_settings'\n            ></div>\n\n            <div\n                id='kindleReader_bookmark'\n                class='header_bar_icon disabled'\n                title='";
e={hash:{},data:d};m+=f((a=b.str,a?a.call(g,"k_R_menuButton_bookmark_tooltip",e):c.call(g,"str","k_R_menuButton_bookmark_tooltip",e)))+"'\n                tabindex = 1;\n                data-action='reader_bookmark'\n            ></div>\n\n            <div\n                id='kindleReader_button_note'\n                class='header_bar_icon disabled'\n                title='";e={hash:{},data:d};m+=f((a=b.str,a?a.call(g,"k_R_menuButton_notesAndMarks_tooltip",e):c.call(g,"str","k_R_menuButton_notesAndMarks_tooltip",
e)))+"'\n                tabindex = 1;\n                data-action='reader_show_notes'\n            ></div>\n\n            <div\n                id='kindleReader_button_sync'\n                class='header_bar_icon disabled'\n                title='";e={hash:{},data:d};return m+=f((a=b.str,a?a.call(g,"k_R_menuButton_sync_tooltip",e):c.call(g,"str","k_R_menuButton_sync_tooltip",e)))+"'\n                tabindex = 1;\n                data-action='reader_sync'\n            ></div>\n        </div>\n    </div>\n    <div id='kindleReader_header_right'>\n        <div id='readerControlsRight' class='readerControls'>\n            <div id='kindleReader_sitb' class='disabled'>\n                <div id='kindleReader_input_sitb'>\n                    <input id='kindleReader_input_sitb_box' type='text' tabindex = 1 />\n                    <div id='kindleReader_input_sitb_clear'></div>\n                </div>\n                <button id='kindleReader_button_sitb' class='header_bar_button' tabindex = 1 value='' data-action='reader_search'/>\n            </div>\n        </div>\n    </div>\n</div>"})})();
var BookChunk=function(){var q=Object.freeze?function(e){return Object.freeze(e)}:function(e){return e},m=["fragment","glyph","skeleton","resource","locationMap"],g={};m.forEach(function(e){g[e]={}});g.resource.huge=!0;var b={types:q(m),properties:q(g),getId:function(e){if(void 0!==e.fragmentMetadata)return e.fragmentMetadata.id;if(void 0!==e.skeletonMetadata)return e.skeletonMetadata.id;if(void 0!==e.glyphFragmentMetadata)return e.glyphFragmentMetadata.id;if(void 0!==e.metadata)return e.metadata.id;
KindleAssert(!1,"Can't get id from book chunk: unrecognizable metadata.")}};m.forEach(function(e){b[e.toUpperCase()+"_TYPE"]=e});return q(b)}(),BookDownloadController=function(){function q(g){if(!this instanceof q)return new q(g);var b={downloading:!1,waiting:!1,total:0,remaining:0,scaleFactor:1};Object.defineProperty(this,"downloading",{get:function(){return b.downloading},set:function(d){b.downloading=!!d},enumerable:!0});Object.defineProperty(this,"waiting",{get:function(){return b.waiting},set:function(d){b.waiting=
!!d},enumerable:!0});Object.defineProperty(this,"total",{get:function(){return b.total},set:function(d){b.total=d},enumerable:!0});Object.defineProperty(this,"scaledTotal",{get:function(){return b.total*b.scaleFactor},enumerable:!0});Object.defineProperty(this,"remaining",{get:function(){return b.remaining},set:function(d){b.remaining=d},enumerable:!0});Object.defineProperty(this,"scaledRemaining",{get:function(){return b.remaining*b.scaleFactor},enumerable:!0});Object.defineProperty(this,"scaleFactor",
{get:function(){return b.scaleFactor},set:function(d){b.scaleFactor=d},enumerable:!0});g=g||{};for(var e in g)void 0!==g[e]&&g.hasOwnProperty(e)&&b.hasOwnProperty(e)&&(b[e]=g[e])}var m={glyph:7,resource:20,sidecar:10,valueFor:function(g){return m.hasOwnProperty(g)?m[g]:1}};return{create:function(g){function b(){function l(v){if(h[v].waiting)return h[v].waiting=!1,h[v].downloading=!0,h[v].start(),!0}var u=!1,x=!1,t=!1;BookChunk.types.forEach(function(v){u=u||h[v].downloading;t=t||h[v].waiting});n.forEach(function(v){u=
u||h[v].downloading;x=x||h[v].waiting});t?BookChunk.types.some(l):u||x?!u&&x&&n.some(l):(KindleDebug.log("done downloading"),f.resolve())}function e(l){var u=new $.Deferred;if(0>=h[l].remaining)return d(l),u.resolve();l=g.downloaders[l];l.addEventListener("onFailed",function(x,t,v){h[x].waiting=!1;c(t,v);u.reject()});l.start();return u.promise()}function d(l){h[l].downloading=!1;h[l].waiting=!1;b()}function a(l){function u(){KindleDebug.log("Finished downloading sidecar: "+l);h[t].downloading=!1;
b()}function x(v){KindleDebug.error("Error downloading sidecar '"+l+"': "+v);h[t].downloading=!1;b()}var t="SC:"+l;n.push(t);h[t]=new q({scaleFactor:m.valueFor("sidecar"),total:1,remaining:1,waiting:!0});h[t].start=function(){KindleDebug.log("Downloading sidecar: "+l);g.sidecarManager.download(l).then(u,x)}}function c(l,u){l=l||Kindle.ERROR.CANCELLED;BookChunk.types.forEach(function(x){h[x].downloading&&(g.downloaders[x].cancel(),h[x].downloading=!1)});f.reject(l,u)}var f=$.Deferred(),h={},n=[];BookChunk.types.forEach(function(l){h[l]=
new q({scaleFactor:m.valueFor(l)})});return{startDownload:function(){var l=g.downloadingContentProvider;$.when(l.getBookinfo(),l.computeCacheQuota(),KindleModuleManager.getModule(Kindle.MODULE.SidecarManager)).done(function(u){var x=u.context.cacheState||u.cacheState;if(x===Kindle.BookInfo.CachedState.CACHED||x===Kindle.BookInfo.CachedState.PINNED)f.resolve();else{var t={skeleton:(Number(u.fragmap.fragmentMetadata.numberOfSkeletons)||1)-1,fragment:Number(u.fragmap.fragmentMetadata.numberOfFragments)-
1,glyph:(Number(u.metadata.numOfGlyphFragments)||0)-1,resource:u.manifest&&u.manifest.resourceManifest?Number(Math.max.apply(Math,Object.keys(u.manifest.resourceManifest))):-1,locationMap:u.metadata.locationsInfo&&u.metadata.locationsInfo.numOfLocations?Math.floor((Number(u.metadata.locationsInfo.numOfLocations)-1)/Number(u.metadata.locationsInfo.mapSize)):-1};BookChunk.types.forEach(function(v){var r=g.downloaders[v];r.init(t[v],g.fast);h[v].waiting=!0;h[v].remaining=h[v].total=r.getNumIds();h[v].start=
function(){e(v)}});Object.keys(g.sidecarManager.names).forEach(a);b()}})},failDownload:c,cancelDownload:c,pauseDownload:function(){BookChunk.types.forEach(function(l){h[l].downloading&&g.downloaders[l].pause()})},resumeDownload:function(){BookChunk.types.forEach(function(l){h[l].downloading&&g.downloaders[l].resume()})},whenDownloadComplete:function(){return f.promise()}}}}}();
function KindleBookDownloaderFactory(q){var m=5E3,g=0,b=1E3,e=$.Deferred().resolve(),d={};q.downloader=d;d.type=q.type;d.cache=q.cache;d.throttle=q.throttle;d.readAheadActive=!1;d.readAheadPauseCount=0;d.dbGetIdList=q.dbGetIdList;d.dbOosHandler=q.dbOosHandler;d.dbCheckCache=q.dbCheckCache;d.dbIsOos=q.dbIsOos;d.netGetter=q.netGetter;d.urlGetter=q.urlGetter;d.fileGetter=q.fileGetter;d.downloadError=q.downloadError;d.isIdRequired=q.isIdRequired||function(){return!0};d.numIds=0;d.pauseReadAhead=function(){this.readAheadPauseCount++};
d.resumeReadAhead=function(){this.readAheadPauseCount=Math.max(0,--this.readAheadPauseCount)};d.setNextId=function(a){void 0!==a&&this.readAheadActive&&(this.nextReadAheadId=a)};d.removeIdFromReadAhead=function(a){if(this.readAheadActive){var c;for(c=0;c<this.readAheadIds.length;c++)if(this.readAheadIds[c]===a){this.readAheadIds.splice(c,1);break}for(c=0;c<this.readAheadUrls.length;c++)if(this.readAheadUrls[c].id===a){this.readAheadUrls.splice(c,1);break}}};d.freeDbSpace=function(){var a=this;if(e&&
"pending"===e.state())return e.promise();e=new $.Deferred;a.dbCheckCache();a.dbOosHandler(e.resolve,function(){a.readAheadActive&&(a.readAheadActive=!1,a.dbIsOos());e.reject()});return e.promise()};d.isStillActive=function(a){return this.readAheadActive&&this.readAheadGeneration===a?!0:!1};d.readAheadOne=function(a){function c(){l.isStillActive(a)&&(l.numReadAheadNetRequests--,0===l.readAheadUrls.length?0===l.numReadAheadNetRequests&&setTimeout(function(){l.getReadAheadUrls(a)},l.interReadWait):setTimeout(function(){l.readAheadOne(a)},
l.interReadWait))}function f(t){var v=l.numReadAhead;t=t&&(t.data||JSON.stringify(t)).length||0;var r=Math.max(Date.now()-u,1);r=(t/r*1E3).toFixed();var k=l.readAheadThroughput;4E4<t&&(k=(.8*l.readAheadThroughput+.2*r).toFixed(),1E5<r?v=Math.min(v+1,l.maxReadAhead):1E4>r&&(v=Math.max(v-1,1)));v>l.numReadAhead?l.numReadAheadIncreased++:v<l.numReadAhead&&l.numReadAheadDecreased++;l.highestReadAhead=Math.max(l.highestReadAhead,v);l.numReadAhead=v;l.readAheadThroughput=k}function h(t,v,r){if(l.isStillActive(a)){if("timeout"===
v)l.throttle?f(null):1<l.numReadAhead&&l.numReadAhead--;else if("error"===v&&!1===KindleModuleManager.getModuleSync(KindleModuleManager.NETWORK).isOnline()){l.downloadError(Kindle.ERROR.NETWORK,Kindle.ERROR_CODE.OFFLINE);l.readAheadActive=!1;return}c()}}function n(t){l.isStillActive(a)&&l.throttle&&f(t)}var l=this,u=Date.now();if(l.isStillActive(a))if(l.readAheadStillAlive++,0<this.readAheadPauseCount)setTimeout(function(){l.readAheadOne(a)},l.startReadWait);else if(0===l.readAheadUrls.length&&0===
l.numReadAheadNetRequests)l.getReadAheadUrls(a);else for(;l.numReadAheadNetRequests<l.numReadAhead&&0<l.readAheadUrls.length;){l.numReadAheadNetRequests++;var x=l.readAheadUrls.shift();l.fileGetter(x,n,h)}};d.getReadAheadUrls=function(a){function c(x){n.readAheadUrls=x;setTimeout(function(){n.isStillActive(a)&&n.readAheadOne(a)},n.interReadWait)}function f(x){n.downloadError(Kindle.ERROR.NETWORK,Kindle.ERROR_CODE.NO_URL)}function h(){n.dbCheckCache()?n.getReadAheadUrls(a):n.isStillActive(a)&&(n.readAheadActive=
!1,n.dbIsOos())}var n=this;if(n.isStillActive(a))if(n.dbCheckCache()){n.readAheadStillAlive++;for(var l=[],u=0;u<n.readAheadIds.length&&n.readAheadIds[u]<n.nextReadAheadId;)u++;u===n.readAheadIds.length&&(u=0);l=n.readAheadIds.splice(u,n.numReadAheadUrls);0===l.length?n.refreshReadAheadList(a):(n.nextReadAheadId=u<n.readAheadIds.length?n.readAheadIds[u]:0,n.urlGetter(l,c,f))}else n.freeDbSpace().then(h)};d.refreshReadAheadList=function(a){function c(l){function u(){h.readAheadActive&&h.getReadAheadUrls(a)}
if(h.readAheadActive){var x=n.createSubTimer("success");h.readAheadStillAlive++;var t,v=[];for(t in l)v[l[t]]=!0;h.readAheadIds=[];for(t=0;t<=h.maxReadAheadId;t++)!v[t]&&d.isIdRequired(t)&&h.readAheadIds.push(t);x.addCount("needed",h.readAheadIds.length);x.addCount("total",h.maxReadAheadId+1);x.endTimer();n.endTimer();n.log();0<h.readAheadIds.length?(h.readAheadRemaining=h.readAheadIds.length,h.readAheadRemaining!==h.readAheadRemainingPrev&&(h.readAheadRemainingPrev=h.readAheadRemaining,setTimeout(u,
h.startReadWait))):h.readAheadActive=!1}}function f(l){n.endTimer();h.downloadError(Kindle.ERROR.UNKNOWN_DB_ERROR)}var h=this;if(a===this.readAheadGeneration&&this.readAheadActive){var n=KindleMetricsProfiler("bookDownloader.getIdList");this.dbGetIdList(c,f)}};d.readAheadWatchdog=function(){var a=this;this.readAheadActive&&(0!==this.readAheadStillAlive||0!==this.readAheadPauseCount&&0!==this.readAheadGeneration||(this.readAheadGeneration++,this.readAheadRemaining<this.generationReadAheadRemaining?
(this.numReadAheadNetRequests=0,this.generationReadAheadRemaining=this.readAheadRemaining,this.readAheadRemainingPrev=this.readAheadRemaining+1,this.watchDogTimeout=3E4,this.refreshReadAheadList(this.readAheadGeneration)):this.timeoutRetry?(this.generationReadAheadRemaining=this.readAheadRemaining+1,this.watchDogTimeout=12E4):this.downloadError(Kindle.ERROR.TIMEOUT)),setTimeout(function(){a.readAheadWatchdog()},this.watchDogTimeout));this.readAheadStillAlive=0};d.initialize=function(a,c){if(this.cache){this.fastest=
c;this.readAheadUrls=[];this.readAheadIds=[];this.numReadAheadNetRequests=this.nextReadAheadId=0;this.maxReadAheadId=a;this.readAheadActive=!0;this.readAheadGeneration=this.readAheadStillAlive=0;this.watchDogTimeout=3E4;for(c=this.numIds=0;c<=a;c++)d.isIdRequired(c)&&this.numIds++;this.readAheadRemaining=this.numIds+1;this.readAheadRemainingPrev=this.readAheadRemaining+1;this.generationReadAheadRemaining=this.numIds+2;this.fastest?(this.startReadWait=this.interReadWait=this.startReadAheadWait=0,this.numReadAhead=
8,this.numReadAheadUrls=200):(this.startReadAheadWait=m,this.interReadWait=g,this.startReadWait=b,this.numReadAhead=4,this.numReadAheadUrls=20,this.timeoutRetry=!0);this.throttle&&(this.maxReadAhead=this.numReadAhead,this.highestReadAhead=1,this.numReadAheadDecreased=this.numReadAheadIncreased=0,this.numReadAhead=1,this.readAheadThroughput=0,this.numReadAheadUrls=40);this.debugCounter=15}else this.readAheadActive=!1;this.initialized=!0};d.startReadAhead=function(){var a=this;KindleAssert(a.initialized,
"Failed to call initialize before startReadAhead");a.cache?setTimeout(function(){a.readAheadWatchdog()},a.startReadAheadWait):a.readAheadActive=!1};d.cancelReadAhead=function(){this.readAheadActive=!1;this.readAheadGeneration=-1;this.readAheadIds=this.readAheadUrls=null};d.setReadAheadTimersForTestMode=function(){b=g=m=0};return d}
function KindleReaderBookInfoProviderFactory(){return{BookInfo:function(q,m){function g(aa,ba){Q&&Q(ba-aa,ba)}function b(){var aa=new jQuery.Deferred;KindleLibraryBookCover.getOfflineCover(M).then(function(ba){P.getModuleSync(KindleModuleManager.DB_CLIENT).getBookDb().getTable("covers").insertRecord({asin:M,coverData:ba}).then(aa.resolve,aa.reject)},aa.reject);return aa.promise()}function e(aa){function ba(){var sa=P.getModuleSync("book_context");w.updateBookinfo({cacheState:aa,context:sa}).then(da.resolve,
da.reject)}function ca(sa,ya,va){da.reject(Kindle.ERROR.NETWORK,Kindle.ERROR_CODE.CACHED_STATE)}var da=new jQuery.Deferred;t().done(function(){if(P.isModuleInitialized("book_context")){var sa=P.getModuleSync("book_context");sa.isSample?ba():(sa={asin:M,kindleSessionId:sa.kindleSessionId,isOffline:aa===Kindle.BookInfo.CachedState.PINNED},P.getModuleSync(P.SERVICE_CLIENT).setOfflineStatus(sa).then(ba,ca))}else da.reject()});return da.promise()}function d(){za&&(za.endTimer(),za.log(),za=null);var aa=
S!==H&&S!==Kindle.BookInfo.CachedState.PINNED?e(H):!0;$.when(aa).then(function(){b().then(G.resolve,G.resolve)},function(ca){ca===Kindle.ERROR.NETWORK?G.reject(ca,Kindle.ERROR_CODE.CACHED_STATE):G.reject(Kindle.ERROR.UNKNOWN_DB_ERROR)});var ba=[];if(aa=F.getBookType())ba.push("::"+aa),aa===Kindle.BookInfo.BookType.MOBI8&&(!0===F.isContentScrambled()?ba.push("::mobi8::scrambled"):!1===F.isContentScrambled()&&ba.push("::mobi8::unscrambled"));w.getBookStatistics().then(function(ca){C&&(void 0!==ca.fragments&&
(V.increaseSubCounter(C,"fragmentCount",ca.fragments.count),V.increaseSubCounter(C,"fragmentsSize",ca.fragments.size)),void 0!==ca.glyphs&&(V.increaseSubCounter(C,"glyphCount",ca.glyphs.count),V.increaseSubCounter(C,"glyphsSize",ca.glyphs.size)),V.endMetrics(C,ba))},function(){C&&V.endMetrics(C,ba)})}function a(){function aa(){KindleModuleManager.getModuleSync(Kindle.MODULE.DB_CLIENT).removeEventListener(Kindle.ERROR.DB_LINGERING_WRITE,ca);d()}function ba(da){KindleModuleManager.getModuleSync(Kindle.MODULE.DB_CLIENT).removeEventListener(Kindle.ERROR.DB_LINGERING_WRITE,
ca);G.reject(da)}function ca(da){da.type===Kindle.ERROR.DB_LINGERING_WRITE&&(da.stalled?B.downloadController.pauseDownload():B.downloadController.resumeDownload())}B.downloadController?(KindleModuleManager.getModuleSync(Kindle.MODULE.DB_CLIENT).addEventListener(Kindle.ERROR.DB_LINGERING_WRITE,ca),B.downloadController.startDownload(),B.downloadController.whenDownloadComplete().then(aa,ba,[g,G.progress])):U?ba():G.reject(Kindle.CACHING.DISABLED)}function c(){if(!P.isModuleRegistered("book_fragmap"))if(Ja.isKaramel)P.registerModule("book_fragmap",
{});else{V.startSubTimer(xa,"getFragMap");var aa=y.getFragmap();aa.done(function(){V.endSubTimer(xa,"getFragMap")});P.registerModuleWithDeferred("book_fragmap",aa)}return P.getModule("book_fragmap")}function f(aa){if(void 0!==aa.cpr){var ba={};KindleCompression.lzAddStringsToDictionary(aa.cpr,ba);KindleCompression.lzAddNumbersToDictionary(ba);W=KindleCompression.lzGetDecompressionDictionary(ba)}void 0!==aa.cprJson&&(ba={},KindleCompression.lzAddStringsToDictionary(aa.cprJson,ba,256),KindleCompression.lzAddNumbersToDictionary(ba,
256),K=KindleCompression.lzGetDecompressionDictionary(ba))}function h(){function aa(ba){y.getMetadata().then(function(ca){V.endSubTimer(xa,"getMetadata");f(ca);ba.resolve(ca)},ba.reject)}P.isModuleRegistered("book_metaData")||(V.startSubTimer(xa,"getMetadata"),P.registerModuleWithInitializer("book_metaData",aa));return P.getModule("book_metaData")}function n(){if(!P.isModuleRegistered("book_manifest"))if(Ja.isKaramel)P.registerModule("book_manifest",{});else{V.startSubTimer(xa,"getManifest");var aa=
y.getManifest();aa.done(function(){V.endSubTimer(xa,"getManifest")});P.registerModuleWithDeferred("book_manifest",aa)}return P.getModule("book_manifest")}function l(){var aa;var ba={resource:{isIdRequired:function(da){return da in aa}}};var ca={bookinfo:F,moduleManager:P,contentCache:w,kcrFree:q.kcrFree};A=P.getModuleSync(Kindle.MODULE.SidecarManager).create(ca);y=NetworkContentProvider.create({context:P.getModuleSync("book_context"),bookInfo:F,asin:M});n().done(function(da){aa=da.resourceManifest||
{}});U?(ba={asin:M,source:y,cache:w,tweaks:ba,readAheadAgressively:X,sidecarManager:A},B=z=DownloadingContentProvider.create(ba),KindleLocalStorage.getItem(Kindle.CACHING.CACHING)!==Kindle.CACHING.ENABLED&&(V.emit([{name:k.ENABLED,params:{breakdown:["Browser"]}}]),KindleLocalStorage.setItem(Kindle.CACHING.CACHING,Kindle.CACHING.ENABLED))):(B=y,KindleLocalStorage.getItem(Kindle.CACHING.CACHING)!==Kindle.CACHING.DISABLED&&(V.emit([{name:k.DISABLED,params:{breakdown:["Browser"]}}]),KindleLocalStorage.setItem(Kindle.CACHING.CACHING,
Kindle.CACHING.DISABLED)));$.when(n(),c()).done(function(da,sa){ContentPrefetchOptimizations.modify(B,da,sa);u();x()})}function u(){function aa(ba){P.getModuleList(["book_metaData","book_manifest"]).done(function(ca){ca=KindleBookSkeletonBuilderFactory(B[BookChunk.SKELETON_TYPE],B[BookChunk.RESOURCE_TYPE],ca.book_manifest,W);V.endSubTimer(xa,"getSkeletonBuilder");ba.resolve(ca)}).fail(ba.fail)}P.isModuleRegistered("book_skeleton_builder")||(V.startSubTimer(xa,"getSkeletonBuilder"),P.registerModuleWithInitializer("book_skeleton_builder",
aa))}function x(){function aa(ba){P.getModule("book_manifest").done(function(ca){ca=KindleBookResourceUrlTranslator(B[BookChunk.RESOURCE_TYPE],ca,F);V.endSubTimer(xa,"getResourceUrlTranslator");ba.resolve(ca)}).fail(ba.fail)}P.isModuleRegistered("book_resource_urls")||(V.startSubTimer(xa,"getResourceUrlTranslator"),P.registerModuleWithInitializer("book_resource_urls",aa))}function t(){function aa(da){var sa=da.context&&da.metadata&&da.fragmap?da:null;da.cacheState&&(S=da.cacheState,S===Kindle.BookInfo.CachedState.PINNING&&
(H=Kindle.BookInfo.CachedState.PINNED),Kindle.BookInfo.CachedState.isFullyDownloaded(S)&&P.registerModule("book_key",!0));void 0!==da.context&&P.registerModule("book_context",da.context);void 0!==da.metadata&&(f(da.metadata),P.registerModule("book_metaData",da.metadata));void 0!==da.manifest?P.registerModule("book_manifest",da.manifest):P.registerModule("book_manifest",{});void 0!==da.fragmap&&P.registerModule("book_fragmap",da.fragmap);J.resolve(sa)}function ba(da){function sa(){window.location.reload(!0)}
da&&da.code===Kindle.DB.DATABASE_ERR&&0<=da.message.indexOf("no such table")&&V.emit("App::DatabaseGoneOnGetBookInfo",{breakdown:["Browser"]}).then(sa,sa);J.resolve()}if(!J){J=new jQuery.Deferred;if(q.contentProvider)w=q.contentProvider;else{var ca=P.getModuleSync(P.DB_CLIENT);ca.getBookDb()&&(ca=ca.getBookDb().BookInfoDB(M),w=DatabaseContentCache.create({bookinfoDb:ca,asin:M}))}w?w.queryBookinfo().then(aa,ba):(U=!1,ba())}return J.promise()}function v(){C=V.startMetrics("BookDownload::Reading",{breakdown:["Browser"]});
P.getModuleList(["book_context","book_metaData","book_manifest","book_fragmap","book_ok_to_download"]).done(function(aa){var ba=$.extend({},aa.book_context);delete ba.kindleSessionId;aa={metadata:aa.book_metaData,manifest:aa.book_manifest,fragmap:aa.book_fragmap,context:ba,cacheState:fa};U?(z.putBookinfo(aa),KindleLocalStorage.getItem(Kindle.CACHING.CACHING)!==Kindle.CACHING.ENABLED&&(V.emit([{name:k.ENABLED,params:{breakdown:["Browser"]}}]),KindleLocalStorage.setItem(Kindle.CACHING.CACHING,Kindle.CACHING.ENABLED))):
KindleLocalStorage.getItem(Kindle.CACHING.CACHING)!==Kindle.CACHING.DISABLED&&(V.emit([{name:k.DISABLED,params:{breakdown:["Browser"]}}]),KindleLocalStorage.setItem(Kindle.CACHING.CACHING,Kindle.CACHING.DISABLED))})}function r(aa){function ba(ka){var Fa=new jQuery.Deferred,jb=V.createTimer();if(ka){S=Kindle.BookInfo.CachedState.PARTIAL;var Ya=Kindle.ERROR.FORCE_DELETE}else S===Kindle.BookInfo.CachedState.PINNED?(fa=S=Kindle.BookInfo.CachedState.PINNING,H=Kindle.BookInfo.CachedState.PINNED,Ya=Kindle.ERROR.PINNED_CONTENT_UPGRADE):
S===Kindle.BookInfo.CachedState.CACHED&&(S=Kindle.BookInfo.CachedState.PARTIAL,Ya=Kindle.ERROR.CONTENT_UPGRADE);(w?w.deleteBooksData():$.Deferred().resolve()).fail(Fa.reject).done(function(){P.detachModule("book_key");P.detachModule("book_fragmap");P.detachModule("book_metaData");P.detachModule("book_manifest");P.detachModule("book_context");P.detachModule("book_skeleton_builder");P.detachModule("book_resource_urls");ya=null;jb.emit(ka?"BookDownload::ForceDelete":"BookDownload::ContentUpgrade");Fa.resolve(Ya)});
return Fa.promise()}function ca(ka){function Fa(){if(ka.downloadRestrictionReason)Va=ka.downloadRestrictionReason.reasonCode,Ja=ka,D.reject(F);else{var Wa=Qa.createSubTimer("finishStartReading");"YJ"==ka.format&&ka.isOwned&&!ka.isSample&&P.isModuleInitialized(Kindle.MODULE.SERVICE_CLIENT)&&P.getModule(Kindle.MODULE.SERVICE_CLIENT).then(function(Za){Za.getSearchIndexInfo({asin:ka.deliveredAsin,contentVersion:ka.contentVersion,facet:ka.format,formatVersion:ka.YJFormatVersion})});if(P.isModuleInitialized("book_context")){var Ca=
P.getModuleSync("book_context"),$a=!1;"FreeTrial"===Ca.originType&&Ca.expirationDate!==ka.expirationDate&&(Ca.expirationDate=ka.expirationDate,$a=!0);Ca.contentVersion===ka.contentVersion&&Ca.lastPageReadData&&ka.lastPageReadData&&Ca.lastPageReadData.position!==ka.lastPageReadData.position&&(Ca.lastPageReadData=ka.lastPageReadData,$a=!0);void 0===Ca.isOwned&&(Ca.isOwned=void 0!==ka.isOwned?ka.isOwned:!0,$a=!0);void 0===Ca.contentType&&(Ca.contentType=ka.contentType||(Ca.isSample?Kindle.CONTENT_TYPE.EBSP:
Kindle.CONTENT_TYPE.EBOK),$a=!0);$a&&w.updateBookinfo({context:Ca});Ca.kindleSessionId=ka.kindleSessionId;Ja=Ca}else Ja=ka,P.registerModule("book_context",ka);if("FreeTrial"===ka.originType&&(KindleBadging.pushAsinForBadgeUpdate(F.getAsin()),ka.expirationDate<=Date.now())){Va=Kindle.ERROR.FREE_TRIAL_EXPIRED;D.reject(F);return}if(ka.contentType===Kindle.CONTENT_TYPE.EBSP)L||ka.isOwned||(U=!1,w=null),P.isModuleInitialized("book_key")||P.registerModule("book_key",!0);else if(q.isSample){Wa.endTimer();
Qa.endTimer();Qa.log();Va=Kindle.ERROR.UNKNOWN_ERR;D.reject(F);return}ka.contentChecksum&&!P.isModuleInitialized("book_key")&&P.registerModule("book_key",ka.contentChecksum);ya||(zb=!0,l(),v());$.when(h(),n(),c()).done(function(){Wa.endTimer();Wa=Qa.createSubTimer("resolve");D.resolve(F);Wa.endTimer();Qa.endTimer();Qa.log()}).fail(function(Za){Va=Kindle.ERROR.OPEN_BOOK_LOAD_FAILURE;D.reject(F)});"YJ"!==ka.format&&A.getPageNumbers().done(function(Za){Za&&(T=Za,T.arePageNumbersAvailable()&&"undefined"!==
typeof KindleReaderUI&&KindleReaderUI.initializePageNumbers(T))});P.getModuleList(["book_context","book_metaData","book_manifest","book_fragmap","book_ok_to_download"]).done(a).fail(G.reject)}}kb=!0;va.endTimer();V.endSubTimer(xa,"StartReading");var jb=ya&&ka.contentVersion&&ka.contentVersion!==ya.context.contentVersion,Ya=ya&&ka.formatVersion&&ka.formatVersion!==ya.context.formatVersion,eb=ka.downloadRestrictionReason&&ka.downloadRestrictionReason.reasonCode;eb=eb===Kindle.ERROR.CONTENT_LOAN_ENDED||
eb===Kindle.ERROR.CONTENT_RENTAL_EXPIRED;Z=jb||Ya;jb||Ya||eb?ba(eb).then(Fa,function(Wa){Va=Wa;D.reject(F)}):Fa()}function da(ka){kb=!1;V.endSubTimer(xa,"StartReading");ya?(Ja=ya.context,D.resolve(F)):(Va=ka,D.reject(F));Kindle.BookInfo.CachedState.isFullyDownloaded(S)?(A.getPageNumbers().done(function(Fa){Fa&&(T=Fa,T.arePageNumbersAvailable()&&"undefined"!==typeof KindleReaderUI&&KindleReaderUI.initializePageNumbers(T))}),G.resolve()):G.reject(Kindle.ERROR.NETWORK,Kindle.ERROR_CODE.START_READING)}
function sa(ka){Ib.endTimer();ya=ka;V.endSubTimer(xa,"CheckDB");V.startMetrics("Reader::StartReading");va=Qa.createSubTimer("startReading");ka=$.extend({asin:M},q);ya&&ya.context&&S===Kindle.BookInfo.CachedState.PINNED&&(ka.kindleSessionId=ya.context.kindleSessionId);V.startSubTimer(xa,"MetadataLoaded");D.always(function(Fa){V.endSubTimer(xa,"MetadataLoaded");Fa="MetadataLoaded::";zb?(Fa+="RemoteContent",lb=!0):Fa+="LocalContent";V.renameSubTimer(xa,"MetadataLoaded",Fa)});V.startSubTimer(xa,"StartReading");
tb=Jb(ka);ya&&l();tb.then(ca,da)}var ya,va,tb;G=new jQuery.Deferred;xa=aa;var Qa=KindleMetricsProfiler("bookInfo.startReading");var Ib=Qa.createSubTimer("getInfoFromDB");V.startSubTimer(xa,"CheckDB");"only"===q.kcrFree&&(q.isSample=!0);var zb=!1;q.isSample&&!L?(U=!1,sa(null)):t().done(sa);return D.promise()}var k={DISABLED:"Book::Caching::Disabled",ENABLED:"Book::Caching::Enabled"},y=null,w=null,z=null,A=null,B=null,C,D=$.Deferred(),F,M=q.asin,N=q.isSample,L=q.cacheSample,P=m||KindleModuleManager,
V=P.getModuleSync(P.METRICS_MANAGER),Z,R=null,I=null,T=null,J=null,S=null,W=null,K=null,U=!0,G=null,Q=null,H=Kindle.BookInfo.CachedState.CACHED,X=!1,fa=Kindle.BookInfo.CachedState.PARTIAL,za=null,xa=null,kb,Va,Ja,Ab=!1,lb=!1,Jb=function(aa){var ba=new jQuery.Deferred;P.getModuleSync(P.SERVICE_CLIENT).startReading(aa).pipe(function(ca){var da=ca.downloadRestrictionReason&&ca.downloadRestrictionReason.reasonCode,sa=[Kindle.ERROR.CONTENT_LOANED,Kindle.ERROR.CONTENT_LOAN_ENDED,Kindle.ERROR.CONTENT_LICENSE_EXCEEDED,
Kindle.ERROR.CONTENT_RENTAL_EXPIRED,Kindle.ERROR.SESSION_LIMIT_EXCEEDED];return aa.kcrFree&&ca&&ca.contentType!==Kindle.CONTENT_TYPE.EBSP&&0<=sa.indexOf(da)?(aa.isSample=!0,P.getModuleSync(P.SERVICE_CLIENT).startReading(aa)):ca}).pipe(function(ca){var da=ca.isSample||!1;void 0===ca.isOwned&&(ca.isOwned=!da);void 0===ca.contentType&&(ca.contentType=da?Kindle.CONTENT_TYPE.EBSP:Kindle.CONTENT_TYPE.EBOK);aa.kcrFree&&(ca.kcrFree=!0);ca.isKaramel="YJ"===ca.format;R=ca.kindleSessionId;ba.resolve(ca)},function(ca,
da,sa){ba.reject("timeout")});return ba.promise()};return F={getBookInfoDfd:function(){return D.promise()},getAsin:function(){return M},getRefEmId:function(){var aa=P.getModuleSync("book_metaData");return aa.refEmId||aa.referenceEmbeddedId||aa.guid},getIsSample:function(){return N},isOpenedOnline:function(){return kb},getOpenError:function(){return Va},getContext:function(){return Ja},startReading:function(aa,ba){P.registerModuleWithDeferred("book_ok_to_download",ba);return r(aa)},doneReading:function(){B.close(Kindle.ERROR.USER_CLOSED_BOOK)},
getImageBaseUrl:function(){return P.getModuleSync("book_context").imageBaseUrl+"/"},getKindleSessionId:function(){return R},getFragmentMap:function(aa,ba){setTimeout(function(){P.getModule("book_fragmap").then(aa,ba)},15)},getBookType:function(){return Ja.isKaramel?Kindle.BookInfo.BookType.YJ:P.getModuleSync("book_fragmap").fragmentMetadata.bookType},getBookSkeleton:function(aa,ba,ca){P.getModule("book_skeleton_builder").then(function(da){da.buildSkeleton(ca).then(aa,ba)},ba)},getBookFragments:function(aa,
ba,ca){B[BookChunk.FRAGMENT_TYPE].getChunks(ca,function(da){if(1===da.fragmentMetadata.compression||2===da.fragmentMetadata.compression){da.fragmentData=KindleCompression.lzExpandWithStaticDictionary(da.fragmentData,W);if(void 0!==da.paraData&&"string"===typeof da.paraData){var sa=KindleCompression.lzExpandWithStaticDictionary(da.paraData,K,256);da.paraData=JSON.parse(sa)}delete da.fragmentMetadata.compression}aa(da)},ba)},getGlyphFragments:function(aa,ba,ca){B[BookChunk.GLYPH_TYPE].getChunks(ca,
function(da){if(1===da.glyphFragmentMetadata.compression||"string"===typeof da.glyphData){var sa=KindleCompression.lzExpandWithStaticDictionary(da.glyphData,K,256);da.glyphData=JSON.parse(sa);delete da.glyphFragmentMetadata.compression}aa(da)},ba)},getMetadata:function(aa,ba){return P.getModule("book_metaData").then(aa,ba)},getResourceUrls:function(aa,ba,ca){P.getModule("book_resource_urls").then(function(da){da.getResourceUrls(ca,aa,ba)},ba)},UNKNOWN_FPR:-1,getFurthestPositionReadData:function(){return P.getModuleSync("book_context").lastPageReadData||
{}},getLocationConverter:function(){function aa(sa){var ya=jQuery.Deferred();B[BookChunk.LOCATIONMAP_TYPE].getChunks([sa],ya.resolve,ya.reject);return ya}if(null===I)if(Ja.isKaramel)I=KindleUserLocationConverter.getLocationConverter(Kindle.BookInfo.BookType.YJ);else{var ba={},ca=P.getModuleSync("book_fragmap"),da=P.getModuleSync("book_metaData");ba.locationsInfo=da.locationsInfo;ba.minPosition=ca.fragmentArray[0].cPos;ba.maxPosition=ca.fragmentArray[ca.fragmentArray.length-1].ePos;ba.mapGetter=aa;
I=KindleUserLocationConverter.getLocationConverter(ca.fragmentMetadata.bookType,ba)}return I},getPageNumberConverter:function(){return T},hasCover:function(aa,ba){var ca=$.Deferred();P.getModuleSync("book_context").manifestUrl?P.getModule("book_manifest").then(function(da){da=da.coverResource;ca.resolve(void 0!==da&&null!==da)},ca.reject):ca.resolve(!1);return ca.promise().then(aa,ba)},isContentScrambled:function(){return Ab},updateContentScrambledFlag:function(aa){aa.metadata.map&&(Ab=!0)},setNetworkAccessed:function(aa){lb=
aa},isNetworkAccessed:function(){return lb},getCoverUrl:function(aa,ba){var ca=$.Deferred();P.getModuleSync("book_context").manifestUrl?P.getModule("book_manifest").then(function(da){da=da.coverResource;void 0!==da&&null!==da&&B[BookChunk.RESOURCE_TYPE].getChunks(da,function(sa){ca.resolve(sa)},ca.reject)},ca.reject):ca.resolve(null);return ca.promise().then(aa,ba)},getCachedAnnotations:function(){return w?w.getAnnotations():$.Deferred().reject()},cacheAnnotations:function(aa){return w?w.putAnnotations(aa):
$.Deferred().reject()},getCachedPageNumbers:function(){return w?w.getPageNumbers():$.Deferred().reject()},cachePageNumbers:function(aa){return w?w.putPageNumbers(aa):$.Deferred().reject()},getBookPositions:function(){var aa=new jQuery.Deferred;P.getModule("book_metaData").then(function(ba){var ca=KindleModuleManager.getModuleSync("book_context");aa.resolve({toc:ba.positions.toc,srl:ca.srl||ba.positions.srl,cover:ba.positions.cover})},aa.reject);return aa.promise()},getSearchIndex:function(){return A.getSearchIndex()},
startDownloading:function(aa,ba){[Kindle.MODULE.SidecarManager,Kindle.MODULE.SearchIndexManager,Kindle.MODULE.PageNumberManager].forEach(function(ca){P.isModuleRegistered(ca)||(KindleDebug.log("Copying registration of "+ca),P.registerModule(ca,KindleModuleManager.getModuleSync(ca)))});KindleReaderAnnotationManager.clear();H=Kindle.BookInfo.CachedState.PINNED;X=!0;P.registerModuleWithDeferred("book_ok_to_download",ba);aa=r(aa);G.always(KindleReaderAnnotationManager.clear);return aa},cancelDownloading:function(aa){B.downloadController&&
B.downloadController.failDownload(aa||Kindle.ERROR.CANCELLED)},pauseDownloading:function(){z&&z.downloadController.pauseDownload()},resumeDownloading:function(){z&&z.downloadController.resumeDownload()},getDownloadComplete:function(aa){Q=aa;return G.promise()},isBookDownloaded:function(){return S===Kindle.BookInfo.CachedState.CACHED||S===Kindle.BookInfo.CachedState.PINNED},setCachedState:e,getSizeInfo:function(){var aa=new jQuery.Deferred;$.when(P.getModule("book_metaData"),w.computeQuota()).then(function(ba,
ca){aa.resolve({bookSize:ba.bookSize,quota:ca})},aa.reject);return aa.promise()},isUpdated:function(){return!!Z}}}}}var KindleReaderBookInfoProvider=KindleReaderBookInfoProviderFactory();
function KindleBookSkeletonBuilderFactory(q,m,g,b){function e(f,h){h&&(f=f.replace(/\burl\s*\(\s*(?:'([^']*)'|"([^"]*)")\s*\)/gi,function(n,l,u){return(l=h[l||u])?'url("'+l+'")':null===l?"none":n}));return f}function d(f,h,n,l){f=f.includes;if(void 0!==f){for(var u,x=0;x<f.length;x++){var t=l[f[x]],v=h[t.metadata.id];"text/css"===v.type&&(u=u||{},u[v.name]=t.data)}u&&(n.skeletonData=n.skeletonData.replace(/<link\s(?:[^\/>'"]|'[^']*'|"[^"]*")*href\s*=\s*(?:'([^']*)'|"([^"]*)")(?:[^\/>'"]|'[^']*'|"[^"]*")*(?:\/>|>\s*<\/link>)/gi,
function(r,k,y){return(k=u[k||y])?'<style type="text/css">'+k+"</style>":r}))}}function a(f,h,n,l){if(null!==n){var u=f.resourceManifest;f=f.skeletonManifest[h.skeletonMetadata.id];for(var x in n){var t=n[x],v=u[t.metadata.id].includes;if(void 0!==v){for(var r={},k=0;k<v.length;k++){var y=n[v[k]];r[u[v[k]].name]=void 0===y?null:y.data}t.data=e(t.data,r)}}d(f,u,h,n);n=f.depends;if(void 0!==n){x=[];for(f=0;f<n.length;f++)t=u[n[f]],void 0!==t.resInfo&&x.push(t.resInfo);h.resourceInfo=x}}l.resolve(h)}
var c={};c.skeletonManager=q;c.resourceManger=m;c.manifest=g;c.dictionary=b;c.buildSkeleton=function(f){function h(y){y.data=e(y.data,y.resList);r[y.metadata.id]=y;x++;null!==v&&x>=u&&a(k,v,r,n)}var n=new jQuery.Deferred,l=this.dictionary,u=0,x=0,t=[];void 0!==this.manifest.skeletonManifest&&void 0!==this.manifest.skeletonManifest[f]&&null!==this.manifest.skeletonManifest[f].depends&&(t=this.manifest.skeletonManifest[f].depends.slice(),u=t.length);var v=null,r=null,k=this.manifest;this.skeletonManager.getChunks([f],
function(y){1===y.skeletonMetadata.compression&&(y.skeletonData=KindleCompression.lzExpandWithStaticDictionary(y.skeletonData,l),delete y.skeletonMetadata.compression);x>=u?a(k,y,r,n):v=y},n.reject);0<u&&(r={},this.resourceManger.getChunks(t,h,n.reject));return n.promise()};return c}
var KindleCompression=function(){function q(b,e,d){d=0<d?d:10085;for(a in e)e[a]>=d&&(d=e[a]+1);var a=d;for(var c in b){d=b[c];for(var f=2;f<=d.length;f++){var h=d.substr(0,f);e.hasOwnProperty(h)||(e[h]=a++)}}return e}function m(b,e){var d=10085;var a="";for(var c=0;c<e.length;){var f=e.charAt(c);c++;9983>=f.charCodeAt(0)?b.hasOwnProperty(a+f)?a+=f:(0<a.length&&65533>d&&(b[a+f]=d,d++,55295===d&&(d=57344)),a=f):a=""}return b}function g(){if(void 0===defaultDictionary||defaultDictionary==={})defaultDictionary=
m({},defaultDictionaryString);return defaultDictionary}return{lzCompress:function(b){var e={},d=[],a,c=10085;var f=a="";for(var h=0;h<b.length;){var n=b.charAt(h);h++;if(9983>=n.charCodeAt(0)){for(;0<f.length;){var l=Math.min(100,f.length);var u=f.substr(0,l);f=f.substr(l);d.push(9984+l);for(l=0;l<u.length;l++)d.push(u.charCodeAt(l))}e.hasOwnProperty(a+n)?a+=n:(0<a.length&&(d.push(1===a.length?a.charCodeAt(0):e[a]),65533>c&&(e[a+n]=c,c++,55295===c&&(c=57344))),a=n)}else 0<a.length&&(d.push(1===a.length?
a.charCodeAt(0):e[a]),a=""),f+=n}for(0<a.length&&d.push(1===a.length?a.charCodeAt(0):e[a]);0<f.length;)for(l=Math.min(100,f.length),u=f.substr(0,l),f=f.substr(l),d.push(9984+l),l=0;l<u.length;l++)d.push(u.charCodeAt(l));for(i=0;i<d.length;i++)d[i]=String.fromCharCode(d[i]);return d.join("")},lzExpand:function(b){for(var e={},d=[],a,c=10085,f="",h,n=0;n<b.length;){a=b.charCodeAt(n);n++;if(9983>=a)a=String.fromCharCode(a);else if(10085<=a)(a=e[a])||(a=f+h);else{f=a-9984;d.push(b.substr(n,f));n+=f;f=
"";continue}d.push(a);h=a.charAt(0);65533>c&&0<f.length&&(e[c]=f+h,c++,55295===c&&(c=57344));f=a}return d.join("")},lzBuildDictionary:m,lzGetDecompressionDictionary:function(b){var e=[],d;for(d in b)e[b[d]]=d;return e},lzAddStringsToDictionary:q,lzAddNumbersToDictionary:function(b,e){for(var d=[],a=100;1E3>a;a++)d.push(""+a);return q(d,b,e)},lzCompressWithStaticDictionary:function(b,e){if(void 0===e||e==={})e=g();var d=[],a;var c=a="";for(var f=0;f<b.length;){var h=b.charAt(f);f++;if(9983>=h.charCodeAt(0)){for(;0<
c.length;){var n=Math.min(100,c.length);var l=c.substr(0,n);c=c.substr(n);d.push(9984+n);for(n=0;n<l.length;n++)d.push(l.charCodeAt(n))}e.hasOwnProperty(a+h)?a+=h:(0<a.length&&d.push(1===a.length?a.charCodeAt(0):e[a]),a=h)}else 0<a.length&&(d.push(1===a.length?a.charCodeAt(0):e[a]),a=""),c+=h}for(0<a.length&&d.push(1===a.length?a.charCodeAt(0):e[a]);0<c.length;)for(n=Math.min(100,c.length),l=c.substr(0,n),c=c.substr(n),d.push(9984+n),n=0;n<l.length;n++)d.push(l.charCodeAt(n));for(i=0;i<d.length;i++)d[i]=
String.fromCharCode(d[i]);return d.join("")},lzExpandWithStaticDictionary:function(b,e,d){if(void 0===e||e===[]){if(void 0===defaultDeDictionary||defaultDeDictionary===[]){g();defaultDeDictionary=[];for(var a in defaultDictionary)defaultDeDictionary[defaultDictionary[a]]=a}e=defaultDeDictionary}a=9983;var c=10085;void 0!==d&&(a=d-1,c=d);d=[];for(var f=0;f<b.length;){var h=b.charCodeAt(f);f++;h<=a?d.push(String.fromCharCode(h)):h>=c?d.push(e[h]):(h-=9984,d.push(b.substr(f,h)),f+=h)}return d.join("")}}}(),
ContentMigration=function(){function q(e){function d(n){var l="get"+(n.substr(0,1).toUpperCase()+n.substr(1))+"Ids";return e.source[l]().pipe(function(u){function x(){var r=u.splice(0,100);if(0===r.length)t.then(v.resolve,v.reject);else{var k="get"+(n.substr(0,1).toUpperCase()+n.substr(1))+"s";r=e.source[k](r);$.when(r,t).then(function(y){var w={};y.forEach(function(z,A){w[A]=z});t=e.target("putChunksNonT",e.asin,n,w);setTimeout(x,100)},v.reject)}}var t=$.Deferred().resolve(),v=$.Deferred();x();return v.promise()})}
function a(){var n=BookChunk.types[f++];n?d(n).then(a,c.reject):c.resolve()}var c=$.Deferred(),f=0,h=e.timer.createSubTimer("chunks");a();c.done(function(){h.endTimer()});return c.promise()}function m(e){var d=$.Deferred(),a=e.timer.createSubTimer("annotations");e.source.getAnnotations().then(function(c){e.target("putAnnotations",e.asin,c).then(d.resolve,d.reject)},d.reject);d.done(function(){a.endTimer()});return d.promise()}function g(e){var d=$.Deferred(),a=e.timer.createSubTimer("pageNumbers");
e.source.getPageNumbers().then(function(c){e.target("putPageNumbers",e.asin,c).then(d.resolve,d.reject)},d.reject);d.done(function(){a.endTimer()});return d.promise()}function b(e){var d=$.Deferred(),a=e.timer.createSubTimer("bookinfo");e.source.getBookInfo().then(function(c){e.target("putBookinfo",e.asin,c).then(d.resolve,d.reject)},d.reject);d.done(function(){a.endTimer()});return d.promise()}return{initialize:function(){KindleModuleManager.define(KindleModuleManager.CONTENT_MIGRATION,[Kindle.MODULE.DB_CLIENT,
KindleModuleManager.EMBEDDED_HOSTINTERFACE],function(e,d){return{moveBook:function(a){var c=$.Deferred(),f=e.getBookDb();if(!a)return c.reject("Need ASIN as param").promise();var h={timer:KindleMetricsProfiler("Migrate "+a),asin:a,target:d.contentProvider,source:f.BookInfoDB(a)};a=$.when(q(h),m(h),g(h),b(h));a.then(function(){h.timer.endTimer();h.timer.log()});a.then(c.resolve,c.reject);return c.promise()},notifyMigrationStatus:function(a){var c=$.Deferred();if(!a||!a.status)return c.reject("Need param.status as param").promise();
"done"===a.status?e.getBookDb().dropTables().then(c.resolve,c.reject):c.reject("this status is not handled");return c.promise()}}})}}}(),DatabaseContentCache=function(){return{create:function(q){var m=$.Deferred(),g=q.bookinfoDb,b={};BookChunk.types.forEach(function(e){var d=e.substr(0,1).toUpperCase()+e.substr(1);b[e]={getChunks:function(a,c,f){g["get"+d+"s"](a).then(c,f)},putChunks:function(a,c,f){g["put"+d+"s"](a).then(c,f)},getCachedIds:function(a,c){g["get"+d+"Ids"]().then(a,c)}}});b.queryBookinfo=
function(){return g.getBookInfo().pipe(function(e){m.resolve(e);return e})};b.getBookinfo=function(){return m.promise()};b.putBookinfo=function(e){m.resolve(e);return g.insertBookInfo(e)};b.updateBookinfo=g.updateBookInfo;b.getAnnotations=g.getAnnotations;b.putAnnotations=g.putAnnotations;b.getPageNumbers=g.getPageNumbers;b.putPageNumbers=g.putPageNumbers;b.getSearchIndex=g.getSearchIndex;b.putSearchIndex=g.putSearchIndex;b.computeQuota=function(){return g.computeCacheQuota()};b.getBookStatistics=
g.getBookStatistics;b.checkCache=function(){return!0};b.deleteOldestBook=function(e,d){g.deleteOldestBookData(q.asin).then(e,d)};b.deleteBooksData=function(){bookInfo=void 0;"pending"!==m.state()&&(m=$.Deferred());return g.deleteBooksData([q.asin])};return b}}}(),DownloadingContentProvider=function(){function q(g){function b(f,h,n){function l(z){if(!e){for(C in z)h(z[C]),c.removeId(C);var A=[],B;for(B=0;B<r.length;B++){var C=r[B];void 0===z[C]&&(y=C,A.push(C))}r=A;0<A.length?v(A):(c.setNextId(y),
setTimeout(flowControl.resume,0))}}function u(z){e||v(r)}function x(z){e||h(z)}function t(z,A,B,C){if(!e){if("[object Array]"===Object.prototype.toString.call(C)){var D=C;C="list"}else D=[C];w[C]=w[C]+1||1;2>=w[C]?d.getChunks(D,x,t):(n(z,A,B),0===--k&&(c.setNextId(y),setTimeout(flowControl.resume,0)))}}function v(z){k=z.length;d.getChunks(z,x,t)}"[object Array]"!==Object.prototype.toString.call(f)&&(f=[f]);var r=f.slice(0),k=0,y=Math.max.apply(Math,r)+1,w=[];a?(flowControl.pause(),a.getChunks(f,l,
u)):v(f)}var e=!1;var d=g.source;var a=g.cache;var c=g.downloader;flowControl=g.flowControl;return{getChunks:b,getPieces:function(f,h,n){return b(f,h,n)},close:function(){e=!0}}}function m(g,b){var e=KindleBookDownloaderFactory({type:b,cache:!0,throttle:BookChunk.properties[b].huge,netGetter:g.source[b].getChunks,urlGetter:g.source[b].getUrls,fileGetter:g.source[b].getChunkFromUrl,dbGetIdList:g.cache[b].getCachedIds,dbCheckCache:g.cache.checkCache,dbOosHandler:g.cache.deleteOldestBook,dbIsOos:function(){d.callEventListeners("onFailed",
b,Kindle.ERROR.OUT_OF_SPACE)},downloadError:function(a,c){d.callEventListeners("onFailed",b,a,c)},isIdRequired:g.tweaks&&g.tweaks[b]&&g.tweaks[b].isIdRequired}),d=ListenerManager();return{init:function(a,c){e.initialize(a,c)},start:function(){e.startReadAhead()},cancel:function(){e.cancelReadAhead()},pause:function(){e.pauseReadAhead()},resume:function(){e.resumeReadAhead()},setNextId:function(a){e.setNextId(a)},removeId:function(a){e.removeIdFromReadAhead(a)},getNumIds:function(){return e.numIds},
addEventListener:function(a,c){d.addEventListener(a,c)}}}return{create:function(g){var b={},e={},d={},a={},c={pause:function(){a.pauseDownload()},resume:function(){a.resumeDownload()}};BookChunk.types.forEach(function(f){e[f]=m(g,f);b[f]=q({type:f,source:g.source[f],cache:g.cache[f],downloader:e[f],flowControl:c})});d={downloadingContentProvider:b,fast:g.readAheadAgressively,downloaders:e,sidecarManager:g.sidecarManager};a=BookDownloadController.create(d);b.queryBookinfo=g.cache.queryBookinfo;b.getBookinfo=
g.cache.getBookinfo;b.putBookinfo=g.cache.putBookinfo;b.computeCacheQuota=g.cache.computeQuota;b.downloadController={startDownload:a.startDownload,failDownload:a.failDownload,cancelDownload:a.failDownload,pauseDownload:a.pauseDownload,resumeDownload:a.resumeDownload,whenDownloadComplete:a.whenDownloadComplete};b.close=function(f){g.source.close();a.failDownload(f);BookChunk.types.forEach(function(h){b[h].close()})};return b}}}(),ContentPrefetchOptimizations=function(){function q(u,x,t){function v(r){function k(w){for(ix=
0;ix<a.length;ix++)if(a[ix].skeleton===w)return a[ix];return null}var y=k(r);y&&"rejected"!==y.getSkeleton()?y.getSkeleton().then(d(x),t):(a.splice(0,a.length-40),y=m(r),y.getSkeleton().then(d(x),t),a.push(y),++r<l.fragmentMetadata.numberOfSkeletons&&((y=k(r))||a.push(m(r))))}1<u.length||0===u[0]?h(u,x,t):v(u[0])}function m(u){var x=g(u),t=x.fragmentIds;x=x.resourceIds;var v=$.Deferred(),r={},k={};t.forEach(function(y){r[y]=$.Deferred()});x.forEach(function(y){k[y]=$.Deferred()});h(u,function(y){v.resolve(y)},
function(y,w,z,A){v.reject(y,w,z,A)});b(t,function(y){r[y.fragmentMetadata.id].resolve(y)},function(y,w,z,A){r[A].reject(y,w,z,A)});e(x,function(y){k[y.metadata.id].resolve(y)},function(y,w,z,A){k[A].reject(y,w,z,A)});return{skeleton:u,getSkeleton:function(){return v},getFragmentById:function(y){return r[y]},getResourceById:function(y){return k[y]}}}function g(u){var x=function(){return l.fragmentArray.filter(function(v){return v.sId===u}).map(function(v){return v.fId})}(),t=n.skeletonManifest[u].depends;
n.fragmentManifest&&x.forEach(function(v){n.fragmentManifest[v]&&n.fragmentManifest[v].includes&&t.push.apply(t,n.fragmentManifest[v].includes)});return{fragmentIds:x,resourceIds:t}}function b(u,x,t){$.isArray(u)||(u=[u]);u=u.filter(function(v){for(var r=0;r<a.length;r++){var k=a[r].getFragmentById(v);if(k&&"rejected"!==k.state)return k.then(d(x),t),!1}return!0});0<u.length&&f(u,x,t)}function e(u,x,t){$.isArray(u)||(u=[u]);u=u.filter(function(v){for(var r=0;r<a.length;r++){var k=a[r].getResourceById(v);
if(k&&"rejected"!==k.state)return k.then(d(x),t),!1}return!0});0<u.length&&c(u,x,t)}function d(u){return function(x){x=jQuery.extend(!0,{},x);u(x)}}var a=[],c,f,h,n,l;return{modify:function(u,x,t){n=x;l=t;h=u[BookChunk.SKELETON_TYPE].getChunks;f=u[BookChunk.FRAGMENT_TYPE].getChunks;c=u[BookChunk.RESOURCE_TYPE].getChunks;u[BookChunk.SKELETON_TYPE].getChunks=q;u[BookChunk.FRAGMENT_TYPE].getChunks=b;u[BookChunk.RESOURCE_TYPE].getChunks=e}}}(),KindleO_Aaa=function(){function q(d){for(var a=[],c,f,h,n,
l,u,x=0;x<d.length;)h=d.charCodeAt(x++)&255,c=d.charCodeAt(x++),n=c&255,f=d.charCodeAt(x++),l=f&255,u=h>>2,h=(h&3)<<4|n>>4,n=(n&15)<<2|l>>6,l&=63,isNaN(c)?n=l=64:isNaN(f)&&(l=64),a.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(u)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(h)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(l));return a.join("")}
function m(d){for(var a=[],c,f,h,n,l,u=0;u<d.length;)c=b[d.charCodeAt(u++)],f=b[d.charCodeAt(u++)],n=b[d.charCodeAt(u++)],l=b[d.charCodeAt(u++)],c=c<<2|f>>4,f=(f&15)<<4|n>>2,h=(n&3)<<6|l,a.push(String.fromCharCode(c)),64!==n&&a.push(String.fromCharCode(f)),64!==l&&a.push(String.fromCharCode(h));return a.join("")}function g(d,a){var c=[];c.length=256;for(var f=0;256>f;f++)c[f]=f;var h=0;for(f=0;256>f;f++){h=h+c[f]+a[f%a.length]&255;var n=c[f];c[f]=c[h];c[h]=n}h=f=0;a=[];for(var l=0;l<d.length;l++)f=
f+1&255,h=h+c[f]&255,n=c[f],c[f]=c[h],c[h]=n,a.push(String.fromCharCode(d.charCodeAt(l)^c[c[f]+c[h]&255]));return a.join("")}for(var b=[],e=0;65>e;e+=1)b["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charCodeAt(e)]=e;return{o_aaa:q,o_aag:m,o_aac:function(d,a){d=d.replace(/\x0d\x0a/g,"\n");for(var c=[],f=0;f<d.length;f++){var h=d.charCodeAt(f);128>h?c.push(String.fromCharCode(h)):(127<h&&2048>h?c.push(String.fromCharCode(h>>6|192)):(c.push(String.fromCharCode(h>>12|224)),c.push(String.fromCharCode(h>>
6&63|128))),c.push(String.fromCharCode(h&63|128)))}d=c.join("");a+="00000000000000000000000000000000".substring(0,32-a.length);c=[];for(e=0;e<a.length;e+=2)c.push(parseInt(a.substring(e,e+2),16));return q(g(d,c))},o_aad:function(d,a){d=m(d);for(var c=[],f=0;f<a.length;f++)c.push(a.charCodeAt(f));a=g(d,c);d=[];c=0;for(var h,n;c<a.length;)f=a.charCodeAt(c),128>f?(d.push(String.fromCharCode(f)),c++):191<f&&224>f?(h=a.charCodeAt(c+1),d.push(String.fromCharCode((f&31)<<6|h&63)),c+=2):(h=a.charCodeAt(c+
1),n=a.charCodeAt(c+2),d.push(String.fromCharCode((f&15)<<12|(h&63)<<6|n&63)),c+=3);return d.join("")}}}(),KindleReaderAnnotationManager=function(){function q(J,S){return J.start-S.start}function m(J){return void 0===J.asin||void 0===J.refEmId||void 0===J.start||void 0===J.type?!1:!0}function g(J){for(var S=0;S<J.length;S++)J[S].guid&&!J[S].refEmId&&(J[S].refEmId=J[S].guid)}function b(J){function S(){e(J).then(K.resolve,K.reject)}function W(){t(J).then(S,K.reject)}var K=new jQuery.Deferred;K.then(function(){for(var G=
0;G<J.length;G++)Z.emit(c(J[G]))},function(){for(var G=0;G<J.length;G++)Z.emit(c(J[G],"Fail"))});n(J);for(var U=0;U<J.length;U++){if(!m(J[U]))return Z.emit(c(J[U],"Invalid")),KindleDebug.error("Tried to delete an invalid annotation."),K.reject().promise();J[U].note&&(J[U].note=r(J[U].note))}I.acquire().done(function(){R=Date.now();V.saveToJournal(J).then(W,K.reject);K.then(I.release,I.release)});return K.promise()}function e(J){function S(){for(var K,U=!1,G,Q=0;Q<J.length;Q++)G=J[Q],K=d(G.type,G.start),
"create"===G.action?-1===K&&(L.push(G),U=!0):"modify"===G.action?-1!==K&&(L.splice(K,1),L.push(G),U=!0):"delete"===G.action&&-1!==K&&L.splice(K,1);U&&L.sort(q);W.resolve();C.cacheAnnotations(L)}var W=new jQuery.Deferred;y().then(S,S);return W.promise()}function d(J,S){for(var W in L){var K=L[W];if(K.type===J&&K.start===S)return W}return-1}function a(J,S){return L[d(J,Number(S))]||null}function c(J,S){J="Reader::"+A[J.action]+A[J.type];S&&(J+=S);return J}function f(J){for(var S=(new Date).getTime(),
W=0;W<J.length;W++)J[W].asin=D,J[W].isSample=F,J[W].refEmId=M,J[W].action="create",J[W].modifiedTimestamp=S;return J}function h(J){for(var S=(new Date).getTime(),W=0;W<J.length;W++)J[W].action="delete",J[W].modifiedTimestamp=S;return J}function n(J){for(var S=0;S<J.length;S++)J[S].positionType=N;return J}function l(J){f(J);return b(J)}function u(J){for(var S=(new Date).getTime(),W=0;W<J.length;W++)J[W].action="modify",J[W].modifiedTimestamp=S;return b(J)}function x(J){h(J);return b(J)}function t(J){function S(){function U(fa){return"create"===
fa.action&&("kindle.bookmark"===fa.type||"kindle.highlight"===fa.type)}function G(fa){X.context=fa;S()}for(var Q,H,X;K<J.length&&!U(J[K]);)++K;if(K<J.length){X=J[K++];switch(X.type){case "kindle.bookmark":Q=X.position;H=X.position+100;break;case "kindle.highlight":Q=X.start,H=X.end}v(Q,H).then(G,S)}else W.resolve(),z()}var W=new jQuery.Deferred,K=0;S();return W.promise()}function v(J,S){if(KindleRenderer.getRenderer()===KindleRenderer.KARAMEL)return J=new jQuery.Deferred,J.resolve(""),J;null===T&&
(T=KindleRenderer.createWordIterator());return T.getText(J,S)}function r(J){J.length>Kindle.opt.maxNoteChars&&(Z.emit("Reader::NoteLengthLimitExceeded",{submetrics:[{name:"ResultSize",value:J.length}]}),J=J.substr(0,Kindle.opt.maxNoteChars));return J}function k(J,S,W,K){var U=KindleReaderAnnotationManager.getAnnotationsInRange(J,S,"kindle.highlight"),G=U.length,Q={type:"kindle.highlight",start:J,position:W,end:S},H=[];K&&H.push.apply(H,f([{type:"kindle.note",start:S,position:W,end:S,note:K}]));if(1===
U.length&&J>=U[0].start&&S<=U[0].end){if(0===H.length)return(new jQuery.Deferred).resolve([U[0]])}else 0<G&&(Q.start=Math.min(J,U[0].start),Q.end=Math.max(S,U[G-1].end),H.push.apply(H,h(U))),H.push.apply(H,f([Q]));return b(H)}function y(){var J=new jQuery.Deferred;C.getCachedAnnotations().then(function(S){S&&void 0!==S.length&&(L=S,g(L));J.resolve()},J.reject);return J.promise()}function w(){function J(){W.resolve()}function S(){W.resolve()}var W=new jQuery.Deferred;P.getAnnotations(D,M,F).then(function(K){L=
K.annotations;g(L);C.cacheAnnotations(L).then(J,S)},W.reject);return W.promise()}function z(){function J(){y().then(W.reject,W.reject)}function S(){w().then(W.resolve,J)}var W=new jQuery.Deferred;V.uploadJournal().then(S,S);return W.promise()}var A={"kindle.bookmark":"Bookmark","kindle.note":"Note","kindle.highlight":"Highlight",create:"Create",modify:"Modify","delete":"Delete"},B,C=null,D=null,F=null,M=null,N=null,L=null,P=null,V=null,Z,R=Date.now(),I=Lock(),T=null;return{BOOKMARK:"kindle.bookmark",
NOTE:"kindle.note",NOTE_ICON:"kindle.note.icon",HIGHLIGHT:"kindle.highlight",POPULAR_HIGHLIGHT:"kindle.popular",getLastUpdateTime:function(){return R},deferredInitialize:function(J,S){function W(){B.resolve(U)}function K(Q){P=Q[S.SERVICE_CLIENT];V=Q[S.JOURNAL_MANAGER];Z=Q[S.METRICS_MANAGER];z().then(W,W)}if(!B){S=S||KindleModuleManager;B=$.Deferred();var U=this;var G=[S.SERVICE_CLIENT,S.JOURNAL_MANAGER,S.METRICS_MANAGER];L=[];J.then(function(Q){KindleRenderer.getAnnotationMetadata().then(function(H){C=
Q;F=C.getIsSample();D=C.getAsin();M=C.getRefEmId();H&&H.acr&&(M+=","+H.acr);N=H&&H.format.includes("YJ")?"YJBinary":C.getBookType();C.getContext().isOwned?S.getModuleList(G).then(K,B.reject):B.reject()})},B.reject)}return B.promise()},clear:function(){var J=B;B=null;L=[];D=F=M=N=null;J&&J.reject()},getAnnotation:a,getAllAnnotations:function(){return L.slice()},getAnnotationsInRange:function(J,S,W){var K=[],U;for(U in L){var G=L[U];!(G.start<=S&&G.end>=J||G.start>=J&&G.start<=S)||W&&W!==G.type||K.push(G)}return K},
createBookmark:function(J){return l([{type:"kindle.bookmark",start:J,position:J,end:J,context:""}])},createNote:k,modifyNote:function(J,S,W){var K=new jQuery.Deferred;(J=a("kindle.note",J))?(J.note=W,J.position=S,u([J]).then(K.resolve,K.reject)):K.reject();return K.promise()},createHighlight:function(J,S,W){return k(J,S,W,null)},deleteAnnotations:x,getContext:v,updateAnnotations:function(J){for(var S,W=[],K=[],U=[],G=[],Q=0;Q<J.length;Q++)switch(S=J[Q],S.action){case "create":W.push(S);break;case "modify":U.push(S);
break;case "delete":K.push(S)}0<W.length&&G.push(l(W));0<U.length&&G.push(u(U));0<K.length&&G.push(x(K));return $.when.apply($,G)},getLPRGuid:function(J){var S=$.Deferred();KindleRenderer.getRenderer()===KindleRenderer.KARAMEL?KindleRenderer.getManifest().pipe(function(W){S.resolve(W.acr)}):S.resolve(J);return S.promise()},getPositionType:function(J){return J.toUpperCase().startsWith("YJ")?"YJBinary":J}}}(),NetworkContentProvider=function(){return{create:function(q){function m(n,l){var u=new jQuery.Deferred;
$.jsonp({url:n,callback:l,cache:!0,timeout:3E4,error:function(x,t){u.reject(x,t)},success:function(x){u.resolve(x)}});return u.promise()}function g(n,l,u){function x(t,v,r){var k;if(t&&t.length)for(k=0;k<t.length;k++){var y=v+t[k].id;r(t[k].signedUrl,y,t[k].id)}}q.bookInfo.setNetworkAccessed(!0);x(n.skeletonUrls,"loadSkeleton",function(t,v,r){m(t,v).then(function(k){if(void 0!==k.skeletonMetadata&&1===k.skeletonMetadata.encryption){var y=KindleO_Aaa.o_aad(k.skeletonData,c);k.skeletonData=y;delete k.skeletonMetadata.encryption}l(k)},
function(k,y){u(null,y,null,r)})});x(n.fragmentUrls,"loadFragment",function(t,v,r){m(t,v).then(function(k){if(void 0!==k.fragmentMetadata&&1===k.fragmentMetadata.encryption){var y=KindleO_Aaa.o_aad(k.fragmentData,c);k.fragmentData=y;delete k.fragmentMetadata.encryption}l(k)},function(k,y){u(null,y,null,r)})});x(n.glyphUrls,"loadGlyphFragment",function(t,v,r){m(t,v).then(function(k){void 0!==k.glyphFragmentMetadata&&(k.glyphFragmentMetadata.id=r);l(k)},function(k,y){u(null,y,null,r)})});x(n.resourceUrls,
"loadResource",function(t,v,r){m(t,v).then(function(k){q.bookInfo.updateContentScrambledFlag(k);l(k)},function(k,y){u(null,y,null,r)})});x(n.locationMapUrls,"loadMobiLocationMap",function(t,v,r){m(t,v).then(l,function(k,y){u(null,y,null,r)})})}function b(n,l){var u={asin:q.asin,contentVersion:a.contentVersion,formatVersion:a.formatVersion,isSample:a.isSample};a.kindleSessionId&&(u.kindleSessionId=a.kindleSessionId);a.kcrFree&&(u.kcrFree=!0);u[n+"Ids"]=l;return f.getFileUrl(u)}function e(n,l,u,x){"[object Array]"!==
Object.prototype.toString.call(l)&&(l=[l]);b(n,l).then(function(t){d||g(t,u,x)},function(t,v,r){x(t,v,r,l)})}var d=!1;var a=q.context;var c=a.contentChecksum;var f=KindleModuleManager.getModuleSync(Kindle.MODULE.SERVICE_CLIENT);var h={};BookChunk.types.forEach(function(n){h[n]={getChunks:function(l,u,x){e(n,l,u,x)},getUrls:function(l,u,x){b(n,l).then(function(t){u(t[n+"Urls"])},x)},getChunkFromUrl:function(l,u,x){var t={};t[n+"Urls"]=[l];g(t,u,x)}}});h.getFragmap=function(){var n=$.Deferred();m(a.fragmentMapUrl,
"loadFragmap").then(function(l){n.resolve(l)},function(l,u){n.reject(u)});return n.promise()};h.getMetadata=function(){var n=$.Deferred();m(a.metadataUrl,"loadMetadata").then(function(l){n.resolve(l)},function(l,u){n.reject(u)});return n.promise()};h.getManifest=function(){function n(x){u.resolve(x)}function l(x,t){u.resolve({})}var u=$.Deferred();a.manifestUrl?m(a.manifestUrl,"loadManifest").then(n,l):u.resolve({});return u.promise()};h.close=function(){d=!0};return h}}}(),RemoteContentCache=function(){return{create:function(q){function m(f){a=
f;g&&"pending"===g.state||(g=$.Deferred());g.resolve(a)}var g=$.Deferred(),b=q.asin,e=q.contentProvider,d=q.contentRemover,a,c={};BookChunk.types.forEach(function(f){c[f]={getChunks:function(h,n,l){e("getChunks",b,f,h).then(n,l)},putChunks:function(h,n,l){var u={};h.forEach(function(x,t){u[t]=x});e("putChunks",b,f,u).then(n,l)},getCachedIds:function(h,n){e("getChunkIds",b,f).then(h,n)}}});c.queryBookinfo=function(){return e("getBookinfo",b).pipe(function(f){m(f);return f})};c.getBookinfo=function(){return g.promise()};
c.putBookinfo=function(f){m(f);return e("putBookinfo",b,f)};c.updateBookinfo=function(f){if(!a)return $.Deferred().reject("bad state");$.extend(a,f);return e("updateBookinfo",b,f)};c.getAnnotations=function(){return e("getAnnotations",b)};c.putAnnotations=function(f){return e("putAnnotations",b,f)};c.getPageNumbers=function(){return e("getPageNumbers",b)};c.putPageNumbers=function(f){return e("putPageNumbers",b,f)};c.computeQuota=function(){return $.Deferred().resolve(0)};c.getBookStatistics=function(){return $.Deferred().reject()};
c.checkCache=function(){return!0};c.deleteOldestBook=function(f,h){h()};c.deleteBooksData=function(){a=void 0;"pending"!==g.state()&&(g=$.Deferred());return d({asin:b})};c.downloadSearchIndex=function(f){return e("getSearchIndexReader",b,f)};c.initMetadata=function(f){return e("initMetadata",b,f)};return c}}}();
function KindleBookResourceUrlTranslator(q,m,g){var b={};b.bookInfo=g;b.resourceManger=q;b.resourceManifest=m.resourceManifest;b.reverseLookup={};for(var e in b.resourceManifest)b.reverseLookup[b.resourceManifest[e].name]=e;b.getResourceUrls=function(d,a,c){function f(x){var t=u[x.metadata.id].name;b.bookInfo.updateContentScrambledFlag(x);var v={};v[t]=x.data;x.metadata&&(v.metadata=x.metadata);a(v)}for(var h=[],n=0;n<d.length;n++){var l=this.reverseLookup[d[n]];void 0!==l&&h.push(l)}var u=this.resourceManifest;
h.length!==d.length&&c();0<h.length?this.resourceManger.getChunks(h,f,c):a({})};return b}
(function(){function q(g){function b(){return KindleDebug.assert.apply(KindleDebug,arguments)}function e(){return KindleDebug.log.apply(KindleDebug,arguments)}function d(){return $.Deferred().reject.apply($,arguments)}function a(l){l=new Uint8Array(g[l]);for(var u=[],x=0;x<l.byteLength;x++)u.push(String.fromCharCode(l[x]));l=u.join("");return $.Deferred().resolve(l)}function c(l,u,x,t,v){l=l.cloneStream();l.seek(u);return l.readAsync(x).pipe(function(r){function k(){switch(t){case 1:return y.readByte()+
v;case 2:return y.readInt16()+v;case 3:return(y.readByte()<<16)+y.readUInt16()+v;case 4:return y.readInt32()+v;default:b("Got unexpected bytes-per-entity:"+t)}}try{var y=r;for(r=[];0<y.unconsumedBufferLength;)r.push(k());y.close();l.close();return r}catch(w){return l.close(),d(w)}},l.close)}function f(l,u){var x=l.directory.BytesPerEntity;return c(l.positionsStream,l.directory.Positions.offset+u.o*x,u.n*x,x,l.directory.MinimumTitleEntityValue)}var h=["Magic","WhereIndexed","IndexerHelperClassName"],
n=$.Deferred();(function(l){var u,x,t,v=l.positionsStream,r=Math.min(v.size,28);v.seek(Math.max(0,v.size+-28));return l.positionsStream.readAsync(r).pipe(function(k){try{var y=k.readInt32();x=k.readInt32();t=k.readInt32();k.close();if(y!==l.positionsStream.size)return d("bad header size");l.positionsStream.seek(x);return l.positionsStream.readAsync(t)}catch(w){return d(w)}}).pipe(function(k){try{u={Magic:{offset:0,length:4,isString:!0}};for(var y,w,z,A;0<k.unconsumedBufferLength;)y=k.readInt32(),
w=k.readInt32(),z=k.readByte(),A=k.readString(z),u[A]={offset:y,length:w},0<=h.indexOf(A)&&(u[A].isString=!0);k.close();var B=u.SearchBoundaryPositions.offset;l.positionsStream.seek(0);return l.positionsStream.readAsync(B)}catch(C){return d(C)}}).pipe(function(k){try{for(var y,w=0;0<k.unconsumedBufferLength;){a:{for(var z=w,A=Object.keys(u),B=0;B<A.length;++B)if(u[A[B]].offset===z){y=A[B];break a}y=void 0}if(!y)return k.close(),d("Can't read directory entries");w+=u[y].length;if(u[y].isString)u[y]=
k.readString(u[y].length);else if(1===u[y].length)u[y]=k.readByte();else if(4===u[y].length)u[y]=k.readInt32();else return k.close(),d("Bad size for numeric entry")}k.close();if("AZSA"!==u.Magic)return d("bad magic");l.directory=u;return l}catch(C){return d(C)}})})({getPositionsForWord:function(l){var u=$.Deferred(),x=this.wordList[l],t={word:l,searchBoundaryPositions:this.searchBoundaryPositions,positions:[]};x?f(this,x).pipe(function(v){e('Word "'+l+'" has '+v.length+" occurances");t.positions=
v;u.resolve(t)},function(){u.reject(Kindle.ERROR.SITB_INDEX_UNREADABLE)}):u.resolve(t);return u.promise()},getProperty:function(l){return this.properties[l]},close:function(){this.positionsStream=null},positionsStream:new m(g.positions)}).pipe(function(l){return a("words").pipe(function(u){var x={};u.split("\n").forEach(function(t){t=t.split(":");x[t[2]]={o:t[0],n:t[1]}});l.wordList=x;return l})}).pipe(function(l){return a("properties").pipe(function(u){var x={},t=/(.*?)=(.*)/;u.split("\n").forEach(function(v){v&&
(v=t.exec(v),3===v.length&&(x[v[1]]=v[2]))});l.properties=x;return l})}).pipe(function(l){return c(l.positionsStream,l.directory.SearchBoundaryPositions.offset,l.directory.SearchBoundaryPositions.length,l.directory.BytesPerEntity,l.directory.MinimumTitleEntityValue).pipe(function(u){l.searchBoundaryPositions=u;return l})}).pipe(n.resolve,function(){n.reject(Kindle.ERROR.SITB_INDEX_UNREADABLE)});return n.promise()}var m;KindleModuleManager.define("SearchIndexParser",["SearchIndexUtilities"],function(g){m=
g.Stream;return{openSearchIndex:q}})})();
(function(){function q(f){function h(u){for(var x={},t,v=0;v<u.length;v++)t=u[v].filename,t.endsWith(c.words)?x.words=u[v].data:t.endsWith(c.properties)?x.properties=u[v].data:t.endsWith(c.positions)&&(x.positions=u[v].data);x.asin=f.asin;l.endTimer();l.log();n.notify("finished");n.resolve(x)}var n=new $.Deferred,l=KindleMetricsProfiler("unzip search index");if(1<f.length)return KindleDebug.error("Cannot Unzip: We have too many array buffers"),n.reject("Index too large");KindleZip.unzip(f[0]).pipe(h,
h);return n.promise()}function m(f,h){for(var n=KindleMetricsProfiler("decrypt search index"),l=h.decryptionIV,u=h.decryptionKey,x=[],t,v=0;v<f.length;v++)t=KindleCrypto.decrypt(f[v],u,l),t=t.buffer,x.push(t);x.asin=h.asin;n.endTimer();n.log();return x}function g(f){function h(n){function l(){w.endTimer();M.push(A.response);D+=B;D<F?(C-=Date.now(),1E4>C?B*=2:2E4<C&&(B/=2),v()):(z.endTimer(),z.log(),N.resolve(M,r))}function u(L){L.lengthComputable?(L=Math.floor(100*L.loaded/L.total),L!==k&&(k=L)):
KindleDebug.log("progress unknown")}function x(){KindleDebug.error("An error occurred while transferring the file.");N.reject("failed")}function t(){KindleDebug.error("The transfer has been canceled by the user.");N.reject("cancelled")}function v(){C=Date.now();w=z.createSubTimer("@"+D);var L=Math.min(D+B-1,F);A=new XMLHttpRequest;A.open("GET",y);A.setRequestHeader("Range","bytes="+D+"-"+L);A.responseType="arraybuffer";A.addEventListener("progress",u,!1);A.addEventListener("load",l,!1);A.addEventListener("error",
x,!1);A.addEventListener("abort",t,!1);A.send(null)}"IndexUnavailable"===n.errorCode&&(a[f.asin]=null);var r=n;if(null===r.s3Url)return $.Deferred().reject(Kindle.ERROR.SITB_INDEX_NOT_AVAILABLE);r.asin=f.asin;var k=-1,y=r.s3Url.replace(/http:\/\//,"https://"),w,z=KindleMetricsProfiler("download search index"),A,B=16777216,C,D=0,F=r.indexSize-1,M=[],N=$.Deferred();v();return N}return KindleHostDeviceDetector.isOnline()?e.getSearchIndexInfo(f).pipe(h,function(n,l,u){return 0===n.status?$.Deferred().reject(Kindle.ERROR.SITB_OFFLINE):
$.Deferred().reject(Kindle.ERROR.SITB_COMMON_ERROR)}):$.Deferred().reject(Kindle.ERROR.SITB_OFFLINE)}function b(f){function h(n){n=f.contentCache?f.contentCache.putSearchIndex(n):$.Deferred().resolve(n);return n}if(!KindleDeviceCapabilities.searchInTheBook())return $.Deferred().reject("Unsupported OS");if(a[f.asin])return a[f.asin];a={};a[f.asin]=(f.contentCache?f.contentCache.getSearchIndex():$.Deferred().reject("no db")).pipe(null,function(){return g(f).pipe(m).pipe(q).pipe(h)}).pipe(d.openSearchIndex);
return a[f.asin]}var e,d,a={},c={words:".words",positions:".positions",properties:".properties"};KindleModuleManager.define(Kindle.MODULE.SearchIndexManager,[Kindle.MODULE.SERVICE_CLIENT,Kindle.MODULE.DB_CLIENT,"SearchIndexParser"],function(f,h,n){e=f;d=n;return{getSearchIndex:b}})})();
(function(){function q(g){if(!(this instanceof q)){var b=Object.create(q.prototype);return q.apply(b,arguments)}this.bytes=new Uint8Array(g);this.position=0;this.size=this.bytes.length;return this}function m(g,b,e){if(!(this instanceof m)){var d=Object.create(m.prototype);return m.apply(d,arguments)}this.uBytes=g.bytes;this.bytes=new Int8Array(this.uBytes);this.base=void 0!==b?b:0;this.position=0;this.unconsumedBufferLength=this.size=void 0!==e?e:this.uBytes.length-this.base;return this}Uint8Array.prototype.subarray||
(Uint8Array.prototype.subarray=function(g,b){g=void 0===g?0:g;b=void 0===b||b>copy.length?copy.length:b;b=new Uint8Array(b-g);for(var e=0;e<b.length;e++)b[e]=this[e+g];return b});q.prototype.seek=function(g){this.position=Math.min(Math.max(g,0),this.size)};q.prototype.readAsync=function(g){return $.Deferred().resolve(new m(this,this.position,Math.min(g,this.size-this.position)))};q.prototype.cloneStream=function(){var g=new q(this.bytes);g.position=this.position;return g};q.prototype.close=function(){this.bytes=
null};m.prototype.seek=function(g){this.position=Math.min(Math.max(g,0),this.size);this.unconsumedBufferLength=this.size-this.position};m.prototype.getPosition=function(){return this.position};m.prototype.readByte=function(){if(1>this.unconsumedBufferLength)throw Error("Out of data");var g=this.uBytes[this.base+this.position];this.position++;this.unconsumedBufferLength--;return g};m.prototype.readInt8=function(){if(1>this.unconsumedBufferLength)throw Error("Out of data");var g=this.bytes[this.base+
this.position];this.position++;this.unconsumedBufferLength--;return g};m.prototype.readInt16=function(){if(2>this.unconsumedBufferLength)throw Error("Out of data");var g=this.base+this.position;g=(this.bytes[g]<<8)+this.uBytes[g+1];this.position+=2;this.unconsumedBufferLength-=2;return g};m.prototype.readUInt16=function(){if(2>this.unconsumedBufferLength)throw Error("Out of data");var g=this.base+this.position;g=(this.uBytes[g]<<8)+this.uBytes[g+1];this.position+=2;this.unconsumedBufferLength-=2;
return g};m.prototype.readInt32=function(){return(this.readInt16()<<16)+this.readUInt16()};m.prototype.readUInt32=function(){return(this.readUInt16()<<16)+this.readUInt16()};m.prototype.readString=function(g){if(this.unconsumedBufferLength<g)throw Error("Out of data");var b=this.base+this.position;try{var e=String.fromCharCode.apply(null,this.uBytes.subarray(b,b+g))}catch(a){e=[];for(var d=b;d<b+g;d++)e.push(String.fromCharCode(this.uBytes[d]));e=e.join("")}this.position+=g;this.unconsumedBufferLength-=
g;return e};m.prototype.close=function(){this.unconsumedBufferLength=0;this.uBytes=this.bytes=null};KindleModuleManager.define("SearchIndexUtilities",null,{Stream:q,Buffer:m})})();
(function(){function q(b){function e(){if(!c)if(v.seek(0),a=v.readInt16(),1!==a)KindleDebug.warn("Unsupported page numbering file format version "+a);else if(f=v.readInt16(),0===f)KindleDebug.log("PageNumbers File for this book is revoked by the service"),c=Kindle.ERROR.PN_REVOKED;else{h=[];for(var r=0;r<f;r++)h[r]=v.readUInt32();r=v.readUInt32();c=0<r?v.readString(r):"";n=[];x=[];l=[];u=[]}}function d(r){e();if(r>=f||-1>=r){KindleDebug.log("The requested page numbering edition at index "+r+" is out of bounds for the available count of editions "+
f);var k=!1}else k=!0;if(k&&!u[r])if(v.seek(h[r]),k=v.readInt16(),1!==k)KindleDebug.log("Unsupported edition pagination format "+k+" for edition "+r);else{k=v.readInt16();var y=v.readInt16(),w=v.readInt16();if(32<w)KindleDebug.log("Unsupported pagination format position width "+w+" for edition "+r);else{var z;0<k&&(z=v.readString(k));n[r]=parseInt(v.getPosition(),10);x[r]=y;l[r]=w;u[r]=z;return!0}}}var a,c,f,h,n,l,u,x,t=[];b=new g(b);var v=new m(b,0,b.size);return{getHeaderMetadata:function(){e();
return c},getEditionMetadata:function(r){return d(r)?u[r]:!1},getOrdinalPagePositions:function(r){d(r);var k=x[r],y=l[r]/8;t.length=k+1;v.seek(n[r]);for(r=1;r<=k;r++){var w=y;w=2===w?v.readUInt16():4===w?v.readUInt32():0;t[r]=parseInt(w,10)}for(k=1;k<t.length;k++)t[k-1]>t[k]&&KindleDebug.log("Invalid position value at index "+k+": "+t[k]+", previous position: "+t[k-1]);return t},getEditionCount:function(){return f},getTotalPageCount:function(r){return x[r]}}}var m,g;KindleModuleManager.define("BinaryPageLabelSidecarReader",
["SearchIndexUtilities"],function(b){m=b.Buffer;g=b.Stream;return{openReader:q}})})();
var PageLabelIndexer=function(){return{create:function(q,m){function g(l){var u=0,x;for(x in d)d[x].getPageLabelType()===l&&d[x].getEndingOrdinalPageNumber()>u&&(u=d[x].getEndingOrdinalPageNumber());return u}function b(l){if(1>l||l>a)var u=void 0;else u=PageNumberUtilities.binarySearchPosition(h,l),u=d[h[u]];if(u){l-=u.getStartingOrdinalPageNumber();l=u.getStartingPageLabel()+l;var x=u.getPageLabelAtSeriesIndex(l)}return x}var e="",d;if(""===q)KindleDebug.log("pageLabelIndexString cannot be blank, pageLabelIndexString = "+
e);else if(0>m)KindleDebug.log("TotalPages cannot be less than 0, total pages = "+m);else{e=q.toString();var a=m;var c=0;q=null;for(d={};c<e.length;){if("("!==e.charAt(c)){KindleDebug.log("Each page number scheme must start with '('; was given: "+e.substring(c));return}var f=e.indexOf(")",c);if(0>f)break;c=e.substring(c+1,f);c=PageLabelSeq.create(c);null!==q&&q.setEndingOrdinalPageNumber(c.getStartingOrdinalPageNumber()-1);q=d[parseInt(c.getStartingOrdinalPageNumber(),10)]=c;c=f+1;c<e.length&&","===
e.charAt(c)&&c++}q.setEndingOrdinalPageNumber(m);var h=[];e=0;for(var n in d)d.hasOwnProperty(n)&&(h[e]=d[n].getStartingOrdinalPageNumber(),e++);h.sort(function(l,u){return l-u});return{getLabelSequences:function(){return d},getOrdinalPageForPageLabelText:function(l){var u=null,x=0,t;for(t in d){var v=d[t];if(v.isLabeled()){v.getStartingOrdinalPageNumber()<=x&&(u=null);var r=v.getOrdinalPageForPageLabelText(l);0<=r&&(u=v,x=r)}}return null===u||x>m?0:x},getPageLabelTextForOrdinalPage:b,getHighestPageLabel:function(){var l=
g("a");0===l&&(l=g("r"));var u="";0<l&&(u=b(l));return u},getPageNumberRanges:function(){var l={},u;for(u in d){var x=d[u],t=PageLabelType[x.getPageLabelType()],v=l[t];v?(v.minPage=Math.min(v.minPage,x.getStartingPageLabel()),v.maxPage=Math.max(v.maxPage,x.getEndingPageLabel())):(v={},v.minPage=x.getStartingPageLabel(),v.maxPage=x.getEndingPageLabel());l[t]=v}return l}}}}}}(),PageLabelSeq=function(){return{create:function(q){function m(){return d+b-g}var g;q=q.split(",");var b=g=parseInt(q[0],10);
var e=q[1].charAt(0);if(null===e)console.error("Unknown Page Numbering scheme");else{var d=0;var a=null;"c"===e?(a=q[2].split("|"),d=1):"i"!==e?d=parseInt(q[2],10):q[2]&&(d=parseInt(q[2],10));return{getStartingPageLabel:function(){return d},getStartingOrdinalPageNumber:function(){return g},getPageLabelType:function(){return e},getEndingPageLabel:m,getDisplayPageRange:function(){return[d,m()]},getEndingOrdinalPageNumber:function(){return b},setEndingOrdinalPageNumber:function(c){b<g&&console.error("ending ordinal page number must be >= than starting ordinal page number,endingOrdinalPageNumber  = "+
b+", startingOrdinalPageNumber = "+g);b=c},isLabeled:function(){return"i"!==e},getPageLabelAtSeriesIndex:function(c){if("a"===e)var f=c.toString();else"r"===e?f=PageNumberUtilities.toRomanNumeral(c).toString().toLowerCase():"i"===e?f="":"c"===e&&(--c,f=c<a.length?a[c]:"");return f},getOrdinalPageForPageLabelText:function(c){var f=0,h=!1;if("a"===e)try{f=parseInt(c,10),h=f>=d}catch(n){f=0,h=!1}"r"===e&&PageNumberUtilities.isValidRomanNumeral(c)&&(f=PageNumberUtilities.parseRomanNumeral(c),h=f>=d);
"c"===e&&null!==a&&(a[c]&&(f=a[c]+1),0<f&&(h=!0));return h?g+(f-d):-1}}}}}}();
(function(){function q(h){function n(r){u.endTimer();x.emit("Service::GetPageNumber");t.resolve(v.response)}function l(){KindleDebug.error("An error occurred while transferring the file.");t.reject(Kindle.ERROR.PN_DOWNLOAD_FAIL)}var u,x,t,v;return function(r){t=$.Deferred();v=new XMLHttpRequest;v.open("GET",r);v.responseType="arraybuffer";v.addEventListener("load",n,!1);v.addEventListener("error",l,!1);u=c.createSubTimer("download page numbers");x=a.createTimer();v.send(null);return t.promise()}(h)}
function m(h){var n=$.Deferred();h.getCachedPageNumbers().then(function(l){l?n.resolve(l):n.reject()},n.reject);return n.promise()}function g(h){var n=h.getContext().pageNumberUrl;return n?m(h).pipe(null,function(){return q(n).pipe(e).done(h.cachePageNumbers)}).pipe(function(l){a.emit("PageNumber::Success");return l},function(l){l===Kindle.ERROR.PN_DOWNLOAD_FAIL&&a.emit("PageNumber::DownloadFailure");a.emit("PageNumber::Fail")}):(a.emit("PageNumber::Unavailable"),$.Deferred().resolve())}function b(h){var n=
h.getAsin();if(!f[n]){if(!KindleDeviceCapabilities.showPageNumbers())return $.Deferred().reject("Unsupported OS");c=KindleMetricsProfiler("get page numbers");f={};f[n]=g(h).pipe(function(l){var u;l&&(u=PageNumberProvider.create(l));c.endTimer();c.log();return u})}return f[n]}function e(h){function n(t){t===Kindle.ERROR.PN_REVOKED?a.emit("PageNumber::RevokedData"):a.emit("PageNumber::CorruptData");return $.Deferred().reject()}var l=a.createTimer(),u=c.createSubTimer("parse page number file");h=d.openReader(h);
var x=h.getHeaderMetadata();if(!x)return KindleDebug.log("Corrupt Header Data for Page Number."),n();if(x===Kindle.ERROR.PN_REVOKED)return n(Kindle.ERROR.PN_REVOKED);if(!JSON.parse(x).fileRevisionId)return KindleDebug.log("Page number sidecar header doesn't contain appropriate metadata (missing fileRevisionId)."),n();if(0<h.getEditionCount()){x=h.getEditionMetadata(0);if(!x)return KindleDebug.log("Edition Header corrupted for Page Number."),n();x=JSON.parse(x);if(!x.pageMap)return KindleDebug.log("Page number sidecar edition doesn't contain appropriate metadata (missing pageMap)."),
n();h={oPNToPosition:h.getOrdinalPagePositions(0),pageMapString:x.pageMap,totalPages:h.getTotalPageCount(0)};l.emit("PageNumber::FileParse");u.endTimer();return h}return n()}var d,a,c,f={};KindleModuleManager.define(Kindle.MODULE.PageNumberManager,[Kindle.MODULE.DB_CLIENT,Kindle.MODULE.METRICS_MANAGER,"BinaryPageLabelSidecarReader"],function(h,n,l){a=n;d=l;return{getPageNumbers:b}})})();
var PageNumberProvider=function(){return{create:function(q){var m=!1,g=[],b=-1,e=0;if(q){g=q.oPNToPosition;e=q.totalPages;var d=PageLabelIndexer.create(q.pageMapString,e);q=d.getLabelSequences();var a=e=null,c;for(c in q){if(null===q[c]){KindleDebug.log("Page number sidecar edition doesn't contain a valid page label index");return}null===e&&(e=q[c]);a=q[c]}m=!0;b=e.getStartingOrdinalPageNumber();a.getEndingOrdinalPageNumber()}return{arePageNumbersAvailable:function(){return m},pageNumberFromPosition:function(f){if(f>=
g[b]){f=PageNumberUtilities.binarySearchPosition(g,f);f<b&&(f=b);var h;1<=f&&(h=d.getPageLabelTextForOrdinalPage(f));var n=h}return n},positionFromPageNumber:function(f){var h=d.getOrdinalPageForPageLabelText(f);0>=h&&parseInt(f,10);if(0>=h)return-1;h>=g.length&&(h=g.length-1);return g[h]},getMaxPageNumberLabel:function(){return d.getHighestPageLabel()},getPageNumberRanges:function(){return d.getPageNumberRanges()}}}}}(),KaramelPageNumberProvider=function(){return{create:function(q){function m(a){if(g)return PageNumberUtilities.binarySearchPosition(e,
a,function(c,f){return c.startPosition-f})}var g=!1,b=null,e=null,d=new Map;if(g=!$.isEmptyObject(q)&&$.isArray(q.navigationUnit)&&0<q.navigationUnit.length)b=q.navigationUnit[q.navigationUnit.length-1].label,e=q.navigationUnit,e.forEach(function(a){d.set(a.label,a.startPosition)});return{arePageNumbersAvailable:function(){return g},pageNumberFromPosition:function(a){if(g&&a>=e[0].startPosition)var c=e[m(a)].label;return c},positionFromPageNumber:function(a){if(g)return d.get(a)},getMaxPageNumberLabel:function(){return b},
getPageNumberRanges:function(){if(g)return[e[0],e[e.length-1]]}}}}}(),PageLabelType={r:"roman",a:"arabic",c:"custom",i:"insert"},PageNumberUtilities=function(){var q={M:1E3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1},m="M CM D CD C XC L XL X IX V IV I".split(" ");return{toRomanNumeral:function(g){var b="";g=parseInt(g,10);for(var e=0;e<m.length;e++)for(var d=m[e];g>=q[d];)b+=d,g-=q[d];return b},parseRomanNumeral:function(g){g=g.toUpperCase();for(var b=0,e=0;e<g.length-1;)b=
q[g.charAt(e)]<q[g.charAt(e+1)]?b-q[g.charAt(e)]:b+q[g.charAt(e)],e++;return b+=q[g[e]]},binarySearchPosition:function(g,b,e){var d=0,a=g.length-1;for(e||(e=function(h,n){return h-n});d<=a;){var c=Math.floor((d+a)/2);var f=e(g[c],b);if(0>f)d=c+1;else if(0<f)a=c-1;else return c}return 0<=a?a:d},isValidRomanNumeral:function(g){return/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})$/.exec(g.toString().toUpperCase())?!0:!1}}}();
(function(){function q(d){function a(){return KindleReaderAnnotationManager.deferredInitialize(d.bookinfo.getBookInfoDfd(),d.moduleManager)}function c(){var h,n;return d.bookinfo.getBookInfoDfd().pipe(function(l){h=l;return h.getMetadata()}).pipe(function(l){n=l;return KindleRenderer.getManifest()}).pipe(function(l){if(n.headerMetadata&&(n.headerMetadata.bookType===Kindle.BookInfo.PublisherMetadata.COMIC||n.headerMetadata.bookType===Kindle.BookInfo.PublisherMetadata.CHILDREN))return $.Deferred().resolve();
var u=h.getAsin(),x=h.getContext();if(KindleRenderer.getRenderer()===KindleRenderer.KARAMEL){var t=null!=l?l.acr:x.acr;l="YJ"}else t=x.formatVersion,l="KCR";return b.getSearchIndex({asin:u,formatVersion:t,contentVersion:x.contentVersion,contentCache:d.contentCache,kcrFree:d.kcrFree,facet:l})})}function f(){return d.bookinfo.getBookInfoDfd().pipe(e.getPageNumbers)}return{names:Object.freeze(g),getAnnotations:a,getSearchIndex:c,getPageNumbers:f,download:function(h){switch(h){case "annotations":return a();
case "searchIndex":return c();case "pageNumbers":return f();default:return $.Deferred().reject("Unknown sidecar")}}}}var m={annotations:{},pageNumbers:{},searchIndex:{}},g={};Object.keys(m).forEach(function(d){m[d].name=d;g[d]=d});var b,e;KindleModuleManager.define(Kindle.MODULE.SidecarManager,[Kindle.MODULE.SearchIndexManager,Kindle.MODULE.PageNumberManager],function(d,a){b=d;e=a;return{create:q}})})();function AssertionError(q){Error.call(this,q)}AssertionError.prototype=Error();
AssertionError.prototype.name="AssertionError";function KindleAssert(q,m){}
var KindleAuthor=function(){var q=["phd","md","sir"];return{getDisplayableString:function(m){for(var g="",b=m.length,e=0;e<b;e++){for(var d=m[e].split(","),a=[],c=[],f=0;f<d.length;f++){var h=$.trim(d[f]);-1<q.indexOf(h.toLowerCase())?a.push(h):c.unshift(h)}if(2===c.length)for(g+=c[0]+" "+c[1],d=0;d<a.length;d++)g+=", ",g+=a[d];else g+=m[e];1<b&&(e===b-2?g+=ResourceBundle.getLocalizedString("k_author_conjunction"):e<b-2&&(g+=", "))}return g},getLegacyDisplayableString:function(m){for(var g="",b=m.length,
e=0;e<b;e++)g+=m[e],e<b-1&&(g+="; ");return g}}}(),KindleDebug=function(){return{error:function(q){},log:function(q){},warn:function(q){},saveLogs:function(){saveLog=!0}}}(),KindleDeviceCapabilities=function(){function q(){return KindleHostDeviceDetector.isIE()}var m;return{searchInTheBook:function(){return!KindleHostDeviceDetector.isiOS_4x()},showPageNumbers:function(){return!KindleHostDeviceDetector.isiOS_4x()},multiColumnMode:function(){return!0},useNativeSelection:q,useCSSRegions:function(){return q()},
useLocaleCompare:function(){if(void 0===m){try{"a".localeCompare("b","i")}catch(g){return m="RangeError"===g.name}m=!1}return m},hasPageResizeIssues:function(){return KindleHostDeviceDetector.isiOS_9x()?!0:!1},hasSplitView:function(){return KindleHostDeviceDetector.isiOS()&&9<=KindleHostDeviceDetector.getOSMajorVersion()}}}(),KindleHostDeviceDetector=function(){function q(){return-1!==navigator.platform.indexOf("iPad")||-1!==navigator.platform.indexOf("Mac")&&(1<navigator.maxTouchPoints||"ontouchstart"in
window)}function m(){return-1!==navigator.platform.indexOf("iPhone")||-1!==navigator.platform.indexOf("iPod")}function g(){return q()||m()||h()}function b(){var w=-1;g()&&(w=(w=navigator.userAgent.match(/OS (\d+)_/))?w[1]:"13");return w}function e(){return(q()||m())&&7===parseInt(b(),10)}function d(){return(q()||m())&&8<=parseInt(b(),10)}function a(){return(q()||m())&&9<=parseInt(b(),10)}function c(){return-1!==navigator.userAgent.indexOf("Firefox")&&0>navigator.userAgent.indexOf("Trident")}function f(w){var z=
navigator.userAgent.match(/Version\/(\d+\.\d+)(?:\.\d+)*(?: Mobile\/\S+)? Safari/);return z?w?Number(z[1])>=Number(w):!0:!1}function h(){return-1!==navigator.userAgent.indexOf("Cloud9")}function n(){return-1!==navigator.userAgent.indexOf("MSAppHost")}function l(){return n()&&u()}function u(){return!!/arm/i.test(navigator.cpuClass)}function x(){return c()?navigator.onLine:KindleModuleManager.getModuleSync(KindleModuleManager.NETWORK).isOnline()}function t(){return-1!==navigator.userAgent.indexOf("MSIE")||
-1!==navigator.userAgent.indexOf("Trident")}function v(){return-1!==navigator.userAgent.indexOf("Chrome")&&-1!==navigator.userAgent.indexOf("Safari")&&-1!==navigator.userAgent.indexOf("Edg")}function r(){return"standalone"in navigator&&navigator.standalone}function k(){return window.chrome&&Kindle.top.chrome.app&&Kindle.top.chrome.app.isInstalled}function y(){return 1<=window.navigator.msMaxTouchPoints}return{isiOS:g,isiPad:q,isiPhone:m,isiOS_4x:function(){return(q()||m())&&-1!==navigator.userAgent.indexOf("OS 4")},
isiOS_5xOrGreater:function(){return(q()||m())&&5<=parseInt(b(),10)},isiOS_7x:e,isiOS_8x:d,isiOS_9x:a,hasiOSInnerHeightBug:function(){return!a()&&(e()||d())},hasCanvasSizeLimitProblem:function(){return g()},isMacintosh:function(){return-1!==navigator.userAgent.indexOf("(Macintosh;")},isFirefox:c,hasHangingDbPrompt:function(){if(!c())return!1;var w=/Firefox\/(\d+)/.exec(navigator.userAgent);return 1<=w.length&&17<=w[1]},isSafari:f,isMetro:n,isMetroArm:l,isMetroSnappedView:function(){return n()&&320===
window.outerWidth},isIE:t,isIE10:function(){return t()&&-1!==navigator.userAgent.indexOf("Trident/6.0")},isIE11:function(){return t()&&(-1!==navigator.userAgent.indexOf("Trident/7.0")||-1!==navigator.userAgent.indexOf("Trident/8.0"))},isMSEdge:v,isArm:u,isCloud9:h,isTablet:function(){return q()||n()},isOnline:x,isPageVisibilityApiSupported:function(){var w;"undefined"!==typeof document.hidden?w="hidden":"undefined"!==typeof document.msHidden?w="msHidden":"undefined"!==typeof document.webkitHidden&&
(w="webkitHidden");return void 0!==w&&"undefined"!==typeof document.addEventListener},getPageVisibilityApiTerms:function(){if("undefined"!==typeof document.hidden){var w="hidden";var z="visibilitychange"}else"undefined"!==typeof document.msHidden?(w="msHidden",z="msvisibilitychange"):"undefined"!==typeof document.webkitHidden&&(w="webkitHidden",z="webkitvisibilitychange");return{hidden:w,visibilityChange:z}},isNetworkAvailable:function(){if(!x())return(new jQuery.Deferred).reject().promise();var w=
$.Deferred();$.ajax({url:"/ping",error:function(){w.reject()},timeout:5E3}).then(w.resolve,w.reject);return w.promise()},isNetworkAvailableSync:function(){if(!x())return!1;var w=!0;$.ajax({url:"/ping",error:function(){w=!1},timeout:50,async:!1});return w},isChrome:function(){return window.chrome&&!v()},isiOSAppMode:r,isChromeApp:k,isFirefoxAppSupported:function(){return!!KindleHostDeviceDetector.isFirefox()&&window.navigator.mozApps},isInAppMode:function(){return r()||k()},isCookieEnabled:function(){return navigator.cookieEnabled},
areWebWorkersSupported:function(){return"undefined"!==typeof Worker},isLocalStorageEnabled:function(){return KindleLocalStorage.isLocalStorageEnabled()},hasArrayLikeApply:function(){return!g()||6<=parseInt(KindleHostDeviceDetector.getOSMajorVersion(),10)},isWebSQLSupported:function(){return!!window.openDatabase},isIndexedDBSupported:function(){return!!window.mozIndexedDB||!!window.indexedDB},isMSTouchEnabledDevice:y,isTouchDevice:function(){return g()||y()},getDevicePlatform:function(){return q()?
"iPad":m()?"iPhone":h()?"otter":l()?"metroArm":n()?"metro":"desktop"},hasCanvasPerformanceProblem:function(){return q()&&KindleHostPadDetector.isPad1(r())||l()},hasMissingImgOnLoadProblem:function(){return f()||r()||c()},hasImageRenderingProblem:function(){return f()||r()},getDeviceType:function(){return n()?Kindle.DeviceType.Metro:Kindle.DeviceType.KCR},getClientName:function(){return n()?Kindle.ClientName.Metro:Kindle.ClientName.KCR},getOSMajorVersion:b,getOSMinorVersion:function(){var w=-1;g()&&
(w=(w=navigator.userAgent.match(/OS (\d+)_(\d+_?(\d+)?)/))?w[2]:"0");return w},getBrowserLanguage:function(){return navigator.language||navigator.userLanguage}}}(),KindleHostPadDetector=function(){return{isPad1:function(q){if(KindleLocalStorage.getItem("definitelyNotPad1"))return!1;var m=0,g=1E3,b=0;for(i=0;3>i;i++){var e=SunSpiderBenchmark.get3DSpeed();e>m?m=e:e<g&&(g=e);b+=e}m=b/3;if(200<=m&&q||100<=m&&!q)return!0;KindleLocalStorage.setItem("definitelyNotPad1","true");return!1}}}();
function KindleInterfacesFactory(){function q(m,g){for(var b in g)if(g.hasOwnProperty(b)&&typeof m[b]!==typeof g[b])return!1;return!0}return{IKindleLibrary:{onReaderOpenStatus:function(m){},onReaderClose:function(m){},onStoreOpenStatus:function(m){},libraryUpdateNeeded:function(){}},IKindleReader:{openBook:function(m){},unloadReader:function(){},onStoreOpenStatus:function(m){},pauseReader:function(){},resumeReader:function(){},setToolbarVisible:function(m){},removeBook:function(){}},IKindleAppForLibrary:{storeIsTOS:function(){},
openStore:function(m){},openBook:function(m){},onLibraryLoaded:function(){},getQueryParameters:function(){}},IKindleAppForReader:{onReaderReady:function(){},closeReader:function(m){},onStartReadingStatus:function(m,g,b){},onRendererLoaded:function(m,g,b){},openStore:function(m){},pinBookToStart:function(m){},onReaderTapped:function(){},onUserAction:function(){},hideAppBar:function(){}},IKindleRenderer:{STATUS_ERROR:0,STATUS_LOADING:1,STATUS_PAGINATING:2,STATUS_PAGINATED:3,STATUS_DONE:4,ERROR_LOAD_FAILURE:5,
ERROR_CONTAINER_NOT_FOUND:6,ERROR_UNABLE_TO_GET_BOOK_CONTENT:7,ERROR_UNABLE_TO_GET_WORD_RECTS:8,ERROR_TIMEOUT_WHILE_LOADING_BOOK_CONTENT:9,ERROR_UNKNOWN:10,PAGE_LOAD_INCOMPLETE_FLAG_NAME:"PageLoadIncomplete",initialize:function(m,g,b,e){},shutdown:function(){},getMinimumPosition:function(){},getMaximumPosition:function(){},createWordIterator:function(){},updateSettings:function(m){},gotoPosition:function(m){},nextScreen:function(){},previousScreen:function(){},hasNextScreen:function(){},hasPreviousScreen:function(){},
getPagePositionRange:function(){},getPageSelectableItemBoundaries:function(){},getPageWordPositions:function(){},onWindowResize:function(){},handleClick:function(m,g){},reloadAnnotations:function(){},getContentRects:function(){},getZoomableAt:function(m,g){},getZoomableList:function(){},clearSelection:function(){},getSelection:function(){}},checkImplements:q,assertImplements:function(m,g){q(m,g)||KindleAssert(!1,"Object fails to provide all properties of interface prototype")}}}
var KindleInterfaces=KindleInterfacesFactory(),KindlJournalManager=function(){function q(a){var c=[],f;for(f in a){var h=a[f].entry;h.guid=h.guid||h.refEmId;delete h.refEmId;h&&c.push(h)}return c}function m(a){var c=[],f;for(f in a)c.push({entry:a[f]});return e.getAppDb().getTable("journal").insertList(c)}function g(a){function c(){var l=KindleModuleManager.getModuleSync(KindleModuleManager.RESOURCE_BUNDLE).getLocalTimeOffset();if(h<a.length){n=Math.min(h+100,a.length);var u=Array.prototype.slice.call(a,
h,n);h=n;d.updateAnnotations(q(u),l).then(function(){e.getAppDb().deleteJournalEntries(u).then(c,f.reject)},f.reject)}else f.resolve()}var f=new jQuery.Deferred,h=0,n;c();return f.promise()}function b(){var a=new jQuery.Deferred;e.getAppDb().getTable("journal").getRecord().then(function(c){0<c.length?g(c).then(a.resolve,a.reject):a.resolve()},a.reject);return a.promise()}var e=null,d=null;return{initialize:function(){var a=new jQuery.Deferred,c=this;KindleModuleManager.getModuleList([KindleModuleManager.SERVICE_CLIENT,
KindleModuleManager.DB_CLIENT]).then(function(f){d=f[KindleModuleManager.SERVICE_CLIENT];e=f[KindleModuleManager.DB_CLIENT];a.resolve(c)},a.reject);return a.promise()},saveToJournal:function(a){var c=new jQuery.Deferred;m(a).then(function(){b().then(c.resolve,c.resolve)},c.reject);return c.promise()},uploadJournal:b}}(),KindleLegacyDeviceTokenStorage=function(){return{hasDeviceTokenFromStorage:function(){return null!==KindleLocalStorage.getItem("kindleDeviceToken")},getDeviceTokenFromStorage:function(){return KindleLocalStorage.getItem("kindleDeviceToken")},
setDeviceToken:function(q){KindleLocalStorage.setItem("kindleDeviceToken",q)},clearDeviceTokenFromStorage:function(){KindleLocalStorage.removeItem("kindleDeviceToken")}}}(),KindleMetricsProfiler=function(q){function m(b){for(var e=0,d=0;d<b.length;d+=1)e+=b[d].end-b[d].start;return e}var g={};g.name=q;g.counters=null;g.subTimers=null;g.runs=[{start:(new Date).getTime(),end:null}];g.endTimer=function(){var b=this.runs[this.runs.length-1];null===b.end&&(b.end=(new Date).getTime())};g.addCount=function(b,
e){null===this.counters&&(this.counters={});this.counters[b]=void 0===this.counters[b]?e:this.counters[b]+e};g.createSubTimer=function(b){null===this.subTimers&&(this.subTimers={});void 0===this.subTimers[b]?this.subTimers[b]=KindleMetricsProfiler(b):this.subTimers[b].runs.push({start:(new Date).getTime(),end:null});return this.subTimers[b]};g.log=function(){var b=m(this.runs);this.logAsPercentageOfTime("",b)};g.logAsPercentageOfTime=function(b,e){b=b+":"+this.name;var d,a=m(this.runs);KindleDebug.log(b+
":Time: "+a+"ms - ("+(e?a/e*100:100).toFixed(2)+"%)");for(d in this.counters)KindleDebug.log(b+":"+d+" : "+this.counters[d]);for(d in this.subTimers)this.subTimers[d].logAsPercentageOfTime(b,e)};return g},KindleRemoteClient=function(){return{uploadFeedback:function(q){if(!q)return(new $.Deferred.reject).promise();var m=KindleLibrarySetting.getSettings();m={DevicePlatform:KindleHostDeviceDetector.getDevicePlatform(),UserAgent:navigator.userAgent,WindowHeight:window.innerHeight,WindowWidth:window.innerWidth,
AppCached:!1,AppCacheStatus:window.applicationCache.status,TouchEnabled:KindleHostDeviceDetector.isTouchDevice(),ApplicationMode:KindleHostDeviceDetector.isInAppMode(),Language:navigator.language,LocalStorageEnabled:KindleHostDeviceDetector.isLocalStorageEnabled(),LibrarySort:m.sortParam,LibraryView:m.viewState,TLD:Kindle.URL.getAmazonDomain()||"unknown"};return function(g){return KindleModuleManager.getModule(KindleModuleManager.DB_CLIENT).pipe(function(b){try{var e=b.getAppDb(),d=e.getCachedAsins(Kindle.BookInfo.CachedState.FULLY_DOWNLOADED),
a=e.getAllBooks();g.info.OfflineStorageEnabled=!!b.bookDbEnabled();return $.when(d,a)}catch(c){return $.Deferred.reject()}}).pipe(function(b,e){$.extend(g.info,{TotalBookCount:e.length,TotalBookDownloaded:b.length});b=g.eid?g.eid:KindleModuleManager.getModuleSync(Kindle.MODULE.SERVICE_CLIENT).getEID();return b}).pipe(function(b){g.eid=b;return g},function(){return $.Deferred().resolve(g)})}({version:KindleVersion.getVersionString(),message:q.text,deviceType:KindleHostDeviceDetector.getDeviceType(),
info:m}).pipe(function(g){g={url:"/remote/feedback",type:"POST",processData:!1,contentType:"application/json",data:JSON.stringify(g)};return $.ajax(g)})}}}(),KindleTemplateManager=function(){return{initialize:function(){Handlebars.registerHelper("str",function(q){return ResourceBundle.getLocalizedString(q)})}}}(),KindleUserAgentMetricsInfo=function(){var q,m,g,b,e,d={chrome:14,firefox:7,safari:5,metro:1,ie:10,ios:4,edge:16};return{browserWithVersionString:function(){if(!q){m=GoogleUserAgent.browserName.toLowerCase();
var a;a:{if(-1!==["ipad","iphone"].indexOf(m)&&(m="ios",(a=/CPU OS ([0-9_]+) /.exec(navigator.userAgent))&&2<=a.length)){a=a[1];break a}a=void 0}a||(a=KindleHostDeviceDetector.isIE()?KindleHostDeviceDetector.isIE10()?"10":KindleHostDeviceDetector.isIE11()?"11":"unknown":void 0);g=a||GoogleUserAgent.browserVersionString.toLowerCase();a:{if(a=g){var c=/^0*([0-9]+)/.exec(a);if(c&&2<=c.length){b=parseInt(c[1],10);break a}KindleDebug.error("Bad regex on versionString: "+a)}b=void 0}e="undefined"===typeof b?
"other":d[m]?[m,b].join("@"):"other";q=!0}return e}}}(),KindleVersion=function(){var q="011305999";"k4w-dev.aka.amazon.com"===window.location.hostname&&(q="999999998");if(9!==q.length)throw{name:"BadVersion",message:"bad version number. got: "+q};var m=null,g=null;return{getMetricsVersionString:function(){g||(g=parseInt(q.slice(0,2),10),g+=".",g+=parseInt(q.slice(2,4),10),g+=".",g+=parseInt(q.slice(4,6),10));return g},getVersionString:function(){m||(m=parseInt(q.slice(0,2),10),m+=".",m+=parseInt(q.slice(2,
4),10),m+=".",m+=parseInt(q.slice(4,6),10),m+=".",m+=parseInt(q.slice(6),10));return m},getVersionNumber:function(){return Number(q)},parseVersionString:function(b){return b&&(b=/(\d{1,2})\.(\d{1,2})\.(\d{1,2})\.(\d{1,3})/.exec(b))?1E7*Number(b[1])+1E5*Number(b[2])+1E3*Number(b[3])+Number(b[4]):NaN}}}(),KindleReaderArrhythmicHeartBeatHandler=function(){function q(){return void 0!==n}function m(){}function g(){}function b(){e();navigator.onLine&&(h=setTimeout(d,5E3))}function e(){clearTimeout(h);clearTimeout(n)}
function d(){var y=f();r&&(l?l:KindleModuleManager.getModuleSync(KindleModuleManager.SERVICE_CLIENT)).stillReading({asin:u,position:y,positionType:x,localTimeOffset:k,countryCode:"US",refEmId:t,kindleSessionId:v}).then(m,g);h=void 0;KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER).uploadMetrics();navigator.onLine&&(n=setTimeout(a,6E5))}function a(){n=void 0}function c(){clearTimeout(h);h=void 0;clearTimeout(n);x=t=u=n=void 0}var f,h,n,l,u,x,t,v,r,k=-(new Date).getTimezoneOffset();
return{onReadingStart:function(y,w,z,A,B,C){if(y!==u)return q()&&c(),u=y,x=C,t=w,v=z,f=A,r=B,d(),b},onReadingEnd:c,isStillReading:q,setNetworkModule:function(y){l=y},handleHeartBeat:b,cancelCurrentHeartBeat:e}}(),KindleReaderControls=function(){function q(b){return function(){var e=b.attr("data-action");e&&!b.hasClass("disabled")&&KindleEventBroker.fire(e)}}function m(b){return function(e){switch(e.keyCode||e.which){case 32:if(e.shiftKey||e.ctrlKey||e.metaKey)break;(e=b.attr("data-action"))&&!b.hasClass("disabled")&&
KindleEventBroker.fire(e);break;case 13:(e=b.attr("data-action"))&&!b.hasClass("disabled")&&KindleEventBroker.fire(e)}}}var g=[];return{DataActions:Object.freeze({Close:"reader_close",Back:"reader_back",ShowGoTo:"reader_show_goto",ShowSettings:"reader_show_settings",Bookmark:"reader_bookmark",ShowNotes:"reader_show_notes",Sync:"reader_sync",PinToStart:"reader_pin_metro",OpenFullKCR:"reader_open_full_kcr",BuyFullBook:"reader_buy_full_book",ImmersiveIcon:"immersive_icon"}),registerComponent:function(b){var e=
b.find("[data-action]");b.attr("data-action")&&e.push(b);for(var d=0;d<e.length;d++){var a=$(e[d]);a.tap(q(a));a.on("keyup",m(a))}g.push(b)},setDataActionEnabled:function(b,e){for(var d,a=0;a<g.length;a++)d=g[a].find("[data-action='"+b+"']"),d.toggleClass("disabled",!e)},setDataActionVisible:function(b,e){for(var d,a=0;a<g.length;a++)d=g[a].find("[data-action='"+b+"']"),d.toggle(e)},clickElementWithID:function(b){b=$("#"+b);var e=b.attr("data-action");b&&e&&KindleEventBroker.fire(e)}}}(),KindleReaderLPRManager=
function(){function q(a){e.getAppDb().updateLastReadTime(g,(new Date).getTime(),a,function(){})}function m(){function a(){window.top.location.reload(!0)}d.emitNow("App::DatabaseGoneOnUpdateLPR",{breakdown:["Browser"]}).then(a,a)}var g,b,e,d;return{NEVER:-1,initialize:function(a,c){function f(l){return l&&!isNaN(Number.parseInt(l,10))}var h=new jQuery.Deferred,n=this;g=a;d||(d=KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER));KindleModuleManager.getModule(KindleModuleManager.DB_CLIENT).done(function(l){e=
l;e.getAppDb().getBook(g,function(u){var x=-1;if(u.lastPositionRead)if(f(u.lastPositionRead)){var t;if(t=c){t=u.lastPositionRead;var v=c.endPosition;t=0>parseInt(t,10)||parseInt(t,10)>parseInt(v,10)}if(t)d.emit("Reader::LPR::OutOfRange");else{var r=u.lastPositionRead;x=f(u.lastTimeRead)?u.lastTimeRead:-1}}else d.emit("Reader::LPR::CorruptedData");b={lastPositionRead:r,lastTimeRead:x,lastSyncTime:u.lastFPRSyncTime,lastPositionReadACR:u.lastPositionReadACR};h.resolve(n)})});return h.promise()},clear:function(){b=
g=void 0},getLastPositionRead:function(){return b.lastPositionRead},onReadingStart:function(a,c,f,h){$.when(f.locationFromPosition(c.currentTopOfPage),f.locationFromPosition(a.position)).done(function(n,l){a.position>c.currentBottomOfPage&&-1!==b.lastTimeRead&&a.syncTime!==b.lastSyncTime&&h({currentLocation:n,currentPosition:c.currentTopOfPage,fprPosition:a.position,fprLocation:l,fprDevice:a.deviceName,fprDateTime:a.syncTime});q(a.syncTime)})},onPageChange:function(a,c){c=void 0===c?null:c;b.lastPositionRead=
a;b.lastTimeRead=(new Date).getTime();b.lastPositionReadACR=c;e.getAppDb().updateLastPositionReadObject?e.getAppDb().updateLastPositionReadObject(g,b,function(f){f&&(f.code===Kindle.DB.DATABASE_ERR||f.code===Kindle.DB.SYNTAX_ERR)&&0<=f.message.indexOf("no such table")&&m()}):m()},onReadingEnd:function(){g=null;b=void 0},getStartReadingPosition:function(){return b},updateFprSyncTime:function(a){a.syncTime!==b.lastSyncTime&&e.getAppDb().updateLastFPRSyncTime(g,a.syncTime,function(){})}}}(),KindleReaderMetrics=
function(){function q(w){if(w)switch(w.toLowerCase()){case "loadfailure":return Kindle.ERROR.OPEN_BOOK_LOAD_FAILURE;case "abort":case "timeout":case "error":return Kindle.ERROR.OPEN_BOOK_NETWORK_ERROR;case "contentloaned":case "contentloanended":case "contentlicenseexceeded":case "contentunsupported":case "formatunsupported":case "contentnotowned":case "contentrentalexpired":case "sessionlimitexceeded":return Kindle.ERROR.OPEN_BOOK_CONTENT_UNAVAILABLE;case "geolocationnotallowed":return Kindle.ERROR.GEOLOCATION_NOT_ALLOWED;
default:return Kindle.ERROR.OPEN_BOOK_UNKNOWN}}function m(){y||(y=KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER));return y}var g=!1,b,e,d,a,c,f,h,n,l,u="",x="",t=1,v,r=null,k=null,y;return{NEXT_PAGE:0,PREV_PAGE:1,startBookOpenTimer:function(){e=m().createTimer();return d=m().startMetrics("Reader::Open")},reportBookOpenSuccess:function(w){var z={breakdown:["Browser"],submetrics:[{name:"Count",value:1}]},A=w.bookType,B=[{name:"Library::ReaderOpen::"+A,params:z}];w.publisherBookType&&
B.push({name:"Library::ReaderOpen::"+A+"::"+w.publisherBookType,params:z});var C=w.isNetworkAccessed?"::RemoteContent":"::LocalContent",D="";A===Kindle.BookInfo.BookType.MOBI8&&(D=w.isContentScrambled?"::scrambled":"::unscrambled",B.push({name:"Library::ReaderOpen::"+A+D,params:z}),w.publisherBookType&&B.push({name:"Library::ReaderOpen::"+A+"::"+w.publisherBookType+D,params:z}));w.clickToGlassTimer&&(A="Library::ReaderOpen::"+A+D,C=[{name:A+"::ClickToGlass"+C,params:{time:w.clickToGlassTimer.time,
breakdown:["Browser"]}},{name:A+"::RendererLoaded"+C,params:{time:w.rendererLoadedTimer.time,breakdown:["Browser"]}},{name:A+"::MetadataLoaded"+C,params:{time:w.metadataLoadedTimer.time,breakdown:["Browser"]}}],m().emit(C));w.isOnline||B.push({name:"Library::ReaderOpenOffline",params:z});w.screenOrientation&&B.push({name:"Library::ReaderOpen::Orientation::"+w.screenOrientation});B.push({name:"Library::ReaderOpen::ContentType::"+w.contentType,params:z});w.contentType===Kindle.CONTENT_TYPE.EBSP&&(w.isOwned?
B.push({name:"Library::ReaderOpen::ContentType::"+w.contentType+"::Owned",params:z}):B.push({name:"Library::ReaderOpen::ContentType::"+w.contentType+"::NotOwned",params:z}));e.emit(B);m().endMetrics(d);m().uploadMetrics()},reportBookOpenFailure:function(w){function z(C){A.push({name:C});A.push({name:C+"::"+w.bookType})}var A=[],B=q(w.errorCode);z("Library::ReaderOpenFail");B&&(z("Library::ReaderOpenFail::"+B),B===Kindle.ERROR.OPEN_BOOK_CONTENT_UNAVAILABLE&&(z("Library::ReaderOpenFail::"+B+"::"+w.errorCode),
w&&w.contentType===Kindle.CONTENT_TYPE.EBSP&&m().emit("zzz::SampleTitleNotAvailable::"+w.asin)));e.emit(A);m().modifyMetricsMethod(d,"Reader::OpenFail");m().endMetrics(d);m().uploadMetrics()},setBookType:function(w,z){u=w;x="";w===Kindle.BookInfo.BookType.MOBI8&&(x=z?"::scrambled":"::unscrambled")},setColumnCount:function(w){t=Number(w)||1},startGoToMetrics:function(){a=m().createTimer()},endGoToMetrics:function(){if(a){var w="Reader::GoToPosition::"+u,z={breakdown:["Browser"]},A=[{name:w,params:z}];
x&&A.push({name:w+x,params:z});a.emit(A);a=null}},startPageTurnTimer:function(w,z){g||((g=!0,v=z,0!==w||c)?1!==w||f||(f=m().createTimer(),b=w):(c=m().createTimer(),b=w))},endPageTurnTimer:function(w){var z={breakdown:["Browser"],submetrics:[{name:"columnCount",value:t}]};if(g){var A=w?"::RemoteContent":"::LocalContent";if(0===b&&c){var B="Reader::NextPage::";var C=c}else 1===b&&f&&(B="Reader::PrevPage::",C=f);if(B){w=B+u;var D=[{name:w,params:z},{name:w+A,params:z}];0===b&&D.push({name:"Reader::NextPage:Version",
params:{breakdown:["Version"]}});x&&(D=D.concat([{name:w+x,params:z},{name:w+x+A,params:z}]));C.emit(D);v&&m().emit(B+v)}f=c=null;g=!1}},startSpinnerTimer:function(){g&&(0!==b||h?1!==b||n||(n=m().createTimer()):h=m().createTimer())},endSpinnerTimer:function(w){var z={breakdown:["Browser"],submetrics:[{name:"columnCount",value:t}]};if(g){if(0===b&&h){var A="Reader::NextPageSpinner::";var B=h}else 1===b&&n&&(A="Reader::PrevPageSpinner::",B=n);if(A){A+=u;var C=[{name:A,params:z}];x&&(C=C.concat([{name:A+
x,params:z},{name:A+x+(w?"::RemoteContent":"::LocalContent"),params:z}]));B.emit(C)}n=h=null}},reportContentNotAvailableMetrics:function(){m().emit("Reader::ContentNotAvailableOffline")},reportTimeOutMetrics:function(){var w="Reader::PageTurnTimeOut::"+u,z=[{name:w}];x&&z.push({name:w+x});m().emit(z)},reportBackButtonUsage:function(){m().emit("Reader::BackButton")},reportGoToAnnotationUsage:function(){m().emit("Reader::AnnotationsPane::GoToLocation")},reportScrubberUsage:function(){m().emit("Reader::ScrubberBar::GoToLocation")},
notifyAnnotationsReady:function(){l=m().createTimer()},reportAnnotationsPaneOpened:function(){m().emit("Reader::OpenAnnotationsPane");l&&(l.emit("Reader::OpenAnnotationsPane::Time"),l=null)},reportOrientationChange:function(w){null!==k?(clearTimeout(k),k=null,r.emit("Reader::OrientationChange::Unintentional::"+w),r=null):(r=m().createTimer(),k=setTimeout(function(){k=r=null;m().emit("Reader::OrientationChange::Intentional::"+w)},6E4))}}}(),KindleReaderOverlayManager=function(){function q(b){b.oldValue&&
m.callEventListeners("overlayRemoved",{type:"overlayRemoved",overlay:{type:"kindle.selection",start:b.oldValue.start,end:b.oldValue.end}});b.newValue&&m.callEventListeners("overlayAdded",{type:"overlayAdded",overlay:{type:"kindle.selection",start:b.newValue.start,end:b.newValue.end}})}var m=new ListenerManager,g;return{OVERLAY_ADDED_EVENT:"overlayAdded",OVERLAY_REMOVED_EVENT:"overlayRemoved",SELECTION:"kindle.selection",SEARCH_RESULT:"kindle.search",addSearchResult:function(b){m.callEventListeners("overlayAdded",
{type:"overlayAdded",overlay:{type:"kindle.search",start:b,end:b}})},removeSearchResult:function(b){m.callEventListeners("overlayRemoved",{type:"overlayRemoved",overlay:{type:"kindle.search",start:b,end:b}})},setSelectionManager:function(b){g=b;g.addEventListener(g.SELECTION_CHANGED_EVENT,q)},getOverlaysInRange:function(b,e){var d=[],a=KindleReaderAnnotationManager.getAnnotationsInRange(b,e,KindleReaderAnnotationManager.NOTE),c=KindleReaderAnnotationManager.getAnnotationsInRange(b,e,KindleReaderAnnotationManager.HIGHLIGHT),
f=g.getSelection(),h=ReaderSitbHighlight.get();a&&Array.prototype.push.apply(d,a);c&&Array.prototype.push.apply(d,c);f&&b<=f.end&&f.start<=e&&d.push({type:"kindle.selection",start:f.start,end:f.end});if(h&&0<h.length)for(b=0;b<h.length;b++)d.push({type:"kindle.search",start:h[b],end:h[b]});return d},addEventListener:m.addEventListener,removeEventListener:m.removeEventListener}}(),KindleReaderSelectionRenderer=function(){var q=null,m=null,g=null,b=KindleHostDeviceDetector.isTouchDevice();return{initialize:function(e){g=
e;b&&(q=document.createElement("DIV"),$(q).addClass("amazon-grabHandleBegin"),$(q).hide(),$("body").append(q),m=document.createElement("DIV"),$(m).addClass("amazon-grabHandleEnd"),$(m).hide(),$("body").append(m))},getGrabHandleBegin:function(){return q},getGrabHandleEnd:function(){return m},setSelection:function(e){if(e.touchSelected&&b){var d=KindleListUtilities.first(g.getBounds(e.start));e=KindleListUtilities.last(g.getBounds(e.end));var a=$("#kindleReader_content");KindleHostDeviceDetector.isMSTouchEnabledDevice()?
q.style.top=d.bottom+a.offset().top+"px":q.style.top=d.top+a.offset().top+"px";q.style.left=d.left+a.offset().left+"px";m.style.top=e.bottom+a.offset().top+"px";m.style.left=e.right+a.offset().left+"px";$(q).show();$(m).show()}},clearSelection:function(){b&&($(q).hide(),$(m).hide())}}}(),KINDLE_READER_SETTINGS_COLOR_MODE={WHITE:{id:"#kindleReader_controlPanel_colorWhite",persistedValue:0},SEPIA:{id:"#kindleReader_controlPanel_colorSepia",persistedValue:1},BLACK:{id:"#kindleReader_controlPanel_colorBlack",
persistedValue:2}},KINDLE_READER_SETTINGS_FONT_SIZE={XSMALL:{id:"#kindleReader_controlPanel_xSmallFont",size:14},SMALL:{id:"#kindleReader_controlPanel_smallFont",size:16},MEDIUM:{id:"#kindleReader_controlPanel_mediumFont",size:20},LARGE:{id:"#kindleReader_controlPanel_largeFont",size:28},XLARGE:{id:"#kindleReader_controlPanel_xLargeFont",size:44}},KINDLE_READER_SETTINGS_GLYPH_SCALE={14:1,16:1.25,20:1.5,28:2,44:3},KINDLE_READER_SETTINGS_MARGIN={XSMALL:{id:"#kindleReader_controlPanel_xSmallMargin",
size:0},SMALL:{id:"#kindleReader_controlPanel_smallMargin",size:10},MEDIUM:{id:"#kindleReader_controlPanel_mediumMargin",size:18},LARGE:{id:"#kindleReader_controlPanel_largeMargin",size:20},XLARGE:{id:"#kindleReader_controlPanel_xLargeMargin",size:22}},KINDLE_READER_SETTINGS_COLUMN_MODE={OFF:{id:"#kindleReader_controlPanel_columnButton_off",persistedValue:"true"},ON:{id:"#kindleReader_controlPanel_columnButton_on",persistedValue:"false"}},KINDLE_READER_SETTINGS_SHOW_LOCATION_MODE={OFF:{id:"#kindleReader_controlPanel_showLocationButton_off",
persistedValue:"false"},ON:{id:"#kindleReader_controlPanel_showLocationButton_on",persistedValue:"true"}},KindleReaderSettings=function(){function q(){var a,c,f,h,n,l,u,x,t,v,r,k,y;this.copy=function(w){a=w.getFontSize();c=w.getMargin();this.setColorMode(w.getColorMode());k=w.getShowColumns();y=w.getShowLocations()};this.reset=function(){a=m;c=g;this.setColorMode(b);k=e;y=d};this.getFontSize=function(){return a};this.getGlyphScale=function(){return KINDLE_READER_SETTINGS_GLYPH_SCALE[a]};this.setFontSize=
function(w){a=w};this.getMargin=function(){return c};this.setMargin=function(w){c=w};this.getLineHeight=function(){return 1.4};this.getBGColor=function(){return h};this.getFGColor=function(){return n};this.getBodyColor=function(){return l};this.getTitleColor=function(){return u};this.getHighlightColor=function(){return x};this.getSearchBGColor=function(){return t};this.getSearchBorderColor=function(){return v};this.getSelectionColor=function(){return selectionColor};this.getColorMode=function(){return f};
this.getInsertBGColor=function(){return r};this.setColorMode=function(w){w===KINDLE_READER_SETTINGS_COLOR_MODE.WHITE?(h="#ffffff",n="#000000",l="#ffffff",u="#999999",x="#fff5ad",selectionColor="#cdd0d4",r="#cccccc",t="#fffbde",v="#ccc9b2"):w===KINDLE_READER_SETTINGS_COLOR_MODE.SEPIA?(h="#e7dec7",n="#5d4232",l="#e7dec7",u="#84725B",x="#f1e9bc",selectionColor="#c5bfae",r="#d8c69f",t="#fef4b5",v="#cbc391"):w===KINDLE_READER_SETTINGS_COLOR_MODE.BLACK&&(h="#000000",n="#acacac",l="#000000",u="#999999",
x="#355671",selectionColor="#6d6d6d",r="#333333",t="#1f384d",v="#366185");f=w};this.getShowColumns=function(){return k};this.setShowColumns=function(w){k=w};this.getShowLocations=function(){return y};this.setShowLocations=function(w){y=w};this.save=function(){try{KindleLocalStorage.setItem("KindleReaderSettings.fontSize",a),KindleLocalStorage.setItem("KindleReaderSettings.margin",c),KindleLocalStorage.setItem("KindleReaderSettings.colorMode",f.persistedValue),KindleLocalStorage.setItem("KindleReaderSettings.showColumns",
k),KindleLocalStorage.setItem("KindleReaderSettings.showLocations",y)}catch(w){}};this.load=function(){KindleLocalStorage.getItem("KindleReaderSettings.fontSize")&&(a=parseInt(KindleLocalStorage.getItem("KindleReaderSettings.fontSize"),10));KindleLocalStorage.getItem("KindleReaderSettings.margin")&&(c=parseInt(KindleLocalStorage.getItem("KindleReaderSettings.margin"),10));if(KindleLocalStorage.getItem("KindleReaderSettings.colorMode")){var w=parseInt(KindleLocalStorage.getItem("KindleReaderSettings.colorMode"),
10),z;for(z in KINDLE_READER_SETTINGS_COLOR_MODE)KINDLE_READER_SETTINGS_COLOR_MODE[z].persistedValue===w&&this.setColorMode(KINDLE_READER_SETTINGS_COLOR_MODE[z])}KindleLocalStorage.getItem("KindleReaderSettings.showColumns")&&(k="false"===KindleLocalStorage.getItem("KindleReaderSettings.showColumns")?"false":"true");KindleLocalStorage.getItem("KindleReaderSettings.showLocations")&&(y="false"===KindleLocalStorage.getItem("KindleReaderSettings.showLocations")?"false":"true")};this.equal=function(w){return w?
w instanceof q?this.getFontSize()===w.getFontSize()&&this.getMargin()===w.getMargin()&&this.getColorMode()===w.getColorMode()&&this.getShowColumns()===w.getShowColumns()&&this.getShowLocations()===w.getShowLocations():!1:!1}}var m=KINDLE_READER_SETTINGS_FONT_SIZE.MEDIUM.size,g=KINDLE_READER_SETTINGS_MARGIN.MEDIUM.size,b=KINDLE_READER_SETTINGS_COLOR_MODE.WHITE,e=KINDLE_READER_SETTINGS_COLUMN_MODE.OFF.persistedValue,d=KINDLE_READER_SETTINGS_SHOW_LOCATION_MODE.ON.persistedValue;return q}(),KindleReaderZoomableManager=
function(){function q(){e=KindleRenderer.getZoomableList();d=!!e;e&&0<e.length&&(a===g.PREV?(b=e.length-1,e[b].activate()):a===g.NEXT&&(b=0,e[b].activate()),a=null)}function m(){d&&(e&&0<e.length&&e[b].deactivate(),b=null,d=!1)}var g={NEXT:"next",PREV:"prev"},b=null,e=null,d=!1,a=null;return{activateZoomableAtPosition:function(c,f){c=KindleRenderer.getZoomableAt(c,f);m();if(c&&c.activate){e||(e=KindleRenderer.getZoomableList(),d=!!e);a:{for(f=0;f<e.length;f++)if(e[f].isSame(c)){b=f;break a}b=void 0}e[b].activate();
d=!0}},gotoNextZoomable:function(){function c(){e=null;KindleRenderer.hasNextScreen()&&(a=g.NEXT);KindleReaderUI.nextPage()&&q()}e&&(0===e.length?c():(e[b].deactivate(),b<e.length-1?e[++b].activate():c()))},gotoPreviousZoomable:function(){function c(){e=null;KindleRenderer.hasPreviousScreen()&&(a=g.PREV,KindleReaderUI.prevPage()&&q())}e&&(0===e.length?c():(e[b].deactivate(),0<b?e[--b].activate():c()))},isZoomed:function(){return d},activateZoomableOnPageTurn:q,deactivateZoomable:m,clearZoomables:function(){e=
null}}}(),KindleReaderClippingManager=function(){function q(m,g,b,e,d){for(var a=!0;a;){if(0>=g){d.resolve(e+"...");return}a=m.getItem();if(a.pos>b){d.resolve(e);return}g--;e+=a.text;a=m.next()}m.getLoadingDfd().then(function(c){c?q(m,g,b,e,d):d.resolve(e)},d.reject)}return{getSelectedText:function(m){var g=KindleReaderUI.getSelection();if(!g)return(new jQuery.Deferred).reject().promise();var b=$.Deferred(),e=KindleRenderer.createWordIterator(),d=$.Deferred();if(m){var a=$.Deferred();e.gotoPosition(g.start).then(function(){q(e,
m,g.end,"",a)},a.reject);a.then(function(){var c=e.getItem().pos;d.resolve((c-g.start)/KindleReaderUI.getMaxPosition()*100)},d.reject)}else a=e.getText(g.start,g.end),d.resolve((g.end-g.start)/KindleReaderUI.getMaxPosition()*100);$.when(a,d).then(function(c,f){b.resolve({text:c,percent:f})},b.reject);return b.promise()}}}(),KindleSelectionEvents=function(){function q(L){if(!L.pageX&&!L.pageY){var P=L.target.getBoundingClientRect();return{x:P.left+L.clientX,y:P.top+L.clientY}}return{x:L.pageX,y:L.pageY}}
function m(L){if(!y&&!w&3!==L.which){var P=q(L);P=D(P.x,P.y,225);N=!1;0<=P&&(z=!0,C=B=!1,A=P,F.setSelection(null),L.preventDefault())}}function g(L){if(z&&A&&3!==L.which){var P=q(L);z=!1;B&&F.getSelection()&&(P=D(P.x,P.y),F.setSelection({start:Math.min(A,P),end:Math.max(A,P)}),F.processSelection());L.stopPropagation()}B=!1}function b(L){B=!0;if(z&&A){var P=q(L);P=D(P.x,P.y);F.setSelection({start:Math.min(A,P),end:Math.max(A,P)});C=!0}else C=!1;L.stopPropagation()}function e(L){if(M)return!1;var P=
q(L);P=D(P.x,P.y,225);0<=P&&(F.setSelection({start:P,end:P}),F.processSelection(),L.stopPropagation())}function d(L){C||(F.setSelection(null),N=!1)}function a(L){y=!0;w=!1;A=F.getSelection().end;L.stopPropagation();return!1}function c(L){y=!1;w=!0;A=F.getSelection().start;L.stopPropagation();return!1}function f(L){y||w||F.setSelection(null)}function h(L){(y||w)&&l(L)}function n(L){(y||w)&&u(L)}function l(L){F.getSelection()&&(F.processSelection(),w=y=!1,A=null,L.stopPropagation())}function u(L){if(A&&
(y||w)){var P=F.getSelection();if(L.originalEvent&&L.originalEvent.touches){var V=L.originalEvent.touches[0].pageX;var Z=L.originalEvent.touches[0].pageY}else Z=q(L),console.log("move:"+Z.x+","+Z.y),V=Z.x,Z=Z.y;V=D(V,Z);y?F.setSelection({start:Math.min(A,V),end:P.end,touchSelected:!0}):w&&F.setSelection({start:P.start,end:Math.max(A,V),touchSelected:!0},!0);L.preventDefault();L.stopPropagation()}}function x(L){var P=D(L.startX,L.startY,225);0<=P&&(F.setSelection({start:P,end:P,touchSelected:!0}),
F.processSelection(),C=!0,L.stopPropagation&&L.stopPropagation())}function t(){if(!this.isTouchEvent||N)N=!1;else{var L=D(this.x,this.y,225);0<=L&&(F.setSelection({start:L,end:L,touchSelected:!0}),F.processSelection(),N=C=!0)}}function v(L){a:{var P=$(".ui-dialog:visible");L=q(L);for(var V=P.length,Z=0;Z<V;Z+=1){var R=P[Z],I=$(R).offset();if(I.top-10<L.y&&L.y<I.top+$(R).height()+10&&I.left-10<L.x&&L.x<I.left+$(R).width()+10){P=!0;break a}}P=!1}return!P}function r(L){return function(P){if(P.pointerType===
P.MSPOINTER_TYPE_MOUSE||P.pointerType===P.MSPOINTER_TYPE_PEN)M=!1,L(P)}}function k(L){return function(P){P.pointerType===P.MSPOINTER_TYPE_TOUCH&&(M=!0,L(P))}}var y=!1,w=!1,z=!1,A,B=!1,C=!1,D,F,M=!1,N=!1;return{initialize:function(L){D=L.getBookPositionAt;F=L.selectionStateManager;KindleHostDeviceDetector.isMSTouchEnabledDevice()?(L.mouseDownEventSource&&($(L.mouseClickOutsideEventSource).click(d),$(L.mouseDownEventSource).dblclick(e),L.mouseEventSource.addEventListener("MSPointerMove",r(b)),L.mouseEventSource.addEventListener("MSPointerDown",
r(function(P){v(P)&&m(P)})),L.mouseEventSource.addEventListener("MSPointerUp",r(function(P){v(P)&&g(P)}))),L.touchEventSource&&(L.selectionHandleLeft.addEventListener("MSPointerDown",k(a)),L.selectionHandleRight.addEventListener("MSPointerDown",k(c)),L.selectionHandleLeft.addEventListener("MSPointerUp",k(l)),L.selectionHandleRight.addEventListener("MSPointerUp",k(l)),L.touchEventSource.addEventListener("MSPointerMove",k(u)),L.touchEventSource.addEventListener("MSPointerUp",k(l)),L.touchEventSource.addEventListener("MSPointerDown",
k(f)),$(L.touchEventSource).tap(t))):(L.mouseDownEventSource&&($(L.mouseDownEventSource).dblclick(e),$(L.mouseDownEventSource).mousedown(m),$(L.mouseEventSource).mousemove(b),$(L.mouseEventSource).mouseup(g),$(L.mouseClickOutsideEventSource).click(d)),L.touchEventSource&&($(L.selectionHandleLeft).bind("touchstart",a),$(L.selectionHandleLeft).bind("touchmove",u),$(L.selectionHandleLeft).bind("touchend",l),$(L.selectionHandleRight).bind("touchstart",c),$(L.selectionHandleRight).bind("touchmove",u),
$(L.selectionHandleRight).bind("touchend",l),$(L.touchEventSource).bind("touchstart",f),$(L.touchEventSource).bind("touchmove",n),$(L.touchEventSource).bind("touchend",h),$(L.touchEventSource).tapHold(x)))},resetTap:function(){N=!1}}}();
KindleSelectionHelper=function(q){return{getBookPositionAt:function(m,g,b){var e=q();b=b||Infinity;var d=-1,a;for(a in e)for(var c=e[a],f=0;f<c.length;f++){var h=c[f];var n=m<h.left?h.left-m:m<h.right?0:m-h.right;h=g<h.top?h.top-g:g<h.bottom?0:g-h.bottom;n=n*n+h*h;if(n<b&&(b=n,d=a,0>=n))break}return+d},getBounds:function(m){return q()[m]||null}}};
var KindleSelectionStateManagerFactory=function(){function q(){return g?{start:g.start,end:g.end,touchSelected:g.touchSelected}:null}var m=ListenerManager(),g=null,b=0;m.setEventProperties("selectionChanged",{vetoable:!0});return{SELECTION_CHANGED_EVENT:"selectionChanged",PROCESS_SELECTION_EVENT:"processSelection",addEventListener:m.addEventListener,setSelection:function(e){if(!b&&(!e||e.start&&e.end)){if(e&&(e.start=Number(e.start),e.end=Number(e.end),e.start>e.end)){var d=e.start;e.start=e.end;
e.end=d}null===e&&null===g||null!==e&&null!==g&&e.start===g.start&&e.end===g.end||(d=q(),m.callEventListeners("selectionChanged",{type:"selectionChanged",oldValue:d,newValue:e})&&(g=e))}},processSelection:function(){b||g&&m.callEventListeners("processSelection",{type:"processSelection",selection:q()})},getSelection:q,enable:function(){b--;KindleAssert(0<=b,"Mismatched selection disable/enable")},disable:function(){b++;g=null}}},KindleUserLocationConverter;
KindleUserLocationConverter=function(){function q(){return{locationFromPosition:function(b){return $.Deferred().resolve(Math.floor(2*b/300+1))},positionFromLocation:function(b){b*=100;100>b&&(b=100);return $.Deferred().resolve(Math.floor(3*(b-100)/2))},flavor:function(){return"mobi"}}}function m(){return{locationFromPosition:function(b){return $.Deferred().resolve(Math.floor((3*b+100)/100))},positionFromLocation:function(b){b*=100;100>b&&(ASSERT(0),b=100);return $.Deferred().resolve(Math.floor((b-
100)/3))},flavor:function(){return"topaz"}}}function g(b){function e(k){if(t[k])return t[k].deferred;var y;var w=u(k);w.done(d);v++;t[k]={deferred:w,cacheEntrySeq:v};if(v>r){k=v;for(y in t)if(t[y].cacheEntrySeq<k){var z=y;k=t[y].cacheEntrySeq}k!==v&&delete t[z]}return w}function d(k){var y=k.metadata.id;if(!x[y]||!x[y].firstPos){x[y]=x[y]||{};var w=k.metadata.id;try{if($.isArray(k.locations)){var z=k.locations[0];var A=k.locations[k.locations.length-1]}else z=k.locations[w*l+1],A=k.locations[Math.min((w+
1)*l+1-1,n)]}catch(C){z=Number.MAX_VALUE;A=-1;for(var B in k.locations)k.locations.hasOwnProperty(B)&&k.locations[B]&&(z=Math.min(k.locations[B],z),A=Math.max(k.locations[B],A))}k=z;x[y].lastPos||(x[y].lastPos=A);x[y].firstPos||(x[y].firstPos=k,0<y&&(x[y-1]=x[y-1]||{},x[y-1].lastPos=k-1))}}function a(k){var y=k.metadata.id;try{if($.isArray(k.locations)){var w=0;var z=k.locations.length-1;offset=y*l+1}else w=y*l+1,z=Math.min((y+1)*l+1-1,n),offset=0}catch(B){w=Number.MAX_VALUE;z=-1;for(var A in k.locations)k.locations.hasOwnProperty(A)&&
k.locations[A]&&(w=Math.min(A,w),z=Math.max(A,z))}return{firstIx:w,lastIx:z,offset:offset}}function c(k){function y(C,D){if(C===D)e(C).then(B.resolve,B.reject);else{var F=Math.floor((C+D)/2);F===C&&D===C+1&&(F=D);e(F).done(function(M){var N=x[M.metadata.id];N.firstPos>k?y(C,F-1):N.lastPos>=k?B.resolve(M):y(F,D)}).fail(B.reject)}}var w;var z=0;var A=Math.floor((n-1)/l);for(w=0;w<x.length;w++)if(x[w])if(x[w].firstPos){if(x[w].firstPos<=k&&x[w].lastPos>=k)return e(w);if(x[w].firstPos>k){A=w-1;break}else z=
w}else if(x[w].lastPos){if(x[w].lastPos===k)return e(w);if(x[w].lastPos>k){A=w;break}else z=w+1}var B=new jQuery.Deferred;y(z,A);return B.promise()}var f=b.minPosition,h=b.maxPosition,n=b.locationsInfo.numOfLocations,l=b.locationsInfo.mapSize,u=b.mapGetter,x=[],t={},v=1,r=Math.max(5,Math.floor(2E4/l));return{locationFromPosition:function(k){var y=new jQuery.Deferred;c(k).done(function(w){function z(B,C,D){var F=Math.floor((B+C)/2);D[F]===k?y.resolve(F+A.offset):D[F]>k?z(B,F-1,D):F===C||D[F+1]>k?y.resolve(F+
A.offset):z(F+1,C,D)}var A=a(w);z(A.firstIx,A.lastIx,w.locations)}).fail(function(){k<=f?y.resolve(1):k>=h?y.resolve(n-1+1):y.resolve(Math.floor((k-f)/(h-f)*(n-1)+1))});return y},positionFromLocation:function(k){var y=new jQuery.Deferred;e(Math.floor((k-1)/l)).done(function(w){try{if($.isArray(w.locations)){var z=(k-1)%l;var A=w.locations[z]}else A=w.locations[k]}catch(B){A=1}y.resolve(A)}).fail(function(){1>=k?y.resolve(f):k>=n-1+1?y.resolve(h):(p=(k-1)/n,y.resolve(Math.floor(p*(h-f)+f)))});return y.promise()}}}
return{MOBI_FLAVOR:"mobi",TOPAZ_FLAVOR:"topaz",mobiLocationConverter:q,topazLocationConverter:m,getLocationConverter:function(b,e){switch(b){case Kindle.BookInfo.BookType.TOPAZ:return m();case Kindle.BookInfo.BookType.MOBI8:return g(e);case Kindle.BookInfo.BookType.YJ:return KaramelUserLocationConverter.create();default:return q()}}}}();
var KaramelUserLocationConverter=function(){return{create:function(){function q(g,b){for(var e=0,d=g.length-1;e<d;){var a=Math.floor((d+e)/2);if(g[a]>b)d=a;else if(e!==a)e=a;else return g[a]<=b?d:e}return e}function m(g){return!$.isEmptyObject(g)&&$.isArray(g.locations)}KindleMetricsProfiler("KaramelUserLocationConverter");return{locationFromPosition:function(g){var b=$.Deferred();KindleRenderer.getLocationMap().pipe(function(e){m(e)?b.resolve(Math.max(1,q(e.locations,g))):b.resolve(void 0)});return b.promise()},
positionFromLocation:function(g){var b=$.Deferred();KindleRenderer.getLocationMap().pipe(function(e){m(e)?b.resolve(e.locations[g-1]):b.resolve(void 0)});return b.promise()}}}}}(),ReaderAnnotationsDisplay=function(){function q(e){KindleReaderAnnotationsPane.loadAnnotations(e,b,function(d){g.goToPosition(d.start);KindleReaderMetrics.reportGoToAnnotationUsage()},function(d){m.deleteAnnotations([d]).done(g.onAnnotationsUpdated)},function(d,a){d?m.modifyNote(a.start,a.position,d):m.deleteAnnotations([a]).done(g.onAnnotationsUpdated)})}
var m,g,b;return{initialize:function(e){g=e.readerControls;b=e.pageLabelConverter;m=e.annotationManager},show:function(e,d){KindleReaderMetrics.reportAnnotationsPaneOpened();d=m.getAllAnnotations();KindleReaderAnnotationsPane.open();q(d);KindleReaderAnnotationsPane.scrollToPosition(e)}}}(),ReaderSitbHighlight=function(){function q(){if(m){for(var e=0;e<m.length;e++){var d=m[e];g.removeSearchResult(d)}m=null}}var m=null,g=null,b;return{initialize:function(e){g=e},get:function(){return m},set:function(e){q();
m=e;b=!0},clear:q,render:function(){if(m&&b){for(var e=0;e<m.length;e++)pos=m[e],g.addSearchResult(pos);b=!1}}}}(),ReaderSitbManager=function(){function q(){b++;c=a=d=null;n||f.emit("SITB::ClosedBeforeIndexingComplete");n=!1}function m(l){function u(t,v){if(v===b)if(t>=x.length)KindleReaderSitbPane.setViewState(e.Complete,0<x.length?x.length-1:0);else{var r=x[t];r.isMarker?(KindleReaderSitbPane.addLocationMarker(r),u(t+1,v)):r.getContext("mark").then(function(k){v===b&&KindleReaderSitbPane.addItem({context:k.context,
location:k.location,position:r.positions[0],searchHighlights:r.positions,pageNumber:k.pageNumber})}).always(function(){u(t+1,v)})}}n=!0;h.emit("SITB::Search");var x=l&&l.results||[];l&&l.isCached&&h.emit("SITB::SearchCached");0>=x.length&&f.emit("SITB::NoResults");KindleReaderSitbPane.setViewState(e.Searching);(function(){var t=0,v={isMarker:!0,position:d,location:a,pageNumber:c};if(0!==x.length){for(;t<x.length;){var r=x[t].positions[0];if(d<=r){x.splice(t,0,v);return}t++}x.push(v)}})();u(0,++b)}
$.Deferred();var g=null,b=0,e,d,a,c,f,h,n=!1;return{initialize:function(l){e=KindleReaderSitbPane.States;f=l},searchContent:function(l){function u(){g.search(l.queryText).then(m,KindleReaderSitbPane.showErrorMessage)}function x(k){var y=SearchContextProviderFactory.create({pageLabelConverter:l.pageLabelConverter,locationConverter:l.locationConverter,searchParams:l});g=SitbHelperFactory(SearchTermStemmer,y).create(k);g===Kindle.SITB.LANGUAGE_NOT_SUPPORTED?(KindleReaderSitbPane.showErrorMessage(Kindle.ERROR.SITB_LANGUAGE_NOT_SUPPORTED),
f.emit("SITB::"+Kindle.ERROR.SITB_LANGUAGE_NOT_SUPPORTED)):g===Kindle.SITB.LANGUAGE_UNDEFINED?(KindleReaderSitbPane.showErrorMessage(Kindle.ERROR.SITB_LANGUAGE_UNDEFINED),f.emit("SITB::LanguageUnd")):(u(),f.emit("SITB::GetSearchContext"))}function t(k){"finished"===k&&r.emit("SITB::AwaitingIndex")}function v(k){k===Kindle.ERROR.SITB_OFFLINE?f.emit("SITB::NoIndexOffline"):k===Kindle.ERROR.SITB_COMMON_ERROR?f.emit("SITB::IndexFailure"):k===Kindle.ERROR.SITB_INDEX_NOT_AVAILABLE&&f.emit("SITB::IndexNotAvailable");
KindleReaderSitbPane.showErrorMessage(k)}h=f.createTimer();var r=f.createTimer();KindleReaderSitbPane.show(l.goToPosition).done(q);KindleReaderSitbPane.setViewState(e.Indexing);d=l.curPosition;a=l.curLocation;c=l.curPageNumber;g?(u(),f.emit("SITB::GetSearchContext")):l.bookInfo.getSearchIndex(l.asin).done(x).progress(t).fail(v)}}}();
function ReaderOptions(q){if(!this instanceof ReaderOptions)return new ReaderOptions(q);Object.defineProperty(this,"PORTRAIT",{value:"portrait"});Object.defineProperty(this,"LANDSCAPE",{value:"landscape"});Object.defineProperty(this,"AUTO",{value:"auto"});var m=!0,g=!0,b=!0,e=!0,d=this.AUTO,a=!0,c=!0,f=KindleDeviceCapabilities.multiColumnMode()?2:1,h=!0,n=!0,l=!1,u=KindleDeviceCapabilities.searchInTheBook(),x=!0;Object.defineProperty(this,"bookmarks",{get:function(){return m},set:function(v){m=!!v},
enumerable:!0});Object.defineProperty(this,"annotations",{get:function(){return g},set:function(v){g=!!v},enumerable:!0});Object.defineProperty(this,"selection",{get:function(){return b},set:function(v){b=!!v},enumerable:!0});Object.defineProperty(this,"trackLpr",{get:function(){return e},set:function(v){e=!!v},enumerable:!0});Object.defineProperty(this,"fontSize",{get:function(){return a},set:function(v){a=!!v},enumerable:!0});Object.defineProperty(this,"margins",{get:function(){return c},set:function(v){c=
!!v},enumerable:!0});Object.defineProperty(this,"colors",{get:function(){return h},set:function(v){h=!!v},enumerable:!0});Object.defineProperty(this,"orientation",{get:function(){return d},set:function(v){if(v===this.PORTRAIT||v===this.LANDSCAPE||v===this.AUTO)d=v},enumerable:!0});Object.defineProperty(this,"columns",{get:function(){return f},set:function(v){v=Math.round(v);0<v&&(f=v)},enumerable:!0});Object.defineProperty(this,"viewSettings",{get:function(){return n},set:function(v){n=!!v},enumerable:!0});
Object.defineProperty(this,"rtlPageAdvance",{get:function(){return l},set:function(v){l=!!v},enumerable:!0});Object.defineProperty(this,"searchable",{get:function(){return u},set:function(v){u=!!v},enumerable:!0});Object.defineProperty(this,"showTitle",{get:function(){return x},set:function(v){x=!!v},enumerable:!0});q=q||{};for(var t in q)q.hasOwnProperty(t)&&this.hasOwnProperty(t)&&(this[t]=q[t])}
var SearchContextProvider=function(){return{getContextProvider:function(q){function m(h){return f.gotoPosition(h,h+250)}function g(h){function n(v){var r,k=d?1:v.text.length;for(r=KindleStringUtilities.escapeForHTML(v.text);u<l.length&&l[u]<v.pos;)u++;return u<l.length&&l[u]>=v.pos&&l[u]<v.pos+k?x+r+t:r}var l=h.highlightPositions,u=0;h.context="";if(h.tagName){var x="<"+h.tagName;h.className&&(x+=' class="'+h.className+'"');x+=">";var t="</"+h.tagName+">"}else x=t="";d&&(h.firstPosition=Math.max(Math.min.apply(null,
h.highlightPositions)-a,0),h.lastPosition=Math.max.apply(null,h.highlightPositions)+a);return m(h.firstPosition).pipe(function(){function v(){do{var k=f.getItem();if(k.pos<=h.firstPosition){r.resolve();return}}while(f.previous());f.getLoadingDfd().then(function(y){y?v():r.resolve()},r.reject)}var r=$.Deferred();v();return r.promise()}).pipe(function(){function v(){do{var k=f.getItem();if(k.pos>h.lastPosition){r.resolve(h);return}h.context+=n(k)}while(f.next());f.getLoadingDfd().then(function(y){y?
v():r.resolve(h)},r.reject)}var r=$.Deferred();v();return r.promise()}).pipe(function(){return c(h.highlightPositions[0]).pipe(function(v){h.location=v.loc;h.pageNumber=v.pageNumber;return h})})}function b(h){function n(){0===h.length?u.resolve(l):g(h.shift()).then(function(x){l.push(x);n()},u.reject)}var l=[],u=$.Deferred();n();return u.promise()}var e=q.locationConverter,d=e.flavor&&e.flavor()===KindleUserLocationConverter.TOPAZ_FLAVOR,a=d?15:100,c=q.pageLabelConverter,f;return{getContext:function(h){f=
f||KindleRenderer.createWordIterator();return $.isArray(h)?b(h):g(h)}}}}}(),RemoteSearchContextProvider=function(){return{getContextProvider:function(q){function m(a){function c(h,n){h=$.extend(h,{positions:[n.highlightPositions]});return e.getSearchContext(h)}var f={};return function(h){var n=$.Deferred();d.then(function(l){c(l,h).then(function(u){var x=u.searchContexts[0];u=x.substring(0,24);var t=x.substring(24,48);x=x.substring(48,x.length);x=CryptoJS.lib.CipherParams.create({ciphertext:CryptoJS.enc.Base64.parse(x),
algorithm:CryptoJS.algo.AES,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.PKCS5});u=CryptoJS.AES.decrypt(x,CryptoJS.enc.Base64.parse(u),{iv:CryptoJS.enc.Base64.parse(t)}).toString(CryptoJS.enc.Utf8);f.context=u;n.resolve(f)})});return n.promise()}(a).pipe(function(){return b(a.highlightPositions[0]).pipe(function(h){f.location=h.loc;f.pageNumber=h.pageNumber;return f})})}function g(a){function c(){0===a.length?h.resolve(f):m(a.shift()).then(function(n){f.push(n);c()},h.reject)}var f=[],h=$.Deferred();
c();return h.promise()}var b=q.pageLabelConverter,e=KindleModuleManager.getModuleSync(KindleModuleManager.SERVICE_CLIENT),d=$.Deferred();$.when(q.searchParams.bookInfo.getBookInfoDfd(),KindleRenderer.getManifest()).done(function(a,c){d.resolve({asin:a.getAsin(),revision:a.getContext().contentVersion,yjACR:c.acr,refEmId:a.getRefEmId()})});return{getContext:function(a){return $.isArray(a)?g(a):m(a)}}}}}(),SearchContextProviderFactory=function(){return{create:function(q){return KindleRenderer.getRenderer()===
KindleRenderer.KARAMEL?RemoteSearchContextProvider.getContextProvider(q).getContext:SearchContextProvider.getContextProvider(q).getContext}}}(),SitbHelperFactory=function(q,m){function g(e){this.positions=e}function b(e){return e.every(function(d){return 0<d.length})}g.prototype.getContext=function(e,d){var a=Math.max(Math.min.apply(null,this.positions)-100,0),c=Math.max.apply(null,this.positions)+100;return m({firstPosition:a,lastPosition:c,highlightPositions:this.positions,tagName:e,className:d}).pipe(function(f){return{context:f.context,
location:f.location,pageNumber:f.pageNumber}})};return{create:function(e){function d(l){var u=[];l.split(/\s+/).forEach(function(x){Array.prototype.push.apply(u,h.stem(x))});return u}function a(l){return e.getPositionsForWord(l).pipe(function(u){return u.positions})}function c(l){var u={},x=[],t=[],v=!0;l.forEach(function(r,k){v=v&&f[r];t.push($.when(f[r]||a(r)).pipe(function(y){u[r]=y;x[k]=y.slice(0)}))});return $.when.apply($,t).pipe(function(){f=u;return{results:x,isCached:!!v}},function(){return Kindle.ERROR.SITB_COMMON_ERROR})}
var f={},h,n=e.getProperty("LanguageId");if("und"===n)return Kindle.SITB.LANGUAGE_UNDEFINED;n&&(n=n.split("-")[0].split("_")[0].toLowerCase());return(h=q.getStemmer(n))?{search:function(l){l=d(l);return 0>=l.length?$.Deferred().resolve([]):c(l).pipe(function(u){function x(D){return D[0]}function t(D,F,M){return 0===F||M[F-1]<D}function v(D){D.shift()}function r(D){D[0]===z&&D.shift()}for(var k=u&&u.results||[],y=20*k.length,w=[],z;b(k);){var A=k.map(x),B=A.every(t),C=Math.max.apply(null,A);z=Math.min.apply(null,
A);B&&C-z<=y?(k.forEach(v),w.push(new g(A))):k.forEach(r)}return{results:w,isCached:!(!u||!u.isCached)}})}}:Kindle.SITB.LANGUAGE_NOT_SUPPORTED}}},KindleCrypto=function(){return{decrypt:function(q,m,g){m=CryptoJS.enc.Base64.parse(m);g=CryptoJS.enc.Base64.parse(g);q=new Uint8Array(q);q=CryptoJS.lib.WordArray.create(q);q=CryptoJS.lib.CipherParams.create({ciphertext:q,algorithm:CryptoJS.algo.AES,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.PKCS5});g=CryptoJS.AES.decrypt(q,m,{iv:g});m=g.words;q=g.sigBytes;
for(var b=new Uint8Array(q),e=0;e<q;e++)g=m[e>>>2]>>>24-e%4*8&255,b[e]=g;return b}}}(),KindleZip=function(){""===zip.workerScriptsPath&&(zip.workerScriptsPath="./static/app/011302999/t_2020_09_11_00_52_07/QQZxVBxjJP9E/js/Worker/");zip.useWebWorkers=KindleHostDeviceDetector.areWebWorkersSupported()&&!KindleHostDeviceDetector.isiOS();ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(q,m){var g=new Uint8Array(this);q=void 0===q?0:q;m=void 0===m?g.length:m;m=new ArrayBuffer(m-q);for(var b=
new Uint8Array(m),e=0;e<b.length;e++)b[e]=g[e+q];return m});return{unzip:function(q){var m=$.Deferred(),g=[];q=new zip.ArrayBufferReader(q);zip.createReader(q,function(b){b.getEntries(function(e){function d(f){return function(h){a++;g.push({filename:e[f].filename,data:h});a===e.length&&b.close(function(){m.resolve(g)})}}for(var a=0,c=0;c<e.length;c++)e[c].getData(new zip.ArrayBufferWriter,d(c))})},function(b){KindleDebug.error("createReader failed when trying to unzip: "+b);m.reject(b)});return m.promise()}}}(),
KindleEventUtil=function(){return{preventKeyScroll:function(q){q=q.originalEvent&&q.originalEvent.detail?q.originalEvent.detail:q;var m=q.target&&"INPUT"!==q.target.tagName,g=-1<[32,33,34,35,36,37,38,39,40].indexOf(q.which);m&&g&&q.preventDefault()}}}(),SearchTermStemmer=function(){function q(e){return b[e]&&!!ResourceBundle.getLocalizedSearchStopWords(e)}function m(e){var d=b[e].name,a=ResourceBundle.getLocalizedSearchStopWords(e).map(function(f){return KindleStringUtilities.replaceAccentedChars(f,
e).replace(/[^A-Za-z0-9 .@'\-]/g,"")}),c=new Snowball(d);return{stem:function(f){var h=[],n=[];f=f.toLowerCase();0<f.length&&(f.split("@").forEach(function(l){h=h.concat(l.split("-"))}),h.forEach(function(l){if(!(1>l.length)){var u=KindleStringUtilities.replaceAccentedChars(l,e).replace(/[^A-Za-z0-9 .@'\-]/g,"");0<=a.indexOf(u)||(c.setCurrent(l),c.stem(),l=c.getCurrent(),u=KindleStringUtilities.replaceAccentedChars(l,e),n.push(u))}}));return n}}}var g,b={en:{getStemmer:function(){var e=ResourceBundle.getLocalizedSearchStopWords("en");
return{stem:function(d){var a=[],c=[];d=KindleStringUtilities.replaceAccentedChars(d).replace(/[^A-Za-z0-9 .@'\-]/g,"").toLowerCase();0<d.length&&(d=d.split("@"),d.forEach(function(f){c=c.concat(f.split("-"))}),c.forEach(function(f){var h=f.length;1<h&&-1!==f.indexOf("'s",h-2)&&(f=f.substring(0,h-2));f=f.replace(/'/g,"");f=f.replace(/\.(?!\d)/g,"");0<f.length&&-1===e.indexOf(f)&&(f=PorterStemmer.stemmer(f,!1),a.push(f))}));return a}}}},da:{name:"danish"},de:{name:"german"},es:{name:"spanish"},fi:{name:"finnish"},
fr:{name:"french"},hu:{name:"hungarian"},it:{name:"italian"},nl:{name:"dutch"},no:{name:"norwegian"},pt:{name:"portuguese"},ro:{name:"romanian"},sv:{name:"swedish"},tr:{name:"turkish"}};return{getStemmer:function(e){var d=null;e=e||"UNKNOWN";if(q(e))if(b[e].getStemmer)d=b[e].getStemmer();else try{d=m(e)}catch(a){}g||(g=KindleModuleManager.getModuleSync([KindleModuleManager.METRICS_MANAGER]));d?(g.emit("SITB::Language::Supported"),g.emit("SITB::Language::"+e.toUpperCase())):(g.emit("SITB::Language::Unsupported"),
g.emit("SITB::Language::Unsupported::"+e.toUpperCase()));return d},isLanguageSupported:q}}(),KindleErrorMap=function(){var q;return{getErrorText:function(m){if(!q){var g=KindleModuleManager.getModuleSync(KindleModuleManager.LINK_URLS);q={};q[Kindle.ERROR.OUT_OF_SPACE]={title:"k_L_saveBookOutOfSpace_Title",text:"k_L_saveBookOutOfSpace_Text",textParams:{linkStart:"<a href='"+g.getIncreaseOfflineStorageUrl()+"' target='_blank'>",linkEnd:"</a>"}};q[Kindle.ERROR.TIMEOUT]={title:"k_L_openBookTimeoutError_Title",
text:"k_L_openBookTimeoutError_Text"};q[Kindle.ERROR.LOAD_FAILURE]={title:"k_L_openBookLoadFailure_Title",text:"k_L_openBookLoadFailure_Text"};q[Kindle.ERROR.REMOVE_FAILURE]={title:"k_L_removeBookError_Title",text:"k_L_removeBookError_Text"};q[Kindle.ERROR.REMOVE_NETWORK_FAILURE]={title:"k_L_removeBookNetworkError_Title",text:"k_L_removeBookNetworkError_Text"};q[Kindle.ERROR.CONTENT_LOANED]={title:"k_L_openBookContentLoanedError_Title",text:"k_L_openBookContentLoanedError_Text"};q[Kindle.ERROR.CONTENT_LOAN_ENDED]=
{title:"k_L_openBookContentLoanEndedError_Title",text:"k_L_openBookContentLoanEndedError_Text"};q[Kindle.ERROR.CONTENT_LICENSE_EXCEEDED]={title:"k_L_openBookContentLicenseExceededError_Title",text:"k_L_openBookContentLicenseExceededError_Text"};q[Kindle.ERROR.CONTENT_UNSUPPORTED]={title:"k_L_openBookContentUnsupportedError_Title",text:"k_L_openBookContentUnsupportedError_Text"};q[Kindle.ERROR.CONTENT_UNSUPPORTED_METRO]={title:"k_L_openBookContentUnsupportedErrorMetro_Title",text:"k_L_openBookContentUnsupportedErrorMetro_Text"};
q[Kindle.ERROR.CONTENT_RENTAL_EXPIRED]={title:"k_L_openBookContentRentalExpiredError_Title",text:"k_L_openBookContentRentalExpiredError_Text"};q[Kindle.ERROR.CONTENT_RENTAL_EXPIRED_METRO]={title:"k_L_openBookContentRentalExpiredErrorMetro_Title",text:"k_L_openBookContentRentalExpiredErrorMetro_Text",textParams:{link:"<a href='http://kindle.amazon.com/' target='_blank'>http://kindle.amazon.com/</a>"}};q[Kindle.ERROR.OPEN_BOOK_ASIN_NOT_SPECIFIED]={title:"k_L_openBookAsinNotSpecified_Title",text:"k_L_openBookAsinNotSpecified_Text"};
q[Kindle.ERROR.GEOLOCATION_NOT_ALLOWED]={title:"k_L_openBookGeoLocationNotAllowed_Title",text:"k_L_openBookGeoLocationNotAllowed_Text"};q[Kindle.ERROR.FREE_TRIAL_EXPIRED]={title:"k_endOfFreeTrial_Title",text:"k_endOfFreeTrial_Text"};q[Kindle.ERROR.CONTENT_UPGRADE]={title:"k_L_openBookContentUpgrade_Title",text:"k_L_openBookContentUpgrade_Text"};q[Kindle.ERROR.SESSION_LIMIT_EXCEEDED]={title:"k_L_openBookSessionLimitExceededError_Title",text:"k_L_openBookSessionLimitExceededError_Text"};q[Kindle.ERROR.BOOK_NOT_AVAILABLE]=
{title:"k_L_bookNotAvailable_Title",text:"k_L_bookNotAvailable_Text"};q[Kindle.ERROR.REVOKE_FAILED]={title:"k_L_revokeFailed_Title",text:"k_L_revokeFailed_Text"};q[Kindle.ERROR.STORE_NOT_AVAILABLE]={title:"k_L_storeNotAvailable_Title",text:"k_L_storeNotAvailable_Text"};q[Kindle.ERROR.STORE_OPEN_FAILED]={title:"k_store_open_failed_Error_Title",text:"k_store_open_failed_Error_Text"};q[Kindle.ERROR.STORE_OPEN_OFFLINE_FAILED]={title:"k_store_open_failed_offline_Error_Title",text:"k_store_open_failed_offline_Error_Text"};
q[Kindle.ERROR.SYNC_FAILED]={title:"k_L_syncFailedError_Title",text:"k_L_syncFailedError_Text"};q[Kindle.ERROR.SYNC_FAILED_OFFLINE]={title:"k_L_syncFailedOfflineError_Title",text:"k_L_syncFailedOfflineError_Text"};q[Kindle.ERROR.NOT_IMPLEMENTED]={title:"k_lib_unimplementedFeature_Error_Title",text:"k_lib_unimplementedFeature_Error_Text"};q[Kindle.ERROR.LIBRARY_LOAD_FAILED]={title:"k_L_loadFailedError_Title",text:"k_L_loadFailedError_Text"};q[Kindle.ERROR.NETWORK]={title:"k_L_openBookNetworkError_Title",
text:"k_L_openBookNetworkError_Text"};q[Kindle.ERROR.UNKNOWN_ERR]={title:"k_L_unknownError_Title",text:"k_L_unknownError_Text"};q[Kindle.ERROR.OUTDATED_CHROME]={title:"k_L_outdatedChrome_Title",text:"k_L_outdatedChrome_Text",textParams:{linkStart:"<a href='https://www.google.com/chrome/' target='_blank' rel='noopener noreferrer'>",linkEnd:"</a>"}};q[Kindle.ERROR.SITB_OFFLINE]={title:"k_R_sitb_error_offline_title",text:"k_R_sitb_error_offline_message"};q[Kindle.ERROR.SITB_LANGUAGE_NOT_SUPPORTED]={title:"k_R_sitb_error_language_not_supported_title",
text:"k_R_sitb_error_language_not_supported_message"};q[Kindle.ERROR.SITB_INDEX_NOT_AVAILABLE]={title:"k_R_sitb_error_index_not_available_title",text:"k_R_sitb_error_index_not_available_message"};q[Kindle.ERROR.SITB_COMMON_ERROR]={title:"k_R_sitb_error_common_title",text:"k_R_sitb_error_common_message"};q[Kindle.ERROR.SITB_LANGUAGE_UNDEFINED]={title:"k_R_sitb_error_language_undefined_title",text:"k_R_sitb_error_language_undefined_message"}}(m=q[m])||(m=q[Kindle.ERROR.UNKNOWN_ERR]);return{title:ResourceBundle.getLocalizedString(m.title,
m.titleParams),text:ResourceBundle.getLocalizedString(m.text,m.textParams)}}}}(),KindleIOSScrollStopper={stopScroll:function(q){q.preventDefault()}},KindleListUtilities=function(){return{binarySearch:function(q,m,g){if(!q.length)return 0;for(var b=q.length-1,e=0,d=0,a,c=0;e<=b;)if(d=Math.floor((e+b)/2),a=q[d],c=0,void 0===g?a>m?c=1:a<m&&(c=-1):c=g(m,a),0<c)b=d-1;else if(0>c)e=d+1;else return d;return 0===d||0>c?d:d-1},first:function(q){return q[0]},last:function(q){return q[q.length-1]}}}(),KindleOffline=
function(){return{isEnabled:function(){return isEnabled()},removeBook:function(q,m,g){function b(h){a.endMetrics(c);g(h)}function e(){a.endMetrics(c);m()}function d(h){h.cacheState!==Kindle.BookInfo.CachedState.PINNED||h.context.isSample?h=!0:KindleHostDeviceDetector.isOnline()?(h={asin:q.asin,kindleSessionId:h.context.kindleSessionId,isOffline:!1},h=KindleModuleManager.getModuleSync(KindleModuleManager.SERVICE_CLIENT).setOfflineStatus(h)):h=(new $.Deferred).reject(Kindle.ERROR.NETWORK).promise();
return h}var a=KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER);var c=a.startMetrics("Unpin");var f=KindleModuleManager.getModuleSync(KindleModuleManager.DB_CLIENT).getBookDb();f.getRecord("bookinfo",{asin:q.asin},{cacheState:!0,context:!0}).then(function(h){h&&0<h.length?$.when(d(h[0])).fail(b).done(function(){f.deleteBooksData([q.asin]).then(e,b)}):e()},b)}}}(),KindleKatakana=function(){function q(e){var d=e.substring(0,1);return g[d]?d+g[d].v:e}var m={"\u3042":"\u30a2","\u3044":"\u30a4",
"\u3046":"\u30a6","\u3048":"\u30a8","\u304a":"\u30aa","\u304b":"\u30ab","\u304d":"\u30ad","\u304f":"\u30af","\u3051":"\u30b1","\u3053":"\u30b3","\u3055":"\u30b5","\u3057":"\u30b7","\u3059":"\u30b9","\u305b":"\u30bb","\u305d":"\u30bd","\u305f":"\u30bf","\u3061":"\u30c1","\u3064":"\u30c4","\u3066":"\u30c6","\u3068":"\u30c8","\u306a":"\u30ca","\u306b":"\u30cb","\u306c":"\u30cc","\u306d":"\u30cd","\u306e":"\u30ce","\u306f":"\u30cf","\u3072":"\u30d2","\u3075":"\u30d5","\u3078":"\u30d8","\u307b":"\u30db",
"\u307e":"\u30de","\u307f":"\u30df","\u3080":"\u30e0","\u3081":"\u30e1","\u3082":"\u30e2","\u3084":"\u30e4","\u3086":"\u30e6","\u3088":"\u30e8","\u3089":"\u30e9","\u308a":"\u30ea","\u308b":"\u30eb","\u308c":"\u30ec","\u308d":"\u30ed","\u308f":"\u30ef","\u3092":"\u30f2","\u3093":"\u30f3","\u304c":"\u30ac","\u304e":"\u30ae","\u3050":"\u30b0","\u3052":"\u30b2","\u3054":"\u30b4","\u3056":"\u30b6","\u3058":"\u30b8","\u305a":"\u30ba","\u305c":"\u30bc","\u305e":"\u30be","\u3060":"\u30c0","\u3062":"\u30c2",
"\u3065":"\u30c5","\u3067":"\u30c7","\u3069":"\u30c9","\u3070":"\u30d0","\u3073":"\u30d3","\u3076":"\u30d6","\u3079":"\u30d9","\u307c":"\u30dc","\u3071":"\u30d1","\u3074":"\u30d4","\u3077":"\u30d7","\u307a":"\u30da","\u307d":"\u30dd","\u3094":"\u30f4","\u3041":"\u30a1","\u3043":"\u30a3","\u3045":"\u30a5","\u3047":"\u30a7","\u3049":"\u30a9","\u3063":"\u30c3","\u3083":"\u30e3","\u3085":"\u30e5","\u3087":"\u30e7","\u308e":"\u30ee"},g={"\u30a2":{v:"\u30a2"},"\u30a4":{v:"\u30a4"},"\u30a6":{v:"\u30a6"},
"\u30a8":{v:"\u30a8"},"\u30aa":{v:"\u30aa"},"\u30ab":{v:"\u30a2"},"\u30ad":{v:"\u30a4"},"\u30af":{v:"\u30a6"},"\u30b1":{v:"\u30a8"},"\u30b3":{v:"\u30aa"},"\u30b5":{v:"\u30a2"},"\u30b7":{v:"\u30a4"},"\u30b9":{v:"\u30a6"},"\u30bb":{v:"\u30a8"},"\u30bd":{v:"\u30aa"},"\u30bf":{v:"\u30a2"},"\u30c1":{v:"\u30a4"},"\u30c4":{v:"\u30a6"},"\u30c6":{v:"\u30a8"},"\u30c8":{v:"\u30aa"},"\u30ca":{v:"\u30a2"},"\u30cb":{v:"\u30a4"},"\u30cc":{v:"\u30a6"},"\u30cd":{v:"\u30a8"},"\u30ce":{v:"\u30aa"},"\u30cf":{v:"\u30a2"},
"\u30d2":{v:"\u30a4"},"\u30d5":{v:"\u30a6"},"\u30d8":{v:"\u30a8"},"\u30db":{v:"\u30aa"},"\u30de":{v:"\u30a2"},"\u30df":{v:"\u30a4"},"\u30e0":{v:"\u30a6"},"\u30e1":{v:"\u30a8"},"\u30e2":{v:"\u30aa"},"\u30e4":{v:"\u30a2"},"\u30e6":{v:"\u30a6"},"\u30e8":{v:"\u30aa"},"\u30e9":{v:"\u30a2"},"\u30ea":{v:"\u30a4"},"\u30eb":{v:"\u30a6"},"\u30ec":{v:"\u30a8"},"\u30ed":{v:"\u30aa"},"\u30ef":{v:"\u30a2"},"\u30f0":{v:"\u30a4"},"\u30f1":{v:"\u30a8"},"\u30f2":{v:"\u30aa"},"\u30f3":{v:"\u30a2"},"\u30ac":{v:"\u30a2",
nq:"\u30ab"},"\u30ae":{v:"\u30a4",nq:"\u30ad"},"\u30b0":{v:"\u30a6",nq:"\u30af"},"\u30b2":{v:"\u30a8",nq:"\u30b1"},"\u30b4":{v:"\u30aa",nq:"\u30b3"},"\u30b6":{v:"\u30a2",nq:"\u30b5"},"\u30b8":{v:"\u30a4",nq:"\u30b7"},"\u30ba":{v:"\u30a6",nq:"\u30b9"},"\u30bc":{v:"\u30a8",nq:"\u30bb"},"\u30be":{v:"\u30aa",nq:"\u30bd"},"\u30c0":{v:"\u30a2",nq:"\u30bf"},"\u30c2":{v:"\u30a4",nq:"\u30c1"},"\u30c5":{v:"\u30a6",nq:"\u30c4"},"\u30c7":{v:"\u30a8",nq:"\u30c6"},"\u30c9":{v:"\u30aa",nq:"\u30c8"},"\u30d0":{v:"\u30a2",
nq:"\u30cf"},"\u30d3":{v:"\u30a4",nq:"\u30d2"},"\u30d6":{v:"\u30a6",nq:"\u30d5"},"\u30d9":{v:"\u30a8",nq:"\u30d8"},"\u30dc":{v:"\u30aa",nq:"\u30db"},"\u30d1":{v:"\u30a2",nq:"\u30cf"},"\u30d4":{v:"\u30a4",nq:"\u30d2"},"\u30d7":{v:"\u30a6",nq:"\u30d5"},"\u30da":{v:"\u30a8",nq:"\u30d8"},"\u30dd":{v:"\u30aa",nq:"\u30db"},"\u30f4":{v:"\u30af",nq:"\u30a6"},"\u30f7":{v:"\u30a2",nq:"\u30ef"},"\u30f8":{v:"\u30a4",nq:"\u30f0"},"\u30f9":{v:"\u30a8",nq:"\u30f1"},"\u30fa":{v:"\u30aa",nq:"\u30f2"},"\u30a1":{v:"\u30a2"},
"\u30a3":{v:"\u30a4"},"\u30a5":{v:"\u30a6"},"\u30a7":{v:"\u30a8"},"\u30a9":{v:"\u30aa"},"\u30c3":{v:"\u30a6"},"\u30e3":{v:"\u30a2"},"\u30e5":{v:"\u30a6"},"\u30e7":{v:"\u30aa"},"\u30ee":{v:"\u30a2"}},b=/.\u30fc/g;return{normalizeKatakana:function(e){e=e.replace(/[\u3040-\u30ff]/g,function(d){d=m[d]||d;return d=g[d]&&g[d].nq||d});return e=e.replace(b,q)},hasHiraganaKatakana:function(e){return 0<=e.search(/[\u3040-\u30ff]/)}}}(),KindleImageUtil=function(){return{getDataUriFromImage:function(q,m){var g=
$.Deferred(),b=new Image;b.crossOrigin="Anonymous";b.onload=function(){var e=document.createElement("CANVAS");e.height=this.height;e.width=this.width;ctx=e.getContext("2d");ctx.drawImage(this,0,0);e=e.toDataURL(m);g.resolve(e)};b.onerror=g.reject;b.src=q;return g.promise()}}}(),KindleStringUtilities=function(){var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},m=new RegExp("["+Object.keys(q).join("")+"]","g"),g={"\u2019":"'","\uff07":"'","'":"'","\u00e0":"a","\u00e1":"a",
"\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c0":"a","\u00c1":"a","\u00c2":"a","\u00c3":"a","\u00c4":"a","\u00c5":"a","\u0100":"a","\u0101":"a","\u0102":"a","\u0103":"a","\u0104":"a","\u0105":"a","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00c8":"e","\u00c9":"e","\u00ca":"e","\u00cb":"e","\u0112":"e","\u0113":"e","\u0114":"e","\u0115":"e","\u0116":"e","\u0117":"e","\u0118":"e","\u0119":"e","\u011a":"e","\u011b":"e","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00cc":"i",
"\u00cd":"i","\u00ce":"i","\u00cf":"i","\u0128":"i","\u0129":"i","\u012a":"i","\u012b":"i","\u012c":"i","\u012d":"i","\u012e":"i","\u012f":"i","\u0130":"i","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00d2":"o","\u00d3":"o","\u00d4":"o","\u00d5":"o","\u00d6":"o","\u014c":"o","\u014d":"o","\u014e":"o","\u014f":"o","\u0150":"o","\u0151":"o","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00d9":"u","\u00da":"u","\u00db":"u","\u00dc":"u","\u0168":"u","\u0169":"u","\u016a":"u",
"\u016b":"u","\u016c":"u","\u016d":"u","\u016e":"u","\u016f":"u","\u0170":"u","\u0171":"u","\u0172":"u","\u0173":"u","\u00fd":"y","\u00ff":"y","\u00dd":"y","\u0176":"y","\u0177":"y","\u0178":"y","\u00e7":"c","\u00c7":"c","\u0106":"c","\u0107":"c","\u0108":"c","\u0109":"c","\u010a":"c","\u010b":"c","\u010c":"c","\u010d":"c","\u00d0":"d","\u010e":"d","\u010f":"d","\u00f0":"d","\u011c":"g","\u011d":"g","\u011e":"g","\u011f":"g","\u0120":"g","\u0121":"g","\u0122":"g","\u0123":"g","\u0124":"h","\u0125":"h",
"\u0134":"j","\u0135":"j","\u0136":"k","\u0137":"k","\u0139":"l","\u013a":"l","\u013b":"l","\u013c":"l","\u013d":"l","\u013e":"l","\u00f1":"n","\u00d1":"n","\u0143":"n","\u0144":"n","\u0145":"n","\u0146":"n","\u0147":"n","\u0148":"n","\u0154":"r","\u0155":"r","\u0156":"r","\u0157":"r","\u0158":"r","\u0159":"r","\u015a":"s","\u015b":"s","\u015c":"s","\u015d":"s","\u015e":"s","\u015f":"s","\u0160":"s","\u0161":"s","\u0162":"t","\u0163":"t","\u0164":"t","\u0165":"t","\u0174":"w","\u0175":"w","\u0179":"z",
"\u017a":"z","\u017b":"z","\u017c":"z","\u017d":"z","\u017e":"z","\u00df":"s","\u00e6":"a","\u00c6":"a","\u00de":"t","\u00fe":"t","\u00d8":"o","\u00f8":"o"},b={'"':"","'":"","\u00b4":"","\u2018":"","\u2019":"","\u201c":"","\u201d":""},e={fr:{},de:{"\u00df":"ss"},it:{},es:{"\u00d1":"OAAAAA","\u00f1":"oaaaaa"},en:g};return{replaceAccentedChars:function(d,a,c){var f=e[a]||[];d=d.replace(/[^A-Za-z0-9 ]/g,function(h){return f[h]||g[h]||h});KindleKatakana.hasHiraganaKatakana(d)&&(d=KindleKatakana.normalizeKatakana(d));
return d},removeQuotes:function(d){return d.replace(/[^A-Za-z0-9 ]/g,function(a){var c=b[a];return""===c?c:a})},escapeForHTML:function(d){return d.replace(m,function(a){return q[a]})},substitute:function(d,a){return d.replace(/\{\{([A-Za-z0-9_]+)\}\}/g,function(c,f){return f in a?a[f]:c})}}}(),KindleTouchEventsToggler=function(){function q(c){if(a)for(var f=$(":hasTouchEvent"),h=0;h<f.length;h++){var n=f[h];if((!c||!c(n))&&n._listeners)for(var l=n._listeners.slice(0),u=0;u<l.length;u++){var x=l[u][0];
if("touchstart"===x||"touchmove"===x||"touchend"===x)x={element:n,type:x,func:l[u][1],useCapture:l[u][2]},d.push(x),n.removeEventListener(x.type,x.func,x.useCapture)}}}function m(){if(a){for(var c=0;c<d.length;c++){var f=d[c];f.element.addEventListener(f.type,f.func,f.useCapture)}d=[]}}var g=null,b=null,e=!1,d=[],a=!1;return{initialize:function(){e||(g=HTMLElement.prototype.addEventListener,HTMLElement.prototype.addEventListener=function(){this._listeners||(this._listeners=[]);this._listeners.push(arguments);
g.apply(this,arguments)},b=HTMLElement.prototype.removeEventListener,HTMLElement.prototype.removeEventListener=function(){if(this._listeners)for(var c=0;c<this._listeners.length;++c){var f;if(f=this._listeners[c][0]===arguments[0])a:{var h=this._listeners[c][1],n=arguments[1];try{if("function"===typeof h&&"function"===typeof n){f=h===n;break a}f=h.handleEvent===n.handleEvent;break a}catch(l){}f=!1}if(f){this._listeners.splice(c,1);break}}b.apply(this,arguments)},a=e=!0,$.expr[":"].hasTouchEvent=function(c,
f,h){if(c._listeners)for(f=0;f<c._listeners.length;f++)if(h=c._listeners[f][0],"touchstart"===h||"touchmove"===h||"touchend"===h)return!0;return!1},$.expr[":"].hasListeners=function(c,f,h){return void 0!==c._listeners})},deInitialize:function(){if(e){var c=0;$(":hasListeners").each(function(f,h){f=h._listeners.slice(0);for(var n=0;n<f.length;n++)h.removeEventListener(f[n][0],f[n][1]),c++});HTMLElement.prototype.addEventListener=g;HTMLElement.prototype.removeEventListener=b;d=[];e=!1}},on:m,off:q,
disallowTouchEvents:function(){a=!0;q();a=!1},allowTouchEvents:function(){a=!0;m()},isRequired:function(){return KindleHostDeviceDetector.isiOS()&&!KindleHostDeviceDetector.isiOS_7x()&&!KindleHostDeviceDetector.isiOS_8x()}}}();
(function(q){var m="tap tapHold swipeLeft swipeRight activate pinch zoom doubletap".split(" ");q.each(m,function(g,b){q.fn[b]=function(e,d){d=d||{};return"tap"===b?KindleHostDeviceDetector.isTouchDevice()?e?gt(this).on(b,e,q.extend(d,{expire:700,moveThreshold:10})):this.trigger(b):e?this.click(e):this.trigger("click"):e?gt(this).on(b,e,d):this.trigger(b)};q.attrFn[b]=!0});q.each(m,function(g,b){g="unbind"+b.slice(0,1).toUpperCase()+b.slice(1);q.fn[g]=function(e){return"tap"!==b||KindleHostDeviceDetector.isTouchDevice()?
gt(this).off(b,e):e?this.unbind("click",e):this.unbind("click")};q.attrFn[g]=!0})})(jQuery);
var KindleUXComponentManager=function(){function q(l){if(l.callbacks.onDialogOpen)l.callbacks.onDialogOpen(l.component);l.callbacks.onOverlayClicked&&$(".ui-widget-overlay").tap(l.callbacks.onOverlayClicked).bind("contextmenu",function(u){l.callbacks.onOverlayClicked();u.preventDefault()})}function m(l,u,x){a(l,function(t){t=$(Handlebars.templates[l](x));h[l]={component:t};u(t)})}function g(l){l.stopPropagation()}function b(l,u,x,t){var v=h[l];v.callbacks=x;if(x.onInitializationDone)x.onInitializationDone(u);
x.getDialogSettings&&(v.dialogSettings=x.getDialogSettings());void 0===v.dialogSettings.width&&(l=KindleHostDeviceDetector.isiPad()?475:400,v.dialogSettings.width=l);v.dialogSettings.modal&&u.keydown(g).keyup(g);KindleHostDeviceDetector.isiOS_5xOrGreater()?(l=v.dialogSettings,l.modal&&(l.modal=!1,l.k4w_modal=!0),u=u.dialog(l)):u=u.dialog(v.dialogSettings);v.component=u;if(!t&&!KindleHostDeviceDetector.isiOS_5xOrGreater()){var r=u.dialog("option","position");$(window).resize(function(){u.dialog("option",
"position",r)})}u.bind("dialogopen",function(k,y){q(v)});u.bind("dialogclose",function(k,y){if(v.callbacks.onDialogClose)v.callbacks.onDialogClose(v.component);v.dialogSettings.k4w_modal&&KindleDialogOverlay.removeOverlay()});u.bind("dialogbeforeclose",function(k,y){$(".ui-widget-overlay").unbindTap();v.dialogSettings.modal&&n&&n(!0);v.callbacks.beforeDialogClose&&v.callbacks.beforeDialogClose(v.component)});e(v)}function e(l){l.component.dialog("isOpen")||(l.dialogSettings.k4w_transparent_modal_overlay?
$("body").addClass("transparent_overlay"):$("body").removeClass("transparent_overlay"),l.callbacks.beforeDialogOpen&&l.callbacks.beforeDialogOpen(l.component),l.dialogSettings.modal&&n&&n(!1),l.dialogSettings.k4w_modal&&KindleDialogOverlay.showOverlay(l),l.component.dialog("open"))}function d(l){h[l]&&h[l].component.dialog("isOpen")&&h[l].component.dialog("close")}function a(l,u){c(l).then(function(x){f[l]||u()},function(){KindleDebug.error("Template "+l+" is missing")})}function c(l){var u=$.Deferred();
(l=Handlebars.templates[l])?u.resolve(l):u.reject();return u.promise()}function f(l){return!!Handlebars.templates[l]}var h=[],n;return{initializeTemplate:a,hasTemplate:f,renderTemplate:function(l,u){if(!Handlebars.templates[l])throw{name:"initializationError",message:"Please call KindleUXComponentManager.initializeTemplate function first"};return $(Handlebars.templates[l](u))},initializeComponent:m,openDialog:function(l,u,x){var t=h[l];t?e(t):null!==t&&(h[l]=null,m(l,function(v){b(l,v,u)},x))},closeDialog:d,
isVisible:function(l){return h[l]&&h[l].component.dialog("isOpen")?!0:!1},showMenu:function(l,u){var x;u||(x=h[l.componentName]);x?(l.buttonID||KindlePopupMenu.updatePosition(l.componentName,l.position),l.enabledFlags&&KindlePopupMenu.updateMenu(x.component,l.enabledFlags,l.componentName),e(x)):(l.doneCallback=function(t,v){l.enabledFlags&&KindlePopupMenu.updateMenu(t,l.enabledFlags,l.componentName);h[l.componentName]={component:t};b(l.componentName,t,v,!0)},KindlePopupMenu.initialize(l))},updateMenu:function(l,
u){var x=h[l];x&&KindlePopupMenu.updateMenu(x.component,u,l)},hideMenu:d,registerKeyEventsEnabledCallback:function(l){n=l}}}(),KindleWindowSizeWatcher=function(){function q(){d||(d=!0,h.emit("SmallWindowDialog::Shown::"+f))}function m(){c||(c=!0,h.emit("SmallWindowDialog::Ignored::"+f))}function g(){var n=$(window).width();0<n&&720>n?d||c||KindleSmallWindowDialog.open({onDialogIgnoreCB:m,onDialogOpenCB:q}):d&&(KindleSmallWindowDialog.close(),d=!1);a&&b(500)}function b(){null!==e&&(clearTimeout(e),
e=null);e=setTimeout(g,200)}var e=null,d=!1,a=!1,c=!1,f,h;return{setMetricsContext:function(n){h||(h=KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER));f=n},onWindowResized:b,startPolling:function(){a=!0;null!==e&&(clearTimeout(e),e=null);e=setTimeout(g,500)},stopPolling:function(){a=!1}}}(),KindleDialogOverlay=function(){return{showOverlay:function(q){$("body").append("<div class='ui-widget-overlay ui-widget-overlay-kcr-ios-hack'></div>");$(".ui-widget-overlay-kcr-ios-hack").attr("style",
"z-index: 1000;");(function(){var m=q.component.dialog("option","position");$("body",Kindle.top.document).bind("orientationchange.dialog",function(){q.dialogSettings.k4w_transparent_modal_overlay&&$(".ui-widget-overlay-kcr-ios-hack").css({width:0,height:0});q.component.dialog("option","position",m)})})();(function(){q.callbacks.onOverlayClicked&&$(".ui-widget-overlay-kcr-ios-hack").tap(function(m){m.preventDefault()})})()},removeOverlay:function(){$(".ui-widget-overlay-kcr-ios-hack").remove();$("body",
Kindle.top.document).unbind("orientationchange.dialog")}}}(),KindleMessageDialog=function(){var q,m,g,b,e,d=function(){KindleUXComponentManager.closeDialog("KindleMessageDialog")},a={getDialogSettings:function(){return{autoOpen:!1,modal:!0,draggable:!1,resizable:!1,k4w_transparent_modal_overlay:!0}},beforeDialogOpen:function(f){function h(x){return function(){d();"function"===typeof x.callback&&x.callback()}}var n={};if(e)for(var l=0;l<e.length;l++){var u=e[l];n[u.buttonText]=h(u)}else b=b?b:ResourceBundle.getLocalizedString("k_dialog_message_dismissButton_text"),
n[b]=d;f.dialog("option","buttons",n);f.find("#kindle_dialog_message_title_text").empty().append(g);f.find("#kindle_dialog_message_text").empty().append(m)},beforeDialogClose:function(f){},onDialogClose:function(f){q&&q()}},c=function(f,h,n,l,u){g=f;m=h;q=n;b=l;e=u;KindleUXComponentManager.openDialog("KindleMessageDialog",a)};return{open:c,close:d,showError:function(f,h,n,l){var u=f;f&&f.name&&(u=f.name);u=KindleErrorMap.getErrorText(u);f&&f.code&&(u.text+=" ["+f.code+"]");c(u.title,u.text,h,n,l)}}}(),
KindleNotificationDialog=function(){function q(t){$(window).unbind("touchstart.notification mousedown.notification");KindleHostDeviceDetector.isiOS_5xOrGreater()?$("body",top.document).unbind("orientationchange.notification"):$(window).unbind("resize.notification");t.removeClass(h.SHOWN);setTimeout(function(){t.remove()},3E3)}function m(t){function v(r){var k;if(k=c[r.optionProperty]){if("string"===typeof k)var y=k;else{y=k.id;var w=k.localizationParams;var z=k.htmlClass}if(k=ResourceBundle.getLocalizedString(y,
w))r=$(r.tag).addClass(r.htmlClass).html(k),z&&r.addClass(z),t.find("."+h.CONTAINER).append(r)}}t.find("."+h.CONTAINER).empty();v(h.PRETITLE);v(h.TITLE);v(h.BODY);v(h.LEGAL)}function g(t,v){var r=$("#kindleNotificationArrow"),k=$("#"+v.targetElementId),y=0,w=0;"right"===v.targetAlignment?(y=k.offset().left+k.outerWidth(),y-=t.outerWidth()):(y=k.offset().left+k.outerWidth()/2,y-=t.outerWidth()/2);(function(){var z=$("body").outerWidth();y+t.outerWidth()>z&&(y=z-t.outerWidth());0>y&&(y=0)})();(function(){var z=
v.targetBeakOffset||0;w=k.offset().left-y+k.outerWidth()/2+z})();t.css("left",y+"px");r.css("left",w+"px")}function b(t){function v(){g(t,c);KindleHostDeviceDetector.isiOS()&&t.show();y=null}function r(){y?clearTimeout(y):KindleHostDeviceDetector.isiOS()&&t.hide();y=setTimeout(v,100)}function k(w){u=!0;l&&x.increment();q(t)}var y;$(window).bind("touchstart.notification mousedown.notification",function(w){w.srcElement&&w.srcElement.id&&c.clickIdsToIgnore&&c.clickIdsToIgnore[w.srcElement.id]||setTimeout(k,
250)});KindleHostDeviceDetector.isiOS_5xOrGreater()?$("body",top.document).bind("orientationchange.notification",r):$(window).bind("resize.notification",r);setTimeout(k,2E4)}function e(t){b(t);$("body").append(t);g(t,c);setTimeout(function(){u||(t.addClass(h.SHOWN),setTimeout(function(){l=!0},1E3))},2E3)}function d(t){m(t);e(t)}function a(t){var v=$("<canvas id='kindleNotificationArrow' width='32' height='32'></canvas>"),r=v[0].getContext("2d");r.beginPath();r.moveTo(0,24);r.lineTo(0,25);r.lineTo(32,
25);r.lineTo(32,24);r.lineTo(16,0);r.closePath();r.fillStyle="#eee";r.fill();r.beginPath();r.moveTo(0,24);r.lineTo(16,0);r.lineTo(32,24);r.strokeStyle="rgba(32,32,32,0.8)";r.stroke();v.css("top","-24px");v.css("left","50%");v.css("margin-left","-16px");v.css("position","absolute");t.prepend(v);n.resolve(t)}var c={},f={},h={BODY:{htmlClass:"notificationBodyText",tag:"<div></div>",optionProperty:"bodyId"},LEGAL:{htmlClass:"notificationLegalText",tag:"<div></div>",optionProperty:"legalId"},TITLE:{htmlClass:"notificationTitleText",
tag:"<span></span>",optionProperty:"titleId"},PRETITLE:{htmlClass:"notificationPreTitleText",tag:"<span></span>",optionProperty:"preTitleId"},CONTAINER:"notificationContainer",SHOWN:"shown"},n=null,l=!1,u=!1,x;return{show:function(t){c=$.extend({},f,t);x=LocalStorageCounter("kcrNotifications."+c.notificationId);t=c.notificationCount|1;x.getValue()<t&&(n||(n=new jQuery.Deferred,KindleUXComponentManager.initializeComponent("KindleNotificationDialog",a)),n.done(d))},hide:function(){var t=$("#kindleNotification");
q(t)}}}(),KindlePopupMenu=function(){function q(l){var u=KindleUXComponentManager.renderTemplate("KindlePopupMenu"),x=u.find("#kindle_menu_border"),t=f[l].menuItems,v=!0,r="kindle_menu_button";if(f[l].isAppBarMenu){r+=" appbar_menu_button";var k=f[l].title;if(k){var y=document.createElement("div");k=document.createTextNode(k);y.appendChild(k);y.setAttribute("class","appbar_menu_title");x.append(y)}}for(var w in t){var z=$(document.createElement("div")).addClass(r).addClass("button_enabled").text(t[w].content).attr("id",
t[w].elementId);v&&(z.addClass("ui-corner-top"),v=!1);z.tap(m(z,t[w].clickHandler));KindleEventBroker.subscribe(t[w].elementId,t[w].clickHandler);x.append(z)}z.addClass("ui-corner-bottom");KindleHostDeviceDetector.isiOS()&&"onorientationchange"in window&&$("body",Kindle.top.document).bind("orientationchange",function(){KindleUXComponentManager.hideMenu(l)});f[l].doneCallback(u,c(l))}function m(l,u){return function(){l.hasClass("button_enabled")&&u()}}function g(l,u,x){var t=[];u?(u=$("#"+u),"down"===
x?(x=u.offset(),u=x.top+u.outerHeight()+10,t[0]=x.left,t[1]=u):(t[0]="right",t[1]="bottom")):t=x;l.dialog("option","position",t)}function b(){n&&(n.removeClass("selected"),n=null)}function e(l,u,x){l=l.find("#kindle_menu_border").children();var t=u;do{if("next"===x)t?(t=t.next(),0>=t.length&&(t=l.first())):t=l.first();else if("prev"===x)t?(t=t.prev(),0>=t.length&&(t=l.last())):t=l.last();else break;if(t===u)break}while(!t.hasClass("button_enabled"));return t}function d(l,u){g(l,f[u].buttonID,f[u].position);
$(".ui-dialog").on("keydown",function(x){var t=x.keyCode||x.which;KindleEventUtil.preventKeyScroll(x);switch(t){case 38:n&&n.removeClass("selected");n=e(l,n,"prev");n.addClass("selected");x.stopPropagation();break;case 40:n&&n.removeClass("selected");n=e(l,n,"next");n.addClass("selected");x.stopPropagation();break;case 13:n&&(x.stopPropagation(),n.removeClass("selected"),x=n.attr("id"),KindleEventBroker.fire(x),b());break;case 9:b();h&&KindleUXComponentManager.hideMenu(u);break;case 27:b(),KindleUXComponentManager.hideMenu(u),
x.preventDefault(),x.stopPropagation()}});l.find("#kindle_menu_border").children().each(function(x,t){$(t).on("mouseover",function(v){v=$(v.currentTarget);v.hasClass("button_enabled")&&(n?n!==v&&(n.removeClass("selected"),n=v,v.addClass("selected")):(n=v,n.addClass("selected")))})})}function a(l,u){$(".ui-dialog").off("keydown");l.find("#kindle_menu_border").children().each(function(x,t){$(t).off("mouseover")})}function c(l){return{getDialogSettings:function(){var u=f[l],x="kindle_menu";u.isAppBarMenu&&
(x+=" kindle_appbar_menu");u.buttonID&&(x+=" "+("down"===u.position?"down_menu":"up_menu"));return{autoOpen:!1,draggable:!1,resizable:!1,modal:!0,minHeight:0,width:"auto",dialogClass:x,k4w_transparent_modal_overlay:!0}},beforeDialogOpen:function(u){d(u,l)},beforeDialogClose:function(u){a(u,l)},onDialogOpen:function(){h=!0},onDialogClose:function(){h=!1},onOverlayClicked:function(){h&&KindleUXComponentManager.hideMenu(l);b()}}}var f={},h=!1,n=null;return{MENU_POSITION_CONSTANTS:{APPBAR_MENU_MARGIN_PX:5,
APPBAR_HEIGHT_PX:102,APPBAR_HEIGHT_SNAPVIEW_PX:70},ITEM_ENABLED:0,ITEM_DISABLED:1,ITEM_HIDDEN:2,initialize:function(l){f[l.componentName]={menuItems:l.menuItems,doneCallback:l.doneCallback,buttonID:l.buttonID,position:l.position,title:l.title,isAppBarMenu:l.isAppBarMenu};KindleUXComponentManager.hasTemplate("KindlePopupMenu")?q(l.componentName):KindleUXComponentManager.initializeTemplate("KindlePopupMenu",function(){q(l.componentName)})},updateMenu:function(l,u,x){for(var t,v,r=0;r<u.length;r++)2!==
u[r]&&(void 0===t&&(t=r),v=r);var k=f[x].isAppBarMenu;l.find(".kindle_menu_button").each(function(y){var w="kindle_menu_button";if(k||$(this).hasClass("appbar_menu_button"))w+=" appbar_menu_button";$(this).attr("class",w);switch(u[y]){case 0:$(this).addClass("button_enabled");break;case 1:$(this).addClass("button_disabled");break;case 2:$(this).addClass("button_hidden")}y===t&&$(this).addClass("ui-corner-top");y===v&&$(this).addClass("ui-corner-bottom")})},updatePosition:function(l,u){f[l].position=
u}}}(),KindlePromptDialog=function(){var q,m,g,b=function(){g="ok";KindleUXComponentManager.closeDialog("KindlePromptDialog")},e=function(){g="cancel";KindleUXComponentManager.closeDialog("KindlePromptDialog")},d={getDialogSettings:function(){var a={};a[ResourceBundle.getLocalizedString("k_common_cancel_button")]=e;a[ResourceBundle.getLocalizedString("k_common_confirm_button")]=b;return{autoOpen:!1,modal:!0,draggable:!1,resizable:!1,buttons:a,k4w_transparent_modal_overlay:!0}},beforeDialogOpen:function(a){var c=
ResourceBundle.getLocalizedString(m);a.find("#kindle_dialog_prompt_label").empty().append(c)},onDialogClose:function(a){q(g)}};return{open:function(a,c){q=c;g=!1;m=a;KindleUXComponentManager.openDialog("KindlePromptDialog",d)}}}(),KindleSigningOutDialog=function(){var q={getDialogSettings:function(){return{autoOpen:!1,modal:!0,draggable:!1,resizable:!1,width:"450px"}}};return{show:function(){KindleUXComponentManager.openDialog("KindleSigningOutDialog",q)},hide:function(){KindleUXComponentManager.closeDialog("KindleSigningOutDialog")}}}(),
KindleSmallWindowDialog=function(){function q(){KindleUXComponentManager.closeDialog("KindleSmallWindowDialog");g&&g()}var m,g,b,e,d={getDialogSettings:function(){return{autoOpen:!1,width:"auto",modal:!0,draggable:!1,resizable:!1,dialogClass:"smallWindowDialog"}},beforeDialogOpen:function(a){b=a;b.find("#small_window_title").html(e.title);b.find("#small_window_description").html(e.description);a=b.find("#kindle_dialog_smallWindow_button");a.html(ResourceBundle.getLocalizedString("k_dialog_smallWindow_button_ignore"));
a.one("click",q)},onDialogOpen:function(a){a=$("#kindle_dialog_smallWindow");a.parents(".ui-dialog:first").removeClass("ui-widget ui-widget-content ui-corner-all");a.removeClass("ui-dialog-content ui-widget-content");m&&m()}};return{open:function(a){e={title:ResourceBundle.getLocalizedString("k_dialog_smallWindow_title"),description:ResourceBundle.getLocalizedString("k_dialog_smallWindow_msg")};g=a&&a.onDialogIgnoreCB;m=a&&a.onDialogOpenCB;KindleUXComponentManager.openDialog("KindleSmallWindowDialog",
d)},close:function(){KindleUXComponentManager.closeDialog("KindleSmallWindowDialog")}}}(),KindleSpinner=function(){function q(){b||(b=new jQuery.Deferred,KindleUXComponentManager.initializeComponent("KindleSpinner",m));return b.promise()}function m(e){g=e;b.resolve()}var g,b;return{show:function(){var e=q();$.when(e).then(function(){$("body").append(g);var d=1<window.innerWidth?window.innerWidth:window.outerWidth,a=parseInt(g.css("width"),10),c=1<window.innerHeight?window.innerHeight:window.outerHeight,
f=parseInt(g.css("height"),10);g.css("top",(c-f)/2+"px").css("left",(d-a)/2+"px")})},hide:function(){var e=q();$.when(e).then(function(){$("#loading_spinner").detach()})}}}(),KindleUnoptimizedFormatDialog=function(){var q,m,g,b=function(){KindleUXComponentManager.closeDialog("KindleUnoptimizedFormatDialog")},e=function(){m=!0;KindleUXComponentManager.closeDialog("KindleUnoptimizedFormatDialog")},d={getDialogSettings:function(){var a={};a[ResourceBundle.getLocalizedString("k_R_dialog_unoptimizedFormat_close")]=
b;a[ResourceBundle.getLocalizedString("k_R_dialog_unoptimizedFormat_continue")]=e;return{autoOpen:!1,modal:!0,draggable:!1,resizable:!1,buttons:a,k4w_transparent_modal_overlay:!0}},beforeDialogOpen:function(a){var c=ResourceBundle.getLocalizedString("k_R_dialog_unoptimizedFormat_message",{linkStart:"<a href='http://itunes.apple.com/us/app/kindle/id302584613?mt=8'>",linkEnd:"</a>"});a.find("#kindleReader_dialog_unoptimizedFormat_message_id").empty().append(c);$(a[0].parentNode).find(".ui-button-text").first().text(g)},
onDialogClose:function(a){q(m)}};return{open:function(a){g=ResourceBundle.getLocalizedString("k_R_dialog_unoptimizedFormat_close");q=a;m=!1;KindleUXComponentManager.openDialog("KindleUnoptimizedFormatDialog",d)},openPinning:function(a){g=ResourceBundle.getLocalizedString("k_R_dialog_unoptimizedFormat_stopSave");q=a;m=!1;KindleUXComponentManager.openDialog("KindleUnoptimizedFormatDialog",d)}}}(),KindleReaderEmbeddedError=function(){var q={getDialogSettings:function(){return{autoOpen:!1,modal:!0,draggable:!1,
resizable:!1,dialogClass:"embedded_error",k4w_transparent_modal_overlay:!0}}};return{open:function(m){KindleUXComponentManager.openDialog("KindleReaderEmbeddedError",q);var g=$("#kindleReader_embeddedError_text");m=KindleErrorMap.getErrorText(m);g.text(m&&m.text||ResourceBundle.getLocalizedString("k_L_unknownError_Text"))}}}(),KindleAnnotationComponentFactory=function(){function q(y,w){return y.replace(".","_")+"_"+w}function m(y,w){y.find("."+t.CONTEXT).tap(function(z){w(y)})}function g(y,w){var z=
function(C){return function(D){(D=w[x[C]])&&D(y)}},A;for(A in u){var B=y.find("."+u[A]);w[x[A]]||B.remove();B.tap(z(A))}}function b(y,w){430<w.length?y.find("."+t.CONTEXT).text(w.substring(0,430)+" ..."):y.find("."+t.CONTEXT).text(w)}var e=0,d=e++,a=e++,c=e++,f=e++,h=e++,n=e++,l=e++,u={TRASH_CAN:"kindleReader_annotation_pane_notes_trashcan",EDIT:"kindleReader_annotation_pane_notes_edit",GOTO:"kindleReader_annotation_pane_notes_pageLabel",SAVE:"kindleReader_annotation_pane_notes_save",CANCEL:"kindleReader_annotation_pane_notes_cancel",
YES:"kindleReader_annotation_pane_notes_yes",NO:"kindleReader_annotation_pane_notes_no"},x={TRASH_CAN:a,EDIT:d,GOTO:c,SAVE:f,CANCEL:h,YES:n,NO:l},t={CONTEXT:"kindleReader_annotation_pane_notes_context"},v=function(){return KindleUserLocationConverter},r=function(){return KindleUXComponentManager},k=function(){return KindleReaderAnnotationManager};return{EVENT_EDIT_CLICKED:d,EVENT_DELETE_CLICKED:a,EVENT_GOTO_CLICKED:c,EVENT_SAVE_CLICKED:f,EVENT_CANCEL_CLICKED:h,EVENT_YES_CLICKED:n,EVENT_NO_CLICKED:l,
MAX_NOTE_CONTEXT_LENGTH:430,initialize:function(y){var w=v(),z=r();w.mobiLocationConverter();z.initializeTemplate("KindleAnnotationComponentFactory",y)},createAnnotationComponent:function(y,w,z,A){var B=new jQuery.Deferred,C=r(),D=k(),F,M={context:y.note||y.context,start:y.start,pageLabel:"",id:q(y.type,y.start),maxContextLength:430};w(y.start).pipe(function(N){var L="",P="",V="";N.pageNumber&&(L=ResourceBundle.getLocalizedString("k_R_annotation_pane_notes_page",{page:N.pageNumber}));N.loc&&(L&&(P=
" \u25cf "),V=ResourceBundle.getLocalizedString("k_R_annotation_pane_notes_location",{location:N.loc}));M.pageLabel=L+P+V;switch(y.type){case D.BOOKMARK:F=C.renderTemplate("KindleAnnotationComponentFactory",M);F.find(".kindleReader_annotation_pane_icon").addClass("kindleReader_annotation_pane_icon_bookmark");A[d]=null;A[f]=null;A[h]=null;A[n]=null;A[l]=null;break;case D.HIGHLIGHT:F=C.renderTemplate("KindleAnnotationComponentFactory",M);F.find(".kindleReader_annotation_pane_icon").addClass("kindleReader_annotation_pane_icon_highlight");
A[d]=null;A[f]=null;A[h]=null;A[n]=null;A[l]=null;break;case D.NOTE:F=C.renderTemplate("KindleAnnotationComponentFactory",$.extend({},M,{maxNoteChars:Kindle.opt.maxNoteChars})),F.find(".kindleReader_annotation_pane_icon").addClass("kindleReader_annotation_pane_icon_note"),KindleHostDeviceDetector.isIE11()&&F.find("#kindleReader_annotation_pane_edit_textArea").attr("spellcheck","false"),KindleTouchEventsToggler.isRequired()&&(F.find("#kindleReader_annotation_pane_edit_textArea").focus(function(){KindleTouchEventsToggler.off()}),
F.find("#kindleReader_annotation_pane_edit_textArea").blur(function(){KindleTouchEventsToggler.on()}))}M.context?(b(F,M.context),y.type===D.NOTE&&(N=F.find("."+t.CONTEXT)[0],N.innerHTML=N.innerHTML.replace(/\n/g,"<br />"))):F.find("."+t.CONTEXT).remove();m(F,z);g(F,A);B.resolve(F)});return B.promise()},setAnnotationContext:b,getAnnotationID:q,setUserLocationConverter:function(y){v=y},setUXComponentManager:function(y){r=y},setAnnotationManager:function(y){k=y}}}(),KindleImageViewer=function(q){function m(){b=
g.find(".imageViewerImage");$("<img/>").attr("src",b.attr("src")).load(function(){var d=this.width/this.height,a=q.parent.width()/q.parent.height();d>a?(b.css("height","auto"),b.css("width","100%")):(b.css("height","100%"),b.css("width","auto"));b.css("max-width",Math.min(this.width,$(window).width()));b.css("max-height",Math.min(this.height,$(window).height()))})}var g,b,e=new jQuery.Deferred;KindleUXComponentManager.initializeTemplate("KindleImageViewer",function(){var d=KindleUXComponentManager.renderTemplate("KindleImageViewer",
{imageSource:q.imageSource});g=$(d).hide();m();$("body",Kindle.top.document).bind("orientationchange",m);$(window).resize(m);$(b).bind("dragstart",function(){return!1});e.resolve({backdrop:g,image:b})});return e},KindleReaderAnnotationsPane=function(){function q(){C=B;B=Math.max(C-100,0);b();l("bottom")}function m(){B=C;C=Math.min(B+100,A.length);b();l(0)}function g(K){K.appendTo(n())}function b(){n().empty();V.remove();L.add(P).remove();for(var K=B;K<C;++K)d(A[K]).done(g);e();f()}function e(){var K=
n();0<B&&L.unbind("click.goPrev").bind("click.goPrev",q).add(P).prependTo(K);C<A.length&&V.unbind("click.goNext").bind("click.goNext",m).appendTo(K)}function d(K){function U(H){var X;jQuery.each(A,function(fa,za){za.start===K.start&&za.end===K.end&&za.type===K.type&&(X=fa)});H.remove();-1!==X&&(X<B||C<=X?A.splice(X,1):(A.splice(X,1),H=C-1,H<A.length&&0<A.length&&(V.remove(),L.add(P).remove(),d(A[H]).done(g),e())));0===A.length&&N.find("#"+y.EMPTY_MESSAGE).show();f()}n();var G=J(),Q={};Q[G.EVENT_DELETE_CLICKED]=
function(H){K.type===KindleReaderAnnotationManager.NOTE?(H.find("."+w.DELETE_ICON).hide(),H.find("."+w.EDIT_ICON).hide(),H.find("."+w.GOTO_LABEL).hide(),H.find("."+w.CANCEL_BTN).hide(),H.find("."+w.SAVE_BTN).hide(),H.find("."+w.CONFIRMATION).show(),H.find("."+w.YES_BTN).show(),H.find("."+w.NO_BTN).show()):(U(H),D(K))};Q[G.EVENT_EDIT_CLICKED]=function(H){H.find("."+w.CONTEXT).hide();H.find("."+w.EDIT_ICON).hide();H.find("."+w.GOTO_LABEL).hide();H.find("."+w.DELETE_ICON).hide();H.find("#"+y.EDIT_NOTE).show();
H.find("."+w.CANCEL_BTN).show();H.find("."+w.SAVE_BTN).show();S().isiOS()||H.find("#"+y.EDIT_NOTE).focus();c()};Q[G.EVENT_GOTO_CLICKED]=function(H){u();M(K)};Q[G.EVENT_SAVE_CLICKED]=function(H){var X=H.find("#"+y.EDIT_NOTE).val().trim();if(X){var fa=H.find("."+w.CONTEXT);fa.empty();KindleAnnotationComponentFactory.setAnnotationContext(H,X);fa=fa[0];fa.innerHTML=fa.innerHTML.replace(/\n/g,"<br />");v(H)}else U(H);F(X,K)};Q[G.EVENT_CANCEL_CLICKED]=function(H){H.find("#"+y.EDIT_NOTE).val(K.note);v(H)};
Q[G.EVENT_NO_CLICKED]=function(H){H.find("."+w.DELETE_ICON).show();H.find("."+w.EDIT_ICON).show();H.find("."+w.GOTO_LABEL).show();H.find("."+w.CONFIRMATION).hide();H.find("."+w.YES_BTN).hide();H.find("."+w.NO_BTN).hide()};Q[G.EVENT_YES_CLICKED]=function(H){U(H);D(K)};return G.createAnnotationComponent(K,_pageLabelConverter,function(H){if(T){var X=KindleAnnotationComponentFactory.getAnnotationID(T.type,T.start);X=n().find("#"+X);KindleAnnotationComponentFactory.setAnnotationContext(X,T.note||T.context)}T=
K;X=K.note||K.context;H.find("."+w.CONTEXT).text(X);H=H.find("."+w.CONTEXT)[0];H.innerHTML=H.innerHTML.replace(/\n/g,"<br />");c()},Q)}function a(K){K.stopPropagation()}function c(){if(R){var K=h();K.jScrollPane({showArrows:!0,verticalGutter:10});K.removeAttr("tabindex");$(".jspContainer").keypress(a).keyup(a).keydown(a)}else Z&&(I?I.refresh():I=new iScroll(y.SCROLL_WRAPPER,{vScrollbar:!1}))}function f(){var K=h(),U=N.height();S().isiOS()?N.find("#"+y.SCROLL_WRAPPER).height(U):K.height(U-6);$(K).animate({opacity:1},
100);c()}function h(){return N.find("#"+y.CONTAINER)}function n(){return R?h().data("jsp").getContentPane():h()}function l(K){if(Z)"bottom"===K&&(K=-9999),I.scrollTo(0,K);else if(R){var U=h().data("jsp");"bottom"===K?U.scrollToBottom():U.scrollToY(0)}else U=h(),"bottom"===K&&(K=U.height()),U.scrollTop(K)}function u(){r();KindleUXComponentManager.closeDialog("KindleReaderAnnotationsPane")}function x(K){T=null;N=K;var U;$(window).resize(function(){clearTimeout(U);U=setTimeout(f,50)});R?(h().jScrollPane({showArrows:!0,
verticalGutter:10}),$(".jspContainer").keypress(a).keyup(a).keydown(a)):Z||h().addClass("ie_scrollable");h().hover(function(){document.onmousewheel=function(){return!0}},function(){document.onmousewheel=function(){return!1}})}function t(K){var U=A.length;if(0===A.length)return-1;for(var G=0;G<U&&!(A[G].end>=K||A[G].start>=K);G++);return G}function v(K){K.find("."+w.CONTEXT).show();K.find("."+w.EDIT_ICON).show();K.find("."+w.GOTO_LABEL).show();K.find("."+w.DELETE_ICON).show();K.find("#"+y.EDIT_NOTE).hide();
K.find("."+w.CANCEL_BTN).hide();K.find("."+w.SAVE_BTN).hide();c()}function r(){A=T=null;C=B=0;n().empty();c()}function k(){var K=document.createElement("div");$(K).attr("class","notes_close_button");$(K).insertAfter("#"+y.HEADER);$(K).on("click",u)}var y={PANE:"kindleReader_annotations_pane",HEADER:"kindleReader_annotations_pane_header",CONTAINER:"kindleReader_annotations_pane_container",SCROLL_WRAPPER:"kindleReader_annotations_pane_scrollWrapper",EMPTY_MESSAGE:"kindleReader_annotations_pane_notes_empty",
EDIT_NOTE:"kindleReader_annotation_pane_edit_textArea"},w={SELECTED:"kindleReader_annotation_pane_notes_selected",CONTEXT:"kindleReader_annotation_pane_notes_context",EDIT_ICON:"kindleReader_annotation_pane_notes_edit",GOTO_LABEL:"kindleReader_annotation_pane_notes_pageLabel",CANCEL_BTN:"kindleReader_annotation_pane_notes_cancel",SAVE_BTN:"kindleReader_annotation_pane_notes_save",YES_BTN:"kindleReader_annotation_pane_notes_yes",NO_BTN:"kindleReader_annotation_pane_notes_no",CONFIRMATION:"kindleReader_annotation_notes_delete_confirm",
DELETE_ICON:"kindleReader_annotation_pane_notes_trashcan"},z=1/3,A=[],B,C,D,F,M,N,L,P,V,Z=KindleHostDeviceDetector.isiOS(),R=!Z&&!KindleHostDeviceDetector.isIE(),I,T,J=function(){return KindleAnnotationComponentFactory},S=function(){return KindleHostDeviceDetector},W={getDialogSettings:function(){var K={};K[ResourceBundle.getLocalizedString("k_common_close_button")]=u;K={autoOpen:!1,width:"40%",height:U,modal:!0,draggable:!1,resizable:!1,buttons:K};var U=S().isiOS()?$("body",Kindle.top.document).height()-
80:window.outerHeight-150;K.height=U;return K},onInitializationDone:x,onDialogOpen:function(K){S().isiOS()&&($("#kindleReader_annotations_pane").height($("body",Kindle.top.document).height()-212),$("#kindleReader_annotations_pane_scrollWrapper").height($("body",Kindle.top.document).height()-212))}};return{open:function(){J().initialize(function(K){KindleUXComponentManager.openDialog("KindleReaderAnnotationsPane",W)});$("#"+y.HEADER).html(ResourceBundle.getLocalizedString("k_R_dialog_annotation_pane_title_MANGA_LIBRARY_KCR_INTEGRATION_332550"));
k();$("#"+y.PANE).next().remove()},scrollToPosition:function(K){if(A&&(K=Math.min(t(K),A.length-1),$("#"+y.PANE).offset(),N.parent().height(),-1!==K)){B<=K&&K<C||(C=Math.min(Math.max(K-Math.floor(100*z),0)+100,A.length),B=Math.max(0,C-100),b());var U=A[K];K=0;U=KindleAnnotationComponentFactory.getAnnotationID(U.type,U.start);var G=N.find("#"+U);K=K||0;Z?I.scrollToElement("#"+U,K):R?h().data("jsp").scrollToElement(G,!0,!!K):h().scrollTop(G.offset().top)}},loadAnnotations:function(K,U,G,Q,H){0===K.length?
(r(),N.find("#"+y.EMPTY_MESSAGE).show()):(N.find("#"+y.EMPTY_MESSAGE).hide(),M=G,D=Q,F=H,n(),A=K.slice(),_pageLabelConverter=U,T=null,L=$("<div/>",{"class":"kindleReader_annotation_pane_notes_prev",text:ResourceBundle.getLocalizedString("k_R_annotation_pane_previous")}),P=$("<div/>",{"class":"kindleReader_annotation_pane_notes_divider_top"}),P=P.add($("<div/>",{"class":"kindleReader_annotation_pane_notes_divider_bottom"})),V=$("<div/>",{"class":"kindleReader_annotation_pane_notes_next",text:ResourceBundle.getLocalizedString("k_R_annotation_pane_next")}),
B=0,C=Math.min(100,A.length),b())},setUXComponentManager:function(K){},setAnnotationComponentFactory:function(K){J=K},setHostDeviceDetector:function(K){S=K},onInitializationDone:x}}(),KindleReaderBookmarkOverlay=function(){function q(d){g=d;m();b(d)}function m(){e?g.addClass("preBookmark").addClass("hasBookmark").fadeIn(250):g.removeClass("hasBookmark").removeClass("preBookmark")}var g,b,e;return{initialize:function(d){b=d;KindleUXComponentManager.initializeComponent("KindleReaderBookmarkOverlay",
q)},setIsBookmarked:function(d){e=d;g&&m()},setImmersiveMode:function(d){d?g.addClass("immersiveBookmark"):g.removeClass("immersiveBookmark")},setVisible:function(d){g.css("visibility",d?"visible":"hidden")}}}(),ReaderImmersiveModeIcon=function(){function q(d){g=d;b(g);m()}function m(){switch(e){case KINDLE_READER_SETTINGS_COLOR_MODE.WHITE:g.find("#immersive_icon").removeClass("black");g.find("#immersive_icon").removeClass("sepia");break;case KINDLE_READER_SETTINGS_COLOR_MODE.BLACK:g.find("#immersive_icon").removeClass("sepia");
g.find("#immersive_icon").addClass("black");break;case KINDLE_READER_SETTINGS_COLOR_MODE.SEPIA:g.find("#immersive_icon").removeClass("black"),g.find("#immersive_icon").addClass("sepia")}}var g,b,e;return{initialize:function(d){b=d;KindleUXComponentManager.initializeComponent("ReaderImmersiveModeIcon",q)},setIconColor:function(d){e=d;g&&m()}}}();
function KindleReaderDictionaryViewer(q,m,g){function b(){var h={componentName:"KindleReaderDictionaryListMenu",menuItems:function(n){function l(x){return function(){e();a();m.onDictChanged(x)}}var u={};n.forEach(function(x){var t=x.asin,v=l(x.asin);u[t]={elementId:"dict_"+x.asin,content:x.title,clickHandler:v}});return u}(g),buttonID:"dictionaryList",position:"down",isAppBarMenu:!1};KindleUXComponentManager.showMenu(h,!0)}function e(){KindleUXComponentManager.hideMenu("KindleReaderDictionaryListMenu")}
function d(h,n){if(!q.is(":hidden")){a();n.noEscape=!0;var l=KindleUXComponentManager.renderTemplate("KindleReaderDictionary",n);l.find(".dictionaryMain").append(h);q.addClass("dictionary_enabled");q.prepend(l);setTimeout(function(){q.find(".dictionary").addClass("expanded")},50);q.prepend(l);q.find(".view_full_link").click(function(u){m.viewFullLink(n.dictionaryAsin);return!1});n.isFullDefPane&&q.find(".link").addClass("clickableLink").click(m.linkClickHandler);n.dictionaryListMenuEnabled&&q.find(".dictionaryList").click(b)}}
function a(){q&&q.hasClass("dictionary_enabled")&&(q.find(".dictionary").remove(),q.find(".dictionary_loading").empty().hide(),q.find(".dictionary_error").remove(),q.find(".dictionaryMain").empty(),q.removeClass("dictionary_enabled"))}var c=1<g.length,f={};g.forEach(function(h){f[h.asin]=h.localeFrom});return{showLoading:function(){var h=q.find(".dictionary_loading");h.show();q.addClass("dictionary_enabled");var n=Handlebars.templates.KindleSimpleSpinner({});h.append(n)},showError:function(h,n){switch(h){case IDictionary.NOT_FOUND:h=
ResourceBundle.getLocalizedString("k_R_dictionary_not_found");break;case IDictionary.OFFLINE:h=ResourceBundle.getLocalizedString("k_R_dictionary_offline");break;case IDictionary.LOOKUP_FAILED:h=ResourceBundle.getLocalizedString("k_R_dictionary_not_available");break;default:h=ResourceBundle.getLocalizedString("k_R_dictionary_not_available")}h='<div class="dictionary_error">{{error}}</div>'.replace("{{error}}",h);d(h,{dictionaryUsed:n||"Dictionary",dictionaryListMenuEnabled:c,isForContextMenu:!0})},
renderDefinition:function(h){h.results&&h.results.forEach(function(l){var u=f[h.dictionaryAsin];u={Origin:ResourceBundle.getLocalizedString("k_R_dictionary_labels_Origin",null,u),Notes:ResourceBundle.getLocalizedString("k_R_dictionary_labels_Notes",null,u),Derivatives:ResourceBundle.getLocalizedString("k_R_dictionary_labels_Derivatives",null,u),Usage:ResourceBundle.getLocalizedString("k_R_dictionary_labels_Usage",null,u),Ipa:ResourceBundle.getLocalizedString("k_R_dictionary_labels_Ipa",null,u),Phrases:ResourceBundle.getLocalizedString("k_R_dictionary_labels_Phrases",
null,u),RelatedWords:ResourceBundle.getLocalizedString("k_R_dictionary_label_RelatedWords",null,u)};l.labels=u});var n=KindleUXComponentManager.renderTemplate("KindleReaderDictionaryDefinitions",{results:h.results,isFullDefPane:h.isFullDefPane});$.extend(h,{dictionaryListMenuEnabled:c});d(n,h)},removeDefinition:a,hideDictionaryListMenu:e}}
var KindleReaderFullDefinition=function(){function q(){d.hideDictionaryListMenu();KindleUXComponentManager.closeDialog("KindleReaderFullDefinitionPane")}function m(v){d.renderDefinition({results:v.definitions,dictionaryUsed:v.dictionaryName,dictionaryAsin:v.asin,isFullDefPane:!0});v=a.find("#kindleReader_full_definition_scrollContainer");n?v.jScrollPane({showArrows:!0,verticalGutter:10}):h?(l&&l.destroy(),l=new iScroll(f.FullDefWrapper,{vScrollbar:!1})):v.addClass("ie_scrollable")}function g(v,r,
k,y,w){function z(B,C){B.lookup(C).then(function(D){var F=D&&D.isKiDS?"::KiDS":"::Dictionary";x.emit("Reader"+F+"::FullDef::WordFound");D&&D.isKiDS&&x.emit("Reader"+F+"::FullDef::WordFound::"+D.dictionaryLanguage);m(D)},e)}d=new KindleReaderDictionaryViewer(a,{onDictChanged:function(B){KindleDebug.log("New search requested for this dictionary:"+B);KindleLocalStorage.setItem(Kindle.App.USER_DICT_ASIN,B);g(null,r,k,y,w);u.emit("Reader::DictionaryChanged::FullDef")},linkClickHandler:function(B){g(null,
B.currentTarget.attributes.target?B.currentTarget.attributes.target.value:B.currentTarget.textContent,k,y,w)}},y);if(v)m(v);else{d.removeDefinition();var A=KindleRenderer.getRenderer()===KindleRenderer.KARAMEL;if(r||A)d.showLoading(),x=u.createTimer(),$.when(KindleRenderer.getManifest(),KindleModuleManager.getModule(KindleModuleManager.BOOK_METADATA),dictionary.getDictionary()).done(function(B,C,D){B=A?{bookAsin:C.asin,revision:C.version,refEmId:C.refEmId,yjACR:B.acr,position:w.start}:{word:r};(C=
KindleLocalStorage.getItem(Kindle.App.USER_DICT_ASIN))?B.dictionary=C:k&&(B.dictionary=k);z(D,B)})}}function b(){c.dialog("option","height",window.innerHeight-50);c.dialog("option","position",{my:"center",at:"center",of:window});var v=a.find("#kindleReader_full_definition_scrollContainer");n?v.jScrollPane({showArrows:!0,verticalGutter:10}):h?l?l.refresh():l=new iScroll(f.FullDefWrapper,{vScrollbar:!1}):v.addClass("ie_scrollable")}function e(v,r){var k=r&&r.isKiDS?"::KiDS":"::Dictionary";switch(v){case IDictionary.NOT_FOUND:var y=
"::FullDef::WordNotFound";break;case IDictionary.OFFLINE:y="::FullDef::Offline";break;case IDictionary.LOOKUP_FAILED:y="::FullDef::LookupFailed";break;default:y="::FullDef::LookupFailed"}x.emit("Reader"+k+y);r&&r.isKiDS&&x.emit("Reader"+k+y+"::"+r.dictionaryLanguage);d.showError(v,r.dictionaryName)}var d,a,c,f={CLOSE_BUTTON_STRING_ID:"k_common_close_button",FullDefContainer:"kindleReader_full_definition_content",FullDefWrapper:"kindleReader_dictionary_scrollWrapper",FullDefPane:"kindleReader_full_definition_pane"},
h=KindleHostDeviceDetector.isiOS(),n=!h&&!KindleHostDeviceDetector.isIE(),l,u,x,t={getDialogSettings:function(){var v={};v[ResourceBundle.getLocalizedString(f.CLOSE_BUTTON_STRING_ID)]=q;v={autoOpen:!1,width:"720px",height:r,modal:!0,draggable:!1,resizable:!1,buttons:v};var r=KindleHostDeviceDetector.isiOS()?$("body",Kindle.top.document).height()-80:window.innerHeight-50;v.height=r;return v},onInitializationDone:function(v){var r;$(window).resize(function(){clearTimeout(r);r=setTimeout(b,50)})}};return{open:function(v,
r,k,y,w){u||(u=KindleModuleManager.getModuleSync([KindleModuleManager.METRICS_MANAGER]));KindleUXComponentManager.openDialog("KindleReaderFullDefinitionPane",t);a=$("#"+f.FullDefContainer);c=$("#"+f.FullDefPane);g(v,r,k,y,w);v=document.createElement("div");$(v).attr("class","dictionary_close_button");$(v).insertAfter("#kindleReader_full_definition_header");$(v).on("click",q);$("#"+f.FullDefPane).next().remove()}}}(),KindleReaderContextMenu=function(){function q(){function w(A){k=A.getDictionaryForLanguage("en-US")?
KindleReaderContextMenuDictionary:KindleReaderContextMenuDictionaryDotCom;z.resolve()}var z=$.Deferred();"en-US"===v?dictionary.getDictionary().then(w):(k=KindleReaderContextMenuDictionary,z.resolve());return z.promise()}function m(w){w.dialog("option","position",u);w.parent().css("bottom","auto")}function g(){KindleUXComponentManager.isVisible("KindleReaderContextMenu")&&($(".ui-widget-overlay").show(),KindleUXComponentManager.closeDialog("KindleReaderContextMenu"),r=Date.now())}var b={};b[KindlePopupMenu.ITEM_ENABLED]=
"button_enabled";b[KindlePopupMenu.ITEM_DISABLED]="button_disabled";b[KindlePopupMenu.ITEM_HIDDEN]="button_hidden";var e=["k_R_context_createHighlight","k_R_context_deleteHighlight","k_R_context_createNote","k_R_context_editNote"],d=0,a=d++,c=d++,f=d++,h=d++,n=d++,l,u,x,t,v,r,k,y={onInitializationDone:function(w){function z(B){var C=ResourceBundle.getLocalizedString(e[B]),D=$("<div></div>").addClass("kindle_menu_button").addClass("button_enabled").text(C);D.tap(function(F){D.hasClass("button_enabled")&&
(g(),k.hideDictionaryListMenu&&k.hideDictionaryListMenu(),x[B]())});return D}w=w.find("#kindle_menu_border");w.append(z(0));for(var A=1;A<e.length;A++)w.append('<div class="kindle_menu_separator"></div>'),w.append(z(A));k.initialize()},beforeDialogOpen:function(w){var z=w.find("#kindle_menu_border"),A,B,C;z.find(".kindle_menu_button").each(function(D){var F=$(this);F.removeClass().addClass("kindle_menu_button");F.addClass(b[l[D]])});z.children().each(function(){var D=$(this);D.hasClass("kindle_menu_button")?
D.hasClass("button_hidden")||(A||(A=D),B=D,C=null):D.hasClass("kindle_menu_separator")&&(!A||C?D.hide():(C=D,D.css("display","")))});A.addClass("ui-corner-left");B.addClass("ui-corner-right");C&&C.hide();l[n]===KindlePopupMenu.ITEM_ENABLED&&320!==$(window).width()&&(k.updateMenuWithDefinition(w,t,{language:v}),u[0]-=180);KindleHostDeviceDetector.isIE()||m(w);$(window).bind("resize",g)},getDialogSettings:function(){return{autoOpen:!1,draggable:!1,modal:!0,resizable:!1,minHeight:0,width:"auto",dialogClass:"kindle_menu",
k4w_transparent_modal_overlay:!0}},onDialogClose:function(){k.removeDefinition();$(window).unbind("resize",g)},onDialogOpen:function(w){var z=l[n]===KindlePopupMenu.ITEM_ENABLED,A=KindleHostDeviceDetector.isiOS()||KindleHostDeviceDetector.isIE()?60:30,B=w.parent();KindleHostDeviceDetector.isIE()&&m(w);if(z&&320<u[1]||!z&&100>$(window).height()-u[1])B.css("top","auto"),B.css("bottom",$(window).height()-u[1]+A);u[0]+380>$(window).width()&&B.css("left",$(window).width()-380-25);w.css("height","auto")}};
return{CREATE_HIGHLIGHT:a,CREATE_NOTE:f,EDIT_NOTE:h,DELETE_HIGHLIGHT:c,DEFINITION:n,show:function(w,z,A,B,C){l=w;u=z;x=A;t=B;v=C;q().then(function(){KindleUXComponentManager.openDialog("KindleReaderContextMenu",y);$(".ui-widget-overlay").hide()})},hide:g,wasVisible:function(){return 500>Date.now()-r}}}(),KindleReaderContextMenuDictionary=function(){function q(c,f,h){function n(u,x){u.lookup(x).then(function(t){d=t;var v={results:t.definitions,dictionaryUsed:t.dictionaryName,dictionaryAsin:t.asin,
view_full:ResourceBundle.getLocalizedString("k_R_dictionary_view_full"),isForContextMenu:!0};e.renderDefinition(v);b.emit("Reader::KiDS::WordFound");b.emit("Reader::KiDS::WordFound::"+t.dictionaryLanguage)},m)}if(f.start===f.end){b=g.createTimer();var l=KindleRenderer.getRenderer()===KindleRenderer.KARAMEL;$.when(KindleRenderer.getManifest(),KindleModuleManager.getModule(KindleModuleManager.BOOK_METADATA),KindleReaderAnnotationManager.getContext(f.start,f.end),dictionary.getDictionary()).done(function(u,
x,t,v){t||l?(a=a||v.getDictionaryList(),e=new KindleReaderDictionaryViewer(c,{onDictChanged:function(r){KindleDebug.log("New search requested for this dictionary:"+r);KindleLocalStorage.setItem(Kindle.App.USER_DICT_ASIN,r);q(c,f,{dictionary:r});g.emit("Reader::DictionaryChanged::ShortDef")},viewFullLink:function(r){e.hideDictionaryListMenu();KindleReaderFullDefinition.open(d,t,r,a,f);KindleReaderContextMenu.hide();g.emit("Reader::KiDS::ViewFull")}},a),e.showLoading(),u=l?{bookAsin:x.asin,revision:x.version,
refEmId:x.refEmId,yjACR:u.acr,position:f.start}:{word:t},(x=KindleLocalStorage.getItem(Kindle.App.USER_DICT_ASIN))?u.dictionary=x:h.dictionary?u.dictionary=h.dictionary:h.language&&(u.language=h.language),n(v,u)):e&&e.removeDefinition()})}}function m(c,f){switch(c){case IDictionary.NOT_FOUND:b.emit("Reader::KiDS::WordNotFound");b.emit("Reader::KiDS::WordNotFound::"+f.dictionaryLanguage);break;case IDictionary.OFFLINE:b.emit("Reader::KiDS::Offline");b.emit("Reader::KiDS::Offline::"+f.dictionaryLanguage);
break;case IDictionary.LOOKUP_FAILED:b.emit("Reader::KiDS::LookupFailed");b.emit("Reader::KiDS::LookupFailed::"+f.dictionaryLanguage);break;default:b.emit("Reader::KiDS::LookupFailed"),b.emit("Reader::KiDS::LookupFailed::"+f.dictionaryLanguage)}e.showError(c,f.dictionaryName)}var g,b,e,d,a;return{initialize:function(){g=KindleModuleManager.getModuleSync([KindleModuleManager.METRICS_MANAGER])},updateMenuWithDefinition:q,hideDictionaryListMenu:function(){e&&e.hideDictionaryListMenu()},removeDefinition:function(){return e&&
e.removeDefinition()}}}(),KindleReaderContextMenuDictionaryDotCom=function(){function q(l){if(l.getPronunciationUrls()){var u;void 0===n&&(n=""!==document.createElement("audio").canPlayType("audio/mpeg"));var x=n?l.getPronunciationUrls().mp3:l.getPronunciationUrls().wav;c.find("#dictionary_audio").tap(function(){u=u||new Audio(x);KindleHostDeviceDetector.isSafari()&&!KindleHostDeviceDetector.isiPad()&&u.load();u.play();f.emit("Reader::Dictionary::SoundPlayed")});c.find(".view_full_link").click(function(){f.emit("Reader::Dictionary::ViewFull")})}}
function m(l){if(!c.is(":hidden")){var u=l.getPronunciationUrls();e();c.addClass("dictionary_enabled");c.prepend(KindleUXComponentManager.renderTemplate("KindleReaderContextMenuDictionaryDotCom",{entry:l.entry,pronunciation:a(l),audio_url_mp3:u?l.getPronunciationUrls().mp3:"",audio_url_wav:u?l.getPronunciationUrls().wav:"",definition:d(l),view_full:ResourceBundle.getLocalizedString("k_R_dictionary_view_full"),view_full_url:"http://app.dictionary.com/click/3mlh2s?clkdest=http://dictionary.reference.com/browse/"+
l.entry+"%3Fsplash=no"}));u||c.find("#dictionary_audio").hide();setTimeout(function(){c.find(".dictionary").addClass("expanded")},50)}}function g(){var l=c.find(".dictionary_loading");l.show();c.addClass("dictionary_enabled");var u=Handlebars.templates.KindleSimpleSpinner({});l.append(u)}function b(l){e();c.addClass("dictionary_enabled");switch(l){case IDictionary.NOT_FOUND:l=ResourceBundle.getLocalizedString("k_R_dictionary_not_found");h.emit("Reader::Dictionary::WordNotFound");break;case IDictionary.OFFLINE:l=
ResourceBundle.getLocalizedString("k_R_dictionary_offline");h.emit("Reader::Dictionary::Offline");break;case IDictionary.LOOKUP_FAILED:l=ResourceBundle.getLocalizedString("k_R_dictionary_not_available");h.emit("Reader::Dictionary::LookupFailed");break;default:l=ResourceBundle.getLocalizedString("k_R_dictionary_not_available"),h.emit("Reader::Dictionary::LookupFailed")}c.prepend('<div class="dictionary_error">{{error}}</div>'.replace("{{error}}",l))}function e(){c&&c.hasClass("dictionary_enabled")&&
(c.find(".dictionary").remove(),c.find(".dictionary_loading").empty().hide(),c.find(".dictionary_error").remove(),c.removeClass("dictionary_enabled"))}function d(l,u){var x=0,t=[];l=l.getDefinitions();u=u||5;for(var v=0;v<l.length&&x<=u;v++){var r=l[v].definitions;l[v].partOfSpeech&&t.push('<span class="word_type">'+l[v].partOfSpeech+"</span>");t.push('<ol class="definitions_list">');for(var k=0;k<r.length&&x<=u;k++)t.push("<li>"+r[k]+"</li>"),x++;t.push("</ol>")}return t.join("").replace(/(<[\/]?a[^>]*>)/ig,
"")}function a(l){return(l=l.getPronunciation())?"["+l+"]":""}var c,f,h,n;return{updateMenuWithDefinition:function(l,u){h=f.createTimer();c=l;u.start===u.end&&(g(),c.addClass("dictionary_enabled"),$.when(KindleReaderAnnotationManager.getContext(u.start,u.end),dictionary.getDictionary()).done(function(x,t){x?t.lookup(x).then(function(v){m(v);q(v);h.emit("Reader::Dictionary::WordFound")},b):e()}))},removeDefinition:e,initialize:function(){KindleUXComponentManager.hasTemplate("KindleReaderContextMenuDictionaryDotCom")||
KindleUXComponentManager.initializeTemplate("KindleReaderContextMenuDictionaryDotCom",function(){});f=KindleModuleManager.getModuleSync([KindleModuleManager.METRICS_MANAGER])}}}(),KindleReaderEditNoteDialog=function(){function q(){return c.find("#kindleReader_dialog_editNote_title")}function m(){return c.find("#kindleReader_dialog_editNote_noteText")}function g(r){x=!0;a();h&&h(f)}function b(r){x=!0;a();n&&n()}function e(r){x=!0;a();l&&l()}function d(r){r=m();var k=r.attr("placeholder");r.val(f);
KindleHostDeviceDetector.isMSEdge()&&(r.removeAttr("placeholder"),r.attr("placeholder",k));r=ResourceBundle.getLocalizedString("k_R_dialog_editNote_delete");r=c.dialog("widget").find('.ui-button:contains("'+r+'")');n?(q().text(ResourceBundle.getLocalizedString("k_R_dialog_editNote_title_edit")),r.show()):(q().text(ResourceBundle.getLocalizedString("k_R_dialog_editNote_title_create")),r.hide());KindleHostDeviceDetector.isiOS()&&m().attr("tabindex","-1");c.find("#kindleReader_dialog_editNote_noteText").off("keydown",
t);c.find("#kindleReader_dialog_editNote_noteText").on("keydown",t)}function a(){KindleUXComponentManager.closeDialog("KindleReaderEditNoteDialog")}var c,f,h,n,l,u,x=!1,t=function(r){27===r.which&&e()},v={getDialogSettings:function(){var r={};r[ResourceBundle.getLocalizedString("k_R_dialog_editNote_cancel")]=e;r[ResourceBundle.getLocalizedString("k_R_dialog_editNote_delete")]=b;r[ResourceBundle.getLocalizedString("k_R_dialog_editNote_save")]=g;u=KindleHostDeviceDetector.isiOS()?"70%":"40%";return{width:u,
autoOpen:!1,buttons:r,draggable:!1,modal:!0,resizable:!1,k4w_transparent_modal_overlay:!0}},beforeDialogOpen:d,onDialogOpen:function(r){KindleHostDeviceDetector.isiOS()||(KindleHostDeviceDetector.isIE()?(c.focus(),setTimeout(function(){var k=document.getElementById("kindleReader_dialog_editNote_noteText");k.focus();if(f){var y=document.createRange();y.selectNodeContents(k);y.collapse(!1);k=window.getSelection();k.removeAllRanges();k.addRange(y)}},0)):m().focus())},onDialogClose:function(){!x&&l&&
l();f=$.trim(m().val())},onInitializationDone:function(r){c=r;KindleTouchEventsToggler.isRequired()&&(m().focus(function(){KindleTouchEventsToggler.off()}),m().blur(function(){KindleTouchEventsToggler.on()}));d()}};return{open:function(r,k,y,w){f=r||"";h=k;n=y;l=w;x=!1;KindleUXComponentManager.openDialog("KindleReaderEditNoteDialog",v,{maxNoteChars:Kindle.opt.maxNoteChars})},close:a,isVisible:function(){return KindleUXComponentManager.isVisible("KindleReaderEditNoteDialog")}}}(),KindleReaderGoToDialog=
function(){function q(u){var x;/(^[0]*\d*$)/.exec(u)&&(x=parseInt(u,10));isNaN(x)&&(x=void 0);return x}var m=[8,9,13,27,37,39,46],g,b,e,d,a,c=function(){var u=a.find("#kindleReader_dialog_gotoField"),x=q(u.val());if(void 0===x||x<b.minLocation||x>b.maxLocation){var t=a.find("#kindleReader_dialog_gotoField");t.addClass("invalid_input");t.val("");KindleHostDeviceDetector.isiOS()||u.focus();setTimeout(function(){t.removeClass("invalid_input")},2E3)}else e=!0,d=x,KindleUXComponentManager.closeDialog("KindleReaderGoToDialog")},
f=function(){KindleUXComponentManager.closeDialog("KindleReaderGoToDialog")},h=function(u){27===u.which&&f()},n=function(u){0<=m.indexOf(u.keyCode)||48<=u.keyCode&&57>=u.keyCode||96<=u.keyCode&&105>=u.keyCode?13===u.which&&(a.focus(),$("#kindleReader_dialog_gotoField").blur(),c(),u.preventDefault()):u.preventDefault()},l={onInitializationDone:function(u){a=u;KindleTouchEventsToggler.isRequired()&&(a.find("#kindleReader_dialog_gotoField").focus(function(){KindleTouchEventsToggler.off()}),a.find("#kindleReader_dialog_gotoField").blur(function(){KindleTouchEventsToggler.on()}))},
getDialogSettings:function(){var u={autoOpen:!1,modal:!0,draggable:!1,resizable:!1,k4w_transparent_modal_overlay:!0};if(KindleHostDeviceDetector.isiPad()){var x=375;var t=210}else x=325,t=155;buttons={};buttons[ResourceBundle.getLocalizedString("k_common_cancel_button")]=f;buttons[ResourceBundle.getLocalizedString("k_R_goto_menu_goto_button")]=c;u.width=x;u.height=t;u.buttons=buttons;return u},beforeDialogOpen:function(u){u=a.find("#kindleReader_dialog_gotoField");var x=ResourceBundle.getLocalizedString("k_R_goto_menu_goto_location_title");
a.find("#kindleReader_dialog_gotoTitle").empty().append(x);x=ResourceBundle.getLocalizedString("k_R_goto_menu_goto_message");a.find("#kindleReader_dialog_gotoLabel").empty().append(x);x=ResourceBundle.getLocalizedString("k_R_goto_menu_goto_location",{lastLocation:b.maxLocation});a.find("#kindleReader_dialog_gotoLocation").empty().append(x);u.val("");u.bind("keyup",h);KindleHostDeviceDetector.isiOS()&&u.attr("tabindex","-1")},onDialogOpen:function(u){KindleHostDeviceDetector.isiOS()||a.find("#kindleReader_dialog_gotoField").focus();
KindleHostDeviceDetector.isIE()&&(a.focus(),setTimeout(function(){a.find("#kindleReader_dialog_gotoField").focus()},0));document.getElementById("kindleReader_dialog_gotoField").addEventListener("keydown",n,!1)},onDialogClose:function(u){u=a.find("#kindleReader_dialog_gotoField");u.blur();u.unbind("keyup",h);g(e,d);document.getElementById("kindleReader_dialog_gotoField").removeEventListener("keydown",n,!1)}};return{open:function(u,x){g=x;b=u;e=!1;d=-1;KindleUXComponentManager.openDialog("KindleReaderGoToDialog",
l)},parseLocationString:q}}(),KindleReaderGoToMenu=function(){function q(t,v){t&&l.gotoUserLocation(v)}function m(t,v){t&&l.gotoPage(v)}function g(){var t={},v=0;[a.cover,a.toc,a.beginning,a.page,a.location].forEach(function(r){var k=r.name,y=ResourceBundle.getLocalizedString(r.resource);t[k]={elementId:r.id,content:y,clickHandler:r.handler};f[r.name]=v++});return t}function b(){h||(h=g());return h}function e(t){function v(y,w){void 0!==y&&(x[y]=w)}var r=KindlePopupMenu.ITEM_ENABLED,k=KindlePopupMenu.ITEM_DISABLED;
b();x=[];v(f.cover,r);v(f.beginning,k);v(f.location,r);v(f.toc,k);v(f.page,k);v(f.bookmarks,k);n.cover=0;void 0!==t&&(void 0!==t.cover&&0<=t.cover&&(n.cover=t.cover),void 0!==t.toc&&0<=t.toc&&(n.toc=t.toc,v(f.toc,r)),n.srp=void 0!==t.srl&&0<=t.srl?t.srl:n.cover,v(f.beginning,r));KindleUXComponentManager.updateMenu("KindleReaderGotoMenu",x)}function d(){KindleUXComponentManager.hideMenu("KindleReaderGotoMenu")}var a={cover:{id:"kindleReader_goToMenuItem_goToCover",resource:"k_R_cover_title",handler:function(){l.gotoPosition(n.cover);
d();u.emit("Reader::GoToMenu::Cover")}},toc:{id:"kindleReader_goToMenuItem_goToTOC",resource:"k_R_table_of_contents_title",handler:function(){l.gotoPosition(n.toc);d();u.emit("Reader::GoToMenu::TableOfContents")}},beginning:{id:"kindleReader_goToMenuItem_goToBeginning",resource:"k_R_beginning_title",handler:function(){l.gotoPosition(n.srp);d();u.emit("Reader::GoToMenu::StartReadingPosition")}},page:{id:"kindleReader_goToMenuItem_goToPage",resource:"k_R_goto_page_title",handler:function(){d();var t=
{range:l.getPageNumberRanges(),maxPage:l.getMaxPage()};KindleReaderGoToPageDialog.open(t,m);u.emit("Reader::GoToMenu::Page")}},location:{id:"kindleReader_goToMenuItem_goToLocation",resource:"k_R_goto_location_title",handler:function(){d();var t={minLocation:1,maxLocation:l.getMaxUserLocation()};KindleReaderGoToDialog.open(t,q);u.emit("Reader::GoToMenu::Location")}},bookmark:{id:"kindleReader_goToMenuItem_goToBookmark",resource:"k_R_goto_bookmark_title",handler:function(){l.openBookmarks();d();u.emit("Reader::GoToMenu::Bookmarks")}}},
c={};Object.keys(a).forEach(function(t){c[t]=a[t].name=t});var f={},h,n={},l,u,x;return{MenuItemNames:c,show:function(){if(x){var t={componentName:"KindleReaderGotoMenu",menuItems:b(),buttonID:"kindleReader_button_goto",position:"down",title:ResourceBundle.getLocalizedString("k_R_goto_menu_title"),isAppBarMenu:!1,enabledFlags:x};KindleUXComponentManager.showMenu(t)}},hide:d,onResize:function(){},bookIsReady:function(t,v,r){l=t;u=r;v.getBookPositions().done(function(k){e(k)})},disable:function(){x=
void 0},updateGoToMenu:function(t){var v;if(x){for(v in t){var r=f[v];void 0!==r&&(x[r]=t[v])}KindleUXComponentManager.updateMenu("KindleReaderGotoMenu",x)}},extractPositionsFromMetadata:e,interestingPositions:n}}(),KindleReaderGoToPageDialog=function(){function q(u){var x;if(/(^[0]*\d*$)/.exec(u)){if(b.range.arabic){var t=parseInt(u,10);t>=b.range.arabic.minPage&&t<=b.range.arabic.maxPage&&(x=u)}b.range.custom&&(t=parseInt(u,10),t>=b.range.custom.minPage&&t<=b.range.custom.maxPage&&(x=u))}else PageNumberUtilities.isValidRomanNumeral(u)&&
b.range.roman&&(t=PageNumberUtilities.parseRomanNumeral(u),t>=b.range.roman.minPage&&t<=b.range.roman.maxPage&&(x=u));return x}var m=[8,9,13,27,37,39,46,67,68,73,76,77,86,88,99,100,105,108,109,118,120],g,b,e,d,a,c=function(){var u=a.find("#kindleReader_dialog_gotoPageField");if(KindleRenderer.getRenderer()!==KindleRenderer.KARAMEL)var x=q(u.val());else KindleReaderUI.getLocationFromPagelabel(u.val())&&(x=u.val());if(x)e=!0,d=x,KindleUXComponentManager.closeDialog("KindleReaderGoToPageDialog");else{var t=
a.find("#kindleReader_dialog_gotoPageField");t.addClass("invalid_input");t.val("");KindleHostDeviceDetector.isiOS()||u.focus();setTimeout(function(){t.removeClass("invalid_input")},2E3)}},f=function(){KindleUXComponentManager.closeDialog("KindleReaderGoToPageDialog")},h=function(u){27===u.which&&f()},n=function(u){0<=m.indexOf(u.keyCode)||48<=u.keyCode&&57>=u.keyCode||96<=u.keyCode&&105>=u.keyCode?13===u.which&&(a.focus(),$("#kindleReader_dialog_gotoPageField").blur(),c(),u.preventDefault()):u.preventDefault()},
l={onInitializationDone:function(u){a=u;KindleTouchEventsToggler.isRequired()&&(u=a.find("#kindleReader_dialog_gotoPageField"),u.focus(function(){KindleTouchEventsToggler.off()}),u.blur(function(){KindleTouchEventsToggler.on()}))},getDialogSettings:function(){var u={autoOpen:!1,modal:!0,draggable:!1,resizable:!1,k4w_transparent_modal_overlay:!0};if(KindleHostDeviceDetector.isiPad()){var x=375;var t=210}else x=325,t=155;buttons={};buttons[ResourceBundle.getLocalizedString("k_common_cancel_button")]=
f;buttons[ResourceBundle.getLocalizedString("k_R_goto_menu_goto_page_button")]=c;u.width=x;u.height=t;u.buttons=buttons;return u},beforeDialogOpen:function(u){var x=u.find("#kindleReader_dialog_gotoPageField");var t=ResourceBundle.getLocalizedString("k_R_goto_menu_goto_page_title");u.find("#kindleReader_dialog_gotoPageTitle").empty().append(t);t=ResourceBundle.getLocalizedString("k_R_goto_menu_goto_page_message");u.find("#kindleReader_dialog_gotoPageLabel").empty().append(t);t=ResourceBundle.getLocalizedString("k_R_goto_menu_goto_page",
{lastPage:b.maxPage});u.find("#kindleReader_dialog_gotoPage").empty().append(t);x.val("");x.bind("keyup",h);KindleHostDeviceDetector.isiOS()&&x.attr("tabindex","-1")},onDialogOpen:function(u){KindleHostDeviceDetector.isiOS()||a.find("#kindleReader_dialog_gotoPageField").focus();KindleHostDeviceDetector.isIE()&&(a.focus(),setTimeout(function(){a.find("#kindleReader_dialog_gotoPageField").focus()},0));document.getElementById("kindleReader_dialog_gotoPageField").addEventListener("keydown",n,!1)},onDialogClose:function(u){u=
u.find("#kindleReader_dialog_gotoPageField");u.blur();u.unbind("keyup",h);g(e,d);document.getElementById("kindleReader_dialog_gotoPageField").removeEventListener("keydown",n,!1)}};return{open:function(u,x){g=x;b=u;e=!1;d=-1;KindleUXComponentManager.openDialog("KindleReaderGoToPageDialog",l)}}}(),KindleReaderHeaderBar=function(){function q(a){e=a;d&&e.find("#"+g.BUTTON_CLOSE).html(d);b(a)}var m,g={BUTTON_CLOSE:"kindleReader_button_close"},b,e,d;return{initialize:function(a,c){m=c?"Embedded/KindleReaderHeaderBar":
"KindleReaderHeaderBar";b=a;KindleUXComponentManager.initializeComponent(m,q)},setCloseButtonText:function(a){e?e.find("#"+g.BUTTON_CLOSE).html(a).attr("title",a):d=a}}}(),KindleReaderImmersiveModeExit=function(){function q(e){m=e;m.tap(function(){b()});g(e)}var m,g,b;return{initialize:function(e,d){g=e;b=d;KindleUXComponentManager.initializeComponent("KindleReaderImmersiveModeExit",q)}}}(),KindleReaderSearchBox=function(){function q(d){function a(){u.removeClass("active")}function c(w){w.stopPropagation()}
function f(w,z){switch(w.keyCode){case 9:w.shiftKey||(a(),0<$("#kindleReader_sitb_pane").length&&(w.preventDefault(),w.stopPropagation(),KindleReaderSitbPane.selectFirstSitbResult()));break;case 13:w.stopPropagation();w.preventDefault();"search"===z?h():n(w);break;case 70:w[KindleHostDeviceDetector.isMacintosh()?"metaKey":"ctrlKey"]&&(w.preventDefault(),w.stopPropagation());break;default:w.stopPropagation()}}function h(){var w=t.val();w&&w.length&&(y.hide(),v.show(),KindleEventBroker.fire("reader_search"))}
function n(w){w.preventDefault();w.stopPropagation();t.val("");y.hide();v.hide();KindleReaderSitbPane.close()}function l(){if(e){var w=$(d.inputWrapperSelector).width();t.css({width:w})}}var u=$(d.searchDivSelector),x=$(d.searchButtonSelector),t=$(d.inputElementSelector),v=$(d.clearButtonSelector);v.attr("tabIndex",1);v.on("click",n).on("keydown",function(w){f(w,"clear")}).on("keyup",c).on("keypress",c);v.hide();var r=document.createElement("button");r.setAttribute("id","kindleReader_input_sitb_search");
var k=document.createTextNode(ResourceBundle.getLocalizedString(d.placeholderStringId));r.append(k);r.setAttribute("tabIndex",1);$(r).insertAfter(v);var y=$(g.searchInputButtonSelector);y.on("click",h).on("keydown",function(w){f(w,"search")}).on("keyup",c).on("keypress",c);y.hide();x.attr("tabIndex",-1);u.off("focusin").off("focusout").on("focusin",function(){u.addClass("active");if(b&&b.onfocus)b.onfocus()}).on("focusout",a);t.attr("placeholder",ResourceBundle.getLocalizedString(d.placeholderStringId));
t.on("click",function(){t.focus()}).on("keydown",function(w){switch(w.keyCode){case 13:w.stopPropagation();w.preventDefault();h();break;case 70:w[KindleHostDeviceDetector.isMacintosh()?"metaKey":"ctrlKey"]&&(w.preventDefault(),w.stopPropagation());break;default:w.stopPropagation()}}).on("keyup",function(w){if(9!==w.keyCode&&13!==w.keyCode){var z=t.val();z&&z.length?y.show():y.hide();v.hide()}w.stopPropagation()}).on("keypress",c);KindleTouchEventsToggler.isRequired()&&(t.focus(function(){KindleTouchEventsToggler.off()}),
t.blur(function(){KindleTouchEventsToggler.on()}));d.inputWrapperSelector&&($(d.inputWrapperSelector).on("resize",l),l());m(d.enabled)}function m(d){var a=$(g.searchDivSelector);d?a.fadeIn():a.hide()}var g={searchDivSelector:"#kindleReader_sitb",searchButtonSelector:"#kindleReader_button_sitb",inputWrapperSelector:"#kindleReader_input_sitb",inputElementSelector:"#kindleReader_input_sitb_box",placeholderStringId:"k_R_menuInput_sitb_placeholder",clearButtonSelector:"#kindleReader_input_sitb_clear",
searchInputButtonSelector:"#kindleReader_input_sitb_search",enabled:!1},b,e=KindleHostDeviceDetector.isiOS();return{initialize:function(d){q(g);b=d},getSearchText:function(){return $(g.inputElementSelector).val()},setActive:function(d){d||void 0===d?$(g.inputElementSelector).focus():$(g.inputElementSelector).blur()},setEnabled:m}}(),KindleReaderSitbPane=function(){function q(){return y.find("#"+k.Container)}function m(){$("#"+k.Dialog).css("height",g());var R=y.find("#"+k.IndexingMsg),I=y.find("#"+
k.ScrollWrapper).height();R.css("margin-top",I/2-R.height()/2);KindleHostDeviceDetector.isiOS()||(R=$("#"+k.Search).offset().left-$("#"+k.Dialog).offset().left,R=$("#"+k.Search).width()-R+21,-13>R?$("#"+k.Beak).hide():$("#"+k.Beak).show().css({right:R+"px"}))}function g(){var R=document.getElementById("kindleReader_header"),I=document.getElementById("kindleReader_footer");R=R.getBoundingClientRect().bottom+12;return I.getBoundingClientRect().top-12-R}function b(R){function I(){return $(document.createElement("div")).addClass(k.Overlay).click(c).dblclick(c)}
var T=[],J=R.getBoundingClientRect(),S=window.outerWidth||window.innerWidth;R=I();R.css({top:0,right:S-J.left});T.push(R);R=I();R.css({top:0,right:0,width:S-J.right});T.push(R);R=I();R.css({top:0,left:0,height:J.top});T.push(R);R=I();R.css({top:J.top+J.height,bottom:0,height:"auto",left:0});T.push(R);return T}function e(){Z=KindleHostDeviceDetector.isFirefox()||KindleHostDeviceDetector.isIE()}function d(){m();a()}function a(){if(F)N?N.refresh():N=new iScroll(k.ScrollWrapper,{vScrollbar:!1});else if(M){var R=
$("#"+k.ScrollWrapper).height(),I=q();I.height(R);I.jScrollPane({showArrows:!0,verticalGutter:10});I.off("keydown").off("keyup").on("keydown",l).on("keyup",h)}}function c(){if(L){f();document.getElementById(k.SearchBox).value="";document.getElementById(k.InputButtonSelector).style.display="none";y.detach();for(var R=0;R<w.length;R++)w[R].detach();window.removeEventListener("resize",m);L.resolve();L=null}}function f(){D&&(D.removeClass("selected"),D=null);var R=q();R&&(F?(R.empty(),N&&N.scrollTo(0,
0,0,!1)):M?R.data("jsp")&&R.data("jsp").getContentPane()&&R.data("jsp").getContentPane().empty():R.empty())}function h(R){R.stopPropagation()}function n(){if(M)q().data("jsp").scrollToElement(D);else if(!F){var R=D.get(0).offsetTop,I=D.get(0).offsetTop+D.get(0).clientHeight,T=q().scrollTop(),J=q().scrollTop()+q().height();R<T?q().scrollTop(R):I>J&&q().scrollTop(I-q().height())}}function l(R){var I=R.keyCode||R.which;R.stopPropagation();KindleEventUtil.preventKeyScroll(R);switch(I){case 36:x();break;
case 35:var T;M?T=q().data("jsp").getContentPane().children().last():F||(T=q().children().last());F||(0<T.length&&T.attr("id")===k.SpinnerContainer&&(T=T.prev()),0<T.length&&T.attr("id")!==k.SpinnerContainer&&(D&&D.removeClass("selected"),D=T,D.addClass("selected"),n(),q().focus()));break;case 38:D&&(R=D.prev(),0<R.length&&(D.removeClass("selected"),D=R,D.addClass("selected"),n()));break;case 40:D&&(R=D.next(),0<R.length&&R.attr("id")!==k.SpinnerContainer&&(D.removeClass("selected"),D=R,D.addClass("selected"),
n()));break;case 13:D&&(D.tap(),q().focus());break;case 9:D&&(D.removeClass("selected"),D=null);R.shiftKey||(R.preventDefault(),document.getElementById(k.SearchBox).focus());break;case 27:c()}}function u(R){R=$(R.currentTarget);var I=Z;Z=!1;if(I)return!1;if(D){if(D===R)return;D.removeClass("selected");D=R;R.addClass("selected")}else D=R,D.addClass("selected");q().focus()}function x(){var R;M?R=q().data("jsp").getContentPane().children().first():F||(R=q().children().first());!F&&0<R.length&&R.attr("id")!==
k.SpinnerContainer&&(D&&D.removeClass("selected"),D=R,D.addClass("selected"),n(),q().focus())}function t(){var R=$("#"+k.CurLocMarker),I;(I=$.data(R[0],"page"))?I=ResourceBundle.getLocalizedString("k_R_dialog_sitb_result_current_page_past",{page:I}):(I=$.data(R[0],"location"),I=ResourceBundle.getLocalizedString("k_R_dialog_sitb_result_current_location_past",{location:I}));R.find("."+k.LocationMarker).text(I)}function v(){M?V.appendTo(q().data("jsp").getContentPane()):V.appendTo(q())}var r={Searching:"Searching",
NotAvailable:"NotAvailable",Indexing:"Indexing",Complete:"Complete"},k={Dialog:"kindleReader_sitb_pane",Title:"kindleReader_sitb_pane_title",CloseButton:"kindleReader_sitb_pane_close_btn",Container:"kindleReader_sitb_pane_container",ScrollWrapper:"kindleReader_sitb_pane_scrollWrapper",Beak:"kindleReader_sitb_pane_beak",CurLocMarker:"kindleReader_sitb_pane_cur_loc_marker",SpinnerContainer:"kindleReader_sitb_spinner_container",Spinner:"kindleReader_sitb_spinner",Search:"kindleReader_sitb",SearchBox:"kindleReader_input_sitb_box",
InputButtonSelector:"kindleReader_input_sitb_clear",IndexingMsg:"kindleReader_sitb_message",Overlay:"kindleReader_sitb_pane_overlay",ResultContainer:"kindleReader_sitb_result_container",ContextBody:"kindleReader_sitb_result_context_body",LocationMarker:"kindleReader_sitb_result_cur_loc_marker",ContextFooter:"kindleReader_sitb_context_footer",PageNumber:"kindleReader_sitb_pagenumber",Location:"kindleReader_sitb_location"},y=null,w=null,z=null,A=null,B=null,C=null,D=null,F=KindleHostDeviceDetector.isiOS(),
M=!F&&!KindleHostDeviceDetector.isIE(),N=null,L=null,P=KindleHostDeviceDetector.isiOS(),V=$("<div id='kindleReader_sitb_spinner_container'><div id='kindleReader_sitb_spinner'></div></div>"),Z=!1;return{States:r,show:function(R){if(L)return f(),v(),P&&q().focus(),L.promise();y||(y=$(Handlebars.templates.KindleReaderSitbPane()),y.find("#"+k.CloseButton).click(c));if(!w){var I=document.getElementById("kindleReader_sitb");w=b(I)}if(!z&&(z=$(Handlebars.templates.KindleReaderSitbResult()),!P))z.on("mouseover",
u);if(!B&&(B=$(Handlebars.templates.KindleReaderSitbResultCurLocMarker()),!P))B.on("mouseover",u);A||(A=$(Handlebars.templates.KindleSimpleSpinner()),A.appendTo(V.find("#"+k.Spinner)));C||(C=R);R=$("body");R.append(y);for(I=0;I<w.length;I++)R.append(w[I]);m();F?q().focus():(M?q().jScrollPane({showArrows:!0,verticalGutter:10}):q().addClass("ie_scrollable"),q().off("keydown").off("keyup").on("keydown",l).on("keyup",h).on("scroll",e));v();window.addEventListener("resize",d,!1);L=$.Deferred();return L.promise()},
close:c,selectFirstSitbResult:x,showErrorMessage:function(R){var I=ResourceBundle.getLocalizedString("k_common_close_button");c();switch(R){case Kindle.ERROR.SITB_OFFLINE:case Kindle.ERROR.SITB_LANGUAGE_NOT_SUPPORTED:case Kindle.ERROR.SITB_INDEX_NOT_AVAILABLE:case Kindle.ERROR.SITB_LANGUAGE_UNDEFINED:KindleMessageDialog.showError(R,null,I);break;default:KindleMessageDialog.showError(Kindle.ERROR.SITB_COMMON_ERROR,null,I)}},setViewState:function(R,I){switch(R){case r.Searching:y.find("#"+k.IndexingMsg).hide();
var T=ResourceBundle.getLocalizedString("k_R_dialog_sitb_pane_title_searching");y.find("#"+k.SpinnerContainer).show();break;case r.Indexing:y.find("#"+k.IndexingMsg).show();T=ResourceBundle.getLocalizedString("k_R_dialog_sitb_pane_title_indexing");break;case r.Complete:I=I?I:0,T=ResourceBundle.getLocalizedString(1!==I?"k_R_dialog_sitb_pane_title_resultsFound":"k_R_dialog_sitb_pane_title_oneResultFound").replace("${numberResults}",I),y.find("#"+k.SpinnerContainer).hide(),a()}y.find("#"+k.Title).text(T)},
addItem:function(R){var I=z.clone(!0),T="",J=T="",S="";I.find("."+k.ContextBody).html("..."+R.context)+"...";R.pageNumber&&(T=ResourceBundle.getLocalizedString("k_R_dialog_sitb_result_page",{page:R.pageNumber}));R.location&&(""!==T&&(J=" \u25cf "),S=ResourceBundle.getLocalizedString("k_R_dialog_sitb_result_location",{location:R.location}));T=T+J+S;I.find("."+k.Location).text(T);I.tap(function(W){C(R);t()});I.insertBefore(V);a()},addLocationMarker:function(R){var I=B.clone(!0),T="";R.pageNumber?(T=
ResourceBundle.getLocalizedString("k_R_dialog_sitb_result_current_page",{page:R.pageNumber}),$.data(I[0],"page",R.pageNumber)):(T=ResourceBundle.getLocalizedString("k_R_dialog_sitb_result_current_location",{location:R.location}),$.data(I[0],"location",R.location));I.find("."+k.LocationMarker).text(T);I.click(function(){C(R);t()});I.insertBefore(V);a()}}}(),KindleReaderLocationBar=function(){function q(K){var U=z.find("#"+r.PROGRESS_BAR_ID),G=z.find("#"+r.POPUP_LABEL_ID),Q=G.outerWidth(),H=$(window).width(),
X=U.width();U=U.offset();K=(K-A)/(B-A)*X;H=N?H-X-U.left:U.left;K=(0>K?0:K)+H;G.css(N?"right":"left",(Q/2+H>K?H:K+Q/2>X+H?X+H-Q:K-Q/2)+"px")}function m(K,U){M=!0;KindleReaderUI.getPNLabelFromLocation(U.value).done(function(G){e(U.value,G);q(U.value,G)})}function g(K,U){M=!1;0<B&&w(U.value)}function b(){z&&0<B&&0<=A&&z.find("#"+r.PROGRESS_BAR_ID).slider("option","min",A).slider("option","max",B).slider("option","disabled",!1)}function e(K,U){var G=U?ResourceBundle.getLocalizedString("k_R_slider_pageNumber_popup",
{page:U})+" \u00b7 "+ResourceBundle.getLocalizedString("k_R_slider_loc_popup",{location:K}):ResourceBundle.getLocalizedString("k_R_slider_location_popup",{location:K});z.find("#"+r.POPUP_LABEL_ID).text(G);G=ResourceBundle.getLocalizedString("k_R_slider_percentage",{percent:Math.round(K/B*100)});K=ResourceBundle.getLocalizedString("k_R_slider_location",{location:K,totalLocations:B});var Q="";U&&""!==U&&""!==C&&(Q=ResourceBundle.getLocalizedString("k_R_slider_pageNumber",{page:U,totalPages:C})+" \u00b7 ");
Z.text(G+" \u00b7 "+Q+K)}function d(){if(z&&0<=D){var K=D;z.find("#"+r.PROGRESS_BAR_ID).slider("option","value",K);e(D,F)}}function a(K){M||0>K?clearTimeout(P):P=setTimeout(function(){u()},K)}function c(K){M||0>K?clearTimeout(L):L=setTimeout(function(){u()},K)}function f(){V?z.find("#"+r.PROGRESS_BAR_ID).addClass("black"):z.find("#"+r.PROGRESS_BAR_ID).removeClass("black")}function h(K){K=K.originalEvent;var U=K.changedTouches[0];switch(K.type){case "touchstart":var G="mousedown";break;case "touchmove":G=
"mousemove";break;case "touchend":G="mouseup";break;default:return}var Q=document.createEvent("MouseEvent");Q.initMouseEvent(G,!0,!0,window,1,U.screenX,U.screenY,U.clientX,U.clientY,!1,!1,!1,!1,0,null);U.target.dispatchEvent(Q);K.preventDefault()}function n(K){z=K;Z=z.find("#"+r.MESSAGE_LABEL_ID);R=z.find("#"+r.DOWNLOAD_PROGRESS_ID);I=z.find("#"+r.DOWNLOAD_PROGRESS_MESSAGE_ID);R.prepend(Handlebars.templates.KindleSimpleSpinner({}));T=z.find(".spinner");T.attr("id",r.DOWNLOAD_PROGRESS_SPINNER_ID);
var U=K.find("#"+r.PROGRESS_BAR_ID);U.slider({range:"min",value:1,max:100,min:1,step:1,animate:!0,disabled:!0,rtl:N,slide:m,stop:g});U.find("."+k.RANGE).addClass("ui-corner-left");U.find("."+k.HANDLE).removeAttr("href");U.find("."+k.HANDLE).attr("id",r.PROGRESS_BAR_HANDLE_ID);x();f();b();d();KindleHostDeviceDetector.isiPad()&&(z.bind("touchstart",h),z.bind("touchmove",h),z.bind("touchend",h),z.bind("touchmove",l),z.bind("touchend",u),z.bind("touchcancel",u));y(K)}function l(){var K=z.find("#"+r.PROGRESS_BAR_ID),
U=z.find("#"+r.POPUP_ID);0<B&&(U.show(),q(K.slider("option","value")))}function u(){z&&z.find("#"+r.POPUP_ID).hide()}function x(){function K(G){0<B&&(c(-1),S&&v())}function U(G){M&&z.mouseup();c(2E3)}KindleHostDeviceDetector.isiOS()||(z.find("#"+r.PROGRESS_BAR_ID).find("."+k.HANDLE).hover(function(G){0<B&&(a(-1),l())},function(){a(500)}),z.hover(K,U),c(2E3))}function t(K){function U(){z.removeClass("downloading").addClass("download_completed")}T.removeClass("spinner");0<K&&(K=ResourceBundle.getLocalizedString("k_R_downloaded",
{percent:100}),R.addClass("finished"),I.text(K));K=KindleHostDeviceDetector.isiOS()?!W:I.is(":visible");K?U():S=U}function v(){setTimeout(function(){S&&(S(),S=null)},1E3)}var r={PROGRESS_BAR_ID:"kindleReader_progressbar_div",PROGRESS_BAR_HANDLE_ID:"kindleReader_progressbar_handle",MESSAGE_LABEL_ID:"kindleReader_footer_message",POPUP_ID:"kindleReader_locationPopup_div",POPUP_LABEL_ID:"kindleReader_locationPopup_labelDiv",DOWNLOAD_PROGRESS_ID:"kindleReader_download_progress",DOWNLOAD_PROGRESS_MESSAGE_ID:"kindleReader_download_progress_message",
DOWNLOAD_PROGRESS_SPINNER_ID:"kindleReader_download_spinner",FooterReaderControlsLeft:"kindleReader_footer_readerControls_left"},k={HANDLE:"ui-slider-handle",RANGE:"ui-slider-range"},y,w,z,A=-1,B=-1,C=-1,D=-1,F,M=!1,N=!1,L,P,V,Z,R,I,T,J=-1,S,W=!1;return{DOWNLOAD_COMPLETED:"completed",DOWNLOAD_IN_PROGRESS:"in_progress",DOWNLOAD_DISK_ERROR:"disk_error",DOWNLOAD_NETWORK_ERROR:"network_error",initialize:function(K,U,G){y=K;w=U;N=G;KindleUXComponentManager.initializeComponent("KindleReaderLocationBar",
n,{isRtl:G})},setMinMaxLocation:function(K,U){B=U;A=K;b()},setMinMaxPageNumber:function(K,U){C=U},updateLocation:function(K){D=K;d()},updatePageLabel:function(K){F=K.pageNumber;D=K.loc;d()},setLocationBarBlack:function(K){V=K;z&&f()},hidePopup:u,updateDownloadProgress:function(K,U){Z.is(":visible")||(R.hide(),T.removeClass("spinner"));switch(K){case "completed":t(J);break;case "in_progress":J=U;z&&0<=U&&100>=U&&(K=ResourceBundle.getLocalizedString("k_R_downloading",{percent:U}),z.addClass("downloading"),
I.text(K),T.addClass("spinner"));break;case "disk_error":case "network_error":var G=J;U=KindleModuleManager.getModuleSync(KindleModuleManager.LINK_URLS);G=0<G?G+"% ":"";z.removeClass("downloading").addClass("download_error");K="disk_error"===K?ResourceBundle.getLocalizedString("k_R_download_disk_error",{percent:G,url:U.getIncreaseOfflineStorageUrl()}):ResourceBundle.getLocalizedString("k_R_download_network_error",{percent:G});I.html(K)}},setImmersiveMode:function(K){W=K;!W&&S&&v()}}}(),KindleReaderImmersiveFooter=
function(){function q(){var l="",u="";if(e){switch(a){case "location":c&&(u=ResourceBundle.getLocalizedString("k_R_slider_location_popup",{location:c}));break;case "page":f&&(u=ResourceBundle.getLocalizedString("k_R_slider_pageNumber_popup",{page:f}));break;case "noLabel":percentageLabel=u=""}u&&(l=u)}n.innerHTML=l}function m(){clearTimeout(h);do a=b[a].next;while(!b[a].enabled);q();h=setTimeout(function(){var l=a.charAt(0).toUpperCase()+a.slice(1);d.emit("Reader::Immersive::"+l);h=null},2E3)}function g(l){"true"===
l?(e=!0,n.style.cursor="pointer",d.emit("Reader::Immersive::Enable")):(e=!1,n.style.cursor="default",d.emit("Reader::Immersive::Disable"));q()}var b={page:{next:"location"},location:{next:"timeLeftInChapter",enabled:!0},timeLeftInChapter:{next:"timeLeftInBook"},timeLeftInBook:{next:"noLabel"},noLabel:{next:"page"}},e=!0,d,a="location",c,f,h,n;return{initialize:function(l,u){d=l;n=document.getElementById("kindleReader_immersiveFooter");n.addEventListener("click",m,!1);g(u)},updateLabel:function(l){f=
l.pageNumber;c=l.loc;q()},setMaxLocation:function(l){},enableLabelType:function(l){a=l;b[l].enabled=!0},enable:g}}(),KindleReaderPageArrow=function(){function q(l){c=l;c.find("#"+b.LEFT_AREA_ID).click(e);c.find("#"+b.RIGHT_AREA_ID).click(d);c.find("#"+b.LEFT_AREA_ID).tap(e);c.find("#"+b.RIGHT_AREA_ID).tap(d);a(c);m();g()}function m(){f?c.find("#"+b.LEFT_AREA_ID).addClass("pageArrow"):c.find("#"+b.LEFT_AREA_ID).removeClass("pageArrow");h?c.find("#"+b.RIGHT_AREA_ID).addClass("pageArrow"):c.find("#"+
b.RIGHT_AREA_ID).removeClass("pageArrow")}function g(){switch(n){case KINDLE_READER_SETTINGS_COLOR_MODE.WHITE:c.find(".kindleReader_pageTurnArea").removeClass("black");c.find(".kindleReader_pageTurnArea").removeClass("sepia");break;case KINDLE_READER_SETTINGS_COLOR_MODE.BLACK:c.find(".kindleReader_pageTurnArea").removeClass("sepia");c.find(".kindleReader_pageTurnArea").addClass("black");break;case KINDLE_READER_SETTINGS_COLOR_MODE.SEPIA:c.find(".kindleReader_pageTurnArea").removeClass("black"),c.find(".kindleReader_pageTurnArea").addClass("sepia")}}
var b={LEFT_AREA_ID:"kindleReader_pageTurnAreaLeft",RIGHT_AREA_ID:"kindleReader_pageTurnAreaRight"},e,d,a,c,f,h,n;return{initialize:function(l,u,x,t){a=l;e=u;d=x;KindleUXComponentManager.initializeComponent("KindleReaderPageArrow",q,{rtlPageAdvance:t})},setArrowEnabled:function(l,u){f=l;h=u;c&&m()},setArrowColor:function(l){n=l;c&&g()}}}(),KindleReaderSampleEnd=function(){var q,m,g=function(){m="buy";KindleUXComponentManager.closeDialog("KindleReaderSampleEnd")},b=function(){m="cancel";KindleUXComponentManager.closeDialog("KindleReaderSampleEnd")},
e={getDialogSettings:function(){var d={};d[ResourceBundle.getLocalizedString("k_endOfSample_cancel_button")]=b;d[ResourceBundle.getLocalizedString("k_endOfSample_buy_button")]=g;return{autoOpen:!1,modal:!0,draggable:!1,resizable:!1,buttons:d,width:460,k4w_transparent_modal_overlay:!1}},beforeDialogOpen:function(d){var a=ResourceBundle.getLocalizedString("k_endOfSample_Title"),c=ResourceBundle.getLocalizedString("k_endOfSample_Text");d.find("#kindle_sample_end_title_text").empty().append(a);d.find("#kindle_sample_end_message_text").empty().append(c)},
onDialogClose:function(d){q(m)}};return{open:function(d){q=d;m=!1;KindleUXComponentManager.openDialog("KindleReaderSampleEnd",e)}}}(),KindleReaderSettingsDialog=function(){function q(){var B=k.find(w.FONT_SIZE_PANEL_ID).buttonset(),C=function(F){return function(M){M=KINDLE_READER_SETTINGS_FONT_SIZE[F].size;t.getFontSize()!==M&&(t.setFontSize(M),u(),m(),v=!0)}},D;for(D in KINDLE_READER_SETTINGS_FONT_SIZE)B.find(KINDLE_READER_SETTINGS_FONT_SIZE[D].id).tap(C(D)),B.find(KINDLE_READER_SETTINGS_FONT_SIZE[D].id).html("Aa")}
function m(){var B=t.getFontSize(),C;for(C in KINDLE_READER_SETTINGS_FONT_SIZE)B===KINDLE_READER_SETTINGS_FONT_SIZE[C].size?k.find(KINDLE_READER_SETTINGS_FONT_SIZE[C].id).addClass("selected"):k.find(KINDLE_READER_SETTINGS_FONT_SIZE[C].id).removeClass("selected")}function g(){var B=k.find(w.MARGIN_PANEL_ID).buttonset(),C=function(F){return function(M){M=KINDLE_READER_SETTINGS_MARGIN[F].size;t.getMargin()!==M&&(t.setMargin(M),b(),v=!0)}},D;for(D in KINDLE_READER_SETTINGS_MARGIN)B.find(KINDLE_READER_SETTINGS_MARGIN[D].id).tap(C(D))}
function b(){var B=t.getMargin(),C;for(C in KINDLE_READER_SETTINGS_MARGIN)B===KINDLE_READER_SETTINGS_MARGIN[C].size?k.find(KINDLE_READER_SETTINGS_MARGIN[C].id).addClass("selected"):k.find(KINDLE_READER_SETTINGS_MARGIN[C].id).removeClass("selected")}function e(){"false"===t.getShowColumns()||"ON"===t.getShowColumns()?t.setShowColumns("true"):t.setShowColumns("false");d();v=!0}function d(){var B=k.find(w.COLUMN_MODE_PANEL_ID).buttonset(),C=t.getShowColumns(),D;for(D in KINDLE_READER_SETTINGS_COLUMN_MODE)C===
KINDLE_READER_SETTINGS_COLUMN_MODE[D].persistedValue?(k.find(KINDLE_READER_SETTINGS_COLUMN_MODE[D].id).addClass("on"),B.find("."+y.CONTROL_PANEL_OPTION_BUTTONS_STRING_ID).addClass("on")):(k.find(KINDLE_READER_SETTINGS_COLUMN_MODE[D].id).removeClass("on"),B.find("."+y.CONTROL_PANEL_OPTION_BUTTONS_STRING_ID).removeClass("on"))}function a(){"true"===t.getShowLocations()||"ON"===t.getShowLocations()?t.setShowLocations("false"):t.setShowLocations("true");c();v=!0}function c(){var B=k.find(w.SHOW_LOCATION_PANEL_ID).buttonset(),
C=t.getShowLocations(),D;for(D in KINDLE_READER_SETTINGS_SHOW_LOCATION_MODE)C===KINDLE_READER_SETTINGS_SHOW_LOCATION_MODE[D].persistedValue?(k.find(KINDLE_READER_SETTINGS_SHOW_LOCATION_MODE[D].id).addClass("on"),B.find("."+y.CONTROL_PANEL_OPTION_BUTTONS_STRING_ID).addClass("on")):(k.find(KINDLE_READER_SETTINGS_SHOW_LOCATION_MODE[D].id).removeClass("on"),B.find("."+y.CONTROL_PANEL_OPTION_BUTTONS_STRING_ID).removeClass("on"))}function f(){var B=k.find(w.COLOR_MODE_PANEL_ID).buttonset(),C=function(F){return function(M){M=
KINDLE_READER_SETTINGS_COLOR_MODE[F];t.getColorMode()!==M&&(t.setColorMode(M),u(),h(),v=!0)}},D;for(D in KINDLE_READER_SETTINGS_COLOR_MODE)B.find(KINDLE_READER_SETTINGS_COLOR_MODE[D].id).tap(C(D))}function h(){var B=t.getColorMode(),C;for(C in KINDLE_READER_SETTINGS_COLOR_MODE)B===KINDLE_READER_SETTINGS_COLOR_MODE[C]?k.find(KINDLE_READER_SETTINGS_COLOR_MODE[C].id).addClass("selected"):k.find(KINDLE_READER_SETTINGS_COLOR_MODE[C].id).removeClass("selected")}function n(){r=!0;KindleUXComponentManager.closeDialog("KindleReaderSettingsDialog")}
function l(){KindleUXComponentManager.closeDialog("KindleReaderSettingsDialog")}function u(){k.find(w.PREVIEW_ID).css({color:t.getFGColor(),"font-size":t.getFontSize()+"px",backgroundColor:t.getBGColor()})}function x(){k.find("."+y.CONTROL_PANEL_FIELD_LABEL).each(function(){var B=$(this).text().toLowerCase();$(this).text(B)})}var t,v,r,k,y={CONTROL_PANEL_OPTION_BUTTONS_STRING_ID:"kindleReader_controlPanel_optionButtons",CONTROL_PANEL_FIELD_LABEL:"kindleReader_controlPanel_fieldLabel"},w={PREVIEW_ID:"#kindleReader_controlPanel_preview",
FONT_SIZE_PANEL_ID:"#kindleReader_controlPanel_fontSize",COLOR_MODE_PANEL_ID:"#kindleReader_controlPanel_colorMode",MARGIN_PANEL_ID:"#kindleReader_controlPanel_margin",COLUMN_MODE_PANEL_ID:"#kindleReader_controlPanel_multiColumn",COLUMN_MODE_ON_ID:"#kindleReader_controlPanel_columnButton_on",COLUMN_MODE_OFF_ID:"#kindleReader_controlPanel_columnButton_off",COLUMN_MODE_MSG_ID:"#kindleReader_controlPanel_optionButtons_msg",SHOW_LOCATION_PANEL_ID:"#kindleReader_controlPanel_showLocation",SHOW_LOCATION_ON_ID:"#kindleReader_controlPanel_showLocationButton_on",
SHOW_LOCATION_OFF_ID:"#kindleReader_controlPanel_showLocationButton_off"},z,A={getDialogSettings:function(){var B={};B[ResourceBundle.getLocalizedString("k_common_cancel_button")]=l;B[ResourceBundle.getLocalizedString("k_R_settings_apply_button")]=n;return{autoOpen:!1,width:380,modal:!0,draggable:!1,resizable:!1,buttons:B,dialogClass:"settings_dialog"}},onInitializationDone:function(B){k=B;k.find(w.PREVIEW_ID).text(ResourceBundle.getLocalizedString("k_R_settings_sampleText"));q();g();f();B=k.find(w.COLUMN_MODE_PANEL_ID).buttonset();
B.find("."+y.CONTROL_PANEL_OPTION_BUTTONS_STRING_ID).addClass("kindleReader_controlPanel_toggleButton");for(var C in KINDLE_READER_SETTINGS_COLUMN_MODE){var D=B.find(KINDLE_READER_SETTINGS_COLUMN_MODE[C].id);$(D).html("");$(D).on("click",e)}C=k.find(w.SHOW_LOCATION_PANEL_ID).buttonset();C.find("."+y.CONTROL_PANEL_OPTION_BUTTONS_STRING_ID).addClass("kindleReader_controlPanel_toggleButton");for(var F in KINDLE_READER_SETTINGS_SHOW_LOCATION_MODE)B=C.find(KINDLE_READER_SETTINGS_SHOW_LOCATION_MODE[F].id),
$(B).html(""),$(B).on("click",a)},beforeDialogOpen:function(B){k=B;u();m();b();h();d();c();x()},onDialogClose:function(){r&&v&&z(t)}};return{open:function(B,C,D){/iPod/.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||(t=new KindleReaderSettings,t.copy(B),v=!1,z=D,r=v=!1,KindleUXComponentManager.openDialog("KindleReaderSettingsDialog",A),KindleDeviceCapabilities.multiColumnMode()?C.columns&&1!==C.columns?$(w.COLUMN_MODE_MSG_ID).removeClass("show"):($(w.COLUMN_MODE_MSG_ID).addClass("show"),
$(w.COLUMN_MODE_ON_ID).addClass("on"),$(w.COLUMN_MODE_ON_ID).unbind("tap"),$(w.COLUMN_MODE_OFF_ID).toggle(!1),$(w.COLUMN_MODE_OFF_ID).removeClass("on")):$(w.COLUMN_MODE_PANEL_ID).hide())}}}(),KindleReaderSyncPositionDialog=function(){function q(u){var x=c.find("#"+g.SYNC_BUTTON_ID+" .ui-button-text"),t=c.find("#"+g.RESET_BUTTON_ID+" .ui-button-text");"page"===u?(x.text(ResourceBundle.getLocalizedString(m.SYNC_PAGE_BUTTON_STRING_ID)),t.text(ResourceBundle.getLocalizedString(m.RESET_PAGE_BUTTON_STRING_ID))):
(x.text(ResourceBundle.getLocalizedString(m.SYNC_BUTTON_STRING_ID)),t.text(ResourceBundle.getLocalizedString(m.RESET_BUTTON_STRING_ID)))}var m={TEXT_LABEL_STRING_ID:"k_R_syncPosition_labelText",TEXT_LABEL_PN_STRING_ID:"k_R_syncPosition_PN_labelText",TEXT_LABEL_STRING_ID_NO_DEVICE_NAME:"k_R_syncPosition_noDeviceName_labelText",TEXT_LABEL_PN_STRING_ID_NO_DEVICE_NAME:"k_R_syncPosition_noDeviceName_PN_labelText",CANCEL_BUTTON_STRING_ID:"k_R_syncPosition_cancelText",SYNC_BUTTON_STRING_ID:"k_R_syncPosition_sync",
RESET_BUTTON_STRING_ID:"k_R_syncPosition_reset",SYNC_PAGE_BUTTON_STRING_ID:"k_R_syncPosition_page_sync",RESET_PAGE_BUTTON_STRING_ID:"k_R_syncPosition_page_reset"},g={TEXT_LABEL_ID:"kindleReader_dialog_syncPosition_label",CANCEL_BUTTON_ID:"kindleReader_syncPosition_cancel",RESET_BUTTON_ID:"kindleReader_dialog_syncPosition_reset_btn",SYNC_BUTTON_ID:"kindleReader_dialog_syncPosition_sync_btn"},b={CANCEL:0,SYNC:1,RESET:2},e,d,a,c,f=function(){a=b.SYNC;KindleUXComponentManager.closeDialog("KindleReaderSyncPositionDialog")},
h=function(){a=b.RESET;KindleUXComponentManager.closeDialog("KindleReaderSyncPositionDialog")},n=function(){a=b.CANCEL;KindleUXComponentManager.closeDialog("KindleReaderSyncPositionDialog")},l={getDialogSettings:function(){var u={};u[ResourceBundle.getLocalizedString(m.CANCEL_BUTTON_STRING_ID)]=n;return{autoOpen:!1,modal:!0,draggable:!1,resizable:!1,buttons:u}},beforeDialogOpen:function(u){if(d.fprDevice&&"null"!==d.fprDevice){var x=new Date(d.fprDateTime);var t=ResourceBundle.getLocalizedTime(x);
var v=ResourceBundle.getLocalizedDate(x);d.currentPage?(t=ResourceBundle.getLocalizedString(m.TEXT_LABEL_PN_STRING_ID,{currentPage:d.currentPage,page:d.fprPage,deviceName:d.fprDevice,time:t,date:v}),q("page")):(x=d.fprLocation,d.fprPage&&(x+=" (Page "+d.fprPage+")"),t=ResourceBundle.getLocalizedString(m.TEXT_LABEL_STRING_ID,{currentLocation:d.currentLocation,location:x,deviceName:d.fprDevice,time:t,date:v}),q("location"))}else d.currentPage?(t=ResourceBundle.getLocalizedString(m.TEXT_LABEL_PN_STRING_ID_NO_DEVICE_NAME,
{currentPage:d.currentPage,page:d.fprPage}),q("page")):(t=ResourceBundle.getLocalizedString(m.TEXT_LABEL_STRING_ID_NO_DEVICE_NAME,{currentLocation:d.currentLocation,location:d.fprLocation}),q("location"));u.find("#"+g.TEXT_LABEL_ID).empty().append(t)},onDialogClose:function(u){e(a)},onInitializationDone:function(u){c=u;c.find("#"+g.SYNC_BUTTON_ID).click(f);c.find("#"+g.RESET_BUTTON_ID).click(h)}};return{open:function(u,x){e=x;a=b.CANCEL;d=u;KindleUXComponentManager.openDialog("KindleReaderSyncPositionDialog",
l)},USER_RESPONSES:b}}(),KindleReaderTutorial=function(){function q(n){n?$(h[c].tutorialContainerId).fadeOut("slow",function(){$("#tutorialContainer").remove()}):$("#tutorialContainer").remove();$("#tutorialContainer").off("keyup",m);window.removeEventListener("resize",g,!1)}function m(n){n&&n.which&&27===n.which&&q(!0);n.stopPropagation();n.preventDefault()}function g(n){document.getElementById("tutorialContainer")&&(q(!1),b())}function b(){var n=KindleStringUtilities.substitute(h[c].template,{instruction1:h[c].instruction1,
instruction2:h[c].instruction2,text:h[c].text,gestureTypeClass:h[c].gestureTypeClass});$("body").prepend(n);document.getElementById("tutorialContainer").focus();d();e();window.addEventListener("resize",g,!1);$(h[c].tutorialContainerId).hide().fadeIn("slow");$("#tutorialOverlay").click(function(){q(!0)}).focus();$(".tutorialCloseBtn").click(function(){q(!0)});$("#tutorialContainer").on("keyup",m)}function e(){var n=window.innerWidth/2,l=window.innerHeight/2,u=$(h[c].tutorialContainerId),x=u.width()/
2,t=u.height()/2;u.css({left:n-x,top:l-t})}function d(){var n=window.innerWidth,l=window.innerHeight,u=$(h[c].tutorialContainerId);var x=c===h.children.name?$("#tutorialImagesContainer"):$(".comicTutorialImageContainer");var t=function(r){var k,y=r.height();r=r.width();n<l||n<=r?r/n>h[c].maxWidthRatioWithScreen&&(k=h[c].maxWidthRatioWithScreen*n/r):y/l>h[c].maxHeightRatioWithScreen&&(k=h[c].maxHeightRatioWithScreen*l/y);return k}(u);if(t)if(KindleHostDeviceDetector.isFirefox()?x.css("-moz-transform",
"scale("+t+","+t+")"):KindleHostDeviceDetector.isChrome()||KindleHostDeviceDetector.isSafari()?x.css("-webkit-transform","scale("+t+","+t+")"):x.css("transform","scale3d("+t+","+t+",1)"),c===h.children.name)u.css({width:x.width()*t+h.children.tutorialWidthMargin,height:x.height()*t+h.children.tutorialHeightMargin}),$(".tutorialInstruction").css("font-size",function(r,k){return Math.floor(parseInt(k,10)*t)});else{var v=x.height()*(1-t);$("#comicTutorialInstruction2").css("top",function(r,k){return parseInt(k,
10)-v});$("#comicTutorialImageContainer2").css("top",function(r,k){return parseInt(k,10)-v});$(".tutorialInstruction").css("font-size",function(r,k){return Math.floor(parseInt(k,10)*t)});u.css({width:u.width()-x.width()*(1-t),height:u.height()-x.height()*(1-t)*2})}}var a={comic:1,children:1},c,f,h={children:{name:"children",tutorialContainerId:"#childrenTutorialContainer",tutorialWidthMargin:40,tutorialHeightMargin:70,maxHeightRatioWithScreen:.8,maxWidthRatioWithScreen:.7,instruction1:void 0,text:void 0,
gestureTypeClass:f?"touchTutorialGesture":"clickTutorialGesture",template:'<div id="tutorialContainer" tabindex="-1"><div id="tutorialOverlay"> </div><div id="childrenTutorialContainer"><div id="childrenTutorialInstruction" class="tutorialInstruction">{{instruction1}}</div><div id="tutorialImagesContainer"><div id="childrenTutorialImageContainerLeft"><div class="childrenTutorialImage"></div><div id="tutorialChildrenText">{{text}}</div><div id="childrenTutorialGesture" class="{{gestureTypeClass}}"></div></div><div id="childrenTutorialImageContainerRight"><div class="childrenTutorialImage"></div><div id="tutorialChildrenTextZoomed">{{text}}</div></div></div><span class="tutorialCloseBtn">&#9447;</span></div></div>'},
comic:{name:"comic",tutorialContainerId:"#comicTutorialContainer",maxHeightRatioWithScreen:.9,maxWidthRatioWithScreen:.8,instruction1:void 0,instruction2:void 0,text:void 0,gestureTypeClass:f?"touchTutorialGesture":"clickTutorialGesture",template:'<div id="tutorialContainer" tabindex="-1"><div id="tutorialOverlay"> </div><div id="comicTutorialContainer"><div id="comicTutorialInstruction1" class="tutorialInstruction">{{instruction1}}</div><div id="comicTutorialImageContainer1" class="comicTutorialImageContainer"><div id="comicTutorialImage1"></div><div id="tutorialComicText">{{text}}</div><div id="comicTutorialGesture" class="{{gestureTypeClass}}"></div></div><div id="comicTutorialInstruction2" class="tutorialInstruction">{{instruction2}}</div><div id="comicTutorialImageContainer2" class="comicTutorialImageContainer"><div id="comicTutorialImage2"></div><div id="tutorialComicTextZoomed">{{text}}</div></div><span class="tutorialCloseBtn">&#9447;</span></div></div>'}};
return{show:function(n){$("#kindleReader_book_container");var l=LocalStorageCounter("kcrNotifications.zTutorial."+n);if(0===l.getValue()){$("head").prepend("<style type=\"text/css\">@font-face {\n\tfont-family: 'Permanent Marker';\n\tfont-style: normal;\n\tfont-weight: 400;\n\tsrc: local('Permanent Marker'), local('PermanentMarker'), url(https://themes.googleusercontent.com/static/fonts/permanentmarker/v3/9vYsg5VgPHKK8SXYbf3sMmVSxyvLCPm9firj_jMeQtQ.woff) format('woff');\n}");f=KindleHostDeviceDetector.isTouchDevice();
c=n;if(c===Kindle.BookInfo.PublisherMetadata.COMIC)h[c].instruction1=f?ResourceBundle.getLocalizedString("metro_tutorial_comic_book_tap_instruction1"):ResourceBundle.getLocalizedString("metro_tutorial_comic_book_click_instruction1"),h[c].instruction2=f?ResourceBundle.getLocalizedString("metro_tutorial_comic_book_tap_instruction2"):ResourceBundle.getLocalizedString("metro_tutorial_comic_book_click_instruction2"),h[c].text=ResourceBundle.getLocalizedString("metro_tutorial_commic_book_dialogue");else if(c===
Kindle.BookInfo.PublisherMetadata.CHILDREN)h[c].instruction1=f?ResourceBundle.getLocalizedString("metro_tutorial_children_book_tap_instruction"):ResourceBundle.getLocalizedString("metro_tutorial_children_book_click_instruction"),h[c].text=ResourceBundle.getLocalizedString("metro_tutorial_children_book_text");else return;b();l.increment()}},getMaxShowCount:function(n){return a[n]||1}}}(),DictionaryMultiplexer=function(){function q(m,g){return{lookup:function(b){return"string"===typeof b||b instanceof
String?m.lookup(b):g.lookup(b)},getDictionaryList:function(){return g.getDictionaryList()},clearContext:function(){g.clearContext()},isLanguageSupported:function(b){return"en"===b.substring(0,2)||g.isLanguageSupported(b)},getDictionaryForLanguage:function(b){return g.getDictionaryForLanguage(b)}}}return{factory:function(){return $.when(dictionaryDotComFactory(),KindleDictionaryManager.initialize()).pipe(q)}}}(),dictionary=function(){var q=null;return{getDictionary:function(){return q=q||DictionaryMultiplexer.factory()}}}(),
IDictionary=function(){var q={lookup:function(m){throw Error("Failed to implement lookup");}};Object.defineProperty(q,"NOT_WORD",{value:"Not a word",enumerable:!0});Object.defineProperty(q,"NOT_FOUND",{value:"No definition found",enumerable:!0});Object.defineProperty(q,"LOOKUP_FAILED",{value:"Word lookup failed",enumberable:!0});Object.defineProperty(q,"OFFLINE",{value:"Offline",enumberable:!0});return q}(),ILookup=function(){return{entry:"",getDefinitions:function(){throw Error("Failed to implement getDefinitions");
},getPronunciation:function(){throw Error("Failed to implement pronunciation");},getPronunciationUrls:function(){throw Error("Failed to implement pronunciationUrl");}}}();
function dictionaryDotComFactory(){function q(b){return(b=m.exec(b))&&2===b.length?b[1]:""}var m=/^\W*(\w+(?:-\w+)*(?:'\w+)?)\W*$/,g=Object.create(IDictionary);g.lookup=function(b){function e(c){function f(x,t){function v(y){$.each(y.definitions,function(w,z){z.content&&k.push(z.content)})}function r(y,w){w&&("group"===w.type?v(w):w.definition.content&&k.push(w.definition.content))}var k=[];x&&t&&($.each(t,r),k.length&&u.push({partOfSpeech:x,definitions:k}))}c&&c.result&&"string"===typeof c.result&&
(c=JSON.parse(c.result));if(c&&c.entries&&c.entries.length){var h=c.entries[0];c=h.entry;var n=h.pronunciation_spell;if(h.audio_file){var l={};l.mp3=encodeURI("https://app.dictionary.com/dictaudio/{audio_file}.mp3".replace("{audio_file}",h.audio_file));l.wav=encodeURI("https://app.dictionary.com/dictaudio/lunawav/{audio_file}.wav".replace("{audio_file}",h.audio_file))}var u=[];h.definitions&&$.each(h.definitions,f);h=Object.create(ILookup);Object.defineProperty(h,"entry",{value:c,enumerable:!0});
h.getDefinitions=function(){return u};h.getPronunciation=function(){return n};h.getPronunciationUrls=function(){return l};a.resolve(h)}else a.reject(IDictionary.NOT_FOUND)}function d(c,f,h){a.reject(c.status?IDictionary.LOOKUP_FAILED:IDictionary.OFFLINE)}var a=new jQuery.Deferred;b=KindleStringUtilities.replaceAccentedChars(b);word=q(b);(b=word.replace("'","%27"))?!1===KindleModuleManager.getModuleSync(KindleModuleManager.NETWORK).isOnline(6E4)?a.reject(IDictionary.OFFLINE):KindleModuleManager.getModuleSync(KindleModuleManager.SERVICE_CLIENT).getWordDefinition(b).then(e,
d):a.reject(IDictionary.NOT_FOUND);return a.promise()};return(new jQuery.Deferred).resolve(g).promise()}
var DictionaryListManager=function(){function q(g){try{var b=JSON.stringify(g);window.localStorage.setItem("DL",b);m=g}catch(e){}}var m;return{getDictionaryList:function(){if(void 0===m){var g=window.localStorage.getItem("DL");if(null===g)m=[];else try{m=JSON.parse(g)}catch(b){m=[]}}return m},setDictionaryList:q,increasePriority:function(g){var b=-1;if(m.some(function(d,a){if(d.asin===g)return b=a,!0})){var e=m[b];m.splice(b,1);m.unshift(e);q(m)}},lookupDictionary:function(g){var b;m.some(function(e,
d){if(e.asin===g)return b=e,!0});return b}}}(),KindleDictionaryService=function(){return{getDefinition:function(q){q.dictionary=q.dictionary||"B003WUYRGI";return $.ajax({url:"/dict/getDefinition?asin="+q.dictionary+"&word="+q.word,dataType:"json"})},getDictionaryList:function(){return $.ajax({url:"/dict/getDictionaries",dataType:"json"})}}}(),KindleDictionaryManager=function(){function q(d,a){a=DictionaryListManager.lookupDictionary(a);if(a&&a.localeFrom){var c=a.localeFrom;a.localeTo&&a.localeFrom!==
a.localeTo&&(c+=":"+a.localeTo)}else c="Unknown";d.dictionaryLanguage=c;d.dictionaryName=a?a.title:"Dictionary";return d}function m(d){var a,c=5<=d.length?5:2;DictionaryListManager.getDictionaryList().some(function(f){var h=f.localeFrom;if("string"===typeof h&&h.substr(0,c)===d)return a=f,!0});return a}var g,b={isKiDS:!0},e={lookup:function(d){var a=KindleRenderer.getRenderer()===KindleRenderer.KARAMEL?KindleModuleManager.getModuleSync(KindleModuleManager.SERVICE_CLIENT).wordDefinition:KindleDictionaryService.getDefinition;
return function(){var c=$.Deferred(),f=KindleRenderer.getRenderer()===KindleRenderer.KARAMEL?Object.assign({},d):{word:d.word};if(d.dictionary)f.dictionary=d.dictionary,q(b,f.dictionary),c.resolve(f);else{var h;if(h=d.language){var n=d.language;h=m(n);!h&&5<=n.length&&(h=m(n.substr(0,2)));h=n=h}h?(f.dictionary=n.asin,q(b,f.dictionary),c.resolve(f)):(q(b),c.reject(IDictionary.NOT_FOUND,b))}return c.promise()}().pipe(a).pipe(function(c){var f=$.Deferred();if(c&&c.asin){q(c,c.asin);if(!c.definitions||
0>=c.definitions.length)q(b,c.asin),f.reject(IDictionary.NOT_FOUND,b);d.dictionary&&DictionaryListManager.increasePriority(d.dictionary);c.isKiDS=!0;f.resolve(c)}else f.reject(IDictionary.NOT_FOUND,b);return f.promise()},function(c){return $.Deferred().reject(c,b)})},getDictionaryList:DictionaryListManager.getDictionaryList,isLanguageSupported:function(d){return!!m(d.substr(0,2))},getDictionaryForLanguage:m,clearContext:function(){}};return{initialize:function(){if(!g){g=$.Deferred();var d=DictionaryListManager.getDictionaryList();
d.length&&g.resolve(e);KindleDictionaryService.getDictionaryList().then(function(a){var c=!1;d=DictionaryListManager.getDictionaryList();a.dictionaries.forEach(function(f){DictionaryListManager.lookupDictionary(f.asin)||(d.push(f),c=!0)});c&&DictionaryListManager.setDictionaryList(d);g.resolve(e)},function(){g.resolve(e)})}return g.promise()},setGetContextCallback:function(d){}}}(),KindleLibraryBookCover=function(){function q(){a||(a=KindleHostDeviceDetector.isiPad()?e:b);return a}function m(c){d||
(d="https://images-na.ssl-images-amazon.com/images/P/{asin}.01._SX{width}_SY{height}_TTXW_SCLZZZZZZZ_.jpg",d=d.replace("{width}",q().width),d=d.replace("{height}",q().height));var f=d;return f=f.replace("{asin}",c)}function g(c){var f=$.Deferred(),h=new XMLHttpRequest;h.open("GET",c);h.responseType="arraybuffer";h.onload=function(){var n=h.response;if(n){if(KindleHostDeviceDetector.hasArrayLikeApply())try{var l=[];var u=new Uint8Array(n);l.push(String.fromCharCode.apply(null,u))}catch(x){l=null}if(!l)for(l=
[],u=new Uint8Array(n),n=0;n<u.length;n++)l.push(String.fromCharCode(u[n]));l="data:image/jpeg;base64,"+KindleO_Aaa.o_aaa(l.join(""));f.resolve(l)}else f.reject()};h.onerror=function(){f.reject(h)};h.send();return f.promise()}var b={width:255,height:255},e={width:255,height:255},d=null,a=null;return{getBookCoverUrl:m,getOfflineCover:function(c){c=m(c);return KindleHostDeviceDetector.isMSEdge()?KindleImageUtil.getDataUriFromImage(c,"image/jpeg"):g(c)}}}(),ResourceBundle;
function KindleReaderUIFactory(){function q(){var E=[{buttonText:ResourceBundle.getLocalizedString("k_R_feature_not_available_dialog_buy_btn"),callback:function(){ub({from:Kindle.SampleToDetailPageButton.FeatureNotAvailable});ja.emit("Reader::Sample::Buy::"+(Ra?"Owned":"NotOwned")+"::FeatureUnavailable",{breakdown:["Partner"]})}},{buttonText:ResourceBundle.getLocalizedString("k_common_close_button"),callback:null}],O=ResourceBundle.getLocalizedString("k_R_feature_not_available_dialog_title"),Y=ResourceBundle.getLocalizedString("k_R_feature_not_available_dialog_text");
KindleMessageDialog.open(O,Y,null,null,E)}function m(){mb||(ia.pauseDownloading(),mb=!0)}function g(){mb&&(ia.resumeDownloading(),mb=!1)}function b(E){var O=k();KindleModuleManager.getModule(KindleModuleManager.DB_CLIENT).done(function(Y){Y.getAppDb().updateMaxPosition(ia.getAsin(),O,E)})}function e(E){if(!oa.selection)return!1;KindleReaderSelectionRenderer.clearSelection();KindleReaderContextMenu.hide();ReaderSitbHighlight.clear();null!==E.newValue&&KindleReaderSelectionRenderer.setSelection(E.newValue)}
function d(){Aa.setSelection(null);KindleSelectionEvents.resetTap();KindleReaderContextMenu.hide();KindleRenderer.clearSelection()}function a(){return fb.bookType||ab["book-type"]}function c(){return a()===Kindle.BookInfo.PublisherMetadata.COMIC}function f(){return a()===Kindle.BookInfo.PublisherMetadata.CHILDREN}function h(){return!(!fb.fixedLayout&&!ab["fixed-layout"])}function n(E){l();J()}function l(){d();ReaderSitbHighlight.render();dictionary.getDictionary().done(function(O){O.clearContext()});
oa.rtlPageAdvance?KindleReaderPageArrow.setArrowEnabled(KindleRenderer.hasNextScreen()||Sa===Kindle.CONTENT_TYPE.EBSP,KindleRenderer.hasPreviousScreen()):KindleReaderPageArrow.setArrowEnabled(KindleRenderer.hasPreviousScreen(),KindleRenderer.hasNextScreen()||Sa===Kindle.CONTENT_TYPE.EBSP);ba();if(oa.trackLpr){var E=KindleRenderer.getPagePositionRange();E&&ja.getKindleStreamsManager().consumeContent(E.currentTopOfPage,E.currentBottomOfPage);KindleReaderLPRManager.onPageChange(D(),Bb);Kb&&Kb()}}function u(){clearTimeout(Ga);
if(0<nb.length){var E=D(),O=nb.pop();r(E,O);KindleReaderMetrics.reportBackButtonUsage()}0===nb.length&&KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.Back,!1)}function x(E){clearTimeout(Ga);Ka.positionFromLocation(E).done(v)}function t(E){clearTimeout(Ga);E=Ta.positionFromPageNumber(E);v(E)}function v(E){if(null!==E&&Sa===Kindle.CONTENT_TYPE.EBSP&&E>=k())y();else{var O=D();O&&(nb.push(O),nb=nb.slice(-8),KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.Back,
!0));r(O,E)}}function r(E,O){KindleReaderMetrics.startGoToMetrics();KindleReaderArrhythmicHeartBeatHandler.cancelCurrentHeartBeat();var Y;try{KindleReaderZoomableManager.deactivateZoomable(),m(),null!=O&&(Y=KindleRenderer.gotoPosition(O))}catch(ea){g()}Y&&(l(),J(),g())}function k(){var E=0;try{E=KindleRenderer.getMaximumPosition()}catch(O){g(),E=-1}return E}function y(){KindleReaderSampleEnd.open(function(E){"buy"===E&&(ub({from:Kindle.SampleToDetailPageButton.EndAction}),ja.emit("Reader::Sample::Buy::"+
(Ra?"Owned":"NotOwned"),{breakdown:["Partner"]}))});ja.emit("Reader::Sample::End::"+(Ra?"Owned":"NotOwned"),{breakdown:["Partner"]})}function w(E,O){E===(oa.rtlPageAdvance?Ua.LEFT:Ua.RIGHT)?z(O):A(O)}function z(E){ia.setNetworkAccessed(!1);KindleHostDeviceDetector.isiOS()||va(!0);ReaderSitbHighlight.clear();KindleReaderZoomableManager.isZoomed()?KindleReaderZoomableManager.gotoNextZoomable():B(E)}function A(E){ia.setNetworkAccessed(!1);KindleHostDeviceDetector.isiOS()||va(!0);ReaderSitbHighlight.clear();
KindleReaderZoomableManager.isZoomed()?KindleReaderZoomableManager.gotoPreviousZoomable():C(E)}function B(E){function O(){KindleReaderMetrics.endPageTurnTimer(!1);g()}if(Lb){if(mb)return!1;KindleHostDeviceDetector.isiOS()&&va(!0);KindleHostDeviceDetector.isIE()&&!Ma&&(ta.hideAppBar(),va(!0),d());if(!ob){KindleReaderMetrics.startPageTurnTimer(KindleReaderMetrics.NEXT_PAGE,E);if(KindleRenderer.hasNextScreen())KindleReaderArrhythmicHeartBeatHandler.cancelCurrentHeartBeat();else if(Sa===Kindle.CONTENT_TYPE.EBSP)return KindleReaderZoomableManager.deactivateZoomable(),
y(),!1;m();if(KindleRenderer.nextScreen())return setTimeout(O,0),l(),J(),KindleReaderZoomableManager.clearZoomables(),!0}return!1}}function C(E){function O(){KindleReaderMetrics.endPageTurnTimer(!1);g()}if(Lb){if(mb)return!1;KindleHostDeviceDetector.isiOS()&&va(!0);KindleHostDeviceDetector.isIE()&&!Ma&&(ta.hideAppBar(),va(!0),d());return!ob&&(KindleReaderMetrics.startPageTurnTimer(KindleReaderMetrics.PREV_PAGE,E),KindleRenderer.hasPreviousScreen()&&KindleReaderArrhythmicHeartBeatHandler.cancelCurrentHeartBeat(),
m(),KindleRenderer.previousScreen())?(setTimeout(O,0),l(),J(),KindleReaderZoomableManager.clearZoomables(),g(),!0):!1}}function D(){var E=KindleRenderer.getPagePositionRange();return E&&E.currentTopOfPage}function F(E){var O=KindleRenderer.getPagePositionRange();return O&&E>=Math.min(O.currentTopOfPage,O.currentBottomOfPage)&&E<=Math.max(O.currentTopOfPage,O.currentBottomOfPage)}function M(){function E(){ja.emit("Service::LPR::Failure::Beginning");O.resolve(0)}var O=new jQuery.Deferred;KindleModuleManager.getModuleList([ua.BOOK_CONTEXT,
ua.BOOK_METADATA]).then(function(Y){var ea=Y[ua.BOOK_CONTEXT],la=Y[ua.BOOK_METADATA],ha=ea.srl||la.positions.srl;0<=wa.position?O.resolve(wa.position):0<=wa.location?Ka.positionFromLocation(wa.location).done(O.resolve):oa.trackLpr?pb.done(function(){KindleModuleManager.getModule(ua.LPR_MANAGER).then(function(pa){function ma(Ba,qa){var Oa=qa.lastPositionReadACR?qa.lastPositionReadACR:la.refEmId;Bb!==Oa?bb.convertPosition(Oa,Bb,qa.lastPositionRead).then(function(Da){Da&&Ba.resolve(Da.mappedPosition)},
function(Da){ja.emit("Service::ConvertPositionCall::Failure::UnMappedPosition");E()}):Ba.resolve(qa.lastPositionRead)}Bb=KindleRenderer.getRenderer()===KindleRenderer.KARAMEL?ea.YJFormatVersion:la.refEmId;pa=pa.getStartReadingPosition();pa.lastTimeRead!==KindleReaderLPRManager.NEVER?ma(O,pa):(ia.getFurthestPositionReadData().position!==ia.UNKNOWN_FPR&&(ha=ia.getFurthestPositionReadData().position),O.resolve(ha))},E)}):O.resolve(ha)},E);return O.promise()}function N(E){KindleSpinner.hide();l();E?E.then(function(){return J()}):
J();ob=!1;KindleReaderZoomableManager.clearZoomables();KindleReaderZoomableManager.isZoomed()&&KindleReaderZoomableManager.activateZoomableOnPageTurn()}function L(E){function O(){if(cb.pageNumbers)return Ta.getMaxPageNumberLabel()}function Y(){if(cb.location)return ha}function ea(){if(cb.pageNumbers)return Ta.getPageNumberRanges()}var la=KindleModuleManager.getModuleSync(ua.BOOK_METADATA);Ka=ia.getLocationConverter();KindleModuleManager.registerModule(Kindle.MODULE.LOCATION_CONVERTER,Ka);KindleReaderMetrics.setBookType(E,
ia.isContentScrambled());if(cb.location)if(la.locationsInfo&&la.locationsInfo.numOfLocations){KindleReaderLocationBar.setMinMaxLocation(1,la.locationsInfo.numOfLocations);var ha=la.locationsInfo.numOfLocations;KindleReaderImmersiveFooter.setMaxLocation(ha);Ka.locationFromPosition(KindleRenderer.getMinimumPosition()).done(function(Da){KindleReaderLocationBar.setMinMaxLocation(Da,la.locationsInfo.numOfLocations)})}else $.when(Ka.locationFromPosition(KindleRenderer.getMinimumPosition()),Ka.locationFromPosition(KindleRenderer.getMaximumPosition())).done(function(Da,
ra){KindleReaderLocationBar.setMinMaxLocation(Da,ra);ha=ra;KindleReaderImmersiveFooter.setMaxLocation(ha)});(function(){KindleReaderGoToMenu.bookIsReady({gotoUserLocation:x,gotoPosition:v,gotoPage:t,getMaxPage:O,getPageNumberRanges:ea,getMaxUserLocation:Y,openBookmarks:function(){sa(KindleReaderAnnotationManager.BOOKMARK)}},ia,ja)})();KindleModuleManager.getModuleSync(KindleModuleManager.DB_CLIENT).getAppDb();KindleReaderSearchBox.setEnabled(oa.searchable);KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.ShowGoTo,
!0);KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.ShowSettings,oa.viewSettings);KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.Back,!1);KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.Bookmark,oa.bookmarks);KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.ShowNotes,oa.annotations);KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.Sync,!0);Sa===Kindle.CONTENT_TYPE.EBOK&&
KindleModuleManager.getModule(ua.ANNOTATION_MANAGER).done(nc);if(oa.trackLpr){b(function(){});var pa=KindleModuleManager.getModuleSync(ua.LPR_MANAGER),ma=ja.getKindleStreamsManager(),Ba={};ia.getMetadata(function(Da){var ra=ia.getRefEmId();Ba={contentType:Da.sample?Kindle.CONTENT_TYPE.EBSP:Kindle.CONTENT_TYPE.EBOK,metadata:{},asin:Da.asin,embeddedId:ra,srl:Da.positions.srl,erl:Da.endPosition,bookLength:Da.endPosition};ma.openBook(Ba)});pb.done(function(){pa.onReadingStart(ia.getFurthestPositionReadData(),
KindleRenderer.getPagePositionRange(),Ka,lb);KindleReaderAnnotationManager.getLPRGuid(ia.getRefEmId()).pipe(function(Da){Kb=KindleReaderArrhythmicHeartBeatHandler.onReadingStart(ia.getAsin(),Da,ia.getKindleSessionId(),pa.getLastPositionRead,oa.trackLpr,KindleReaderAnnotationManager.getPositionType(ia.getBookType()))})})}ba();N();ta.onRendererLoaded(Ra);var qa=ia.isNetworkAccessed(),Oa=qa?"RemoteContent":"LocalContent";ja.endSubTimer(La,"RendererLoaded");ja.renameSubTimer(La,"RendererLoaded","RendererLoaded::"+
Oa);ja.endSubTimer(La,"ClickToGlass");ja.renameSubTimer(La,"ClickToGlass","ClickToGlass::"+Oa);E={screenOrientation:oc,contentType:Sa,bookType:E,isOwned:Ra,publisherBookType:a(),isOnline:ia.isOpenedOnline(),isContentScrambled:ia.isContentScrambled(),isNetworkAccessed:qa,clickToGlassTimer:ja.getSubTimer(La,"ClickToGlass::"+Oa),metadataLoadedTimer:ja.getSubTimer(La,"MetadataLoaded::"+Oa),rendererLoadedTimer:ja.getSubTimer(La,"RendererLoaded::"+Oa)};KindleReaderMetrics.reportBookOpenSuccess(E);Mb.resolve(!0)}
function P(E){cb.pageNumbers=!0;Ta=E;E=Ta.getMaxPageNumberLabel();KindleReaderLocationBar.setMinMaxPageNumber(1,E);KindleReaderImmersiveFooter.enableLabelType("page")}function V(){ja.startSubTimer(La,"RendererLoaded");try{Ka=ia.getLocationConverter();var E={version:"2.0",containerId:"kindleReader_content",bookInfo:ia,startingPositionDfd:M()},O=G();$.extend(O,Q());$.extend(O,H());$.extend(O,X());$.extend(O,fa());$.extend(O,za());$.extend(O,{});KindleRenderer.initialize(E,O,{statusCallback:R,pageChangeCallback:n,
annotationEventCallback:pc},KindleReaderOverlayManager)}catch(Y){g()}}function Z(){Nb.done(function(){if(Ob)Pb=!0;else{Pb=!1;var E=Zb,O=za();O.columns&&O.columns.num===E.columns.num&&O.columns.gap===E.columns.gap||KindleRenderer.updateSettings(O);KindleRenderer.onWindowResize()}})}function R(E){var O=ia&&ia.isNetworkAccessed();if(E.status===KindleRenderer.STATUS_LOADING||E.status===KindleRenderer.STATUS_PAGINATING)ob=!0,d(),KindleSpinner.show(),KindleReaderMetrics.startSpinnerTimer();else if(E.status===
KindleRenderer.STATUS_DONE){if(KindleRenderer.getRenderer()===KindleRenderer.KARAMEL&&($b(),!Ta)){var Y=$.Deferred();KindleRenderer.getLocationMap().pipe(function(la){la.navigationUnit&&(P(KaramelPageNumberProvider.create(la)),Y.resolve())})}!KindleDeviceCapabilities.useNativeSelection()||ac||qb||(jb(),ac=!0);Pa?(KindleReaderMetrics.endGoToMetrics(),KindleReaderMetrics.endSpinnerTimer(O),setTimeout(function(){KindleReaderMetrics.endPageTurnTimer(O)},0),E=Y?Y.promise():void 0,N(E),g()):($.when(ia.getBookInfoDfd()).done(function(){L(ia.getBookType())}),
Pa=!0,Nb.resolve(),ba())}else if(E.status===KindleRenderer.STATUS_ERROR)if(E.errorCode===KindleRenderer.ERROR_LOAD_FAILURE){var ea=Kindle.ERROR_CODE.RENDERER_UNKNOWN;E&&0<=E.errorMsg.indexOf("Init")?ea=Kindle.ERROR_CODE.RENDERER_INIT:E&&0<=E.errorMsg.indexOf("Metadata")&&(ea=Kindle.ERROR_CODE.RENDERER_METADATA);bc(ia,{openError:Kindle.ERROR.LOAD_FAILURE,openSubError:ea,asin:wa.asin})}else KindleSpinner.hide(),ob=!1,KindleReaderMetrics.endGoToMetrics(),KindleReaderMetrics.endSpinnerTimer(O),setTimeout(function(){KindleReaderMetrics.endPageTurnTimer(O)},
0),J(),KindleMessageDialog.open(ResourceBundle.getLocalizedString("k_R_pageLoadError_Title"),ResourceBundle.getLocalizedString("k_R_pageLoadError_Text"),Cb),E.errorCode===KindleRenderer.ERROR_TIMEOUT_WHILE_LOADING_BOOK_CONTENT?KindleReaderMetrics.reportTimeOutMetrics():KindleReaderMetrics.reportContentNotAvailableMetrics()}function I(){if(!KindleHostDeviceDetector.isiOS()||h()){var E=30-na.getMargin();KindleHostDeviceDetector.isiOS()?E=0:h()&&(E=5);$(".kindleReader_pageTurnArea").css("width",E+"%");
$("#kindleReader_pageTurnAreaRight").css("left",100-E+"%");$("#kindleReader_center").css("left",E+"%");$("#kindleReader_center").css("right",E+"%");KindleHostDeviceDetector.isiOS()&&$("#kindleReader_center").css("width",100-2*E+"%")}}function T(){$("#kindleReader_pageTurnAreaLeft").css("backgroundColor",na.getBodyColor());$("#kindleReader_pageTurnAreaRight").css("backgroundColor",na.getBodyColor());$("#kindleReader_center").css("backgroundColor",na.getBGColor());$("#kindleReader_title").css("color",
na.getTitleColor());$("#kindleReader_immersiveFooter").css("color",na.getTitleColor());Ea.css("backgroundColor",na.getBGColor());Ea.css("color",na.getFGColor());var E=na.getColorMode()===KINDLE_READER_SETTINGS_COLOR_MODE.BLACK;KindleReaderLocationBar.setLocationBarBlack(E);E=na.getColorMode();KindleReaderPageArrow.setArrowColor(E);ReaderImmersiveModeIcon.setIconColor(E)}function J(){if(!(0>k())){var E=KindleRenderer.getPagePositionRange().currentTopOfPage;0>E&&(E=0);db(E).done(function(O){KindleReaderLocationBar.updatePageLabel(O);
KindleReaderImmersiveFooter.updateLabel(O)})}}function S(E){if(Qb){var O=E.originalEvent.detail?E.originalEvent.detail:E;switch(O.which){case 70:O[KindleHostDeviceDetector.isMacintosh()?"metaKey":"ctrlKey"]&&oa.searchable&&(va(!1),KindleReaderSearchBox.setActive(!0),E.preventDefault(),E.stopPropagation())}KindleEventUtil.preventKeyScroll(O)}}function W(E){if(Qb){var O=E.originalEvent.detail?E.originalEvent.detail:E;switch(O.which){case 13:(O=document.activeElement)&&O.id&&!Ma&&KindleReaderControls.clickElementWithID(O.id);
break;case 32:E.shiftKey?A(Ha.KEY):z(Ha.KEY);break;case 33:case 38:A(Ha.KEY);break;case 37:w(Ua.LEFT,Ha.KEY);break;case 34:case 40:z(Ha.KEY);break;case 39:w(Ua.RIGHT,Ha.KEY);break;case 27:KindleReaderZoomableManager.deactivateZoomable()}E.stopPropagation();KindleReaderLocationBar.hidePopup();ta.onUserAction()}}function K(E){function O(){A(Ha.WHEEL)}function Y(){z(Ha.WHEEL)}var ea=E.originalEvent.wheelDelta||-1*E.originalEvent.detail;Rb&&clearTimeout(Rb);Rb=0>ea?setTimeout(Y,100):setTimeout(O,100);
E.preventDefault()}function U(){var E=KindleHostDeviceDetector.isIE();KindleReaderPageArrow.initialize(function(O){$("#kindleReader_touchLayer").append(O)},function(O){if("undefined"===typeof this.isTouchEvent||this.isTouchEvent&&!E)return w(Ua.LEFT,Ha.ARROW),O&&O.stopImmediatePropagation&&O.stopImmediatePropagation(),!1},function(O){if("undefined"===typeof this.isTouchEvent||this.isTouchEvent&&!E)return w(Ua.RIGHT,Ha.ARROW),O&&O.stopImmediatePropagation&&O.stopImmediatePropagation(),!1},oa.rtlPageAdvance)}
function G(){var E={},O=na.getFontSize();E.fontSizes=[.5*O,.75*O,O,1.2*O,1.4*O,1.6*O,1.8*O];E.fontSizeUnits="px";E.glyphScale=na.getGlyphScale();E.lineHeight=na.getLineHeight();return E}function Q(){var E={};E.margin=na.getMargin();return E}function H(){var E={};E.backgroundColor=na.getBGColor();E.fontColor=na.getFGColor();E.highlightColor=na.getHighlightColor();E.selectionColor=na.getSelectionColor();E.insertBgColor=na.getInsertBGColor();return E}function X(){var E={},O=na.getHighlightColor(),Y=
na.getSearchBGColor(),ea=na.getSearchBorderColor();KindleDeviceCapabilities.useCSSRegions()&&!qb?(E[KindleReaderAnnotationManager.HIGHLIGHT]={htmlElementTag:"mark",className:"highlight",style:"color: inherit; background-color: "+O+";"},E[KindleReaderAnnotationManager.NOTE]={htmlElementTag:"mark",className:"note",style:"position: relative; display: inline-block; width: 0; height: 0; vertical-align: text-top;"},E[KindleReaderAnnotationManager.NOTE_ICON]={className:"note-icon",style:"position: absolute; left: 0; top: 0; width: 30px; height: 30px; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAALCAYAAABGbhwYAAAASklEQVQYGWMUSd/dwMDAUA/E2EAjULDh9QwXBkagwv/YVCCJgRWzwARAupCBaMYeGBdsGzEmgjXgNBFmHMzkYWUiE9B3oAAlBBoBvxIeobfDoeQAAAAASUVORK5CYII=) no-repeat;"},
E[KindleReaderOverlayManager.SEARCH_RESULT]={htmlElementTag:"mark",className:"search-result",style:"margin-left: -3px; padding-left: 2px; padding-right: 2px; border-radius: 6px; color: inherit; background-color: "+Y+"; border: 1px solid "+ea+";"}):(E[KindleReaderAnnotationManager.NOTE]={className:"amazon-note",style:"position: absolute; width: 10px; height: 10px; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAALCAYAAABGbhwYAAAASklEQVQYGWMUSd/dwMDAUA/E2EAjULDh9QwXBkagwv/YVCCJgRWzwARAupCBaMYeGBdsGzEmgjXgNBFmHMzkYWUiE9B3oAAlBBoBvxIeobfDoeQAAAAASUVORK5CYII='); cursor: pointer; margin-top: 0px; margin-left:-2px;",
drawingType:KindleRendererAnnotationRenderer.DRAW_AFTER},E[KindleReaderAnnotationManager.HIGHLIGHT]={className:"amazon-highlight",style:"position: absolute; z-index: -10; background-color: "+O,drawingType:KindleRendererAnnotationRenderer.DRAW_OVER},O=na.getSelectionColor(),E[KindleReaderOverlayManager.SELECTION]={className:"amazon-selection",style:"position: absolute; z-index: -9; background-color: "+O,drawingType:KindleRendererAnnotationRenderer.DRAW_OVER},E[KindleReaderOverlayManager.SEARCH_RESULT]=
{className:"amazon-search",style:"position: absolute; z-index: -9; border-radius: 6px; background-color: "+Y+"; border: 1px solid "+ea+"; margin-left: -2px; padding-right: 2px;",drawingType:KindleRendererAnnotationRenderer.DRAW_OVER});return{annotationStyles:E}}function fa(){var E={};E[KindleReaderAnnotationManager.NOTE]={clickable:!0};E[KindleReaderAnnotationManager.HIGHLIGHT]={clickable:!1};E[KindleReaderAnnotationManager.POPULAR_HIGHLIGHT]={clickable:!0};E[KindleReaderOverlayManager.SELECTION]=
{clickable:!1};E[KindleReaderOverlayManager.SEARCH_RESULT]={clickable:!1};return{annotationClick:E}}function za(){var E={};if(1<oa.columns){var O=1,Y=0;"true"===na.getShowColumns()?(KindleHostDeviceDetector.isTablet()?0===window.outerWidth&&0===window.outerHeight?window.innerWidth>window.innerHeight&&(O=2):window.outerWidth>window.outerHeight&&(O=2):950<$("#kindleReader_content").width()&&(O=2),O=Math.min(O,oa.columns),O=Math.max(O,1)):"on"===na.getShowColumns()&&(O=Math.min(2,oa.columns));1<O&&(Y=
.666667*(22-na.getMargin())+2,Y=Math.round($("#kindleReader_content").width()*Y/100));E.columns={num:O,gap:Y};KindleReaderMetrics.setColumnCount(O)}else E.columns={num:1,gap:0};return Zb=E}function xa(E){kb(E);na.save()}function kb(E){var O={},Y=na.getFontSize()!==E.getFontSize(),ea=na.getMargin()!==E.getMargin(),la=na.getColorMode()!==E.getColorMode(),ha=na.getShowColumns()!==E.getShowColumns(),pa=na.getShowLocations()!==E.getShowLocations();na.copy(E);Y&&$.extend(O,G());ea&&($.extend(O,Q()),I());
la&&($.extend(O,H()),$.extend(O,X()),T());if(ha){var ma="true"===na.getShowColumns();ja.emit(ma?"Reader::ColumnModeChanged::Auto":"Reader::ColumnModeChanged::One")}pa&&KindleReaderImmersiveFooter.enable(E.getShowLocations());(ha||ea)&&$.extend(O,za());!KindleHostDeviceDetector.isIE11()||!la||Y||ea||ha||(document.getElementById("kindleReader_center").style.visibility="hidden",setTimeout(function(){document.getElementById("kindleReader_center").style.visibility="visible"},0));KindleRenderer.updateSettings(O)}
function Va(E){var O=ja.startMetrics("Reader::UnoptimizedBookOpen");KindleUnoptimizedFormatDialog.open(function(Y){Y?(ja.increaseSubCounter(O,"Continue",1),ja.endMetrics(O),vb.resolve(!0)):(ja.increaseSubCounter(O,"Cancel",1),ja.endMetrics(O),vb.resolve(!1),KindleRenderer.shutdown(),Sb())})}function Ja(E){return qb=0<=E.indexOf("topaz")}function Ab(E){Ja(E)&&KindleHostDeviceDetector.hasCanvasPerformanceProblem()?Va(E):vb.resolve(!0)}function lb(E){function O(){KindleMessageDialog.showError(Kindle.ERROR.SYNC_FAILED)}
KindleReaderSyncPositionDialog.open(E,function(Y){switch(Y){case KindleReaderSyncPositionDialog.USER_RESPONSES.SYNC:v(E.fprPosition);ja.emit("Reader::SyncLPR");break;case KindleReaderSyncPositionDialog.USER_RESPONSES.RESET:qc(E.currentPosition).fail(O);ja.emit("Reader::ResetLPR");break;case KindleReaderSyncPositionDialog.USER_RESPONSES.CANCEL:ja.emit("Reader::SyncLPRCancel")}})}function Jb(){function E(Y){function ea(ma,Ba){Ba.loc>ma.loc?(lb({currentLocation:ma.loc,currentPage:ma.pageNumber,currentPosition:pa,
fprPosition:ha.position,fprLocation:Ba.loc,fprPage:Ba.pageNumber,fprDevice:ha.deviceName,fprDateTime:ha.syncTime}),KindleReaderLPRManager.updateFprSyncTime(ha)):la()}function la(){KindleMessageDialog.open(ResourceBundle.getLocalizedString("k_R_syncPosition_title"),ResourceBundle.getLocalizedString("k_R_syncPosition_alreadyFurthest_Text"))}var ha=Y.lastPageReadData;if(F(ha.position))la();else{var pa=D();$.when(db(pa),db(ha.position)).done(ea)}}function O(){KindleMessageDialog.showError(Kindle.ERROR.SYNC_FAILED)}
clearTimeout(Ga);Pa&&bb&&KindleReaderAnnotationManager.getLPRGuid(ia.getRefEmId()).pipe(function(Y){bb.getLPR(ia.getAsin(),Y,ia.getIsSample()).then(E,O)})}function aa(){KindleReaderBookmarkOverlay.initialize(function(E){Ea.append(E);KindleReaderControls.registerComponent(E)})}function ba(){if(Pa&&KindleModuleManager.isModuleInitialized(ua.ANNOTATION_MANAGER)){var E=KindleModuleManager.getModuleSync(ua.ANNOTATION_MANAGER);gb=!1;var O=KindleRenderer.getPagePositionRange();if(O){O=E.getAnnotationsInRange(O.currentTopOfPage,
O.currentBottomOfPage);for(var Y=0;Y<O.length;Y+=1)if(O[Y].type===E.BOOKMARK){gb=!0;break}}da()}}function ca(){function E(){}clearTimeout(Ga);if(oa.bookmarks&&Pa&&KindleModuleManager.isModuleInitialized(ua.ANNOTATION_MANAGER)){var O=KindleModuleManager.getModuleSync(ua.ANNOTATION_MANAGER),Y=KindleRenderer.getPagePositionRange();if(gb){Y=O.getAnnotationsInRange(Y.currentTopOfPage,Y.currentBottomOfPage);for(var ea=0;ea<Y.length;ea+=1)Y[ea].type===KindleReaderAnnotationManager.BOOKMARK&&O.deleteAnnotations([Y[ea]]).done(E)}else O.createBookmark(Y.currentTopOfPage).done(E);
gb=!gb;da()}}function da(){gb?$("#kindleReader_bookmark").addClass("hasBookmark"):$("#kindleReader_bookmark").removeClass("hasBookmark");KindleReaderBookmarkOverlay.setIsBookmarked(gb)}function sa(E){Pa&&KindleModuleManager.isModuleInitialized(ua.ANNOTATION_MANAGER)&&(va(!1),clearTimeout(Ga),ReaderAnnotationsDisplay.show(D(),E))}function ya(){ReaderImmersiveModeIcon.initialize(function(E){Ea.append(E);KindleReaderControls.registerComponent(E);KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.ImmersiveIcon,
!0)})}function va(E){Ga&&(clearTimeout(Ga),Ga=null);E!==Ma&&hb!==Kindle.AutoHideOption.Off&&(Ma=!!E,ia&&(ia.pauseDownloading(),1)&&setTimeout(ia.resumeDownloading,2E3),Ea.hasClass("immersive_mode")!==Ma&&Ea.toggleClass("immersive_mode",Ma),KindleHostDeviceDetector.isiOS()&&(KindleReaderBookmarkOverlay.setImmersiveMode(Ma),KindleReaderLocationBar.setImmersiveMode(Ma)),Ma?KindleFreeTrialHelper.freeTrialMessageImmersiveSlideUp():KindleFreeTrialHelper.freeTrialMessageImmersiveSlideDown(),Ma&&KindleReaderSearchBox.setActive(!1))}
function tb(){va(!Ma)}function Qa(){function E(){va(!1)}KindleReaderImmersiveModeExit.initialize(function(O){Ea.append(O);$(".immersive_exit").hover(E)},E)}function Ib(){ob||(va(!1),clearTimeout(Ga),KindleReaderSettingsDialog.open(na,oa,xa))}function zb(){var E=$("#kindleReader_content");return function(O,Y,ea){return wb.getBookPositionAt(O-E.offset().left,Y-E.offset().top,ea)}}function ka(){var E={};var O=document.createElement("div");O.id="kindleReader_touchLayer";var Y=$(O),ea=$("#kindleReader_content");
Ea.append(O);E.getBookPositionAt=zb();E.selectionStateManager=Aa;KindleHostDeviceDetector.isIE11()&&Y.css("background-color","rgba(255,255,255,0.005)");window.oncontextmenu=function(){return!1};KindleHostDeviceDetector.isiOS()||(Y.click(Db),Y.keyup(W),Y.keydown(S),Y.dblclick(Eb),Y.bind("mousewheel",K),ea.click(Db),ea.keyup(W),ea.keydown(S),ea.dblclick(Eb),ea.bind("mousewheel",K),E.mouseDownEventSource=O,E.mouseEventSource=O,E.mouseClickOutsideEventSource=document.getElementById("kindleReader_book_container"));
KindleHostDeviceDetector.isTouchDevice()&&(Y.swipeLeft($a,{touchOnly:!0,distance:25}),Y.swipeRight(Za,{touchOnly:!0,distance:25}),Y.tap(cc),KindleHostDeviceDetector.isiOS()&&(Y.doubletap(rc),Y.bind("touchstart",sc)),E.touchEventSource=O,E.selectionHandleLeft=KindleReaderSelectionRenderer.getGrabHandleBegin(),E.selectionHandleRight=KindleReaderSelectionRenderer.getGrabHandleEnd());KindleRenderer.getRenderer()===KindleRenderer.STUCCO&&KindleSelectionEvents.initialize(E)}function Fa(){window.oncontextmenu=
function(){return!1};var E=$(document.createElement("div"));E.attr("id","kindleReader_touchArea");E.swipeLeft($a,{touchOnly:!0,distance:25});E.swipeRight(Za,{touchOnly:!0,distance:25});var O=$(document.createElement("div"));O.attr("id","kindleReader_touchLayer");O.click(Db);O.bind("dblclick",Eb);O.tap(cc);O.bind("mousewheel",K);O.bind("mousedown",dc);O.css("z-index",50);E.append(O);$("#kindleReader_center").appendTo(E);Ea.append(E)}function jb(){for(var E=document.getElementsByTagName("iframe"),O,
Y=0;Y<E.length;Y++)O=$(E[Y]),O.click(Db),O.bind("dblclick",Eb),O.bind("mousewheel",K),O.bind("mousedown",dc),E[Y].addEventListener("select",ec,!1),E[Y].contentWindow.document.addEventListener("selectionchange",Ya,!1)}function Ya(E){Tb&&E.target.selection&&(0!==E.target.selection.createRange().text.length&&$(".kindle_menu").css("left","-1000px"),Tb=!1)}function eb(){var E=KindleRenderer.getPagePositionRange();return KindleReaderAnnotationManager.getContext(E.currentTopOfPage,E.currentBottomOfPage)}
function Wa(E){function O(){d();KindleRenderer.reloadAnnotations()}function Y(){KindleReaderAnnotationManager.deleteAnnotations(Ba).done(O)}function ea(){KindleReaderAnnotationManager.createHighlight(ma.start,ma.end,D()).done(O)}function la(){KindleReaderEditNoteDialog.open(null,function(ra){ra&&KindleReaderAnnotationManager.createNote(ma.start,ma.end,D(),ra).done(O)},null,function(){d()})}function ha(){Ca(qa[0].start)}function pa(){var ra=KindlePopupMenu,Ia;if(Ia=1===Ba.length)Ia=Ba[0],Ia=Ia.start<=
ma.start&&Ia.end>=ma.end;var ib=ma&&!Ia?ra.ITEM_ENABLED:ra.ITEM_HIDDEN,Fb=Ia?ra.ITEM_ENABLED:ra.ITEM_HIDDEN,Gb=ma&&0===qa.length?ra.ITEM_ENABLED:ra.ITEM_HIDDEN,xb=ma&&0<qa.length?ra.ITEM_ENABLED:ra.ITEM_HIDDEN,Na=ma.start===ma.end?ra.ITEM_ENABLED:ra.ITEM_HIDDEN;Ia=[];var yb=[];KindleRenderer.getRenderer()===KindleRenderer.KARAMEL&&(Na=Na===ra.ITEM_ENABLED&&ma.isWord?ra.ITEM_ENABLED:ra.ITEM_HIDDEN);ra=Sa===Kindle.CONTENT_TYPE.EBSP;yb[KindleReaderContextMenu.CREATE_HIGHLIGHT]=ra?q:ea;yb[KindleReaderContextMenu.CREATE_NOTE]=
ra?q:la;yb[KindleReaderContextMenu.EDIT_NOTE]=ha;yb[KindleReaderContextMenu.DELETE_HIGHLIGHT]=Y;Ia[KindleReaderContextMenu.CREATE_HIGHLIGHT]=ib;Ia[KindleReaderContextMenu.CREATE_NOTE]=Gb;Ia[KindleReaderContextMenu.EDIT_NOTE]=xb;Ia[KindleReaderContextMenu.DELETE_HIGHLIGHT]=Fb;Ia[KindleReaderContextMenu.DEFINITION]=Oa&&Na;Na=E.selection.lowerBounds||KindleListUtilities.first(wb.getBounds(E.selection.end));ra=E.selection.upperBounds||KindleListUtilities.last(wb.getBounds(E.selection.start));ib=$("#kindleReader_content").offset();
Fb=KindleHostDeviceDetector.isiOS()?80:0;var tc=KindleHostDeviceDetector.isiOS()||KindleHostDeviceDetector.isIE()?25:0;Gb=KindleHostDeviceDetector.isiOS()||KindleHostDeviceDetector.isIE()?35:0;KindleRenderer.getRenderer()===KindleRenderer.KARAMEL&&(ib={top:0,left:0});xb=Na.right+ib.left;Na=Na.bottom+ib.top+tc;$(window).height()-Na>Fb?ra=[xb,Na]:(xb=ra.left+ib.left-Gb,Na=ra.top+ib.top-Fb-Gb,ra=0<Na?[xb,Na]:"center");KindleReaderContextMenu.show(Ia,ra,yb,ma,Da)}var ma=Aa.getSelection()||E.selection,
Ba=ma?KindleReaderAnnotationManager.getAnnotationsInRange(ma.start,ma.end,KindleReaderAnnotationManager.HIGHLIGHT):[],qa=ma?KindleReaderAnnotationManager.getAnnotationsInRange(ma.start,ma.end,KindleReaderAnnotationManager.NOTE):[],Oa,Da=KindleModuleManager.getModuleSync(KindleModuleManager.RESOURCE_BUNDLE).getUserLanguageCulture();dictionary.getDictionary().then(function(ra){Oa=ra.isLanguageSupported(Da);pa();KindleHostDeviceDetector.isiOS()?Ea.bind("touchstart.contextMenu",function(){KindleReaderContextMenu.hide();
KindleRenderer.clearSelection();Ea.unbind("touchstart.contextMenu")}):Ea.bind("mousedown.contextMenu",function(){KindleReaderContextMenu.hide();KindleRenderer.clearSelection();Ea.unbind("mousedown.contextMenu")})})}function Ca(E){function O(){d();KindleReaderAnnotationManager.deleteAnnotations([Y]).done(KindleRenderer.reloadAnnotations);ea.resolve("Delete")}var Y=KindleReaderAnnotationManager.getAnnotation(KindleReaderAnnotationManager.NOTE,E),ea=new jQuery.Deferred;KindleReaderEditNoteDialog.open(Y.note,
function(la){la?(KindleReaderAnnotationManager.modifyNote(Y.start,D(),la),ea.resolve("Save")):O()},O,function(){d();ea.resolve("Cancel")});return ea.promise()}function $a(){Aa.getSelection()||w(Ua.RIGHT,Ha.SWIPE);ta.onUserAction()}function Za(){Aa.getSelection()||w(Ua.LEFT,Ha.SWIPE);ta.onUserAction()}function Db(E){ta.onUserAction();var O=E.pageX-$("#kindleReader_content").offset().left;E=E.pageY-$("#kindleReader_content").offset().top;Pa&&0<O&&0<E&&!Aa.getSelection()&&(va(!0),Ub(O,E))}function Eb(E){Xa&&
(clearTimeout(Xa),Xa=null);var O=E.pageX-$("#kindleReader_content").offset().left;E=E.pageY-$("#kindleReader_content").offset().top;Pa&&0<O&&0<E&&!Aa.getSelection()&&KindleReaderZoomableManager.activateZoomableAtPosition(O,E);ta.onUserAction()}function sc(E){var O=E.originalEvent.touches[0].pageX-$("#kindleReader_content").offset().left;E=E.originalEvent.touches[0].pageY-$("#kindleReader_content").offset().top;if(!(Pa&&0<O&&0<E&&!Aa.getSelection()&&Ub(O,E)))ta.onUserAction()}function rc(){var E=this.x-
$("#kindleReader_content").offset().left,O=this.y-$("#kindleReader_content").offset().top;Pa&&0<E&&0<O&&!Aa.getSelection()&&KindleReaderZoomableManager.activateZoomableAtPosition(E,O);Xa&&(clearTimeout(Xa),Xa=null);ta.onUserAction()}function cc(){function E(){Xa=null;Pa&&0<ea&&0<la&&Ub(ea,la)||Aa.getSelection()||KindleHostDeviceDetector.isIE()&&qb||(ea<ha/4?w(Ua.LEFT,pa):ea>ha-ha/4?w(Ua.RIGHT,pa):KindleReaderContextMenu.wasVisible()||tb())}if(!(this.isTouchEvent||KindleHostDeviceDetector.isIE()&&
!qb)){var O=-1!==document.activeElement.id.indexOf("frame"),Y=$("#kindleReader_content"),ea=O?this.x:this.x-Y.offset().left,la=O?this.y:this.y-Y.offset().top,ha=Y.width(),pa=this.isTouchEvent?Ha.TAP:Ha.ARROW;!Xa&&KindleHostDeviceDetector.isiOS()?Xa=setTimeout(E,300):this.isTouchEvent&&E();ta.onUserAction()}}function ec(E){KindleReaderSitbPane.close();E=KindleRenderer.getSelection();var O=KindleRenderer.getPagePositionRange();E.start=Math.max(E.start,O.currentTopOfPage);E.end=Math.min(E.end,O.currentBottomOfPage);
KindleReaderContextMenu.hide();Wa({selection:E});Tb=!0}function dc(E){KindleReaderContextMenu.hide()}function Ub(E,O){var Y=!1;if(KindleDeviceCapabilities.useNativeSelection()&&!qb)return!1;if(KindleHostDeviceDetector.isIE()){var ea=$("#kindleReader_touchLayer");try{ea.hide(),Y=KindleRenderer.handleClick(E,O)}finally{ea.show()}}else Y=KindleRenderer.handleClick(E,O);return Y}function uc(){va(!1);clearTimeout(Ga);var E={};if(KindleModuleManager.isModuleInitialized(ua.ANNOTATION_MANAGER)){var O=KindleModuleManager.getModuleSync(ua.ANNOTATION_MANAGER);
O=O.getAnnotationsInRange(0,KindleRenderer.getMaximumPosition(),O.BOOKMARK);E[KindleReaderGoToMenu.MenuItemNames.bookmark]=0<O.length?KindlePopupMenu.ITEM_ENABLED:KindlePopupMenu.ITEM_DISABLED}cb.pageNumbers&&(E[KindleReaderGoToMenu.MenuItemNames.page]=KindlePopupMenu.ITEM_ENABLED);E&&KindleReaderGoToMenu.updateGoToMenu(E);KindleReaderGoToMenu.show()}function Sb(E){ja.emit("Reader::ClosedBy::"+(E||"Unknown"));Ra||wa.returnToLibrary?fc():(ub({from:Kindle.SampleToDetailPageButton.Close}),Vb=!0)}function vc(){Sb("Reader")}
function wc(){Sb("AppBar")}function xc(){clearTimeout(Ga);ta.pinBookToStart(ia.getAsin())}function yc(){KindleReaderHeaderBar.initialize(function(E){Ea.append(E);KindleReaderControls.registerComponent(E)},ta.isEmbeddedInWebsite())}function zc(){KindleReaderLocationBar.initialize(function(E){E.find("#kindleReader_progressbar_handle").mousedown(function(){clearTimeout(Ga)});Ea.append(E);KindleReaderControls.registerComponent(E)},function(E){x(E);KindleReaderMetrics.reportScrubberUsage()},oa.rtlPageAdvance)}
function gc(){var E=$(Handlebars.templates["KindleReaderBuyButton-MANGA_LIBRARY_KCR_INTEGRATION_332550"]());KindleReaderControls.registerComponent(E);Ea.append(E);setTimeout(function(){var O=$("#kindleReader_Buy_Full_Button").outerWidth();if(oa.rtlPageAdvance){var Y=oa.rtlPageAdvance?56:0;$("#kindleReader_footer_readerControls_middle").css("right",O+16+69+"px");$("#kindleReader_footer_readerControls_right").css("right",O+Y/2+"px")}else Y=KindleHostDeviceDetector.isiOS()?30:35,$("#kindleReader_footer_readerControls_middle").css("right",
O+Y+"px")},0)}function Ac(){$(document).keydown(S).keyup(W);KindleUXComponentManager.registerKeyEventsEnabledCallback(function(E){Qb=E})}function Bc(){function E(Y){clearTimeout(O);Y?O=setTimeout(Z,Y):Z();$("#kindleReader_annotations_pane").height($("body",Kindle.top.document).height()-212);$("#kindleReader_annotations_pane_scrollWrapper").height($("body",Kindle.top.document).height()-212)}var O;KindleWindowSizeWatcher.setMetricsContext("Reader");KindleHostDeviceDetector.isiOS()&&"onorientationchange"in
window?($("body",Kindle.top.document).bind("orientationchange",function(){Date.now();E(0)}),$("#kindleReader_content").on("resize",function(){E(0)}),KindleDeviceCapabilities.hasSplitView()&&KindleWindowSizeWatcher.startPolling()):window.onresize=function(){E(200)}}function pc(E,O){function Y(){Wb=!1;Aa.enable()}KindleHostDeviceDetector.isiOS()&&va(!1);E!==KindleReaderAnnotationManager.NOTE||Wb||(Wb=!0,Aa.disable(),Ca(O).then(function(ea){Y();ja.emit("Reader::Icon::"+ea)},Y))}function Cc(E){return KindleReaderAnnotationManager.getLPRGuid(ia.getRefEmId()).pipe(function(O){bb.doneReading({asin:ia.getAsin(),
isSample:ia.getIsSample(),kindleSessionId:ia.getKindleSessionId(),position:E,positionType:KindleReaderAnnotationManager.getPositionType(ia.getBookType()),localTimeOffset:KindleModuleManager.getModuleSync(KindleModuleManager.RESOURCE_BUNDLE).getLocalTimeOffset(),countryCode:KindleModuleManager.getModuleSync(KindleModuleManager.RESOURCE_BUNDLE).getFormatRegion(),refEmId:O})})}function qc(E){return KindleReaderAnnotationManager.getLPRGuid(ia.getRefEmId()).pipe(function(O){bb.resetLPR({asin:ia.getAsin(),
isSample:ia.getIsSample(),kindleSessionId:ia.getKindleSessionId(),position:E,positionType:KindleReaderAnnotationManager.getPositionType(ia.getBookType()),localTimeOffset:KindleModuleManager.getModuleSync(KindleModuleManager.RESOURCE_BUNDLE).getLocalTimeOffset(),refEmId:O})})}function hc(){fc()}function Cb(){ta.closeReader(ic)}function fc(){KindleRenderer.shutdown();ja&&(ja.getKindleStreamsManager().closeBook(),ja.uploadMetrics(!0),ic=ja.startMetrics("App::CloseReader"),Hb&&(ja.setMetricsUploadInterval(Hb),
Hb=null));var E=$.Deferred();E.resolve();oa.trackLpr&&(KindleReaderArrhythmicHeartBeatHandler.onReadingEnd(),KindleModuleManager.isModuleInitialized(ua.LPR_MANAGER)&&KindleModuleManager.isModuleInitialized(KindleModuleManager.SERVICE_CLIENT)&&(E=Cc(KindleModuleManager.getModuleSync(ua.LPR_MANAGER).getLastPositionRead())));E.then(function(){ia.doneReading();Cb()})}function Dc(E){E.queryText&&$("#kindleReader_search_field").val(E.queryText)}function Ec(){KindleReaderSearchBox.initialize({onfocus:function(){clearTimeout(Ga)}});
ReaderSitbManager.initialize(ja);ReaderSitbHighlight.initialize(KindleReaderOverlayManager)}function Fc(){I();aa();Qa();KindleHostDeviceDetector.isIE()&&ya();yc();KindleReaderImmersiveFooter.initialize(ja,na.getShowLocations());Ec();T();Ac();Bc();KindleHostDeviceDetector.isiOS()||$(window).focus(function(){bb.checkTokenConsistency()});if(KindleHostDeviceDetector.isPageVisibilityApiSupported()){var E=KindleHostDeviceDetector.getPageVisibilityApiTerms();document.addEventListener(E.visibilityChange,
function(){document[E.hidden]?ja.getKindleStreamsManager().hideBook():ja.getKindleStreamsManager().showBook();KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER).uploadMetrics()},!1)}else KindleHostDeviceDetector.isiOS()||($(window).focus(function(){ja.getKindleStreamsManager().showBook();KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER).uploadMetrics()}),$(window).blur(function(){ja.getKindleStreamsManager().hideBook();KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER).uploadMetrics()}))}
function jc(E){pb.done(function(){if(ia.isUpdated()){var O=ResourceBundle.getLocalizedString("k_L_openBookContentUpgrade_ButtonText");KindleMessageDialog.showError(Kindle.ERROR.CONTENT_UPGRADE,E,O)}else E()})}function Gc(E){function O(){rb||(rb=new KindleReaderSettings,rb.reset());c()||f()?rb.reset():rb.load();oa.showTitle||($("#kindleReader_title").hide(),$("#kindleReader_content").addClass("no_title"),$("#kindleReader_immersiveFooter").hide());hb===Kindle.AutoHideOption.Timed&&(Ga=setTimeout(function(){va(!0)},
5E3))}if(E&&E.asin)if(E.asin===Kindle.ERROR.OPEN_BOOK_ASIN_NOT_SPECIFIED)ta.isEmbeddedInWebsite()&&E.kcrFree?KindleReaderEmbeddedError.open(Kindle.ERROR.OPEN_BOOK_ASIN_NOT_SPECIFIED):KindleMessageDialog.showError(Kindle.ERROR.OPEN_BOOK_ASIN_NOT_SPECIFIED,Cb);else{wa=E;La=KindleReaderMetrics.startBookOpenTimer();ja.startSubTimer(La,"initialize");wa.readerClass&&!$("body").hasClass(wa.readerClass)&&$("body").addClass(wa.readerClass);wa.readerAppBar&&"hide"===wa.readerAppBar&&va(!0);hb=wa.autoHide;switch(hb){case Kindle.AutoHideOption.Auto:case Kindle.AutoHideOption.Off:break;
case Kindle.AutoHideOption.Timed:ta.isEmbeddedInWebsite()&&(hb=Kindle.AutoHideOption.Auto);break;default:hb=KindleHostDeviceDetector.isiOS()||ta.isEmbeddedInWebsite()?Kindle.AutoHideOption.Auto:Kindle.AutoHideOption.Timed;var Y="default"}Y="Reader::Chrome::AutoHide::"+(Y||hb);ja.emit(Y,{breakdown:["Partner"]});wa.closeButton===Kindle.Reader.CloseButtonNone&&KindleReaderControls.setDataActionVisible(KindleReaderControls.DataActions.Close,!1);kc=wa.standAlone;wa.kcrFree&&bb.getAuthenticationState()!==
Kindle.Service.AuthOK&&KindleReaderControls.setDataActionVisible(KindleReaderControls.DataActions.Sync,!1);sb&&KindleSpinner.show();ia=KindleReaderBookInfoProvider.BookInfo(wa,KindleModuleManager);ja.endSubTimer(La,"initialize");ja.startSubTimer(La,"ClickToGlass");pb=ia.startReading(La,Mb);pb.done(function(ea){Hb=ja.setMetricsUploadInterval(wa.kcrFree?ja.UploadInterval.Short:ja.UploadInterval.Default);var la=ea.getContext();Hc();la.isKaramel?KindleRenderer.setRenderer(KindleRenderer.KARAMEL):(KindleRenderer.setRenderer(KindleRenderer.STUCCO),
$b());Ic(wa.asin).done(function(){var ha=ea.getContext(),pa=a();ha.canOpen=!0;ha.errorCode=null;ha.isOnline=ea.isOpenedOnline();ha.asin=ea.getAsin();ha.bookType=pa&&pa.toLowerCase();ha.tutorialMaxShowCount=KindleReaderTutorial.getMaxShowCount(ha.bookType);ha.metadata=KindleModuleManager.getModuleSync(ua.BOOK_METADATA)||{};ta.onStartReadingStatus(ha);zc();O();ha.isSample&&gc();"FreeTrial"===ha.originType&&(KindleBadging.pushAsinForBadgeUpdate(ea.getAsin()),KindleFreeTrialHelper.handleFreeTrialExpiration(ha.expirationDate,
ea.getAsin()));KindleHostDeviceDetector.hasCanvasPerformanceProblem()?(Ab(ia.getBookType()),vb.then(function(ma){ma&&jc(V)})):jc(V);(c()||f())&&(fb.regionMagnification||ab.RegionMagnification)&&setTimeout(function(){KindleReaderTutorial.show(a())},3E3);kb(rb)})}).fail(bc);KindleModuleManager.getModule(ua.BOOK_METADATA).done(Jc);setTimeout(window.focus,0);KindleTouchEventsToggler.isRequired()&&Xb.done(function(){KindleTouchEventsToggler.allowTouchEvents()})}}function Jc(E){E.title&&($("#kindleReader_title").text(E.title),
$("#kindleReader_header_bar_title").text(E.title));E.authorList&&0<E.authorList.length&&(E=KindleAuthor.getDisplayableString(E.authorList),$("#kindleReader_header_bar_author").text(E))}function Kc(E){function O(ma,Ba){Y.forEach(function(qa){-1!==ma.indexOf(qa)&&(Ba[qa]=!0)})}var Y=["page-spread-left","page-spread-right","facing-page-left","facing-page-right"],ea="RegionMagnification book-type cover fixed-layout orientation-lock original-resolution page-progression-direction toc zero-gutter zero-margin double-page-spread facing-page".split(" "),
la={},ha={};E.publisherMetadata&&0<E.publisherMetadata.length&&E.publisherMetadata.forEach(function(ma,Ba){"string"!==typeof ma&&($.isArray(ma)?ma.forEach(function(qa){$.isArray(qa)&&2<=qa.length&&("meta"===qa[0]&&qa[1].hasOwnProperty("content")&&qa[1].hasOwnProperty("name")?ha[qa[1].name]=qa[1].content:"itemref"===qa[0]&&qa[1].hasOwnProperty("properties")&&O(qa[1].properties,ha))}):Object.keys(ma).forEach(function(qa){"xmlns:"!==qa.substring(0,6)&&(ha[qa]=ma[qa])}))});if(ha["page-spread-left"]||
ha["page-spread-right"])ha["double-page-spread"]=!0;if(ha["facing-page-left"]||ha["page-spread-right"])ha["facing-page"]=!0;for(var pa in ha)0<=$.inArray(pa,ea)&&(la[pa]=ha[pa]);return la}function Lc(E){var O=$.extend({},E);Object.keys(O).forEach(function(Y){var ea=O[Y];"string"===typeof ea&&(ea=ea.toLowerCase(),"true"===ea||"false"===ea)&&(O[Y]="true"===ea)});return O}function Ic(E){var O=new $.Deferred;ab={};fb={};oa=new ReaderOptions;$.when(KindleModuleManager.getModule(ua.BOOK_CONTEXT),KindleModuleManager.getModule(ua.BOOK_METADATA),
ia.getBookInfoDfd()).done(function(Y,ea){var la=ia.getBookType();ab=Kc(ea);ea.headerMetadata&&$.extend(fb,Lc(ea.headerMetadata));oa.rtlPageAdvance="rtl"===ab["page-progression-direction"]||fb.app_PrimaryWritingMode&&fb.app_PrimaryWritingMode.endsWith("rl");Y.isSample&&!Y.isOwned?oa.trackLpr=!1:KindleModuleManager.registerModuleWithDeferred(ua.LPR_MANAGER,KindleReaderLPRManager.initialize(E,ea));!KindleDeviceCapabilities.useNativeSelection()||f()||c()||Ja(la)?(ka(),$("#kindleReader_touchLayer").css("z-index",
200)):Fa();KindleRenderer.getRenderer()===KindleRenderer.KARAMEL&&$("#kindleReader_content").css("z-index",300);KindleHostDeviceDetector.isiOS()||U();I();if(Ja(la)||h()||!KindleDeviceCapabilities.multiColumnMode())oa.columns=1;if(c()||f())oa.selection=!1,oa.annotations=!1,oa.bookmarks=!1,oa.viewSettings=!1,oa.searchable=!1,oa.showTitle=!1;if(!0===ab["double-page-spread"]||!0===ab["facing-page"])oa.columns=2;oa.bookmarks||KindleReaderBookmarkOverlay.setVisible(!1);O.resolve()});return O.promise()}
function Mc(){function E(Y){return function(){d();Y.apply(this,arguments)}}var O=Sa===Kindle.CONTENT_TYPE.EBSP;KindleEventBroker.subscribe("reader_back",u);KindleEventBroker.subscribe("reader_show_goto",E(uc));KindleEventBroker.subscribe("reader_show_settings",E(Ib));KindleEventBroker.subscribe("reader_bookmark",E(O?q:ca));KindleEventBroker.subscribe("reader_show_notes",E(O?q:sa));KindleEventBroker.subscribe("reader_sync",E(Ra?Jb:q));KindleEventBroker.subscribe("reader_pin_metro",E(xc));KindleEventBroker.subscribe("reader_search",
Nc);KindleEventBroker.subscribe("reader_open_full_kcr",function(){ta.openFullKCR({asin:ia.getAsin()});ja.emit("App::Launch::Logo",{breakdown:["Partner"]})});KindleEventBroker.subscribe("reader_buy_full_book",function(){ub({from:Kindle.SampleToDetailPageButton.Buy});ja.emit("Reader::Sample::Buy::"+(Ra?"Owned":"NotOwned")+"::BuyFullVersionButton",{breakdown:["Partner"]})});KindleEventBroker.subscribe("immersive_icon",function(){va(!1)})}function $b(){lc||KindleModuleManager.getModule(ua.BOOK_CONTEXT).done(function(E){lc=
!0;Sa=E.contentType;Sa===Kindle.CONTENT_TYPE.EBOK&&(KindleModuleManager.registerModuleWithDeferred(ua.ANNOTATION_MANAGER,KindleReaderAnnotationManager.deferredInitialize(pb,KindleModuleManager)),KindleModuleManager.getModule(ua.ANNOTATION_MANAGER).done(KindleReaderMetrics.notifyAnnotationsReady));Mc()})}function Hc(){KindleModuleManager.getModule(ua.BOOK_CONTEXT).done(function(E){Ra=E.isOwned;wa.closeButton===Kindle.Reader.CloseButtonAuto&&(E=Ra||wa.returnToLibrary?ResourceBundle.getLocalizedString("k_R_toolbar_library_button-MANGA_LIBRARY_KCR_INTEGRATION_332550"):
ResourceBundle.getLocalizedString("k_R_toolbar_iOS_sample_close_button"),KindleReaderHeaderBar.setCloseButtonText(E));KindleEventBroker.subscribe("reader_close",vc);KindleEventBroker.subscribe("reader_close_appbar",wc)})}function bc(E,O){function Y(){var pa=E.getContext()||{};pa.canOpen=!1;pa.errorCode=ha.errorCode;pa.subErrorCode=ha.subErrorCode;pa.isOnline=E.isOpenedOnline();pa.asin=ha.asin;ta.onStartReadingStatus(pa)}function ea(){var pa=ha.errorCode;ha.subErrorCode&&(pa={name:ha.errorCode,code:ha.subErrorCode});
return pa}O=O||{};var la=E.getContext(),ha={errorCode:O.openError||E.getOpenError(),subErrorCode:O.openSubError,asin:O.asin||E.getAsin(),contentType:la&&la.contentType,bookType:la&&la.format&&la.format.toLowerCase()};KindleReaderMetrics.reportBookOpenFailure(ha);mc||ha.errorCode===KindleModuleManager.ERROR_CODE_CANCEL||(mc=!0,kc?(O=ea(),ta.isEmbeddedInWebsite()&&wa.kcrFree?KindleReaderEmbeddedError.open(ha.errorCode):KindleMessageDialog.showError(O,Y),KindleSpinner.hide()):Y())}function nc(){oa.bookmarks&&
(KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.Bookmark,!0),ba());oa.annotations&&KindleReaderControls.setDataActionEnabled(KindleReaderControls.DataActions.ShowNotes,!0);KindleRenderer.reloadAnnotations();var E={readerControls:{goToPosition:v,onAnnotationsUpdated:function(){ba();KindleRenderer.reloadAnnotations()},hostShowAnnotations:ta.showAnnotations},annotationManager:KindleModuleManager.getModuleSync(ua.ANNOTATION_MANAGER),pageLabelConverter:db};ReaderAnnotationsDisplay.initialize(E)}
function Oc(){KindleTouchEventsToggler.isRequired()&&KindleTouchEventsToggler.deInitialize();ja.getKindleStreamsManager().closeBook();KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER).uploadMetrics(!0)}function Pc(){Ob=!0;KindleDeviceCapabilities.hasSplitView()&&KindleWindowSizeWatcher.stopPolling()}function Qc(){Ob=!1;Pb&&Z();KindleDeviceCapabilities.hasSplitView()&&KindleWindowSizeWatcher.startPolling()}function Rc(E,O,Y){KindleOffline.removeBook(E,O,Y)}function Nc(){var E=
{},O=KindleReaderSearchBox.getSearchText();O&&ta.searchContent&&(E.queryText=O,E.curPosition=D(),E.asin=ia.getAsin(),db(E.curPosition).then(function(Y){E.curLocation=Y.loc;E.curPageNumber=Y.pageNumber;ta.searchContent(E)}));O&&(E.goToPosition=function(Y){Y&&(Y.searchHighlights&&ReaderSitbHighlight.set(Y.searchHighlights),v(Y.position),Y.isMarker?ja.emit("SITB::GotoCurrentLocation"):ja.emit("SITB::GotoResult"))},E.bookInfo=ia,E.pageLabelConverter=db,E.locationConverter=Ka,ReaderSitbManager.searchContent(E))}
function Sc(E){Yb||(Yb=SearchContextProvider.getContextProvider({pageLabelConverter:db,locationConverter:Ka}));return Yb.getContext(E)}function Tc(E){function O(la){function ha(ma){var Ba=db(ma);Ba.done(function(qa){ea.location[ma]=qa.loc;ea.page[ma]=qa.pageNumber});return Ba}if(la>=E.positions.length)Y.resolve(ea);else{do var pa=ha(E.positions[la++]);while(la<E.positions.length&&"pending"!==pa.state());pa.done(function(){O(la)})}}var Y=$.Deferred(),ea={location:{},page:{}};O(0);return Y.promise()}
function Uc(){sb.setReaderInterface({goToPosition:v,goToLocation:x,goToPage:t,openBook:Gc,unloadReader:Oc,onStoreOpenStatus:Vc,pauseReader:Pc,resumeReader:Qc,setToolbarVisible:function(E){va(!E)},toggleToolbar:tb,setFocus:function(){setTimeout(window.focus,0)},removeBook:Rc,getSelectedText:function(E){return KindleReaderClippingManager.getSelectedText(E)},hideContextMenu:function(){KindleReaderContextMenu.hide()},getSearchContext:Sc,convertPositions:Tc,updateAnnotations:function(E){E=KindleReaderAnnotationManager.updateAnnotations(E);
E.done(function(){KindleRenderer.reloadAnnotations();ba()});return E},updateReaderChrome:Dc})}function Vc(E){KindleSpinner.hide();E===Kindle.STORE.GENERIC_ERROR?Vb?KindleMessageDialog.showError(Kindle.ERROR.STORE_OPEN_FAILED,hc):KindleMessageDialog.showError(Kindle.ERROR.STORE_OPEN_FAILED):E===Kindle.STORE.OFFLINE_ERROR&&(Vb?KindleMessageDialog.showError(Kindle.ERROR.STORE_OPEN_OFFLINE_FAILED,hc):KindleMessageDialog.showError(Kindle.ERROR.STORE_OPEN_OFFLINE_FAILED))}function ub(E){KindleSpinner.show();
E.asin=ia.getAsin();ta.openStore(E)}function db(E){var O=$.Deferred(),Y={};cb.pageNumbers&&(Y.pageNumber=Ta.pageNumberFromPosition(E));(function(){Ka.locationFromPosition(E).done(function(ea){(c()||f())&&ea++;Y.loc=ea;O.resolve(Y)},function(ea){O.resolve(Y)})})();return O.promise()}var vb,wa={},na,rb,Zb,Xb,ia,pb,oa,ab={},fb={},gb=null,Ka,Ta,Yb,Pa=!1,Nb,Ma=!1,Ga=null,Qb=!0,Rb,La,ic,sb,ta,ja,Hb,bb,ob=!0,Vb=!1,kc=!1,mc=!1,Ob=!1,Pb=!1,nb=[],Aa=null,wb=null,Tb=!1,Ea=null,Kb,Xa=null,ac=!1,qb=!1,Sa=null,
Ra=!1,oc,lc=!1,Mb=null,ua={ANNOTATION_MANAGER:"annotation_manager",LPR_MANAGER:"lpr_manager",BOOK_METADATA:"book_metaData",BOOK_CONTEXT:"book_context",SearchIndexManager:"SearchIndexManager"},Ha={KEY:"keyboard",ARROW:"arrow",TAP:"tap",SWIPE:"swipe",WHEEL:"wheel"},Ua={LEFT:"left",RIGHT:"right"},hb,mb=!1,Lb=!0,cb={location:!0,percentage:!0,pageNumbers:!1},Bb,Wb=!1;return{initialize:function(){Xb=new jQuery.Deferred;vb=new jQuery.Deferred;sb=window.parent.KindleApp;Nb=new jQuery.Deferred;Mb=new jQuery.Deferred;
KindleTouchEventsToggler.isRequired()&&KindleTouchEventsToggler.initialize();sb&&(na=new KindleReaderSettings,na.reset(),na.load(),Aa=KindleSelectionStateManagerFactory(),Aa.addEventListener(Aa.SELECTION_CHANGED_EVENT,e),Aa.addEventListener(Aa.PROCESS_SELECTION_EVENT,Wa),wb=KindleSelectionHelper(KindleRenderer.getPageSelectableItemBoundaries),KindleReaderSelectionRenderer.initialize(wb),KindleReaderOverlayManager.setSelectionManager(Aa),Ea=$("#kindleReader_book_container"),$("body").bind("touchmove.elastic",
KindleIOSScrollStopper.stopScroll),KindleHostDeviceDetector.hasiOSInnerHeightBug()&&$("body").addClass("iosInnerHeightBug"),KindleHostDeviceDetector.isiOSAppMode()&&$("body").addClass("iOSAppMode"),ta=sb.getAppInterfaceForReader(),KindleInterfaces.assertImplements(ta,KindleInterfaces.IKindleAppForReader),sb.getSharedModules().done(function(E){Kindle=E[KindleModuleManager.CONSTANTS];ResourceBundle=E[KindleModuleManager.RESOURCE_BUNDLE];KindleTemplateManager.initialize();KindleModuleManager.registerModuleList(E);
ja=E[KindleModuleManager.METRICS_MANAGER];bb=E[KindleModuleManager.SERVICE_CLIENT];Fc();KindleDictionaryManager.setGetContextCallback(eb);Uc();ta.onReaderReady();E=KindleRenderer.PAGE_LOAD_INCOMPLETE_FLAG_NAME;KindleLocalStorage.getItem(E)&&(ja.emit("Reader::PageLoadIncomplete"),KindleLocalStorage.removeItem(E))}),KindleTouchEventsToggler.isRequired()&&KindleTouchEventsToggler.disallowTouchEvents());Xb.resolve()},gotoPosition:v,openStoreDP:ub,setDesktopImmersiveMode:va,leaveDesktopImmersiveMode:function(){va(!1)},
nextPage:B,prevPage:C,register:function(E,O){return ta.register(E,O)},deregister:function(E,O){return ta.deregister(E,O)},closeReader:Cb,getMaxPosition:k,getSelection:function(){return Aa.getSelection()||KindleRenderer.getSelection()},initializePageNumbers:P,getPNLabelFromLocation:function(E){var O=$.Deferred();return cb.pageNumbers?(Ka.positionFromLocation(E).done(function(Y){Y=Ta.pageNumberFromPosition(Y);O.resolve(Y)},function(Y){O.resolve()}),O.promise()):O.resolve()},getLocationFromPagelabel:function(E){if(Ta)return Ta.positionFromPageNumber(E)},
createBuyFullVersionButton:gc,disableBookReading:function(){Lb=!1},onSelect:ec,onClearSelection:d,getKaramelRendererOptions:function(){if(KindleRenderer.getRenderer()===KindleRenderer.KARAMEL)return KindleRendererKaramel.getRenderOptions()}}}
var KindleX=KindleReaderUI=KindleReaderUIFactory(),KindleReaderFreeTrialExpiredDialog=function(){function q(){KindleUXComponentManager.closeDialog("KindleReaderFreeTrialExpiredDialog");KindleReaderUI.closeReader()}function m(){(function(){var u=$.Deferred();KindleMessageDialog.open(ResourceBundle.getLocalizedString(c.TEXT_LABEL_DIALOG_DELETE_FREE_TRIAL_TITLE),ResourceBundle.getLocalizedString(c.TEXT_LABEL_DIALOG_DELETE_FREE_TRIAL_TEXT),null,null,[{buttonText:ResourceBundle.getLocalizedString(c.TEXT_LABEL_DIALOG_DELETE_CANCEL_BUTTON),
callback:u.reject},{buttonText:ResourceBundle.getLocalizedString(c.TEXT_LABEL_DIALOG_DELETE_BUTTON),callback:u.resolve}]);return u.promise()})().done(function(){d=KindleModuleManager.getModuleSync(KindleModuleManager.SERVICE_CLIENT);a=KindleModuleManager.getModuleSync(KindleModuleManager.DB_CLIENT);d.removeOwnership(e,"EBOK").done(function(){var u=[{asin:e}];a.getAppDb().updateBookData(u,[]).done(g)}).fail(function(){KindleMessageDialog.showError(Kindle.ERROR.REVOKE_FAILED,q)})}).fail(function(){b(e)})}
function g(){a.getAppDb().getAllBooks().done(function(u){var x=[];u.forEach(function(t,v,r){if(void 0===t.title||void 0===t.authors)x.push({operation:Kindle.DB.DELETE_RECORD_OPERATION,tableName:"bookdata",params:[{asin:t.asin}]}),delete r[v]});0<x.length&&a.getAppDb().batchTransaction(x)});q()}function b(u){e=u;$("#kindleReader_footer").css("display","none");KindleReaderUI.disableBookReading();KindleUXComponentManager.openDialog("KindleReaderFreeTrialExpiredDialog",l,{_isRemovalForFreeTrialsEnabled:!1})}
var e=null,d,a,c={TEXT_LABEL_CANCEL_BUTTON:"k_endOfFreeTrial_cancel_button",TEXT_LABEL_BUYFULLVERSION_BUTTON:"k_endOfFreeTrial_buyfullversion_button",TEXT_LABEL_REMOVEBOOK_BUTTON:"k_endOfFreeTrial_removebook_button",TEXT_LABEL_END_OF_FREE_TRIAL_TITLE:"k_endOfFreeTrial_Title",TEXT_LABEL_END_OF_FREE_TRIAL_TEXT:"k_endOfFreeTrial_Text",TEXT_LABEL_DIALOG_DELETE_FREE_TRIAL_TITLE:"k_L_dialog_deleteFreeTrial_prompt_title",TEXT_LABEL_DIALOG_DELETE_FREE_TRIAL_TEXT:"k_L_dialog_deleteFreeTrial_prompt_text",TEXT_LABEL_DIALOG_DELETE_CANCEL_BUTTON:"k_L_dialog_delete_cancel",
TEXT_LABEL_DIALOG_DELETE_BUTTON:"k_L_dialog_delete"},f,h=function(){KindleUXComponentManager.closeDialog("KindleReaderFreeTrialExpiredDialog");KindleReaderUI.openStoreDP()},n=function(){KindleUXComponentManager.closeDialog("KindleReaderFreeTrialExpiredDialog");m()},l={getDialogSettings:function(){var u={};u[ResourceBundle.getLocalizedString(c.TEXT_LABEL_CANCEL_BUTTON)]=q;return{autoOpen:!1,modal:!0,draggable:!1,resizable:!1,buttons:u}},beforeDialogOpen:function(u){var x=ResourceBundle.getLocalizedString(c.TEXT_LABEL_END_OF_FREE_TRIAL_TITLE),
t=ResourceBundle.getLocalizedString(c.TEXT_LABEL_END_OF_FREE_TRIAL_TEXT);u.find("#kindleReader_dialog_freeTrialExpired_title").empty().append(x);u.find("#kindleReader_dialog_freeTrialExpired_text").empty().append(t)},onInitializationDone:function(u){f=u;f.find("#kindleReader_dialog_buyFullVersion_btn").click(h);f.find("#kindleReader_dialog_removeBook_btn").click(n)}};return{open:b}}();
function KindleFreeTrialHelper(){function q(f,h){var n=(new Date).getTime();if(n>f)KindleReaderFreeTrialExpiredDialog.open(h),b&&(window.clearInterval(d),b=!1);else{0===$("#"+c.FREE_TRIAL_MESSAGE_CONTAINER).length&&g();var l=m(f,n);document.getElementById(c.FREE_TRIAL_EXPIRATION_MESSAGE).innerHTML=l;document.getElementById(c.FREE_TRIAL_MESSAGE_CONTAINER).style.display="block";b||(e=f-n,0<f&&(d=window.setInterval(function(){q(f,h)},e),b=!0))}}function m(f,h){f=Math.floor((f-h)/864E5);return 1===f?
ResourceBundle.getLocalizedString(a.FREE_TRIAL_EXPIRES_TEXT_DAY):0===f?ResourceBundle.getLocalizedString(a.FREE_TRIAL_EXPIRES_IN_LESS_THAN_A_DAY):ResourceBundle.getLocalizedString(a.FREE_TRIAL_EXPIRES_TEXT_DAYS,{days:f})}function g(){var f=$(Handlebars.templates.KindleReaderFreeTrialMessageBar());$("#"+c.KINDLE_READER_HEADER).append(f);KindleReaderUI.createBuyFullVersionButton()}var b=!1,e=null,d,a={FREE_TRIAL_EXPIRES_MESSAGE:"k_freeTrialExpires_Message",FREE_TRIAL_EXPIRES_TEXT_DAY:"k_freeTrialExpires_Day",
FREE_TRIAL_EXPIRES_TEXT_DAYS:"k_freeTrialExpires_Days",FREE_TRIAL_EXPIRES_IN_LESS_THAN_A_DAY:"k_freeTrialExpires_less_than_a_day"},c={FREE_TRIAL_MESSAGE_CONTAINER:"freeTrial_message_container",FREE_TRIAL_EXPIRATION_MESSAGE:"freeTrial_expiration_message",KINDLE_READER_BUY_FULL_BUTTON:"kindleReader_Buy_Full_Button",KINDLE_READER_FOOTER_READER_CONTROLS_MIDDLE:"kindleReader_footer_readerControls_middle",KINDLE_READER_DOWNLOAD_PROGRESS:"kindleReader_download_progress",KINDLE_READER_FOOTER_READER_CONTROL_RIGHT:"kindleReader_footer_readerControls_right",
KINDLE_READER_BOOK_CONTAINER:"kindleReader_book_container",KINDLE_READER_HEADER:"kindleReader_header"};return{handleFreeTrialExpiration:q,freeTrialMessageImmersiveSlideUp:function(){0!==$("#"+c.FREE_TRIAL_MESSAGE_CONTAINER).length&&$("#"+c.FREE_TRIAL_EXPIRATION_MESSAGE).slideUp(200)},freeTrialMessageImmersiveSlideDown:function(){0!==$("#"+c.FREE_TRIAL_MESSAGE_CONTAINER).length&&setTimeout(function(){$("#"+c.FREE_TRIAL_MESSAGE_CONTAINER).slideDown(200);$("#"+c.FREE_TRIAL_EXPIRATION_MESSAGE).slideDown(200)},
150)}}}KindleFreeTrialHelper=KindleFreeTrialHelper();
function KindleBadgingFactory(){return{drawBadge:function(q,m,g){var b=Math.PI/180,e=36/Math.sqrt(2),d=(e-10)/2,a=q.getContext("2d");a.fillStyle=g;a.beginPath();a.rotate(45*b);a.fillRect(0,0,500,-e);a.stroke();a.beginPath();a.fillStyle="#FFFFFF";a.font="10pt Helvetica";a.opacity=.95;a.fillText(m,q.width/2-(5<m.length?4*(m.length-5):0),-d);a.stroke()},createCanvasElement:function(){var q=document.createElement("canvas");q.className="canvas_for_badge";q.height=100;q.width=100;return q},pushAsinForBadgeUpdate:function(q){var m=
JSON.parse(KindleLocalStorage.getItem("listOfAsinsForBadging"));if(m){a:{for(g in m)if(m[g]===q){var g=!0;break a}g=!1}g||(m[m.length]=q,KindleLocalStorage.setItem("listOfAsinsForBadging",JSON.stringify(m)))}else m=[],m[0]=q,KindleLocalStorage.setItem("listOfAsinsForBadging",JSON.stringify(m))},addBadgeToBookContainer:function(q,m,g){g.find(".book_cover").append("<div class='book_image_container'></div>");g.find(".book_image").appendTo(g.find(".book_image_container"));var b=$("<div>").addClass("book_badge_container");
b.append(m);g.find(".book_image_container").append(b);g.find(".book_details").append(q);g.find(".canvas_for_badge").addClass("book_click_area")},adjustBadge:function(q){q.find(".book_image_container").find(".book_click_area").hasClass("book_image_wide")&&q.find(".book_image_container").addClass("wide")},cloneCanvasForBadge:function(q){var m=document.createElement("canvas"),g=m.getContext("2d");m.width=q.width;m.height=q.height;m.className=q.className;g.drawImage(q,0,0);return m}}}
var KindleBadging=KindleBadgingFactory(),KindleReaderValidator=function(){return{validate:function(){function q(){function m(){window.top.location.reload(!0)}KindleModuleManager.getModule(KindleModuleManager.METRICS_MANAGER).done(function(g){g.emit("App::AssetDiscrepancy::Reader",{breakdown:["Browser"]}).then(m,m)})}KindleModuleManager.getModule(Kindle.MODULE.SERVICE_CLIENT).then(function(m){m.fileListVersion&&m.fileListVersion()===Kindle.App.FILE_LIST_VERSION||q()})}}}();KindleReaderValidator.validate();
var KindleRenderer=function(){var q,m,g=0,b=g++,e=g++,d=g++,a=g++,c=g++,f=g++,h=g++,n=g++,l=g++,u=g++;g=g++;return{setRenderer:function(x){0===x?(q=x,m=KindleRendererStucco):1===x&&(q=x,m=KindleRendererKaramel)},getRenderer:function(){return q},STUCCO:0,KARAMEL:1,STATUS_ERROR:b,STATUS_LOADING:e,STATUS_PAGINATING:d,STATUS_PAGINATED:a,STATUS_DONE:c,ERROR_LOAD_FAILURE:f,ERROR_CONTAINER_NOT_FOUND:h,ERROR_UNABLE_TO_GET_BOOK_CONTENT:n,ERROR_UNABLE_TO_GET_WORD_RECTS:l,ERROR_TIMEOUT_WHILE_LOADING_BOOK_CONTENT:u,
ERROR_UNKNOWN:g,initialize:function(x,t,v,r){m.initialize(x,t,v,r)},shutdown:function(){m.shutdown()},getMinimumPosition:function(){return m.getMinimumPosition()},getMaximumPosition:function(){return m.getMaximumPosition()},createWordIterator:function(){return m.createWordIterator()},updateSettings:function(x){m.updateSettings(x)},gotoPosition:function(x){m.gotoPosition(x)},nextScreen:function(){return m.nextScreen()},previousScreen:function(){return m.previousScreen()},hasNextScreen:function(){return m.hasNextScreen()},
hasPreviousScreen:function(){return m.hasPreviousScreen()},getPagePositionRange:function(){return m.getPagePositionRange()},getPageSelectableItemBoundaries:function(){return m.getPageSelectableItemBoundaries()},getPageWordPositions:function(){return m.getPageWordPositions()},onWindowResize:function(){m.onWindowResize()},handleClick:function(x,t){m.handleClick(x,t)},reloadAnnotations:function(){m.reloadAnnotations()},getContentRects:function(){return m.getContentRects()},getZoomableAt:function(x,t){return m.getZoomableAt(x,
t)},getZoomableList:function(){return m.getZoomableList()},clearSelection:function(){m.clearSelection()},getSelection:function(){return m.getSelection()},getAnnotationMetadata:function(){return m.getManifest().then(function(x){return x?{acr:x.acr,format:x.bookFormat}:null})},getManifest:function(){var x=new $.Deferred;m.getManifest().then(function(t){x.resolve(t)});return x},getLocationMap:function(){return m.getLocationMap()}}}(),KindleRendererAnnotationRenderer=function(){function q(){var d={};
return function(a,c){if(void 0!==d[a])return d[a];c=c[a];if(!c)return d[a]=!1;if("IMG"===c.tagName)return d[a]=!0;for(;"BODY"!==c.tagName;){var f=$(c);if(f){var h=f.css("background-color");f=f.css("background-image");if(h&&"rgba(0, 0, 0, 0)"!==h&&"transparent"!==h||f&&"none"!==f)return d[a]=!0;c=c.parentNode}}return d[a]=!1}}function m(d){var a={};$(d).find("[data-nid]").each(function(c,f){a[f.getAttribute("data-nid")]=f});return a}function g(d,a,c,f){d.style.top=a.top+"px";d.style.height=a.height+
"px";d.style.left=a.left+"px";d.style.width=a.width+"px";d.className=c?f+" semiTransparentOverlay":f}function b(d,a,c,f,h,n){var l=d.contentDocument,u=l.createElement("DIV"),x=!1,t=!1,v={isNewLine:!0,isImageBound:!1,lineBounds:{top:0,height:0,left:0,right:0,width:0}},r=!1,k=!0;c.sort(function(D,F){return d.writingMode.clientRectCompare(D.rect,F.rect)});for(var y=c.length,w=0;w<y;w+=1){var z=c[w].dataNid;x||"string"===typeof z&&n(z,h)&&(x=!0);k=c[w].rect;var A=void 0;z=h[z];var B=void 0,C=!1;w<y-1&&
(A=c[w+1].rect,B=h[c[w+1].dataNid],t=n(c[w+1].dataNid,h));z&&B&&(C="IMG"===z.tagName||x,r="IMG"===z.tagName!==(void 0!==B?"IMG"===B.tagName:!1)||t!==x);if(k=d.writingMode.updateDivIfNewLineOrImageBound(v,k,A,C,r,l.width))g(u,v.lineBounds,x,f),a.appendChild(u),u=l.createElement("DIV"),k=x=!1}}function e(d,a){void 0!==a&&(void 0!==a.clickable&&d.setAttribute("data-annotationClickable",a.clickable),void 0!==a.feedbackAnimation&&d.setAttribute("data-annotationClickFeedback",a.feedbackAnimation))}return{DRAW_AFTER:"after",
DRAW_OVER:"over",ANNOTATION_CLICK_ATTRIBUTE:"data-annotationClickable",ANNOTATION_CLICK_FEEDBACK_ATTRIBUTE:"data-annotationClickFeedback",createAnnotationElements:function(d,a,c,f,h){var n=[];if(null!==f)for(var l=KindleRendererSettings.getSettings().annotationStyles,u=KindleRendererSettings.getSettings().annotationClick,x,t,v,r=m(d.contentDocument),k=q(),y=0;y<f.length;y+=1)if(t=f[y],x=t.type,l[x]){v=u?u[x]:void 0;var w=l[t.type].className;if(t.additionalStyles)for(var z in t.additionalStyles)w+=
" "+t.additionalStyles[z];if("over"===l[x].drawingType){x=d;var A=h,B=a,C=t,D=v;v=r;var F=k;t=x.contentDocument.createElement("DIV");t.setAttribute("annotationType",C.type);t.setAttribute("annotationStart",C.start);e(t,D);B=KindleRendererWordRectsHelper.createWordBoundaries(C,B,x.contentDocument,x.contentWindow,x.writingMode);b(x,t,B,w,v,F);A.appendChild(t);x=t}else if("after"===l[x].drawingType){x=void 0;C=d;A=h;B=a;F=c;D=v;v=t.start;var M=-1;for(F.addBoundsForPosition(C.contentDocument,B,v,C.writingMode);void 0===
B[v]&&100>M;)v=t.start+M,F.addBoundsForPosition(C.contentDocument,B,v,C.writingMode),M+=1;void 0!==B[v]&&(x=C.contentDocument.createElement("DIV"),x.setAttribute("annotationType",t.type),x.setAttribute("annotationStart",t.start),e(x,D),F=x,v=B[v].rects[B[v].rects.length-1],B=w,w=C.contentDocument,t=w.createElement("DIV"),C.writingMode.positionDivAfterWord(t,v,"px",w.width),t.className="note-annotation "+B,F.appendChild(t),A.appendChild(x))}else x=null;x&&n.push(x)}return n},removeAnnotationElements:function(d,
a){$(d).children('[annotationtype="'+a.type+'"][annotationstart="'+a.start+'"]').remove()}}}(),KindleRendererStucco=function(){function q(A,B,C){A={status:A};void 0!==B&&(A.errorCode=B);void 0!==C&&(A.errorMsg=C);void 0!==y&&y(A)}function m(A,B){q(KindleRenderer.STATUS_ERROR,A,B?B:"no msg")}function g(){k=r=!1;q(KindleRenderer.STATUS_PAGINATING)}function b(){null!==w&&(w.endTimer(),w.log(),w=null);r=!0;q(KindleRenderer.STATUS_PAGINATED)}function e(){k=!1}function d(){k=!0;q(KindleRenderer.STATUS_DONE)}
function a(A){k=!1;m(KindleRenderer.ERROR_UNABLE_TO_GET_WORD_RECTS,A)}function c(A){r=!1;m(KindleRenderer.ERROR_UNABLE_TO_GET_BOOK_CONTENT,A)}function f(A){A=parseInt(A,10);isNaN(A)&&(A=0);return KindleRendererContentDisplay.gotoPosition(A,!0)}function h(){return setTimeout(function(){v||(t=!0,m(KindleRenderer.ERROR_LOAD_FAILURE,"Init timed out"))},x)}function n(A){clearTimeout(A);return h()}function l(A,B,C,D){null===w&&(w=KindleMetricsProfiler("Renderer-Load"));y=C.statusCallback;C.contentInterfaceCallbacks&&
KindleRendererContentScripts.setCallbacks(C.contentInterfaceCallbacks);t=!1;if(A){if(!A.bookInfo||!A.containerId)throw{name:"initializationError",message:"required parameters not present"};z=$(document.getElementById(A.containerId));if(0===z.length)m(KindleRenderer.ERROR_CONTAINER_NOT_FOUND,"Container not found");else{q(KindleRenderer.STATUS_LOADING);KindleRendererDeviceSpecific.initialize();x=KindleRendererDeviceSpecific.rendererInitializationTimeout();var F=h();KindleRendererFragmentLoader.initialize(A.bookInfo).then(function(){t||
(F=n(F),KindleRendererSettings.initialize(A.bookInfo).then(function(){if(!t){F=n(F);KindleRendererPositionLoadingCalculator.updateScreenDimensions(z.width(),z.height());var M={waitNotification:g,readyNotification:b,rectsWaitNofification:e,rectsReadyNotification:d,rectsErrorNotification:a,errorNotification:c,annotationTriggered:C.annotationEventCallback};A.startingPositionDfd.done(function(N){t||(F=n(F),KindleRendererContentDisplay.initialize(z.get(0),M,A.bookInfo,D,N).then(function(){t||(KindleRendererSettings.updateSettings(B),
KindleGlyphRenderer.updateSettings(B),KindleRendererContentDisplay.updateSettings(B),v=!0,f(N))},function(L){t||m(KindleRenderer.ERROR_LOAD_FAILURE,"Load Failure: "+L)}))})}},function(){t||m(KindleRenderer.ERROR_LOAD_FAILURE,"Load Failure: Metadata")}))},function(M){t||m(KindleRenderer.ERROR_LOAD_FAILURE,"Load Failure: "+M)})}}}function u(){if(!v)throw{name:"initializationError",message:"Please call KindleRenderer.initialize function first"};}var x=12E4,t=!1,v=!1,r=!1,k=!1,y=void 0,w=null,z=null;
console.log("KindleRendererStucco created");return{PAGE_LOAD_INCOMPLETE_FLAG_NAME:"PageLoadIncomplete",initialize:function(A,B,C,D){try{l(A,B,C,D)}catch(F){}},shutdown:function(){try{v&&(v=!1,KindleRendererContentDisplay.cleanup(),KindleGlyphRenderer.cleanup(),KindleRendererCanvasInsertion.cleanup())}catch(A){}},getMinimumPosition:function(){u();return KindleRendererFragmentLoader.getMinimumPosition()},getMaximumPosition:function(){u();return KindleRendererFragmentLoader.getMaximumPosition()},createWordIterator:function(){u();
try{return KindleRendererWordIteratorFactory.build()}catch(A){}return null},updateSettings:function(A){try{KindleRendererSettings.updateSettings(A),KindleGlyphRenderer.updateSettings(A),KindleRendererContentDisplay.updateSettings(A)}catch(B){return!1}},gotoPosition:function(A){u();try{return f(A)}catch(B){}return!1},nextScreen:function(){u();try{if(r)return KindleRendererContentDisplay.nextScreen()}catch(A){}return!1},previousScreen:function(){u();try{if(r)return KindleRendererContentDisplay.previousScreen()}catch(A){}return!1},
hasNextScreen:function(){u();try{if(r)return KindleRendererContentDisplay.hasNextScreen()}catch(A){}return!1},hasPreviousScreen:function(){u();try{if(r)return KindleRendererContentDisplay.hasPreviousScreen()}catch(A){}return!1},getPagePositionRange:function(){u();try{if(r)return KindleRendererContentDisplay.getPagePositionRange()}catch(A){}return null},getPageSelectableItemBoundaries:function(){u();try{if(k)return KindleRendererContentDisplay.getSelectableItemBoundaries()}catch(A){}return null},getPageWordPositions:function(){u();
try{if(k)return KindleRendererContentDisplay.getWordPositions()}catch(A){}return null},onWindowResize:function(){},handleClick:function(A,B){try{if(r)return KindleRendererContentDisplay.handleClick(A,B)}catch(C){}return null},reloadAnnotations:function(){try{r&&KindleRendererContentDisplay.reloadAnnotations()}catch(A){}},getContentRects:function(){u();try{if(r)return KindleRendererContentDisplay.getContentRects()}catch(A){}return null},getZoomableAt:function(A,B){u();try{if(r)return KindleRendererContentDisplay.getZoomableAt(A,
B)}catch(C){}return null},getZoomableList:function(){u();try{if(r)return KindleRendererContentDisplay.getZoomableList()}catch(A){}return null},clearSelection:function(){if(v)try{r&&KindleRendererContentDisplay.clearSelection()}catch(A){}},getSelection:function(){u();try{if(r)return KindleRendererContentDisplay.getSelection()}catch(A){}},getManifest:function(){return new Promise(function(A,B){A(null)})}}}(),KindleRendererWordIteratorFactory=function(){function q(e,d,a,c){for(var f=!0;f;){f=e.getItem();
if(f.pos>d){c.resolve(a);return}a+=f.text;f=e.next()}e.getLoadingDfd().then(function(h){h?q(e,d,a,c):c.resolve(a)},c.reject)}function m(e){e.cancelCurrentRequest=function(){this.currentRequest&&(this.currentRequest=null)};e.newRequest=function(d,a,c){this.cancelCurrentRequest();this.currentRequest={requestId:KindleRendererRequestId.getUniqueRequestId(),metrics:KindleMetricsProfiler("word-iterator-load"),position:d,stopPosition:a,direction:c}};e.newRequestDfd=function(){this.currentRequestDfd=new jQuery.Deferred;
this.currentRequestReachedTerminal=!1};e.fragmentLoadedCallback=function(d){var a=this;a.loadedRange=d.contentRange;a.wordMapGenerator.createWordMap(d.fragmentRoot,d.positionData).then(function(c){a.createPositionInfo(c)},function(){a.currentRequestDfd.reject()})};e.calculateContinuePosition=function(d){return"prev"===d?this.loadedRange.startPosition-1:this.loadedRange.endPosition+1};e.hasReachedStopPosition=function(d){if(this.currentRequest&&void 0!==this.currentRequest.stopPosition){var a=this.currentRequest.direction,
c=this.currentRequest.stopPosition;d=d?this.positions[this.currPositionIndex]:this.calculateContinuePosition(a);return"prev"===a&&d<c||d>c}return!1};e.createPositionInfo=function(d){this.wordMap=d;d=this.currentRequest.direction;this.positions=[];for(var a in this.wordMap)this.positions.push(parseInt(a,10));this.positions.sort(function(c,f){return c-f});a=this.findPosition(this.currentRequest.position,d);this.hasReachedStopPosition(a)?this.currentRequestDfd.reject():a?(this.currentRequest=null,this.currentRequestDfd.resolve(!this.currentRequestReachedTerminal)):
"prev"===d&&this.startPositionIsLoaded()||this.endPositionIsLoaded()?this.currentRequestReachedTerminal?this.currentRequestDfd.reject():(this.currentRequestReachedTerminal="goto"!==d,d="prev"===d?"next":"prev",this.beginLoad(this.calculateContinuePosition(d),this.currentRequest.stopPosition,d)):this.beginLoad(this.calculateContinuePosition(d),this.currentRequest.stopPosition,d)};e.findPosition=function(d,a){this.currPositionIndex=KindleListUtilities.binarySearch(this.positions,d);if("prev"===a)return d>=
this.positions[0];this.positions[this.currPositionIndex]<d&&++this.currPositionIndex;return this.currPositionIndex<this.positions.length};e.beginLoad=function(d,a,c){var f=this;f.newRequest(d,a,c);d=KindleRendererFragmentLoader.getFragmentIdForPosition(d,"prev"===c);KindleRendererFragmentLoader.getFragmentAtId(d,f.currentRequest).then(function(h,n){f.currentRequest&&f.currentRequest.requestId===h.requestId&&f.fragmentLoadedCallback(n)},function(){f.currentRequestDfd.reject()})};e.gotoPosition=function(d,
a){this.newRequestDfd();if(null===this.currentRequest&&null!==this.loadedRange&&d>=this.loadedRange.startPosition&&d<this.loadedRange.endPosition&&this.findPosition(d,"goto"))return this.currentRequestDfd.resolve(!0),this.currentRequestDfd.promise();this.beginLoad(d,a,"goto");return this.currentRequestDfd.promise()};e.getItem=function(){if(null===this.currentRequest){var d=this.positions[this.currPositionIndex];return{pos:d,text:this.wordMap[d].text}}return null};e.previous=function(d){if(null===
this.currPositionIndex||null!==this.currentRequest)return!1;this.currPositionIndex--;return 0>this.currPositionIndex?(this.startPositionIsLoaded()?(this.currPositionIndex=0,this.newRequestDfd(),this.currentRequestDfd.resolve(!1)):(this.newRequestDfd(),this.beginLoad(this.loadedRange.startPosition-1,d,"prev")),!1):!0};e.next=function(d){if(null===this.currPositionIndex||null!==this.currentRequest)return!1;this.currPositionIndex++;return this.currPositionIndex>=this.positions.length?(this.endPositionIsLoaded()?
(this.currPositionIndex=this.positions.length-1,this.newRequestDfd(),this.currentRequestDfd.resolve(!1)):(this.newRequestDfd(),this.beginLoad(this.loadedRange.endPosition+1,d,"next")),!1):!0};e.getLoadingDfd=function(){return this.currentRequestDfd.promise()};e.startPositionIsLoaded=function(){return this.loadedRange.startPosition<=KindleRendererFragmentLoader.getMinimumPosition()};e.endPositionIsLoaded=function(){return this.loadedRange.endPosition>=KindleRendererFragmentLoader.getMaximumPosition()}}
function g(e,d){e.getItem=function(){return d.getItem()};e.previous=function(a){return d.previous(a)};e.next=function(a){return d.next(a)};e.getLoadingDfd=function(){return d.getLoadingDfd()};e.gotoPosition=function(a,c){a=Math.max(a,KindleRendererFragmentLoader.getMinimumPosition());a=Math.min(a,KindleRendererFragmentLoader.getMaximumPosition());return d.gotoPosition(a,c)};e.getText=function(a,c){var f=this,h=new jQuery.Deferred;f.gotoPosition(a).then(function(){q(f,c,"",h)},h.reject);return h.promise()};
e.clear=function(){b(d)}}function b(e){e.currentRequest=null;e.currentRequestDfd=null;e.currentRequestReachedTerminal=null;e.loadedRange=null;e.wordMap=null;e.positions=null;e.currPositionIndex=null}return{build:function(){var e={};e.wordMapGenerator=KindleRendererWordMapGeneratorFactory.buildWordMapGeneratorForWordText();b(e);m(e);var d={};g(d,e);return d}}}(),KindleRendererCanvasInsertion=function(){function q(d,a){for(;d<a.length;d++){a[d].innerHTML="";a[d].width=0;for(var c=a[d].attributes.length;0<=
--c;)a[d].removeAttribute(a[d].attributes[c].nodeName)}}function m(d,a,c,f){var h=a.getElementsByTagName("html")[0],n=a.getElementsByTagName("body")[0],l=Array.prototype.slice.call(n.getElementsByClassName("k4wc"));if(0<l.length){h.removeChild(n);var u=l.length,x=KindleRendererDeviceSpecific.maximumCanvases();b[d]=0;var t=null;g[d]||(g[d]=[]);var v=function(k){k=l[k];if(b[d]>=x)if(k.parentNode.removeChild(k),k=parseInt(k.id,10),f){if(null===t||k>t)t=k}else{if(null===t||k<t)t=k}else{var y=e(d,a);y.id=
k.id;y.setAttribute("height",k.getAttribute("height"));y.setAttribute("width",k.getAttribute("width"));y.setAttribute("data-nid",y.id);y.innerHTML=k.innerHTML;k.parentNode.replaceChild(y,k)}},r;if(f)for(r=u-1;0<=r;r--)v(r);else for(r=0;r<u;r++)v(r);null!==t&&(u=KindleMetricsProfiler("remove-extra-canvases"),f?($(n).find("*").filter(function(){return parseInt(this.getAttribute("id"),10)<t}).remove(),c.startPosition<=t&&(c.startPosition=t+1)):($(n).find("*").filter(function(){return parseInt(this.getAttribute("id"),
10)>t}).remove(),c.endPosition>=t&&(c.endPosition=t-1)),u.endTimer(),u.log());q(b[d],g[d]);h.appendChild(n)}}var g=[],b=[],e=function(){return window.ActiveXObject&&window.XMLHttpRequest?function(d,a){return a.createElement("CANVAS")}:function(d,a){b[d]++;var c=b[d];d=g[d];c>d.length?(a=a.createElement("CANVAS"),d[c-1]=a):a=d[c-1];return a}}();return{changeSpanToCanvas:function(d,a,c,f){m(d,a,c,f)},cleanup:function(){for(var d in g)for(var a=g[d],c=a.length,f=0;f<c;f+=1){var h=a[f],n=h.parentNode;
null!==n&&void 0!==n&&n.removeChild(h)}g=null}}}(),KindleGlyphRenderer=function(){function q(v,r,k,y,w,z,A,B){r=r[y.imgSrc];if(k.getContext&&void 0!==r){var C=new Image,D=y.o;D||(D=[0,0]);C.onload=function(){if(v===u){var F=D,M=k,N=M.getContext("2d"),L=F[0]*w/1440;F=F[1]*w/1440;var P={x:L,y:F,w:this.width*z,h:this.height*z};A[M.id]||(A[M.id]=[]);M=A[M.id];M[M.length]=P;N.translate(L,F);N.scale(z,z);N.drawImage(this,0,0);N.scale(1/z,1/z);N.translate(-L,-F);k=null}setTimeout(B,25)};C.src=r;y=r=r=null}else setTimeout(B,
10)}function m(v,r,k,y){if(r.getContext){var w=k.o;w||(w=[0,0]);var z=r.getContext("2d");z.translate(w[0]*y/1440,w[1]*y/1440);z.fillStyle=g(r);for(var A,B,C,D,F,M=k.l.length,N=0;N<M;N++){a:{F=k.l[N][0];for(A=0;A<v.length;A+=1)if(C=v[A].glyphFragmentMetadata,F>=C.startingGlyph&&F<=C.endingGlyph){F-=C.startingGlyph;A=v[A].glyphData[F];break a}A=null}if(null!==A){C=k.l[N][1]+k.p[0];D=k.l[N][2]+k.p[1];F=y/A.dpi;C=(C-k.p[0])*y/1440;D=(D-k.p[1])*y/1440;z.translate(C,D);z.scale(F,F);z.beginPath();for(var L=
A.c.length,P=0;P<L;P++){var V=A.c[P];z.moveTo(V[0],V[1]);B=V.length-6;for(var Z=2;Z<B;Z+=6)z.bezierCurveTo(V[Z],V[Z+1],V[Z+2],V[Z+3],V[Z+4],V[Z+5]);B=V.length;z.bezierCurveTo(V[B-4],V[B-3],V[B-2],V[B-1],V[0],V[1])}z.closePath();z.fill();z.scale(1/F,1/F);z.translate(-C,-D)}}z.translate(-(w[0]*y/1440),-(w[1]*y/1440));"A"===r.parentNode.tagName&&(z.strokeStyle=g(r),z.lineWidth=t.lineWidth,z.beginPath(),z.moveTo(0,r.height-1),z.lineTo(r.width,r.height-1),z.stroke(),z.closePath())}}function g(v){v=v.parentNode;
return"A"===v.tagName?t.linkColor:(v=v.getAttribute("class"))&&0<=v.indexOf("fixedOverlap")?"#000000":t.textColor}function b(v){v=v.getElementsByTagName("CANVAS");for(var r={},k=0;k<v.length;k+=1)r[v[k].id]=v[k];return r}function e(v,r,k,y,w,z){for(var A={},B=0;B<v.length;B+=1){var C=r[v[B].id];if(C)for(var D=0;D<C.length;D++){var F=w[C[D].id];if(F){var M=y,N=F.parentNode.getAttribute("class");if(N&&0<=N.indexOf("fixed")){M=k;N=F;var L=z;if(L[N.id])M=L[N.id];else{var P=N.getAttribute("height"),V=
N.getAttribute("width"),Z=0,R=0,I=1;!P||0>=P||!V||0>=V||(P>M.height&&(Z=M.height/P),V>M.width&&(R=M.width/V),0<Z&&0<R?I=Z<R?Z:R:0<Z?I=Z:0<R&&(I=R),L[N.id]=I);M=I}}1===M||A[F.id]||(A[F.id]=1,F.width=Math.round(M*F.width),F.height=Math.round(M*F.height))}}}}function d(v,r,k,y,w,z,A,B,C,D,F){function M(){v===u?d(v,r,k+1,y,w,z,A,B,C,D,F):setTimeout(F,10)}for(var N=y.length;r<N;){var L=w[y[r].id];if(L)for(var P=L.length;k<P;){var V=L[k];if(void 0!==V.imgSrc){var Z=B[V.id];if(Z){N=C[Z.id];N=void 0!==N?
N:z;q(v,A,Z,V,100*N,N,D,M);return}}k+=1}r+=1;k=0}setTimeout(F,10)}function a(v,r,k,y,w,z,A,B,C){d(v,0,0,r,k,y,w,z,A,B,C)}function c(v,r,k,y,w,z,A,B,C,D,F){function M(){v===u?c(v,r,k+1,y,w,z,A,B,C,D,F):setTimeout(F,D.time)}var N=0,L=y.length;for(KindleRendererProcessTuning.startingOperation("GlyphRenderering");r<L;){var P=w[y[r].id];if(P)for(var V=P.length;k<V;){var Z=P[k];if(void 0!==Z.l&&0<Z.l.length){var R=B[Z.id];if(R){var I=C[R.id];m(A,R,Z,100*(void 0!==I?I:z));N+=1;if(N>=D.frequency){KindleRendererProcessTuning.endingOperation("GlyphRenderering",
N);setTimeout(M,D.time);return}}}k+=1}r+=1;k=0}KindleRendererProcessTuning.endingOperation("GlyphRenderering",N);setTimeout(F,D.time)}function f(v,r,k,y,w,z,A,B,C){c(v,0,0,r,k,y,w,z,A,B,C)}function h(v,r,k,y,w,z){var A={height:.85*$(v).parent().height(),width:.85*$(v).parent().width()},B=b(v.contentDocument),C=[],D=v.contentDocument.getElementsByTagName("html")[0],F=v.contentDocument.getElementsByTagName("body")[0];F=D.removeChild(F);var M=$(F).find("p"),N={},L=w.createSubTimer("resizing-canvases");
e(M,k.paraData,A,t.glyphScale,B,N);L.endTimer();L=w.createSubTimer("rendering-all-images");a(r.requestId,M,k.paraData,t.glyphScale,k.imageData,B,N,C,function(){L.endTimer();if(u===r.requestId&&v.processingRequestId.id===r.requestId){L=w.createSubTimer("rendering-all-glyphs");var P={frequency:KindleRendererProcessTuning.drawYieldFrequency("GlyphRenderering"),time:KindleRendererProcessTuning.drawYieldUpdateTime("GlyphRenderering")};f(r.requestId,M,k.paraData,t.glyphScale,y,B,N,P,function(){L.endTimer();
u===r.requestId&&v.processingRequestId.id===r.requestId&&(D.appendChild(F),x[v.id]=C,B=N=null,setTimeout(z,P.time))})}})}function n(v,r,k,y){var w=new jQuery.Deferred;if(null===u||r.requestId>=u){u=r.requestId;var z=r.metrics.createSubTimer("glyph-rendering");h(v,r,k,y,z,function(){u===r.requestId&&v.processingRequestId.id===r.requestId&&(u=null,z.endTimer(),w.resolve())})}return w.promise()}function l(v){var r=parseInt(t.textColor.substring(1,3),16),k=parseInt(t.textColor.substring(3,5),16),y=parseInt(t.textColor.substring(5,
7),16),w=x[v.id];$(v.contentDocument).find("canvas").each(function(){var z=this.parentNode;if("A"!==z.tagName&&(z=z.getAttribute("class"),!z||0>z.indexOf("fixedOverlap"))){z=this.getContext("2d");try{var A=z.getImageData(0,0,this.width,this.height),B=this.width*this.height*4,C=w[this.id];if(C){for(var D=this.width,F=0,M=C.length,N=[];F<M;F+=1)for(var L=Math.floor(C[F].x),P=Math.floor(C[F].y),V=Math.ceil(C[F].w),Z=Math.ceil(C[F].h),R=0;R<Z;R+=1)for(var I=4*(D*(P+R)+L),T=I+4*V;I<=T;I+=4)N[I]=1;var J=
A.data;for(C=0;C<B;C+=4)0<J[C+3]&&!N[C]&&(J[C]=r,J[C+1]=k,J[C+2]=y)}else for(N=A.data,J=0;J<B;J+=4)0<N[J+3]&&(N[J]=r,N[J+1]=k,N[J+2]=y);z.putImageData(A,0,0)}catch(S){}}})}var u=null,x=[],t={glyphScale:1,textColor:"#000000",linkColor:"#0000ff",lineWidth:1};return{renderAllContent:function(v,r,k,y){return n(v,r,k,y)},updateTextColor:function(v){l(v)},updateSettings:function(v){void 0!==v.glyphScale&&(t.glyphScale=v.glyphScale,.75>t.glyphScale||3<t.glyphScale)&&(t.glyphScale=Math.max(.75,Math.min(3,
t.glyphScale)));void 0!==v.fontColor&&(t.textColor=v.fontColor)},clearIframeData:function(v){x[v.id]=void 0},cleanup:function(){x=null}}}(),KindleRendererContentFragmentation=function(){function q(v){v=$.extend(!0,{},v);isFinite(v.startPosition)&&isFinite(v.endPosition)||(v.startPosition=0,v.endPosition=1E4);0>v.startPosition&&(v.startPosition=0);0>v.endPosition&&(v.endPosition=1E4);return v}function m(v){return!v||!v.requestData||!0===v.requestData.cancelled}function g(v,r){var k=Math.max(n[0].cPos,
r.startPosition);r=Math.min(n[n.length-1].ePos,r.endPosition);for(var y=[],w=Infinity,z=-Infinity,A=0;A<n.length;A+=1)if(n[A].sId===v){var B=0===A?n[A].cPos:Math.min(n[A].cPos,n[A-1].ePos+1),C=n[A].ePos;if(!(C<k)){if(B>r)break;B<w&&(w=B);C>z&&(z=C);y.push(A)}}1===y[0]&&n[0].cPos===n[0].ePos&&n[0].cPos===n[1].cPos&&y.push(0);return{fragmentList:y,startPosition:w,endPosition:z}}function b(v,r){null!==r&&(r.skeletonData=v.skeletonData,r.resourceInfo=v.resourceInfo,d(v),r.fragmentLoadMetrics=r.overallLoadMetrics.createSubTimer("fragments"),
l.getBookFragments(function(k){m(r)?(r=null,h(k)):KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeOnContentReceived(),r.requestData.type,function(){var y=r;if(null===y||null===y.loadedFragments)h(k);else{y.numFragmentsLoaded+=1;var w=k.fragmentMetadata.id,z=n[w];if(k.wordList)for(var A in k.wordList)k.wordList[A]+=z.cPos;y.loadedFragments[w]=k;if(!(y.numFragmentsLoaded<y.fragmentsToLoad.length)&&(y.fragmentLoadMetrics.endTimer(),null!==y)){z=y.loadedFragments;w={};
for(var B in z)if(A=z[B].imageRefs)for(var C in A)w[A[C]]=!0;B=[];for(D in w)B.push(D);var D=B=KindleRendererImageRenderer.resolveCompositeResources(B);0<D.length?c(D,y):a(y)}}})},function(){if(null!==r){var k=r.requestData;r.fragmentLoadMetrics.addCount("Failure",1);r.fragmentLoadMetrics.endTimer();var y=r.deferredResult;r.loadedFragments=null;r=r.glyphData=null;y.reject("Error trying to download file fragments.",k)}},r.fragmentsToLoad))}function e(v){if(void 0!==v&&null!==v&&0<v.length&&0<x){var r=
[],k;u=[];var y=Math.min(v.length,x);var w=x-y;for(k=0;k<v.length&&k<y;++k){var z=v[k].glyphFragmentMetadata.id;r[z]=v[k];delete u[z]}if(0<w)for(k in u)if(r[k]=u[k],0===--w)break;u=r}}function d(v){if(v.skeletonMetadata){var r=v.skeletonMetadata.id;void 0===t[r]&&(t={},t[r]=v)}}function a(v){function r(C){m(v)&&(v=null);KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeOnContentReceived(),v&&v.requestData.type,function(){var D=v;null===D||null===D.glyphData?(C.glyphData=
null,C.glyphFragmentMetadata=null):(D.glyphChunkLoadCnt+=1,D.glyphData.push(C),D.glyphChunkLoadCnt<D.glyphChunksToDownload.length||(D.glyphLoadMetrics.endTimer(),f(D)))})}function k(){if(null!==v&&null!==v.glyphData){var C=v.requestData,D=v.deferredResult;v.glyphLoadMetrics.addCount("Failure",1);v.glyphLoadMetrics.endTimer();v=v.glyphData=null;D.reject("Error trying to download glyph chunks.",C)}}if(null!==v){var y=[],w=[],z;for(z in v.loadedFragments){var A=n[parseInt(z,10)];if(A.gCks)for(var B=
0;B<A.gCks.length;B+=1)-1===$.inArray(A.gCks[B],w)&&w.push(A.gCks[B])}A=[];for(z=0;z<w.length;z+=1)B=w[z],void 0===u[B]?A.push(B):y.push(u[B]);v.glyphData=y;0<A.length?(y=v.overallLoadMetrics.createSubTimer("glyph-loading"),y.addCount("NumGlyphCunks",A.length),v.glyphChunkLoadCnt=0,v.glyphChunksToDownload=A,v.glyphLoadMetrics=y,l.getGlyphFragments(r,k,A,v)):f(v)}}function c(v,r){var k=r.overallLoadMetrics.createSubTimer("resources");r.fragmentResources={};r.fragmentResourceLoadCnt=0;r.fragmentResourceToDownload=
v;r.fragmentResourceLoadMetrics=k;l.getResourceUrls(function(y){m(r)&&(r=null);KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeOnContentReceived(),r&&r.requestData.type,function(){var w=r;null!==w&&(w.fragmentResourceLoadCnt+=1,jQuery.extend(w.fragmentResources,y),w.fragmentResourceLoadCnt<w.fragmentResourceToDownload.length||(w.fragmentResourceLoadMetrics.endTimer(),a(w)))})},function(){if(null!==r){var y=r.requestData,w=r.deferredResult;r.fragmentResourceLoadMetrics.addCount("Failure",
1);r.fragmentResourceLoadMetrics.endTimer();r=null;w.reject("Error trying to download fragment resources.",y)}},v)}function f(v){if(null!==v&&null!==v.loadedFragments){e(v.glyphData);var r;for(r in v.loadedFragments)if(void 0===v.loadedFragments[r].fragmentMetadata.lId){var k=n[parseInt(r,10)];v.loadedFragments[r].fragmentMetadata.lId=k.lId;v.loadedFragments[r].fragmentMetadata.lt=k.lt;v.loadedFragments[r].fragmentMetadata.nOff=k.off}k=null;var y=v.deferredResult,w=v.requestData,z={};z.skeletonData=
v.skeletonData;z.resourceInfo=v.resourceInfo;z.glyphData=v.glyphData;z.fragmentResources=v.fragmentResources;z.contentRange={skeletonId:v.skeletonId,startPosition:v.fragmentsStartPosition,endPosition:v.fragmentsEndPosition};z.fragmentData=v.loadedFragments;var A=v.overallLoadMetrics;v.glyphData=null;v.fragmentResources=null;v=v.loadedFragments=null;var B=A.createSubTimer("(YIELD) finish-content-fetch");setTimeout(function(){B.endTimer();A.endTimer();y.resolve(w,z);z=w=null},KindleRendererDeviceSpecific.drawYieldUpdateTime())}}
function h(v){v.fragmentData=null;v.fragmentMetadata=null;v.paraData=null}var n=null,l=null,u=[],x,t={};return{initialize:function(v){u=[];x=KindleRendererDeviceSpecific.glyphCacheMaxSize();t={};l=v;var r=new jQuery.Deferred;l.getFragmentMap(function(k){n=k.fragmentArray;l.getManifest?l.getManifest(function(y){KindleRendererImageRenderer.initialize(y);r.resolve(k,y)},function(){r.resolve(k,null)}):r.resolve(k)},function(){r.reject()});return r.promise()},cleanup:function(){l=n=null;u=[];t={};KindleRendererImageRenderer.cleanup()},
loadNextFragmentGroup:function(v,r,k){function y(N){m(F)?F=null:(C.endTimer(),b(N,F))}function w(){if(null!==F){var N=F.requestData;F.fragmentLoadMetrics.addCount("Failure",1);F.fragmentLoadMetrics.endTimer();F=null;A.reject("Error trying to download skeleton.",N)}}function z(){M.endTimer();m(F)?F=null:(C=F.overallLoadMetrics.createSubTimer("skeletons"),void 0!==t[v]?y(t[v]):l.getBookSkeleton(y,w,v))}var A=new jQuery.Deferred;r=q(r);var B=k.metrics.createSubTimer("content-fetch"),C;r=g(v,r);r=q(r);
var D=r.fragmentList.slice(),F={deferredResult:A,skeletonId:v,fragmentsStartPosition:r.startPosition,fragmentsEndPosition:r.endPosition,overallLoadMetrics:B,loadedFragments:{},fragmentsToLoad:D,numFragmentsLoaded:0,requestData:k},M=B.createSubTimer("(YIELD) begin-content-fetch");0===D.length?a(F):setTimeout(z,KindleRendererDeviceSpecific.drawYieldUpdateTime());return A.promise()},isContentRangeLoaded:function(v,r,k,y){if(null===v||void 0===v||!r||null===k||void 0===k||!y||v!==k)return!1;r=q(r);y=
q(y);v=g(v,r);k=g(k,y);if(k.fragmentList.length>v.fragmentList.length)return!1;for(y=0;y<k.fragmentList.length;++y)if(-1===v.fragmentList.indexOf(k.fragmentList[y]))return!1;return!0}}}(),KindleRendererFragmentLoader=function(){function q(c){for(var f=0;f<e.length;f++){var h=e[f];if(h.start<=c&&c<=h.end)return f}return 0}function m(c){a=c;var f=new jQuery.Deferred;KindleRendererContentFragmentation.initialize(a).then(function(h){var n=[],l,u=h.fragmentArray;for(l=0;l<u.length;l+=1){var x=u[l].sId,
t=0===l?u[l].cPos:Math.min(u[l].cPos,u[l-1].ePos+1),v=u[l].ePos,r=n[x];void 0===r?n[x]={start:t,end:v}:(t<r.start&&(r.start=t),v>r.end&&(r.end=v))}if(void 0!==h.skeletonMap)for(l=0;l<h.skeletonMap.length;++l)n[l]&&(n[l].properties=h.skeletonMap[l].properties);e=n;b=h.fragmentArray;d=h.fragmentMetadata.bookType;f.resolve()},f.reject);return f.promise()}function g(c,f,h){a.getBookFragments(function(n){KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeOnContentReceived(),
f.type,function(){var l=n.fragmentMetadata.id,u=b[l];var x=void 0===n.fragmentMetadata.lId||null===n.fragmentMetadata.lId?u.lId:n.fragmentMetadata.lId;var t=void 0===n.fragmentMetadata.nOff||null===n.fragmentMetadata.nOff?u.off:n.fragmentMetadata.nOff;var v=document.createElement("DIV");v.id=x;v.setAttribute("data-nid",x);v.innerHTML=n.fragmentData;x=v.childNodes;for(var r=x.length,k=0;k<r;k+=1)x[k].ownChildIndex=t+k;h.resolve(f,{id:l,contentRange:{startPosition:u.cPos,endPosition:u.ePos},fragmentRoot:v,
positionData:{posMap:n.posMap}})})},function(){h.reject("Error trying to download file fragments ID : ",c)},[c])}var b=null,e=null,d=!1,a=null;return{initialize:function(c){return m(c)},cleanup:function(){KindleRendererContentFragmentation.cleanup();e=b=null;d=!1},loadFragments:function(c,f){var h=q(c.focus);return KindleRendererContentFragmentation.loadNextFragmentGroup(h,c,f)},getFragmentAtId:function(c,f){var h=new jQuery.Deferred;a?g(c,f,h):h.reject();return h.promise()},getFragmentIdForPosition:function(c,
f){a:{for(var h,n=0;n<b.length-1;++n)if(h=f?b[n+1].cPos-1:b[n].ePos,c<=h){c=n;break a}c=b.length-1}return c},needToLoadFragments:function(c,f){if(c&&f){var h=q(c.startPosition),n=q(f.focus);c=!KindleRendererContentFragmentation.isContentRangeLoaded(h,c,n,f)}else c=!0;return c},getMaximumPosition:function(){return b[b.length-1].ePos},getMinimumPosition:function(){return b[0].cPos},isPositionAtBeginningOfSkeletonOrDocument:function(c,f){return f<=b[0].cPos||f===e[c].start},isPositionAtEndOfSkeletonOrDocument:function(c,
f){return f>=b[b.length-1].ePos||f===e[c].end},getBookContentType:function(){return d},getSkeletonForPosition:function(c){return q(c)},getSkeletonRange:function(c){return{start:e[c].start,end:e[c].end}},getGroupInfo:function(c){if(e[c].properties&&e[c].properties.group)return e[c].properties.group;var f=0===c%2?c+1:c-1;return 0>f||f>=this.getNumSkeletons()||e[f].properties&&e[f].properties.group?{start:c,length:1,spine:!0}:{start:Math.min(c,f),length:2,spine:!0}},isBlankPage:function(c){return e[c].properties?
!0===e[c].properties.blank:!1},getNumSkeletons:function(){return e.length},getFragmentMap:function(){}}}(),KindleRendererPositionLoadingCalculator=function(){function q(){if(0<e)return e;var d=KindleRendererSettings.getSettings();if("topaz"===KindleRendererFragmentLoader.getBookContentType()){var a=m.width/(25*d.glyphScale);d=m.height/(25*d.glyphScale)}else{var c=d.fontSizes[2];a=m.width/(.4*c);d=m.height/(c*d.lineSpacingMultiplier)}return Math.round(a*d)}var m={height:1,width:1},g=0,b=[],e=0;return{updateScreenDimensions:function(d,
a){m.width=d;m.height=a;e=_displayedScreenCount=_logSumPositionsDisplayed=0},updateDisplayedPositionRange:function(d){0<d&&(b[g]=d,g=(g+1)%10,e=0,e=Math.max.apply(Math,b))},calculateDesiredFragmentRangeForPageFlip:function(d,a){var c="topaz"===KindleRendererFragmentLoader.getBookContentType(),f=KindleRendererDeviceSpecific.fragmentBufferCapacityForPageFlip(c),h=q();f*=h;var n=Math.ceil(.25*f),l=Math.ceil(.75*f);f=KindleRendererFragmentLoader.getMinimumPosition();var u=KindleRendererFragmentLoader.getMaximumPosition();
n=Math.max(f,d-n);l=Math.min(u,d+l);var x=a.currentTopOfPage;a=a.currentBottomOfPage;c?(n=Math.min(n,Math.max(f,x-1)),l=Math.max(l,Math.min(u,a+1))):d<x&&x-d<3*h?l=Math.min(u,a+1):d>a&&d-a<3*h&&(n=Math.max(f,x-1));return{focus:d,startPosition:n,endPosition:l}},calculateDesiredFragmentRangeForGoTo:function(d){var a=q()*KindleRendererDeviceSpecific.fragmentBufferCapacityForGoTo(),c=Math.ceil(.1*a);a=Math.ceil(a);var f=KindleRendererFragmentLoader.getMinimumPosition(),h=KindleRendererFragmentLoader.getMaximumPosition();
return{focus:d,startPosition:Math.max(f,d-c),endPosition:Math.min(h,Math.max(f+a,d+a))}}}}(),KindleRendererRequestId=function(){var q=0;return{getUniqueRequestId:function(){return q+=1}}}(),KindleRendererIframeLoading=function(){function q(){window.focus()}function m(t){t.ctrlKey&&t.preventDefault();switch(t.which){case 219:case 221:t.shiftKey||t.preventDefault();break;case 37:case 38:case 33:case 39:case 40:case 34:case 32:case 8:t.preventDefault()}}function g(t,v){var r=v.ownerDocument.createEvent("CustomEvent");
r.initCustomEvent(t.type,!0,!0,t);v.dispatchEvent(r)}function b(t,v){var r=v.ownerDocument.createEvent("MSPointerEvent");r.initPointerEvent(t.type,!0,!0,window.parent,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,null,t.offsetX,t.offsetY,t.width,t.height,t.pressure,t.rotation,t.tiltX,t.tiltY,t.pointerId,t.pointerType,t.hwTimestamp,t.isPrimary);v.dispatchEvent(r)}function e(t,v){if("mousewheel"===t.type){t.preventDefault();var r=v.ownerDocument.createEvent("WheelEvent");
r.initWheelEvent(t.type,!0,!0,window.parent,-1*t.wheelDelta,t.screenX,t.screenY,t.clientX,t.clientY,t.button,null,null,t.deltaX,t.deltaY,t.deltaZ,t.deltaMode)}else r=v.ownerDocument.createEvent("MouseEvent"),r.initMouseEvent(t.type,!0,!0,window.parent,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,null);v.dispatchEvent(r)}function d(t){var v=t.contentDocument.getElementsByTagName("body")[0];v.className+=" amzUserPref";var r=t.contentDocument.getElementsByTagName("head")[0];
KindleRendererDefaults.addCSSRules(r,KindleRendererFragmentLoader.getBookContentType());KindleRendererSettings.addCSSRules(r);KindleRendererContentScripts.addInterfaceScripts(t);v.onmousewheel=function(k){e(k,t);return!1};t.contentWindow.onkeydown=function(k){m(k);g(k,t)};t.contentWindow.onkeyup=function(k){m(k);g(k,t)};t.contentWindow.onkeypress=function(k){m(k);g(k,t)};KindleRendererSettings.useNativeSelection()?(window.navigator.msPointerEnabled&&(v.onmspointerdown=function(k){b(k,t)},v.onmspointerup=
function(k){b(k,t)},v.onmspointermove=function(k){b(k,t)},v.onmspointerout=function(k){b(k,t)},v.onmspointercancel=function(k){b(k,t)},v.onmspointerover=function(k){b(k,t)},v.onmspointerhover=function(k){b(k,t)},v.addEventListener("MSGestureHold",function(k){k.preventDefault()},!1)),v.oncontextmenu=function(k){b(k,t);k.preventDefault()},v.onclick=function(k){e(k,t)},v.ondblclick=function(k){e(k,t)},v.onmousedown=function(k){e(k,t)},v.onmouseup=function(k){e(k,t)},v.onmousemove=function(k){e(k,t)},
v.onmouseover=function(k){e(k,t)},v.onmouseout=function(k){e(k,t)}):(t.contentWindow.onfocus=q,t.contentWindow.onclick=q,v.onselectstart=function(){return!1})}function a(t){if(t=t.getElementsByTagName("body")[0])for(;t.hasChildNodes();)t.removeChild(t.lastChild)}function c(t,v){if(t&&t.nodeType===Node.ELEMENT_NODE){var r=t.getAttribute("data-nid");null!==r&&(v[r]={linkNode:t,typeArray:[t.firstChild,t.nextSibling]});t=t.childNodes;r=t.length;for(var k=0;k<r;k+=1)c(t[k],v)}}function f(t){var v={};try{if(window.ActiveXObject&&
window.XMLHttpRequest)c(t.contentDocument.body,v);else for(var r=(new XPathEvaluator).evaluate("//*[@data-nid]",t.contentDocument,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null),k=r.iterateNext();k;){var y=k.getAttribute("data-nid");v[y]={linkNode:k,typeArray:[k.firstChild,k.nextSibling]};k=r.iterateNext()}}catch(w){c(t.contentDocument.body,v)}return v}function h(t){var v=[],r;for(r in t)v.push(parseInt(r,10));v.sort(function(k,y){return k-y});return v}function n(t,v,r,k){function y(){null!==
J&&(T.insertBefore(J,S),Z=J=null,R=-1)}function w(){A=r.fragmentData[W[K]];B=A.fragmentMetadata;if(Z!==B.lId||R!==B.lt){y();Z=B.lId;R=B.lt;I=v[B.lId];if(void 0===I){var U=B.lId,G=t.contentDocument.getElementById(U);v[U]={linkNode:G,typeArray:[G.firstChild,G.nextSibling]};I=v[B.lId]}J=0===B.lt?I.linkNode:I.linkNode.parentNode;T=J.parentNode;S=J.nextSibling;J=T.removeChild(J)}V=t.contentDocument.createElement(J.tagName);V.innerHTML=A.fragmentData;U=r.fragmentResources;G=void 0===A.resList?A.imageData:
A.resList;if(U||G)for(var Q=$(V).find("img"),H,X=0;X<Q.length;X+=1){H=Q[X].getAttribute("dataUrl");if(void 0===H||null===H)H=Q[X].getAttribute("src");KindleRendererImageRenderer.loadImage(Q[X],U,G,H)}for(U=B.nOff;V.hasChildNodes();)G=V.removeChild(V.firstChild),G.nodeType===Node.TEXT_NODE&&(G.ownChildIndex=U),J.insertBefore(G,I.typeArray[B.lt]),U+=1;if(void 0!==A.posMap){F=!0;for(var fa in A.posMap)C[fa]=A.posMap[fa]}void 0!==A.wordList&&(M=!0,D=D.concat(A.wordList));if(void 0!==A.paraIds&&null!==
A.paraIds){P=!0;for(fa=0;fa<A.paraIds.length;fa+=1)N[A.paraIds[fa]]=A.paraData[fa];for(var za in A.imageData)L[za]=A.imageData[za]}A.fragmentData=null;A.imageData=null;A.paraData=null;K+=1;K<W.length?49===K%50?setTimeout(w,0):KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeLoadNextFragment(),k.type,w):(y(),S=J=T=A=null,za={positionData:{}},F&&(za.positionData.posMap=C),M&&(za.positionData.wordList=D),P&&(za.glyphData={paraData:N,imageData:L}),z.resolve(za))}var z=$.Deferred(),
A,B,C={},D=[],F=!1,M=!1,N={},L={},P=!1,V=null;var Z=null;var R=-1;var I=null,T=null,J=null,S=null,W=h(r.fragmentData),K=0;KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeLoadNextFragment(),k.type,w);return z.promise()}function l(t,v,r){KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeBeforeBulkWriteToIframe(),r.type,function(){KindleHostDeviceDetector.isFirefox&&KindleHostDeviceDetector.isFirefox()||KindleHostDeviceDetector.isMSEdge&&
KindleHostDeviceDetector.isMSEdge()?v.open("text/html","replace"):v.open();v.write(t);KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeAfterBulkWriteToIframe(),r.type,function(){v.close()})})}function u(t,v,r,k){if(t.processingRequestId.id===v.requestId){var y=t.contentDocument;t.screenManager=null;a(y);KindleGlyphRenderer.clearIframeData(t);t.onload=function(){KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeAfterIframeLoaded(),v.type,
function(){if(t.processingRequestId.id===v.requestId){t.onload=null;var w=KindleRendererSettings.getSettings(),z=$(t).parent();z={height:z.height(),width:z.width()};var A=v.contentLoadMetrics.createSubTimer("css-style-sanitization");KindleRendererContentStyleSanitization.sanitizeCSS(t.contentDocument,w,z);A.endTimer();d(t);t.writingMode=KindleRendererWritingModeFactory.buildIFrameWritingMode(t);t.writingMode.resetIframeDimensions(t);x(t,v,r,k)}})};l(r.skeletonData,y,v)}}function x(t,v,r,k){function y(B){k.reject(v,
B)}var w=f(t),z=v.contentLoadMetrics.createSubTimer("fragment-loading");try{var A=n(t,w,r,v)}catch(B){y(B);return}A.then(function(B){z.endTimer();var C=KindleRendererSettings.getSettings(),D=$(t).parent();D={height:D.height(),width:D.width()};var F=v.contentLoadMetrics.createSubTimer("node-style-sanitization");KindleRendererContentStyleSanitization.sanitizeContent(t.contentDocument,C,D).then(function(){F.endTimer();k.resolve(v,B)},y)},y)}return{loadIframe:function(t,v,r){var k=new jQuery.Deferred;
t.processingRequestId.id===v.requestId?u(t,v,r,k):k.reject();return k.promise()},copyIframeContents:function(t,v,r){function k(){KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeAfterIframeLoaded(),t.type,function(){r.processingRequestId.id===t.requestId&&(d(r),KindleRendererContentStyleSanitization.copySanitizationData(v.contentDocument,r.contentDocument),KindlePaginator.copyIframe(v,r),r.onload=null,r.writingMode.prepareForPagination(r),y.resolve(t))})}var y=new jQuery.Deferred;
if(r.processingRequestId.id===t.requestId){var w=v.contentDocument.getElementsByTagName("html")[0];a(r.contentDocument);r.writingMode.resetHeight(r);r.onload=k;var z=w.outerHTML;void 0===z&&(z="<html>"+w.innerHTML+"</html>");l(z,r.contentDocument,t)}else y.reject();return y.promise()},cleanupIframe:function(t){a(t.contentDocument)},updateSettingsInIframe:function(t){if(t&&t.contentDocument){var v=t.contentDocument.getElementsByTagName("head")[0];if(v){KindleRendererSettings.addCSSRules(v);v=KindleRendererSettings.getSettings();
var r={height:$(t).parent().height(),width:$(t).parent().width()},k=KindleMetricsProfiler("style-sanitization");KindleRendererContentStyleSanitization.sanitizeCSS(t.contentDocument,v,r);KindleRendererContentStyleSanitization.sanitizeContent(t.contentDocument,v,r);k.endTimer()}}}}}(),KindleRendererIframeManagerFactory=function(){function q(c){return"topaz"===KindleRendererFragmentLoader.getBookContentType()?c?KindleRendererIframePreparation.CANVAS_INSERTION_PREVIOUS:KindleRendererIframePreparation.CANVAS_INSERTION_NEXT:
KindleRendererIframePreparation.CANVAS_INSERTION_NONE}function m(c){c.cancelCurrentRequest=function(){this.currentRequest&&(this.currentRequest.cancelled=!0,this.currentRequest=null)};c.createNewRequest=function(f,h){this.cancelCurrentRequest();this.currentRequest={type:f,requestId:KindleRendererRequestId.getUniqueRequestId(),metrics:KindleMetricsProfiler("iframe-load"),retryCount:0,initialPosition:h};this.currentRequestDfd=new jQuery.Deferred};c.willRetryCurrentRequest=function(){this.currentRequest&&
this.currentRequest.retryCount++};c.canRetryCurrentRequest=function(){return this.currentRequest?5>this.currentRequest.retryCount:!0};c.getCurrentProcessDfd=function(){return this.currentRequestDfd.promise()};c.getCurrentProcessId=function(){return this.currentRequest.requestId};c.createIframe=function(f,h,n){var l=document.createElement("iframe");l.writingMode=KindleRendererWritingModeFactory.buildIFrameWritingMode(l);l.index=n;l.processingRequestId={};l.computingRectsId={};l.setAttribute("frameBorder",
"0");l.setAttribute("id",h+"_frame_"+n);l.setAttribute("name","book_iframe_"+n);l.setAttribute("scrolling","no");l.setAttribute("tabindex",-1);$(l).css({height:"100%",width:f+"px",position:"absolute","margin-top":"0px",left:"0px",visibility:"hidden","z-index":-1E3});return l};c.setIframeVisibility=function(f,h){if(this.showContent||!h)if(h){if($(f).css({visibility:"visible","z-index":0,"margin-top":"0px"}),$(f.pageOverflowDiv).css({visibility:"visible","z-index":0}),KindleHostDeviceDetector.hasImageRenderingProblem&&
KindleHostDeviceDetector.hasImageRenderingProblem()){var n=f.contentDocument.querySelector("img[data-repaint-on-show]");n&&(f=function(){n.style.borderColor="#FFF"},setTimeout(f,1),setTimeout(f,1500))}}else $(f).css({visibility:"hidden","z-index":-1E3,"margin-top":"10000px"}),$(f.pageOverflowDiv).css({visibility:"hidden","z-index":-1E3})};c.calculateIframePaginationData=function(f,h,n){var l=this,u=q(l.currentRequest.type===l.loadedType.PREVIOUS);KindleRendererIframePreparation.prepareIframe(f,l.currentRequest,
h,n,u).then(function(x){f.processingRequestId.id===x.requestId&&l.currentRequest&&l.currentRequest.requestId===x.requestId&&(f.processingRequestId.id=null,l.frameIsLoadedAndReady(f));l=null},function(x){l.currentRequest&&l.currentRequest.requestId===x.requestId&&l.currentRequestDfd.reject(a);l=null})};c.loadContentDataIntoIframe=function(f){var h=this;h.currentRequest.contentLoadMetrics=h.currentRequest.metrics.createSubTimer("content-load");var n=h.getIframeToLoad();n&&(h.contentRange[n.index]=f.contentRange,
n.processingRequestId.id=h.currentRequest.requestId,n.computingRectsId.id=null,KindleRendererIframeLoading.loadIframe(n,h.currentRequest,f).then(function(l,u){n.processingRequestId.id===l.requestId&&h.currentRequest&&h.currentRequest.requestId===l.requestId&&(h.positionData[n.index]=u.positionData,h.calculateIframePaginationData(n,f,u));h=null},function(l){h.currentRequest&&h.currentRequest.requestId===l.requestId&&h.currentRequestDfd.reject(d);h=null}))};c.loadFragmentsForRange=function(f){var h=
this;KindleRendererFragmentLoader.loadFragments(f,h.currentRequest).then(function(n,l){h.currentRequest&&h.currentRequest.requestId===n.requestId&&h.loadContentDataIntoIframe(l);h=null},function(n,l){h.currentRequest&&h.currentRequest.requestId===l.requestId&&h.currentRequestDfd.reject(e);h=null})};c.resizeWithoutReload=function(f){var h=this,n=this.iframes[f];n.processingRequestId.id=this.currentRequest.requestId;h.setIframeVisibility(n,!1);h.currentRequest.contentLoadMetrics=h.currentRequest.metrics.createSubTimer("content-load");
KindleRendererContentReflow.reflow(n,this.currentRequest,this.positionData[f]).then(function(){h.currentRequest&&h.currentRequest.requestId===n.processingRequestId.id&&(h.frameIsLoadedAndReady(n),h.setIframeVisibility(n,n.index===h.visibleIframeIndex));h=null},function(){h.currentRequest&&h.currentRequest.requestId===n.processingRequestId.id&&(h.setIframeVisibility(n,n.index===h.visibleIframeIndex),h.currentRequestDfd.reject(a));h=null})};c.setCanPreloadNext=function(f){this.canPreloadNext=f};c.setCanPreloadPrevious=
function(f){this.canPreloadPrevious=f};c.getIframeOrigin=function(f){f=$(this.iframes[f]);return{x:parseInt(f.css("left"),10),y:parseInt(f.css("top"),10)}};c.getBoundsWithOffset=function(f,h){return f.getBoundingClientRect&&(f=f.getBoundingClientRect())?{top:f.top+h.y,right:f.right+h.x,bottom:f.bottom+h.y,left:f.left+h.x,width:f.width,height:f.height}:null}}function g(c,f){c.gotoPosition=function(h,n){return f.gotoPosition(h,n)};c.nextScreen=function(){return f.nextScreen()};c.previousScreen=function(){return f.previousScreen()};
c.copyIframeData=function(h){return f.copyIframeData(h.internal)};c.hasNextScreen=function(){return f.hasNextScreen()};c.hasPreviousScreen=function(){return f.hasPreviousScreen()};c.getPagePositionRange=function(){return f.getPagePositionRange()};c.getCurrentPosition=function(){return f.getCurrentPosition()};c.getSelectableItemBoundaries=function(){return f.getSelectableItemBoundaries()};c.getWordPositions=function(){return f.getWordPositions()};c.reloadAnnotations=function(){f.reloadAnnotations()};
c.updateGlyphColor=function(){f.updateGlyphColor()};c.handleClick=function(h,n){return f.handleClick(h,n)};c.cleanup=function(){f.cleanup()};c.updateSettings=function(h){f.updateSettings(h)};c.reloadNotification=function(){f.reloadNotification()};c.resizeNotification=function(){f.resizeNotification()};c.setAnnotationEventCallback=function(h){f.setAnnotationEventCallback(h)};c.getCurrentProcessDfd=function(){return f.getCurrentProcessDfd()};c.getComputedRectsDfd=function(){return f.getComputedRectsDfd()};
c.getCurrentProcessId=function(){return f.getCurrentProcessId()};c.show=function(){f.show()};c.hide=function(){f.hide()};c.getContentRects=function(){return f.getContentRects()};c.getZoomableAt=function(h,n,l){return f.getZoomableAt(h,n,l)};c.getZoomableList=function(h){return f.getZoomableList(h)};c.setOverlayManager=function(h){f.setOverlayManager(h)};c.setCanPreloadPrevious=function(h){f.setCanPreloadPrevious(h)};c.setCanPreloadNext=function(h){f.setCanPreloadNext(h)};c.drawWordMap=function(){f.drawWordMap()};
c.drawHeightMaps=function(){f.drawHeightMaps()};c.clearSelection=function(){f.clearSelection()};c.getSelection=function(){return f.getSelection()}}var b=0,e=b++,d=b++,a=b++;return{DATA_LOAD_ERROR:e,IFRAME_ERROR_LOADING:d,IFRAME_ERROR_PAGINATING:a,build:function(c){if(KindleRendererSettings.useCSSRegions()){var f={showContent:!0,canPreloadNext:!0,canPreloadPrevious:!0};m(f);KindleRegionIframeManager.build(f,c);c={internal:f};g(c,f);return c}if(KindleRendererSettings.getSettings().fixedContent)return f=
{showContent:!0,canPreloadNext:!0,canPreloadPrevious:!0},m(f),KindleRendererIframeManagerFixedFactory.build(f,c),c={},g(c,f),c;f={showContent:!0,canPreloadNext:!0,canPreloadPrevious:!0};m(f);KindleRendererIframeManagerReflowFactory.build(f,c);c={internal:f};g(c,f);return c}}}(),KindleRendererIframeManagerFixedFactory=function(){function q(m){m.findNextNonBlankPage=function(g,b){var e=this.findNextNonBlankPageInDirection(g,b);null===e&&(e=this.findNextNonBlankPageInDirection(g,!b));return e};m.findNextNonBlankPageInDirection=
function(g,b){for(var e=KindleRendererFragmentLoader.getNumSkeletons();0<=g&&g<e;){if(!1===KindleRendererFragmentLoader.isBlankPage(g))return g;g=b?g+1:g-1}return null};m.getNeededSkeletonsFrom=function(g,b){g=this.getSkeletonsToShowWith(g,b);for(var e=0;e<g.length;e++)if(!1===KindleRendererFragmentLoader.isBlankPage(g[e]))return g;e=b?Math.max.apply(Math,g)+1:Math.min.apply(Math,g)-1;e=this.findNextNonBlankPage(e,b);return null===e?g:this.getSkeletonsToShowWith(e,b)};m.addSkeletonRangeToList=function(g,
b,e){for(var d=0;d<e;d+=1)g.push(b+d)};m.getSkeletonsToShowWith=function(g,b){var e=KindleRendererFragmentLoader.getGroupInfo(g);return e.length>this.numberOfColumns?(b=[],this.addSkeletonRangeToList(b,g,Math.min(this.numberOfColumns,e.length-(g-e.start))),b):this.getGroupsToFillScreen(e,b)};m.getGroupsToFillScreen=function(g,b){var e=[];this.addSkeletonRangeToList(e,g.start,g.length);g=b?g.start+g.length:g.start-1;for(var d=KindleRendererFragmentLoader.getNumSkeletons();e.length<this.numberOfColumns&&
0<=g&&g<d;){var a=KindleRendererFragmentLoader.getGroupInfo(g);if(e.length+a.length<=this.numberOfColumns)this.addSkeletonRangeToList(e,g,a.length);else break;g=b?g+a.length:g-a.length}return e};m.getNeededSkeletonsForGoTo=function(g){g=KindleRendererFragmentLoader.getSkeletonForPosition(g);return this.getNeededSkeletonsFrom(g,!0)};m.getNeededSkeletonsForPageFlip=function(g){var b=this.getCurrentlyVisibleSkeletons();if(0<g)return g=Math.max.apply(Math,b),g=Math.min(g+1,KindleRendererFragmentLoader.getNumSkeletons()),
this.getNeededSkeletonsFrom(g,!0);g=Math.min.apply(Math,b);g=Math.max(g-1,0);return this.getNeededSkeletonsFrom(g,!1)};m.clearCacheReservations=function(){for(var g=this.iframeStatus.length,b=0;b<g;b++)this.iframeStatus[b]===this.statusType.RESERVED&&(this.iframeStatus[b]=this.statusType.AVAILABLE)};m.getLoadedSkeletons=function(){for(var g={},b=this.contentRange.length,e=0;e<b;e++)this.contentRange[e]&&null===this.iframes[e].processingRequestId.id&&(g[this.contentRange[e].skeletonId]=e);return g};
m.reserveSkeletonsInCache=function(g){this.clearCacheReservations();for(var b=this.getLoadedSkeletons(),e=[],d=0;d<g.length;d++){var a=g[d],c=b[a];void 0===c?e.push(a):this.iframeStatus[c]===this.statusType.AVAILABLE&&(this.iframeStatus[c]=this.statusType.RESERVED)}return e};m.getIndicesToShow=function(g){for(var b=this.getLoadedSkeletons(),e=[],d=0;d<g.length;d++)e.push(b[g[d]]);return e};m.shouldShowSpineAfterSkeleton=function(g){g=this.contentRange[g].skeletonId;var b=KindleRendererFragmentLoader.getGroupInfo(g),
e=b.start+b.length-1;return b.spine||g===e?!0:!1};m.getSpineCountForIndicies=function(g){var b=0;for(i=0;i<g.length-1;i++)this.shouldShowSpineAfterSkeleton(g[i])&&b++;return b};m.prepareSpine=function(){var g={position:"absolute",visibility:"visible","background-color":this.spineColor,"z-index":-1},b=this.getAvailableSpine();$(b).css(g);return b};m.getAvailableSpine=function(){for(i=0;i<this.spines.length;i++)if(this.spines[i].status===this.statusType.AVAILABLE)return this.spines[i];var g=document.createElement("div");
this.parent.appendChild(g);g.status=this.statusType.RESERVED;this.spines.push(g);return g};m.removeAllSpines=function(){for(i=0;i<this.spines.length;i++)$(this.spines[i]).css("visibility","hidden"),this.spines[i].status=this.statusType.AVAILABLE};m.isRTLProgression=function(){var g=KindleRendererSettings.getSettings().pageProgressionDirection;return g?g.value===g.RTL:!1};m.prepareDisplayElements=function(g,b,e){for(var d,a=[],c=0;c<g.length;c++){d=this.iframes[g[c]];var f=KindleRendererElementFitting.resize(d.contentDocument.body,
b),h=Math.round(.5*(b.height-f.height))+"px";$(d).css({top:h,height:f.height+"px",width:f.width+"px"});a.push(d);if(c!==g.length-1&&this.shouldShowSpineAfterSkeleton(g[c])){var n=this.prepareSpine();$(n).css({top:h,height:f.height+"px",width:this.columnGap+"px"});a.push(n)}this.iframeStatus[d.index]=this.statusType.VISIBLE;this.setIframeVisibility(d,!0);e[d.index]=!1}return a};m.placeElementsHorizontally=function(g,b){var e=0,d;for(d=0;d<g.length;d++)e+=$(g[d]).width();var a=Math.floor(.5*(b-e));
for(d=0;d<g.length;d++){e=g[d];var c=$(e).width();$(e).css({left:this.isRTLProgression()?b-(a+c):a});a+=c}};m.showSkeletons=function(g){g=g.sort(function(c,f){return c-f});var b=this.getIndicesToShow(g),e=this.getCurrentlyVisibleIndices();g={};var d;for(d=0;d<e.length;d++)g[e[d]]=!0;if(0<b.length){var a=$(this.parent).height();e=$(this.parent).width();a={width:Math.round((e-this.columnGap*this.getSpineCountForIndicies(b))/b.length),height:a};this.removeAllSpines();b=this.prepareDisplayElements(b,
a,g);this.placeElementsHorizontally(b,e)}for(d in g)g[d]&&(this.iframeStatus[d]=this.statusType.AVAILABLE,this.setIframeVisibility(this.iframes[d],!1))};m.getCurrentlyVisibleIndices=function(){for(var g=[],b=this.iframeStatus.length,e=0;e<b;e++)this.iframeStatus[e]===this.statusType.VISIBLE&&g.push(e);return g};m.getSkeletonsFromIndices=function(g){for(var b=[],e=0;e<g.length;e++){var d=this.contentRange[g[e]];d&&b.push(d.skeletonId)}return b};m.getCurrentlyVisibleSkeletons=function(){var g=this.getCurrentlyVisibleIndices();
return this.getSkeletonsFromIndices(g)};m.getPrioritizedPreloadList=function(g){var b=g.slice(0);if(0<g.length){var e=KindleRendererFragmentLoader.getNumSkeletons(),d=this.iframes.length,a=Math.min.apply(Math,g);for(g=Math.max.apply(Math,g);b.length<d&&(0<a||g<e-1);){var c;for(c=0;c<this.numberOfColumns&&g<e-1&&b.length<d;c++)g++,b.push(g);for(c=0;c<this.numberOfColumns&&0<a&&b.length<d;c++)a--,b.push(a)}}return b};m.getLowestPriority=function(g){for(var b=this.iframes.length,e=0,d=-1,a=0;a<b;a++){var c=
this.contentRange[a];if(!c)return{iframeIndex:a,priorityRating:-Infinity};if(this.iframeStatus[a]===this.statusType.AVAILABLE){c=$.inArray(c.skeletonId,g);if(-1===c)return{iframeIndex:a,priorityRating:-Infinity};c>d&&(d=c,e=a)}}return{iframeIndex:e,priorityRating:b-d}};m.pickSkeletonToPreload=function(g){for(var b=this.getLoadedSkeletons(),e=0;e<g.length;e++)if(void 0===b[g[e]])return{skeletonId:g[e],priorityRating:g.length-e};return null};m.considerLoadingMoreSkeletons=function(){if(!this.currentRequest){var g=
this.getCurrentlyVisibleSkeletons();g=this.getPrioritizedPreloadList(g);var b=this.pickSkeletonToPreload(g);null!==b&&this.getLowestPriority(g).priorityRating<b.priorityRating&&(this.createNewRequest(this.loadedType.PRELOAD,null),this.currentRequest.skeletons=[b.skeletonId],this.loadFragmentsForRange(this.getDesiredRangeForSkeleton(b.skeletonId)))}};m.updateSettings=function(g){void 0!==g.columns&&(void 0!==g.columns.num&&(this.numberOfColumns=g.columns.num),void 0!==g.columns.gap&&(this.columnGap=
g.columns.gap),void 0!==g.columns.spineColor&&(this.spineColor=g.columns.spineColor))};m.getIframeToLoad=function(){if(this.currentRequest){var g=this.currentRequest.type===this.loadedType.PRELOAD?this.getCurrentlyVisibleSkeletons():this.currentRequest.skeletons;g=this.getPrioritizedPreloadList(g);g=this.getLowestPriority(g);return this.iframes[g.iframeIndex]}return null};m.getDesiredRangeForSkeleton=function(g){g=KindleRendererFragmentLoader.getSkeletonRange(g);return{focus:g.start,startPosition:g.start,
endPosition:g.end}};m.frameIsLoadedAndReady=function(g){g=this.currentRequest;var b=this.reserveSkeletonsInCache(g.skeletons);0<b.length?this.loadFragmentsForRange(this.getDesiredRangeForSkeleton(b[0])):(g.type===this.loadedType.PRELOAD&&this.clearCacheReservations(),null!==g.initialPosition&&this.showSkeletons(g.skeletons),g.metrics.endTimer(),g.metrics.log(),this.currentRequest=null,setTimeout(this.currentRequestDfd.resolve,10),g.type!==this.loadedType.PAGE_FLIP&&this.considerLoadingMoreSkeletons())};
m.pageFlip=function(g){g=this.getNeededSkeletonsForPageFlip(g);var b=this.reserveSkeletonsInCache(g),e=Math.max.apply(Math,g);this.currentPosition=KindleRendererFragmentLoader.getSkeletonRange(e).start;if(0<b.length)return this.createNewRequest(this.loadedType.PAGE_FLIP,null),this.currentRequest.skeletons=g,this.loadFragmentsForRange(this.getDesiredRangeForSkeleton(b[0])),!1;this.showSkeletons(g);this.considerLoadingMoreSkeletons();return!0};m.nextScreen=function(){return this.pageFlip(1)};m.previousScreen=
function(){return this.pageFlip(-1)};m.gotoPosition=function(g,b){var e=this.getNeededSkeletonsForGoTo(g),d=this.reserveSkeletonsInCache(e);b&&(b=Math.max.apply(Math,e),this.currentPosition=KindleRendererFragmentLoader.getSkeletonRange(b).start);if(0<d.length)return this.createNewRequest(this.loadedType.GOTO,g),this.currentRequest.skeletons=e,this.loadFragmentsForRange(this.getDesiredRangeForSkeleton(d[0])),!1;this.clearCacheReservations();this.showSkeletons(e);return!0};m.getPagePositionRange=function(){var g=
this.getCurrentlyVisibleIndices();if(0===g.length)return null;for(var b=Infinity,e=-Infinity,d=0;d<g.length;d++){var a=this.contentRange[g[d]];b=Math.min(b,a.startPosition);e=Math.max(e,a.endPosition)}return{currentTopOfPage:b,currentBottomOfPage:e}};m.getCurrentPosition=function(){return this.currentPosition};m.cleanup=function(){this.cancelCurrentRequest();for(var g=0;g<this.iframes.length;g++)KindleRendererIframeLoading.cleanupIframe(this.iframes[g]),KindlePaginator.cleanupIframe(this.iframes[g]),
this.contentRange[g]=null,this.positionData[g]=null;this.iframes=null};m.hasNextScreen=function(){for(var g=this.getCurrentlyVisibleSkeletons(),b=KindleRendererFragmentLoader.getNumSkeletons()-1,e=0;e<g.length;e++)if(g[e]===b)return!1;return!0};m.hasPreviousScreen=function(){for(var g=this.getCurrentlyVisibleSkeletons(),b=0;b<g.length;b++)if(0===g[b])return!1;return!0};m.getSortedVisibleIndicies=function(){for(var g,b=[],e=this.getCurrentlyVisibleIndices(),d=0;d<e.length;d++){g=e[d];var a=this.contentRange[g].skeletonId;
KindleRendererFragmentLoader.isBlankPage(a)||b.push([a,g])}b.sort(function(c,f){return c[0]-f[0]});g=[];for(d=0;d<b.length;d++)g.push(b[d][1]);return g};m.getContentRects=function(){for(var g=this.getSortedVisibleIndicies(),b=[],e=0;e<g.length;e++){var d=g[e],a=this.iframes[d];d=this.getIframeOrigin(d);b.push(this.getBoundsWithOffset(a.contentDocument.body,d))}return b};m.getZoomableAt=function(g,b,e){for(var d=this.getCurrentlyVisibleIndices(),a=0;a<d.length;a++){var c=d[a],f=$(this.iframes[c]);
f={x:g.x+parseInt(f.css("left"),10),y:g.y+parseInt(f.css("top"),10)};if(c=KindleRendererZoomablesFactory.buildFromCoord(this.iframes[c].contentDocument,f,b,e))return c}return null};m.getZoomableList=function(g){for(var b=[],e=this.getSortedVisibleIndicies(),d=0;d<e.length;d++){var a=e[d],c=$(this.iframes[a]);c={x:g.x+parseInt(c.css("left"),10),y:g.y+parseInt(c.css("top"),10)};b=b.concat(KindleRendererZoomablesFactory.buildList(this.iframes[a].contentDocument,c))}return b};m.getSelectableItemBoundaries=
function(){return{}};m.getComputedRectsDfd=function(){return null};m.getWordPositions=function(){return null};m.show=function(){this.showContent=!0;for(var g=this.getCurrentlyVisibleIndices(),b=0;b<g.length;b++)this.setIframeVisibility(this.iframes[g[b]],!0)};m.hide=function(){this.showContent=!1;for(var g=this.getCurrentlyVisibleIndices(),b=0;b<g.length;b++)this.setIframeVisibility(this.iframes[g[b]],!1)};m.handleClick=function(g,b){for(var e=this.getCurrentlyVisibleIndices(),d,a=0;a<e.length;a++){var c=
this.iframes[e[a]],f=c.offsetLeft,h=c.offsetTop,n=c.offsetHeight,l=c.offsetWidth;if(g>=f&&g<=f+l&&b>=h&&b<=h+n){d=c;break}}return d?(g-=parseInt(d.offsetLeft,10),b-=parseInt(d.offsetTop,10),e=KindleRendererUtils.elementFromPoint(d.contentDocument,g,b),KindleRendererEventHandler.handleClick(d.contentDocument,e,{x:g,y:b})):!1};m.resizeNotification=function(){this.reloadNotification()};m.reloadNotification=function(){this.showSkeletons(this.getCurrentlyVisibleSkeletons())};m.reloadAnnotations=function(){};
m.updateGlyphColor=function(){};m.setAnnotationEventCallback=function(g){};m.setOverlayManager=function(g){};m.copyIframeData=function(g){}}return{build:function(m,g){m.loadedType={PRELOAD:0,GOTO:1,PAGE_FLIP:2};m.statusType={AVAILABLE:0,RESERVED:1,VISIBLE:2};m.iframes=[];m.iframeStatus=[];m.contentRange=[];m.positionData=[];m.parent=g;for(var b=0;6>b;b+=1)m.iframes[b]=m.createIframe($(g).width(),g.name,b),m.iframeStatus[b]=m.statusType.AVAILABLE,m.contentRange[b]=null,m.positionData[b]=null,g.appendChild(m.iframes[b]);
m.currentPosition=0;m.showContent=!0;m.numberOfColumns=1;m.columnGap=20;m.spineColor="transparent";m.spines=[];q(m)}}}(),KindleRendererIframeManagerReflowFactory=function(){function q(m){m.getIframeToLoad=function(){return this.iframes[this.hiddenIframeIndex]};m.annotationClickedHandler=function(g){if(void 0!==this.annotationEventCallback){var b=g.currentTarget.parentNode;g=b.getAttribute("annotationType");b=b.getAttribute("annotationStart");this.annotationEventCallback(g,b)}};m.renderAnnotations=
function(g,b){var e=g.contentDocument.getElementById("annotation-section");null!==e&&e.parentNode.removeChild(e);this.overlayManager&&(b=this.overlayManager.getOverlaysInRange(b.startPosition,b.endPosition))&&0<b.length&&(this.createAnnotationElements(g,b),g.writingMode.forceRepaint(g))};m.frameIsLoadedAndReady=function(g){var b=this,e=b.currentRequest;b.iframeLoadStatus[g.index]=e.type;var d=b.contentRange[g.index];b.renderAnnotations(g,d);var a=this.isStartOfSkeletonLoaded(g.index);null!==e.initialPosition?
KindlePaginator.scrollToPosition(g,e.initialPosition,a):KindlePaginator.scrollToTop(g,a);if(!KindlePaginator.isIframePaginationValid(g)){if(b.canRetryCurrentRequest()){b.willRetryCurrentRequest();b.resizeWithoutReload(g.index);return}KindlePaginator.clearIframePaginationValidation(g)}if(KindlePaginator.hasNextScreen(g)||KindleRendererFragmentLoader.isPositionAtEndOfSkeletonOrDocument(d.skeletonId,d.endPosition))null!==e.initialPosition&&g===b.iframes[b.hiddenIframeIndex]&&(b.swapIframes(),this.updateDisplayedPositionsInPage()),
e.metrics.endTimer(),e.metrics.log(),b.currentRequest=null,setTimeout(b.currentRequestDfd.resolve,10),g.computingRectsId.id=e.requestId,b.computedRectsDfd[g.index]=b.computeRectsInIframe(b.iframes[g.index],e.requestId),b.computedRectsDfd[g.index].then(function(){b.computedRectsDfd[g.index]=null;g.computingRectsId.id=null;b.currentRequest||e.type!==b.loadedType.GOTO_POSITION||b.considerLoadingMoreFragments();b=null},function(){b=null});else if(d=d.endPosition-d.startPosition,0>d)b.currentRequestDfd.reject(DATA_LOAD_ERROR);
else{KindleRendererPositionLoadingCalculator.updateDisplayedPositionRange(d+1);var c=e.initialPosition;null===c&&(c=KindlePaginator.getCurrentPagePositionRange(g).currentTopOfPage);setTimeout(function(){b.reloadHiddenFrame(c)},0)}};m.reloadHiddenFrame=function(g){g=KindleRendererPositionLoadingCalculator.calculateDesiredFragmentRangeForGoTo(g);this.loadFragmentsForRange(g)};m.gotoPosition=function(g){$(this.iframes[this.visibleIframeIndex].contentDocument.body).find("#content-overlays").empty();this.createNewRequest(this.loadedType.GOTO_POSITION,
g);g=KindleRendererPositionLoadingCalculator.calculateDesiredFragmentRangeForGoTo(g);KindleRendererFragmentLoader.needToLoadFragments(this.contentRange[this.visibleIframeIndex],g)?this.loadFragmentsForRange(g):this.resizeWithoutReload(this.visibleIframeIndex);return!1};m.swapIframes=function(){this.iframeLoadStatus[this.visibleIframeIndex]=this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.NEXT?this.loadedType.PREVIOUS:this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.PREVIOUS?
this.loadedType.NEXT:this.loadedType.EMPTY;this.iframeLoadStatus[this.hiddenIframeIndex]=this.loadedType.EMPTY;var g=this.visibleIframeIndex;this.visibleIframeIndex=this.hiddenIframeIndex;this.hiddenIframeIndex=g;this.setIframeVisibility(this.iframes[this.visibleIframeIndex],!0);this.setIframeVisibility(this.iframes[this.hiddenIframeIndex],!1);this.iframes[this.hiddenIframeIndex].writingMode.resetHeight(this.iframes[this.hiddenIframeIndex])};m.getPagePositionRange=function(){var g=this.contentRange[this.visibleIframeIndex];
if(null===g)return null;var b=KindlePaginator.getCurrentPagePositionRange(this.iframes[this.visibleIframeIndex]);if(null===b.currentTopOfPage||null===b.currentBottomOfPage)b.currentTopOfPage=g.startPosition,b.currentBottomOfPage=g.endPosition;return b};m.getCurrentPosition=function(){var g=this.getPagePositionRange();return g?g.currentTopOfPage:null};m.getSelectableItemBoundaries=function(){return KindlePaginator.getSelectableItemBoundariesForCurrentScreen(this.iframes[this.visibleIframeIndex])};
m.computeRectsInIframe=function(g,b){var e=KindleMetricsProfiler("rects-computation"),d=KindleRendererFragmentLoader.getBookContentType();return g.screenManager.wordMapGenerator.computeWordRects(g.contentDocument,g.screenManager.wordMap,g.screenManager.wordMapKeys,g.writingMode,d,b,g.computingRectsId,e)};m.getComputedRectsDfd=function(){return this.computedRectsDfd[this.visibleIframeIndex]};m.getWordPositions=function(){return KindlePaginator.getWordPositionsForCurrentScreen(this.iframes[this.visibleIframeIndex])};
m.causeReflowEventInBrowser=function(){var g=this.iframes[this.visibleIframeIndex].contentDocument.getElementsByTagName("html")[0],b=this.iframes[this.visibleIframeIndex].contentDocument.getElementsByTagName("body")[0];g.removeChild(b);g.appendChild(b)};m.causeReflowEventInBrowserIfNeeded=function(){if(KindleRendererDeviceSpecific.needsReflowOnPageFlip()){var g=this;setTimeout(function(){g.causeReflowEventInBrowser()},KindleRendererDeviceSpecific.drawYieldUpdateTime())}};m.reloadAnnotations=function(){this.renderAnnotations(this.iframes[this.visibleIframeIndex],
this.contentRange[this.visibleIframeIndex]);null!==this.iframes[this.hiddenIframeIndex]&&this.iframeLoadStatus[this.hiddenIframeIndex]!==this.loadedType.EMPTY&&this.renderAnnotations(this.iframes[this.hiddenIframeIndex],this.contentRange[this.hiddenIframeIndex])};m.loadNextPages=function(){if(this.iframeLoadStatus[this.hiddenIframeIndex]!==this.loadedType.NEXT&&(null===this.currentRequest||this.currentRequest.type!==this.loadedType.NEXT)){var g=this.contentRange[this.visibleIframeIndex].endPosition+
1,b=this.getPagePositionRange();g=KindleRendererPositionLoadingCalculator.calculateDesiredFragmentRangeForPageFlip(g,b);this.createNewRequest(this.loadedType.NEXT,null);this.loadFragmentsForRange(g)}};m.loadPreviousPages=function(){if(this.iframeLoadStatus[this.hiddenIframeIndex]!==this.loadedType.PREVIOUS&&(null===this.currentRequest||this.currentRequest.type!==this.loadedType.PREVIOUS)){var g=this.contentRange[this.visibleIframeIndex].startPosition-1,b=this.getPagePositionRange();g=KindleRendererPositionLoadingCalculator.calculateDesiredFragmentRangeForPageFlip(g,
b);this.createNewRequest(this.loadedType.PREVIOUS,null);this.loadFragmentsForRange(g)}};m.considerLoadingMoreFragments=function(g){if(this.canPreloadNext){var b=g!==this.direction.PREVIOUS?4:2;if(KindlePaginator.getApproximateNumNextScreens(this.iframes[this.visibleIframeIndex])<b&&this.hasMoreNextFragments()){this.loadNextPages();return}}this.canPreloadPrevious&&(g=g===this.direction.PREVIOUS?4:2,KindlePaginator.getApproximateNumPreviousScreens(this.iframes[this.visibleIframeIndex])<g&&this.hasMorePreviousFragments()&&
this.loadPreviousPages())};m.handleClick=function(g,b){var e=KindleRendererUtils.elementFromPoint(this.iframes[this.visibleIframeIndex].contentDocument,g,b);return KindleRendererEventHandler.handleClick(this.iframes[this.visibleIframeIndex].contentDocument,e,{x:g,y:b})};m.crossSkeletonBoundary=function(){var g=this.contentRange[this.visibleIframeIndex],b=this.contentRange[this.hiddenIframeIndex];if(this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.NEXT){if(g.skeletonId+1===b.skeletonId)return KindlePaginator.scrollToTop(this.iframes[this.hiddenIframeIndex],
!0),this.swapIframes(),!0;if(g.skeletonId!==b.skeletonId)return this.iframeLoadStatus[this.hiddenIframeIndex]=this.loadedType.EMPTY,!1}if(this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.PREVIOUS){if(g.skeletonId-1===b.skeletonId)return g=this.hiddenIframeIndex,KindlePaginator.scrollToBottom(this.iframes[g],this.isStartOfSkeletonLoaded(g)),this.swapIframes(),!0;g.skeletonId!==b.skeletonId&&(this.iframeLoadStatus[this.hiddenIframeIndex]=this.loadedType.EMPTY)}return!1};m.cleanup=function(){this.cancelCurrentRequest();
KindleRendererIframeLoading.cleanupIframe(this.iframes[this.visibleIframeIndex]);KindleRendererIframeLoading.cleanupIframe(this.iframes[this.hiddenIframeIndex]);KindlePaginator.cleanupIframe(this.iframes[this.visibleIframeIndex]);KindlePaginator.cleanupIframe(this.iframes[this.hiddenIframeIndex]);this.setOverlayManager(null);this.contentRange=[null,null];this.positionData=[null,null];this.iframes=null};m.hasMoreNextFragments=function(){return this.contentRange[this.visibleIframeIndex].endPosition!==
KindleRendererFragmentLoader.getMaximumPosition()};m.hasMorePreviousFragments=function(){return this.contentRange[this.visibleIframeIndex].startPosition!==KindleRendererFragmentLoader.getMinimumPosition()};m.isAtEndOfDocumentOrSkeleton=function(){var g=this.contentRange[this.visibleIframeIndex];return KindleRendererFragmentLoader.isPositionAtEndOfSkeletonOrDocument(g.skeletonId,g.endPosition)};m.isAtBeginningOfDocumentOrSkeleton=function(){var g=this.contentRange[this.visibleIframeIndex];return KindleRendererFragmentLoader.isPositionAtBeginningOfSkeletonOrDocument(g.skeletonId,
g.startPosition)};m.isStartOfSkeletonLoaded=function(g){g=this.contentRange[g];return KindleRendererFragmentLoader.isPositionAtBeginningOfSkeletonOrDocument(g.skeletonId,g.startPosition)};m.needToWaitForLoadToShowNextPage=function(){return!KindlePaginator.isNextFullScreen(this.iframes[this.visibleIframeIndex])&&this.hasMoreNextFragments()};m.needToWaitForLoadToShowPreviousPage=function(){var g=this.visibleIframeIndex;return!KindlePaginator.isPreviousFullScreen(this.iframes[g],this.isStartOfSkeletonLoaded(g))&&
this.hasMorePreviousFragments()};m.hasNextScreen=function(){return KindlePaginator.hasNextScreen(this.iframes[this.visibleIframeIndex])||this.hasMoreNextFragments()};m.hasPreviousScreen=function(){return KindlePaginator.hasPreviousScreen(this.iframes[this.visibleIframeIndex])||this.hasMorePreviousFragments()};m.updateDisplayedPositionsInPage=function(){var g=KindlePaginator.getCurrentPagePositionRange(this.iframes[this.visibleIframeIndex]);KindleRendererPositionLoadingCalculator.updateDisplayedPositionRange(g.currentBottomOfPage-
g.currentTopOfPage)};m.considerFlippingFrames=function(){var g=this.iframeLoadStatus[this.hiddenIframeIndex],b=null!==this.currentRequest&&this.currentRequest.type===g;if(g!==this.loadedType.EMPTY&&!b){b=this.getPagePositionRange();var e=this.contentRange[this.hiddenIframeIndex],d=0,a=0;g===this.loadedType.NEXT?a=1:d=1;if(b.currentTopOfPage>=e.startPosition+d&&b.currentBottomOfPage<=e.endPosition-a){KindlePaginator.matchFrames(this.iframes[this.visibleIframeIndex],this.iframes[this.hiddenIframeIndex]);
g=KindlePaginator.getCurrentPagePositionRange(this.iframes[this.hiddenIframeIndex]);if(g.currentTopOfPage===b.currentTopOfPage&&g.currentBottomOfPage===b.currentBottomOfPage)return this.swapIframes(),!0;if(this.needToWaitForLoadToShowNextPage()||this.needToWaitForLoadToShowPreviousPage())throw"Pagination Error";}}return!1};m.nextScreen=function(){if(!KindlePaginator.isIframePaginationValid(this.iframes[this.visibleIframeIndex])){var g=this.getPagePositionRange();return this.gotoPosition(g.currentTopOfPage)}if((g=
this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.NEXT)&&void 0===this.considerFlippingFrames())return!0;var b=this.isAtEndOfDocumentOrSkeleton(),e=KindlePaginator.nextScreen(this.iframes[this.visibleIframeIndex],b);if(!e)if(this.hasMoreNextFragments())if(g&&b&&this.crossSkeletonBoundary())e=!0;else return g=this.getPagePositionRange(),KindleRendererPositionLoadingCalculator.updateDisplayedPositionRange(this.contentRange[this.visibleIframeIndex].endPosition-g.currentBottomOfPage),this.loadNextPages(),
!1;else KindlePaginator.showEndOfDocument(this.iframes[this.visibleIframeIndex]),e=!0;this.considerLoadingMoreFragments(this.direction.NEXT);this.causeReflowEventInBrowserIfNeeded();this.updateDisplayedPositionsInPage();return e};m.previousScreen=function(){if(!KindlePaginator.isIframePaginationValid(this.iframes[this.visibleIframeIndex])){var g=this.getPagePositionRange();return this.gotoPosition(g.currentTopOfPage)}if((g=this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.PREVIOUS)&&
void 0===this.considerFlippingFrames())return!0;var b=this.visibleIframeIndex,e=this.isAtBeginningOfDocumentOrSkeleton();b=KindlePaginator.previousScreen(this.iframes[b],e,this.isStartOfSkeletonLoaded(b));if(!b&&this.hasMorePreviousFragments())if(g&&e&&this.crossSkeletonBoundary())b=!0;else return g=this.getPagePositionRange(),KindleRendererPositionLoadingCalculator.updateDisplayedPositionRange(g.currentTopOfPage-this.contentRange[this.visibleIframeIndex].startPosition),this.loadPreviousPages(),!1;
this.considerLoadingMoreFragments(this.direction.PREVIOUS);this.causeReflowEventInBrowserIfNeeded();this.updateDisplayedPositionsInPage();return b};m.cancelHiddenIframeLoading=function(){var g=this.iframes[this.hiddenIframeIndex];null!==g.processingRequestId.id&&(g.processingRequestId.id=null,this.cancelCurrentRequest());g.computingRectsId.id=null};m.doGuardedAsyncCopyOf=function(g,b,e){var d=this;b.processingRequestId.id=d.currentRequest.requestId;KindleRendererIframeLoading.copyIframeContents(d.currentRequest,
g,b).done(function(a){b.processingRequestId.id===a.requestId&&d.currentRequest&&d.currentRequest.requestId===a.requestId&&(d.addClickHandlers(b),b.processingRequestId.id=null,e())})};m.copyIframeDataOf=function(g){var b=this;b.cancelHiddenIframeLoading();b.createNewRequest(b.loadedType.GOTO_POSITION,null);b.doGuardedAsyncCopyOf(g.iframes[g.visibleIframeIndex],b.iframes[b.visibleIframeIndex],function(){b.contentRange[b.visibleIframeIndex]=jQuery.extend({},g.contentRange[g.visibleIframeIndex]);b.positionData[b.visibleIframeIndex]=
jQuery.extend({},g.positionData[g.visibleIframeIndex]);var e=b.iframes[b.hiddenIframeIndex],d=g.iframes[g.hiddenIframeIndex];g.iframeLoadStatus[g.hiddenIframeIndex]!==g.loadedType.EMPTY&&null===d.processingRequestId.id?b.doGuardedAsyncCopyOf(d,e,function(){b.contentRange[b.hiddenIframeIndex]=jQuery.extend({},g.contentRange[g.hiddenIframeIndex]);b.positionData[b.hiddenIframeIndex]=jQuery.extend({},g.positionData[g.hiddenIframeIndex]);b.iframeLoadStatus[b.visibleIframeIndex]=g.iframeLoadStatus[g.visibleIframeIndex];
b.iframeLoadStatus[b.hiddenIframeIndex]=g.iframeLoadStatus[g.hiddenIframeIndex];b.currentRequestDfd.resolve()}):(b.iframeLoadStatus=[b.loadedType.EMPTY,b.loadedType.EMPTY],b.currentRequestDfd.resolve())});return b.currentRequestDfd.isResolved()};m.recreateFrame=function(g){var b=this.iframes[g],e=b.writingMode.width(b),d=b.parentNode,a=b.pageOverflowDiv;d.removeChild(b);b=this.createIframe(e,this.parentName,b.index);b.pageOverflowDiv=a;d.appendChild(b);d.appendChild(a);this.iframes[g]=b};m.copyIframeData=
function(g){var b=this.contentRange[this.visibleIframeIndex];var e=g.contentRange[g.visibleIframeIndex];b=null===b||null===e?b===e:b.startPosition===e.startPosition&&b.endPosition===e.endPosition;if(!b)return KindleRendererDeviceSpecific.needsReflowOnPageFlip()&&(this.recreateFrame(0),this.recreateFrame(1),this.setIframeVisibility(this.iframes[this.visibleIframeIndex],!0)),this.copyIframeDataOf(g);b=this.iframes[this.visibleIframeIndex];g=g.iframes[g.visibleIframeIndex];b.currentTopOfScreen=g.currentTopOfScreen;
b.currentBottomOfScreen=g.currentBottomOfScreen;return!0};m.updateSettingsInIframe=function(g){if(g&&g.contentDocument){var b=g.contentDocument.getElementById("content-overlays");b&&g.contentDocument.body.removeChild(b);KindleRendererIframeLoading.updateSettingsInIframe(g);b&&g.contentDocument.body.appendChild(b)}};m.updateSettings=function(g){g=KindleRendererSettings.getSettings().backgroundColor;$(this.iframes[this.visibleIframeIndex].pageOverflowDiv).css({"background-color":g});$(this.iframes[this.hiddenIframeIndex].pageOverflowDiv).css({"background-color":g});
this.updateSettingsInIframe(this.iframes[this.visibleIframeIndex]);this.updateSettingsInIframe(this.iframes[this.hiddenIframeIndex])};m.reloadNotification=function(){this.contentRange=[null,null];this.positionData=[null,null];this.resizeNotification()};m.resizeNotification=function(){this.cancelHiddenIframeLoading();this.iframeLoadStatus=[this.loadedType.EMPTY,this.loadedType.EMPTY];var g=this.iframes[this.visibleIframeIndex];g.writingMode.resetIframeDimensions(g);g=this.iframes[this.hiddenIframeIndex];
g.writingMode.resetIframeDimensions(g)};m.updateGlyphColorForFrameIndex=function(g){this.iframes[g].hasGlyphs&&this.iframes[g].contentDocument&&KindleGlyphRenderer.updateTextColor(this.iframes[g])};m.updateGlyphColor=function(){this.updateGlyphColorForFrameIndex(this.visibleIframeIndex);this.updateGlyphColorForFrameIndex(this.hiddenIframeIndex)};m.setAnnotationEventCallback=function(g){this.annotationEventCallback=g};m.getContentRects=function(){var g=this.iframes[this.visibleIframeIndex],b=this.getIframeOrigin(this.visibleIframeIndex);
g={left:b.x,top:b.y,width:$(g).width(),height:$(g).height()};g.right=g.left+g.width;g.bottom=g.top+g.height;return[g]};m.getZoomableAt=function(g,b,e){var d=this.iframes[this.visibleIframeIndex];return KindlePaginator.isPointOnVisiblePage(d,b-g.x,e-g.y)?KindleRendererZoomablesFactory.buildFromCoord(d.contentDocument,g,b,e):null};m.getZoomableList=function(g){return KindleRendererZoomablesFactory.buildList(this.iframes[this.visibleIframeIndex].contentDocument,g)};m.addClickHandlers=function(g){var b=
this;g=g.contentDocument.getElementById("annotation-section");g=$(g).find("["+KindleRendererAnnotationRenderer.ANNOTATION_CLICK_ATTRIBUTE+"='true']").children();$(g).unbind("click");$(g).click(function(e){b.annotationClickedHandler(e)})};m.createAnnotationElements=function(g,b){if(g.contentDocument.getElementsByTagName("body")[0]){var e=KindlePaginator.getWordMap(g),d=g.contentDocument.createDocumentFragment();KindleRendererAnnotationRenderer.createAnnotationElements(g,e,g.screenManager.wordMapGenerator,
b,d);b=g.contentDocument.getElementById("annotation-section");b||(e=g.contentDocument.getElementById("content-overlays"),b=g.contentDocument.createElement("DIV"),b.id="annotation-section",b.setAttribute("class","kindle-annotation-wrapper"),e.appendChild(b));b.appendChild(d);this.addClickHandlers(g)}};m.addAnnotation=function(g,b,e){g&&b&&e&&b.startPosition<=e.end&&e.start<=b.endPosition&&(this.createAnnotationElements(g,[e]),g.writingMode.forceRepaint(g))};m.removeAnnotation=function(g,b){if(g&&b){var e=
g.contentDocument.getElementById("annotation-section");e&&(KindleRendererAnnotationRenderer.removeAnnotationElements(e,b),g.writingMode.forceRepaint(g))}};m.onOverlayAdded=function(g){m.addAnnotation(m.iframes[0],m.contentRange[0],g.overlay);m.addAnnotation(m.iframes[1],m.contentRange[1],g.overlay)};m.onOverlayRemoved=function(g){m.removeAnnotation(m.iframes[0],g.overlay);m.removeAnnotation(m.iframes[1],g.overlay)};m.setOverlayManager=function(g){this.overlayManager&&(this.overlayManager.removeEventListener(this.overlayManager.OVERLAY_ADDED_EVENT,
this.onOverlayAdded),this.overlayManager.removeEventListener(this.overlayManager.OVERLAY_REMOVED_EVENT,this.onOverlayRemoved));if(this.overlayManager=g)this.overlayManager.addEventListener(this.overlayManager.OVERLAY_ADDED_EVENT,this.onOverlayAdded),this.overlayManager.addEventListener(this.overlayManager.OVERLAY_REMOVED_EVENT,this.onOverlayRemoved)};m.show=function(){this.showContent=!0;this.setIframeVisibility(this.iframes[this.visibleIframeIndex],!0)};m.hide=function(){this.showContent=!1;this.setIframeVisibility(this.iframes[this.visibleIframeIndex],
!1)};m.drawWordMap=function(){var g=this.iframes[this.visibleIframeIndex];drawWordMap(g,g.screenManager,g.contentDocument.body)};m.drawHeightMaps=function(){drawHeightMaps(this.iframes[this.visibleIframeIndex],this.iframes[this.hiddenIframeIndex])}}return{build:function(m,g){for(var b=[],e=0;2>e;e+=1){b[e]=m.createIframe($(g).width(),g.name,e);g.appendChild(b[e]);var d=b[e],a=g,c=e,f=document.createElement("div");f.setAttribute("id",a.name+"_page_overflow_"+c);$(f).css({position:"absolute",visibility:"hidden",
"z-index":1});a.appendChild(f);d.pageOverflowDiv=f}m.loadedType={EMPTY:0,GOTO_POSITION:1,NEXT:2,PREVIOUS:3};m.direction={NEXT:2,PREVIOUS:3};m.iframes=b;m.parentName=g.name;m.iframeLoadStatus=[m.loadedType.EMPTY,m.loadedType.EMPTY];m.contentRange=[null,null];m.positionData=[null,null];m.computedRectsDfd=[null,null];m.visibleIframeIndex=0;m.hiddenIframeIndex=1;m.overlayManager=null;q(m)}}}(),KindleRendererIframePreparation=function(){function q(g,b,e,d){KindleRendererSettings.useCSSRegions()?d.resolve(b):
KindleRendererContentReflow.reflow(g,b,e).then(function(){d.resolve(b)},function(){d.reject(b,"reflow took too long")})}function m(g,b,e,d,a,c){0!==a&&KindleRendererCanvasInsertion.changeSpanToCanvas(g.id,g.contentDocument,e.contentRange,-1===a);g.hasGlyphs=void 0!==d.glyphData&&void 0!==e.glyphData;g.hasGlyphs?KindleGlyphRenderer.renderAllContent(g,b,d.glyphData,e.glyphData).then(function(){q(g,b,d.positionData,c)},function(){c.reject(b,"glyph rendering took too long")}):(d.glyphData=null,q(g,b,
d.positionData,c))}return{CANVAS_INSERTION_PREVIOUS:-1,CANVAS_INSERTION_NONE:0,CANVAS_INSERTION_NEXT:1,prepareIframe:function(g,b,e,d,a){var c=new jQuery.Deferred;if(g.processingRequestId.id===b.requestId){var f=g.contentDocument.getElementById("content-overlays");f||(f=g.contentDocument.createElement("DIV"),f.id="content-overlays",g.contentDocument.body.appendChild(f));m(g,b,e,d,a,c)}else c.reject();return c.promise()}}}(),KindleRendererColumnManager=function(){function q(){for(var I=0;I<F;I++)N[I].hide()}
function m(I){if(V||Z){if(I<=A)throw{name:"pagingError",message:"Repeating wait request"};A=I;0>z&&(w.waitNotification&&w.waitNotification(),F>=KindleRendererDeviceSpecific.minColumnsToHide()&&(Z=!0,q()));z=I}}function g(I){if((V||Z)&&0<=z&&z<=I){R=0;z=-1;if(Z||F>=KindleRendererDeviceSpecific.minColumnsToHide()){for(I=0;I<F;I++)N[I].show();V=!0;Z=!1}w.readyNotification&&w.readyNotification()}}function b(){-1===z&&e(0)}function e(I){if(I<F){var T=N[I].getComputedRectsDfd();T?(w.rectsWaitNofification&&
w.rectsWaitNofification(),T.then(function(){e(I+1)},function(J){w.rectsErrorNotification&&w.rectsErrorNotification(J)})):e(I+1)}else w.rectsReadyNotification&&w.rectsReadyNotification()}function d(I){return I>20*F?(w.errorNotification&&w.errorNotification("Irrecoverable Error"),!0):!1}function a(I,T,J){z<=I&&(T!==KindleRendererIframeManagerFactory.DATA_LOAD_ERROR&&3>R?(++R,k(),t(J)):(w.errorNotification&&w.errorNotification(T),z=-1))}function c(I,T){try{if(d(T))return!1;if(N[I].copyIframeData(N[0===
I?F-1:I-1])){var J=N[I].nextScreen(),S=I+1;if(J){if(S<F)return c(S,T+1);b();return!0}}var W=N[I].getCurrentProcessId();m(W);N[I].getCurrentProcessDfd().then(function(){c(I,T+1)&&(g(W),b())},function(K){a(W,K,T)})}catch(K){t(T)}return!1}function f(I,T){try{if(d(T))return!1;var J=N[I===F-1?0:I+1];if(!J.hasPreviousScreen())return h(0,T),!1;if(N[I].copyIframeData(J)){var S=N[I].previousScreen();J=I-1;if(S)return 0<=J?f(J,T+1):c(1,T)}var W=N[I].getCurrentProcessId();m(W);N[I].getCurrentProcessDfd().then(function(){f(I,
T+1)&&(g(W),b())},function(K){a(W,K,T)})}catch(K){t(T)}return!1}function h(I,T,J){if(N[0].gotoPosition(I,J)){var S=KindleRendererRequestId.getUniqueRequestId();m(S);g(S);b()}else S=N[0].getCurrentProcessId(),m(S),I=N[0].getCurrentProcessDfd(),1===F?I.then(function(){g(S);b()},function(W){a(S,W,T)}):I.then(function(){c(1)&&(g(S),b())},function(W){a(S,W,T)});return!1}function n(){try{if(1===F){var I=N[0].nextScreen();if(I)b();else{var T=N[0].getCurrentProcessId();m(T);N[0].getCurrentProcessDfd().then(function(){n();
g(T);b()},function(J){a(T,J,0)})}return I}return c(0,0)}catch(J){return t(0),!1}}function l(){try{if(1===F){var I=N[0].previousScreen();if(I)b();else{var T=N[0].getCurrentProcessId();m(T);N[0].getCurrentProcessDfd().then(function(){l();g(T);b()},function(J){a(T,J,0)})}return I}return f(F-1,0)}catch(J){return t(0),!1}}function u(I){for(;I<F;I++)N[I].reloadNotification()}function x(){var I=N[0].getCurrentPosition();null!==I&&(L=I)}function t(I){x();u(0);h(L,I)}function v(I){if(B&&I&&0<I.length){var T=
document.getElementById("renderer_translation_div");T||(T=document.createElement("div"),T.id="renderer_translation_div",$(T).css({visibility:"hidden","z-index":-1E3}),B.appendChild(T));$(T).css({margin:I});I=window.getComputedStyle(T);return{top:parseFloat(I.marginTop),bottom:parseFloat(I.marginBottom),left:parseFloat(I.marginLeft),right:parseFloat(I.marginRight)}}return{top:0,bottom:0,left:0,right:0}}function r(){var I=KindleRendererSettings.getSettings().inlineBaseDirection,T=I&&I.value===I.VERTICAL;
I=v(C);if(T){I={top:I.left,right:I.bottom,bottom:I.right,left:I.top};var J=$(B).height();var S=$(B).width()}else J=$(B).width(),S=$(B).height();return{margins:I,parentWidth:J,parentHeight:S,getStyle:function(W){return T?{top:W.left,left:W.top,width:W.height,height:W.width}:W}}}function k(){F=Math.max(F,1);var I=r(),T=I.parentHeight,J=I.margins,S=D-(J.left+J.right),W=parseInt((I.parentWidth-S*(F-1))/F,10),K=J.top;T=T-J.top-J.bottom;for(J=0;J<F;J++){void 0===M[J]&&(M[J]=document.createElement("div"),
M[J].name="column_"+J,$(M[J]).css("position","absolute"),B.appendChild(M[J]));var U=I.getStyle({top:K,left:J*(W+S),height:T,width:W});U.display="";$(M[J]).css(U);void 0===N[J]&&(N[J]=KindleRendererIframeManagerFactory.build(M[J]),N[J].setAnnotationEventCallback(w.annotationTriggered),N[J].setOverlayManager(P));N[J].setCanPreloadPrevious(0===J);N[J].setCanPreloadNext(J===F-1)}for(J=F;J<M.length;J++)$(M[J]).hide();V||q()}function y(I){I=$(M[I]);return{x:parseInt(I.css("left"),10),y:parseInt(I.css("top"),
10)}}var w={},z=-1,A=-1,B=null,C=0,D=20,F=0,M=[],N=[],L=0,P,V=!0,Z=!1,R=0;return{initialize:function(I,T,J,S){B=I;w=T;P=J;0<S&&(L=S);k()},cleanup:function(){for(var I=0;I<N.length;I++)N[I].cleanup()},hide:function(){q();Z=V=!1},show:function(){Z=!0},updateSettings:function(I){void 0!==I.columns&&(KindleRendererSettings.getSettings().fixedContent?(F=1,D=0):(void 0!==I.columns.num&&(F=I.columns.num),void 0!==I.columns.gap&&(D=parseInt(I.columns.gap,10))));void 0!==I.margin&&(C=I.margin);if(null!==B){k();
for(var T=void 0!==I.fontSizes||void 0!==I.lineSpacingMultiplier||void 0!==I.fontSizeUnits||void 0!==I.fontFamily||void 0!==I.margin||void 0!==I.columns||void 0!==I.textAlign,J=0;J<F;J++)N[J].updateSettings(I),T||void 0===I.fontColor||N[0].updateGlyphColor();T&&(V?t(0):u(0))}},gotoPosition:function(I,T){return h(I,0,T)},nextScreen:function(){return n()},previousScreen:function(){return l()},hasNextScreen:function(){return N[F-1].hasNextScreen()},hasPreviousScreen:function(){return N[0].hasPreviousScreen()},
getPagePositionRange:function(){var I=N[0].getPagePositionRange();if(1!==F){var T=N[F-1].getPagePositionRange();I={currentTopOfPage:I.currentTopOfPage,currentBottomOfPage:T.currentBottomOfPage}}return I},getSelectableItemBoundaries:function(){for(var I={},T=0;T<F;T++){var J=$(M[T]),S=parseFloat(J.css("top"));J=parseFloat(J.css("left"));var W=N[T].getSelectableItemBoundaries(),K;for(K in W){I[K]=[];for(var U=W[K],G=0;G<U.length;G++)I[K].push({top:U[G].top+S,bottom:U[G].bottom+S,left:U[G].left+J,right:U[G].right+
J})}}return I},getWordPositions:function(){for(var I=[],T=0;T<F;T++){var J=N[T].getWordPositions();J&&(I=I.concat(J))}return I.length?I:null},onWindowResize:function(){k();x();N[0].resizeNotification();u(1);h(L,0)},handleClick:function(I,T){for(var J=0;J<F;J++){var S=$(M[J]),W=I-parseInt(S.css("left"),10);S=T-parseInt(S.css("top"),10);if(N[J].handleClick(W,S))return!0}return!1},reloadAnnotations:function(){for(var I=0;I<F;I++)N[I].reloadAnnotations()},getContentRects:function(){for(var I=[],T=0;T<
F;T++){for(var J=N[T].getContentRects(),S=y(T),W=0;W<J.length;W++)J[W].left+=S.x,J[W].right+=S.x,J[W].top+=S.y,J[W].bottom+=S.y;I=I.concat(J)}return I},getZoomableAt:function(I,T){for(var J=0;J<F;J++){var S=y(J);if(S=N[J].getZoomableAt(S,I,T))return S}return null},getZoomableList:function(){for(var I=[],T=0;T<F;T++){var J=y(T);J=N[T].getZoomableList(J);I=I.concat(J)}return I}}}(),KindleRendererContentDisplay=function(){function q(f){d=document.createElement("DIV");$(d).css({position:"absolute",top:0,
left:0});f.appendChild(d);a=document.createElement("DIV");var h=$(a);h.css({position:"absolute",top:0,left:0});KindleRendererSettings.useCSSRegions()&&h.css({height:"100%",width:"100%"});f.appendChild(a);m()}function m(){if(!KindleRendererSettings.useCSSRegions()){if(d){var f=$(d.parentNode);$(d).css({width:f.width(),height:f.height()})}a&&(jContentDivParentNode=$(a.parentNode),$(a).css({width:jContentDivParentNode.width(),height:jContentDivParentNode.height()}))}}function g(f){e!==f&&(e.hide(),e=
f,e.show())}var b=null,e,d=null,a=null,c=!1;return{initialize:function(f,h,n,l,u){var x=new jQuery.Deferred;e=b=KindleRendererSettings.useCSSRegions()?KindleRegionContentManager:KindleRendererColumnManager;q(f);KindleRendererCover.initialize(d,h,n);b.initialize(a,h,l,u);KindleRendererContentReflow.initialize();n.hasCover(function(t){c=t;x.resolve()},x.resolve);return x.promise()},cleanup:function(){KindleRendererCover.cleanup();b.cleanup();a=d=e=null},updateSettings:function(f){b&&(m(),b.updateSettings(f))},
gotoPosition:function(f,h){f=parseInt(f,10);f=Math.max(f,0);c&&0===f?(g(KindleRendererCover),KindleRendererCover.showCover()):(g(b),f=Math.min(f,KindleRendererFragmentLoader.getMaximumPosition()));return b.gotoPosition(f,h)},nextScreen:function(){return e===KindleRendererCover?(g(b),b.gotoPosition(0)):e.hasNextScreen()?e.nextScreen():!0},previousScreen:function(){if(e===b){if(e.hasPreviousScreen())return e.previousScreen();c&&(g(KindleRendererCover),KindleRendererCover.showCover())}return!0},hasNextScreen:function(){return e.hasNextScreen()},
hasPreviousScreen:function(){return c?e!==KindleRendererCover:e.hasPreviousScreen()},getPagePositionRange:function(){return e.getPagePositionRange()},getSelectableItemBoundaries:function(){return e.getSelectableItemBoundaries()},getWordPositions:function(){return e.getWordPositions()},onWindowResize:function(){m();KindleRendererCover.onWindowResize();b.onWindowResize()},handleClick:function(f,h){return e.handleClick(f,h)},reloadAnnotations:function(){e.reloadAnnotations()},getContentRects:function(){return e.getContentRects()},
getZoomableAt:function(f,h){return e.getZoomableAt(f,h)},getZoomableList:function(){return e.getZoomableList()},clearSelection:function(){b.clearSelection&&b.clearSelection()},getSelection:function(){if(b.getSelection)return b.getSelection()}}}(),KindleRendererCover=function(){function q(u){function x(){++y;y===k&&(g(a),b(a))}var t=u.data||u,v=u.metadata;u=t.split("resources")[0];var r=KindleRendererImageRenderer.getCoverImageSlices();if(l=void 0!==r&&null!==r){a=d.ownerDocument.createElement("DIV");
t=$(a);for(var k=r.length,y=0,w=0,z=0,A=0;A<k;A++)w=d.ownerDocument.createElement("IMG"),$(w).width(r[A].width),$(w).height(r[A].height),w.onload=x,w.src=u+r[A].name,$(w).appendTo(t),z+=r[A].height;w=r[0].width;$(a).width(w);$(a).height(z);$(a).css("visibility","hidden")}else a=d.ownerDocument.createElement("IMG"),a.src=t,$(a).css("visibility","hidden"),a.onload=function(){v&&v.map?($(this).css("display","none"),c=KindleRendererImageRenderer.createCanvasImage(this,v.map),c=m(this.parentNode,c),$(this).after(c)):
g(this);b(this)};d.appendChild(a)}function m(u,x){u=$(u);var t=u.width(),v=u.height(),r=Math.min(t/x.width,v/x.height);u=x.width*r;r*=x.height;t=Math.round(.5*(t-u));v=Math.round(.5*(v-r));$(x).css({top:v+"px",left:t+"px",height:r+"px",width:u+"px",position:"absolute"});return x}function g(u){if(null!==u&&void 0!==u){var x=$(u),t=$(x.parent()),v=t.width(),r=t.height();x.css("visiblity","hidden");t=u.offsetWidth;var k=u.offsetHeight;0<t&&0<k?(void 0===x.attr("nativeWidth")&&x.attr("nativeWidth",t),
void 0===x.attr("nativeHeight")&&x.attr("nativeHeight",k)):(t=x.attr("nativeWidth")||v,k=x.attr("nativeHeight")||r);var y=Math.min(v/t,r/k);t*=y;y*=k;v=Math.round(.5*(v-t));r=Math.round(.5*(r-y));l?(x=d.ownerDocument.createElement("IMG"),$(x).css({width:t+"px",height:y+"px",position:"absolute",left:v+"px",top:r+"px"}),KindleRendererImageRenderer.scaleImageSlices(x,u,!1),$(x).remove()):x.css({height:y+"px",width:t+"px",position:"absolute",left:v+"px",top:r+"px"});$(u).css("visibility","visible")}}
function b(u){n=!0;f.readyNotification&&f.readyNotification();f.rectsReadyNotification&&f.rectsReadyNotification()}function e(u){f.errorNotification&&f.errorNotification(u)}var d=null,a=null,c=null,f=null,h=null,n=!1,l=!1;return{initialize:function(u,x,t){d=u;f=x;h=t},cleanup:function(){h=f=a=d=null;l=n=!1},hide:function(){$(d).hide()},show:function(){$(d).show()},showCover:function(){n?(f.readyNotification&&f.readyNotification(),f.rectsReadyNotification&&f.rectsReadyNotification()):(f.waitNotification&&
f.waitNotification(),h.getCoverUrl(q,e))},nextScreen:function(){return!0},previousScreen:function(){return!0},hasNextScreen:function(){return!0},hasPreviousScreen:function(){return!1},getPagePositionRange:function(){return{currentTopOfPage:0,currentBottomOfPage:0}},getSelectableItemBoundaries:function(){var u={};if(a&&a.getBoundingClientRect){var x=a.getBoundingClientRect();x&&(u[0]=[{left:x.left,top:x.top,right:x.right,bottom:x.bottom}])}return u},getWordPositions:function(){return null},onWindowResize:function(){c?
m(c.parentNode,c):g(a)},handleClick:function(u,x){return!1},reloadAnnotations:function(){},getContentRects:function(){var u=$(a);u={left:parseInt(u.css("left"),10),top:parseInt(u.css("top"),10),width:u.width(),height:u.height()};u.right=u.left+u.width;u.bottom=u.top+u.height;return[u]},getZoomableAt:function(u,x){return a?KindleRendererZoomableReflowableContentFactory.buildFromElement(a,{x:0,y:0}):null},getZoomableList:function(){return[]}}}(),KindleRendererElementFitting=function(){function q(a){return(a.getAttribute("style")||
"")+";"}function m(a,c,f,h){var n=0,l=0;a>f&&(n=f/a);c>h&&(l=h/c);f=0<n&&0<l?n<l?n:l:0<n?n:l;0!==f&&(a=f*parseInt(a,10),c=f*parseInt(c,10),c=Math.max(1,c),a=Math.max(1,a));return{height:a,width:c,scale:f}}function g(a){var c=a.getAttribute("data-isGaiji");if(c)return"true"===c;c=parseInt($(a).css("width"),10);var f=parseInt($(a).css("height"),10),h=parseInt($(a).css("font-size"),10);if(1>=Math.abs(c-h)&&1>=Math.abs(f-h))return a.setAttribute("data-isGaiji","true"),!0;a.setAttribute("data-isGaiji",
"false");return!1}function b(a,c){for(var f=0,h=0,n=function(u){h+=1;h===f&&setTimeout(c,KindleRendererDeviceSpecific.drawYieldUpdateTime())},l=0;l<a.length;l+=1)""!==a[l].src&&(void 0!==a[l].complete&&!1===a[l].complete||0===a[l].naturalHeight&&0===a[l].naturalWidth)&&(f+=1,a[l].onerror=n,a[l].onload=n,a[l].onabort=n);0===f&&setTimeout(c,KindleRendererDeviceSpecific.drawYieldUpdateTime())}function e(a,c){a=a.getElementsByTagName("IMG");0<a.length?b(a,c):c()}function d(a,c,f,h){var n=new jQuery.Deferred,
l,u=function(){l=h.createSubTimer("element-fitting");if("absolute"===$(a).css("position"))KindleRendererImageRenderer.scaleCompositeInlineImages(a),n.resolve();else{var t=a.getElementsByTagName("IMG");if(0<t.length){var v;for(v=0;v<t.length;v+=1){var r=t[v],k=r,y=$(k),w=y.css("max-height");y=y.css("max-width");w="auto"!==w&&"none"!==w;y="auto"!==y&&"none"!==y;if(w||y){var z=q(k);w&&(z+="max-height: none; ");y&&(z+="max-width: none; ");k.setAttribute("style",z)}k=r;k.getAttribute("data-nativeHeight")||
k.setAttribute("data-nativeHeight",k.height);k.getAttribute("data-nativeWidth")||k.setAttribute("data-nativeWidth",k.width);k.getAttribute("data-nativeLeftOffset")||k.setAttribute("data-nativeLeftOffset",k.offsetLeft);k.getAttribute("data-nativeTopOffset")||k.setAttribute("data-nativeTopOffset",k.offsetTop);k=r;0<=k.className.indexOf("unsupsvg")&&(k.src="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' viewBox='0 0 100 100'><g><rect x='1%' y='1%' rx='20' ry='20' width='98%' height='98%' style='fill:white; stroke:gray;stroke-width:2;'></rect><text x='50%' y='50%' fill='black' font-size='8px' style='text-anchor: middle; dominant-baseline: central;'>Image Not Supported</text></g></svg>",
k.height=k.getAttribute("data-nativeHeight"),k.width=k.getAttribute("data-nativeWidth"),0===k.height||0===k.width)&&(k.height=200,k.width=200,k.setAttribute("data-nativeHeight",k.height),k.setAttribute("data-nativeWidth",k.width));k=r;var A=c.getAvailableSizeForImage(k,f,.95);w=k;w=parseInt(w.getAttribute("data-nativeWidth"),10)||w.naturalWidth;y=k;y=parseInt(y.getAttribute("data-nativeHeight"),10)||y.naturalHeight;w&&y||(KindleDebug.warn("Defaulting image width/height. It'll be scaled down to fit."),
y=w=1E3);w=m(y,w,A.height,A.width);y=w.height;w=w.width;var B=k;var C=y;z=w;var D=A.height,F=A.width;A={};var M=parseInt($(B).css("padding-top"),10),N=parseInt($(B).css("padding-bottom"),10),L=M+N;L+C>D&&(C=C+L-D,D=Math.ceil(M/L*C),A.top=M-D,A.bottom=N-(C-D));M=parseInt($(B).css("padding-left"),10);B=parseInt($(B).css("padding-right"),10);N=M+B;N+z>F&&(C=z+N-F,z=Math.ceil(M/N*C),A.left=M-z,A.right=B-(C-z));z=A;A=q(k);A=A+("height: "+y+"px; width: "+w+"px; ")+((void 0!==z.top?"padding-top: "+z.top+
"px; ":"")+(void 0!==z.bottom?"padding-bottom: "+z.bottom+"px; ":"")+(void 0!==z.left?"padding-left: "+z.left+"px; ":"")+(void 0!==z.right?"padding-right: "+z.right+"px; ":""));k.setAttribute("style",A);g(r)||c.padImageIfNeeded(r)}r=c.calculateOverlappingImageSets(t,g);for(k=3;0<k&&0<r.length;){for(v=0;v<r.length;v+=1)if(y=r[v],w=y.imgs,F=m(y.height,y.width,.95*f.height,.95*f.width).scale,0!==F)for(C=0;C<w.length;C+=1)A=w[C],z=A.height*F,y=A.width*F,1>z||1>y||(B=q(A),B+="height: "+z+"px; width: "+
y+"px;",A.setAttribute("style",B));--k;r=c.calculateOverlappingImageSets(t,g)}}if("vertical"!==c.getWritingMode())for(t=a.getElementsByTagName("TABLE"),v=0;v<t.length;v++)k=t[v],z=f,w=r=0,y=parseInt(k.getAttribute("data-nativeWidth"),10),z=z.parentWidth||z.width,y||(y=$(k).width(),k.setAttribute("data-nativeWidth",y)),A=Math.min(parseInt(k.getAttribute("data-nativeLeftOffset"),10),k.offsetLeft),A||(A=k.offsetLeft,k.setAttribute("data-nativeLeftOffset",A)),F=$(k.offsetParent).width()||z,F=Math.min(F-
A,.95*z),y>F&&(w=F/y),0<w&&(r=w),0!==r&&(w="scale("+r+")",r=q(k),r+=" -moz-transform: "+w+"; -webkit-transform:"+w+"; -o-transform:"+w+"; -ms-transform:"+w+"; ms-transform:"+w+"; transform:"+w+"; ",w="top ",w="right"===$(k).css("float")?w+"right":w+"left",k.setAttribute("style",r+(" -moz-transform-origin: "+w+"; -webkit-transform-origin: "+w+"; -o-transform-origin: "+w+"; -ms-transform-origin "+w+"; ms-transform-origin "+w+"; transform-origin "+w+"; ")));setTimeout(n.resolve,10)}};if(window.ActiveXObject&&
window.XMLHttpRequest)$(a.ownerDocument).ready(u);else{var x=h.createSubTimer("(WAIT) image-loading");e(a,function(){x.endTimer();u()})}return n.promise().then(function(){l.endTimer()})}return{fitToViewport:function(a,c,f,h){return d(a,c,f,h)},resize:function(a,c){if("absolute"===$(a).css("position"))if(0<c.width&&0<c.height){c=0<a.offsetWidth&&0<a.offsetHeight?Math.min(c.width/a.offsetWidth,c.height/a.offsetHeight):1;var f="scale("+c+")";$(a).css({"-moz-transform":f,"-moz-transform-origin":"left top",
"-webkit-transform":f,"-webkit-transform-origin":"left top","-o-transform":f,"-o-transform-origin":"left top","ms-transform":f,"ms-transform-origin":"left top","-ms-transform":f,"-ms-transform-origin":"left top",transform:f,"transform-origin":"left top"});a={width:$(a).width()*c,height:$(a).height()*c}}else a=void 0;else a=void 0;return a}}}(),KindleRendererImageRenderer=function(){function q(r,k){for(var y=k.length,w=document.createElement("canvas"),z=0,A=0,B=9999,C=0;C<y;C+=6)z=Math.max(z,k[C+1]+
k[C+5]),A=Math.max(A,k[C]+k[C+4]),B=Math.min(B,k[C+2]);w.height=z;w.width=A;m(r,k,w);y=Math.sqrt(y/6);k=z+y*B*2;B=A+y*B*2;y=$(r).height();r=$(r).width();z=y===k?z:y;A=r===B?A:r;$(w).css({height:z,width:A});return w}function m(r,k,y){for(var w,z,A,B,C,D=k.length,F=y.getContext("2d"),M=0;M<D;M+=6)y=k[M],w=k[M+1],z=k[M+2],A=k[M+3],B=k[M+4],C=k[M+5],F.drawImage(r,z,A,B,C,y,w,B,C)}function g(r){function k(z,A){return parseInt(z.name.match(t),10)-parseInt(A.name.match(t),10)}for(var y in r){var w=r[y].parent;
if(void 0===u[w]||null===u[w])u[w]=[];u[w].push({name:r[y].name,width:r[y].width,height:r[y].height})}for(y in u)u[y].sort(k)}function b(r,k,y,w){var z=k&&k.metadata||y&&y.metadata;if(z&&z.map){$(r).css("display","none");var A,B=function(){r.parentNode&&(A?m(r,z.map,A):(A=q(r,z.map),$(r.parentNode).append(A)))},C=KindleHostDeviceDetector.hasMissingImgOnLoadProblem&&KindleHostDeviceDetector.hasMissingImgOnLoadProblem();if(C)var D=v.map(function(F){return setTimeout(B,F)});r.onload=function(){B();C&&
D.forEach(function(F){clearTimeout(F)})}}else KindleHostDeviceDetector.hasImageRenderingProblem&&KindleHostDeviceDetector.hasImageRenderingProblem()&&$(r).attr("data-repaint-on-show","1");k&&k[w]?r.src=k[w]:y&&y[w]&&(r.src=y[w])}function e(r){r=r.split("url(")[1].split(")")[0].split("resources");bgImgFilepath=r[0];bgImgResourceName="resources"+r[r.length-1];return{bgImgFilepath:bgImgFilepath,bgImgResourceName:bgImgResourceName}}function d(r,k,y){"%"===r.substring(r.length-1,r.length)?k=0!==k?parseFloat(r)/
100*y/k:1:"px"===r.substring(r.length-2,r.length)?(r=parseFloat(r),k=0!==k?r/k:1):k=1;return k}function a(r,k,y,w){var z=k.css("background-size").split(",")[0].trim().split(" "),A,B=!1,C=!1;"auto"===z[0]?z=A="100%":"cover"===z[0]?(B=!0,z=A="100%"):"contain"===z[0]?(C=!0,z=A="100%"):1===z.length?(A=z[0],z="100%"):(A=z[0],z=z[1]);r.w=d(A,y,k.width());r.h=d(z,w,k.height());B?(k=r.w>r.h?r.w:r.h,r.w=k,r.h=k):C&&(k=r.w<r.h?r.w:r.h,r.w=k,r.h=k)}function c(r,k,y,w,z,A,B){var C=[],D=[],F,M=0,N=0;for(F=0;F<
z;F++)C[F]=A*y[F],D[F]=B*w[F],r[F]=Math.round(C[F]),M+=D[F],k[F]=Math.round(M-N),N+=k[F]}function f(r,k){if("top"===r||"left"===r)r="0%";"center"===r&&(r="50%");if("bottom"===r||"right"===r)r="100%";r="%"===r.substring(r.length-1,r.length)?parseFloat(r)/100*k:"px"===r.substring(r.length-2,r.length)?parseFloat(r):0;return Math.round(r)}function h(r,k){var y=k.css("background-position").split(",")[0].trim().split(" ");if(1===y.length){var w=y[0];y="50%"}else w=y[0],y=y[1];r.x=f(w,k.width());r.y=f(y,
k.height())}function n(r){function k(){L++;L===B&&y.css("background-image",N)}var y=$(r),w=y.css("background-image");if("none"!==w&&"inherit"!==w){w=e(w);var z=w.bgImgFilepath,A=u[w.bgImgResourceName];if(void 0!==A&&null!==A){w=0;var B=A.length;y.addClass("amzn-sliced-bgimg-ori");var C=[],D=[],F=0,M=0,N="";F=[];for(w=0;w<B;w++)F[w]="url("+z+A[w].name+")",C[w]=A[w].width,D[w]=A[w].height,M+=D[w],N+=F[w],w!==B-1&&(N+=",");F=C[0];var L=0;for(w=0;w<B;w++)jqImgSlicedNode=$("<img/>"),jqImgSlicedNode[0].onload=
k,jqImgSlicedNode[0].src=z+A[w].name;w={w:1,h:1};a(w,y,F,M);M=[];z=[];c(M,z,C,D,B,w.w,w.h);C="";for(w=0;w<B;w++)C=C+M[w]+"px "+z[w]+"px",w!==B-1&&(C+=",");r.setAttribute("style",(r.style||"")+("; background-size: "+C+" !important;"));C={x:0,y:0};h(C,y);D=[];M=[];A=0;var P=F="";for(w=0;w<B;w++)D[w]=C.x,M[w]=C.y+A,F=F+D[w]+"px "+M[w]+"px",P+="no-repeat",A+=z[w],w!==B-1&&(F+=",",P+=",");r.setAttribute("style",(r.style||"")+("; background-position: "+F+" !important;"));y.css("background-repeat",P)}}}
function l(r,k,y){var w=[],z=[],A=[],B=[],C=0,D,F=$(k).children();for(D=0;D<F.length;D++)w[D]=F[D].width,z[D]=F[D].height,C+=z[D];D=w[0];if(0!==C&&0!==D){$(r).css("display","block");var M=parseInt($(r).css("height"),10),N=parseInt($(r).css("width"),10);0===N&&0===M?(N=D,M=C):0===M?M=Math.round(C/D*N):0===N&&(N=Math.round(D/C*M));$(r).width(N);$(r).height(M);c(A,B,w,z,F.length,N/D,M/C);for(D=0;D<F.length;D++)$(F[D]).width(A[D]),$(F[D]).height(B[D]),$(F[D]).css("top","0px"),$(F[D]).css("left","0px"),
$(F[D]).css("position","relative"),$(F[D]).css("border","none"),$(F[D]).css("display","block"),y&&$(F[D]).css("margin-bottom","-1px");$(k).css("line-height",0);$(k).css("display","inline-block");$(k).css("position",$(r).css("position"));$(k).css("width",$(r).css("width"));$(k).css("height",$(r).css("height"));$(k).css("top",$(r).css("top"));$(k).css("left",$(r).css("left"));$(k).css("bottom",$(r).css("bottom"));$(k).css("right",$(r).css("right"));$(k).css("float",$(r).css("float"));$(k).css("padding",
$(r).css("padding"));$(k).css("border",$(r).css("border"))}}var u={},x=null,t=new RegExp(/\d+$/),v=[200,500,1E3];return{initialize:function(r){null!==r.coverResource&&void 0!==r.coverResource&&(x=r.resourceManifest[r.coverResource].name);r=r.compositeResourceManifest;void 0!==r&&null!==r?g(r):u={}},cleanup:function(){u={}},getCompositeData:function(){return u},getCoverImageSlices:function(){return u[x]},resolveCompositeResources:function(r){if(!$.isEmptyObject(u)){for(var k=[],y=0;y<r.length;y++){var w=
[],z=w,A=r[y];if(void 0!==u[A]&&null!==u[A])for(var B=u[A].length,C=0;C<B;C++)z.push(u[A][C].name);k=0<w.length?k.concat(w):k.concat(r[y])}r=k}return r},loadImage:function(r,k,y,w){var z=u[w];if(void 0===z||null===z)b(r,k,y,w);else{$(r).addClass("amzn-sliced-inimg-ori");(w=r.getAttribute("alt"))&&r.setAttribute("data-alt-text",w);r.removeAttribute("alt");$(r).css("display","none");w=$("<div/>",{"class":"amzn-sliced-inimg-div"});w.insertBefore($(r));w.attr("data-nid",r.getAttribute("data-nid"));for(var A=
z.length,B=0;B<A;B++)r=$("<img/>",{"class":"amzn-sliced-inimg-imgslice"}),r.width(z[B].width),r.height(z[B].height),b(r[0],k,y,z[B].name),r.appendTo(w)}},scaleCompositeInlineImages:function(r){if(!$.isEmptyObject(u)){var k=r.getElementsByClassName("amzn-sliced-inimg-ori");r=r.getElementsByClassName("amzn-sliced-inimg-div");var y=k.length,w;for(w=0;w<y;w++){l(k[w],r[w],!0);var z=$(r[w]).children()[0],A=k[w].getAttribute("data-alt-text");A&&z.setAttribute("alt",A)}$(k).remove()}},scaleCompositeBackgroundImages:function(r){if(!$.isEmptyObject(u)){r=
$(r).find("*");for(var k=0;k<r.length;k++)n(r[k])}},scaleImageSlices:l,createCanvasImage:q,scaleCanvas:function(r,k){for(var y=r,w=y.width,z=y.height;w>k.width&&z>k.height;){var A=Math.max(k.width,Math.round(.75*w)),B=Math.max(k.height,Math.round(.75*z)),C=document.createElement("canvas"),D=C.getContext("2d");C.width=A;C.height=B;$(C).attr("id","c1");D.drawImage(y,0,0,w,z,0,0,A,B);D.globalAlpha=.5;D.drawImage(r,0,0,r.width,r.height,0,0,A,B);y=C;w=y.width;z=y.height}return y}}}(),KindleRendererWritingModeFactory=
function(){function q(b,e,d,a,c){var f=.25*Math.min(d,a),h=Math.abs(d-a);return(b<e?b+d-e:e+a-b)>f&&(!c||h<f)}function m(){var b=KindleRendererDeviceSpecific.usesDocRelativeVerticalCoordinates(),e=0,d=!1;return{getWritingMode:function(){return"vertical"},resetHeight:function(a){$(a).css("width",$(a.parentNode).width()+"px")},resetWidth:function(a){$(a).css("height",$(a.parentNode).height()+"px")},resetIframeDimensions:function(a){$(a).css({width:$(a.parentNode).width()+"px",height:$(a.parentNode).height()+
"px"})},padImageIfNeeded:function(a){var c=$(a).css("margin-left");1>=parseInt(c,10)&&$(a).css("margin-left","2px")},getAvailableSizeForImage:function(a,c,f){var h=Math.min(a.getAttribute("data-nativeTopOffset"),a.offsetTop),n=$(a.offsetParent).outerHeight()||c.height,l=$(a.offsetParent).outerWidth()||c.width;n=Math.min(n-h,c.height*f);l=Math.min(l,c.width*f);"none"!==$(a).css("float")&&(f=$(a).parent(),a=parseInt($(f).css("line-height"),10),f=parseInt($(f).css("font-size"),10),l=Math.min(l,c.width-
(a+f)));return{width:l,height:n}},calculateOverlappingImageSets:function(a,c){function f(r,k){return r.offsetLeft-k.offsetLeft}var h=[];if(1<a.length){a=Array.prototype.slice.call(a).sort(f);for(var n=null,l=a[0],u=l.offsetLeft+l.width,x,t,v=1;v<a.length;++v)x=a[v],c(x)||(t=x.offsetLeft+x.width,x.offsetLeft<=u?(n||(n={left:l.offsetLeft,right:u,imgs:[l]}),t>n.right&&(n.right=t),n.imgs.push(x)):n&&(h.push({height:0,width:n.right-n.left,imgs:n.imgs}),n=null),l=x,u=n?n.right:t);n&&h.push({height:0,width:n.right-
n.left,imgs:n.imgs})}return h},forceRepaint:function(a){a.contentDocument&&(a.contentDocument.body.style.top=0,setTimeout(function(){a.contentDocument.body.style.top=""},1))},setHeight:function(a,c){$(a).css("width",c)},setWidth:function(a,c){$(a).css("height",c)},fitToBottomOfFrame:function(a,c,f){$(c).css({height:"100%",width:$(a).width()-f+1,top:0,left:$(a).position().left-1})},height:function(a){return $(a).width()},width:function(a){return $(a).height()},prepareForPagination:function(a){e=$(a).width();
this.scrollToTopOfDocument(a);d=0<$(a.contentDocument).find("table").length},getBorderMap:function(a,c){var f,h;for(f=0;f<a.length;f++){var n=a[f];var l=n.getBoundingClientRect();(h=$(n).css("border-right-style"))&&"none"!==h&&(h=parseInt($(n).css("border-right-width"),10))&&(h={borderStart:e-l.right-h,borderEnd:e-l.right},c.top.push(h));(h=$(n).css("border-left-style"))&&"none"!==h&&(n=parseInt($(n).css("border-left-width"),10))&&(h={borderStart:e-l.left,borderEnd:e-l.left+n},c.bottom.push(h))}},
getTransformedClientRects:function(a,c,f){var h=a.length,n=[],l=c&&c.deltaX||0;f=c&&c.fontSize||f&&parseInt(f.fontSize,10)||void 0;var u=0;1<a.length&&(1>=a[0].height&&++u,1>=a[a.length-1].height&&--h);for(;u<h;u++){var x=a[u],t=x.right+l-(c&&parseInt(c.ownerDocument.body.style.left,10)||0),v=f&&"IMG"!==c.tagName?f:x.width;x={top:x.top,bottom:x.bottom,height:x.height,left:e-(t-v),right:e-t,width:v};v=c;t=x;if(d){var r=$(v).closest("TBODY")[0];if(r){var k=$(r).parent();var y=$(k).width();k=y;var w=
$(v).closest("TD")[0];w&&(k-=$(w).width());r=y-$(r).width();k+=r;t.left+=k;t.right+=k}}v&&v.getAttribute&&v.getAttribute("data-isTextCombineBlock")&&(r=parseInt($(v).css("font-size"),10),v=t.height-r,r=t.width-r,0<v&&(k=Math.ceil(v/2),t.top+=k,t.bottom-=k,t.height-=v),0>r&&(v=Math.ceil(r/2),t.left-=v,t.right+=v,t.width-=r));n.push(x)}return n},getRectsAdjustedForAnnotationMarks:function(a,c){var f=a.length,h=[];c=Math.ceil(c/2)+1;for(var n=0;n<f;n++){var l=a[n];h.push({top:l.top,bottom:l.bottom,height:l.height,
left:l.left,right:l.right-c,width:l.width+c})}return h},unionRect:function(a){var c=a[0];c={left:c.top,right:c.bottom,bottom:c.left,top:c.right};for(var f=1;f<a.length;++f)c.top=Math.min(c.top,a[f].right),c.bottom=Math.max(c.bottom,a[f].left),c.right=Math.max(c.right,a[f].bottom),c.left=Math.min(c.left,a[f].top);return c},clientRectTop:function(a){return a.right},clientRectBottom:function(a){return a.left},clientRectLeft:function(a){return a.top},clientRectRight:function(a){return a.bottom},clientRectWidth:function(a){return a.height},
clientRectHeight:function(a){return a.width},clientRectCompare:function(a,c){return q(a.right,c.right,a.width,c.width,!1)?a.top-c.top:a.right-c.right},checkIfRectsOnSameLine:function(a,c){return q(a.right,c.right,a.width,c.width,!1)},scrollToTopOfDocument:function(a){var c=0;b&&(c=a.contentDocument.width-e);$(a.contentWindow).scrollLeft(c);a.contentDocument.body.style.top=0;a.contentDocument.body.style.left=0},scrollTop:function(a,c){a.contentDocument.body.style.left=c},getRectBoundariesForScreen:function(a,
c){for(var f=[],h=a.length,n=0;n<h;n++)f.push({left:e-(a[n].left-c),top:a[n].top,right:e-(a[n].right-c),bottom:a[n].bottom});return f},isPointOnVisiblePage:function(a,c,f,h){return f>c},checkIfNewLine:function(a,c,f){return void 0===c||!q(a.right,c.right,a.width,c.width,f)},updateLineBounds:function(a,c,f,h,n){a.left=n-f.left;a.right=n-f.right;a.height=c&&h?h.top-a.top:f.bottom-a.top;a.width=a.right-a.left},updateLineHeightOfBounds:function(a,c){a.left=a.left>=c.left?a.left:c.left;a.right=a.right<=
c.right?a.right:c.right;a.top=c.top;a.bottom=c.bottom},updateDivIfNewLineOrImageBound:function(a,c,f,h,n,l){if(a.isNewLine||a.isImageBound)a.lineBounds={top:a.isNewLine?c.top:a.lineBounds.top+a.lineBounds.height,height:c.height,left:c.left,right:c.right,width:c.width};a.isImageBound=n;a.isNewLine=this.checkIfNewLine(a.lineBounds,f,!0);(n=a.isNewLine||a.isImageBound)&&this.updateLineBounds(a.lineBounds,!a.isNewLine&&!(h||void 0===f),c,f,l);return n},positionDivAfterWord:function(a,c,f,h){a.style.top=
c.top+f;a.style.left=h-c.left+c.width+f},getDeltaX:function(a,c){var f=0;if(KindleHostDeviceDetector.isiOS()&&6>parseInt(KindleHostDeviceDetector.getOSMajorVersion(),10)){if("RUBY"===a.tagName){c=c.createRange();c.selectNodeContents(a);c=c.getClientRects();var h=a.getClientRects();h&&c&&h.length&&c.length&&(f=h[0].left-c[0].left)}if(a.parentNode&&a.parentNode.parentNode){c=a.nodeType===Node.TEXT_NODE?a.parentNode:a;a=a.nodeType!==Node.TEXT_NODE&&"RUBY"!==a.tagName&&"inline"===$(c).css("display");
h="inline-block"===$(c).css("display");var n="inline"===$(c.parentNode).css("display");if((a||h)&&n){f+=-c.getBoundingClientRect().right;a=c;do h=a,a=a.parentNode;while(a&&"block"!==$(a).css("display"));n=h;if(a){h=n;do h=h.nextElementSibling;while(h&&"block"!==$(h).css("display"));do n=n.previousElementSibling;while(n&&"block"!==$(n).css("display"));n=n?n.getBoundingClientRect().left-parseInt($(n).css("margin-left"),10):a.getBoundingClientRect().right;a=h?h.getBoundingClientRect().right+parseInt($(h).css("margin-right"),
10):a.getBoundingClientRect().left;c=n-(c.getBoundingClientRect().left-a)}else c=c.getBoundingClientRect().right;f+=c}}}return f},floatToTopOfIframe:function(a,c){var f=a.document.body,h=f.getBoundingClientRect();f=a.getComputedStyle(f);$(c).css({position:"absolute",top:parseInt(f.top,10)-h.top,left:parseInt(f.left,10)-(h.left+a.document.width-e)})}}}function g(){return{getWritingMode:function(){return"horizontal"},resetHeight:function(b){$(b).css("height",$(b.parentNode).height()+"px")},resetWidth:function(b){$(b).css("width",
$(b.parentNode).width()+"px")},resetIframeDimensions:function(b){$(b).css({height:$(b.parentNode).height()+"px",width:$(b.parentNode).width()+"px"})},padImageIfNeeded:function(b){var e=$(b).css("margin-bottom");1>=parseInt(e,10)&&$(b).css("margin-bottom","2px")},getAvailableSizeForImage:function(b,e,d){var a=Math.min(b.getAttribute("data-nativeLeftOffset"),b.offsetLeft),c=$(b.offsetParent).outerHeight()||e.height,f=$(b.offsetParent).outerWidth()||e.width;c=Math.min(c,e.height*d);f=Math.min(f-a,e.width*
d);"none"!==$(b).css("float")&&(d=$(b).parent(),b=parseInt($(d).css("line-height"),10),d=parseInt($(d).css("font-size"),10),c=Math.min(c,e.height-(b+d)));return{width:f,height:c}},calculateOverlappingImageSets:function(b,e){function d(x,t){return x.offsetTop-t.offsetTop}var a=[];if(1<b.length){b=Array.prototype.slice.call(b).sort(d);for(var c=null,f=b[0],h=f.offsetTop+f.height,n,l,u=1;u<b.length;++u)n=b[u],e(n)||(l=n.offsetTop+n.height,n.offsetTop<=h?(c||(c={top:f.offsetTop,bottom:h,imgs:[f]}),l>
c.bottom&&(c.bottom=l),c.imgs.push(n)):c&&(a.push({height:c.bottom-c.top,width:0,imgs:c.imgs}),c=null),f=n,h=c?c.bottom:l);c&&a.push({height:c.bottom-c.top,width:0,imgs:c.imgs})}return a},forceRepaint:function(b){},setHeight:function(b,e){$(b).css("height",e)},setWidth:function(b,e){$(b).css("width",e)},fitToBottomOfFrame:function(b,e,d){d=$(b).height()-d+1;b=$(b).position().top+$(b).height()-d+1;$(e).css({height:d,width:"100%",top:b,left:0})},height:function(b){return $(b).height()},width:function(b){return $(b).width()},
prepareForPagination:function(b){this.scrollToTopOfDocument(b)},getBorderMap:function(b,e){var d,a;for(d=0;d<b.length;d++){var c=b[d];var f=c.getBoundingClientRect();(a=$(c).css("border-top-style"))&&"none"!==a&&(a=parseInt($(c).css("border-top-width"),10))&&(a={borderStart:f.top-a,borderEnd:f.top},e.top.push(a));(a=$(c).css("border-bottom-style"))&&"none"!==a&&(c=parseInt($(c).css("border-bottom-width"),10))&&(a={borderStart:f.bottom,borderEnd:f.bottom+c},e.bottom.push(a))}},getTransformedClientRects:function(b,
e,d){1<b.length&&(1>=b[0].width&&(b=Array.prototype.slice.call(b,1)),1>=b[b.length-1].width&&(b=Array.prototype.slice.call(b,0,-1)));if(e&&(d=[],e=parseInt(e.ownerDocument.body.style.top,10),0!==e)){for(var a=0;a<b.length;++a){var c=b[a];d.push({top:c.top-e,bottom:c.bottom-e,height:c.height,left:c.left,right:c.right,width:c.width})}b=d}return b},getRectsAdjustedForAnnotationMarks:function(b,e){var d=b.length,a=[];e=Math.ceil(e/2)+1;for(var c=0;c<d;c++){var f=b[c];a.push({top:f.top-e,bottom:f.bottom,
height:f.height+e,left:f.left,right:f.right,width:f.width})}return a},unionRect:function(b){var e=b[0];e={top:e.top,bottom:e.bottom,left:e.left,right:e.right};for(var d=1;d<b.length;++d)e.top=Math.min(e.top,b[d].top),e.right=Math.max(e.right,b[d].right),e.bottom=Math.max(e.bottom,b[d].bottom),e.left=Math.min(e.left,b[d].left);return e},clientRectTop:function(b){return b.top},clientRectBottom:function(b){return b.bottom},clientRectLeft:function(b){return b.left},clientRectRight:function(b){return b.right},
clientRectWidth:function(b){return b.width},clientRectHeight:function(b){return b.height},clientRectCompare:function(b,e){return q(b.top,e.top,b.height,e.height,!1)?b.left-e.left:b.top-e.top},checkIfRectsOnSameLine:function(b,e){return q(b.top,e.top,b.height,e.height,!1)},scrollToTopOfDocument:function(b){$(b.contentWindow).scrollTop(0);b.contentDocument.body.style.top=0;b.contentDocument.body.style.left=0},scrollTop:function(b,e){b.contentDocument.body.style.top=-e},getRectBoundariesForScreen:function(b,
e){for(var d=[],a=b.length,c=0;c<a;c++)d.push({left:b[c].left,top:b[c].top-e,right:b[c].right,bottom:b[c].bottom-e});return d},isPointOnVisiblePage:function(b,e,d,a){return a<b-e},checkIfNewLine:function(b,e,d){return void 0===e||!q(b.top,e.top,b.height,e.height,d)},updateLineBounds:function(b,e,d,a){b.top=d.top;b.bottom=d.bottom;b.height=b.bottom-b.top;b.width=e&&a?a.left-b.left:d.right-b.left},updateLineHeightOfBounds:function(b,e){b.top=b.top?b.top<=e.top?b.top:e.top:e.top;b.bottom=b.bottom?b.bottom>=
e.bottom?b.bottom:e.bottom:e.bottom;b.left=e.left;b.right=e.right},updateDivIfNewLineOrImageBound:function(b,e,d,a,c){if(b.isNewLine||b.isImageBound)b.lineBounds={top:e.top,height:e.height,left:b.isNewLine?e.left:b.lineBounds.left+b.lineBounds.width,right:e.right,width:e.width};b.isImageBound=c;b.isNewLine=this.checkIfNewLine(b.lineBounds,d,!0);(c=b.isNewLine||b.isImageBound)&&this.updateLineBounds(b.lineBounds,!b.isNewLine&&!(a||void 0===d),e,d);return c},positionDivAfterWord:function(b,e,d,a){b.style.top=
e.top+d;b.style.left=e.left+e.width+d},getDeltaX:function(b){return 0},floatToTopOfIframe:function(b,e){var d=b.document.body,a=d.getBoundingClientRect();b=b.getComputedStyle(d);$(e).css({position:"absolute",top:parseInt(b.top,10)-a.top,left:parseInt(b.left,10)-a.left})}}}return{buildIFrameWritingMode:function(b){if(!b.contentDocument)return g();if(KindleRendererDeviceSpecific.needsWritingModeSpecifiedOnBody()){var e=b.contentDocument,d=e.documentElement;e=e.body;if("vertical-rl"===$(d).css("-webkit-writing-mode")){var a=
d.getAttribute("style"),c=e.getAttribute("style");c=c?c+";":"";d.setAttribute("style",(a?a+";":"")+"-webkit-writing-mode: vertical-rl !important;");e.setAttribute("style",c+"-webkit-writing-mode: vertical-rl !important;")}}return(b=$(b.contentDocument.body).css("-webkit-writing-mode"))&&null!==b.match(/^vertical/)?m():g()},buildHorizontalWritingMode:g,buildVerticalWritingMode:m}}(),KindleRendererContentReflow=function(){function q(f){f=f.contentDocument.getElementsByTagName("body")[0];return"absolute"===
$(f).css("position")}function m(f,h){KindleRendererLanguageOptions.getNeedsPageRefresh()&&!q(f)?(f.contentDocument.body.style.display="none",setTimeout(function(){f.contentDocument.body.style.display="block";h()},1)):h()}function g(f,h,n,l,u,x){null===c&&(c=KindleRendererWordMapGeneratorFactory.buildWordMapGeneratorForWordBounds());var t=u.createSubTimer("preparation");KindleRendererContentCorrection.applyDocumentWideCorrections(f.contentWindow,f.contentDocument,f.writingMode,t);m(f,function(){f.writingMode.prepareForPagination(f);
var v=f.contentDocument.getElementById("content-overlays");f.writingMode.floatToTopOfIframe(f.contentWindow,v);t.endTimer();var r=u.createSubTimer("word-map");c.createWordMap(f.contentDocument,f.contentWindow,h,f.writingMode,n,f.processingRequestId,r).then(function(k,y,w,z){function A(C){B.endTimer();x(C)}r.endTimer();KindleRendererContentCorrection.cleanup(f.contentDocument.body);var B=u.createSubTimer("height-map");q(f)?KindlePaginatorFixedContent(f.contentDocument,k,$(f).parent().height(),A):KindlePaginatorScreenFragmentation(f.contentDocument,
k,y,w,c,f.writingMode.height($(f).parent()),f.writingMode,A);m(f,function(){})},l.reject)})}function b(f,h,n,l){if(f.processingRequestId.id===h.requestId){f.writingMode.scrollToTopOfDocument(f);f.writingMode.resetHeight(f);var u={height:$(f).parent().height(),width:$(f).parent().width()},x=f.contentDocument.getElementsByTagName("body")[0];if(void 0!==KindleRendererSettings.getSettings().initialExpandedBodyHeight){var t=parseInt($(x).css("margin-top"),10),v=parseInt($(x).css("margin-bottom"),10);x.style.height=
parseInt(u.height,10)-t-v+"px"}t=x.getElementsByClassName("k4w-margin");for(v=0;v<t.length;v+=1){var r=parseInt(t[v].getAttribute("vertical"),10);0<r&&(t[v].style.marginTop=Math.round(.01*r*u.height)+"px")}KindleRendererElementFitting.fitToViewport(x,f.writingMode,u,h.contentLoadMetrics).then(function(){f.processingRequestId.id!==h.requestId?(h.contentLoadMetrics.addCount("Cancelled",1),h.contentLoadMetrics.endTimer()):e(f,h,n,l)},l.reject)}}function e(f,h,n,l){h.contentLoadMetrics.endTimer();var u=
h.metrics.createSubTimer("pagination");g(f,n,h.requestId,l,u,function(x){u.endTimer();f.processingRequestId.id!==h.requestId?(h.contentLoadMetrics.addCount("Cancelled",1),h.contentLoadMetrics.endTimer()):(f.screenManager=x,h.contentLoadMetrics.endTimer(),l.resolve(h))})}function d(f,h){var n=KindleRendererDeviceSpecific.reflowTimeout();0<n&&setTimeout(function(){(h.state?"pending"!==h.state():h.isRejected()||h.isResolved())||(f.contentLoadMetrics.addCount("Timeout",1),f.contentLoadMetrics.endTimer(),
h.reject())},n)}function a(f,h,n){var l=new jQuery.Deferred;d(h,l);var u=h.contentLoadMetrics.createSubTimer("(YIELD) begin-element-fitting");setTimeout(function(){u.endTimer();b(f,h,n,l)},KindleRendererDeviceSpecific.drawYieldUpdateTime());return l.promise()}var c=null;return{initialize:function(){KindleRendererContentCorrection.initialize()},reflow:function(f,h,n){return a(f,h,n)}}}(),KindlePaginatorFixedContent=function(q,m,g,b){q={minDocTop:0,maxDocTop:0,docBottom:g,wordMap:m};(function(e){e.minPosition=
Infinity;e.maxPosition=-Infinity;for(var d in m){var a=parseInt(d,10);a>e.maxPosition&&(e.maxPosition=a);a<e.minPosition&&(e.minPosition=a)}})(q);(function(e){e.hasNextScreen=function(d){return 0===d};e.hasPreviousScreen=function(d){return d===g};e.getFirstReadingPositionAtHeight=function(d){return null};e.getFirstEmptySpaceBeforeHeight=function(d){return 0};e.getTopOfNodeAtPosition=function(d,a){return 0};e.findNextScreen=function(d){return e.hasNextScreen(d)?{topOfScreen:0,bottomOfScreen:g}:null};
e.findPreviousScreen=function(d){return this.hasPreviousScreen(d)?{topOfScreen:0,bottomOfScreen:g}:null}})(q);b(q)},KindlePaginatorHeightMapGenerator=function(){function q(a,c,f,h,n,l){0>f&&(f=0);0>h&&(h=0);if(c.previousTop===f&&c.previousBottom===h&&c.previousFontSize===l)return!1;c.previousTop=f;c.previousBottom=h;c.previousFontSize=l;f<a.minDocTop&&(a.minDocTop=f);f>a.maxDocTop&&(a.maxDocTop=f);c=h;c>a.docBottom&&(a.docBottom=c);h-=f;void 0===l&&(l=h);h=f+Math.floor((h-l)/2);l=h+l;a=a.nodeHeightRanges;
for(f+=1;f<h;)0<=a[f]||(a[f]=-n),++f;for(;f<l;)0<=a[f]||(a[f]=n),++f;for(;f<c;)void 0===a[f]&&(a[f]=-n),++f;return!0}function m(a){a=a.nodeHeightRanges;for(var c=a.length,f=0,h,n,l,u,x;f<c;){for(;0>a[f];)a[f]=-a[f],++f;if(0<=a[f]){for(++f;0<=a[f];)++f;if(0>a[f]){h=f;u=a[h-1];for(++f;0>a[f];)++f;n=f-1;x=a[f];if(0<=x){l=Math.floor((h+n)/2);for(delete a[l];h<l;++h)a[h]=u;for(h=l+1;h<=n;++h)a[h]=x}else for(;h<=n;++h)a[h]=u}}++f}}function g(a,c,f,h,n,l,u){function x(){g(a+1,c,f,h,n,l,u)}var t=0;for(KindleRendererProcessTuning.startingOperation("HeightMap");a<
c.length;){var v=c[a],r=v.position,k=v.rect,y=h.clientRectTop(k);k=h.clientRectBottom(k);if(0<y||0<k){var w=Math.round(y);q(f,n,w,w+Math.round(k-y+1),r,v.fontSize)&&t++}if(t>u.count){KindleRendererProcessTuning.endingOperation("HeightMap",t);setTimeout(x,u.interval);return}a++}KindleRendererProcessTuning.endingOperation("HeightMap",t);m(f);setTimeout(l.resolve,u.interval)}function b(a){var c={};a=a.body;c.bodyDimensions={height:a.offsetHeight,width:a.offsetWidth};if(a=a.lastElementChild){var f=$(a);
a=f.offset();var h=f.width();f=f.height();c.lastElementPos={top:a.top,left:a.left,width:h,height:f}}return c}function e(a,c,f,h,n,l,u,x){if(f){var t=new jQuery.Deferred,v={count:KindleRendererProcessTuning.drawYieldFrequency("HeightMap"),interval:KindleRendererProcessTuning.drawYieldUpdateTime("HeightMap")};g(0,f,h,c,{},t,v);t.promise().then(function(){var r=Array.prototype.slice.call(a.getElementsByTagName("hr")),k,y=[];for(k=0;k<r.length;++k)y.push(r[k].getBoundingClientRect());y=c.getTransformedClientRects(y);
for(k=0;k<y.length;++k)l.push(y[k]);r=$(a.body).find("[data-hasCssBorder='true']");c.getBorderMap(r,u);r=[];r=r.concat(Array.prototype.slice.call(a.getElementsByClassName("page-break")));r=r.concat(Array.prototype.slice.call(a.getElementsByClassName("pagebreak")));k=[];for(y=0;y<r.length;++y)k.push(r[y].getBoundingClientRect());k=c.getTransformedClientRects(k);for(y=0;y<k.length;++y)n.push(Math.round(c.clientRectTop(k[y])));x()},function(){})}}function d(a,c,f){f=function(){u<a.minDocTop&&(a.minDocTop=
u);u>a.maxDocTop&&(a.maxDocTop=u);x>a.docBottom&&(a.docBottom=x);for(var v=u;v<x;v++)void 0===a.nodeHeightRanges[v]&&(a.nodeHeightRanges[v]="border-height")};var h=c.top;c=c.bottom;var n,l;for(n=0;n<h.length;n++){var u=Math.round(h[n].borderStart);var x=Math.round(h[n].borderEnd);f();var t=0;for(l=x;l<a.docBottom;l++)if(void 0===a.nodeHeightRanges[l]&&2>=t)a.nodeHeightRanges[l]="border-height",t++;else break}for(n=0;n<c.length;n++)for(u=Math.round(c[n].borderStart),x=Math.round(c[n].borderEnd),f(),
t=0,l=u;l>a.minDocTop;l--)if(void 0===a.nodeHeightRanges[l]&&2>=t)a.nodeHeightRanges[l]="border-height",t++;else break}return{getHeightMapTags:function(){return{HARD_PAGE_BREAK:"page-break",HORIZONTAL_RULE:"horizontal-rule",BORDER_HEIGHT:"border-height"}},createHeightMap:function(a,c,f,h){var n={nodeHeightRanges:[],minPosition:Infinity,maxPosition:0,minDocTop:Infinity,maxDocTop:0,docBottom:0};n.validationData=b(a);var l=[],u=[],x={top:[],bottom:[]};e(a,c,f,n,l,u,x,function(){for(var t=l,v=0;v<t.length;v++){var r=
t[v],k=n.nodeHeightRanges[r];if(void 0===k)n.nodeHeightRanges[r]="page-break";else if("page-break"!==k)for(var y=1;20>y;y++){if(n.nodeHeightRanges[r-y]!==k){n.nodeHeightRanges[r-y]="page-break";break}if(n.nodeHeightRanges[r+y]!==k){n.nodeHeightRanges[r+y]="page-break";break}}}for(t=0;t<u.length;t++)if(r=Math.round(c.clientRectTop(u[t])),v=Math.round(c.clientRectBottom(u[t])),v>r)for(r<n.minDocTop&&(n.minDocTop=r),r>n.maxDocTop&&(n.maxDocTop=r),v>n.docBottom&&(n.docBottom=v);r<v;r++)void 0===n.nodeHeightRanges[r]&&
(n.nodeHeightRanges[r]="horizontal-rule");d(n,x,c);l=null;h(n)})}}}(),KindlePaginator=function(){function q(b,e){null!==e&&(b.currentTopOfScreen=e.topOfScreen,b.currentBottomOfScreen=e.bottomOfScreen,g(b))}function m(b,e){null!==e&&(b.currentTopOfScreen=e.topOfScreen,b.currentBottomOfScreen=e.bottomOfScreen,g(b))}function g(b){var e=KindleRendererDeviceSpecific.animatePageFlip(),d=$(b);e&&(d.removeClass("pageTurnEnd"),d.addClass("pageTurnStart"));b.writingMode.scrollTop(b,b.currentTopOfScreen);b.writingMode.fitToBottomOfFrame(b,
b.pageOverflowDiv,b.currentBottomOfScreen-b.currentTopOfScreen);e&&(d.removeClass("pageTurnStart"),d.addClass("pageTurnEnd"))}return{scrollToTop:function(b,e){e=b.screenManager.findNextScreen(e||1>=b.screenManager.minDocTop?0:b.screenManager.minDocTop-1);q(b,e)},scrollToBottom:function(b,e){e=b.screenManager.findPreviousScreen(b.screenManager.docBottom,e);m(b,e)},scrollToPosition:function(b,e,d){e=b.screenManager.getTopOfNodeAtPosition(b.contentDocument,e);e=b.screenManager.getFirstEmptySpaceBeforeHeight(e);
d=b.screenManager.findNextScreen(d&&e<=b.screenManager.minDocTop?0:e);q(b,d)},matchFrames:function(b,e){var d=b.screenManager.getFirstReadingPositionAtHeight(b.currentTopOfScreen),a=b.screenManager.getTopOfNodeAtPosition(b.contentDocument,d)-b.currentTopOfScreen;b=b.currentBottomOfScreen-b.currentTopOfScreen;d=e.screenManager.getTopOfNodeAtPosition(e.contentDocument,d);e.currentTopOfScreen=d-a;e.currentBottomOfScreen=e.currentTopOfScreen+b;g(e)},getApproximateNumPreviousScreens:function(b){var e=
b.writingMode.height($(b).parent());return(b.currentTopOfScreen-b.screenManager.minDocTop)/e},getApproximateNumNextScreens:function(b){var e=b.writingMode.height($(b).parent());return(b.screenManager.maxDocTop-b.currentBottomOfScreen)/e},getCurrentPagePositionRange:function(b){var e=b.screenManager.getFirstReadingPositionAtHeight(b.currentTopOfScreen);b=b.screenManager.getFirstReadingPositionAtHeight(b.currentBottomOfScreen)-1;return{currentTopOfPage:e,currentBottomOfPage:b}},hasPreviousScreen:function(b){return b.screenManager.hasPreviousScreen(b.currentTopOfScreen)},
hasNextScreen:function(b){return b.screenManager.hasNextScreen(b.currentBottomOfScreen)},isPreviousFullScreen:function(b,e){e=b.screenManager.findPreviousScreen(b.currentTopOfScreen,e);return null!==e?b.screenManager.hasPreviousScreen(e.topOfScreen):!1},isNextFullScreen:function(b){var e=b.screenManager.findNextScreen(b.currentBottomOfScreen);return null!==e?b.screenManager.hasNextScreen(e.bottomOfScreen):!1},nextScreen:function(b,e){var d=b.screenManager.findNextScreen(b.currentBottomOfScreen);return null!==
d&&(e||b.screenManager.hasNextScreen(d.bottomOfScreen))?(q(b,d),!0):!1},previousScreen:function(b,e,d){d=b.screenManager.findPreviousScreen(b.currentTopOfScreen,d);return null!==d&&(e||b.screenManager.hasPreviousScreen(d.topOfScreen))?(m(b,d),!0):!1},getWordMap:function(b){return b.screenManager.wordMap},copyIframe:function(b,e){e.screenManager=b.screenManager;e.writingMode=b.writingMode;e.currentTopOfScreen=b.currentTopOfScreen;e.currentBottomOfScreen=b.currentBottomOfScreen;e.writingMode.resetIframeDimensions(e)},
getSelectableItemBoundariesForCurrentScreen:function(b){var e=KindlePaginator.getCurrentPagePositionRange(b),d=b.screenManager.wordMap,a=e.currentBottomOfPage,c={};for(e=e.currentTopOfPage;e<=a;++e){var f=d[e]&&d[e].rects;if(void 0!==f){var h=d[e].selectableRects;void 0!==h&&(f=h);c[e]=b.writingMode.getRectBoundariesForScreen(f,b.currentTopOfScreen)}}return c},getWordPositionsForCurrentScreen:function(b){var e=KindlePaginator.getCurrentPagePositionRange(b);b=b.screenManager.wordPositions;var d=e.currentTopOfPage,
a=e.currentBottomOfPage;e=null;if(b&&0<b.length){var c=KindleListUtilities.binarySearch(b,d);a=KindleListUtilities.binarySearch(b,a,void 0,c);b[c]<d&&++c;e=[];for(d=c;d<=a;++d)e.push(b[d])}return e},isPointOnVisiblePage:function(b,e,d){var a=b.writingMode.height(b),c=b.writingMode.height(b.pageOverflowDiv);return b.writingMode.isPointOnVisiblePage(a,c,e,d)},showEndOfDocument:function(b){b.currentTopOfScreen=b.currentBottomOfScreen;g(b)},isIframePaginationValid:function(b){var e=b.screenManager.validationData;
if(e){var d=b.contentDocument.body,a=e.bodyDimensions;b=$(b).parent();var c=-1!==window.navigator.userAgent.indexOf("MSIE");if(d.offsetHeight===a.height&&d.offsetWidth===a.width||d.offsetHeight<=b.height()&&d.offsetWidth<=b.width()||c&&(a=Math.abs(d.offsetHeight-a.height),d.offsetWidth===d.offsetWidth&&80>a))return!0;d=d.lastElementChild;return(e=e.lastElementPos)&&d?(b=$(d),d=b.offset(),a=b.width(),b=b.height(),d.top===e.top&&d.left===e.left&&a===e.width&&b===e.height):!1}return!0},clearIframePaginationValidation:function(b){b.screenManager.validationData=
null},cleanupIframe:function(b){b.screenManager=null}}}(),KindlePaginatorScreenFragmentation=function(q,m,g,b,e,d,a,c){function f(w){e.addBoundsForPosition(q,m,w,a)}function h(w){w.hasNextScreen=function(z){return this.maxDocTop>=z};w.hasPreviousScreen=function(z){return z>this.minDocTop};w.getFirstReadingPositionAtHeight=function(z){if(0===this.nodeHeightRanges.length)return null;a:{for(var A=this.nodeHeightRanges,B=z;B<A.length;B+=1){var C=A[B];if(void 0!==C&&C!==l&&C!==u&&C!==x){C=Math.abs(C);
break a}}C=this.maxPosition+1}f(C);if(void 0===this.wordMap[C])return C;A=a.unionRect(this.wordMap[C].rects);for(B=C;B>=this.minPosition;B--)if(f(B),void 0!==this.wordMap[B]){var D=a.unionRect(this.wordMap[B].rects);if(a.checkIfRectsOnSameLine(D,A)||D.top>=z)C=B;else break}return C};w.getFirstEmptySpaceBeforeHeight=function(z){for(var A,B=z;0<=B;--B)if(A=this.nodeHeightRanges[B],void 0===A||A===l)return B;return z};w.getTopOfNodeAtPosition=function(z,A){if(A<this.minPosition)return this.minDocTop;
if(A>this.maxPosition)return this.maxDocTop;for(;A<=this.maxPosition;){f(A);if(z=this.wordMap[A]){A=z.rects;z=Infinity;for(var B=0;B<A.length;B++){var C=a.clientRectTop(A[B]);C<z&&(z=C)}return Math.round(z)}A+=1}return this.minDocTop};w.findBestPaginationNearBottom=function(z,A){var B=this.nodeHeightRanges[A];return void 0!==B&&(f(B),B=this.wordMap[B]&&this.wordMap[B].rects,void 0!==B&&(B=Math.floor(a.clientRectTop(B[0])+1),z<=B&&B<A))?B:A-1};w.findBestPaginationNearTop=function(z,A){var B=this.nodeHeightRanges[z];
return void 0!==B&&(0>B&&(B=-B),f(B),B=this.wordMap[B]&&this.wordMap[B].rects,void 0!==B&&(B=Math.floor(a.clientRectBottom(B[B.length-1])),z<B&&B<=A))?B:z+1};w.findNextScreen=function(z){if(0===this.nodeHeightRanges.length||!this.hasNextScreen(z))return null;var A=this.nodeHeightRanges.length;if(0!==z&&this.nodeHeightRanges[z]!==l)for(var B=z+1;B<=A&&void 0===this.nodeHeightRanges[B];)z=B++;var C=z;B=0;var D,F=!1,M=!1;for(D=z;D<=A;D+=1){B+=1;var N=this.nodeHeightRanges[D];void 0===N?(C=D,M=F):N!==
l&&(F=!0);if(N===l&&D>z){B=D-z;M=F;break}else if(B>=d){C===z&&(C=this.findBestPaginationNearBottom(z+1,z+d-1),M=F);B=C-z;break}}C={topOfScreen:z,bottomOfScreen:0};D<A?C.bottomOfScreen=z+B:(C.bottomOfScreen=D,M=F);return M?C:D<A?this.findNextScreen(C.bottomOfScreen):null};w.findPreviousScreen=function(z,A){if(0===this.nodeHeightRanges.length||!this.hasPreviousScreen(z))return null;var B=z,C=0,D,F=!1,M=!1,N=z,L=z,P=0;for(D=z;0<=D;--D){C+=1;var V=this.nodeHeightRanges[D];void 0===V?(B=D,M=F,L=N,F||++P):
V!==l&&(F=!0,N=D);if(V===l&&D<z){if(F)return this.findNextScreen(D);P=C=0;L=N=B=z=D}else if(C>=d){B===z&&(L=this.findBestPaginationNearTop(z-d,z-1),M=F);break}}B=L-1;if(B<=this.minDocTop){B=this.findNextScreen(A||1>=this.minDocTop?0:this.minDocTop-1);if(B.bottomOfScreen>=z-P)return B;B=B.bottomOfScreen}result={topOfScreen:B,bottomOfScreen:z};return M?result:0<D?this.findPreviousScreen(result.topOfScreen,A):null}}var n=KindlePaginatorHeightMapGenerator.getHeightMapTags(),l=n.HARD_PAGE_BREAK,u=n.HORIZONTAL_RULE,
x=n.BORDER_HEIGHT,t=function(w){var z=[],A;for(A in w)w=parseInt(A,10),z.push(w);z.sort(function(B,C){return B-C});return z}(m);if(b&&b.length)rects=b;else for(rects=[],n=0;n<t.length;++n){var v=t[n],r=m[v].rects,k=m[v].fontSize,y;for(y in r)rects.push({position:v,rect:r[y],fontSize:k})}KindlePaginatorHeightMapGenerator.createHeightMap(q,a,rects,function(w){w.wordMap=m;w.lineRects=b;w.wordPositions=g;w.wordMapKeys=t;w.wordMapGenerator=e;0<t.length&&(w.minPosition=t[0],w.maxPosition=t[t.length-1]);
h(w);c(w)})},KindleRendererWordMapGeneratorFactory=function(){function q(r,k){if(r&&r.getComputedStyle)return r.getComputedStyle(k)}function m(r,k){for(var y=[],w=0;w<r.length;++w){var z=r[w];1<k.clientRectWidth(z)&&y.push(z)}return y}function g(r,k,y,w){return Math.abs(w.clientRectTop(r)-w.clientRectTop(k))<y}function b(r,k,y,w){k&&0<=y&&r.push({rect:k,position:y,fontSize:w})}function e(r,k){r.fontSize=k&&parseInt(k.fontSize,10)||0;r.hasTextEmphasis=k?k.webkitTextEmphasisStyle&&"none"!==k.webkitTextEmphasisStyle:
!1;if(void 0===r.domChildIndex)for(r=r.parentNode.firstChild,k=0;r;)r.nodeType===Node.TEXT_NODE&&(r.domChildIndex=k),r=r.nextSibling,++k}function d(r,k){if(KindleRendererSettings.getSettings().fixedContent){var y=r.className;if(y&&y.match(v))return}if("RT"!==r.tagName&&"RP"!==r.tagName)if(r.nodeType===Node.TEXT_NODE||"IMG"===r.tagName)k.push(r);else{r=r.childNodes;y=r.length;for(var w=0;w<y;w+=1)d(r[w],k)}}function a(r){var k=[];d(r,k);return k}function c(r){if(window.ActiveXObject&&window.XMLHttpRequest)return a(r.body);
try{var k=(new XPathEvaluator).evaluate("/html/body//text()[not(ancestor::ruby)] | //img[not(ancestor::ruby)] | //ruby",r,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);if(k.invalidIteratorState)return a(r.body);for(var y=[],w=k.iterateNext();w;)y.push(w),w=k.iterateNext();return y}catch(z){return a(r.body)}}function f(r){r.addElementsToWordMap=function(k,y,w,z,A,B,C){function D(){F.addElementsToWordMap(k,y,w+1,z,A,B,C)}var F=this;KindleRendererProcessTuning.startingOperation("ScreenManager");
for(var M=0;w<y.length;){var N=y[w],L=N.id;N=F.getValueForNode(k,N,B);null!==N&&(A[L]=N);M+=1;if(M>=z.interval){KindleRendererProcessTuning.endingOperation("ScreenManager",M);setTimeout(D,z.time);return}w+=1}KindleRendererProcessTuning.endingOperation("ScreenManager",M);setTimeout(function(){C.resolve(A,[],null,0)},z.time)};r.getPositionDataForNode=function(k,y,w){k=k[y+"_"+w];return void 0===k||0===k.length?null:k};r.getNodeId=function(k){var y=k.parentNode,w=y.getAttribute("data-nid"),z=0;if(void 0===
k.ownChildIndex)for(;y.childNodes[z]!==k;)z+=1;else z=k.ownChildIndex;return{parentId:w,index:z}};r.getAllBaseNodesInRuby=function(k){k=(new XPathEvaluator).evaluate(".//text()[not(ancestor::rt or ancestor::rp)] | .//img[not(ancestor::rt or ancestor::rp)]",k,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);if(!k.invalidIteratorState){for(var y=[],w=k.iterateNext();w;)w.nodeType===Node.TEXT_NODE&&0===w.nodeValue.trim().length||y.push(w),w=k.iterateNext();return y}};r.addRubyNodeToWordMap=function(k,
y,w,z,A,B,C,D){for(var F=this.getAllBaseNodesInRuby(k),M,N=[],L,P=0;P<F.length;++P)L=F[P],L.deltaX=k.deltaX,L.isRuby=!0,L.nodeType===Node.TEXT_NODE?(M=q(w,L.parentNode),e(L,M),(M=this.addTextNodeToWordMap(this.getNodeId(L),L,y,w,z,A,C))&&this.addTextNodeToLineRects(L,B,A,M,C,D)):(M=q(w,L),L.fontSize=M?parseInt(M.fontSize,10):0,(M=this.addImageNodeToWordMap(L,z,A,C))&&b(B,A[M[0]].rects[0],M[0])),M&&0<M.length&&(N=N.concat(M));return N}}function h(r){r.addTextNodeToWordMap=function(k,y,w,z,A,B,C){var D=
y.nodeValue;if(D&&0<D.trim().length&&(A=this.getPositionDataForNode(A,k.parentId,k.index))){var F=A.length-1,M;a:{var N=y;for(var L=0;2>L;L++)if(N.parentNode)if(N.parentNode.getAttribute("data-isTextCombineBlock"))break a;else N=N.parentNode;N=null}if(N&&(void 0===N.deltaX&&(N.deltaX=C.getDeltaX(N,w)),N.parentNode.deltaX=N.deltaX,M=this.getValueForNode(z,N.parentNode,C))){var P=A[0][1];B[P]=M;return[P]}z=0;N=z<F?A[z+1][0]:Infinity;for(var V=P=L=0,Z=D.length,R=[],I=0;I<=Z;I++)if(M=D.charCodeAt(I),
128>M?L+=1:2048>M?L+=2:55296<=M&&57343>=M?(V+=1,L+=2):L+=3,M=32>=M||45===M,I<Z){if(!M){if(0===V)M=this.getValueForWord(w,y,I,I+1,M,k.parentId,C);else if(1===V)continue;else V=0,M=this.getValueForWord(w,y,I-1,I+1,M,k.parentId,C);if(null!==M){for(;P>=N;)z++,N=z<F?A[z+1][0]:Infinity;P=A[z][1]+(P-A[z][0]);B[P]=M;R.push(P)}}P=L}return R}}}function n(r){r.addTextNodeToWordMap=function(k,y,w,z,A,B,C){if((z=y.nodeValue)&&0<z.trim().length&&(A=this.getPositionDataForNode(A,k.parentId,k.index))){var D=A.length-
1,F=0,M=F<D?A[F+1][0]:Infinity,N=0,L=0;var P=0;for(var V=z.length,Z=[],R=0;R<=V;R++){var I=z.charCodeAt(R);N=128>I?N+1:2048>I?N+2:55296<=I&&57343>=I?N+2:N+3;I=32>=I||45===I||8212===I;if(R===V||I){L=this.getValueForWord(w,y,L,R,I,k.parentId,C);if(null!==L){for(;P>=M;)F++,M=F<D?A[F+1][0]:Infinity;P=A[F][1]+(P-A[F][0]);B[P]=L;Z.push(P)}L=R+1;P=N}}return Z}}}function l(r){r.getValueForWord=function(k,y,w,z,A,B,C){return z>w?{startOffset:w,endOffset:z,childIndex:y.domChildIndex,fontSize:y.fontSize,dataNid:B}:
null};r.getValueForNode=function(k,y,w){var z=y.getClientRects();if(KindleRendererDeviceSpecific.clientRectsExpire()){for(var A=[],B=0;B<z.length;++B)A.push({top:z[B].top,left:z[B].left,bottom:z[B].bottom,right:z[B].right,width:z[B].width,height:z[B].height});z=A}return z&&0<z.length?(w={rects:w.getTransformedClientRects(z,y)},"span"===y.tagName&&(k=q(k,y),w.fontSize=k?parseInt(k.fontSize,10):void 0),w.dataNid=y.getAttribute("data-nid"),w):null};r.getValueForImage=function(k,y){if(k.getClientRects){var w=
k.getClientRects();if(w&&0<w.length)return y=this.getBoundingAndSelectableRects(k,w,y),{selectableRects:y.selectableRects,rects:y.boundingRects,dataNid:k.getAttribute("data-nid")}}return null};r.getValueForWhitespace=function(k,y,w){y=y.createRange();y.setStart(k,0);y.setEnd(k,k.length);return y.getClientRects?(y=y.getClientRects(),this.getBoundingAndSelectableRects(k,y,w).boundingRects):null};r.getBoundingAndSelectableRects=function(k,y,w){y=w.getTransformedClientRects(y,k);return{boundingRects:k.hasTextEmphasis||
k.isRuby?w.getRectsAdjustedForAnnotationMarks(y,k.fontSize):y,selectableRects:y}};r.addBoundsForPosition=function(k,y,w,z,A){var B=y[w];B&&void 0===B.rects&&(A=A||$('[data-nid="'+B.dataNid+'"]',k).contents()[B.childIndex],k=k.createRange(),k.setStart(A,B.startOffset),k.setEnd(A,B.endOffset),(k=k.getClientRects())&&0<k.length&&(k=this.getBoundingAndSelectableRects(A,k,z)),k&&k.boundingRects&&0<k.boundingRects.length?(B.selectableRects=k.selectableRects,B.rects=k.boundingRects):delete y[w])};r.getNextValidPositionIndexInNode=
function(k,y,w,z,A,B){for(var C;void 0===C&&w<y.length;)C=y[w],this.addBoundsForPosition(A,z,C,B,k),C=z[C],++w;return void 0===C?-1:--w};r.addTextNodeToLineRects=function(k,y,w,z,A,B){if(0!==z.length){B=k.ownerDocument;var C=B.createRange();C.selectNode(k);var D=this.getBoundingAndSelectableRects(k,m(C.getClientRects(),A),A).boundingRects,F=D.length,M=k.fontSize,N=.25*M;if(1===F)b(y,D[0],z[0],M);else if(1<F){var L;if(1===z.length)for(L=0;L<F;L++)b(y,D[L],z[0],M);else{var P=k.nodeValue.length,V=0;
for(L=0;L<F;++L)V+=A.clientRectWidth(D[L]);P=V/P;var Z=V=!1,R=this.getNextValidPositionIndexInNode(k,z,0,w,B,A);if(!(0>R)){var I=R,T=z[I],J=w[T],S=J.endOffset-J.startOffset;T=J.rects.length;var W=0;for(L=0;L<F;++L)if(W<T-1)g(J.rects[W],D[L],N,A)&&(b(y,D[L],z[R],M),++W);else if(W=Math.min(W,T-1),g(J.rects[W],D[L],N,A)){var K=A.clientRectWidth(D[L]);K=Math.round(K/P);A.clientRectLeft(J.rects[W]);for(A.clientRectLeft(D[L]);I<z.length-1&&S<K;)++I,J=w[z[I]],S+=J.endOffset-J.startOffset;if(R===I&&(++I,
I>=z.length)){b(y,D[L],z[R],M);break}for(C.setStart(k,w[z[R]].startOffset);;)if(C.setEnd(k,w[z[I]].endOffset),J=m(C.getClientRects(),A),J.length>T){if(0>=I)break;--I;if(Z)break;V=!0}else if(J.length===T){if(V||I>=z.length-1)break;++I;Z=!0}else break;b(y,D[L],z[R],M);if(I>=z.length-1)break;V=Z=!1;R=this.getNextValidPositionIndexInNode(k,z,I+1,w,B,A);if(0>R)break;I=R;T=z[I];J=w[T];S=J.endOffset-J.startOffset;T=J.rects.length;W=0;g(J.rects[0],D[L],N,A)&&++W}}}}}};r.createBoundsWordMap=function(k,y,w,
z,A,B,C){var D=new jQuery.Deferred,F={};void 0===w.posMap||$.isEmptyObject(w.posMap)?this.createWordMapFromElements(k,y,F,z,D):null!==w.posMap?(A={interval:KindleRendererProcessTuning.drawYieldFrequency("WordMapGen"),time:KindleRendererProcessTuning.drawYieldUpdateTime("WordMapGen"),metrics:C||KindleMetricsProfiler("wordMap"),requestId:A,processingRequest:B},B=c(k),this.createWordMapFromNodeList(0,B,k,y,w,F,[],z,A,D)):D.resolve(F,[],[],0);return D.promise()};r.computeAllWordRects=function(k,y,w,z,
A,B,C){function D(){if(A.requestId===A.computingRectsId.id){KindleRendererProcessTuning.startingOperation("WordMapGen");for(var Z=0;L<w.length;++L){if((N=y[w[L]])&&void 0===N.rects){if(N.dataNid!==M.dataNid||N.childIndex!==M.childIndex)F=$('[data-nid="'+N.dataNid+'"]',k).contents()[N.childIndex];M=N;P.setStart(F,N.startOffset);P.setEnd(F,N.endOffset);var R=P.getClientRects();R&&0<R.length&&(R=V.getBoundingAndSelectableRects(F,R,z));R&&R.boundingRects&&0<R.boundingRects.length?(N.selectableRects=R.selectableRects,
N.rects=R.boundingRects):delete y[w[L]];++Z}if(Z>=A.frequency){KindleRendererProcessTuning.endingOperation("WordMapGen",Z);setTimeout(D,A.time);return}}KindleRendererProcessTuning.endingOperation("WordMapGen",Z)}B.resolve()}var F,M={},N,L=0,P=k.createRange(),V=this;P.getClientRects?D():B.resolve()};r.addImageNodeToWordMap=function(k,y,w,z){z=this.getValueForImage(k,z);if(null!==z&&(k=k.getAttribute("data-nid"),null!==k))return y=y[k],w[y[0][1]]=z,[y[0][1]]};r.createWordMapFromElements=function(k,
y,w,z,A){var B=[];B=B.concat(Array.prototype.slice.call(k.getElementsByTagName("IMG")));B=B.concat(Array.prototype.slice.call(k.getElementsByTagName("CANVAS")));B=B.concat(Array.prototype.slice.call(k.getElementsByClassName("k4w")));B=B.concat(Array.prototype.slice.call(k.getElementsByClassName("k4wc")));k={interval:KindleRendererProcessTuning.drawYieldFrequency("ScreenManager"),time:KindleRendererProcessTuning.drawYieldUpdateTime("ScreenManager")};this.addElementsToWordMap(y,B,0,k,w,z,A)};r.createWordMapFromNodeList=
function(k,y,w,z,A,B,C,D,F,M){function N(){F.requestId===F.processingRequest.id&&L.createWordMapFromNodeList(k+1,y,w,z,A,B,C,D,F,M)}var L=this;KindleRendererProcessTuning.startingOperation("WordMapGen");var P=0,V=y.length,Z=null,R=F.numPositionsAdded||0,I=A.wordList&&A.wordList.length;I&&!A.imageList&&(A.imageList=[]);for(var T=A.imageList,J,S=F.metrics.createSubTimer("text counters (timeless)");k<V;){var W=y[k],K=B;W.deltaX=D.getDeltaX(W,w);if(W.nodeType===Node.TEXT_NODE)J=q(z,W.parentNode),J&&"none"===
J.display||(e(W,J),Z=L.getNodeId(W),Z=L.addTextNodeToWordMap(Z,W,w,z,A.posMap,B,D),void 0===Z?(Z=[],K=[{rects:L.getValueForWhitespace(W,w,D)}]):this.addTextNodeToLineRects(W,C,B,Z,D,S));else if("IMG"===W.tagName){if(J=q(z,W),W.fontSize=J?parseInt(J.fontSize,10):0,Z=L.addImageNodeToWordMap(W,A.posMap,B,D))b(C,B[Z[0]].rects[0],Z[0]),I&&T.push(Z[0])}else Z=L.addRubyNodeToWordMap(W,w,z,A.posMap,B,C,D,S);Z&&Z.length&&(R+=Z.length,KindleRendererContentCorrection.applyNodeLocalCorrections(W,Z,K,z,D,F.metrics));
++P;if(P>=F.interval){F.numPositionsAdded=R;KindleRendererProcessTuning.endingOperation("WordMapGen",P);setTimeout(N,F.time);return}++k}V=I?KindleListUtilities.sortedMerge(A.wordList,T):[];delete A.imageList;KindleRendererProcessTuning.endingOperation("WordMapGen",P);M.resolve(B,V,C,R)}}function u(r){r.getValueForWord=function(k,y,w,z,A){return z>w?(k=y.nodeValue,w={text:k.substr(w,A?z-w+1:z-w)},z===k.length&&(w.text+=this.WORD_DELIMITER),w):null};r.findSibling=function(k){return k&&k.nodeType!==
Node.DOCUMENT_NODE?k.nextSibling?k.nextSibling:this.findSibling(k.parentNode):null};r.getValueForNode=function(k,y){return"IMG"!==y.tagName?(k=y.textContent,/\s/.test(k[k.length-1])||(y=this.findSibling(y))&&"k4w"!==y.className&&(k+=" "),{text:k}):null};r.getValueForImage=function(k){return null};r.WORD_DELIMITER=KindleRendererLanguageOptions.getHasWhitespaceDelimitedWords()?" ":"";r.createTextWordMap=function(k,y){var w=new jQuery.Deferred,z={};if(void 0===y.posMap){var A=$(k).find("CANVAS,.k4w,.k4wc");
A=$.makeArray(A);var B=A.length;for(k=0;k<B;k++){var C=A[k];var D=C.id;y=this.getValueForNode(null,C);null!==y&&(z[D]=y)}}else if(null!==y.posMap)for(A=a(k),B=A.length,k=0;k<B;k++)C=A[k],C.nodeType===Node.TEXT_NODE&&(D=this.getNodeId(C),this.addTextNodeToWordMap(D,C,null,null,y.posMap,z));w.resolve(z);return w.promise()}}function x(r,k){r.createWordMap=function(y,w,z,A,B,C,D){return k.createBoundsWordMap(y,w,z,A,B,C,D)};r.addBoundsForPosition=function(y,w,z,A,B){k.addBoundsForPosition(y,w,z,A,B)};
r.computeWordRects=function(y,w,z,A,B,C,D,F){var M=new jQuery.Deferred;"mobi8"===B&&z&&0<z.length?(B={frequency:KindleRendererProcessTuning.drawYieldFrequency("WordMapGen"),time:KindleRendererProcessTuning.drawYieldUpdateTime("WordMapGen"),requestId:C,computingRectsId:D},k.computeAllWordRects(y,w,z,A,B,M,F)):M.resolve();return M.promise()}}function t(r,k){r.createWordMap=function(y,w){return k.createTextWordMap(y,w)}}var v=/(?=.*target)(?=.*mag)/i;return{buildWordMapGeneratorForWordBounds:function(){var r=
{},k={};f(r);l(r);x(k,r);KindleRendererLanguageOptions.getHasWhitespaceDelimitedWords()?n(r):h(r);return k},buildWordMapGeneratorForWordText:function(){var r={},k={};f(r);u(r);t(k,r);KindleRendererLanguageOptions.getHasWhitespaceDelimitedWords()?n(r):h(r);return k},countUTF8Bytes:function(r){return 128>r?1:2048>r||55296<=r&&57343>=r?2:3}}}(),KindleRegionAnnotationRenderer=function(){function q(e,d){return e.contentDocument.querySelectorAll("mark[annotationType"+(d?'="'+d.type+'"':"")+"][annotationStart"+
(d?'="'+d.start+'"':"")+"]")}function m(e,d,a){if(!e||!d||parseInt(e.id,10)>parseInt(d.id,10)||"MARK"===e.tagName||"MARK"===d.tagName)throw"Insertion of <mark> tags failed.";if(e.parentNode===d.parentNode){a=a();var c=d.nextSibling;var f=e.parentNode;var h=e;do e=h,h=e.nextSibling,f.removeChild(e),a.appendChild(e);while(e!==d);f.insertBefore(a,c)}else KindleRendererUtils.treeDepth(e)>KindleRendererUtils.treeDepth(d)?e.previousElementSibling||KindleRendererUtils.isBlock(e.parentNode)?(c=KindleRendererUtils.previousPositionedNode(e.parentNode),
f=KindleRendererUtils.nextPositionedNode(KindleRendererUtils.followingNode(e.parentNode)),m(e,c,a),m(f,d,a)):m(e.parentNode,d,a):d.nextElementSibling||KindleRendererUtils.isBlock(d.parentNode)?(c=KindleRendererUtils.previousPositionedNode(KindleRendererUtils.precedingNode(d.parentNode)),f=KindleRendererUtils.nextPositionedNode(d.parentNode),m(e,c,a),m(f,d,a)):m(e,d.parentNode,a)}function g(e,d,a){var c=e.contentDocument;e=KindleRendererUtils.findElementAtOrAfterPosition(c,d.start);var f=KindleRendererUtils.findElementAtOrBeforePosition(c,
d.end);try{m(e,f,function(){var h=c.createElement("mark");h.className=a;h.setAttribute("annotationType",d.type);h.setAttribute("annotationStart",d.start);return h})}catch(h){}}function b(e,d){d=Array.prototype.slice.call(d);for(var a=0;a<d.length;a++){var c=d[a],f=c.getAttribute("annotationType");if("kindle.highlight"===f||"kindle.search"===f){f=e.createDocumentFragment();for(var h=c.firstChild,n;h;)n=h.nextSibling,c.removeChild(h),f.appendChild(h),h=n;h=c.parentNode;n=c.nextSibling;h.removeChild(c);
h.insertBefore(f,n)}else c.parentNode.removeChild(c)}}return{createAnnotationElements:function(e,d){var a;for(a=0;a<d.length;a++){var c=d[a];if("kindle.highlight"===c.type)g(e,c,"highlight");else if("kindle.note"===c.type){var f=e.contentDocument,h=f.createElement("div");h.className="note-icon";var n=f.createElement("mark");n.className="note";n.setAttribute("annotationType",c.type);n.setAttribute("annotationStart",c.start);n.setAttribute(KindleRendererAnnotationRenderer.ANNOTATION_CLICK_ATTRIBUTE,
"true");n.appendChild(h);c=KindleRendererUtils.findElementAtOrBeforePosition(f,c.start);c.parentNode.insertBefore(n,c.nextSibling)}else"kindle.search"===c.type&&(n=e,0<q(n,c).length||g(n,c,"search-result"))}},removeAnnotationElements:function(e,d){b(e.contentDocument,q(e,d))},removeAllAnnotationElements:function(e){b(e.contentDocument,q(e))}}}(),KindleRegionContentManager=function(){function q(k){if(t||v){if(k<=h)throw{name:"pagingError",message:"Repeating wait request"};h=k;0>f&&c.waitNotification&&
c.waitNotification();f=k}}function m(k){(t||v)&&0<=f&&f<=k&&(r=0,f=-1,v&&(t=!0,v=!1),c.readyNotification&&c.readyNotification(),c.rectsReadyNotification&&c.rectsReadyNotification())}function g(k,y,w){f<=k&&(y!==KindleRendererIframeManagerFactory.DATA_LOAD_ERROR&&3>r?(++r,a(w)):(c.errorNotification&&c.errorNotification(y),f=-1))}function b(k){k=l.gotoPosition(k);if(!k){var y=l.getCurrentProcessId();q(y);l.getCurrentProcessDfd().then(function(){m(y)},function(w){g(y,w)})}return k}function e(){try{var k=
l.nextScreen();if(!k){var y=l.getCurrentProcessId();q(y);l.getCurrentProcessDfd().then(function(){e();m(y)},function(w){g(y,w,0)})}return k}catch(w){return KindleDebug.breakPt(),a(),!1}}function d(){try{var k=l.previousScreen();if(!k){var y=l.getCurrentProcessId();q(y);l.getCurrentProcessDfd().then(function(){d();m(y)},function(w){g(y,w,0)})}return k}catch(w){return KindleDebug.breakPt(),a(),!1}}function a(){var k=l.getPagePositionRange();null!==k&&(u=k.currentTopOfPage);l.reloadNotification();b(u)}
var c={},f=-1,h=-1,n=null,l=null,u=0,x,t=!0,v=!1,r=0;return{initialize:function(k,y,w){n=k;c=y;x=w;u=void 0;l=KindleRendererIframeManagerFactory.build(n);l.setOverlayManager(x);l.setAnnotationEventCallback(c.annotationTriggered)},cleanup:function(){},hide:function(){v=t=!1},show:function(){v=!0},updateSettings:function(k){l.updateSettings(k)},gotoPosition:function(k){return b(k,0)},nextScreen:function(){return e()},previousScreen:function(){return d()},hasNextScreen:function(){return l.hasNextScreen()},
hasPreviousScreen:function(){return l.hasPreviousScreen()},getPagePositionRange:function(){return l.getPagePositionRange()},getSelectableItemBoundaries:function(){return null},getWordPositions:function(){return null},onWindowResize:function(){l.resizeNotification()},handleClick:function(k,y){},reloadAnnotations:function(){l&&l.reloadAnnotations()},getZoomableAt:function(k,y){return null},getZoomableList:function(){return[]},clearSelection:function(){l.clearSelection()},getSelection:function(){return l.getSelection()}}}(),
KindleRegionIframeManager=function(){function q(a){return"topaz"===KindleRendererFragmentLoader.getBookContentType()?a?KindleRendererIframePreparation.CANVAS_INSERTION_PREVIOUS:KindleRendererIframePreparation.CANVAS_INSERTION_NEXT:KindleRendererIframePreparation.CANVAS_INSERTION_NONE}function m(a){a.cancelCurrentRequest=function(){this.currentRequest&&(this.currentRequest.cancelled=!0,this.currentRequest=null)};a.createNewRequest=function(c,f){this.cancelCurrentRequest();this.currentRequest={type:c,
requestId:KindleRendererRequestId.getUniqueRequestId(),metrics:KindleMetricsProfiler("renderer-iframe-load"),retryCount:0,initialPosition:f};this.currentRequestDfd=new jQuery.Deferred};a.willRetryCurrentRequest=function(){this.currentRequest&&this.currentRequest.retryCount++};a.canRetryCurrentRequest=function(){return this.currentRequest?5>this.currentRequest.retryCount:!0};a.calculateIframePaginationData=function(c,f,h){var n=this,l=q(n.currentRequest.type);KindleRendererIframePreparation.prepareIframe(c,
n.currentRequest,f,h,l).then(function(u){c.processingRequestId.id===u.requestId&&n.currentRequest&&n.currentRequest.requestId===u.requestId&&(c.processingRequestId.id=null,n.frameIsLoadedAndReady(c));n=null},function(u){n.currentRequest&&u&&n.currentRequest.requestId===u.requestId&&n.currentRequestDfd.reject(d);n=null})};a.loadContentDataIntoIframe=function(c){var f=this;f.currentRequest.contentLoadMetrics=f.currentRequest.metrics.createSubTimer("content-load");f.contentRange[this.hiddenIframeIndex]=
c.contentRange;var h=this.iframes[this.hiddenIframeIndex];h.processingRequestId.id=f.currentRequest.requestId;KindleRendererIframeLoading.loadIframe(h,f.currentRequest,c).then(function(n,l){KindleRendererProcessTuning.runAfterYield(KindleRendererDeviceSpecific.yieldTimeAfterIframeLoaded(),n.type,function(){if(h.processingRequestId.id===n.requestId&&f.currentRequest&&f.currentRequest.requestId===n.requestId){f.positionData[f.hiddenIframeIndex]=l.positionData;var u=f.getViewportDimensions(h);f.regionManagers[f.hiddenIframeIndex].computeFilledRegionNodes();
f.ensureElementsWillFit(h,u,f.currentRequest.contentLoadMetrics).then(function(){f.currentRequest.contentLoadMetrics.endTimer();f.calculateIframePaginationData(h,c,l);(KindleHostDeviceDetector.isMetro()||KindleHostDeviceDetector.isIE())&&f.addSelectionListener(h);f=null},function(){f.currentRequest&&f.currentRequestDfd.reject(e);f=null})}else f=null})},function(){f.currentRequest&&f.currentRequestDfd.reject(e)})};a.ensureElementsWillFit=function(c,f,h){c.writingMode.scrollToTopOfDocument(c);c.writingMode.resetHeight(c);
var n=c.contentDocument.getElementsByTagName("body")[0];if(void 0!==KindleRendererSettings.getSettings().initialExpandedBodyHeight){var l=parseInt($(n).css("margin-top"),10),u=parseInt($(n).css("margin-bottom"),10);n.style.height=parseInt(f.height,10)-l-u+"px"}l=n.getElementsByClassName("k4w-margin");for(u=0;u<l.length;u+=1){var x=parseInt(l[u].getAttribute("vertical"),10);0<x&&(l[u].style.marginTop=Math.round(.01*x*f.height)+"px")}return KindleRendererElementFitting.fitToViewport(n,c.writingMode,
f,h)};a.annotationClickedHandler=function(c){if(void 0!==this.annotationEventCallback){var f=c.currentTarget.parentNode;c=f.getAttribute("annotationType");f=f.getAttribute("annotationStart");this.annotationEventCallback(c,f)}};a.renderAnnotations=function(c,f){c&&KindleRegionAnnotationRenderer.removeAllAnnotationElements(c);this.overlayManager&&(f=this.overlayManager.getOverlaysInRange(f.startPosition,f.endPosition))&&0<f.length&&this.createAnnotationElements(c,f)};a.frameIsLoadedAndReady=function(c){var f=
this.currentRequest;this.iframeLoadStatus[c.index]=f.type;this.renderAnnotations(c,this.contentRange[c.index]);f&&null!==f.initialPosition&&(this.regionManagers[c.index].updateView(KindleRegionManagerFactory.VIEW_REQUEST.GO_TO_POSITION,{position:f.initialPosition}),c===this.iframes[this.hiddenIframeIndex]&&(this.swapIframes(),this.updateDisplayedPositionsInPage()));f.metrics.addCount("Success",1);f.metrics.endTimer();f.metrics.log();this.currentRequest=null;setTimeout(this.currentRequestDfd.resolve,
10);f.type===this.loadedType.GOTO_POSITION&&this.considerLoadingMoreFragments()};a.loadFragmentsForRange=function(c){var f=this;KindleRendererFragmentLoader.loadFragments(c,f.currentRequest).then(function(h,n){f.currentRequest&&f.currentRequest.requestId===h.requestId&&f.loadContentDataIntoIframe(n);f=null},function(h,n){f.currentRequest&&f.currentRequest.requestId===n.requestId&&f.currentRequestDfd.reject(b);f=null})};a.gotoPosition=function(c){var f=this.iframes[this.visibleIframeIndex];f&&KindleRegionAnnotationRenderer.removeAllAnnotationElements(f);
this.createNewRequest(this.loadedType.GOTO_POSITION,c);c=KindleRendererPositionLoadingCalculator.calculateDesiredFragmentRangeForGoTo(c);if(KindleRendererFragmentLoader.needToLoadFragments(this.contentRange[this.visibleIframeIndex],c))return this.loadFragmentsForRange(c),!1;this.frameIsLoadedAndReady(this.iframes[this.visibleIframeIndex]);return!0};a.setIframeVisibility=function(c,f){f?this.regionManagers[c].show():this.regionManagers[c].hide()};a.swapIframes=function(){this.iframeLoadStatus[this.visibleIframeIndex]=
this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.NEXT?this.loadedType.PREVIOUS:this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.PREVIOUS?this.loadedType.NEXT:this.loadedType.EMPTY;this.iframeLoadStatus[this.hiddenIframeIndex]=this.loadedType.EMPTY;var c=this.visibleIframeIndex;this.visibleIframeIndex=this.hiddenIframeIndex;this.hiddenIframeIndex=c;this.setIframeVisibility(this.visibleIframeIndex,!0);this.setIframeVisibility(this.hiddenIframeIndex,!1)};a.getPagePositionRange=
function(){return this.regionManagers[this.visibleIframeIndex].getPagePositionRange()};a.reloadAnnotations=function(){this.renderAnnotations(this.iframes[this.visibleIframeIndex],this.contentRange[this.visibleIframeIndex]);null!==this.iframes[this.hiddenIframeIndex]&&this.iframeLoadStatus[this.hiddenIframeIndex]!==this.loadedType.EMPTY&&this.renderAnnotations(this.iframes[this.hiddenIframeIndex],this.contentRange[this.hiddenIframeIndex])};a.loadNextPages=function(){if(this.iframeLoadStatus[this.hiddenIframeIndex]!==
this.loadedType.NEXT&&(null===this.currentRequest||this.currentRequest.type!==this.loadedType.NEXT)){var c=this.contentRange[this.visibleIframeIndex].endPosition+1,f=this.getPagePositionRange();c=KindleRendererPositionLoadingCalculator.calculateDesiredFragmentRangeForPageFlip(c,f);this.createNewRequest(this.loadedType.NEXT,null);this.loadFragmentsForRange(c)}};a.loadPreviousPages=function(){if(this.iframeLoadStatus[this.hiddenIframeIndex]!==this.loadedType.PREVIOUS&&(null===this.currentRequest||this.currentRequest.type!==
this.loadedType.PREVIOUS)){var c=this.contentRange[this.visibleIframeIndex].startPosition-1,f=this.getPagePositionRange();c=KindleRendererPositionLoadingCalculator.calculateDesiredFragmentRangeForPageFlip(c,f);this.createNewRequest(this.loadedType.PREVIOUS,null);this.loadFragmentsForRange(c)}};a.considerLoadingMoreFragments=function(c){if(this.canPreloadNext){var f=c!==this.direction.PREVIOUS?4:2;if(this.getApproximateNumNextScreens()<f&&this.hasMoreNextFragments()){this.loadNextPages();return}}this.canPreloadPrevious&&
(c=c===this.direction.PREVIOUS?4:2,this.getApproximateNumPrevScreens()<c&&this.hasMorePreviousFragments()&&this.loadPreviousPages())};a.crossSkeletonBoundary=function(){var c=this.contentRange[this.visibleIframeIndex],f=this.contentRange[this.hiddenIframeIndex];if(this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.NEXT){if(c.skeletonId+1===f.skeletonId)return this.swapIframes(),!0;if(c.skeletonId!==f.skeletonId)return this.iframeLoadStatus[this.hiddenIframeIndex]=this.loadedType.EMPTY,
!1}if(this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.PREVIOUS){if(c.skeletonId-1===f.skeletonId)return this.swapIframes(),!0;c.skeletonId!==f.skeletonId&&(this.iframeLoadStatus[this.hiddenIframeIndex]=this.loadedType.EMPTY)}return!1};a.cleanup=function(){this.cancelCurrentRequest();KindleRendererIframeLoading.cleanupIframe(this.iframes[this.visibleIframeIndex]);KindleRendererIframeLoading.cleanupIframe(this.iframes[this.hiddenIframeIndex]);this.setOverlayManager(null);this.contentRange=
[null,null];this.positionData=[null,null];this.iframes=null};a.hasMoreNextFragments=function(){return this.contentRange[this.visibleIframeIndex].endPosition!==KindleRendererFragmentLoader.getMaximumPosition()};a.hasMorePreviousFragments=function(){return this.contentRange[this.visibleIframeIndex].startPosition!==KindleRendererFragmentLoader.getMinimumPosition()};a.isAtEndOfDocumentOrSkeleton=function(){var c=this.contentRange[this.visibleIframeIndex];return KindleRendererFragmentLoader.isPositionAtEndOfSkeletonOrDocument(c.skeletonId,
c.endPosition)};a.isAtBeginningOfDocumentOrSkeleton=function(){var c=this.contentRange[this.visibleIframeIndex];return KindleRendererFragmentLoader.isPositionAtBeginningOfSkeletonOrDocument(c.skeletonId,c.startPosition)};a.getApproximateNumNextScreens=function(){var c=this.isAtEndOfDocumentOrSkeleton();return this.regionManagers[this.visibleIframeIndex].getApproximateNumNextScreens(c)};a.getApproximateNumPrevScreens=function(){var c=this.isAtBeginningOfDocumentOrSkeleton();return this.regionManagers[this.visibleIframeIndex].getApproximateNumPrevScreens(c)};
a.hasNextScreen=function(){var c=this.isAtEndOfDocumentOrSkeleton();return this.regionManagers[this.visibleIframeIndex].hasNextScreen(c)||this.hasMoreNextFragments()};a.hasPreviousScreen=function(){var c=this.isAtBeginningOfDocumentOrSkeleton();return this.regionManagers[this.visibleIframeIndex].hasPreviousScreen(c)||this.hasMorePreviousFragments()};a.updateDisplayedPositionsInPage=function(){var c=this.getPagePositionRange();KindleRendererPositionLoadingCalculator.updateDisplayedPositionRange(c.currentBottomOfPage-
c.currentTopOfPage)};a.considerFlippingFrames=function(){var c=this.iframeLoadStatus[this.hiddenIframeIndex];if(c!==this.loadedType.EMPTY){var f=this.getPagePositionRange(),h=this.contentRange[this.hiddenIframeIndex],n=0,l=0;c===this.loadedType.NEXT?l=1:n=1;if(f.currentTopOfPage>=h.startPosition+n&&f.currentBottomOfPage<=h.endPosition-l){f=this.regionManagers[this.hiddenIframeIndex];h=this.regionManagers[this.visibleIframeIndex].getPagePositionRange();if(c===this.loadedType.NEXT){if(c={position:h.currentBottomOfPage,
allowPartialScreen:this.isAtEndOfDocumentOrSkeleton()},c=f.updateView(KindleRegionManagerFactory.VIEW_REQUEST.NEXT_PAGE,c),!c)return this.requestMoreNextPages(),!1}else if(c={position:h.currentTopOfPage,allowPartialScreen:this.isAtBeginningOfDocumentOrSkeleton()},c=f.updateView(KindleRegionManagerFactory.VIEW_REQUEST.PREVIOUS_PAGE,c),!c)return this.requestMorePreviousPages(),!1;this.swapIframes();return!0}}return!1};a.nextScreen=function(){var c=this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.NEXT;
if(c&&this.considerFlippingFrames())return!0;var f=this.isAtEndOfDocumentOrSkeleton(),h=this.regionManagers[this.visibleIframeIndex].nextScreen(f);if(!h)if(this.hasMoreNextFragments())if(c&&f&&this.crossSkeletonBoundary())h=!0;else return this.requestMoreNextPages(),!1;else h=!0;this.considerLoadingMoreFragments(this.direction.NEXT);this.updateDisplayedPositionsInPage();KindleDebug.log("Next Screen Success:"+h);return h};a.requestMoreNextPages=function(){var c=this.getPagePositionRange(),f=this.contentRange[this.visibleIframeIndex];
c.currentBottomOfPage&&KindleRendererPositionLoadingCalculator.updateDisplayedPositionRange(f.endPosition-c.currentBottomOfPage);this.iframeLoadStatus[this.hiddenIframeIndex]=this.loadedType.EMPTY;this.loadNextPages()};a.requestMorePreviousPages=function(){var c=this.getPagePositionRange(),f=this.contentRange[this.visibleIframeIndex];c.currentTopOfPage&&KindleRendererPositionLoadingCalculator.updateDisplayedPositionRange(c.currentTopOfPage-f.startPosition);this.iframeLoadStatus[this.hiddenIframeIndex]=
this.loadedType.EMPTY;this.loadPreviousPages()};a.previousScreen=function(){KindleDebug.log("****Prev screen****");if(this.iframeLoadStatus[this.hiddenIframeIndex]===this.loadedType.PREVIOUS&&this.considerFlippingFrames())return!0;var c=this.isAtBeginningOfDocumentOrSkeleton(),f=this.regionManagers[this.visibleIframeIndex].previousScreen(c);if(!f&&this.hasMorePreviousFragments())if(c&&this.crossSkeletonBoundary())f=!0;else return this.requestMorePreviousPages(),!1;else f||this.hasMorePreviousFragments()||
KindleDebug.error("PreviousScreen: Was not able to go to previous screen, and there is no more previous fragments.");this.considerLoadingMoreFragments(this.direction.PREVIOUS);this.updateDisplayedPositionsInPage();return f};a.cancelHiddenIframeLoading=function(){var c=this.iframes[this.hiddenIframeIndex];null!==c.processingRequestId.id&&(c.processingRequestId.id=null,this.cancelCurrentRequest())};a.scaleElementsInIframe=function(c){var f=this.getViewportDimensions(c);if(c&&c.contentDocument&&c.contentDocument.body){c.writingMode=
KindleRendererWritingModeFactory.buildIFrameWritingMode(c);c.writingMode.resetIframeDimensions(c);var h=this.currentRequest&&this.currentRequest.contentLoadMetrics?this.currentRequest.contentLoadMetrics:KindleMetricsProfiler("content-load");this.ensureElementsWillFit(c,f,h).then(function(){h.endTimer()})}};a.getViewportDimensions=function(c){var f=$(this.parent).width(),h=this.numColumns-1,n=this.getMargins(this.margin);h=parseInt((f-(this.columnGap-(n.left+n.right))*h)/this.numColumns,10);return{height:$(c).parent().height(),
width:h,parentWidth:f}};a.updateSettings=function(c){var f=this.visibleIframeIndex,h=this.hiddenIframeIndex,n=this.getPagePositionRange().currentTopOfPage;if(void 0!==c.columns){if(void 0!==c.columns.num){this.numColumns=c.columns.num;this.regionManagers[f].computeFilledRegionNodes();this.scaleElementsInIframe(this.iframes[f]);var l=this;setTimeout(function(){l.regionManagers[h].computeFilledRegionNodes();l.scaleElementsInIframe(l.iframes[h]);l=null},0)}void 0!==c.columns.gap&&(this.columnGap=parseInt(c.columns.gap,
10))}void 0!==c.margin&&(this.margin=c.margin);KindleRendererIframeLoading.updateSettingsInIframe(this.iframes[f]);var u=this;setTimeout(function(){KindleRendererIframeLoading.updateSettingsInIframe(u.iframes[h]);u=null},0);n&&(this.regionManagers[f].updateView(KindleRegionManagerFactory.VIEW_REQUEST.GO_TO_POSITION,{position:n}),this.updateDisplayedPositionsInPage())};a.getMargins=function(c){if(this.parent&&c&&0<c.length){var f=document.getElementById("renderer_translation_div");f||(f=document.createElement("div"),
f.id="renderer_translation_div",$(f).css({visibility:"hidden","z-index":-1E3}),this.parent.appendChild(f));$(f).css({margin:c});c=window.getComputedStyle(f);return{top:parseFloat(c.marginTop),bottom:parseFloat(c.marginBottom),left:parseFloat(c.marginLeft),right:parseFloat(c.marginRight)}}return{top:0,bottom:0,left:0,right:0}};a.reloadNotification=function(){this.contentRange=[null,null];this.positionData=[null,null];this.cancelHiddenIframeLoading();this.iframeLoadStatus=[this.loadedType.EMPTY,this.loadedType.EMPTY]};
a.resizeNotification=function(){var c=this.getPagePositionRange();this.regionManagers[this.visibleIframeIndex].updateView(KindleRegionManagerFactory.VIEW_REQUEST.GO_TO_POSITION,{position:c.currentTopOfPage});this.updateDisplayedPositionsInPage()};a.updateGlyphColorForFrameIndex=function(c){this.iframes[c].hasGlyphs&&this.iframes[c].contentDocument&&KindleGlyphRenderer.updateTextColor(this.iframes[c])};a.updateGlyphColor=function(){this.updateGlyphColorForFrameIndex(this.visibleIframeIndex);this.updateGlyphColorForFrameIndex(this.hiddenIframeIndex)};
a.setAnnotationEventCallback=function(c){this.annotationEventCallback=c};a.getCurrentProcessDfd=function(){return this.currentRequestDfd.promise()};a.getCurrentProcessId=function(){return this.currentRequest.requestId};a.getZoomableAt=function(c,f,h){return KindleRendererZoomablesFactory.buildFromCoord(this.iframes[this.visibleIframeIndex].contentDocument,c,f,h)};a.getZoomableList=function(c){return KindleRendererZoomablesFactory.buildList(this.iframes[this.visibleIframeIndex].contentDocument,c)};
a.addClickHandlers=function(c){var f=this;c=$("mark["+KindleRendererAnnotationRenderer.ANNOTATION_CLICK_ATTRIBUTE+"='true']",c.contentDocument).children();$(c).unbind("click");$(c).click(function(h){f.annotationClickedHandler(h)})};a.createAnnotationElements=function(c,f){KindleRegionAnnotationRenderer.createAnnotationElements(c,f);this.addClickHandlers(c)};a.addAnnotation=function(c,f,h){c&&f&&h&&f.startPosition<=h.end&&h.start<=f.endPosition&&this.createAnnotationElements(c,[h])};a.removeAnnotation=
function(c,f){c&&f&&KindleRegionAnnotationRenderer.removeAnnotationElements(c,f)};a.onOverlayAdded=function(c){a.addAnnotation(a.iframes[0],a.contentRange[0],c.overlay);a.addAnnotation(a.iframes[1],a.contentRange[1],c.overlay)};a.onOverlayRemoved=function(c){a.removeAnnotation(a.iframes[0],c.overlay);a.removeAnnotation(a.iframes[1],c.overlay)};a.setOverlayManager=function(c){this.overlayManager&&(this.overlayManager.removeEventListener(this.overlayManager.OVERLAY_ADDED_EVENT,this.onOverlayAdded),
this.overlayManager.removeEventListener(this.overlayManager.OVERLAY_REMOVED_EVENT,this.onOverlayRemoved));if(this.overlayManager=c)this.overlayManager.addEventListener(this.overlayManager.OVERLAY_ADDED_EVENT,this.onOverlayAdded),this.overlayManager.addEventListener(this.overlayManager.OVERLAY_REMOVED_EVENT,this.onOverlayRemoved)};a.setCanPreloadNext=function(c){this.canPreloadNext=c};a.setCanPreloadPrevious=function(c){this.canPreloadPrevious=c};a.clearSelection=function(){var c=this.iframes[this.visibleIframeIndex].contentWindow;
this.selection&&(this.selection.select(),this.selection=null);c.window.getSelection&&(c.window.getSelection().empty?c.window.getSelection.empty():c.window.getSelection().removeAllRanges&&c.window.getSelection().removeAllRanges());c.document.selection&&c.document.selection.empty&&c.document.selection.empty()};a.getSelection=function(){var c=this.iframes[this.visibleIframeIndex].contentWindow,f=KindleHostDeviceDetector.getDevicePlatform(),h=null,n=this.selection;n&&n.select();("metro"===f||"metroArm"===
f||KindleHostDeviceDetector.isIE())&&c.document.selection&&(c=c.document.selection,h=this.createSelectionForIE(c));return h};a.createSelectionForIE=function(c){var f=KindleRendererDeviceSpecific.resolutionScale(),h=this.regionManagers[this.visibleIframeIndex].getOffsetTop()*f,n=c.createRange(),l=n.getClientRects();c=l[l.length-1].width?l[l.length-1]:l[l.length-2];l=l[0];var u={};0!==n.text.indexOf(" ")&&n.expand("word");u.context=n.text;var x=document.createElement("div");x.innerHTML=n.htmlText;n=
this.getSelectionBoundaries(x);u.start=parseInt(n.start,10);u.end=parseInt(n.end,10);u.lowerBounds={};u.lowerBounds.right=c.right/f;u.lowerBounds.bottom=(c.bottom-h)/f;u.lowerBounds.left=c.left/f;u.lowerBounds.top=(c.top-h)/f;u.lowerBounds.width=c.width/f;u.lowerBounds.height=c.height/f;u.upperBounds={};u.upperBounds.left=l.left/f;u.upperBounds.top=(l.top-h)/f;u.upperBounds.right=l.right/f;u.upperBounds.bottom=(l.bottom-h)/f;u.upperBounds.width=l.width/f;u.upperBounds.height=l.height/f;return u};
a.getSelectionBoundaries=function(c){var f={};var h=c.getElementsByTagName("canvas");if(0!==h.length)f.start=h[0].id,f.end=h[h.length-1].id;else if(h=c.getElementsByTagName("span"),0!==h.length){for(c=0;isNaN(h[c].id);)c++;f.start=h[c].id;for(c=1;isNaN(h[h.length-c].id);)c++;f.end=h[h.length-c].id}return f};a.addSelectionListener=function(c){function f(u){"MSPointerDown"===u.type?l.addPointer(u.pointerId):"MSGestureTap"===u.type&&"Text"===c.contentWindow.document.selection.type&&(n.selection=null)}
var h=c.contentDocument.getElementsByTagName("body")[0],n=this;h.onselect=function(u){var x=c.contentWindow.document.selection;x&&"Text"===x.type?(x=x.createRange(),n.selection&&x.isEqual(n.selection)||(n.selection=x,x=c.ownerDocument.createEvent("CustomEvent"),x.initCustomEvent(u.type,!0,!0,u),c.dispatchEvent(x))):n.selection=null};c.contentDocument.onselectionchange=function(u){var x=c.contentWindow.document.selection;x&&"Text"===x.type&&(x=x.createRange(),n.selection&&!x.isEqual(n.selection)&&
(n.selection=null,x=c.ownerDocument.createEvent("CustomEvent"),x.initCustomEvent(u.type,!0,!0,u),c.dispatchEvent(x)))};h.onselectstart=function(u){var x=c.contentWindow.document.selection;x&&"None"===x.type&&n.selection&&(n.selection=null,u.preventDefault())};h.ondblclick=function(u){n.selection=null;var x=c.ownerDocument.createEvent("MouseEvent");x.initMouseEvent(u.type,!0,!0,window.parent,u.detail,u.screenX,u.screenY,u.clientX,u.clientY,u.ctrlKey,u.altKey,u.shiftKey,u.metaKey,u.button,null);c.dispatchEvent(x)};
if(window.MSGesture){var l=new MSGesture;l.target=h;h.addEventListener("MSGestureTap",f,!1);h.addEventListener("MSPointerDown",f,!1)}}}var g=0,b=g++,e=g++,d=g++;return{DATA_LOAD_ERROR:b,IFRAME_ERROR_LOADING:e,IFRAME_ERROR_PAGINATING:d,build:function(a,c){for(var f,h,n=[],l=[],u=0;2>u;u+=1){h=u;var x=c;f=document.createElement("iframe");var t="flow_"+h;f.index=h;f.processingRequestId={};f.setAttribute("frameBorder","0");f.setAttribute("id","frame_"+h);f.setAttribute("name","book_iframe_"+h);f.setAttribute("scrolling",
"no");f.style.msFlowInto=t;$(f).css({msFlowInto:t,position:"absolute",top:"0px",left:"0px",display:"none"});h=KindleRegionManagerFactory.build(f,t,x);n[u]=f;l[u]=h;c.appendChild(n[u])}a.loadedType={EMPTY:0,GOTO_POSITION:1,NEXT:2,PREVIOUS:3};a.direction={NEXT:2,PREVIOUS:3};a.iframes=n;a.regionManagers=l;a.iframeLoadStatus=[a.loadedType.EMPTY,a.loadedType.EMPTY];a.contentRange=[null,null];a.positionData=[null,null];a.visibleIframeIndex=0;a.hiddenIframeIndex=1;a.overlayManager=null;a.numColumns=1;a.columnGap=
20;a.margin=0;a.parent=c;a.selection=null;m(a)}}}();
function KindleRegionNodeFactory(q){var m=null,g=null,b=null,e=null;return{show:function(){q.style.left="0px"},hide:function(){q.style.left="-9999px"},setPagePositionRange:function(d,a){m=d;g=a},getPagePositionRange:function(){return{topOfPagePosition:m,bottomOfPagePosition:g}},setNumPageBreaks:function(d){b=d},getNumPageBreaks:function(){return b},getRegionContent:function(){return q.msGetRegionContent()},getRegionOverflow:function(){return e=q.msRegionOverflow},getCachedRegionOverflow:function(){return e},
getHeight:function(){return q.clientHeight}}}
function KindleRegionPageBreakPivot(q){var m,g;return{insert:function(b){if(!m){var e=q.contentDocument.createElement("div");e.className="renderer-page-break";for(var d=q.contentWindow.document.getElementById(b);!d.previousSibling&&!KindleRendererUtils.isBlock(d)&&"BODY"!==d.parentNode.tagName;)d=d.parentNode;q.contentWindow.document.body.firstElementChild!==d&&(d.parentNode.insertBefore(e,d),g=b,m=e)}},clear:function(){var b=q.contentDocument.getElementsByClassName("renderer-page-break");b&&0<b.length&&
b[0].parentNode.removeChild(b[0]);g=m=null},getPosition:function(){return g}}}
var KindleRegionManagerFactory=function(){function q(b){b.updateView=function(e,d){var a=!1,c=d.position;d=d.allowPartialScreen;switch(e){case g.NEXT_PAGE:var f=this.findPositionAfter(c);break;case g.PREVIOUS_PAGE:f=this.findPositionBefore(c);if(KindleRendererUtils.isNumeric(f))return a=this.showPreviousPage(f,d);break;case g.GO_TO_POSITION:this.computeFilledRegionNodes(),f=this.findPositionForGoTo(c)}KindleRendererUtils.isNumeric(f)&&(a=this.showPositionAtStart(f));return a};b.createDocumentFragmentWithRegions=
function(e){for(var d=document.createDocumentFragment(),a=0;a<e;a++){var c=document.createElement("div");$(c).css({msFlowFrom:this.flowName,position:"absolute",top:"0px",left:"-9999px",width:"100%",height:"100%","z-index":"100"});d.appendChild(c)}return d};b.computeFilledRegionNodes=function(){function e(f){for(var h=[],n=0;n<f.length;n++)h.push(KindleRegionNodeFactory(f[n]));return h}var d=this.regions,a;-1===this.regionCount&&(d=this.createDocumentFragmentWithRegions(KindleRendererDeviceSpecific.defaultNumRegions()),
this.container.appendChild(d),d=e(this.container.children),d=Array.prototype.slice.call(d));for(a=d[d.length-1].getRegionOverflow();"overflow"===a||"fit"===a;)d=this.createDocumentFragmentWithRegions(d.length/4),this.container.appendChild(d),d=e(this.container.children),d=Array.prototype.slice.call(d),a=d[d.length-1].getRegionOverflow();for(var c=0;c<d.length;c++)if(a=d[c].getRegionOverflow(),"empty"===a){this.regionCount=c;break}this.regions=d};b.getRegionWithPosition=function(e){for(var d=this.regions,
a,c=0;c<this.regionCount;c++)if(a=d[c].getPagePositionRange(),e>=a.topOfPagePosition&&e<=a.bottomOfPagePosition)return c;return null};b.showRegionWithPosition=function(e){var d=this.indexVisible;e=this.getRegionWithPosition(e);return null!==e?(this.hideRegion(d),this.showRegion(e),!0):!1};b.showRegion=function(e){var d=this.regions;return null!==e&&0<=e&&e<this.regionCount?(d[e].show(),this.indexVisible=e,!0):!1};b.hideRegion=function(e){var d=this.regions;return null!==e&&0<=e&&e<d.length?(d[e].hide(),
!0):!1};b.findPositionBefore=function(e){return this.findNearestPosition(e,this.DIRECTION.PREV)};b.findPositionAfter=function(e){return this.findNearestPosition(e,this.DIRECTION.NEXT)};b.findNearestPosition=function(e,d){var a=this.iframe.contentWindow.document.getElementById(e);if(a)e=d===this.DIRECTION.PREV?KindleRendererUtils.previousPositionedNode(a):d===this.DIRECTION.NEXT?KindleRendererUtils.nextPositionedNode(a):KindleRendererUtils.nextPositionedNode(a)||KindleRendererUtils.previousPositionedNode(a);
else{a=this.iframe.contentWindow.document.querySelectorAll("span.k4w, canvas.k4wc, img");for(var c=null,f=Infinity,h=0;h<a.length;h++){var n=parseInt(a[h].id,10)-e;d===this.DIRECTION.PREV&&0<n||d===this.DIRECTION.NEXT&&0>n||(n=Math.abs(n),0<n&&n<f&&(f=n,c=a[h]))}e=c}return e?parseInt(e.id,10):null};b.showPositionAtStart=function(e){return(e=this.iframe.contentWindow.document.getElementById(e))?(this.pageBreakPivot.clear(),this.pageBreakPivot.insert(e.id),this.computeFilledRegionNodes(),this.computePaginationData(),
this.showRegionWithPosition(e.id)):!1};b.fixPaginationDataHack=function(e,d){if(1<d){var a,c;for(a=0;a<d-1;a++){var f=e[a].getPagePositionRange();if(null!==f.topOfPagePosition)for(c=a+1;c<d;c++){var h=e[c].getPagePositionRange();if(null!==h.topOfPagePosition&&null!==h.bottomOfPagePosition){e[a].setPagePositionRange(f.topOfPagePosition,f.topOfPagePosition===h.topOfPagePosition?f.topOfPagePosition:h.topOfPagePosition-1);break}}}a=0;for(c=1;c<d;c++)a+=e[c].getNumPageBreaks();e[0].setNumPageBreaks(e[0].getNumPageBreaks()-
a)}};b.computePaginationData=function(){for(var e=this.regions,d=this.regionCount,a=0;a<d;a++){for(var c=e[a],f=c.getRegionContent(),h=[],n=[],l=[],u,x=null,t=null,v=0;v<f.length;v++)l[v]=f[v].cloneContents().querySelectorAll("span.k4w, canvas.k4wc, img"),h=h.concat(Array.prototype.slice.call(l[v])),u=f[v].cloneContents().querySelectorAll(".page-break, .pagebreak"),n=n.concat(Array.prototype.slice.call(u));h.length&&(x=parseInt(h[0].id,10),t=parseInt(h[h.length-1].id,10));c.setPagePositionRange(x,
t);c.setNumPageBreaks(n.length)}this.fixPaginationDataHack(e,d)};b.cleanUp=function(){$(this.container).empty();this.regions=[]};b.getPagePositionRange=function(){var e={},d=this.regions,a=this.indexVisible;d&&null!==a&&(e=d[a].getPagePositionRange(),e={currentTopOfPage:e.topOfPagePosition?e.topOfPagePosition:0,currentBottomOfPage:e.bottomOfPagePosition?e.bottomOfPagePosition:0});return e};b.findNextScreen=function(e,d){for(d=(KindleRendererUtils.isNumeric(d)?d:this.indexVisible)+1;d<this.regionCount;){var a=
this.regions[d].getPagePositionRange();if(null!==a.topOfPagePosition||null!==a.bottomOfPagePosition){if(e)return d;if(null===this.findPositionAfter(a.bottomOfPagePosition)){for(e=this.iframe.contentWindow.document.getElementById(a.bottomOfPagePosition);e.parentNode&&"BODY"!==e.parentNode.tagName;)e=e.parentNode;for(;e.nextSibling;){if("DIV"===e.nextSibling.nodeName&&"content-overlays"!==e.nextSibling.id)return null;e=e.nextSibling}}return d}d++}return null};b.findPreviousScreen=function(e,d){for(d=
(KindleRendererUtils.isNumeric(d)?d:this.indexVisible)-1;0<=d;){var a=this.regions[d].getPagePositionRange();if(null!==a.topOfPagePosition||null!==a.bottomOfPagePosition){if(e)return d;if(null===this.findPositionBefore(a.topOfPagePosition)){for(e=this.iframe.contentWindow.document.getElementById(a.topOfPagePosition);e.parentNode&&"BODY"!==e.parentNode.tagName;)e=e.parentNode;for(;e.previousSibling;){if("DIV"===e.previousSibling.nodeName&&"content-overlays"!==e.previousSibling.id)return null;e=e.previousSibling}}return d}d--}return null};
b.hasNextScreen=function(e){return null!==this.findNextScreen(e)};b.hasPreviousScreen=function(e){return null!==this.findPreviousScreen(e)};b.nextScreen=function(e){var d=this.regions,a=this.indexVisible,c=this.findNextScreen(e);this.hideRegion(a);null===c||"overflow"!==d[c].getCachedRegionOverflow()&&!e?(e=!1,KindleDebug.log("NextScreen: No more next screens to show.")):e=this.showRegion(c);return e};b.previousScreen=function(e){var d=!0,a=this.regions,c=this.indexVisible,f=this.findPreviousScreen(e);
this.hideRegion(c);if(null===f||"overflow"!==a[f].getCachedRegionOverflow()&&!e)d=!1,KindleDebug.log("PreviousScreen: No more previous screens to show.");else{if((a=this.pageBreakPivot.getPosition())&&this.getRegionWithPosition(a)-1===f){a=this.getPagePositionRange();a=this.findPositionBefore(a.currentTopOfPage);if(KindleRendererUtils.isNumeric(a))return this.showPreviousPage(a,e);if(e&&0===f)return KindleDebug.log("PreviousScreen: Could not find a position before to show. Assuming it is a cover."),
this.pageBreakPivot.clear(),this.computeFilledRegionNodes(),this.computePaginationData(),this.showRegion(f)}wasAbleToGoToNextScreen=this.showRegion(f)}return d};b.getNumColumns=function(){return parseInt(this.iframe.contentWindow.document.body.currentStyle.columnCount,10)};b.showPreviousPage=function(e,d){this.pageBreakPivot.clear();this.computeFilledRegionNodes();this.computePaginationData();var a=this.getRegionWithPosition(e),c=this.regions[a],f=this.iframe.contentWindow.document.getElementById(e),
h=this.getBoundingClientRect(f),n=this.container.getBoundingClientRect();if(0<c.getNumPageBreaks()||c.getPagePositionRange().bottomOfPagePosition===e)return this.showRegionWithPosition(e),!0;var l=this.getNumColumns();c=h.bottom;var u=n.width/l;f=null;if(c-n.top<h.height)return!0;if(1<l)for(n=1;n<=l;n++)if(h.left<u*n){f={start:u*(n-1),end:u*n};break}n=this.findPreviousScreen(d,a);if(null===n)d&&this.showRegionWithPosition(e);else{d=this.regions[n].getRegionContent();if(0<d.length){d=d[0].cloneContents().querySelectorAll("span.k4w, canvas.k4wc, img,.page-break, .pagebreak");
a=null;for(l=h=0;l!==this.regions[n].getNumPageBreaks();)u=$(d[h]),(u.hasClass("page-break")||u.hasClass("pagebreak"))&&l++,h++;for(;h<d.length;h++)if(n=this.iframe.contentWindow.document.getElementById(d[h].id),l=this.getBoundingClientRect(n),u=f?l.left>f.start&&l.left<f.end:!0,l.top>c&&u){a=n;break}a&&(this.pageBreakPivot.insert(a.id),this.computeFilledRegionNodes(),this.computePaginationData())}this.showRegionWithPosition(e);return!0}return!1};b.getBoundingClientRect=function(e){e=e.getBoundingClientRect();
var d=KindleRendererDeviceSpecific.resolutionScale();return{height:e.height/d,width:e.width/d,left:e.left/d,right:e.right/d,top:(e.top%this.container.clientHeight+this.container.getBoundingClientRect().top)/d,bottom:(e.bottom%this.container.clientHeight+this.container.getBoundingClientRect().top)/d}};b.show=function(){this.container.style.left="0px"};b.hide=function(){this.container.style.left="-9999px"};b.getApproximateNumNextScreens=function(e){for(var d=0,a=this.findNextScreen(e,this.indexVisible);null!==
a&&a<this.regionCount;)a=this.findNextScreen(e,a+1),d++;KindleDebug.log("getApproximateNumNextScreens: # of next screens left:"+d);return d};b.getApproximateNumPrevScreens=function(e){for(var d=0,a=this.findPreviousScreen(e,this.indexVisible);null!==a&&0<a;)a=this.findPreviousScreen(e,a-1),d++;KindleDebug.log("getApproximateNumPrevScreens: # of prev screens left:"+d);return d};b.getOffsetTop=function(){return this.regions[this.indexVisible].getHeight()*this.indexVisible};b.findPositionForGoTo=function(e){var d=
this.iframe,a=d.contentDocument.getElementById(e);if(!a){var c=this.findPositionAfter(e)||this.findPositionBefore(e);c&&(a=d.contentWindow.document.getElementById(c))}if(a){e=a;d=parseInt(e.id,10);for(a=a.getClientRects()[0].top;e;)if((e=KindleRendererUtils.previousPositionedNode(e))&&e.getClientRects()[0].top===a)d=parseInt(e.id,10);else break;e=d}return e}}function m(b){b.nextScreen=function(e){return this.internal.nextScreen(e)};b.previousScreen=function(e){return this.internal.previousScreen(e)};
b.hasNextScreen=function(e){return this.internal.hasNextScreen(e)};b.hasPreviousScreen=function(e){return this.internal.hasPreviousScreen(e)};b.getPagePositionRange=function(){return this.internal.getPagePositionRange()};b.cleanup=function(){this.internal.cleanup()};b.show=function(){this.internal.show()};b.hide=function(){this.internal.hide()};b.updateView=function(e,d){return this.internal.updateView(e,d)};b.getApproximateNumNextScreens=function(e){return this.internal.getApproximateNumNextScreens(e)};
b.getApproximateNumPrevScreens=function(e){return this.internal.getApproximateNumPrevScreens(e)};b.getOffsetTop=function(){return this.internal.getOffsetTop()};b.computeFilledRegionNodes=function(){this.internal.computeFilledRegionNodes()}}var g={GO_TO_POSITION:1,NEXT_PAGE:2,PREVIOUS_PAGE:3};return{VIEW_REQUEST:g,build:function(b,e,d){var a={internal:{}};a.internal.DIRECTION={NEXT:"next",PREV:"prev"};var c=a.internal,f=document.createElement("div");f.id="container_"+e;$(f).css({position:"absolute",
top:"0px",left:"0px",height:"100%",width:"100%"});d.appendChild(f);c.iframe=b;c.flowName=e;c.parent=d;c.container=f;c.regions=[];c.regionCount=-1;c.indexVisible=null;c.pageBreakPivot=KindleRegionPageBreakPivot(b);q(a.internal);m(a);return a}}}(),KindleRendererDeviceSpecific=function(){var q,m,g,b,e,d,a,c,f,h,n,l,u,x,t,v,r,k,y,w,z,A,B,C,D,F,M,N,L,P,V,Z,R;return{initialize:function(){var I=KindleHostDeviceDetector.getDevicePlatform();"desktop"===I?(q=2,m=10,g=3,b=25,e=5E3,d=1E3,a=5E3,c=25,f=5E3,h=25,
n=2500,l=0,u=-1,x=2,t=4900,v=KindleHostDeviceDetector.isIE(),r=6E4,k=15,KindleHostDeviceDetector.hasCanvasPerformanceProblem()&&(t=1750,d=200),"metro"!==I&&KindleHostDeviceDetector.isIE()&&(m=6,b=0,e=500,d=200,a=500,c=0,f=500,B=A=z=w=y=h=0,t=1750,C=v=!0,D=25,F=!0)):"lassen"===I?(q=1.2,m=7,g=2,d=200,u=2E4,t=1750,x=1,r=2E4,n=2500,l=0,KindleHostDeviceDetector.isiPhone()?(a=20,c=10,f=500,h=10,e=250,b=50):(a=300,c=50,f=500,h=20,e=250,b=10)):(q=1.2,m=7,g=2,b=50,e=250,d=200,a=300,c=50,f=5E3,h=50,n=2500,
l=0,u=1E4,x=2,t=1750,r=9E4,M=KindleHostDeviceDetector.isiOS()&&!KindleHostDeviceDetector.isiOS_4x());"metro"===I&&(x=1,v=!0);N=KindleHostDeviceDetector.isiOS_4x()||KindleHostDeviceDetector.isChrome&&KindleHostDeviceDetector.isChrome()&&0<=navigator.userAgent.indexOf("Chrome/18.");L=KindleHostDeviceDetector.isiOS();P=KindleHostDeviceDetector.isiOS();V=KindleHostDeviceDetector.isiPhone();Z=KindleHostDeviceDetector.isiOS()&&7===parseInt(KindleHostDeviceDetector.getOSMajorVersion(),10);R=KindleHostDeviceDetector.isiOS()&&
KindleHostDeviceDetector.getOSMajorVersion&&KindleHostDeviceDetector.getOSMinorVersion&&(6>parseInt(KindleHostDeviceDetector.getOSMajorVersion(),10)||6===parseInt(KindleHostDeviceDetector.getOSMajorVersion(),10)&&0===parseInt(KindleHostDeviceDetector.getOSMinorVersion(),10))},fragmentBufferCapacityForGoTo:function(){return q},fragmentBufferCapacityForPageFlip:function(I){return I?g:m},drawYieldUpdateTime:function(){return b},glyphCacheMaxSize:function(){return k||0},drawYieldWordMapGenUpdateTime:function(){return c},
drawYieldHeightMapUpdateTime:function(){return h},drawYieldScreenManagerFrequency:function(){return e},drawYieldGlyphRendereringFrequency:function(){return d},drawYieldWordMapGenFrequency:function(){return a},drawYieldHeightMapFrequency:function(){return f},drawYieldSanitizeNodesFrequency:function(){return n},yieldTimeOnContentReceived:function(){return y},yieldTimeAfterBulkWriteToIframe:function(){return w},yieldTimeBeforeBulkWriteToIframe:function(){return z},yieldTimeAfterIframeLoaded:function(){return A},
yieldTimeLoadNextFragment:function(){return B},needsReflowOnPageFlip:function(){return N},shouldRotateECJKChar:function(){return R},needsLanguageSpecificItalicsCheck:function(){return Z},usesDocRelativeVerticalCoordinates:function(){return L},needsWritingModeSpecifiedOnBody:function(){return P},verticalParagraphsScaleSeparately:function(){return V},reflowTimeout:function(){return u},maximumCanvases:function(){return t},animatePageFlip:function(){return M},clientRectsExpire:function(){return v},minColumnsToHide:function(){return x},
rendererInitializationTimeout:function(){return r},drawYieldSanitizeNodesTime:function(){return l||0},mightUseCSSRegions:function(){return C},mightUseNativeSelection:function(){return F},defaultNumRegions:function(){return D||0},resolutionScale:function(){var I=1;screen.deviceXDPI&&(I=screen.deviceXDPI/96);return I}}}(),KindleRendererLanguageOptions=function(){var q,m,g,b,e,d,a,c,f;function h(t){t=t&&t.split("-")[0].toLowerCase()||"en";if("ja"===t){var v={fontFamilyRegex:n,sansFont:"HiraKakuProN-W3",
serifFont:"'Hiragino Mincho ProN'",defaultFont:"'Hiragino Mincho ProN'"};q=!1;m=t;g="1.75";e=b=!0;d=!1;f=c=a=!0}else"zh"===t?(v={fontFamilyRegex:l,sansFont:"'Heiti SC'",serifFont:"'Songti SC'",defaultFont:"'Songti SC'"},q=!1,m=t,g="1.4",e=b=!0,d=!1,c=a=!0):(v={fontFamilyRegex:u,sansFont:"sans-serif",serifFont:"Georgia, serif",defaultFont:"Georgia, serif"},q=!0,m=t,g="1.4",e=b=!1,d=!0,c=a=!1),f=!1;x=v}var n=/(Hiragino)|(HiraKaku)/,l=/(Songti)|(Heiti)/,u=/(serif)|(sans-serif)|(gothic)/i;var x=f=c=a=
d=e=b=g=m=q=void 0;h("en");return{initialize:h,getHasWhitespaceDelimitedWords:function(){return q},getLanguage:function(){return m},getLineHeight:function(){return g},getAllowsVerticalLayout:function(){return b},getAllowsNegativeTextIndent:function(){return e},getAllowsClearStyle:function(){return d},getNeedsPageRefresh:function(){return a},getNeedsFontSanitization:function(){return c},getAcceptedFontFamiliesRegex:function(){return x.fontFamilyRegex},getSansFont:function(){return x.sansFont},getSerifFont:function(){return x.serifFont},
getDefaultFont:function(){return x.defaultFont},getAllowsItalicFont:function(){return!(f&&KindleRendererDeviceSpecific.needsLanguageSpecificItalicsCheck())}}}(),KindleRendererSettings=function(){function q(d,a,c){try{d.styleSheet&&d.styleSheet.addRule?d.styleSheet.addRule(a,c):d.sheet&&d.sheet.insertRule&&d.sheet.insertRule(a+"{"+c+"}",0)}catch(f){}}function m(d){var a=new jQuery.Deferred;d.getMetadata(function(c){void 0!==c.hasFixedContent&&(e.fixedContent=c.hasFixedContent);if(void 0!==c.publisherMetadata){var f=
c.publisherMetadata;if("metadata"===f[0]&&(f=f[2],void 0!==f))for(var h=f.length,n=0;n<h;++n){var l=f[n][1];void 0!==l&&("fixed-layout"===l.name?e.fixedContent="true"===l.content:"original-resolution"===l.name&&(l=l.content.match(/(\d+)[Xx](\d+)/))&&(e.originalResolution={width:parseInt(l[1],10),height:parseInt(l[2],10)}))}}void 0!==c.headerMetadata?(f=c.headerMetadata,f.fixedLayout&&(e.fixedContent="true"===f.fixedLayout),f.originalResolution&&(h=f.originalResolution.match(/(\d+)[Xx](\d+)/))&&(e.originalResolution=
{width:parseInt(h[1],10),height:parseInt(h[2],10)}),e.pageProgressionDirection={RTL:0,LTR:1},e.inlineBaseDirection={VERTICAL:0,HORIZONTAL:1},f.app_PrimaryWritingMode&&(e.pageProgressionDirection.value="vertical-rl"===f.app_PrimaryWritingMode||"horizontal-rl"===f.app_PrimaryWritingMode?e.pageProgressionDirection.RTL:e.pageProgressionDirection.LTR,null!==f.app_PrimaryWritingMode.match(/^vertical/)?e.inlineBaseDirection.value=e.inlineBaseDirection.VERTICAL:e.inlineBaseDirection.value=e.inlineBaseDirection.HORIZONTAL),
c=c.headerMetadata.app_contentLanguageTag):c="en";KindleRendererLanguageOptions.initialize(c);KindleRendererDeviceSpecific.verticalParagraphsScaleSeparately()&&KindleRendererLanguageOptions.getAllowsVerticalLayout()&&!e.fixedContent&&(e.initialExpandedBodyHeight="500%");e.lineSpacingMultiplier=1;a.resolve()},function(){a.reject()});return a.promise()}function g(){return!e.fixedContent&&KindleRendererDeviceSpecific.mightUseCSSRegions()&&"topaz"!==KindleRendererFragmentLoader.getBookContentType()}function b(){return!e.fixedContent&&
KindleRendererDeviceSpecific.mightUseNativeSelection()&&"topaz"!==KindleRendererFragmentLoader.getBookContentType()}var e={};return{initialize:function(d){return m(d)},cleanup:function(){e={}},getSettings:function(){return e},updateSettings:function(d){for(var a in d)e[a]=d[a]},addCSSRules:function(d){var a=e,c=document.getElementById("kindleRendererOptionsStylesheet");void 0!==c&&null!==c&&c.parentNode.removeChild(c);c=document.createElement("style");c.type="text/css";c.id="kindleRendererOptionsStylesheet";
if(!/MSIE ((5\.5)|6|(7\.0))/.test(navigator.userAgent)||"Win32"!==navigator.platform)try{if(d.appendChild(c),a.fixedContent)q(c,"body","position : absolute; margin: 0;"),a.originalResolution&&q(c,"body.amzUserPref","background-size: contain !important; width: "+a.originalResolution.width+"px; height: "+a.originalResolution.height+"px");else{var f;if(void 0!==a.fontSizes)for(q(c,"body.amzUserPref","font-size : "+a.fontSizes[2]+a.fontSizeUnits+" !important"),q(c,"font","font-size : "+a.fontSizes[2]+
a.fontSizeUnits+" !important"),f=0;f<a.fontSizes.length;f+=1)q(c,".font-size-"+(f+1),"font-size : "+a.fontSizes[f]+a.fontSizeUnits+" !important");if(void 0!==a.lineSpacingMultiplier){var h=KindleRendererLanguageOptions.getLineHeight()*a.lineSpacingMultiplier;q(c,"body.amzUserPref","line-height: "+h+"  !important")}void 0!==a.fontColor&&q(c,"body.amzUserPref","color : "+a.fontColor+" !important");void 0!==a.fontFamily&&q(c,"body.amzUserPref","font-family : "+a.fontFamily+" !important");void 0!==a.backgroundColor&&
q(c,"body.amzUserPref","background-color : "+a.backgroundColor+" !important");void 0!==a.textAlign&&q(c,"body.amzUserPref","text-align : "+a.textAlign+" !important");void 0!==a.margin&&q(c,"body.amzUserPref","margin : "+a.margin+" !important");void 0!==a.selectionColor&&q(c,"div.amazon-selection","background-color : "+a.selectionColor);void 0!==a.insertBgColor&&q(c,".insert","background-color : "+a.insertBgColor);if(void 0!==a.annotationStyles)for(var n in a.annotationStyles){var l=a.annotationStyles[n],
u=l.htmlElementTag?l.htmlElementTag+"."+l.className:"div."+l.className;q(c,u,l.style);if(l.additionalStyles)for(var x in l.additionalStyles){var t=l.additionalStyles[x];q(c,u+"."+t.className,t.style)}}void 0!==a.clickableElementFeedbackStyles&&q(c,"."+a.clickableElementFeedbackStyles.className,a.clickableElementFeedbackStyles.classStyle);if(void 0!==a.keyframes){var v=a.keyframes,r;for(r in v)q(c,r,v[r])}g()&&void 0!==a.columns&&(q(c,"body","column-count : "+a.columns.num),q(c,"body","column-gap : "+
a.columns.gap),q(c,"body","column-fill: auto"),c.styleSheet.cssText+="@media screen and (max-width:320px) { body { column-count: 1 } }");b()&&q(c,"::selection","background-color : "+a.selectionColor);if(void 0!==a.additionalRules&&void 0!==a.additionalRules.length)for(f=0;f<a.additionalRules.length;f+=1)q(c,a.additionalRules[f].selector,a.additionalRules[f].style)}}catch(k){}},useCSSRegions:g,useNativeSelection:b}}(),KindleRendererContentCorrection=function(){function q(k,y,w){if("vertical"===w.getWritingMode())for(k=
$(y.body).find(".azn-ECJK"),y=0;y<k.length;y++)if(w=k[y].firstChild.nodeValue.charCodeAt(0),65307<=w&&65308>=w||65310===w||65293===w)w="rotate(90deg) translateX("+(65293===w?".425":"0.5")+"em)",$(k[y]).css({display:"inline-block","-webkit-transform":w,width:"1em",height:"1em","text-indent":"0px","vertical-align":"text-top"})}function m(k,y,w){k=k.getComputedStyle(y.body).fontFamily;k=KindleRendererFontHelper.sanitizeFontFamily(k);y.body.setAttribute("style",(y.body.getAttribute("style")||"")+("; font-family: "+
k))}function g(k,y,w){k=$(y.body).find(".azn-UNB");for(y=0;y<k.length;++y)if(w=k[y].firstChild.nodeValue.charCodeAt(0),8213===w||8212===w||9472===w)9472!==w&&(w=String.fromCharCode(9472),k[y].innerHTML=w+w),$(k[y]).css("-webkit-transform","scaleY(.9)")}function b(k,y,w){if("vertical"===w.getWritingMode())for(k=$(y.body).find(".azn-NTE"),y=0;y<k.length;y++){w=k[y].firstChild.nodeValue.charCodeAt(0);switch(w){case 8220:w=12317;break;case 8221:w=12319}k[y].firstChild.nodeValue=String.fromCharCode(w)}}
function e(k,y,w){if("vertical"===w.getWritingMode())for(k=$("img",y.body).filter(function(){return"none"!==$(this).css("float")&&"block"!==$(this).parent().css("display")}),y=0;y<k.length;y++)$(k[y]).parent().css("display","block")}function d(k,y,w){if("horizontal"===w.getWritingMode())for(k=$('img[data-isGaiji="true"]',y.body),y=0;y<k.length;y++)$(k[y]).css("vertical-align","text-top")}function a(k,y,w){var z={position:"absolute",height:k.height,width:k.width};y?$.extend(z,{top:k.top,left:k.left+
1,borderLeft:"1px solid "+w}):$.extend(z,{top:k.top-1,left:k.left,borderBottom:"1px solid "+w});return z}function c(k,y,w){var z={position:"absolute",height:k.height,width:k.width};y?$.extend(z,{top:k.top,left:k.left-1,borderRight:"1px solid "+w}):$.extend(z,{top:k.top+1,left:k.left,borderTop:"1px solid "+w});return z}function f(k,y,w){var z={position:"absolute",top:k.top,left:k.left};y?$.extend(z,{height:k.height,width:Math.floor(k.width/2),borderRight:"1px solid "+w}):$.extend(z,{height:Math.floor(k.height/
2),width:k.width,borderBottom:"1px solid "+w});return z}function h(k,y,w){y=$('span:not([class*="azn-"])',y.body);for(w=0;w<y.length;++w){currNode=y[w];var z=k.getComputedStyle(currNode);if("horizontal"===z.webkitTextCombine&&"vertical-rl"===z.webkitWritingMode&&1<currNode.textContent.length&&5>currNode.textContent.length){currNode.setAttribute("data-isTextCombineBlock","true");var A=currNode;z=parseInt(z.fontSize,10);$(A).css("-webkit-text-combine","none");var B=A.getClientRects();if(0<B.length){var C=
B[0].height;B=-Math.floor((C-z)/2)+"px";z=C>z?" scaleY("+z/C+")":"";$(A).css({"-webkit-transform":"rotate(270deg)"+z,margin:B+" 0px"})}}}}function n(k,y,w){k=function(D,F){return(D=$(D).css("border-"+F+"-style"))&&"none"!==D};y=$('a, span:not([class*="azn-"])',y.body);for(w=0;w<y.length;w++){currNode=y[w];var z=k(currNode,"top");var A=k(currNode,"bottom");var B=k(currNode,"left");var C=k(currNode,"right");(z||A||B||C)&&currNode.setAttribute("data-hasCssBorder","true")}}function l(k,y,w){k=$("rt",
y.body);for(y=0;y<k.length;y++)$(k[y]).css("font-size","")}function u(k,y,w,z,A,B){if(null!==y.webkitWritingMode.match(B.getWritingMode())){var C=A.document,D=C.getElementById("text-decoration-correction");a:{var F=k;var M=y;var N=(N=$(F).attr("class"))&&N.match(/azn-/)?3:2;for(var L=0;L<=N;++L){if(!F){M=void 0;break a}if((M=F.getAttribute("data-cjktextdecoration")||M.textDecoration)&&"none"!==M){M={node:F,decoration:M};break a}else{F=F.parentElement;if(!F)break;M=A.getComputedStyle(F)}}M=void 0}F=
{underline:a,overline:c,"line-through":f};if(M&&F[M.decoration]){if(!D){N=C.getElementById("content-overlays");if(!N)return;D=C.createElement("DIV");D.id="text-decoration-correction";D.style.position="relative";D.style.zIndex="-8";N.appendChild(D)}F=F[M.decoration];M.node.setAttribute("data-cjktextdecoration",M.decoration);if("IMG"===k.tagName)z=z[w[0]].rects;else{k={};k.start=w[0];k.end=w[w.length-1];w=KindleRendererWordRectsHelper.createWordBoundaries(k,z,C,A,B);z=[];for(A=0;A<w.length;A++)z.push(w[A].rect);
z=z.sort(B.clientRectCompare)}w=C.createDocumentFragment();A=D.lastChild;M=M.node;k="vertical-rl"===y.webkitWritingMode;N=C.createElement("DIV");L=!0;var P=null,V=null;if(A&&0<z.length){var Z=$(A).data("data-cjktextdecoration");if(Z){var R=M===Z.node,I=B.checkIfNewLine(Z.line,z[0],!1);R=R&&!I;$(A).removeData("data-cjktextdecoration");if(R){L=!1;P=Z.line;N=A;var T=Z.maxHeight}}}for(A=0;A<z.length;A+=1)Z=z[A],L&&(P={top:Z.top,height:Z.height,left:Z.left,right:Z.right,width:Z.width},T={top:Infinity,
right:Infinity,bottom:-Infinity,left:-Infinity}),V=$.extend({},P),L=B.checkIfNewLine(P,z[A+1],!1),B.updateLineHeightOfBounds(T,Z),L&&(B.updateLineBounds(P,!1,T,z[A+1],C.width),$(N).css(F(P,k,y.color)),w.appendChild(N),N=C.createElement("DIV"));y={line:V,maxHeight:T,node:M};$(w.lastChild).data("data-cjktextdecoration",y);D.appendChild(w)}else D&&D.lastChild&&$(D.lastChild).removeData("data-cjktextdecoration")}}function x(k){k=k.querySelectorAll("[data-cjktextdecoration]");for(var y=0;y<k.length;++y){var w=
$(k[y]);w.attr("style",w.attr("style")+"; text-decoration: none !important")}}var t=[],v=[],r=[];return{initialize:function(){var k=KindleRendererLanguageOptions.getLanguage();"ja"===k?(t.push(g),t.push(b),t.push(e),t.push(d),t.push(n),t.push(l),KindleRendererDeviceSpecific.shouldRotateECJKChar()&&t.push(q),document.body&&void 0!==document.body.style.webkitWritingMode&&(t.push(h),v.push(u)),r.push(x)):"zh"===k&&(t.push(d),t.push(l));KindleRendererLanguageOptions.getNeedsFontSanitization()&&t.push(m)},
applyDocumentWideCorrections:function(k,y,w,z){z=z.createSubTimer("correction");for(var A=0;A<t.length;++A)t[A](k,y,w);z.endTimer()},applyNodeLocalCorrections:function(k,y,w,z,A,B){if(0!==v.length&&y&&0!==y.length){B=B.createSubTimer("correction");k=k.nodeType===Node.TEXT_NODE?k.parentNode:k;for(var C=z.getComputedStyle(k),D=0;D<v.length;++D)v[D](k,C,y,w,z,A);B.endTimer()}},cleanup:function(k){for(var y=0;y<r.length;++y)r[y](k)}}}(),KindleRendererDefaults=function(){function q(m,g,b){m.styleSheet&&
m.styleSheet.addRule?m.styleSheet.addRule(g,b):m.sheet&&m.sheet.insertRule&&m.sheet.insertRule(g+"{"+b+"}",m.sheet.cssRules?m.sheet.cssRules.length:m.sheet.rules.length)}return{addCSSRules:function(m,g){if("mobi8"===g){var b=document.createElement("style");b.type="text/css";b.id="kindleReaderStylesheetDefaults";try{m.insertBefore(b,m.firstChild);q(b,"html","font-size: 15px;");q(b,"table","color: inherit; font-size: inherit; line-height: inherit; font-weight: inherit; font-variant:inherit; font-style:inherit; white-space: inherit; word-wrap: inherit;");
KindleRendererDeviceSpecific.needsWritingModeSpecifiedOnBody()&&q(b,"body","-webkit-writing-mode: horizontal-tb");KindleRendererLanguageOptions.getDefaultFont()&&q(b,"body","font-family: "+KindleRendererLanguageOptions.getDefaultFont()+";");KindleRendererLanguageOptions.getLineHeight()&&q(b,"body","line-height: "+KindleRendererLanguageOptions.getLineHeight()+";");var e=KindleRendererSettings.getSettings().initialExpandedBodyHeight;void 0!==e&&q(stylesheet,"body","height: "+e+";")}catch(d){}}b=document.createElement("style");
b.type="text/css";b.id="kindleReaderStylesheetOverrides";try{m.appendChild(b),"mobi7"===g&&(q(b,"body","font-family: Georgia, serif; word-wrap: break-word;"),q(b,"p","margin-top: 0px; margin-bottom: 0px; text-indent:2em"),q(b,".was-a-p","margin-top: 0px; margin-bottom: 0px; text-indent:2em;"),q(b,"hr","margin-top: 15px; margin-bottom: 15px;"),q(b,"center,dd,div,dl,dt,li,ol,pre,table,ul,hr,h1,h2,h3,h4,h5,h6","margin-top: 0px; margin-bottom: 0px;"),q(b,"blockquote","text-indent: 0px; margin-top: 0px; margin-bottom: 0px;"),
q(b,"ul","list-style-type: disc;"),q(b,"ol, ul, li .was-a-p","text-indent: 0;"),q(b,"table.amazon-table-style-0","border-collapse:collapse; font-size: inherit;"),q(b,"table.amazon-table-style-0 tr td","border:none; padding:1px;"),q(b,"table.amazon-table-style-0 tr th","border:none; padding:1px; text-align:justify"),q(b,"table.amazon-table-style-1","border-collapse:collapse; font-size: inherit;"),q(b,"table.amazon-table-style-1 tr td","border:1px solid black; padding:1px;"),q(b,"table.amazon-table-style-1 tr th",
"border:1px solid black; padding:1px; text-align:justify")),"mobi8"===g&&(q(b,"body","word-wrap: break-word; padding: 0px !important;"),q(b,".azn-FWURG","-webkit-text-orientation: upright;"),q(b,".azn-NTE","-webkit-text-emphasis: none !important"),q(b,".azn-UNB","letter-spacing: 0em !important; display: inline-block; text-indent: 0px !important; -webkit-text-orientation: vertical-right !important;"),q(b,".azn-JPLB","display:inline-block; text-indent: 0px !important;")),q(b,".semiTransparentOverlay",
"z-index: 10 !important; opacity: 0.5"),q(b,"svg img","display: none;"),q(b,".page-break","display:block; padding:1px"),q(b,".pagebreak","display:block; padding:1px"),q(b,".defaultHighlight","background-color:#ffff9b"),q(b,".noDisplay","display:none"),q(b,"body","cursor: default; position: relative;"),KindleRendererSettings.getSettings().fixedContent||(q(b,"body","background: none !important; background-color: transparent !important;"),q(b,"html, body","width: auto; height: auto;")),KindleRendererSettings.useCSSRegions()&&
(q(b,".was-a-p","orphans:0; widows:0"),q(b,".page-break","break-before:column"),q(b,".pagebreak","break-before:column"),q(b,".renderer-page-break","width:0px; height:0px; break-before:always")),KindleRendererSettings.useNativeSelection()?q(b,"body","-webkit-user-select:text; -moz-user-select:text; -ms-user-select:text; unselectable: off;"):q(b,"body","-webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; unselectable: on;"),q(b,".kindle-annotation-wrapper, .kindle-annotation-wrapper *",
"margin: auto; padding: 0"),q(b,"div#content-overlays","margin: 0px; padding: 0px;")}catch(d){}}}}(),KindleRendererContentStyleSanitization=function(){function q(x,t){var v=x[t];void 0===v&&(t=n.exec(t),null!==t&&3<=t.length&&(t=t[1]+t[2].substring(0,1).toUpperCase()+t[2].substring(1),v=x[t]));return v}function m(x,t,v){if("float"===t)return v.hasFloat=!0;if("position"===t)return x=q(x,t),"inherit"!==x&&"static"!==x?v.isPositioned=!0:!1;if("width"===t)return x=q(x,t),void 0!==x?(v.widths||(v.widths=
{percent:[],fixed:[]}),0<=x.indexOf("%")?v.widths.percent.push(x):v.widths.fixed.push(x),!0):!1;if("height"===t)return x=q(x,t),void 0!==x?(v.heights||(v.heights={percent:[],fixed:[]}),0<=x.indexOf("%")?v.heights.percent.push(x):v.heights.fixed.push(x),!0):!1;if("max-width"===t||"max-height"===t)return x=q(x,t),void 0!==x&&0<=x.indexOf("%")?(v.prcntMaxDimension||(v.prcntMaxDimension=[]),v.prcntMaxDimension.push(x),!0):!1;if("font-size"===t)return x=q(x,t),void 0===x||l.test(x)?!1:(u.test(x)?v.remFontValue=
x.trim():v.absFontValue=x.trim(),!0);if("line-height"===t)return x=q(x,t),void 0!==x?(v.lineHeight=x,!0):!1;if("background-color"===t)return x=q(x,t),void 0!==x?(v.backgroundColorRgb=KindleRendererColorHelper.toRgbArray(x.trim()),!0):!1;if("text-indent"===t)return KindleRendererLanguageOptions.getAllowsNegativeTextIndent()||(x=q(x,t),void 0===x)?!1:(v.textIndent=x,!0);if("color"===t)return v.hasTextColor=!0;if("clear"===t)return KindleRendererLanguageOptions.getAllowsClearStyle()?!1:v.hasClearStyle=
!0;if("-webkit-text-combine"===t)return v.textCombine=q(x,t),!0;if("font-family"===t&&KindleRendererLanguageOptions.getNeedsFontSanitization())return v.langFontFamily=q(x,t),!0;if("font-style"===t)return v.fontStyle=q(x,t),!0;"display"===t&&(v.display=q(x,t));return!1}function g(x){try{for(var t={},v=x.style.length,r=!1,k=0;k<v;k++)r|=m(x.style,x.style[k],t);if(r)return t}catch(y){}return null}function b(x,t){for(var v=(x=x.rules?x.rules:x.cssRules)&&x.length||0,r=0;r<v;r++){var k=x[r];if(!k.style&&
k.media&&"all"===k.media.mediaText)b(k,t);else{if(k=g(x[r]))k.selectorText=x[r].selectorText,t.push(k);k=x[r];void 0!==k.selectorText&&"span"===k.selectorText&&(k.selectorText='span:not([class*="azn-"])');k=[];for(var y=0;y<k.length;++y)t.push(k[y])}}}function e(x,t){var v=KindleRendererScaleHelper.convertLength(x,"px");return v?(v=parseFloat(v),v=Math.floor(v),v=Math.min(v,t),v+"px"):x}function d(x,t,v,r,k,y,w,z){var A="",B;if(x.widths){var C=x.widths.percent,D=x.widths.fixed,F=.95*z.width;for(B=
0;B<C.length;B++)A+="width: auto; ","inline-block"===x.display&&95<parseInt(C[B],10)&&(A+="display: block; ");for(B=0;B<D.length;B++)C=e(D[B],F),A=1>parseInt(C,10)?A+"width: auto; ":A+("width: "+C+"; ")}if(x.heights){C=x.heights.percent;D=x.heights.fixed;F=.95*z.height;for(B=0;B<C.length;B++)A+="height: auto; ","inline-block"===x.display&&95<parseInt(C[B],10)&&(A+="display: block; ");for(B=0;B<D.length;B++)C=e(D[B],F),A=1>parseInt(C,10)?A+"height: auto; ":A+("height: "+C+"; ")}x.lineHeight&&(B=parseFloat(x.lineHeight),
A=0<x.lineHeight.indexOf("%")&&B>=100*k?A+("line-height : "+B*y+"%; "):/^\d*(\.\d+)?$/.test(x.lineHeight.trim())&&B>=k?A+("line-height : "+B*y+"; "):A+("line-height : "+k*y+"; "));if(x.prcntMaxDimension)for(B=0;B<x.prcntMaxDimension.length;B++)A+=x.prcntMaxDimension[B]+": none; ";x.hasFloat&&(A+="line-height : "+(k+.2)+"; ");x.isPositioned&&(A+="position: inherit; ");x.backgroundColorRgb&&!x.hasTextColor&&t&&(t=KindleRendererColorHelper.calculateTextColorForBackground(t,x.backgroundColorRgb))&&(A+=
"color : rgb("+t[0]+", "+t[1]+", "+t[2]+"); ");x.absFontValue&&(t=KindleRendererScaleHelper.scaleFont(x.absFontValue,v,r)||x.absFontValue,A+="font-size: "+t+"; ");x.remFontValue&&(w=Math.round(parseFloat(x.remFontValue)*parseInt(w,10))+"px",v=KindleRendererScaleHelper.scaleFont(w,v,r)||x.absFontValue,A+="font-size: "+v+"; ");x.textIndent&&0>parseInt(x.textIndent,10)&&(z=.9*z.width,v=x.textIndent.replace(/-/g,""),0<v.indexOf("%")?(v=parseFloat(v,10)/100,v=Math.min(v*z,z),v=Math.floor(v),v=Math.max(v,
1),v+="px"):v=e(v,z),A+="text-indent: -"+v+"; padding-left: "+v+"; ");x.hasClearStyle&&(A+="clear:none");x.textCombine&&(A+="-webkit-text-combine: "+x.textCombine+"; display: inline-block; text-indent: 0px; height: auto;");x.langFontFamily&&(z=KindleRendererFontHelper.sanitizeFontFamily(x.langFontFamily),A+="font-family: "+z+";");x.fontStyle&&("italic"!==x.fontStyle||KindleRendererLanguageOptions.getAllowsItalicFont()||(A+="font-style: normal;"));x.styleString&&(A+=x.styleString);return A}function a(x){var t=
x.styleSheets;x=$(x).find('link[rel*="stylesheet"][href], style');if(t.length<x.length){x=x.filter("link");t=$.makeArray(t);for(var v=$.map(t,function(w){return w.ownerNode}),r=0;r<x.length;++r){var k=x[r],y=k.sheet||k.styleSheet;y&&(y.rules||y.cssRules)&&0>v.indexOf(k)&&t.push(y)}}return t}function c(x){function t(){var z,A=0;y++;for(KindleRendererProcessTuning.startingOperation("SanitizeNodes");k.length&&A<w;){var B=k.pop();A++;if(B&&B.nodeType===Node.ELEMENT_NODE)for((z=B.getAttribute("style"))&&
0<z.length&&"IMG"!==B.tagName&&r.push(B),B=B.childNodes,z=0;z<B.length;z++)k.push(B[z])}KindleRendererProcessTuning.endingOperation("SanitizeNodes",A);k.length?setTimeout(t,processTimeout):v.resolve(r,y)}var v=$.Deferred(),r=[],k=[],y=0,w=KindleRendererProcessTuning.drawYieldFrequency("SanitizeNodes");processTimeout=KindleRendererProcessTuning.drawYieldUpdateTime("SanitizeNodes");k.push(x);t();return v.promise()}function f(x){var t=[];if(window.ActiveXObject&&window.XMLHttpRequest)return x=x.querySelectorAll("[style]:not(IMG)"),
$.Deferred().resolve(x);try{for(var v=(new XPathEvaluator).evaluate("/html/body//*[@style]",x,null,XPathResult.UNORDERED_NODE_ITERATOR_TYPE,null),r=v.iterateNext();r;)0<r.style.length&&"IMG"!==r.tagName&&t.push(r),r=v.iterateNext()}catch(k){return c(x.body)}return $.Deferred().resolve(t)}function h(x){var t=$(x).attr("style");t&&$(x).attr("style",t.replace(/!\s*important/g,""))}var n=/^(\w*)-(\w*)(-value)?$/,l=/%|[^r]em|smaller|larger/,u=/rem/;return{sanitizeCSS:function(x,t,v){for(var r=$('link[type="text/css"][title]',
x.head),k=0;k<r.length;++k)r[k].removeAttribute("title");if(!t.fixedContent){k=!1;r=x.getElementById("kindleReaderSanitizationStylesheet");if(!r){r=x.createElement("style");r.id="kindleReaderSanitizationStylesheet";r.type="text/css";k=r;for(var y=a(x),w=[],z=y.length,A=0;A<z;A++)b(y[A],w);k.sanitizationRules=w;k=!0}if(0<r.sanitizationRules.length){y=r.sanitizationRules;w=t.fontColor?KindleRendererColorHelper.toRgbArray(t.fontColor):null;z=t.fontSizes;A=t.fontSizeUnits;var B=KindleRendererLanguageOptions.getLineHeight();
t=t.lineSpacingMultiplier;for(var C=getComputedStyle(x.documentElement).fontSize,D="",F=y.length,M=0;M<F;M++)D+=y[M].selectorText+" { ",D+=d(y[M],w,z,A,B,t,C,v),D+=" } ";r.innerHTML=D}k&&x.head.appendChild(r)}},sanitizeContent:function(x,t,v){var r=$.Deferred();if(t.fixedContent)return r.resolve();h(x.body);f(x).done(function(k,y){y=t.fontColor?KindleRendererColorHelper.toRgbArray(t.fontColor):null;for(var w=t.fontSizes,z=t.fontSizeUnits,A=KindleRendererLanguageOptions.getLineHeight(),B=t.lineSpacingMultiplier,
C=getComputedStyle(x.documentElement).fontSize,D=k.length,F=0;F<D;F++){var M=k[F],N=M,L=N.getAttribute("data-origStyle");L?N.setAttribute("style",L):N.setAttribute("data-origStyle",N.getAttribute("style"));if(N=g(k[F]))L=M.getAttribute("style")||"",L+="; ",L+=d(N,y,w,z,A,B,C,v),M.setAttribute("style",L)}r.resolve()});return r.promise()},copySanitizationData:function(x,t){x=x.getElementById("kindleReaderSanitizationStylesheet");t=t.getElementById("kindleReaderSanitizationStylesheet");x&&t&&(t.sanitizationRules=
x.sanitizationRules)}}}(),KindleRendererColorHelper=function(){function q(a){if("#"===a.charAt(0))return 4===a.length?[parseInt(a.charAt(1)+a.charAt(1),16),parseInt(a.charAt(2)+a.charAt(2),16),parseInt(a.charAt(3)+a.charAt(3),16)]:7===a.length?[parseInt(a.charAt(1)+a.charAt(2),16),parseInt(a.charAt(3)+a.charAt(4),16),parseInt(a.charAt(5)+a.charAt(6),16)]:null;a=a.toUpperCase();var c=e[a];if(c)return c;a=b.exec(a);return null!==a&&4===a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3],10)]:
null}function m(a,c){return Math.abs(g(a)-g(c))}function g(a){return d[0]*a[0]+d[1]*a[1]+d[2]*a[2]}var b=/RGB\s*\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/,e={ALICEBLUE:[240,248,255],ANTIQUEWHITE:[250,235,215],AQUA:[0,255,255],AQUAMARINE:[127,255,212],AZURE:[240,255,255],BEIGE:[245,245,220],BISQUE:[255,228,196],BLACK:[0,0,0],BLANCHEDALMOND:[255,235,205],BLUE:[0,0,255],BLUEVIOLET:[138,43,226],BROWN:[165,42,42],BURLYWOOD:[222,184,135],CADETBLUE:[95,158,160],CHARTREUSE:[127,255,0],CHOCOLATE:[210,105,30],
CORAL:[255,127,80],CORNFLOWERBLUE:[100,149,237],CORNSILK:[255,248,220],CRIMSON:[220,20,60],CYAN:[0,255,255],DARKBLUE:[0,0,139],DARKCYAN:[0,139,139],DARKGOLDENROD:[184,134,11],DARKGRAY:[169,169,169],DARKGREY:[169,169,169],DARKGREEN:[0,100,0],DARKKHAKI:[189,183,107],DARKMAGENTA:[139,0,139],DARKOLIVEGREEN:[85,107,47],DARKORANGE:[255,140,0],DARKORCHID:[153,50,204],DARKRED:[139,0,0],DARKSALMON:[233,150,122],DARKSEAGREEN:[143,188,143],DARKSLATEBLUE:[72,61,139],DARKSLATEGRAY:[47,79,79],DARKSLATEGREY:[47,
79,79],DARKTURQUOISE:[0,206,209],DARKVIOLET:[148,0,211],DEEPPINK:[255,20,147],DEEPSKYBLUE:[0,191,255],DIMGRAY:[105,105,105],DIMGREY:[105,105,105],DODGERBLUE:[30,144,255],FIREBRICK:[178,34,34],FLORALWHITE:[255,250,240],FORESTGREEN:[34,139,34],FUCHSIA:[255,0,255],GAINSBORO:[220,220,220],GHOSTWHITE:[248,248,255],GOLD:[255,215,0],GOLDENROD:[218,165,32],GRAY:[128,128,128],GREY:[128,128,128],GREEN:[0,128,0],GREENYELLOW:[173,255,47],HONEYDEW:[240,255,240],HOTPINK:[255,105,180],INDIANRED:[205,92,92],INDIGO:[75,
0,130],IVORY:[255,255,240],KHAKI:[240,230,140],LAVENDER:[230,230,250],LAVENDERBLUSH:[255,240,245],LAWNGREEN:[124,252,0],LEMONCHIFFON:[255,250,205],LIGHTBLUE:[173,216,230],LIGHTCORAL:[240,128,128],LIGHTCYAN:[224,255,255],LIGHTGOLDENRODYELLOW:[250,250,210],LIGHTGRAY:[211,211,211],LIGHTGREY:[211,211,211],LIGHTGREEN:[144,238,144],LIGHTPINK:[255,182,193],LIGHTSALMON:[255,160,122],LIGHTSEAGREEN:[32,178,170],LIGHTSKYBLUE:[135,206,250],LIGHTSLATEGRAY:[119,136,153],LIGHTSLATEGREY:[119,136,153],LIGHTSTEELBLUE:[176,
196,222],LIGHTYELLOW:[255,255,224],LIME:[0,255,0],LIMEGREEN:[50,205,50],LINEN:[250,240,230],MAGENTA:[255,0,255],MAROON:[128,0,0],MEDIUMAQUAMARINE:[102,205,170],MEDIUMBLUE:[0,0,205],MEDIUMORCHID:[186,85,211],MEDIUMPURPLE:[147,112,216],MEDIUMSEAGREEN:[60,179,113],MEDIUMSLATEBLUE:[123,104,238],MEDIUMSPRINGGREEN:[0,250,154],MEDIUMTURQUOISE:[72,209,204],MEDIUMVIOLETRED:[199,21,133],MIDNIGHTBLUE:[25,25,112],MINTCREAM:[245,255,250],MISTYROSE:[255,228,225],MOCCASIN:[255,228,181],NAVAJOWHITE:[255,222,173],
NAVY:[0,0,128],OLDLACE:[253,245,230],OLIVE:[128,128,0],OLIVEDRAB:[107,142,35],ORANGE:[255,165,0],ORANGERED:[255,69,0],ORCHID:[218,112,214],PALEGOLDENROD:[238,232,170],PALEGREEN:[152,251,152],PALETURQUOISE:[175,238,238],PALEVIOLETRED:[216,112,147],PAPAYAWHIP:[255,239,213],PEACHPUFF:[255,218,185],PERU:[205,133,63],PINK:[255,192,203],PLUM:[221,160,221],POWDERBLUE:[176,224,230],PURPLE:[128,0,128],RED:[255,0,0],ROSYBROWN:[188,143,143],ROYALBLUE:[65,105,225],SADDLEBROWN:[139,69,19],SALMON:[250,128,114],
SANDYBROWN:[244,164,96],SEAGREEN:[46,139,87],SEASHELL:[255,245,238],SIENNA:[160,82,45],SILVER:[192,192,192],SKYBLUE:[135,206,235],SLATEBLUE:[106,90,205],SLATEGRAY:[112,128,144],SLATEGREY:[112,128,144],SNOW:[255,250,250],SPRINGGREEN:[0,255,127],STEELBLUE:[70,130,180],TAN:[210,180,140],TEAL:[0,128,128],THISTLE:[216,191,216],TOMATO:[255,99,71],TURQUOISE:[64,224,208],VIOLET:[238,130,238],WHEAT:[245,222,179],WHITE:[255,255,255],WHITESMOKE:[245,245,245],YELLOW:[255,255,0],YELLOWGREEN:[154,205,50]},d=[.2126/
255,.7152/255,.0722/255];return{toRgbArray:function(a){return q(a)},calculateTextColorForBackground:function(a,c){var f=m(c,a);if(.3>f){var h=g(c),n=g(a);h=.5>h?n<h?160:80:n>h?-160:-80;a=[Math.max(0,Math.min(255,a[0]+h)),Math.max(0,Math.min(255,a[1]+h)),Math.max(0,Math.min(255,a[2]+h))];c=m(a,c)>f?a:null}else c=null;return c}}}(),KindleRendererContentScripts=function(){function q(g){g=g.contentWindow.KindleContentInterface;"function"===typeof m.gotoPosition&&(g.gotoPosition=function(b,e){m.gotoPosition(e);
return!1});"function"===typeof m.openStoreDP&&(g.buyNow=g.showDetails=function(){m.openStoreDP();return!1})}var m;return{addInterfaceScripts:function(g){var b=g.contentDocument.getElementsByTagName("head")[0],e=document.createElement("script");e.language="Javascript";e.type="text/javascript";e.id="kindleContentInterface";if(!/MSIE ((5\.5)|6|(7\.0))/.test(navigator.userAgent)||"Win32"!==navigator.platform)try{b.appendChild(e),e.text="var KindleContentInterface = function() { return {  gotoPosition : function(frm, pos) {parent.KindleReaderUI.gotoPosition(pos); return false;},  buyNow : function() {parent.KindleReaderUI.openStoreDP();return false;},  showDetails : function() {parent.KindleReaderUI.openStoreDP();  return false;}  };}();",
m&&q(g)}catch(d){}},setCallbacks:function(g){m=g}}}(),KindleRendererEventHandler=function(){function q(g){var b=KindleRendererSettings.getSettings().clickableElementFeedbackStyles;if(void 0!==b){var e=b.className;g=$(g);b=function(){var d=$(this);d.unbind("animationend");d.unbind("webkitAnimationEnd");d.removeClass(e)};g.bind("animationend",b);g.bind("webkitAnimationEnd",b);g.addClass(e)}}function m(g){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0);g.dispatchEvent(b)}return{handleClick:function(g,
b,e){var d;if(d=b)b:{for(d=b;null!==d;){if(void 0!==d.getAttribute){var a=d.getAttribute("onclick")||d.getAttribute("href");if(null!==a&&0<a.length){d=!0;break b}}d=d.parentNode}d=!1}d?(q(b),m(b),b=!0):b=void 0;if(!b){g=g.getElementById("annotation-section");g=$(g).find("["+KindleRendererAnnotationRenderer.ANNOTATION_CLICK_ATTRIBUTE+"='true']").children();b=null;d=-Infinity;a=g.length;for(var c=0;c<a;c+=1){var f=g[c],h=$(f).offset();h.top-10<e.y&&e.y<h.top+$(f).height()+10&&h.left-10<e.x&&e.x<h.left+
$(f).width()+10&&(h=parseInt($(f).css("z-index"),10),isNaN(h)&&(h=0),h>d&&(d=h,b=f))}if(e=b){if((g=e.parentNode)&&"false"!==g.getAttribute(KindleRendererAnnotationRenderer.ANNOTATION_CLICK_FEEDBACK_ATTRIBUTE))for(g=g.childNodes,b=0;b<g.length;b++)q(g[b]);m(e);b=!0}else b=!1}return b}}}(),KindleRendererFontHelper=function(){var q=/(sans)|(gothic)/i,m=/serif/i;return{sanitizeFontFamily:function(g){var b=g.split(",");if(KindleRendererLanguageOptions.getNeedsFontSanitization()&&!g.match(KindleRendererLanguageOptions.getAcceptedFontFamiliesRegex())){g=
"";for(var e=0;e<b.length;++e){var d=b[e];g=d.match(q)?g+(KindleRendererLanguageOptions.getSansFont()+", "+d):d.match(m)?g+(KindleRendererLanguageOptions.getSerifFont()+", "+d):g+d;e<b.length-1&&(g+=",")}g.match(KindleRendererLanguageOptions.getAcceptedFontFamiliesRegex())||(g+=","+KindleRendererLanguageOptions.getDefaultFont());g+=" !important"}return g}}}();
KindleListUtilities=function(){return{binarySearch:function(q,m,g,b,e){if(!q.length)return 0;var d=q.length-1,a=0,c=0,f=0;b>a&&b<=d&&(a=b);for(e>=a&&e<d&&(d=e);a<=d;)if(c=Math.floor((a+d)/2),b=q[c],f=0,void 0===g?b>m?f=1:b<m&&(f=-1):f=g(m,b),0<f)d=c-1;else if(0>f)a=c+1;else return c;return 0===c||0>f?c:c-1},sortedMerge:function(q,m){var g=[],b=q.length,e=m.length,d=0,a=0;if(!b)return m;if(!e)return q;for(var c,f;d<b&&a<e;)c=q[d],f=m[a],c<f?(g.push(c),++d):(g.push(f),++a);for(;d<b;)g.push(q[d++]);
for(;a<e;)g.push(m[a++]);return g},first:function(q){return q[0]},last:function(q){return q[q.length-1]}}}();
var KindleRendererProcessTuning=function(){function q(g){var b=m[g];if(b){if(!b.unitTime)return b.frequency;g=b.frequency*b.unitTime;if(100<g){var e=Math.floor(Math.max(100/b.unitTime,b.minimumFrequency));e<b.frequency&&(b.frequency=e)}else 50>g?(e=Math.ceil(Math.max(50/b.unitTime,b.minimumFrequency)),e>b.frequency&&(b.frequency=e)):e=b.frequency}else e=KindleRendererDeviceSpecific["drawYield"+g+"Frequency"]?KindleRendererDeviceSpecific["drawYield"+g+"Frequency"]():100,b=KindleRendererDeviceSpecific["drawYield"+
g+"UpdateTime"]?KindleRendererDeviceSpecific["drawYield"+g+"UpdateTime"]():KindleRendererDeviceSpecific.drawYieldUpdateTime(),m[g]={frequency:e,minimumFrequency:e/4,yieldTime:b};return e}var m={};return{runAfterYield:function(g,b,e){2<=b&&0<=g?(b=KindleMetricsProfiler("(YIELD)"),setTimeout(e,g),b.endTimer()):e()},startingOperation:function(g){var b=m[g];b||(q(g),b=m[g]);b.startTime=Date.now()},endingOperation:function(g,b){var e=m[g];e||(q(g),e=m[g]);if(e.startTime){var d=Date.now()-e.startTime;1>
b||(g=m[g],d/=b,g.unitTime?(b=.1*b/g.frequency,g.unitTime=b*d+(1-b)*g.unitTime):g.unitTime=d);e.startTime=0}},drawYieldFrequency:function(g){return q(g)},drawYieldUpdateTime:function(g){var b=m[g];b||(q(time),b=m[g]);return b.yieldTime}}}(),KindleRendererScaleHelper=function(){function q(a,c){if(!d[c])return null;var f=a.match(b);return f?(f=d[f[1]],parseFloat(a,10)*f/d[c]):null}function m(a,c,f){if((a=a.match(g))&&0<c.length){a=e[a[1]];var h=Math.floor((c.length-1)/2),n=parseFloat(c[0],10);h=parseFloat(c[h],
10);c=parseFloat(c[c.length-1],10);return Math.min(c,Math.max(n,a*h))+f}return null}var g=/(xx-small|x-small|small|medium|large|x-large|xx-large)/,b=/(mm|cm|in|pt|pc|px)/,e={"xx-small":.6,"x-small":.75,small:.889,medium:1,large:1.2,"x-large":1.5,"xx-large":2},d={mm:2.835,cm:28.346,"in":72,pt:1,pc:6,px:1.25};return{scaleFont:function(a,c,f){if(f=f.match(b)){f=f[1];var h;(h=m(a,c,f))||(h=(a=q(a,"pt"))?m(a<=25*e["xx-small"]?"xx-small":a<=25*e["x-small"]?"x-small":a<=25*e.small?"small":a<=25*e.medium?
"medium":a<=25*e.large?"large":a<=25*e["x-large"]?"x-large":"xx-large",c,f):null);c=h}else c=a;return c},convertLength:function(a,c){return(a=q(a,c))?a+c:null}}}(),KindleRendererUtils=function(){function q(a){if(a){if(a.firstChild)return a.firstChild;if(a.nextSibling)return a.nextSibling;do a=a.parentNode;while(a&&!a.nextSibling);return a&&a.nextSibling}return null}function m(a){if(a){if(a.lastChild)return a.lastChild;if(a.previousSibling)return a.previousSibling;do a=a.parentNode;while(a&&!a.previousSibling);
return a&&a.previousSibling}return null}function g(a){return a?/^(SPAN|CANVAS|IMG)$/i.test(a.tagName)&&isFinite(a.id):!1}var b=/metro/i,e=/desktop/i,d={};return{nextPositionedNode:function(a){for(a=q(a);a;){if(g(a))return a;a=q(a)}return null},previousPositionedNode:function(a){for(a=m(a);a;){if(g(a))return a;a=m(a)}return null},followingNode:function(a){var c;if(a){for(c=a.nextSibling;a&&!c;)a=a.parentNode,c=a.nextSibling;return c}return null},precedingNode:function(a){var c;if(a){for(c=a.previousSibling;a&&
!c;)a=a.parentNode,c=a.previousSibling;return c}return null},isBlock:function(a){return a?/^(ADDRESS|ARTICLE|ASIDE|AUDIO|BLOCKQUOTE|DD|DIV|DL|FIELDSET|FIGCAPTION|FIGURE|FOOTER|FORM|H[1-6]|HEADER|HGROUP|HR|NOSCRIPT|OL|OUTPUT|P|PRE|SECTION|TABLE|TFOOT|UL|VIDEO)$/i.test(a.tagName):!1},findElementAtOrAfterPosition:function(a,c){a=a.querySelectorAll("span.k4w, canvas.k4wc, img");for(var f=0;a[f];){if(parseInt(a[f].id,10)>=c)return a[f];f++}return null},findElementAtOrBeforePosition:function(a,c){a=a.querySelectorAll("span.k4w, canvas.k4wc, img");
for(var f=null,h=0;a[h]&&parseInt(a[h].id,10)<=c;)f=a[h],h++;return f},treeDepth:function(a){for(var c=0;a.parentNode;)c++,a=a.parentNode;return c},elementFromPoint:function(a,c,f){var h=KindleHostDeviceDetector.getDevicePlatform(),n=h&&h.match(b);h=h&&h.match(e)&&KindleHostDeviceDetector.isIE();return n||h?a.msElementsFromPoint(c,f)[0]:a.elementFromPoint(c,f)},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},count:function(a,c,f){if(a){var h=d[a]||0;f||void 0===d[a]?d[a]=c:c&&(d[a]+=
c);return h}}}}(),KindleRendererWordRectsHelper=function(){function q(m,g,b){if(g)for(var e=g.length,d=0;d<e;d++)m.push({rect:g[d],dataNid:b})}return{createWordBoundaries:function(m,g,b,e,d){var a=[],c={},f=!1,h;for(h=m.start;h<=m.end;h+=1)if(g[h])if(g[h].rects)q(a,g[h].selectableRects||g[h].rects,g[h].dataNid),f=!0;else{var n=g[h];if(f||void 0===c[l]||c[l].dataNid!==n.dataNid||c[l].childIndex!==n.childIndex){c[h]={startOffset:n.startOffset,endOffset:n.endOffset,dataNid:n.dataNid,childIndex:n.childIndex};
var l=h}else{f=c[l].startOffset;if(void 0===f||f>n.startOffset)c[l].startOffset=n.startOffset;f=c[l].endOffset;if(void 0===f||f<n.endOffset)c[l].endOffset=n.endOffset}f=!1}for(h in c){m=c[h];g=void 0;var u=m,x=b;l=e;n=d;f=x.querySelector("[data-nid='"+u.dataNid+"']").childNodes[u.childIndex];x=x.createRange();x.setStart(f,u.startOffset);x.setEnd(f,u.endOffset);u=x.getClientRects();l&&l.getComputedStyle&&(g=l.getComputedStyle(f.parentNode));g=n.getTransformedClientRects(u,f,g);q(a,g,m.dataNid)}return a}}}(),
KindleRendererZoomableFixedContentFactory=function(){function q(d,a){return d.data&&a.data?void 0!==d.data.ordinal&&void 0!==a.data.ordinal?d.data.ordinal-a.data.ordinal:void 0===d.data.ordinal&&void 0===a.data.ordinal?0:void 0!==d.data.ordinal?-1:1:d.data||a.data?d.data?-1:1:0}function m(d,a){return d.getBoundingClientRect&&(d=d.getBoundingClientRect())?{top:d.top+a.y,right:d.right+a.x,bottom:d.bottom+a.y,left:d.left+a.x,width:d.width,height:d.height}:null}function g(d){d.setActive=function(a){if(this.sourceElement){var c=
this.sourceElement.ownerDocument;if(c&&this.data.targetId){var f=$(c).find("#"+this.data.targetId);a?(this.data.sourceId&&(a=$(c).find("#"+this.data.sourceId),0===f.html().trim().length&&(c=a.clone(),c.css({visibility:"visible",color:"black"}),$(f).append(c)),a.hide()),f.show()):(f.hide(),this.data.sourceId&&(a=$(c).find("#"+this.data.sourceId),a.show()))}}};d.isSame=function(a){return a.internalComparison(this.sourceElement)};d.internalComparison=function(a){return this.sourceElement===a};d.getBounds=
function(){if(this.sourceElement){var a=this.sourceElement.ownerDocument;if(a&&this.data.targetId&&(a=$(a).find("#"+this.data.targetId),a.is(":visible"))){var c=a.children(".target-mag");a=1===c.length?c:a;return m(a.get(0),this.origin)}return m(this.sourceElement,this.origin)}return null}}function b(d,a){d.activate=function(){return a.setActive(!0)};d.deactivate=function(){return a.setActive(!1)};d.isSame=function(c){return a.isSame(c)};d.getBounds=function(){return a.getBounds()};d.internalComparison=
function(c){return a.internalComparison(c)}}function e(d,a,c){d.origin=a;d.sourceElement=c;a=c.getAttribute("data-app-amzn-magnify");d.data=jQuery.parseJSON(a)}return{buildList:function(d,a){var c=[];d=$(d).find(".app-amzn-magnify").get();for(var f=0;f<d.length;f++)try{var h={};e(h,a,d[f]);g(h);c.push(h)}catch(n){}c.sort(q);a=[];for(d=0;d<c.length;d++)f={},b(f,c[d]),a.push(f);return a},buildFromCoord:function(d,a,c,f){a:{for(d=KindleRendererUtils.elementFromPoint(d,c-a.x,f-a.y);d;){if($(d).hasClass("app-amzn-magnify")){c=
d;break a}d=d.parentNode}c=null}if(c)try{return d={},e(d,a,c),g(d),a={},b(a,d),a}catch(h){}return null}}}(),KindleRendererZoomableReflowableContentFactory=function(){function q(b){for(;b;){if("IMG"===b.tagName)return b;b=b.parentNode}return null}function m(b){b.clone=function(){if(this.sourceElement)return $(this.sourceElement).clone().get(0)};b.getBounds=function(){if(this.sourceElement){a:{var e=this.sourceElement;var d=this.origin;if(e.getBoundingClientRect&&(e=e.getBoundingClientRect())){d={top:e.top+
d.y,right:e.right+d.x,bottom:e.bottom+d.y,left:e.left+d.x,width:e.width,height:e.height};break a}d=null}return d}return null}}function g(b,e){b.clone=function(){return e.clone()};b.getBounds=function(){return e.getBounds()}}return{buildFromCoord:function(b,e,d,a){d-=e.x;a-=e.y;var c=KindleRendererUtils.elementFromPoint(b,d,a);if(c&&c.className.match(/amazon-highlight/)){var f=c;f.style.display="none";c=KindleRendererUtils.elementFromPoint(b,d,a);f.style.display="block"}if(d=q(c))try{return b={},b.origin=
e,b.sourceElement=d,m(b),e={},g(e,b),e}catch(h){}return null},buildFromElement:function(b,e){var d=q(b);if(d)try{return b={},b.origin=e,b.sourceElement=d,m(b),e={},g(e,b),e}catch(a){}return null}}}(),KindleRendererZoomablesFactory=function(){return{buildList:function(q,m){return"absolute"===$(q.body).css("position")?KindleRendererZoomableFixedContentFactory.buildList(q,m):[]},buildFromCoord:function(q,m,g,b){return"absolute"===$(q.body).css("position")?KindleRendererZoomableFixedContentFactory.buildFromCoord(q,
m,g,b):KindleRendererZoomableReflowableContentFactory.buildFromCoord(q,m,g,b)}}}();_KReW_build_id="f637c2428609e06d5e621826b21e84d81ba5c2cc";
var KaramelAnnotationCallback=function(){return{AnnotationCallbacks:function(q){this.annotationHandler=q;this.onAddNote=function(m,g,b){this.annotationHandler.addNode(m,b,this.writingMode)}}}}(),KaramelAnnotations=function(){return{AnnotationHandler:function(q,m){var g=this,b=function(d){d=d.currentTarget.getAttribute("annotationStart");g.annotationEventCallback(KindleReaderAnnotationManager.NOTE,d)},e=function(d,a,c){try{d.styleSheet&&d.styleSheet.addRule?d.styleSheet.addRule(a,c):d.sheet&&d.sheet.insertRule&&
d.sheet.insertRule(a+"{"+c+"}",0)}catch(f){}};this.removeAllNoteAnnotations=function(){var d=document.getElementById("annotation-section");if(d)for(;d.firstChild;){var a=d.lastChild;a.removeEventListener("click",b);d.removeChild(a)}};this.reloadAnnotations=function(d,a){a.removeAnnotation(d.currentTopOfPage,d.currentBottomOfPage,KaramelGenClient.AnnotationType.Highlight);a.removeAnnotation(d.currentTopOfPage,d.currentBottomOfPage,KaramelGenClient.AnnotationType.SearchResult);this.removeAllNoteAnnotations();
var c=d.currentTopOfPage,f=d.currentBottomOfPage;d=KindleReaderAnnotationManager.getAnnotationsInRange(c,f,KindleReaderAnnotationManager.NOTE);c=KindleReaderAnnotationManager.getAnnotationsInRange(c,f,KindleReaderAnnotationManager.HIGHLIGHT);c=[].concat($jscomp.arrayFromIterable(d),$jscomp.arrayFromIterable(c));if(d=ReaderSitbHighlight.get())for(f=0;f<d.length;f++)c.push({type:KindleReaderOverlayManager.SEARCH_RESULT,start:d[f],end:d[f]});for(d=0;d<c.length;d++){f=c[d];switch(f.type){case KindleReaderAnnotationManager.HIGHLIGHT:var h=
KaramelGenClient.AnnotationType.Highlight;break;case KindleReaderAnnotationManager.NOTE:h=KaramelGenClient.AnnotationType.Note;break;case KindleReaderOverlayManager.SEARCH_RESULT:h=KaramelGenClient.AnnotationType.SearchResult}a.addAnnotation(f.start,f.end,h)}};this.setWritingMode=function(d){this.writingMode=d};this.getAnnotationStyles=function(){return this.annotationStyles};this.addAnnotationsCSSRules=function(d){if(void 0!==d){var a=document.getElementById("kindleRendererOptionsStylesheet");a&&
a.parentNode.removeChild(a);var c=document.getElementsByTagName("head")[0];a=document.createElement("style");a.type="text/css";a.id="kindleRendererOptionsStylesheet";c.appendChild(a);for(var f in d){c=d[f];var h=c.htmlElementTag?c.htmlElementTag+"."+c.className:"div."+c.className;e(a,h,c.style);if(c.additionalStyles)for(var n in c.additionalStyles){var l=c.additionalStyles[n];e(a,h+"."+l.className,l.style)}}}};this.addNode=function(d,a){if(void 0!==a&&0<a.length){var c=document.getElementById("annotation-section");
if(!c){var f=document.getElementsByTagName("body")[0];c=document.createElement("div");c.id="annotation-section";c.setAttribute("class","kindle-annotation-wrapper");f.appendChild(c)}f=this.getAnnotationStyles()[KindleReaderAnnotationManager.NOTE];a=a[a.length-1].getBoundingClientRect();var h=document.createElement("div");h.setAttribute("annotationStart",d);h.setAttribute("class",f.className);h.style.top=a.top+"px";h.style.left=a.left+a.width+"px";"horizontal_tb"!==this.writingMode&&(h.style.left=document.width-
a.left+a.width+"px");h.addEventListener("click",b);c.appendChild(h)}};this.annotationEventCallback=m;this.annotationStyles=q;this.addAnnotationsCSSRules(q)}}}(),KaramelEventCallback=function(){return{EventCallbacks:function(q){this.selection=new KaramelSelectionCallback.SelectionCallbacks;this.navigation=new KaramelNavigationCallback.NavigationCallbacks;this.annotation=new KaramelAnnotationCallback.AnnotationCallbacks(q);this.gestures=new KaramelGestureCallback.GestureCallbacks;this.view=new KaramelViewCallback.RenderingCallback}}}(),
KaramelGestureCallback=function(){return{GestureCallbacks:function(){this.onSwipeLeft=function(){KindleReaderUI.nextPage()};this.onSwipeRight=function(){KindleReaderUI.prevPage()}}}}(),KaramelMetrics=function(){return{KaramelMetricsHandler:function(){var q=KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER);this.recordTimeMetrics=function(m,g){q.emit("Karamel:JS:"+m,{breakdown:["Browser"],time:g})};this.recordCountMetrics=function(m,g){q.emit("Karamel:JS:"+m,{breakdown:["Browser"],
submetrics:[{name:"Count",value:g}]})}}}}(),KaramelNavigationCallback=function(){return{NavigationCallbacks:function(){this.onPageChange=function(){KindleRendererKaramel.getCurrentState().onPageChange()};this.onInternalClick=function(){KindleReaderUI.gotoPosition(null)}}}}(),KaramelNavigation=function(){return{NavigationHandler:function(q){this.previousPage=this.nextPage=!1;this.range=void 0;this.pageChangeCallback=q;this.getPagePositionRange=function(){return{currentTopOfPage:this.range.start,currentBottomOfPage:this.range.end}};
this.updateNavigationStatus=function(m,g,b){var e=this,d=[m.getMetadata(),m.getPagePositionRange(),m.hasPreviousPage(),m.hasNextPage()];Promise.allSettled(d).then(function(a){e.metadata=a[0].value;e.range=a[1].value;e.previousPage=a[2].value;e.nextPage=a[3].value;g.setWritingMode(e.metadata.writingMode);g.reloadAnnotations(e.getPagePositionRange(),m);e.pageChangeCallback();b.notifyStatusChange(KindleRenderer.STATUS_DONE)})}}}}(),KaramelSelectionCallback=function(){return{SelectionCallbacks:function(){this.onSelectionStarted=
function(){var q=KindleRendererKaramel.getCurrentState();ReaderSitbHighlight.clear();q.clearSearchHighlights()};this.onSelectionEnded=function(q,m,g,b){var e=g[0].getBoundingClientRect();g=g[g.length-1].getBoundingClientRect();q={start:q,end:m,lowerBounds:{right:g.right,bottom:g.bottom},upperBounds:{left:e.left,top:e.top},isWord:b};KindleRendererKaramel.getCurrentState().setSelectedObject(q);KindleReaderUI.onSelect(q)};this.onClear=function(){KindleReaderContextMenu.hide()}}}}(),KaramelSettings=function(){var q=
{"#121212":"night","#000000":"dark","#e7dec7":"sepia","#ffffff":"default",undefined:"default"},m=function(g,b,e){this.container=b;this.map=e;this.updateRequired=!1;var d={dpi:160,fontFamily:"bookerly",lineHeight:g.lineHeight,fontSize:g.fontSizes[2]/160*72,pageWidth:g.pageWidth,pageHeight:g.pageHeight,marginLeft:g.margin,marginRight:g.margin,marginTop:g.margin,marginBottom:g.margin,maxNumberColumns:g.columns.num,theme:q[g.backgroundColor]};this.isUpdateRequired=function(){return this.updateRequired};
this.getRenderOptions=function(){return Object.assign({},d)};this.update=function(a){var c=Object.keys(a);this.updateRequired=!1;var f=this;c.forEach(function(h){h in f.map?f.updateRequired=f.map[h](d,a[h],f):h in d&&d[h]!==a[h]&&(d[h]=a[h],f.updateRequired=!0)});return this}};return{SettingsHandler:m,buildSettings:function(g,b){return new m(g,b,{backgroundColor:function(e,d,a){return e.theme!==q[d]?(e.theme=q[d],!0):d.updateRequired},margin:function(e,d,a){a=a.container;return e.marginLeft!==d||
e.pageHeight!==a.clientHeight||e.pageHeight!==a.clientWidth?(e.marginLeft=d,e.marginRight=d,e.pageWidth=a.clientWidth,e.pageHeight=a.clientHeight,!0):theme.updateRequired},fontSizes:function(e,d,a){d=d[2]/160*72;return e.fontSize!==d?(e.fontSize=d,!0):theme.updateRequired},columns:function(e,d,a){return e.maxNumberColumns!==d.num?(e.maxNumberColumns=d.num,!0):a.updateRequired}})}}}(),KaramelState=function(){return{ReadyState:function(q,m,g,b,e){this.client=q;this.navigationHandler=m;this.stateHandler=
g;this.annotationHandler=b;this.settingsHandler=e;var d=this,a=function(){d.annotationHandler.removeAllNoteAnnotations();d.stateHandler.notifyStatusChange(KindleRenderer.STATUS_PAGINATING)};this.nextScreen=function(){if(!this.hasNextScreen())return!0;a();c(!0);return!1};this.previousScreen=function(){if(!this.hasPreviousScreen())return!0;a();f(!0);return!1};var c=function(h){h=void 0===h?!1:h;d.client.nextPage().catch(function(n){h&&n instanceof KaramelGenClient.ThrottlingException?setTimeout(c,500):
d.stateHandler.notifyStatusChange(KindleRenderer.STATUS_ERROR)})},f=function(h){h=void 0===h?!1:h;d.client.previousPage().catch(function(n){h&&n instanceof KaramelGenClient.ThrottlingException?setTimeout(f,500):d.stateHandler.notifyStatusChange(KindleRenderer.STATUS_ERROR)})};this.updateSettings=function(h){a();this.settingsHandler.update(h).isUpdateRequired()?(h=this.settingsHandler.getRenderOptions(),q.updateRenderOptions(h)):this.notifyStatus(KindleRenderer.STATUS_DONE)};this.reloadAnnotations=
function(h){this.annotationHandler.reloadAnnotations(h,this.client)};this.getPagePositionRange=function(){return this.navigationHandler.getPagePositionRange()};this.gotoPosition=function(h,n){n&&a();this.client.goToPosition(h).catch(function(l){console.log("Go To Position Failure: ",l);d.stateHandler.notifyStatusChange(KindleRenderer.STATUS_ERROR,void 0,l.message)})};this.hasNextScreen=function(){return this.navigationHandler.nextPage};this.hasPreviousScreen=function(){return this.navigationHandler.previousPage};
this.getFirstPostionId=function(){return this.navigationHandler.metadata.firstPositionId};this.getLastPositionId=function(){return this.navigationHandler.metadata.lastPositionId};this.onPageChange=function(){return this.navigationHandler.updateNavigationStatus(this.client,this.annotationHandler,this.stateHandler)};this.addNote=function(h,n,l){this.annotationHandler.addNode(h,l)};this.clearSelection=function(){this.client.clearTextSelection()};this.clearSearchHighlights=function(){var h=this.getPagePositionRange();
this.client.removeAnnotation(h.currentTopOfPage,h.currentBottomOfPage,KaramelGenClient.AnnotationType.SearchResult)};this.setSelectedObject=function(h){this.selectionObj=h};this.getSelectionObject=function(){return this.selectionObj};this.notifyStatus=function(h){this.stateHandler.notifyStatusChange(h)}},NoOpState:function(){this.nextScreen=function(){};this.previousScreen=function(){};this.updateSettings=function(q){};this.reloadAnnotations=function(q){};this.getPagePositionRange=function(){return{currentTopOfPage:1,
currentBottomOfPage:1}};this.gotoPosition=function(q){};this.hasNextScreen=function(){return!1};this.hasPreviousScreen=function(){return!1};this.getFirstPostionId=function(){return 1};this.getLastPositionId=function(){return 1};this.onPageChange=function(){};this.addNote=function(q,m,g){};this.clearSelection=function(){};this.clearSearchHighlights=function(){};this.setSelectedObject=function(q){};this.getSelectionObject=function(){};this.notifyStatus=function(){}}}}(),KaramelStatus=function(){return{KcrStatusHandler:function(q){_metricsManager=
KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER);this.statusCallback=q.statusCallback;var m=null;this.notifyStatusChange=function(g,b,e){function d(){var c={status:KindleRenderer.STATUS_ERROR,errorCode:KindleRenderer.ERROR_TIMEOUT_WHILE_LOADING_BOOK_CONTENT};_metricsManager||(_metricsManager=KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER));_metricsManager.emit("Karamel:JS:SpinnerTimeout");a.statusCallback(c)}var a=this;g===KindleRenderer.STATUS_LOADING||
g===KindleRenderer.STATUS_PAGINATING?m||(m=setTimeout(d,2E4)):m&&(clearTimeout(m),m=0);g={status:g};void 0!==b&&(g.errorCode=b);void 0!==e&&(g.errorMsg=e);void 0!==this.statusCallback&&this.statusCallback(g)}}}}(),KaramelViewCallback=function(){return{RenderingCallback:function(){this.onRenderingBlocking=function(q){KindleRendererKaramel.getCurrentState().notifyStatus(KindleRenderer.STATUS_PAGINATING)}}}}(),KindleRendererKaramel=function(){var q=new KaramelState.NoOpState,m=void 0,g=[],b=void 0;console.log("KindleRendererKaramel created");
var e=void 0,d,a=function(f,h,n){var l=new KaramelStatus.KcrStatusHandler(n),u=!1;e=void 0;l.notifyStatusChange(KindleRenderer.STATUS_LOADING);containerId=f.containerId;var x=$("#"+containerId).get(0),t=f.bookInfo.getAsin();h.pageWidth=x.clientWidth;h.pageHeight=x.clientHeight;console.log(f.bookInfo.getMetadata());return f.bookInfo.getMetadata().then(function(v){}).pipe(function(v){var r=KindleModuleManager.getModuleSync(KindleModuleManager.SERVICE_CLIENT),k=v.version;b=new KaramelSettings.buildSettings(h,
x);var y=new KaramelAnnotations.AnnotationHandler(h.annotationStyles,n.annotationEventCallback),w=new KaramelNavigation.NavigationHandler(n.pageChangeCallback),z=new KaramelEventCallback.EventCallbacks(y),A=b.getRenderOptions(),B=new KaramelMetrics.KaramelMetricsHandler;v=new KaramelGenClient.ServiceBookProviderFactory(v.sample?"sample":"fullbook",{getEncryptionId:function(){return f.bookInfo.getKindleSessionId()}},function(C){return new Promise(function(D,F){C.kindleSessionId=f.bookInfo.getKindleSessionId();
C.revision=k;u?C.locationMap=!1:(u=!0,C.locationMap=!0);r.karamelReading(C).pipe(function(M,N,L){""!==M&&null!==M?(M=new Blob([KindleUtils.strToBytes(M)],{type:"application/zip"}),M=new Response(M),D(M)):(KindleDebug.error("Output for KaramelReading is Null"),d.emit("Service::KaramelReading::OutputNull"),F())},function(){F()})})},B);m=KaramelGenClient.DefaultKaramelClientFactory.build({asin:t,bookRenderOptions:A,container:x,fontColor:"rgb(0, 0, 0)",layers:[],scale:1,navigationDirection:0,navigationMode:0,
bookProviderFactory:v,metricsService:B,eventListeners:z});return new KaramelState.ReadyState(m,w,l,y,b)})},c=function(f){q=f;g.forEach(function(h){return h(f)})};return{initialize:function(f,h,n,l){d||(d=KindleModuleManager.getModuleSync(KindleModuleManager.METRICS_MANAGER));var u=a(f,h,n);f.startingPositionDfd.done(function(x){u.done(function(t){c(t);q.gotoPosition(x)})})},shutdown:function(){var f=new KaramelState.NoOpState;c(f)},getMinimumPosition:function(){return q.getFirstPostionId()},getMaximumPosition:function(){return q.getLastPositionId()},
createWordIterator:function(){},updateSettings:function(f){q.updateSettings(f)},gotoPosition:function(f){q.gotoPosition(f,!0)},nextScreen:function(){return q.nextScreen()},previousScreen:function(){return q.previousScreen()},hasNextScreen:function(){return q.hasNextScreen()},hasPreviousScreen:function(){return q.hasPreviousScreen()},getPagePositionRange:function(){return q.getPagePositionRange()},getPageSelectableItemBoundaries:function(){return null},getPageWordPositions:function(){return null},
onWindowResize:function(){var f=$("#"+containerId);f.length&&(f=f.get(0),q.updateSettings({pageWidth:f.clientWidth,pageHeight:f.clientHeight}))},handleClick:function(f,h){},reloadAnnotations:function(){var f=q.getPagePositionRange();q.reloadAnnotations(f)},getContentRects:function(){},getZoomableAt:function(f,h){return null},getZoomableList:function(){return[]},clearSelection:function(){q.clearSelection()},getSelection:function(){return q.getSelectionObject()},getManifest:function(){return m.getManifest()},
getLocationMap:function(){var f=$.Deferred();void 0===e?m.getLocationMap().then(function(h){e=h;f.resolve(e)}):f.resolve(e);return f.promise()},getCurrentState:function(){return q},subscribe:function(f){g.push(f)},getRenderOptions:function(){return b.getRenderOptions()}}}();
/////////////////////////
// END FILE js/KindleReaderApp-min.js
/////////////////////////
/////////////////////////
// BEGIN FILE js/initReaderApp.js
/////////////////////////
/*


Full source (including license, if applicable) included below.
*/
window.onload=KindleReaderUI.initialize;
/////////////////////////
// END FILE js/initReaderApp.js
/////////////////////////

// END ASSET KCRClientAssets@kindleReaderApp-1.0.704.0
}));
////////////////////////////////////////////